
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Dynatrace Managed —Å AI-–ø–æ–º–æ—â–Ω–∏–∫–æ–º">
      
      
        <meta name="author" content="Yerkebulan Ardabayev">
      
      
        <link rel="canonical" href="https://yerkebulan-ardabayev.github.io/dynatrace-docs-website/notebooklm/ingest-from__google-cloud-platform/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Dynatrace Documentation: ingest-from/google-cloud-platform - Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dynatrace-documentation-ingest-fromgoogle-cloud-platform" class="md-skip">
          –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="–í–µ—Ä—Ö–Ω–∏–π –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª">
    <a href="../.." title="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" class="md-header__button md-logo" aria-label="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dynatrace Documentation: ingest-from/google-cloud-platform
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="–¢—ë–º–Ω–∞—è —Ç–µ–º–∞"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="–¢—ë–º–Ω–∞—è —Ç–µ–º–∞" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="–ü–æ–∏—Å–∫" placeholder="–ü–æ–∏—Å–∫" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="–ü–æ–∏—Å–∫">
        
        <button type="reset" class="md-search__icon md-icon" title="–û—á–∏—Å—Ç–∏—Ç—å" aria-label="–û—á–∏—Å—Ç–∏—Ç—å" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Yerkebulan-Ardabayev/dynatrace-docs-website" title="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    dynatrace-docs-website
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="–í–∫–ª–∞–¥–∫–∏" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  üè† –ì–ª–∞–≤–Ω–∞—è

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../managed/" class="md-tabs__link">
          
  
  
  üéØ Managed

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../common/" class="md-tabs__link">
          
  
  
  üìä –û–±—â–µ–µ

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../saas-reference/" class="md-tabs__link">
        
  
  
    
  
  üìñ SaaS

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../ai/groq/" class="md-tabs__link">
        
  
  
    
  
  ü§ñ AI

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" class="md-nav__button md-logo" aria-label="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>

    </a>
    Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Yerkebulan-Ardabayev/dynatrace-docs-website" title="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    dynatrace-docs-website
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üè† –ì–ª–∞–≤–Ω–∞—è
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üéØ Managed
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    üéØ Managed
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±–∑–æ—Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –£—Å—Ç–∞–Ω–æ–≤–∫–∞
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ù–∞—Å—Ç—Ä–æ–π–∫–∞
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±–Ω–æ–≤–ª–µ–Ω–∏—è
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ë—ç–∫–∞–ø
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/managed-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ö–ª–∞—Å—Ç–µ—Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –õ–∏—Ü–µ–Ω–∑–∏—è
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/dynatrace-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/observe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/ingest-from/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üìä –û–±—â–µ–µ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    üìä –û–±—â–µ–µ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±–∑–æ—Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../saas-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üìñ SaaS
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/groq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ü§ñ AI
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-cloud-run-monitoringmd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source: cloud-run-monitoring.md
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="dynatrace-documentation-ingest-fromgoogle-cloud-platform">Dynatrace Documentation: ingest-from/google-cloud-platform<a class="headerlink" href="#dynatrace-documentation-ingest-fromgoogle-cloud-platform" title="Permanent link">&para;</a></h1>
<p>Generated: 2026-02-17</p>
<p>Files combined: 56</p>
<hr />
<h2 id="source-cloud-run-monitoringmd">Source: cloud-run-monitoring.md<a class="headerlink" href="#source-cloud-run-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Run monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun/cloud-run-monitoring
scraped: 2026-02-17T05:06:30.054553</p>
<hr />
<h1 id="google-cloud-run-monitoring">Google Cloud Run monitoring<a class="headerlink" href="#google-cloud-run-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-run-monitoring_1">Google Cloud Run monitoring<a class="headerlink" href="#google-cloud-run-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics">View metrics<a class="headerlink" href="#view-metrics" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table">Metric table<a class="headerlink" href="#metric-table" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Run.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Billable Instance Time</td>
<td>Second</td>
<td>run.googleapis.com/container/billable_instance_time</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Container CPU Allocation</td>
<td>Second</td>
<td>run.googleapis.com/container/cpu/allocation_time</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Container CPU Utilization</td>
<td>Percent</td>
<td>run.googleapis.com/container/cpu/utilizations</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Instance Count</td>
<td>Count</td>
<td>run.googleapis.com/container/instance_count</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Max Concurrent Requests</td>
<td>Count</td>
<td>run.googleapis.com/container/max_request_concurrencies</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Container Memory Allocation</td>
<td>GibiByte</td>
<td>run.googleapis.com/container/memory/allocation_time</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Container Memory Utilization</td>
<td>Percent</td>
<td>run.googleapis.com/container/memory/utilizations</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Received Bytes</td>
<td>Byte</td>
<td>run.googleapis.com/container/network/received_bytes_count</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Sent Bytes</td>
<td>Byte</td>
<td>run.googleapis.com/container/network/sent_bytes_count</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Request Count</td>
<td>Count</td>
<td>run.googleapis.com/request_count</td>
</tr>
<tr>
<td>cloud_run_revision/default_metrics</td>
<td>Request Latency</td>
<td>MilliSecond</td>
<td>run.googleapis.com/request_latencies</td>
</tr>
</tbody>
</table>
<h2 id="related-topics">Related topics<a class="headerlink" href="#related-topics" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-cloudrunmd">Source: cloudrun.md<a class="headerlink" href="#source-cloudrunmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Monitor Google Cloud Run managed
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun
scraped: 2026-02-17T04:49:00.929369</p>
<hr />
<h1 id="monitor-google-cloud-run-managed">Monitor Google Cloud Run managed<a class="headerlink" href="#monitor-google-cloud-run-managed" title="Permanent link">&para;</a></h1>
<h1 id="monitor-google-cloud-run-managed_1">Monitor Google Cloud Run managed<a class="headerlink" href="#monitor-google-cloud-run-managed_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>11-min read</li>
<li>Published Sep 09, 2022</li>
</ul>
<p>Google <a href="https://cloud.google.com/run">Cloud Run√Ø¬ª¬ø</a> managed is a compute platform for running containers in a serverless environment. To monitor services running on Google Cloud Run managed using Dynatrace, you need to integrate OneAgent within your containerized application.</p>
<p>Support for Cloud Run managed in the <a href="https://cloud.google.com/run/docs/about-execution-environments">first generation and second generation√Ø¬ª¬ø</a> execution environments is currently limited to <strong>Java</strong> and <strong>Node.js</strong>.</p>
<h2 id="integrate-dynatrace-into-your-containers">Integrate Dynatrace into your containers<a class="headerlink" href="#integrate-dynatrace-into-your-containers" title="Permanent link">&para;</a></h2>
<p>There are several ways to build and deploy containers to Cloud Run, such as with <a href="https://cloud.google.com/build">Cloud Build√Ø¬ª¬ø</a>.</p>
<p>While the instructions to integrate Dynatrace may differ depending on the technology stack used to build and deploy, the integration of Dynatrace independently follows the same approach:</p>
<ol>
<li>Add necessary OneAgent binaries to your container image (for example, by either downloading from REST API or copying from the OneAgent image layer).</li>
<li>Configure OneAgent with the necessary connection parameters and additional options such as custom tags.</li>
<li>Enable process injection for automatic instrumentation of your workloads.</li>
</ol>
<h3 id="prerequisites_1">Prerequisites<a class="headerlink" href="#prerequisites_1" title="Permanent link">&para;</a></h3>
<p>Before you begin, you need to take care of the following:</p>
<ul>
<li>Get an <strong>access token</strong> to download the Dynatrace OneAgent with <code>InstallerDownload</code> scope. For details on access tokens, see <a href="/docs/dynatrace-api/basics/dynatrace-api-authentication" title="Find out how to get authenticated to use the Dynatrace API.">Dynatrace API - Tokens and authentication</a>.</li>
</ul>
<p>In the procedures that follow, replace <code>&lt;DT_TOKEN&gt;</code> with your actual access token.
* Get the <strong>environment ID</strong>. For details on environment IDs, see <a href="/docs/discover-dynatrace/get-started/monitoring-environment" title="Understand and learn how to work with monitoring environments.">What is a monitoring environment?</a>.</p>
<p>In the procedures that follow, replace <code>&lt;DT_ENV_ID&gt;</code> with your actual environment ID.
* Get your Dynatrace API endpoint as defined by your <a href="/docs/discover-dynatrace/get-started/monitoring-environment" title="Understand and learn how to work with monitoring environments.">Environment URL</a> or alternatively an <a href="/docs/ingest-from/dynatrace-activegate" title="Understand the basic concepts related to ActiveGate.">ActiveGate address</a>.</p>
<p>In the procedures that follow, replace <code>&lt;DT_ENV_FQDN&gt;</code> with the actual Dynatrace API endpoint.
* Install <a href="https://cloud.google.com/sdk/docs/install">gcloud CLI√Ø¬ª¬ø</a></p>
<p>After you have completed the above prerequisites, follow one of these procedures (select a tab) to integrate Dynatrace into your containers.</p>
<p>Cloud build with cloudbuild.yaml</p>
<p>Cloud Build without cloudbuild.yaml</p>
<p>Jib</p>
<h3 id="integrate-into-cloud-built-with-cloudbuildyaml">Integrate into cloud built with <code>cloudbuild.yaml</code><a class="headerlink" href="#integrate-into-cloud-built-with-cloudbuildyaml" title="Permanent link">&para;</a></h3>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Add OneAgent installer</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun#add-oneagent-installer-option-1 "Monitor Java application deployed on Google Cloud Run managed.")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Configure Cloud Build</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun#configure-cloud-build-option-1 "Monitor Java application deployed on Google Cloud Run managed.")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Build and deploy</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun#build-and-deploy-option-1 "Monitor Java application deployed on Google Cloud Run managed.")</p>
<h4 id="step-1-add-the-oneagent-installer-to-a-docker-image">Step 1 Add the OneAgent installer to a Docker image<a class="headerlink" href="#step-1-add-the-oneagent-installer-to-a-docker-image" title="Permanent link">&para;</a></h4>
<p>Requires Docker version 17.05+</p>
<p>Open your Dockerfile and add the following lines to the application image <strong>after</strong> the last <code>FROM</code> and <strong>before</strong> your container entrypoint.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># FROM ...
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>ARG DT_API_URL=&quot;&lt;DT_ENV_FQDN&gt;/api&quot;
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>ARG DT_API_TOKEN=&quot;&lt;DT_TOKEN&gt;&quot;
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>ARG DT_ONEAGENT_OPTIONS=&quot;flavor=&lt;DT_FLAVOR&amp;include=&lt;DT_TECHNOLOGY&gt;&quot;
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>ENV DT_HOME=&quot;/opt/dynatrace/oneagent&quot;
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>RUN apt-get update &amp;&amp; \
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>apt-get install -y wget &amp;&amp; \
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>apt-get install unzip &amp;&amp; \
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>mkdir -p &quot;$DT_HOME&quot; &amp;&amp; \
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>wget -O &quot;$DT_HOME/oneagent.zip&quot; &quot;$DT_API_URL/v1/deployment/installer/agent/unix/paas/latest?Api-Token=$DT_API_TOKEN&amp;$DT_ONEAGENT_OPTIONS&quot; &amp;&amp; \
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>unzip -d &quot;$DT_HOME&quot; &quot;$DT_HOME/oneagent.zip&quot; &amp;&amp; \
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>rm &quot;$DT_HOME/oneagent.zip&quot;
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>ENV LD_PRELOAD /opt/dynatrace/oneagent/agent/lib64/liboneagentproc.so
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a># Run the web service on container startup.
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a># ENTRYPOINT ...
</code></pre></div>
<p>Make sure to substitute the placeholders with your actual values.</p>
<ul>
<li><code>&lt;DT_ENV_FQDN&gt;</code> is your actual Dynatrace API endpoint as described in the <a href="#prerequisites">Prerequisites</a>.</li>
<li><code>&lt;DT_TOKEN&gt;</code> is your actual token as described in the <a href="#prerequisites">Prerequisites</a>.</li>
<li><code>&lt;DT_TECHNOLOGY&gt;</code> is your OneAgent artefact specific to your images technology-stack like either <code>java</code> or <code>nodejs</code>.</li>
<li><code>&lt;DT_FLAVOR&gt;</code> For Alpine Linux based images, choose <code>musl</code>, otherwise <code>default</code></li>
</ul>
<p>The <code>wget</code> and <code>unzip</code> commands above might fail if they aren't provided by the base image.</p>
<p>Example</p>
<p>A sample Dockerfile as provided by Google via the Getting Started guide on Google Cloud Run with Java, adapted with the instructions provided above.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a># Use the official maven/Java 11 image to create a build artifact.
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a># https://hub.docker.com/_/maven
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>FROM maven:3-jdk-11-slim AS build-env
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a># Set the working directory to /app
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>WORKDIR /app
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a># Copy the pom.xml file to download dependencies
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>COPY pom.xml .
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a># Copy local code to the container image.
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>COPY src ./src
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a># Download dependencies and build a release artifact.
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a>RUN mvn package -DskipTests
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a># Use OpenJDK for base image.
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a># https://hub.docker.com/_/openjdk
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a>
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a>
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a>
<a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a># https://docs.docker.com/develop/develop-images/multistage-build/#use-multi-stage-builds
<a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a>
<a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a>
<a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a>
<a id="__codelineno-1-57" name="__codelineno-1-57" href="#__codelineno-1-57"></a>FROM openjdk:11-jre-slim
<a id="__codelineno-1-58" name="__codelineno-1-58" href="#__codelineno-1-58"></a>
<a id="__codelineno-1-59" name="__codelineno-1-59" href="#__codelineno-1-59"></a>
<a id="__codelineno-1-60" name="__codelineno-1-60" href="#__codelineno-1-60"></a>
<a id="__codelineno-1-61" name="__codelineno-1-61" href="#__codelineno-1-61"></a># Copy the jar to the production image from the builder stage.
<a id="__codelineno-1-62" name="__codelineno-1-62" href="#__codelineno-1-62"></a>
<a id="__codelineno-1-63" name="__codelineno-1-63" href="#__codelineno-1-63"></a>
<a id="__codelineno-1-64" name="__codelineno-1-64" href="#__codelineno-1-64"></a>
<a id="__codelineno-1-65" name="__codelineno-1-65" href="#__codelineno-1-65"></a>COPY --from=build-env /app/target/hello-world-*.jar /hello-world.jar
<a id="__codelineno-1-66" name="__codelineno-1-66" href="#__codelineno-1-66"></a>
<a id="__codelineno-1-67" name="__codelineno-1-67" href="#__codelineno-1-67"></a>
<a id="__codelineno-1-68" name="__codelineno-1-68" href="#__codelineno-1-68"></a>
<a id="__codelineno-1-69" name="__codelineno-1-69" href="#__codelineno-1-69"></a># Get and enable Dynatrace
<a id="__codelineno-1-70" name="__codelineno-1-70" href="#__codelineno-1-70"></a>
<a id="__codelineno-1-71" name="__codelineno-1-71" href="#__codelineno-1-71"></a>
<a id="__codelineno-1-72" name="__codelineno-1-72" href="#__codelineno-1-72"></a>
<a id="__codelineno-1-73" name="__codelineno-1-73" href="#__codelineno-1-73"></a>ARG DT_API_URL=&quot;&lt;DT_ENV_FQDN&gt;/api&quot;
<a id="__codelineno-1-74" name="__codelineno-1-74" href="#__codelineno-1-74"></a>
<a id="__codelineno-1-75" name="__codelineno-1-75" href="#__codelineno-1-75"></a>
<a id="__codelineno-1-76" name="__codelineno-1-76" href="#__codelineno-1-76"></a>
<a id="__codelineno-1-77" name="__codelineno-1-77" href="#__codelineno-1-77"></a>ARG DT_API_TOKEN=&quot;&lt;DT_TOKEN&gt;&quot;
<a id="__codelineno-1-78" name="__codelineno-1-78" href="#__codelineno-1-78"></a>
<a id="__codelineno-1-79" name="__codelineno-1-79" href="#__codelineno-1-79"></a>
<a id="__codelineno-1-80" name="__codelineno-1-80" href="#__codelineno-1-80"></a>
<a id="__codelineno-1-81" name="__codelineno-1-81" href="#__codelineno-1-81"></a>ARG DT_ONEAGENT_OPTIONS=&quot;flavor=default&amp;include=java&quot;
<a id="__codelineno-1-82" name="__codelineno-1-82" href="#__codelineno-1-82"></a>
<a id="__codelineno-1-83" name="__codelineno-1-83" href="#__codelineno-1-83"></a>
<a id="__codelineno-1-84" name="__codelineno-1-84" href="#__codelineno-1-84"></a>
<a id="__codelineno-1-85" name="__codelineno-1-85" href="#__codelineno-1-85"></a>ENV DT_HOME=&quot;/opt/dynatrace/oneagent&quot;
<a id="__codelineno-1-86" name="__codelineno-1-86" href="#__codelineno-1-86"></a>
<a id="__codelineno-1-87" name="__codelineno-1-87" href="#__codelineno-1-87"></a>
<a id="__codelineno-1-88" name="__codelineno-1-88" href="#__codelineno-1-88"></a>
<a id="__codelineno-1-89" name="__codelineno-1-89" href="#__codelineno-1-89"></a>RUN apt-get update &amp;&amp; \
<a id="__codelineno-1-90" name="__codelineno-1-90" href="#__codelineno-1-90"></a>
<a id="__codelineno-1-91" name="__codelineno-1-91" href="#__codelineno-1-91"></a>
<a id="__codelineno-1-92" name="__codelineno-1-92" href="#__codelineno-1-92"></a>
<a id="__codelineno-1-93" name="__codelineno-1-93" href="#__codelineno-1-93"></a>apt-get install -y wget &amp;&amp; \
<a id="__codelineno-1-94" name="__codelineno-1-94" href="#__codelineno-1-94"></a>
<a id="__codelineno-1-95" name="__codelineno-1-95" href="#__codelineno-1-95"></a>
<a id="__codelineno-1-96" name="__codelineno-1-96" href="#__codelineno-1-96"></a>
<a id="__codelineno-1-97" name="__codelineno-1-97" href="#__codelineno-1-97"></a>apt-get install unzip &amp;&amp; \
<a id="__codelineno-1-98" name="__codelineno-1-98" href="#__codelineno-1-98"></a>
<a id="__codelineno-1-99" name="__codelineno-1-99" href="#__codelineno-1-99"></a>
<a id="__codelineno-1-100" name="__codelineno-1-100" href="#__codelineno-1-100"></a>
<a id="__codelineno-1-101" name="__codelineno-1-101" href="#__codelineno-1-101"></a>mkdir -p &quot;$DT_HOME&quot; &amp;&amp; \
<a id="__codelineno-1-102" name="__codelineno-1-102" href="#__codelineno-1-102"></a>
<a id="__codelineno-1-103" name="__codelineno-1-103" href="#__codelineno-1-103"></a>
<a id="__codelineno-1-104" name="__codelineno-1-104" href="#__codelineno-1-104"></a>
<a id="__codelineno-1-105" name="__codelineno-1-105" href="#__codelineno-1-105"></a>wget -O &quot;$DT_HOME/oneagent.zip&quot; &quot;$DT_API_URL/v1/deployment/installer/agent/unix/paas/latest?Api-Token=$DT_API_TOKEN&amp;$DT_ONEAGENT_OPTIONS&quot; &amp;&amp; \
<a id="__codelineno-1-106" name="__codelineno-1-106" href="#__codelineno-1-106"></a>
<a id="__codelineno-1-107" name="__codelineno-1-107" href="#__codelineno-1-107"></a>
<a id="__codelineno-1-108" name="__codelineno-1-108" href="#__codelineno-1-108"></a>
<a id="__codelineno-1-109" name="__codelineno-1-109" href="#__codelineno-1-109"></a>unzip -d &quot;$DT_HOME&quot; &quot;$DT_HOME/oneagent.zip&quot; &amp;&amp; \
<a id="__codelineno-1-110" name="__codelineno-1-110" href="#__codelineno-1-110"></a>
<a id="__codelineno-1-111" name="__codelineno-1-111" href="#__codelineno-1-111"></a>
<a id="__codelineno-1-112" name="__codelineno-1-112" href="#__codelineno-1-112"></a>
<a id="__codelineno-1-113" name="__codelineno-1-113" href="#__codelineno-1-113"></a>rm &quot;$DT_HOME/oneagent.zip&quot;
<a id="__codelineno-1-114" name="__codelineno-1-114" href="#__codelineno-1-114"></a>
<a id="__codelineno-1-115" name="__codelineno-1-115" href="#__codelineno-1-115"></a>
<a id="__codelineno-1-116" name="__codelineno-1-116" href="#__codelineno-1-116"></a>
<a id="__codelineno-1-117" name="__codelineno-1-117" href="#__codelineno-1-117"></a>ENV LD_PRELOAD /opt/dynatrace/oneagent/agent/lib64/liboneagentproc.so
<a id="__codelineno-1-118" name="__codelineno-1-118" href="#__codelineno-1-118"></a>
<a id="__codelineno-1-119" name="__codelineno-1-119" href="#__codelineno-1-119"></a>
<a id="__codelineno-1-120" name="__codelineno-1-120" href="#__codelineno-1-120"></a>
<a id="__codelineno-1-121" name="__codelineno-1-121" href="#__codelineno-1-121"></a># Run the web service on container startup.
<a id="__codelineno-1-122" name="__codelineno-1-122" href="#__codelineno-1-122"></a>
<a id="__codelineno-1-123" name="__codelineno-1-123" href="#__codelineno-1-123"></a>
<a id="__codelineno-1-124" name="__codelineno-1-124" href="#__codelineno-1-124"></a>
<a id="__codelineno-1-125" name="__codelineno-1-125" href="#__codelineno-1-125"></a>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/hello-world.jar&quot;]
</code></pre></div>
<h4 id="step-2-adjust-your-google-cloud-build-configuration-file">Step 2 Adjust your Google Cloud Build configuration file<a class="headerlink" href="#step-2-adjust-your-google-cloud-build-configuration-file" title="Permanent link">&para;</a></h4>
<p>Open your <a href="https://cloud.google.com/build/docs/deploying-builds/deploy-cloud-run#continuous_deployment">cloudbuild.yaml√Ø¬ª¬ø</a> file and add the following environment variables and bash commands to the build step:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a># Build the container image
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>- name: &#39;gcr.io/cloud-builders/docker&#39;
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>args: [&#39;build&#39;, &#39;-t&#39;, &#39;gcr.io/&lt;GCP_PROJECT_ID&gt;/&lt;YOUR_IMAGE_NAME_AND_TAG&gt;&#39;, &#39;.&#39;]
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a># Push the container image to Container Registry
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>- name: &#39;gcr.io/cloud-builders/docker&#39;
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>args: [&#39;push&#39;, &#39;gcr.io/&lt;GCP_PROJECT_ID&gt;/&lt;YOUR_IMAGE_NAME_AND_TAG&gt;&#39;]
</code></pre></div>
<p>Add the following lines to your args in your deploy step:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a># Deploy container image to Cloud Run
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>- name: &#39;gcr.io/google.com/cloudsdktool/cloud-sdk&#39;
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>entrypoint: gcloud
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>args:
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>- beta
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>- run
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>- deploy
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>- $_SERVICE_NAME
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>- --allow-unauthenticated
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>- --image=gcr.io/&lt;GCP_PROJECT_ID&gt;/&lt;YOUR_IMAGE_NAME_AND_TAG&gt;
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a>
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>
<a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a>
<a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a>- --region=$_GCP_REGION
<a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>
<a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a>
<a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a>
<a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a>- --execution-environment=&lt;ENVIRONMENT&gt;
<a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a>
<a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a>
<a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a>
<a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a>- --project=$_PROJECT
<a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a>
<a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a>
<a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a>
<a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a>- --set-env-vars=
<a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a>
<a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a>
<a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a>
<a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a>DT_TAGS=$_SERVICE_NAME,
<a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a>
<a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a>
<a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a>
<a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a>DT_LOGLEVELCON=INFO
</code></pre></div>
<p>Make sure to substitute the placeholders with your actual values.</p>
<ul>
<li><code>&lt;GCP_PROJECT_ID&gt;</code> is the name of your <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">Google Cloud project√Ø¬ª¬ø</a></li>
<li><code>&lt;YOUR_IMAGE_NAME_AND_TAG&gt;</code> is the name and the tag of your image to be built</li>
<li><code>&lt;ENVIRONMENT&gt;</code> is the execution environment you want to use. Valid options are <code>gen1</code> for first generation and <code>gen2</code> for second generation.</li>
</ul>
<p>You can change the <code>DT_TAGS</code> environment variable to another value as needed.</p>
<h4 id="step-3-build-and-deploy-your-cloud-run-service">Step 3 Build and deploy your Cloud Run Service<a class="headerlink" href="#step-3-build-and-deploy-your-cloud-run-service" title="Permanent link">&para;</a></h4>
<p>Edit and run this command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>gcloud builds submit \
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>&lt;SAMPLE_NAME&gt; \
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>--project &lt;GCP_PROJECT_ID&gt; \
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>--substitutions \
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>&quot;_API_KEY=&lt;DT_TOKEN&gt;,\
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>_TENANT_NAME=&lt;DT_ENV_ID&gt;,\
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>_TENANT_FQDN=&lt;DT_ENV_FQDN&gt;,\
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>_IMAGE_NAME_AND_TAG=&lt;YOUR_IMAGE_NAME_AND_TAG&gt;,\
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>_SERVICE_NAME=&lt;YOUR_SERVICE_NAME&gt;,\
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>_PROJECT=&lt;GCP_PROJECT_ID&gt;,\
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>_GCP_REGION=&lt;GCP_REGION&gt;,\&quot; \
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>--config cloudbuild.yaml
</code></pre></div>
<p>Make sure to substitute the placeholders with your actual values.</p>
<ul>
<li><code>&lt;SAMPLE_NAME&gt;</code>is the name of your Cloud Run Service</li>
<li><code>&lt;GCP_PROJECT_ID&gt;</code> is the name of your <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">Google Cloud project√Ø¬ª¬ø</a></li>
<li><code>&lt;YOUR_IMAGE_NAME_AND_TAG&gt;</code> is the name and the tag of your image to be built</li>
</ul>
<h3 id="integrate-into-cloud-built-without-cloudbuildyaml">Integrate into cloud built without <code>cloudbuild.yaml</code><a class="headerlink" href="#integrate-into-cloud-built-without-cloudbuildyaml" title="Permanent link">&para;</a></h3>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Add OneAgent installer</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun#add-oneagent-installer-option-2 "Monitor Java application deployed on Google Cloud Run managed.")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Build and deploy</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun#build-and-deploy-option-2 "Monitor Java application deployed on Google Cloud Run managed.")</p>
<h4 id="step-1-add-the-oneagent-installer-to-a-docker-image_1">Step 1 Add the OneAgent installer to a Docker image<a class="headerlink" href="#step-1-add-the-oneagent-installer-to-a-docker-image_1" title="Permanent link">&para;</a></h4>
<p>Requires Docker version 17.05+</p>
<p>Open your Dockerfile and add the following sample to the application image <strong>after</strong> the last <code>FROM</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ARG DT_API_URL=&quot;&lt;DT_ENV_FQDN&gt;/api&quot;
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>ARG DT_API_TOKEN=&quot;&lt;DT_TOKEN&gt;&quot;
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>ARG DT_ONEAGENT_OPTIONS=&quot;flavor=default&amp;include=java&quot;
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>ENV DT_HOME=&quot;/opt/dynatrace/oneagent&quot;
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>RUN apt-get update &amp;&amp; \
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>apt-get install -y wget &amp;&amp; \
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>apt-get install unzip &amp;&amp; \
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>mkdir -p &quot;$DT_HOME&quot; &amp;&amp; \
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>wget -O &quot;$DT_HOME/oneagent.zip&quot; &quot;$DT_API_URL/v1/deployment/installer/agent/unix/paas/latest?Api-Token=$DT_API_TOKEN&amp;$DT_ONEAGENT_OPTIONS&quot; &amp;&amp; \
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>unzip -d &quot;$DT_HOME&quot; &quot;$DT_HOME/oneagent.zip&quot; &amp;&amp; \
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>rm &quot;$DT_HOME/oneagent.zip&quot;
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a>ENV LD_PRELOAD /opt/dynatrace/oneagent/agent/lib64/liboneagentproc.so
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a># Run the web service on container startup.
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/hello-world.jar&quot;]
</code></pre></div>
<p>Make sure to substitute the placeholders with your actual values.</p>
<ul>
<li><code>&lt;DT_ENV_FQDN&gt;</code> is your actual Dynatrace API endpoint as described in the <a href="#prerequisites">Prerequisites</a>.</li>
<li>
<p><code>&lt;DT_TOKEN&gt;</code> is your actual token as described in the <a href="#prerequisites">Prerequisites</a>.</p>
</li>
<li>
<p>Technology support is enabled via <code>include</code> parameters. For Alpine Linux√¢¬Ä¬ìbased environments, use <code>flavor=musl&amp;include=java</code>.</p>
</li>
<li>The <code>wget</code> and <code>unzip</code> commands above might fail if they aren't provided by the base image.</li>
</ul>
<p>Example</p>
<p>This is a sample Dockerfile as provided by Google via the Getting Started guide on Google Cloud Run with Java, adapted with the instructions provided above.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a># Use the official maven/Java 11 image to create a build artifact.
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a># https://hub.docker.com/_/maven
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>FROM maven:3-jdk-11-slim AS build-env
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a># Set the working directory to /app
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>WORKDIR /app
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a># Copy the pom.xml file to download dependencies
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>COPY pom.xml .
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a># Copy local code to the container image.
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>COPY src ./src
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a># Download dependencies and build a release artifact.
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>RUN mvn package -DskipTests
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a># Use OpenJDK for base image.
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a># https://hub.docker.com/_/openjdk
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a># https://docs.docker.com/develop/develop-images/multistage-build/#use-multi-stage-builds
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a>FROM openjdk:11-jre-slim
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a># Copy the jar to the production image from the builder stage.
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a>
<a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a>COPY --from=build-env /app/target/hello-world-*.jar /hello-world.jar
<a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a>
<a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a>
<a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a>
<a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a># Get and enable Dynatrace
<a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a>
<a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a>
<a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a>
<a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a>ARG DT_API_URL=&quot;&lt;DT_ENV_FQDN&gt;/api&quot;
<a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a>
<a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a>
<a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a>
<a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a>ARG DT_API_TOKEN=&quot;&lt;DT_TOKEN&gt;&quot;
<a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a>
<a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a>
<a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a>
<a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a>ARG DT_ONEAGENT_OPTIONS=&quot;flavor=default&amp;include=java&quot;
<a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a>
<a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a>
<a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a>
<a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a>ENV DT_HOME=&quot;/opt/dynatrace/oneagent&quot;
<a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a>
<a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a>
<a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a>
<a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a>RUN apt-get update &amp;&amp; \
<a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a>
<a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a>
<a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a>
<a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a>apt-get install -y wget &amp;&amp; \
<a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a>
<a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a>
<a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a>
<a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a>apt-get install unzip &amp;&amp; \
<a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a>
<a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a>
<a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a>
<a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a>mkdir -p &quot;$DT_HOME&quot; &amp;&amp; \
<a id="__codelineno-6-102" name="__codelineno-6-102" href="#__codelineno-6-102"></a>
<a id="__codelineno-6-103" name="__codelineno-6-103" href="#__codelineno-6-103"></a>
<a id="__codelineno-6-104" name="__codelineno-6-104" href="#__codelineno-6-104"></a>
<a id="__codelineno-6-105" name="__codelineno-6-105" href="#__codelineno-6-105"></a>wget -O &quot;$DT_HOME/oneagent.zip&quot; &quot;$DT_API_URL/v1/deployment/installer/agent/unix/paas/latest?Api-Token=$DT_API_TOKEN&amp;$DT_ONEAGENT_OPTIONS&quot; &amp;&amp; \
<a id="__codelineno-6-106" name="__codelineno-6-106" href="#__codelineno-6-106"></a>
<a id="__codelineno-6-107" name="__codelineno-6-107" href="#__codelineno-6-107"></a>
<a id="__codelineno-6-108" name="__codelineno-6-108" href="#__codelineno-6-108"></a>
<a id="__codelineno-6-109" name="__codelineno-6-109" href="#__codelineno-6-109"></a>unzip -d &quot;$DT_HOME&quot; &quot;$DT_HOME/oneagent.zip&quot; &amp;&amp; \
<a id="__codelineno-6-110" name="__codelineno-6-110" href="#__codelineno-6-110"></a>
<a id="__codelineno-6-111" name="__codelineno-6-111" href="#__codelineno-6-111"></a>
<a id="__codelineno-6-112" name="__codelineno-6-112" href="#__codelineno-6-112"></a>
<a id="__codelineno-6-113" name="__codelineno-6-113" href="#__codelineno-6-113"></a>rm &quot;$DT_HOME/oneagent.zip&quot;
<a id="__codelineno-6-114" name="__codelineno-6-114" href="#__codelineno-6-114"></a>
<a id="__codelineno-6-115" name="__codelineno-6-115" href="#__codelineno-6-115"></a>
<a id="__codelineno-6-116" name="__codelineno-6-116" href="#__codelineno-6-116"></a>
<a id="__codelineno-6-117" name="__codelineno-6-117" href="#__codelineno-6-117"></a>ENV LD_PRELOAD /opt/dynatrace/oneagent/agent/lib64/liboneagentproc.so
<a id="__codelineno-6-118" name="__codelineno-6-118" href="#__codelineno-6-118"></a>
<a id="__codelineno-6-119" name="__codelineno-6-119" href="#__codelineno-6-119"></a>
<a id="__codelineno-6-120" name="__codelineno-6-120" href="#__codelineno-6-120"></a>
<a id="__codelineno-6-121" name="__codelineno-6-121" href="#__codelineno-6-121"></a># Run the web service on container startup.
<a id="__codelineno-6-122" name="__codelineno-6-122" href="#__codelineno-6-122"></a>
<a id="__codelineno-6-123" name="__codelineno-6-123" href="#__codelineno-6-123"></a>
<a id="__codelineno-6-124" name="__codelineno-6-124" href="#__codelineno-6-124"></a>
<a id="__codelineno-6-125" name="__codelineno-6-125" href="#__codelineno-6-125"></a>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/hello-world.jar&quot;]
</code></pre></div>
<h4 id="step-2-build-and-deploy-your-cloud-run-service">Step 2 Build and deploy your Cloud Run Service<a class="headerlink" href="#step-2-build-and-deploy-your-cloud-run-service" title="Permanent link">&para;</a></h4>
<p>To build your Cloud Run Service, edit and run the following command within your project directory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>gcloud builds submit --region=&lt;GCP_REGION&gt; --tag gcr.io/&lt;GCP_PROJECT_ID&gt;/&lt;YOUR_IMAGE_NAME_AND_TAG&gt;
</code></pre></div>
<p>To deploy your Cloud Run Service, edit and run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>gcloud run deploy &lt;YOUR_SERVICE_NAME&gt; --image gcr.io/&lt;GCP_PROJECT_ID&gt;/&lt;YOUR_IMAGE_NAME_AND_TAG&gt;
</code></pre></div>
<p>Make sure to substitute the placeholders with your actual values.</p>
<ul>
<li><code>&lt;GCP_REGION&gt;</code> is the name of the <a href="https://cloud.google.com/compute/docs/regions-zones">Google Cloud region√Ø¬ª¬ø</a> you deploy</li>
<li><code>&lt;GCP_PROJECT_ID&gt;</code> is the name of your <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">Google Cloud project√Ø¬ª¬ø</a></li>
<li><code>&lt;YOUR_IMAGE_NAME_AND_TAG&gt;</code> is the name and the tag of your image to be built</li>
<li><code>&lt;YOUR_SERVICE_NAME&gt;</code> is the name of the service that will be displayed in Dynatrace</li>
</ul>
<h3 id="integrate-using-jib-container-tool">Integrate using Jib container tool<a class="headerlink" href="#integrate-using-jib-container-tool" title="Permanent link">&para;</a></h3>
<p>Google's <a href="https://github.com/GoogleContainerTools/jib">Jib√Ø¬ª¬ø</a> container tool builds optimized Docker and OCI images for your Java applications without a Docker daemon√¢¬Ä¬îand without requiring deep mastery of Docker best practices. It is available as plugins for Maven and Gradle and as a Java library.</p>
<p>In the GitHub repository for Jib, you can find a <a href="https://github.com/GoogleContainerTools/jib/blob/master/examples/java-agent/build.gradle">sample integration for the Google StackDriver Java agent√Ø¬ª¬ø</a> that follows the same pattern as the Dynatrace integration (Download, Configure, and Inject). You can adapt this blueprint to your needs for integrating Dynatrace using jib.</p>
<h2 id="additional-configuration">Additional configuration<a class="headerlink" href="#additional-configuration" title="Permanent link">&para;</a></h2>
<p>You can use additional environment variables to configure, for example, troubleshooting or advanced networking settings.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Networking</strong></td>
<td></td>
</tr>
<tr>
<td><code>DT_NETWORK_ZONE</code></td>
<td>Specifies to use a network zone. For details, see <a href="/docs/manage/network-zones" title="Find out how network zones work in Dynatrace.">Network zones</a>.</td>
</tr>
<tr>
<td><code>DT_PROXY</code></td>
<td>When using a proxy, use this environment variable to pass proxy credentials. For details, see <a href="/docs/ingest-from/setup-on-container-platforms/docker/set-up-oneagent-on-containers-for-application-only-monitoring" title="Install, update, and uninstall OneAgent on containers for application-only monitoring.">Set up OneAgent on containers for application-only monitoring</a></td>
</tr>
<tr>
<td><strong>Additional metadata for Process Grouping / Service Detection</strong></td>
<td></td>
</tr>
<tr>
<td><code>DT_LOCALTOVIRTUALHOSTNAME</code></td>
<td>Multiple containers are sometimes detected as a single instance (localhost), leading to various problems in, for example, service detection or availability alerts. Use this environment variable to define a unique name for your container instance. For details, see <a href="/docs/observe/application-observability/services/service-detection/service-detection-v1#adjusting-service-detection" title="Find out how Dynatrace Service Detection v1 detects and names different types of services.">Service Detection v1</a></td>
</tr>
<tr>
<td><code>DT_APPLICATIONID</code></td>
<td>Some technologies don't provide unique application names. In such cases, use this environment variable to provide a unique name. For details, see <a href="/docs/observe/application-observability/services/service-detection/service-detection-v1#web-server-naming-issues" title="Find out how Dynatrace Service Detection v1 detects and names different types of services.">Service Detection v1</a></td>
</tr>
<tr>
<td><code>DT_TAGS</code></td>
<td>Applies <a href="/docs/manage/tags-and-metadata/setup/define-tags-based-on-environment-variables" title="Find out how Dynatrace enables you to define tags based on environment variables.">custom tags</a> to your process group</td>
</tr>
<tr>
<td><code>DT_CUSTOM_PROP</code></td>
<td>Applies <a href="/docs/observe/infrastructure-observability/process-groups/configuration/define-your-own-process-group-metadata" title="Configure your own process-related metadata based on the unique needs of your organization or environment.">custom metadata</a> to your process group</td>
</tr>
<tr>
<td><code>DT_CLUSTER_ID</code></td>
<td>If the <a href="/docs/observe/infrastructure-observability/process-groups/configuration/pg-detection" title="Ways to customize process-group detection">process group detection rules</a> won't work for your use-case, use this environment variable to <strong>group all processes with the same value</strong>.</td>
</tr>
<tr>
<td><code>DT_NODE_ID</code></td>
<td>If the <a href="/docs/observe/infrastructure-observability/process-groups/configuration/pg-detection" title="Ways to customize process-group detection">process group detection rules</a> won't work for your use-case, use this environment variable to <strong>separate process group instances</strong></td>
</tr>
<tr>
<td><strong>Troubleshooting</strong></td>
<td></td>
</tr>
<tr>
<td><code>DT_LOGSTREAM</code></td>
<td>Set this variable with <code>stdout</code> to configure agent to log errors into console. To see additional agent logs set the log level with DT_LOGLEVELCON as below.</td>
</tr>
<tr>
<td><code>DT_LOGLEVELCON</code></td>
<td>Use this environment variable to define the console log level. Valid options are <code>NONE</code>, <code>INFO</code>, <code>WARNING</code>, <code>SEVERE</code> in order to increase log level.</td>
</tr>
<tr>
<td><code>DT_AGENTACTIVE</code></td>
<td><code>true</code> or <code>false</code> to enable or disable OneAgent.</td>
</tr>
</tbody>
</table>
<h2 id="verify-that-the-integration-was-successful">Verify that the integration was successful<a class="headerlink" href="#verify-that-the-integration-was-successful" title="Permanent link">&para;</a></h2>
<p>After the build and deploy, you should start seeing your Cloud Run service in Dynatrace.</p>
<h3 id="verify-via-service-overview">Verify via service overview<a class="headerlink" href="#verify-via-service-overview" title="Permanent link">&para;</a></h3>
<p>Check your service's overview within Dynatrace for your instrumented application.</p>
<p>The service will show up in Dynatrace after running the newly built version and calling it at least once via, for example, a webrequest.</p>
<h3 id="verify-via-host-overview">Verify via host overview<a class="headerlink" href="#verify-via-host-overview" title="Permanent link">&para;</a></h3>
<p>You can filter for containers in the host overview to filter by <strong>Monitoring Mode</strong> with <code>Standalone/PaaS</code>.</p>
<h2 id="known-limitations">Known limitations<a class="headerlink" href="#known-limitations" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>No host metrics for Gen1</strong></li>
</ul>
<p>The first generation of the GCR execution environment, also referred to as Gen1, comes with intentionally increased security limitations. As a consequence, some OneAgent functionalities cannot work in this runtime and are not available. For example, metrics on the <strong>Hosts</strong> page such as <code>CPU Usage</code> and <code>Memory Usage</code> are not available.
* <strong>GCR instances detected as hosts</strong></p>
<p>GCR execution environments are currently displayed on the <strong>Hosts</strong> page, with proper detection of GCP properties and the memory limit of each of these runtime (container) instances, not on the <a href="/docs/observe/infrastructure-observability/container-platform-monitoring/container-groups" title="Overview on container groups monitoring"><strong>Container groups</strong> page</a>. Container metrics are not available.
* <strong>Possible startup overhead</strong></p>
<p>Because each revision of Google Cloud Run scales automatically to the number of container instances needed to handle incoming requests, such cold starts might appear more often than on other environments, thus increasing overall startup overhead.</p>
<h2 id="update-oneagent">Update OneAgent<a class="headerlink" href="#update-oneagent" title="Permanent link">&para;</a></h2>
<p>Each time you want to leverage a new version of Dynatrace OneAgent, you must rebuild and redeploy.</p>
<p>If you've specified a default OneAgent installation version for new hosts and applications using <a href="/docs/ingest-from/dynatrace-oneagent/installation-and-operation/linux/operation/update-oneagent-on-linux" title="Learn about the different ways to update OneAgent on Linux.">OneAgent update settings</a>, your application will be automatically monitored by the defined default version of OneAgent.</p>
<h2 id="uninstall-oneagent">Uninstall OneAgent<a class="headerlink" href="#uninstall-oneagent" title="Permanent link">&para;</a></h2>
<p>To uninstall OneAgent from application-only monitoring, remove references from your application or Docker image and redeploy the application.</p>
<h2 id="related-topics_1">Related topics<a class="headerlink" href="#related-topics_1" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="/docs/ingest-from/technology-support/oneagent-platform-and-capability-support-matrix" title="Learn which capabilities are supported by OneAgent on different operating systems and platforms.">OneAgent platform and capability support matrix</a></li>
</ul>
<hr />
<h2 id="source-cloud-functions-monitoringmd">Source: cloud-functions-monitoring.md<a class="headerlink" href="#source-cloud-functions-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Functions monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/cloud-functions-monitoring
scraped: 2026-02-17T05:05:24.279534</p>
<hr />
<h1 id="google-cloud-functions-monitoring">Google Cloud Functions monitoring<a class="headerlink" href="#google-cloud-functions-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-functions-monitoring_1">Google Cloud Functions monitoring<a class="headerlink" href="#google-cloud-functions-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_2">Prerequisites<a class="headerlink" href="#prerequisites_2" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_1">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_1" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_1">View metrics<a class="headerlink" href="#view-metrics_1" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_1">Metric table<a class="headerlink" href="#metric-table_1" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Functions.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>cloud_function/default_metrics</td>
<td>Active instances</td>
<td>Count</td>
<td>cloudfunctions.googleapis.com/function/active_instances</td>
</tr>
<tr>
<td>cloud_function/default_metrics</td>
<td>Executions</td>
<td>Count</td>
<td>cloudfunctions.googleapis.com/function/execution_count</td>
</tr>
<tr>
<td>cloud_function/default_metrics</td>
<td>Execution times</td>
<td>NanoSecond</td>
<td>cloudfunctions.googleapis.com/function/execution_times</td>
</tr>
<tr>
<td>cloud_function/default_metrics</td>
<td>Network egress</td>
<td>Byte</td>
<td>cloudfunctions.googleapis.com/function/network_egress</td>
</tr>
<tr>
<td>cloud_function/default_metrics</td>
<td>Memory usage</td>
<td>Byte</td>
<td>cloudfunctions.googleapis.com/function/user_memory_bytes</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_2">Related topics<a class="headerlink" href="#related-topics_2" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-opentelemetry-on-gcf-dotnetmd">Source: opentelemetry-on-gcf-dotnet.md<a class="headerlink" href="#source-opentelemetry-on-gcf-dotnetmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Integrate on Google Cloud Functions .NET
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-dotnet
scraped: 2026-02-17T04:56:13.328814</p>
<hr />
<h1 id="integrate-on-google-cloud-functions-net">Integrate on Google Cloud Functions .NET<a class="headerlink" href="#integrate-on-google-cloud-functions-net" title="Permanent link">&para;</a></h1>
<h1 id="integrate-on-google-cloud-functions-net_1">Integrate on Google Cloud Functions .NET<a class="headerlink" href="#integrate-on-google-cloud-functions-net_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>3-min read</li>
<li>Published Jul 25, 2023</li>
</ul>
<p>The <code>Dynatrace.OpenTelemetry.Instrumentation.GoogleCloudFunctions</code> NuGet package provides APIs for tracing server-side .NET Google Cloud Function (GCF) invocations.</p>
<h2 id="prerequisites_3">Prerequisites<a class="headerlink" href="#prerequisites_3" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf" title="Monitor Google Cloud Functions with OpenTelemetry and Dynatrace.">Set up OpenTelemetry monitoring for Google Cloud Functions</a>.</li>
<li>Dynatrace.OpenTelemetry.Instrumentation.GoogleCloudFunctions version 1.273+</li>
<li>Cloud Functions product versions: 1st gen, 2nd gen</li>
</ul>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<p>To set up OpenTelemetry .NET integration on Google Cloud Functions, run the command below in the root directory of your Google Cloud Function project.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>dotnet add package Dynatrace.OpenTelemetry.Instrumentation.GoogleCloudFunctions
</code></pre></div>
<p>This adds the latest version of the <code>Dynatrace.OpenTelemetry.Instrumentation.GoogleCloudFunctions</code> NuGet package as a dependency on your project.</p>
<h2 id="trace-export">Trace export<a class="headerlink" href="#trace-export" title="Permanent link">&para;</a></h2>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Initialize tracing</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-dotnet#initialize "Monitor Google Cloud Functions with OpenTelemetry for .NET and Dynatrace.")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Instrument a handler function</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-dotnet#instrument "Monitor Google Cloud Functions with OpenTelemetry for .NET and Dynatrace.")</p>
<h2 id="step-1-initialize-tracing">Step 1 Initialize tracing<a class="headerlink" href="#step-1-initialize-tracing" title="Permanent link">&para;</a></h2>
<p>The initialization code for GCF tracing in your <code>Function.cs</code> file could look as follows (where <code>Function</code> is the configured GCF handler class):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>using Dynatrace.OpenTelemetry;
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>using Dynatrace.OpenTelemetry.Instrumentation.GoogleCloudFunctions;
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>using Google.Cloud.Functions.Framework;
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>using Microsoft.AspNetCore.Http;
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>using OpenTelemetry;
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>using OpenTelemetry.Trace;
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a>namespace Examples.GcfFunctionApp
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a>
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>
<a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a>
<a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a>{
<a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a>
<a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a>
<a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a>
<a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a>public class Function
<a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a>
<a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a>
<a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a>
<a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a>{
<a id="__codelineno-10-38" name="__codelineno-10-38" href="#__codelineno-10-38"></a>
<a id="__codelineno-10-39" name="__codelineno-10-39" href="#__codelineno-10-39"></a>
<a id="__codelineno-10-40" name="__codelineno-10-40" href="#__codelineno-10-40"></a>
<a id="__codelineno-10-41" name="__codelineno-10-41" href="#__codelineno-10-41"></a>private static readonly TracerProvider TracerProvider;
<a id="__codelineno-10-42" name="__codelineno-10-42" href="#__codelineno-10-42"></a>
<a id="__codelineno-10-43" name="__codelineno-10-43" href="#__codelineno-10-43"></a>
<a id="__codelineno-10-44" name="__codelineno-10-44" href="#__codelineno-10-44"></a>
<a id="__codelineno-10-45" name="__codelineno-10-45" href="#__codelineno-10-45"></a>static Function()
<a id="__codelineno-10-46" name="__codelineno-10-46" href="#__codelineno-10-46"></a>
<a id="__codelineno-10-47" name="__codelineno-10-47" href="#__codelineno-10-47"></a>
<a id="__codelineno-10-48" name="__codelineno-10-48" href="#__codelineno-10-48"></a>
<a id="__codelineno-10-49" name="__codelineno-10-49" href="#__codelineno-10-49"></a>{
<a id="__codelineno-10-50" name="__codelineno-10-50" href="#__codelineno-10-50"></a>
<a id="__codelineno-10-51" name="__codelineno-10-51" href="#__codelineno-10-51"></a>
<a id="__codelineno-10-52" name="__codelineno-10-52" href="#__codelineno-10-52"></a>
<a id="__codelineno-10-53" name="__codelineno-10-53" href="#__codelineno-10-53"></a>DynatraceSetup.InitializeLogging();
<a id="__codelineno-10-54" name="__codelineno-10-54" href="#__codelineno-10-54"></a>
<a id="__codelineno-10-55" name="__codelineno-10-55" href="#__codelineno-10-55"></a>
<a id="__codelineno-10-56" name="__codelineno-10-56" href="#__codelineno-10-56"></a>
<a id="__codelineno-10-57" name="__codelineno-10-57" href="#__codelineno-10-57"></a>TracerProvider = Sdk.CreateTracerProviderBuilder()
<a id="__codelineno-10-58" name="__codelineno-10-58" href="#__codelineno-10-58"></a>
<a id="__codelineno-10-59" name="__codelineno-10-59" href="#__codelineno-10-59"></a>
<a id="__codelineno-10-60" name="__codelineno-10-60" href="#__codelineno-10-60"></a>
<a id="__codelineno-10-61" name="__codelineno-10-61" href="#__codelineno-10-61"></a>.AddDynatrace()
<a id="__codelineno-10-62" name="__codelineno-10-62" href="#__codelineno-10-62"></a>
<a id="__codelineno-10-63" name="__codelineno-10-63" href="#__codelineno-10-63"></a>
<a id="__codelineno-10-64" name="__codelineno-10-64" href="#__codelineno-10-64"></a>
<a id="__codelineno-10-65" name="__codelineno-10-65" href="#__codelineno-10-65"></a>.AddGoogleCloudFunctionsInstrumentation()
<a id="__codelineno-10-66" name="__codelineno-10-66" href="#__codelineno-10-66"></a>
<a id="__codelineno-10-67" name="__codelineno-10-67" href="#__codelineno-10-67"></a>
<a id="__codelineno-10-68" name="__codelineno-10-68" href="#__codelineno-10-68"></a>
<a id="__codelineno-10-69" name="__codelineno-10-69" href="#__codelineno-10-69"></a>.Build();
<a id="__codelineno-10-70" name="__codelineno-10-70" href="#__codelineno-10-70"></a>
<a id="__codelineno-10-71" name="__codelineno-10-71" href="#__codelineno-10-71"></a>
<a id="__codelineno-10-72" name="__codelineno-10-72" href="#__codelineno-10-72"></a>
<a id="__codelineno-10-73" name="__codelineno-10-73" href="#__codelineno-10-73"></a>}
<a id="__codelineno-10-74" name="__codelineno-10-74" href="#__codelineno-10-74"></a>
<a id="__codelineno-10-75" name="__codelineno-10-75" href="#__codelineno-10-75"></a>
<a id="__codelineno-10-76" name="__codelineno-10-76" href="#__codelineno-10-76"></a>
<a id="__codelineno-10-77" name="__codelineno-10-77" href="#__codelineno-10-77"></a>}
<a id="__codelineno-10-78" name="__codelineno-10-78" href="#__codelineno-10-78"></a>
<a id="__codelineno-10-79" name="__codelineno-10-79" href="#__codelineno-10-79"></a>
<a id="__codelineno-10-80" name="__codelineno-10-80" href="#__codelineno-10-80"></a>
<a id="__codelineno-10-81" name="__codelineno-10-81" href="#__codelineno-10-81"></a>}
</code></pre></div>
<h2 id="step-2-instrument-a-handler-function">Step 2 Instrument a handler function<a class="headerlink" href="#step-2-instrument-a-handler-function" title="Permanent link">&para;</a></h2>
<p>Dynatrace.OpenTelemetry.Instrumentation.GoogleCloudFunctions version 1.273 Only tracing of incoming calls for HTTP-triggered functions is supported.</p>
<p>To instrument an HTTP-triggered function to trace incoming calls, in addition to the <a href="#initialization">initialization code above</a>, wrap the GCF function handler method using either <code>GoogleCloudFunctionsWrapper.Trace</code> or <code>GoogleCloudFunctionsWrapper.TraceAsync</code> as shown in the following example.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>public Task HandleAsync(HttpContext context)
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>{
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>return GoogleCloudFunctionsWrapper.TraceAsync(
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>TracerProvider,
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>() =&gt; HandleInternalAsync(context), context);
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>}
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>private Task HandleInternalAsync(HttpContext context)
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a>
<a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a>
<a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>
<a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a>{
<a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a>
<a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a>
<a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a>
<a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a>// This is just an example of function handler and should be replaced by actual code.
<a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a>
<a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a>
<a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a>
<a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a>return Task.CompletedTask;
<a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a>
<a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a>
<a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a>
<a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a>}
</code></pre></div>
<h2 id="cold-start">Cold start<a class="headerlink" href="#cold-start" title="Permanent link">&para;</a></h2>
<p>When the function handler is invoked for the first time after a <a href="https://cloud.google.com/functions/docs/concepts/exec#cold_starts">cold start√Ø¬ª¬ø</a>, the instrumentation initialization method <code>AddGoogleCloudFunctionsInstrumentation</code>
makes additional HTTP requests to fetch metadata from your <a href="https://cloud.google.com/compute/docs/metadata/overview">Google Cloud environment√Ø¬ª¬ø</a>. This metadata is used to set the required attributes for Dynatrace to process
the span ("Activity" in .NET terminology).</p>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h3>
<p>The additional HTTP requests from <code>AddGoogleCloudFunctionsInstrumentation</code> method might cause unhandled exceptions during the initialization phase (for example, <code>HttpRequestException</code> in the case of a broken network connection). If your code is set to avoid monitoring when startup fails, exceptions will still be caught.</p>
<h2 id="span-flush">Span flush<a class="headerlink" href="#span-flush" title="Permanent link">&para;</a></h2>
<p>By default, all wrapping <code>Trace/TraceAsync</code> methods automatically perform a flush operation before the end of function invocation to ensure that all spans are exported properly. Because span flushing becomes part of the function's execution logic, it might result in a longer execution time.</p>
<p>To disable flushing after every invocation, you can provide a configuration parameter with the flag <code>ForceFlushAfterEachInvocation</code> set to <code>false</code> in the <code>AddGoogleCloudFunctionsInstrumentation</code> method. Spans will still be periodically exported in the background.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>TracerProvider = Sdk.CreateTracerProviderBuilder()
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>.AddDynatrace()
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>// Setting ForceFlushAfterEachInvocation to false disables the flushing after every function invocation.
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>.AddGoogleCloudFunctionsInstrumentation(c =&gt; c.ForceFlushAfterEachInvocation = false)
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>.Build();
</code></pre></div>
<p>Because code running outside the function execution can be terminated at any time, it's discouraged by Google Cloud Functions.</p>
<ul>
<li>Google Cloud Functions 1st gen</li>
</ul>
<p>Background task execution after function invocation is not guaranteed without flushing spans and might result in span loss. In practice, samples have shown that not explicitly flushing spans usually still results in correctly exported spans.
* Google Cloud Functions 2nd gen</p>
<p>Google Cloud Functions 2nd gen can handle multiple concurrent requests in a single function instance. The flush operation of one invocation can prolong the execution time of another function invocation.
  Because function instances usually need to be kept idle for some time to handle multiple concurrent requests, you can disable the flushing of spans to improve performance. For details, see <a href="https://cloud.google.com/run/docs/container-contract#lifecycle-services">Instance lifecycle√Ø¬ª¬ø</a>.
  Note that idle function instances are not guaranteed to be allocated CPU unless their <a href="https://cloud.google.com/run/docs/configuring/cpu-allocation">CPU allocation√Ø¬ª¬ø</a> mode is set to <code>CPU always allocated</code>.</p>
<p>For details, see <a href="https://cloud.google.com/functions/docs/concepts/execution-environment#execution-timeline">Function execution timeline√Ø¬ª¬ø</a>.</p>
<h2 id="dynatrace-overhead">Dynatrace overhead<a class="headerlink" href="#dynatrace-overhead" title="Permanent link">&para;</a></h2>
<ul>
<li>Because span export and metadata fetch take some time during cold starts, they increase the duration of the function and subsequently increase costs.</li>
<li>Pay attention to infrequently invoked functions (usually with cold starts), which might require more time for the TCP handshake during span export.</li>
<li>Any network problem between the exporter and Dynatrace backend might also lead to unexpectedly high overhead.</li>
</ul>
<h2 id="related-topics_3">Related topics<a class="headerlink" href="#related-topics_3" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="https://www.dynatrace.com/technologies/google-cloud-monitoring/">Google Cloud monitoring√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-opentelemetry-on-gcf-nodejsmd">Source: opentelemetry-on-gcf-nodejs.md<a class="headerlink" href="#source-opentelemetry-on-gcf-nodejsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Integrate on Google Cloud Functions Node.js
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-nodejs
scraped: 2026-02-17T04:56:18.062548</p>
<hr />
<h1 id="integrate-on-google-cloud-functions-nodejs">Integrate on Google Cloud Functions Node.js<a class="headerlink" href="#integrate-on-google-cloud-functions-nodejs" title="Permanent link">&para;</a></h1>
<h1 id="integrate-on-google-cloud-functions-nodejs_1">Integrate on Google Cloud Functions Node.js<a class="headerlink" href="#integrate-on-google-cloud-functions-nodejs_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Updated on Sep 26, 2025</li>
</ul>
<p>The <a href="https://dt-url.net/zm03ye8"><code>@dynatrace/opentelemetry-gcf</code>√Ø¬ª¬ø</a> module provides APIs for tracing Node.js on Google Cloud Functions (GCF).</p>
<h2 id="prerequisites_4">Prerequisites<a class="headerlink" href="#prerequisites_4" title="Permanent link">&para;</a></h2>
<p>Make sure you have followed the instructions on how to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf" title="Monitor Google Cloud Functions with OpenTelemetry and Dynatrace.">integrate OpenTelemetry on Google Cloud Functions</a>.</p>
<ul>
<li>So far, only <a href="https://dt-url.net/os23yfz">HTTP triggers√Ø¬ª¬ø</a> are supported.</li>
<li>Cloud Function product version: 1st gen, 2nd gen</li>
</ul>
<h2 id="installation_1">Installation<a class="headerlink" href="#installation_1" title="Permanent link">&para;</a></h2>
<p>To set up OpenTelemetry Node.js integration on Google Cloud Functions, run the command below in the root directory of your Google Cloud Function project.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>npm install --save @dynatrace/opentelemetry-gcf
</code></pre></div>
<p>This will install the latest version of the <a href="https://dt-url.net/zm03ye8"><code>@dynatrace/opentelemetry-gcf</code>√Ø¬ª¬ø</a> module from NPM. Note that this library by itself is not enough to start tracing your Google Cloud Functions.
See the <a href="#usage">Usage</a> section below for the remaining required steps.</p>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>To export traces to Dynatrace</p>
<ol>
<li>
<p>Select one of the two ways below to initialize tracing.</p>
</li>
<li>
<p><code>NodeTracerProvider</code> used to initialize tracing is more lightweight than <code>NodeSDK</code>.</p>
</li>
<li><code>NodeSDK</code> is typically used if you're interested in additional OpenTelemetry signals such as metrics.</li>
</ol>
<p>Using NodeTracerProvider (recommended)</p>
<p>Using NodeSDK</p>
<p>Install the required OpenTelemetry packages with the command below.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>npm install --save @opentelemetry/sdk-trace-node @opentelemetry/semantic-conventions
</code></pre></div>
<p>After you install the packages, initialize tracing using the following snippet as an example.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>const { Resource } = require(&#39;@opentelemetry/resources&#39;);
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>const { NodeTracerProvider } = require(&#39;@opentelemetry/sdk-trace-node&#39;);
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>const { SemanticResourceAttributes } = require(&#39;@opentelemetry/semantic-conventions&#39;);
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>const { DtSpanExporter, DtSpanProcessor, DtTextMapPropagator, DtSampler } = require(&#39;@dynatrace/opentelemetry-gcf&#39;);
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>const processor = new DtSpanProcessor(new DtSpanExporter());
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>const provider = new NodeTracerProvider({
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>resource: new Resource({
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a>
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a>&quot;my.resource.attribute&quot;: &quot;My Resource&quot;,
<a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a>
<a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a>
<a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a>
<a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a>}),
<a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>
<a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a>
<a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>
<a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a>sampler: new DtSampler(),
<a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a>
<a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a>
<a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a>
<a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a>// for @opentelemetry/sdk-trace-node versions lower than 1.29.0 use `provider.addSpanProcessor(processor)` instead
<a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a>
<a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a>
<a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a>
<a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a>spanProcessors: [processor]
<a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a>
<a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a>
<a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a>
<a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a>// ...other configurations
<a id="__codelineno-15-50" name="__codelineno-15-50" href="#__codelineno-15-50"></a>
<a id="__codelineno-15-51" name="__codelineno-15-51" href="#__codelineno-15-51"></a>
<a id="__codelineno-15-52" name="__codelineno-15-52" href="#__codelineno-15-52"></a>
<a id="__codelineno-15-53" name="__codelineno-15-53" href="#__codelineno-15-53"></a>});
<a id="__codelineno-15-54" name="__codelineno-15-54" href="#__codelineno-15-54"></a>
<a id="__codelineno-15-55" name="__codelineno-15-55" href="#__codelineno-15-55"></a>
<a id="__codelineno-15-56" name="__codelineno-15-56" href="#__codelineno-15-56"></a>
<a id="__codelineno-15-57" name="__codelineno-15-57" href="#__codelineno-15-57"></a>provider.register({
<a id="__codelineno-15-58" name="__codelineno-15-58" href="#__codelineno-15-58"></a>
<a id="__codelineno-15-59" name="__codelineno-15-59" href="#__codelineno-15-59"></a>
<a id="__codelineno-15-60" name="__codelineno-15-60" href="#__codelineno-15-60"></a>
<a id="__codelineno-15-61" name="__codelineno-15-61" href="#__codelineno-15-61"></a>propagator: new DtTextMapPropagator(),
<a id="__codelineno-15-62" name="__codelineno-15-62" href="#__codelineno-15-62"></a>
<a id="__codelineno-15-63" name="__codelineno-15-63" href="#__codelineno-15-63"></a>
<a id="__codelineno-15-64" name="__codelineno-15-64" href="#__codelineno-15-64"></a>
<a id="__codelineno-15-65" name="__codelineno-15-65" href="#__codelineno-15-65"></a>// ...other configurations
<a id="__codelineno-15-66" name="__codelineno-15-66" href="#__codelineno-15-66"></a>
<a id="__codelineno-15-67" name="__codelineno-15-67" href="#__codelineno-15-67"></a>
<a id="__codelineno-15-68" name="__codelineno-15-68" href="#__codelineno-15-68"></a>
<a id="__codelineno-15-69" name="__codelineno-15-69" href="#__codelineno-15-69"></a>});
</code></pre></div>
<p>Install the required OpenTelemetry packages with the command below.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>npm install --save @opentelemetry/sdk-node @opentelemetry/semantic-conventions
</code></pre></div>
<p>After you install the packages, initialize tracing using the following snippet as an example.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>const { Resource } = require(&#39;@opentelemetry/resources&#39;);
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>const { NodeSDK } = require(&#39;@opentelemetry/sdk-node&#39;);
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>const { SemanticResourceAttributes } = require(&#39;@opentelemetry/semantic-conventions&#39;);
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>const { DtSpanExporter, DtSpanProcessor, DtTextMapPropagator, DtSampler } = require(&#39;@dynatrace/opentelemetry-gcf&#39;);
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>const sdk = new NodeSDK({
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>resource: new Resource({
<a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a>
<a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a>
<a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a>
<a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>&quot;my.resource.attribute&quot;: &quot;My Resource&quot;
<a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>
<a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>
<a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>
<a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a>}),
<a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>
<a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>
<a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a>
<a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>sampler: new DtSampler(),
<a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>
<a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>
<a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>
<a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a>spanProcessor: new DtSpanProcessor(new DtSpanExporter()),
<a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a>
<a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a>
<a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>
<a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a>textMapPropagator: new DtTextMapPropagator(),
<a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a>
<a id="__codelineno-17-43" name="__codelineno-17-43" href="#__codelineno-17-43"></a>
<a id="__codelineno-17-44" name="__codelineno-17-44" href="#__codelineno-17-44"></a>
<a id="__codelineno-17-45" name="__codelineno-17-45" href="#__codelineno-17-45"></a>// ...other configurations
<a id="__codelineno-17-46" name="__codelineno-17-46" href="#__codelineno-17-46"></a>
<a id="__codelineno-17-47" name="__codelineno-17-47" href="#__codelineno-17-47"></a>
<a id="__codelineno-17-48" name="__codelineno-17-48" href="#__codelineno-17-48"></a>
<a id="__codelineno-17-49" name="__codelineno-17-49" href="#__codelineno-17-49"></a>});
<a id="__codelineno-17-50" name="__codelineno-17-50" href="#__codelineno-17-50"></a>
<a id="__codelineno-17-51" name="__codelineno-17-51" href="#__codelineno-17-51"></a>
<a id="__codelineno-17-52" name="__codelineno-17-52" href="#__codelineno-17-52"></a>
<a id="__codelineno-17-53" name="__codelineno-17-53" href="#__codelineno-17-53"></a>sdk.start().then(() =&gt; {
<a id="__codelineno-17-54" name="__codelineno-17-54" href="#__codelineno-17-54"></a>
<a id="__codelineno-17-55" name="__codelineno-17-55" href="#__codelineno-17-55"></a>
<a id="__codelineno-17-56" name="__codelineno-17-56" href="#__codelineno-17-56"></a>
<a id="__codelineno-17-57" name="__codelineno-17-57" href="#__codelineno-17-57"></a>// Resources have been detected and SDK is started
<a id="__codelineno-17-58" name="__codelineno-17-58" href="#__codelineno-17-58"></a>
<a id="__codelineno-17-59" name="__codelineno-17-59" href="#__codelineno-17-59"></a>
<a id="__codelineno-17-60" name="__codelineno-17-60" href="#__codelineno-17-60"></a>
<a id="__codelineno-17-61" name="__codelineno-17-61" href="#__codelineno-17-61"></a>});
</code></pre></div>
2. Start the root Google Cloud Function server span, using one of the two general patterns in OpenTelemetry below.</p>
<p>Start an active span (recommended)</p>
<p>Start the span and activate it later</p>
<p>Example that starts and immediately activates a span inside a Google Cloud Function:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>const { startActiveHttpSpan, endHttpSpanAndFlush } = require(&#39;@dynatrace/opentelemetry-gcf&#39;);
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>// ...tracing initialization code
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>async function handler(req, res) {
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>await startActiveHttpSpan(req, async (span) =&gt; {
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>let error;
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>try {
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>// do something
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a>
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>} catch (e) {
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>error = e;
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>}
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a>
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a>
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a>
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>// status should be set before span ends
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a>
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a>
<a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a>
<a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a>res.status(error != null ? 500 : 200);
<a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a>
<a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a>
<a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a>
<a id="__codelineno-18-49" name="__codelineno-18-49" href="#__codelineno-18-49"></a>/**
<a id="__codelineno-18-50" name="__codelineno-18-50" href="#__codelineno-18-50"></a>
<a id="__codelineno-18-51" name="__codelineno-18-51" href="#__codelineno-18-51"></a>
<a id="__codelineno-18-52" name="__codelineno-18-52" href="#__codelineno-18-52"></a>
<a id="__codelineno-18-53" name="__codelineno-18-53" href="#__codelineno-18-53"></a>* Span must be ended and flushed before handler sends response.
<a id="__codelineno-18-54" name="__codelineno-18-54" href="#__codelineno-18-54"></a>
<a id="__codelineno-18-55" name="__codelineno-18-55" href="#__codelineno-18-55"></a>
<a id="__codelineno-18-56" name="__codelineno-18-56" href="#__codelineno-18-56"></a>
<a id="__codelineno-18-57" name="__codelineno-18-57" href="#__codelineno-18-57"></a>* This limitiation comes from GCF, for details see:
<a id="__codelineno-18-58" name="__codelineno-18-58" href="#__codelineno-18-58"></a>
<a id="__codelineno-18-59" name="__codelineno-18-59" href="#__codelineno-18-59"></a>
<a id="__codelineno-18-60" name="__codelineno-18-60" href="#__codelineno-18-60"></a>
<a id="__codelineno-18-61" name="__codelineno-18-61" href="#__codelineno-18-61"></a>* https://cloud.google.com/functions/docs/concepts/nodejs-runtime#signal-termination
<a id="__codelineno-18-62" name="__codelineno-18-62" href="#__codelineno-18-62"></a>
<a id="__codelineno-18-63" name="__codelineno-18-63" href="#__codelineno-18-63"></a>
<a id="__codelineno-18-64" name="__codelineno-18-64" href="#__codelineno-18-64"></a>
<a id="__codelineno-18-65" name="__codelineno-18-65" href="#__codelineno-18-65"></a>*/
<a id="__codelineno-18-66" name="__codelineno-18-66" href="#__codelineno-18-66"></a>
<a id="__codelineno-18-67" name="__codelineno-18-67" href="#__codelineno-18-67"></a>
<a id="__codelineno-18-68" name="__codelineno-18-68" href="#__codelineno-18-68"></a>
<a id="__codelineno-18-69" name="__codelineno-18-69" href="#__codelineno-18-69"></a>await endHttpSpanAndFlush(span, res, error);
<a id="__codelineno-18-70" name="__codelineno-18-70" href="#__codelineno-18-70"></a>
<a id="__codelineno-18-71" name="__codelineno-18-71" href="#__codelineno-18-71"></a>
<a id="__codelineno-18-72" name="__codelineno-18-72" href="#__codelineno-18-72"></a>
<a id="__codelineno-18-73" name="__codelineno-18-73" href="#__codelineno-18-73"></a>res.send(&quot;hello world&quot;);
<a id="__codelineno-18-74" name="__codelineno-18-74" href="#__codelineno-18-74"></a>
<a id="__codelineno-18-75" name="__codelineno-18-75" href="#__codelineno-18-75"></a>
<a id="__codelineno-18-76" name="__codelineno-18-76" href="#__codelineno-18-76"></a>
<a id="__codelineno-18-77" name="__codelineno-18-77" href="#__codelineno-18-77"></a>});
<a id="__codelineno-18-78" name="__codelineno-18-78" href="#__codelineno-18-78"></a>
<a id="__codelineno-18-79" name="__codelineno-18-79" href="#__codelineno-18-79"></a>
<a id="__codelineno-18-80" name="__codelineno-18-80" href="#__codelineno-18-80"></a>
<a id="__codelineno-18-81" name="__codelineno-18-81" href="#__codelineno-18-81"></a>}
</code></pre></div>
<p>Example that starts a span inside a Google Cloud Function and later activates it within the same function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>const { context, trace, ROOT_CONTEXT } = require(&#39;@opentelemetry/api&#39;);
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>const { startHttpSpan, endHttpSpanAndFlush } = require(&#39;@dynatrace/opentelemetry-gcf&#39;);
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>// ...tracing initialization code
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>async function handler(req, res) {
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>const span = await startHttpSpan(req);
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>let error;
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a>
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>await context.with(trace.setSpan(ROOT_CONTEXT, span), async () =&gt; {
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>
<a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a>
<a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a>
<a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a>try {
<a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a>
<a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a>
<a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a>
<a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a>// do something
<a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a>
<a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a>
<a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a>
<a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a>} catch (e) {
<a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a>
<a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a>
<a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a>
<a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a>error = e;
<a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a>
<a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a>
<a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a>
<a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a>}
<a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a>
<a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a>
<a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a>
<a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a>});
<a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a>
<a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a>
<a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a>
<a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a>// status should be set before span ends
<a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a>
<a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a>
<a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a>
<a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a>res.status(error != null ? 500 : 200);
<a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a>
<a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a>
<a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a>
<a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a>/**
<a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a>
<a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a>
<a id="__codelineno-19-64" name="__codelineno-19-64" href="#__codelineno-19-64"></a>
<a id="__codelineno-19-65" name="__codelineno-19-65" href="#__codelineno-19-65"></a>* Span must be ended and flushed before handler sends response.
<a id="__codelineno-19-66" name="__codelineno-19-66" href="#__codelineno-19-66"></a>
<a id="__codelineno-19-67" name="__codelineno-19-67" href="#__codelineno-19-67"></a>
<a id="__codelineno-19-68" name="__codelineno-19-68" href="#__codelineno-19-68"></a>
<a id="__codelineno-19-69" name="__codelineno-19-69" href="#__codelineno-19-69"></a>* This limitiation comes from GCF, for details see:
<a id="__codelineno-19-70" name="__codelineno-19-70" href="#__codelineno-19-70"></a>
<a id="__codelineno-19-71" name="__codelineno-19-71" href="#__codelineno-19-71"></a>
<a id="__codelineno-19-72" name="__codelineno-19-72" href="#__codelineno-19-72"></a>
<a id="__codelineno-19-73" name="__codelineno-19-73" href="#__codelineno-19-73"></a>* https://cloud.google.com/functions/docs/concepts/nodejs-runtime#signal-termination
<a id="__codelineno-19-74" name="__codelineno-19-74" href="#__codelineno-19-74"></a>
<a id="__codelineno-19-75" name="__codelineno-19-75" href="#__codelineno-19-75"></a>
<a id="__codelineno-19-76" name="__codelineno-19-76" href="#__codelineno-19-76"></a>
<a id="__codelineno-19-77" name="__codelineno-19-77" href="#__codelineno-19-77"></a>*/
<a id="__codelineno-19-78" name="__codelineno-19-78" href="#__codelineno-19-78"></a>
<a id="__codelineno-19-79" name="__codelineno-19-79" href="#__codelineno-19-79"></a>
<a id="__codelineno-19-80" name="__codelineno-19-80" href="#__codelineno-19-80"></a>
<a id="__codelineno-19-81" name="__codelineno-19-81" href="#__codelineno-19-81"></a>await endHttpSpanAndFlush(span, res, error);
<a id="__codelineno-19-82" name="__codelineno-19-82" href="#__codelineno-19-82"></a>
<a id="__codelineno-19-83" name="__codelineno-19-83" href="#__codelineno-19-83"></a>
<a id="__codelineno-19-84" name="__codelineno-19-84" href="#__codelineno-19-84"></a>
<a id="__codelineno-19-85" name="__codelineno-19-85" href="#__codelineno-19-85"></a>res.send(&quot;hello world&quot;);
<a id="__codelineno-19-86" name="__codelineno-19-86" href="#__codelineno-19-86"></a>
<a id="__codelineno-19-87" name="__codelineno-19-87" href="#__codelineno-19-87"></a>
<a id="__codelineno-19-88" name="__codelineno-19-88" href="#__codelineno-19-88"></a>
<a id="__codelineno-19-89" name="__codelineno-19-89" href="#__codelineno-19-89"></a>}
</code></pre></div>
<h2 id="compatibility">Compatibility<a class="headerlink" href="#compatibility" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>OneAgent version</th>
<th>OpenTelemetry API</th>
<th>OpenTelemetry SDK</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.243 - 1.255</td>
<td>1.x.y</td>
<td>1.0.x</td>
</tr>
<tr>
<td>1.257+</td>
<td>1.x.y</td>
<td>1.0.x - 1.7.x</td>
</tr>
<tr>
<td>1.259+</td>
<td>1.x.y</td>
<td>1.0.x - 1.8.x</td>
</tr>
<tr>
<td>1.261+</td>
<td>1.x.y</td>
<td>1.0.x - 1.9.x</td>
</tr>
<tr>
<td>1.265+</td>
<td>1.x.y</td>
<td>1.0.x - 1.10.x</td>
</tr>
<tr>
<td>1.273+</td>
<td>1.x.y</td>
<td>1.0.x - 1.15.x</td>
</tr>
<tr>
<td>1.279+</td>
<td>1.x.y</td>
<td>1.0.x - 1.17.x</td>
</tr>
<tr>
<td>1.283+</td>
<td>1.x.y</td>
<td>1.0.x - 1.18.x</td>
</tr>
<tr>
<td>1.285+</td>
<td>1.x.y</td>
<td>1.0.x - 1.20.x</td>
</tr>
<tr>
<td>1.289+</td>
<td>1.x.y</td>
<td>1.0.x - 1.22.x</td>
</tr>
<tr>
<td>1.293+</td>
<td>1.x.y</td>
<td>1.0.x - 1.24.x</td>
</tr>
<tr>
<td>1.297+</td>
<td>1.x.y</td>
<td>1.0.x - 1.25.x</td>
</tr>
<tr>
<td>1.303+</td>
<td>1.x.y</td>
<td>1.0.x - 1.26.x</td>
</tr>
<tr>
<td>1.307+</td>
<td>1.x.y</td>
<td>1.0.x - 1.29.x</td>
</tr>
<tr>
<td>1.313+</td>
<td>1.x.y</td>
<td>1.0.x - 1.30.x</td>
</tr>
<tr>
<td>1.327+</td>
<td>1.x.y</td>
<td>1.0.x - 2.0.x</td>
</tr>
<tr>
<td>1.331+</td>
<td>1.x.y</td>
<td>1.0.x - 2.2.x</td>
</tr>
</tbody>
</table>
<p>Dynatrace version 1.327+ The <code>@dynatrace/opentelemetry-gcf</code> module supports OpenTelemetry SDK V2. To use V2 (instead of V1), override the version of <code>@dynatrace/opentelemetry-core</code> module (required by <code>@dynatrace/opentelemetry-gcf</code>) with a version that supports OpenTelemetry SDK V2.</p>
<ol>
<li>From the table above, choose a version that supports OpenTelemetry SDK V2.</li>
<li>In your <code>package.json</code> file, adding the <code>overrides</code> section and specify one of the versions of the <code>@dynatrace/opentelemetry-core</code> module to enforce.</li>
<li>Run <code>npm install</code> to apply the changes.</li>
</ol>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>{
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>&quot;dependencies&quot;: {
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>&quot;@dynatrace/opentelemetry-gcf&quot;: &quot;1.327.0&quot;
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>},
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>&quot;overrides&quot;: {
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>&quot;@dynatrace/opentelemetry-core&quot;: &quot;1.327.0&quot;
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a>
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>}
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a>
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>}
</code></pre></div>
<p>Once <code>@dynatrace/opentelemetry-gcf</code> is changed to use OpenTelemetry SDK V2 by default, this override won't be needed anymore.</p>
<h2 id="cold-start_1">Cold start<a class="headerlink" href="#cold-start_1" title="Permanent link">&para;</a></h2>
<p>Starting a Google Cloud Function span during <a href="https://dt-url.net/j543yr9">cold starts√Ø¬ª¬ø</a> produces additional HTTP requests to fetch metadata from your <a href="https://dt-url.net/jc83y1m">Google Cloud environment√Ø¬ª¬ø</a> and set the attributes required for Dynatrace to process the spans.</p>
<h2 id="span-flush_1">Span flush<a class="headerlink" href="#span-flush_1" title="Permanent link">&para;</a></h2>
<p>To ensure that spans are exported properly, you need to flush the spans before a function's response is sent to the client. For details on this limitation, see <a href="https://dt-url.net/5ta3ywp">Signalling function termination√Ø¬ª¬ø</a>.</p>
<p>You can use <code>endHttpSpan()</code> and <code>flushSpans()</code> separately instead of <code>endHttpSpanAndFlush()</code> when needed.</p>
<p>Flushing spans in the function's code results in longer execution times, as this operation becomes part of the function's execution logic. To avoid this, you can omit the flush operation. Spans will still be periodically exported in the background.</p>
<p>Because code running outside the function execution can be terminated at any time, it's discouraged by Google Cloud Functions.</p>
<ul>
<li>Google Cloud Functions 1st gen</li>
</ul>
<p>Background task execution after function invocation is not guaranteed without flushing spans and might result in span loss. In practice, samples have shown that not explicitly flushing spans usually still results in correctly exported spans.
* Google Cloud Functions 2nd gen</p>
<p>Google Cloud Functions 2nd gen can handle multiple concurrent requests in a single function instance. The flush operation of one invocation can prolong the execution time of another function invocation.
  Because function instances usually need to be kept idle for some time to handle multiple concurrent requests, you can disable the flushing of spans to improve performance. For details, see <a href="https://cloud.google.com/run/docs/container-contract#lifecycle-services">Instance lifecycle√Ø¬ª¬ø</a>.
  Note that idle function instances are not guaranteed to be allocated CPU unless their <a href="https://cloud.google.com/run/docs/configuring/cpu-allocation">CPU allocation√Ø¬ª¬ø</a> mode is set to <code>CPU always allocated</code>.</p>
<p>For details, see <a href="https://cloud.google.com/functions/docs/concepts/execution-environment#execution-timeline">Function execution timeline√Ø¬ª¬ø</a>.</p>
<h2 id="caveats">Caveats<a class="headerlink" href="#caveats" title="Permanent link">&para;</a></h2>
<p>You need to pay special attention to cases like unhandled exceptions or function timeouts. If not handled properly, they could lead to a non-ended, and therefore non-exported, span.</p>
<h2 id="dynatrace-overhead_1">Dynatrace overhead<a class="headerlink" href="#dynatrace-overhead_1" title="Permanent link">&para;</a></h2>
<ul>
<li>Because span export and metadata fetch take some time during cold starts, they increase the duration of the function and subsequently increase costs.</li>
<li>Pay attention to infrequently invoked functions (usually with cold starts), which might require more time for the TCP handshake during span export.</li>
<li>Any network problem between the exporter and Dynatrace backend might also lead to unexpectedly high overhead.</li>
</ul>
<h2 id="related-topics_4">Related topics<a class="headerlink" href="#related-topics_4" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="https://www.dynatrace.com/technologies/google-cloud-monitoring/">Google Cloud monitoring√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-opentelemetry-on-gcf-pythonmd">Source: opentelemetry-on-gcf-python.md<a class="headerlink" href="#source-opentelemetry-on-gcf-pythonmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Integrate on Google Cloud Functions Python
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-python
scraped: 2026-02-17T04:56:03.508136</p>
<hr />
<h1 id="integrate-on-google-cloud-functions-python">Integrate on Google Cloud Functions Python<a class="headerlink" href="#integrate-on-google-cloud-functions-python" title="Permanent link">&para;</a></h1>
<h1 id="integrate-on-google-cloud-functions-python_1">Integrate on Google Cloud Functions Python<a class="headerlink" href="#integrate-on-google-cloud-functions-python_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>3-min read</li>
<li>Updated on Jun 16, 2023</li>
</ul>
<p>The <code>dynatrace-opentelemetry-gcf</code> <a href="https://pypi.org/project/dynatrace-opentelemetry-gcf">package√Ø¬ª¬ø</a> provides APIs for tracing Python Google Cloud Functions (GCF).</p>
<h2 id="prerequisites_5">Prerequisites<a class="headerlink" href="#prerequisites_5" title="Permanent link">&para;</a></h2>
<p>Ensure that you have followed the <strong>initial configuration</strong> steps described in <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf" title="Monitor Google Cloud Functions with OpenTelemetry and Dynatrace.">Set up OpenTelemetry monitoring for Google Cloud Functions</a> before using the packages below.</p>
<ul>
<li>dynatrace-opentelemetry-gcf version 1.247+</li>
<li>Cloud Functions product version: 1st gen, 2nd gen</li>
</ul>
<h2 id="installation_2">Installation<a class="headerlink" href="#installation_2" title="Permanent link">&para;</a></h2>
<p>To set up OpenTelemetry Python integration on Google Cloud Functions, add the following line to the <code>requirements.txt</code> file of your function:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>dynatrace-opentelemetry-gcf
</code></pre></div>
<p>This adds the latest version of the <code>dynatrace-opentelemetry-gcf</code> package as a dependency to your function. For more information about managing dependencies, consult the <a href="https://cloud.google.com/functions/docs/writing/specifying-dependencies-python">GCF documentation for Python√Ø¬ª¬ø</a>.</p>
<h2 id="trace-export_1">Trace export<a class="headerlink" href="#trace-export_1" title="Permanent link">&para;</a></h2>
<p>To export traces to Dynatrace, you need to <a href="#initialize">initialize tracing</a> and then <a href="#instrument">instrument your handler function</a>.</p>
<h3 id="initialize-tracing">Initialize tracing<a class="headerlink" href="#initialize-tracing" title="Permanent link">&para;</a></h3>
<p>Select one of the following ways to initialize tracing:</p>
<ul>
<li><code>configure_dynatrace</code> function√¢¬Ä¬îThis is the recommended option unless you need to manually set up tracing components.</li>
</ul>
<p>Example with <code>configure_dynatrace</code> (recommended)</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>from opentelemetry.sdk.resources import Resource
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>from opentelemetry.semconv.resource import ResourceAttributes
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>from dynatrace.opentelemetry.tracing.api import configure_dynatrace
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>tracer_provider = configure_dynatrace(
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>resource=Resource.create({&quot;my.resource.attribute&quot;: &quot;My Resource&quot;})
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a>
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a>)
</code></pre></div>
* Manual tracing setup√¢¬Ä¬îThis allows for a more fine-grained setup of tracing components.</p>
<p>Example with manual tracing setup</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>from opentelemetry.propagate import set_global_textmap
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>from opentelemetry.sdk.resources import Resource
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>from opentelemetry.sdk.trace import TracerProvider
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>from opentelemetry.semconv.resource import ResourceAttributes
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>
<a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>
<a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a>from opentelemetry.trace import set_tracer_provider
<a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a>
<a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a>
<a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a>
<a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a>from dynatrace.opentelemetry.tracing.api import (
<a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a>
<a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a>
<a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a>
<a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a>DtSampler,
<a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a>
<a id="__codelineno-23-27" name="__codelineno-23-27" href="#__codelineno-23-27"></a>
<a id="__codelineno-23-28" name="__codelineno-23-28" href="#__codelineno-23-28"></a>
<a id="__codelineno-23-29" name="__codelineno-23-29" href="#__codelineno-23-29"></a>DtSpanProcessor,
<a id="__codelineno-23-30" name="__codelineno-23-30" href="#__codelineno-23-30"></a>
<a id="__codelineno-23-31" name="__codelineno-23-31" href="#__codelineno-23-31"></a>
<a id="__codelineno-23-32" name="__codelineno-23-32" href="#__codelineno-23-32"></a>
<a id="__codelineno-23-33" name="__codelineno-23-33" href="#__codelineno-23-33"></a>DtTextMapPropagator,
<a id="__codelineno-23-34" name="__codelineno-23-34" href="#__codelineno-23-34"></a>
<a id="__codelineno-23-35" name="__codelineno-23-35" href="#__codelineno-23-35"></a>
<a id="__codelineno-23-36" name="__codelineno-23-36" href="#__codelineno-23-36"></a>
<a id="__codelineno-23-37" name="__codelineno-23-37" href="#__codelineno-23-37"></a>)
<a id="__codelineno-23-38" name="__codelineno-23-38" href="#__codelineno-23-38"></a>
<a id="__codelineno-23-39" name="__codelineno-23-39" href="#__codelineno-23-39"></a>
<a id="__codelineno-23-40" name="__codelineno-23-40" href="#__codelineno-23-40"></a>
<a id="__codelineno-23-41" name="__codelineno-23-41" href="#__codelineno-23-41"></a>span_processor = DtSpanProcessor()
<a id="__codelineno-23-42" name="__codelineno-23-42" href="#__codelineno-23-42"></a>
<a id="__codelineno-23-43" name="__codelineno-23-43" href="#__codelineno-23-43"></a>
<a id="__codelineno-23-44" name="__codelineno-23-44" href="#__codelineno-23-44"></a>
<a id="__codelineno-23-45" name="__codelineno-23-45" href="#__codelineno-23-45"></a>tracer_provider = TracerProvider(
<a id="__codelineno-23-46" name="__codelineno-23-46" href="#__codelineno-23-46"></a>
<a id="__codelineno-23-47" name="__codelineno-23-47" href="#__codelineno-23-47"></a>
<a id="__codelineno-23-48" name="__codelineno-23-48" href="#__codelineno-23-48"></a>
<a id="__codelineno-23-49" name="__codelineno-23-49" href="#__codelineno-23-49"></a>sampler=DtSampler(),
<a id="__codelineno-23-50" name="__codelineno-23-50" href="#__codelineno-23-50"></a>
<a id="__codelineno-23-51" name="__codelineno-23-51" href="#__codelineno-23-51"></a>
<a id="__codelineno-23-52" name="__codelineno-23-52" href="#__codelineno-23-52"></a>
<a id="__codelineno-23-53" name="__codelineno-23-53" href="#__codelineno-23-53"></a>resource=Resource.create({&quot;my.resource.attribute&quot;: &quot;My Resource&quot;}),
<a id="__codelineno-23-54" name="__codelineno-23-54" href="#__codelineno-23-54"></a>
<a id="__codelineno-23-55" name="__codelineno-23-55" href="#__codelineno-23-55"></a>
<a id="__codelineno-23-56" name="__codelineno-23-56" href="#__codelineno-23-56"></a>
<a id="__codelineno-23-57" name="__codelineno-23-57" href="#__codelineno-23-57"></a>)
<a id="__codelineno-23-58" name="__codelineno-23-58" href="#__codelineno-23-58"></a>
<a id="__codelineno-23-59" name="__codelineno-23-59" href="#__codelineno-23-59"></a>
<a id="__codelineno-23-60" name="__codelineno-23-60" href="#__codelineno-23-60"></a>
<a id="__codelineno-23-61" name="__codelineno-23-61" href="#__codelineno-23-61"></a>tracer_provider.add_span_processor(span_processor)
<a id="__codelineno-23-62" name="__codelineno-23-62" href="#__codelineno-23-62"></a>
<a id="__codelineno-23-63" name="__codelineno-23-63" href="#__codelineno-23-63"></a>
<a id="__codelineno-23-64" name="__codelineno-23-64" href="#__codelineno-23-64"></a>
<a id="__codelineno-23-65" name="__codelineno-23-65" href="#__codelineno-23-65"></a>set_global_textmap(DtTextMapPropagator())
<a id="__codelineno-23-66" name="__codelineno-23-66" href="#__codelineno-23-66"></a>
<a id="__codelineno-23-67" name="__codelineno-23-67" href="#__codelineno-23-67"></a>
<a id="__codelineno-23-68" name="__codelineno-23-68" href="#__codelineno-23-68"></a>
<a id="__codelineno-23-69" name="__codelineno-23-69" href="#__codelineno-23-69"></a>set_tracer_provider(tracer_provider)
</code></pre></div>
<p>The tracing setup code should be implemented to set up tracing only once before any other third-party module is imported. If you use <code>isort</code> to sort your imports, we suggest that you <a href="https://pycqa.github.io/isort/docs/configuration/action_comments.html#isort-off">deactivate it√Ø¬ª¬ø</a> while importing the tracing setup module, as shown in the following example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a># isort: off
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>import setup_tracing  # import the module containing your setup code
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a># isort: on
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a># import other modules
</code></pre></div>
<h3 id="instrument-a-handler-function">Instrument a handler function<a class="headerlink" href="#instrument-a-handler-function" title="Permanent link">&para;</a></h3>
<p>Use the <code>wrap_handler</code> decorator to instrument your handler function as shown in the following example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>import flask
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>from dynatrace.opentelemetry.gcf import wrap_handler
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>@wrap_handler
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>def handler(request: flask.Request) -&gt; flask.Response:
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a># From here the created span is available in the OpenTelemetry context as the current span.
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a># do something ...
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a>
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>return flask.Response(&quot;Hello World&quot;, 200)
</code></pre></div>
<h2 id="cold-start_2">Cold start<a class="headerlink" href="#cold-start_2" title="Permanent link">&para;</a></h2>
<p>When the wrapped handler is invoked for the first time after <a href="https://cloud.google.com/functions/docs/concepts/exec#cold_starts">cold start√Ø¬ª¬ø</a>, the decorator will make additional HTTP requests to fetch metadata from your <a href="https://cloud.google.com/compute/docs/metadata/overview">Google Cloud environment√Ø¬ª¬ø</a>. This metadata is used to set the required attributes for Dynatrace to process the span.</p>
<h2 id="span-flush_2">Span flush<a class="headerlink" href="#span-flush_2" title="Permanent link">&para;</a></h2>
<p>By default, the <code>wrap_handler</code> decorator automatically performs a flush operation when the decorated function exits to ensure that spans are exported properly. However, flushing spans results in longer execution time, because this operation becomes part of the function's execution logic.</p>
<p>By providing an additional parameter to the decorator, <code>@wrap_handler(flush_on_exit=False)</code>, you can disable the flushing after every invocation. Spans will still be periodically exported in the background.</p>
<p>Because code running outside the function execution can be terminated at any time, it's discouraged by Google Cloud Functions.</p>
<ul>
<li>Google Cloud Functions 1st gen</li>
</ul>
<p>Background task execution after function invocation is not guaranteed without flushing spans and might result in span loss. In practice, samples have shown that not explicitly flushing spans usually still results in correctly exported spans.
* Google Cloud Functions 2nd gen</p>
<p>Google Cloud Functions 2nd gen can handle multiple concurrent requests in a single function instance. The flush operation of one invocation can prolong the execution time of another function invocation.
  Because function instances usually need to be kept idle for some time to handle multiple concurrent requests, you can disable the flushing of spans to improve performance. For details, see <a href="https://cloud.google.com/run/docs/container-contract#lifecycle-services">Instance lifecycle√Ø¬ª¬ø</a>.
  Note that idle function instances are not guaranteed to be allocated CPU unless their <a href="https://cloud.google.com/run/docs/configuring/cpu-allocation">CPU allocation√Ø¬ª¬ø</a> mode is set to <code>CPU always allocated</code>.</p>
<p>For details, see <a href="https://cloud.google.com/functions/docs/concepts/execution-environment#execution-timeline">Function execution timeline√Ø¬ª¬ø</a>.</p>
<h2 id="dynatrace-overhead_2">Dynatrace overhead<a class="headerlink" href="#dynatrace-overhead_2" title="Permanent link">&para;</a></h2>
<ul>
<li>Because span export and metadata fetch take some time during cold starts, they increase the duration of the function and subsequently increase costs.</li>
<li>Pay attention to infrequently invoked functions (usually with cold starts), which might require more time for the TCP handshake during span export.</li>
<li>Any network problem between the exporter and Dynatrace backend might also lead to unexpectedly high overhead.</li>
</ul>
<h2 id="limitations_1">Limitations<a class="headerlink" href="#limitations_1" title="Permanent link">&para;</a></h2>
<ul>
<li><code>DtSpanProcessor</code> only works together with <code>DtSampler</code>. Make sure to set <code>DtSampler</code> as a sampler when manually setting up tracing; spans might not be exported otherwise.</li>
</ul>
<h2 id="related-topics_5">Related topics<a class="headerlink" href="#related-topics_5" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="https://www.dynatrace.com/technologies/google-cloud-monitoring/">Google Cloud monitoring√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-opentelemetry-on-gcfmd">Source: opentelemetry-on-gcf.md<a class="headerlink" href="#source-opentelemetry-on-gcfmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Set up OpenTelemetry monitoring for Google Cloud Functions
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf
scraped: 2026-02-17T04:56:46.223584</p>
<hr />
<h1 id="set-up-opentelemetry-monitoring-for-google-cloud-functions">Set up OpenTelemetry monitoring for Google Cloud Functions<a class="headerlink" href="#set-up-opentelemetry-monitoring-for-google-cloud-functions" title="Permanent link">&para;</a></h1>
<h1 id="set-up-opentelemetry-monitoring-for-google-cloud-functions_1">Set up OpenTelemetry monitoring for Google Cloud Functions<a class="headerlink" href="#set-up-opentelemetry-monitoring-for-google-cloud-functions_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Mar 31, 2025</li>
</ul>
<p>Dynatrace uses <a href="https://dt-url.net/y903u4j">OpenTelemetry√Ø¬ª¬ø</a> to monitor Google Cloud Functions invocations.</p>
<p>For that purpose, Dynatrace provides language-specific packages√¢¬Ä¬îsuch as <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-nodejs" title="Monitor Google Cloud Functions with OpenTelemetry for Node.js and Dynatrace."><code>@dynatrace/opentelemetry-gcf</code> for Node.js</a>, <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-python" title="Monitor Google Cloud Functions with OpenTelemetry for Python and Dynatrace."><code>dynatrace-opentelemetry-gcf</code> for Python</a>, and <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-dotnet" title="Monitor Google Cloud Functions with OpenTelemetry for .NET and Dynatrace."><code>Dynatrace.OpenTelemetry.Instrumentation.GoogleCloudFunctions</code> for .NET</a>√¢¬Ä¬îthat can be used in combination with default OpenTelemetry SDKs and APIs.</p>
<h2 id="prerequisites_6">Prerequisites<a class="headerlink" href="#prerequisites_6" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.240+</li>
<li>OneAgent version 1.193+ for all OneAgents participating in a trace</li>
<li>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong> and activate the <strong>Forward Tag 4 trace context extension</strong> OneAgent feature.</li>
</ul>
<h2 id="installation_3">Installation<a class="headerlink" href="#installation_3" title="Permanent link">&para;</a></h2>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Select a configuration method</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf#choose-config-method "Monitor Google Cloud Functions with OpenTelemetry and Dynatrace.")[<img alt="Step 2 optional" src="https://dt-cdn.net/images/dotted-step-2-8ae6982454.svg" title="Step 2 optional" /></p>
<p><strong>Specify a Dynatrace API endpoint</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf#specify-endpoint "Monitor Google Cloud Functions with OpenTelemetry and Dynatrace.")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Apply the configuration to your Google Cloud function</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf#apply-config "Monitor Google Cloud Functions with OpenTelemetry and Dynatrace.")[<img alt="Step 4" src="https://dt-cdn.net/images/step-4-3f89d67d41.svg" title="Step 4" /></p>
<p><strong>Instrument the function code</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf#instrument-code "Monitor Google Cloud Functions with OpenTelemetry and Dynatrace.")</p>
<h2 id="step-1-select-a-configuration-method">Step 1 Select a configuration method<a class="headerlink" href="#step-1-select-a-configuration-method" title="Permanent link">&para;</a></h2>
<ol>
<li>In Dynatrace,  <strong>Search</strong> for <strong>Deploy OneAgent</strong> app and select it.</li>
<li>Under <strong>Download Dynatrace OneAgent</strong>, select <strong>Set up</strong> &gt; <strong>Google Cloud Functions</strong>.</li>
<li>On the <strong>Enable Monitoring for Google Cloud Functions</strong> page, under <strong>How will you configure your Google Cloud Functions?</strong>, select your preferred method from the dropdown menu. Make sure you set all properties for the selected method before copying the generated configuration snippets.</li>
</ol>
<h2 id="step-2-optional-specify-a-dynatrace-api-endpoint-optional">Step 2 optional Specify a Dynatrace API endpoint Optional<a class="headerlink" href="#step-2-optional-specify-a-dynatrace-api-endpoint-optional" title="Permanent link">&para;</a></h2>
<p>If you don't want to use the default public Dynatrace endpoint, specify a custom Dynatrace API endpoint where you want to receive monitoring data.</p>
<p>To reduce network latency, you typically deploy a Dynatrace ActiveGate close to (in the same region as) the Google Cloud function that you want to monitor.</p>
<h3 id="step-3-apply-the-configuration-to-your-google-cloud-function">Step 3 Apply the configuration to your Google Cloud function<a class="headerlink" href="#step-3-apply-the-configuration-to-your-google-cloud-function" title="Permanent link">&para;</a></h3>
<p>Configure with JSON file</p>
<p>Copy the JSON snippet into a file named <code>dtconfig.json</code> located in the root folder of your Google Cloud Functions deployment.</p>
<p>Configure with environment variables</p>
<p>On <strong>Enable Monitoring for Google Cloud Functions</strong>, under <strong>Use the following values to configure your monitored Google Cloud Functions</strong>, there's a snippet with all required environment variables. Be sure to add these environment variables and their values to your Google Cloud function configuration. For details, see <a href="https://cloud.google.com/functions/docs/configuring/env-var">Using environment variables√Ø¬ª¬ø</a>.</p>
<h2 id="step-4-instrument-the-function-code">Step 4 Instrument the function code<a class="headerlink" href="#step-4-instrument-the-function-code" title="Permanent link">&para;</a></h2>
<p>Adding the required API calls to monitor function invocations via OpenTelemetry is specific to languages and their respective OpenTelemetry distribution:</p>
<ul>
<li><strong>Node.js:</strong> <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-nodejs" title="Monitor Google Cloud Functions with OpenTelemetry for Node.js and Dynatrace.">Integrate on Google Cloud Functions Node.js</a></li>
<li><strong>Python:</strong> <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-python" title="Monitor Google Cloud Functions with OpenTelemetry for Python and Dynatrace.">Integrate on Google Cloud Functions Python</a></li>
<li><strong>Go:</strong> <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-go" title="Monitor Google Cloud Functions with OpenTelemetry for Go and Dynatrace.">Integrate on Google Cloud Functions GoLang</a></li>
<li><strong>.NET:</strong> <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-dotnet" title="Monitor Google Cloud Functions with OpenTelemetry for .NET and Dynatrace.">Integrate on Google Cloud Functions .NET</a></li>
</ul>
<h2 id="known-limitations_1">Known limitations<a class="headerlink" href="#known-limitations_1" title="Permanent link">&para;</a></h2>
<p>The Dynatrace Google Cloud Functions integration doesn't capture the IP addresses of outgoing HTTP requests. If the called service isn't monitored with Dynatrace OneAgent, this results in <strong>unmonitored hosts</strong>.</p>
<h2 id="related-topics_6">Related topics<a class="headerlink" href="#related-topics_6" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="/docs/ingest-from/technology-support/oneagent-platform-and-capability-support-matrix" title="Learn which capabilities are supported by OneAgent on different operating systems and platforms.">OneAgent platform and capability support matrix</a></li>
<li><a href="https://www.dynatrace.com/technologies/google-cloud-monitoring/">Google Cloud monitoring√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-otel-gcf-gomd">Source: otel-gcf-go.md<a class="headerlink" href="#source-otel-gcf-gomd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Trace Google Cloud Functions in Go with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-go
scraped: 2026-02-17T04:56:00.607006</p>
<hr />
<h1 id="trace-google-cloud-functions-in-go-with-opentelemetry">Trace Google Cloud Functions in Go with OpenTelemetry<a class="headerlink" href="#trace-google-cloud-functions-in-go-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="trace-google-cloud-functions-in-go-with-opentelemetry_1">Trace Google Cloud Functions in Go with OpenTelemetry<a class="headerlink" href="#trace-google-cloud-functions-in-go-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>9-min read</li>
<li>Updated on Nov 13, 2023</li>
</ul>
<p>This guide shows how to instrument Google Cloud Functions in Go with OpenTelemetry and export the traces to Dynatrace. To learn more about how Dynatrace works with OpenTelemetry, see <a href="/docs/ingest-from/opentelemetry" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">OpenTelemetry and Dynatrace</a>.</p>
<p>To learn about how to monitor Google Cloud Functions with Dynatrace-enhanced OpenTelemetry traces, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-go" title="Monitor Google Cloud Functions with OpenTelemetry for Go and Dynatrace.">Integrate on Google Cloud Functions GoLang</a>.</p>
<h2 id="prerequisites_7">Prerequisites<a class="headerlink" href="#prerequisites_7" title="Permanent link">&para;</a></h2>
<p>The following prerequisites and limitations apply:</p>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
<li>Cloud Functions Go Runtime 1.16+</li>
</ul>
<h2 id="instrument-google-cloud-functions">Instrument Google Cloud Functions<a class="headerlink" href="#instrument-google-cloud-functions" title="Permanent link">&para;</a></h2>
<p>Dynatrace uses OpenTelemetry Trace Ingest to provide end-to-end visibility to your Google Cloud Functions.</p>
<p>To instrument your Google Cloud Functions</p>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Add OpenTelemetry dependencies</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-go#otel-dependencies "Learn how to instrument Google Cloud Functions in Go with OpenTelemetry and export the traces to Dynatrace.")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Set up OpenTelemetry</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-go#otel-setup "Learn how to instrument Google Cloud Functions in Go with OpenTelemetry and export the traces to Dynatrace.")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Instrument the function entry point</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-go#instrument-handler "Learn how to instrument Google Cloud Functions in Go with OpenTelemetry and export the traces to Dynatrace.")[<img alt="Step 4" src="https://dt-cdn.net/images/step-4-3f89d67d41.svg" title="Step 4" /></p>
<p><strong>Instrument outgoing requests</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-go#outgoing-instrument "Learn how to instrument Google Cloud Functions in Go with OpenTelemetry and export the traces to Dynatrace.")</p>
<h3 id="step-1-add-opentelemetry-dependencies">Step 1 Add OpenTelemetry dependencies<a class="headerlink" href="#step-1-add-opentelemetry-dependencies" title="Permanent link">&para;</a></h3>
<p>Use the following commands to add the required OpenTelemetry dependencies to your function:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>go get go.opentelemetry.io/otel
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>go get go.opentelemetry.io/otel/sdk
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>go get go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracehttp
</code></pre></div>
<h3 id="step-2-set-up-opentelemetry">Step 2 Set up OpenTelemetry<a class="headerlink" href="#step-2-set-up-opentelemetry" title="Permanent link">&para;</a></h3>
<p>To make sure traces are collected, linked, and exported to Dynatrace, you need to set up and configure OpenTelemetry accordingly. For this, the Dynatrace endpoint and an authentication token are required.</p>
<p>To determine the endpoint</p>
<ol>
<li>Open Dynatrace.</li>
<li>
<p>Check the address line of your browser. The URL will match one of the following patterns:</p>
</li>
<li>
<p><strong>Dynatrace SaaS</strong>: <code>https://{your-environment-id}.live.dynatrace.com/...</code></p>
</li>
<li><strong>Dynatrace Managed</strong>: <code>https://{your-domain}/e/{your-environment-id}/...</code></li>
<li>
<p>Replace the <code>...</code> part with <code>api/v2/otlp</code> to get the URL you will need to configure the OpenTelemetry exporter.</p>
</li>
<li>
<p><strong>Dynatrace SaaS</strong>: <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code></p>
</li>
<li><strong>Dynatrace Managed</strong>: <code>https://{your-domain}/e/{your-environment-id}/api/v2/otlp</code></li>
</ol>
<p>To create an authentication token</p>
<ol>
<li>Go to <strong>Access Tokens</strong> &gt; <strong>Generate new token</strong>.</li>
<li>Provide a <strong>Token name</strong>.</li>
<li>In the <strong>Search scopes</strong> box, search for <code>Ingest OpenTelemetry traces</code> and select the checkbox.</li>
<li>Select <strong>Generate token</strong>.</li>
<li>Select <strong>Copy</strong> to copy the token to your clipboard.</li>
<li>Save the token in a safe place; you can't display it again, and you will need it to configure the OpenTelemetry exporter.</li>
</ol>
<p>Here is how to set up the OpenTelemetry tracing pipeline:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>package otelsetup
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>import (
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>&quot;context&quot;
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>&quot;log&quot;
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>&quot;go.opentelemetry.io/otel&quot;
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>&quot;go.opentelemetry.io/otel/exporters/otlp/otlptrace&quot;
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a>
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>
<a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>
<a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>&quot;go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracehttp&quot;
<a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>
<a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a>
<a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>
<a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a>&quot;go.opentelemetry.io/otel/propagation&quot;
<a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a>
<a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a>
<a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a>
<a id="__codelineno-27-33" name="__codelineno-27-33" href="#__codelineno-27-33"></a>&quot;go.opentelemetry.io/otel/sdk/resource&quot;
<a id="__codelineno-27-34" name="__codelineno-27-34" href="#__codelineno-27-34"></a>
<a id="__codelineno-27-35" name="__codelineno-27-35" href="#__codelineno-27-35"></a>
<a id="__codelineno-27-36" name="__codelineno-27-36" href="#__codelineno-27-36"></a>
<a id="__codelineno-27-37" name="__codelineno-27-37" href="#__codelineno-27-37"></a>sdk &quot;go.opentelemetry.io/otel/sdk/trace&quot;
<a id="__codelineno-27-38" name="__codelineno-27-38" href="#__codelineno-27-38"></a>
<a id="__codelineno-27-39" name="__codelineno-27-39" href="#__codelineno-27-39"></a>
<a id="__codelineno-27-40" name="__codelineno-27-40" href="#__codelineno-27-40"></a>
<a id="__codelineno-27-41" name="__codelineno-27-41" href="#__codelineno-27-41"></a>semconv &quot;go.opentelemetry.io/otel/semconv/v1.7.0&quot;
<a id="__codelineno-27-42" name="__codelineno-27-42" href="#__codelineno-27-42"></a>
<a id="__codelineno-27-43" name="__codelineno-27-43" href="#__codelineno-27-43"></a>
<a id="__codelineno-27-44" name="__codelineno-27-44" href="#__codelineno-27-44"></a>
<a id="__codelineno-27-45" name="__codelineno-27-45" href="#__codelineno-27-45"></a>)
<a id="__codelineno-27-46" name="__codelineno-27-46" href="#__codelineno-27-46"></a>
<a id="__codelineno-27-47" name="__codelineno-27-47" href="#__codelineno-27-47"></a>
<a id="__codelineno-27-48" name="__codelineno-27-48" href="#__codelineno-27-48"></a>
<a id="__codelineno-27-49" name="__codelineno-27-49" href="#__codelineno-27-49"></a>func InitTracing(serviceName string, serviceVersion string) *sdk.TracerProvider {
<a id="__codelineno-27-50" name="__codelineno-27-50" href="#__codelineno-27-50"></a>
<a id="__codelineno-27-51" name="__codelineno-27-51" href="#__codelineno-27-51"></a>
<a id="__codelineno-27-52" name="__codelineno-27-52" href="#__codelineno-27-52"></a>
<a id="__codelineno-27-53" name="__codelineno-27-53" href="#__codelineno-27-53"></a>client := otlptracehttp.NewClient()
<a id="__codelineno-27-54" name="__codelineno-27-54" href="#__codelineno-27-54"></a>
<a id="__codelineno-27-55" name="__codelineno-27-55" href="#__codelineno-27-55"></a>
<a id="__codelineno-27-56" name="__codelineno-27-56" href="#__codelineno-27-56"></a>
<a id="__codelineno-27-57" name="__codelineno-27-57" href="#__codelineno-27-57"></a>exporter, err := otlptrace.New(context.Background(), client)
<a id="__codelineno-27-58" name="__codelineno-27-58" href="#__codelineno-27-58"></a>
<a id="__codelineno-27-59" name="__codelineno-27-59" href="#__codelineno-27-59"></a>
<a id="__codelineno-27-60" name="__codelineno-27-60" href="#__codelineno-27-60"></a>
<a id="__codelineno-27-61" name="__codelineno-27-61" href="#__codelineno-27-61"></a>if err != nil {
<a id="__codelineno-27-62" name="__codelineno-27-62" href="#__codelineno-27-62"></a>
<a id="__codelineno-27-63" name="__codelineno-27-63" href="#__codelineno-27-63"></a>
<a id="__codelineno-27-64" name="__codelineno-27-64" href="#__codelineno-27-64"></a>
<a id="__codelineno-27-65" name="__codelineno-27-65" href="#__codelineno-27-65"></a>log.Fatal(err)
<a id="__codelineno-27-66" name="__codelineno-27-66" href="#__codelineno-27-66"></a>
<a id="__codelineno-27-67" name="__codelineno-27-67" href="#__codelineno-27-67"></a>
<a id="__codelineno-27-68" name="__codelineno-27-68" href="#__codelineno-27-68"></a>
<a id="__codelineno-27-69" name="__codelineno-27-69" href="#__codelineno-27-69"></a>}
<a id="__codelineno-27-70" name="__codelineno-27-70" href="#__codelineno-27-70"></a>
<a id="__codelineno-27-71" name="__codelineno-27-71" href="#__codelineno-27-71"></a>
<a id="__codelineno-27-72" name="__codelineno-27-72" href="#__codelineno-27-72"></a>
<a id="__codelineno-27-73" name="__codelineno-27-73" href="#__codelineno-27-73"></a>// create resource
<a id="__codelineno-27-74" name="__codelineno-27-74" href="#__codelineno-27-74"></a>
<a id="__codelineno-27-75" name="__codelineno-27-75" href="#__codelineno-27-75"></a>
<a id="__codelineno-27-76" name="__codelineno-27-76" href="#__codelineno-27-76"></a>
<a id="__codelineno-27-77" name="__codelineno-27-77" href="#__codelineno-27-77"></a>r, err := resource.Merge(
<a id="__codelineno-27-78" name="__codelineno-27-78" href="#__codelineno-27-78"></a>
<a id="__codelineno-27-79" name="__codelineno-27-79" href="#__codelineno-27-79"></a>
<a id="__codelineno-27-80" name="__codelineno-27-80" href="#__codelineno-27-80"></a>
<a id="__codelineno-27-81" name="__codelineno-27-81" href="#__codelineno-27-81"></a>resource.Default(),
<a id="__codelineno-27-82" name="__codelineno-27-82" href="#__codelineno-27-82"></a>
<a id="__codelineno-27-83" name="__codelineno-27-83" href="#__codelineno-27-83"></a>
<a id="__codelineno-27-84" name="__codelineno-27-84" href="#__codelineno-27-84"></a>
<a id="__codelineno-27-85" name="__codelineno-27-85" href="#__codelineno-27-85"></a>resource.NewWithAttributes(
<a id="__codelineno-27-86" name="__codelineno-27-86" href="#__codelineno-27-86"></a>
<a id="__codelineno-27-87" name="__codelineno-27-87" href="#__codelineno-27-87"></a>
<a id="__codelineno-27-88" name="__codelineno-27-88" href="#__codelineno-27-88"></a>
<a id="__codelineno-27-89" name="__codelineno-27-89" href="#__codelineno-27-89"></a>// customizable resource attributes
<a id="__codelineno-27-90" name="__codelineno-27-90" href="#__codelineno-27-90"></a>
<a id="__codelineno-27-91" name="__codelineno-27-91" href="#__codelineno-27-91"></a>
<a id="__codelineno-27-92" name="__codelineno-27-92" href="#__codelineno-27-92"></a>
<a id="__codelineno-27-93" name="__codelineno-27-93" href="#__codelineno-27-93"></a>semconv.SchemaURL,
<a id="__codelineno-27-94" name="__codelineno-27-94" href="#__codelineno-27-94"></a>
<a id="__codelineno-27-95" name="__codelineno-27-95" href="#__codelineno-27-95"></a>
<a id="__codelineno-27-96" name="__codelineno-27-96" href="#__codelineno-27-96"></a>
<a id="__codelineno-27-97" name="__codelineno-27-97" href="#__codelineno-27-97"></a>semconv.ServiceNameKey.String(serviceName),
<a id="__codelineno-27-98" name="__codelineno-27-98" href="#__codelineno-27-98"></a>
<a id="__codelineno-27-99" name="__codelineno-27-99" href="#__codelineno-27-99"></a>
<a id="__codelineno-27-100" name="__codelineno-27-100" href="#__codelineno-27-100"></a>
<a id="__codelineno-27-101" name="__codelineno-27-101" href="#__codelineno-27-101"></a>semconv.ServiceVersionKey.String(serviceVersion),
<a id="__codelineno-27-102" name="__codelineno-27-102" href="#__codelineno-27-102"></a>
<a id="__codelineno-27-103" name="__codelineno-27-103" href="#__codelineno-27-103"></a>
<a id="__codelineno-27-104" name="__codelineno-27-104" href="#__codelineno-27-104"></a>
<a id="__codelineno-27-105" name="__codelineno-27-105" href="#__codelineno-27-105"></a>),
<a id="__codelineno-27-106" name="__codelineno-27-106" href="#__codelineno-27-106"></a>
<a id="__codelineno-27-107" name="__codelineno-27-107" href="#__codelineno-27-107"></a>
<a id="__codelineno-27-108" name="__codelineno-27-108" href="#__codelineno-27-108"></a>
<a id="__codelineno-27-109" name="__codelineno-27-109" href="#__codelineno-27-109"></a>)
<a id="__codelineno-27-110" name="__codelineno-27-110" href="#__codelineno-27-110"></a>
<a id="__codelineno-27-111" name="__codelineno-27-111" href="#__codelineno-27-111"></a>
<a id="__codelineno-27-112" name="__codelineno-27-112" href="#__codelineno-27-112"></a>
<a id="__codelineno-27-113" name="__codelineno-27-113" href="#__codelineno-27-113"></a>tracerProvider := sdk.NewTracerProvider(
<a id="__codelineno-27-114" name="__codelineno-27-114" href="#__codelineno-27-114"></a>
<a id="__codelineno-27-115" name="__codelineno-27-115" href="#__codelineno-27-115"></a>
<a id="__codelineno-27-116" name="__codelineno-27-116" href="#__codelineno-27-116"></a>
<a id="__codelineno-27-117" name="__codelineno-27-117" href="#__codelineno-27-117"></a>sdk.WithBatcher(exporter),
<a id="__codelineno-27-118" name="__codelineno-27-118" href="#__codelineno-27-118"></a>
<a id="__codelineno-27-119" name="__codelineno-27-119" href="#__codelineno-27-119"></a>
<a id="__codelineno-27-120" name="__codelineno-27-120" href="#__codelineno-27-120"></a>
<a id="__codelineno-27-121" name="__codelineno-27-121" href="#__codelineno-27-121"></a>sdk.WithResource(r),
<a id="__codelineno-27-122" name="__codelineno-27-122" href="#__codelineno-27-122"></a>
<a id="__codelineno-27-123" name="__codelineno-27-123" href="#__codelineno-27-123"></a>
<a id="__codelineno-27-124" name="__codelineno-27-124" href="#__codelineno-27-124"></a>
<a id="__codelineno-27-125" name="__codelineno-27-125" href="#__codelineno-27-125"></a>)
<a id="__codelineno-27-126" name="__codelineno-27-126" href="#__codelineno-27-126"></a>
<a id="__codelineno-27-127" name="__codelineno-27-127" href="#__codelineno-27-127"></a>
<a id="__codelineno-27-128" name="__codelineno-27-128" href="#__codelineno-27-128"></a>
<a id="__codelineno-27-129" name="__codelineno-27-129" href="#__codelineno-27-129"></a>otel.SetTracerProvider(tracerProvider)
<a id="__codelineno-27-130" name="__codelineno-27-130" href="#__codelineno-27-130"></a>
<a id="__codelineno-27-131" name="__codelineno-27-131" href="#__codelineno-27-131"></a>
<a id="__codelineno-27-132" name="__codelineno-27-132" href="#__codelineno-27-132"></a>
<a id="__codelineno-27-133" name="__codelineno-27-133" href="#__codelineno-27-133"></a>// setup W3C trace context as global propagator
<a id="__codelineno-27-134" name="__codelineno-27-134" href="#__codelineno-27-134"></a>
<a id="__codelineno-27-135" name="__codelineno-27-135" href="#__codelineno-27-135"></a>
<a id="__codelineno-27-136" name="__codelineno-27-136" href="#__codelineno-27-136"></a>
<a id="__codelineno-27-137" name="__codelineno-27-137" href="#__codelineno-27-137"></a>otel.SetTextMapPropagator(propagation.TraceContext{})
<a id="__codelineno-27-138" name="__codelineno-27-138" href="#__codelineno-27-138"></a>
<a id="__codelineno-27-139" name="__codelineno-27-139" href="#__codelineno-27-139"></a>
<a id="__codelineno-27-140" name="__codelineno-27-140" href="#__codelineno-27-140"></a>
<a id="__codelineno-27-141" name="__codelineno-27-141" href="#__codelineno-27-141"></a>return tracerProvider
<a id="__codelineno-27-142" name="__codelineno-27-142" href="#__codelineno-27-142"></a>
<a id="__codelineno-27-143" name="__codelineno-27-143" href="#__codelineno-27-143"></a>
<a id="__codelineno-27-144" name="__codelineno-27-144" href="#__codelineno-27-144"></a>
<a id="__codelineno-27-145" name="__codelineno-27-145" href="#__codelineno-27-145"></a>}
</code></pre></div>
<p>To configure the exporter to your tenant, add the following environment variables when deploying your Google Cloud function:</p>
<ul>
<li><code>OTEL_EXPORTER_OTLP_ENDPOINT</code>: set it to the previously determined endpoint.</li>
<li><code>OTEL_EXPORTER_OTLP_HEADERS</code>: set it to <code>Authorization=Api-Token &lt;TOKEN&gt;</code>, where <code>&lt;TOKEN&gt;</code> is the previously created authentication token.</li>
</ul>
<p>Alternatively, the endpoint and authentication token can be configured in code by providing them as options to <code>otlptracehttp.NewClient</code>.</p>
<h3 id="step-3-instrument-the-function-entry-point">Step 3 Instrument the function entry point<a class="headerlink" href="#step-3-instrument-the-function-entry-point" title="Permanent link">&para;</a></h3>
<p>To instrument invocations to a Google Cloud Function with OpenTelemetry, you need to</p>
<ol>
<li>Create a span around the entry point of the function to trace invocations.</li>
<li>Extract and link the parent span from the propagated context. (To learn about W3C Trace Context, see our <a href="https://engineering.dynatrace.com/open-source/standards/w3c-trace-context/">W3C Trace Context√Ø¬ª¬ø</a> introduction.)</li>
</ol>
<p>For certain libraries, OpenTelemetry Go already provides <a href="https://github.com/open-telemetry/opentelemetry-go-contrib/tree/main/instrumentation">instrumentations√Ø¬ª¬ø</a> that you can use to take care of these things.</p>
<p>The following sections show you how to instrument certain types of Google Cloud Functions:</p>
<ul>
<li><a href="#instrument-http-handler">Instrument an HTTP Google Cloud Function</a></li>
<li><a href="#instrument-pubsub-handler">Instrument a Pub/Sub Google Cloud Function</a></li>
</ul>
<h4 id="instrument-an-http-google-cloud-function">Instrument an HTTP Google Cloud Function<a class="headerlink" href="#instrument-an-http-google-cloud-function" title="Permanent link">&para;</a></h4>
<p>The entry point of an HTTP Google Cloud Function mostly matches the standard <code>http.Handler</code> interface. OpenTelemetry Go already provides an instrumentation for this interface. To add it as a dependency to your function, use the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>go get go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp
</code></pre></div>
<p>Because this instrumentation works with an <code>http.Handler</code> interface, it requires your entry point function to have the name <code>ServeHTTP</code>. Also, because the Go Runtime might terminate right after a function invocation, spans must be exported to Dynatrace beforehand.</p>
<p>To take care of this, create a wrapper function that instruments your actual handler and flushes the spans after invocation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>package instrumentor
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>import (
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>&quot;context&quot;
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>&quot;net/http&quot;
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>&quot;go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp&quot;
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a>
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a>
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a>semconv &quot;go.opentelemetry.io/otel/semconv/v1.7.0&quot;
<a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a>
<a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a>
<a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a>
<a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a>&quot;go.opentelemetry.io/otel/trace&quot;
<a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a>
<a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a>
<a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a>
<a id="__codelineno-29-29" name="__codelineno-29-29" href="#__codelineno-29-29"></a>)
<a id="__codelineno-29-30" name="__codelineno-29-30" href="#__codelineno-29-30"></a>
<a id="__codelineno-29-31" name="__codelineno-29-31" href="#__codelineno-29-31"></a>
<a id="__codelineno-29-32" name="__codelineno-29-32" href="#__codelineno-29-32"></a>
<a id="__codelineno-29-33" name="__codelineno-29-33" href="#__codelineno-29-33"></a>type Flush interface {
<a id="__codelineno-29-34" name="__codelineno-29-34" href="#__codelineno-29-34"></a>
<a id="__codelineno-29-35" name="__codelineno-29-35" href="#__codelineno-29-35"></a>
<a id="__codelineno-29-36" name="__codelineno-29-36" href="#__codelineno-29-36"></a>
<a id="__codelineno-29-37" name="__codelineno-29-37" href="#__codelineno-29-37"></a>ForceFlush(context.Context) error
<a id="__codelineno-29-38" name="__codelineno-29-38" href="#__codelineno-29-38"></a>
<a id="__codelineno-29-39" name="__codelineno-29-39" href="#__codelineno-29-39"></a>
<a id="__codelineno-29-40" name="__codelineno-29-40" href="#__codelineno-29-40"></a>
<a id="__codelineno-29-41" name="__codelineno-29-41" href="#__codelineno-29-41"></a>}
<a id="__codelineno-29-42" name="__codelineno-29-42" href="#__codelineno-29-42"></a>
<a id="__codelineno-29-43" name="__codelineno-29-43" href="#__codelineno-29-43"></a>
<a id="__codelineno-29-44" name="__codelineno-29-44" href="#__codelineno-29-44"></a>
<a id="__codelineno-29-45" name="__codelineno-29-45" href="#__codelineno-29-45"></a>type HttpHandler = func(w http.ResponseWriter, r *http.Request)
<a id="__codelineno-29-46" name="__codelineno-29-46" href="#__codelineno-29-46"></a>
<a id="__codelineno-29-47" name="__codelineno-29-47" href="#__codelineno-29-47"></a>
<a id="__codelineno-29-48" name="__codelineno-29-48" href="#__codelineno-29-48"></a>
<a id="__codelineno-29-49" name="__codelineno-29-49" href="#__codelineno-29-49"></a>func InstrumentedHandler(functionName string, function HttpHandler, flusher Flush) HttpHandler {
<a id="__codelineno-29-50" name="__codelineno-29-50" href="#__codelineno-29-50"></a>
<a id="__codelineno-29-51" name="__codelineno-29-51" href="#__codelineno-29-51"></a>
<a id="__codelineno-29-52" name="__codelineno-29-52" href="#__codelineno-29-52"></a>
<a id="__codelineno-29-53" name="__codelineno-29-53" href="#__codelineno-29-53"></a>opts := []trace.SpanStartOption{
<a id="__codelineno-29-54" name="__codelineno-29-54" href="#__codelineno-29-54"></a>
<a id="__codelineno-29-55" name="__codelineno-29-55" href="#__codelineno-29-55"></a>
<a id="__codelineno-29-56" name="__codelineno-29-56" href="#__codelineno-29-56"></a>
<a id="__codelineno-29-57" name="__codelineno-29-57" href="#__codelineno-29-57"></a>// customizable span attributes
<a id="__codelineno-29-58" name="__codelineno-29-58" href="#__codelineno-29-58"></a>
<a id="__codelineno-29-59" name="__codelineno-29-59" href="#__codelineno-29-59"></a>
<a id="__codelineno-29-60" name="__codelineno-29-60" href="#__codelineno-29-60"></a>
<a id="__codelineno-29-61" name="__codelineno-29-61" href="#__codelineno-29-61"></a>trace.WithAttributes(semconv.FaaSTriggerHTTP),
<a id="__codelineno-29-62" name="__codelineno-29-62" href="#__codelineno-29-62"></a>
<a id="__codelineno-29-63" name="__codelineno-29-63" href="#__codelineno-29-63"></a>
<a id="__codelineno-29-64" name="__codelineno-29-64" href="#__codelineno-29-64"></a>
<a id="__codelineno-29-65" name="__codelineno-29-65" href="#__codelineno-29-65"></a>}
<a id="__codelineno-29-66" name="__codelineno-29-66" href="#__codelineno-29-66"></a>
<a id="__codelineno-29-67" name="__codelineno-29-67" href="#__codelineno-29-67"></a>
<a id="__codelineno-29-68" name="__codelineno-29-68" href="#__codelineno-29-68"></a>
<a id="__codelineno-29-69" name="__codelineno-29-69" href="#__codelineno-29-69"></a>// create instrumented handler
<a id="__codelineno-29-70" name="__codelineno-29-70" href="#__codelineno-29-70"></a>
<a id="__codelineno-29-71" name="__codelineno-29-71" href="#__codelineno-29-71"></a>
<a id="__codelineno-29-72" name="__codelineno-29-72" href="#__codelineno-29-72"></a>
<a id="__codelineno-29-73" name="__codelineno-29-73" href="#__codelineno-29-73"></a>handler := otelhttp.NewHandler(
<a id="__codelineno-29-74" name="__codelineno-29-74" href="#__codelineno-29-74"></a>
<a id="__codelineno-29-75" name="__codelineno-29-75" href="#__codelineno-29-75"></a>
<a id="__codelineno-29-76" name="__codelineno-29-76" href="#__codelineno-29-76"></a>
<a id="__codelineno-29-77" name="__codelineno-29-77" href="#__codelineno-29-77"></a>http.HandlerFunc(function), functionName, otelhttp.WithSpanOptions(opts...),
<a id="__codelineno-29-78" name="__codelineno-29-78" href="#__codelineno-29-78"></a>
<a id="__codelineno-29-79" name="__codelineno-29-79" href="#__codelineno-29-79"></a>
<a id="__codelineno-29-80" name="__codelineno-29-80" href="#__codelineno-29-80"></a>
<a id="__codelineno-29-81" name="__codelineno-29-81" href="#__codelineno-29-81"></a>)
<a id="__codelineno-29-82" name="__codelineno-29-82" href="#__codelineno-29-82"></a>
<a id="__codelineno-29-83" name="__codelineno-29-83" href="#__codelineno-29-83"></a>
<a id="__codelineno-29-84" name="__codelineno-29-84" href="#__codelineno-29-84"></a>
<a id="__codelineno-29-85" name="__codelineno-29-85" href="#__codelineno-29-85"></a>return func(w http.ResponseWriter, r *http.Request) {
<a id="__codelineno-29-86" name="__codelineno-29-86" href="#__codelineno-29-86"></a>
<a id="__codelineno-29-87" name="__codelineno-29-87" href="#__codelineno-29-87"></a>
<a id="__codelineno-29-88" name="__codelineno-29-88" href="#__codelineno-29-88"></a>
<a id="__codelineno-29-89" name="__codelineno-29-89" href="#__codelineno-29-89"></a>// call the actual handler
<a id="__codelineno-29-90" name="__codelineno-29-90" href="#__codelineno-29-90"></a>
<a id="__codelineno-29-91" name="__codelineno-29-91" href="#__codelineno-29-91"></a>
<a id="__codelineno-29-92" name="__codelineno-29-92" href="#__codelineno-29-92"></a>
<a id="__codelineno-29-93" name="__codelineno-29-93" href="#__codelineno-29-93"></a>handler.ServeHTTP(w, r)
<a id="__codelineno-29-94" name="__codelineno-29-94" href="#__codelineno-29-94"></a>
<a id="__codelineno-29-95" name="__codelineno-29-95" href="#__codelineno-29-95"></a>
<a id="__codelineno-29-96" name="__codelineno-29-96" href="#__codelineno-29-96"></a>
<a id="__codelineno-29-97" name="__codelineno-29-97" href="#__codelineno-29-97"></a>// flush spans
<a id="__codelineno-29-98" name="__codelineno-29-98" href="#__codelineno-29-98"></a>
<a id="__codelineno-29-99" name="__codelineno-29-99" href="#__codelineno-29-99"></a>
<a id="__codelineno-29-100" name="__codelineno-29-100" href="#__codelineno-29-100"></a>
<a id="__codelineno-29-101" name="__codelineno-29-101" href="#__codelineno-29-101"></a>flusher.ForceFlush(r.Context())
<a id="__codelineno-29-102" name="__codelineno-29-102" href="#__codelineno-29-102"></a>
<a id="__codelineno-29-103" name="__codelineno-29-103" href="#__codelineno-29-103"></a>
<a id="__codelineno-29-104" name="__codelineno-29-104" href="#__codelineno-29-104"></a>
<a id="__codelineno-29-105" name="__codelineno-29-105" href="#__codelineno-29-105"></a>}
<a id="__codelineno-29-106" name="__codelineno-29-106" href="#__codelineno-29-106"></a>
<a id="__codelineno-29-107" name="__codelineno-29-107" href="#__codelineno-29-107"></a>
<a id="__codelineno-29-108" name="__codelineno-29-108" href="#__codelineno-29-108"></a>
<a id="__codelineno-29-109" name="__codelineno-29-109" href="#__codelineno-29-109"></a>}
</code></pre></div>
<p>Putting everything together, here is how you use it in your function:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>package myfunction
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>import (
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>&quot;net/http&quot;
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>&quot;instrumentor&quot;
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>&quot;otelsetup&quot;
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>
<a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a>)
<a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a>
<a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a>
<a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a>
<a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a>var InstrumentedHandler instrumentor.HttpHandler
<a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a>
<a id="__codelineno-30-27" name="__codelineno-30-27" href="#__codelineno-30-27"></a>
<a id="__codelineno-30-28" name="__codelineno-30-28" href="#__codelineno-30-28"></a>
<a id="__codelineno-30-29" name="__codelineno-30-29" href="#__codelineno-30-29"></a>func init() {
<a id="__codelineno-30-30" name="__codelineno-30-30" href="#__codelineno-30-30"></a>
<a id="__codelineno-30-31" name="__codelineno-30-31" href="#__codelineno-30-31"></a>
<a id="__codelineno-30-32" name="__codelineno-30-32" href="#__codelineno-30-32"></a>
<a id="__codelineno-30-33" name="__codelineno-30-33" href="#__codelineno-30-33"></a>tracerProvider := otelsetup.InitTracing(&quot;my-service&quot;, &quot;1.0.0&quot;)
<a id="__codelineno-30-34" name="__codelineno-30-34" href="#__codelineno-30-34"></a>
<a id="__codelineno-30-35" name="__codelineno-30-35" href="#__codelineno-30-35"></a>
<a id="__codelineno-30-36" name="__codelineno-30-36" href="#__codelineno-30-36"></a>
<a id="__codelineno-30-37" name="__codelineno-30-37" href="#__codelineno-30-37"></a>InstrumentedHandler = instrumentor.InstrumentedHandler(&quot;my-function&quot;, Handler, tracerProvider)
<a id="__codelineno-30-38" name="__codelineno-30-38" href="#__codelineno-30-38"></a>
<a id="__codelineno-30-39" name="__codelineno-30-39" href="#__codelineno-30-39"></a>
<a id="__codelineno-30-40" name="__codelineno-30-40" href="#__codelineno-30-40"></a>
<a id="__codelineno-30-41" name="__codelineno-30-41" href="#__codelineno-30-41"></a>}
<a id="__codelineno-30-42" name="__codelineno-30-42" href="#__codelineno-30-42"></a>
<a id="__codelineno-30-43" name="__codelineno-30-43" href="#__codelineno-30-43"></a>
<a id="__codelineno-30-44" name="__codelineno-30-44" href="#__codelineno-30-44"></a>
<a id="__codelineno-30-45" name="__codelineno-30-45" href="#__codelineno-30-45"></a>func Handler(w http.ResponseWriter, r *http.Request) {
<a id="__codelineno-30-46" name="__codelineno-30-46" href="#__codelineno-30-46"></a>
<a id="__codelineno-30-47" name="__codelineno-30-47" href="#__codelineno-30-47"></a>
<a id="__codelineno-30-48" name="__codelineno-30-48" href="#__codelineno-30-48"></a>
<a id="__codelineno-30-49" name="__codelineno-30-49" href="#__codelineno-30-49"></a>// Your code goes here
<a id="__codelineno-30-50" name="__codelineno-30-50" href="#__codelineno-30-50"></a>
<a id="__codelineno-30-51" name="__codelineno-30-51" href="#__codelineno-30-51"></a>
<a id="__codelineno-30-52" name="__codelineno-30-52" href="#__codelineno-30-52"></a>
<a id="__codelineno-30-53" name="__codelineno-30-53" href="#__codelineno-30-53"></a>}
</code></pre></div>
<p>When deploying your function to GCP, make sure to use <code>InstrumentedHandler</code> as the entry point to your Google Cloud Function.</p>
<h4 id="instrument-a-pubsub-google-cloud-function">Instrument a Pub/Sub Google Cloud Function<a class="headerlink" href="#instrument-a-pubsub-google-cloud-function" title="Permanent link">&para;</a></h4>
<p>A Pub/Sub Google Cloud Function is triggered by the <a href="https://cloud.google.com/pubsub/docs/reference/rest/v1/PubsubMessage">Pub/Sub message√Ø¬ª¬ø</a> event. The event is unmarshalled by GCP into a message object that matches the type you defined in the entry point of your function. This type usually looks similar to the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>type PubSubMessage struct {
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>Data        []byte            `json:&quot;data&quot;`
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>Attributes  map[string]string `json:&quot;attributes&quot;`
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a>MessageId   string            `json:&quot;messageId&quot;`
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a>PublishTime string            `json:&quot;publishTime&quot;`
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a>
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a>
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a>
<a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a>OrderingKey string            `json:&quot;orderingKey&quot;`
<a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a>
<a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a>
<a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a>
<a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a>}
</code></pre></div>
<p>OpenTelemetry currently does not provide an instrumentation for Pub/Sub, so instrumenting a Pub/Sub Google Cloud Function requires a little more work.</p>
<p>In the following snippet, you can see how to create a wrapper function that instruments invocations to your Pub/Sub handler. This wrapper creates the corresponding span and uses the <code>Attributes</code> map on the <code>PubSubMessage</code> to extract and link to the parent span from the propagated context.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>package instrumentor
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>import (
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>&quot;context&quot;
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>&quot;fmt&quot;
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>&quot;go.opentelemetry.io/otel&quot;
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>&quot;go.opentelemetry.io/otel/codes&quot;
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>
<a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a>&quot;go.opentelemetry.io/otel/propagation&quot;
<a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a>
<a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a>
<a id="__codelineno-32-28" name="__codelineno-32-28" href="#__codelineno-32-28"></a>
<a id="__codelineno-32-29" name="__codelineno-32-29" href="#__codelineno-32-29"></a>semconv &quot;go.opentelemetry.io/otel/semconv/v1.7.0&quot;
<a id="__codelineno-32-30" name="__codelineno-32-30" href="#__codelineno-32-30"></a>
<a id="__codelineno-32-31" name="__codelineno-32-31" href="#__codelineno-32-31"></a>
<a id="__codelineno-32-32" name="__codelineno-32-32" href="#__codelineno-32-32"></a>
<a id="__codelineno-32-33" name="__codelineno-32-33" href="#__codelineno-32-33"></a>&quot;go.opentelemetry.io/otel/trace&quot;
<a id="__codelineno-32-34" name="__codelineno-32-34" href="#__codelineno-32-34"></a>
<a id="__codelineno-32-35" name="__codelineno-32-35" href="#__codelineno-32-35"></a>
<a id="__codelineno-32-36" name="__codelineno-32-36" href="#__codelineno-32-36"></a>
<a id="__codelineno-32-37" name="__codelineno-32-37" href="#__codelineno-32-37"></a>)
<a id="__codelineno-32-38" name="__codelineno-32-38" href="#__codelineno-32-38"></a>
<a id="__codelineno-32-39" name="__codelineno-32-39" href="#__codelineno-32-39"></a>
<a id="__codelineno-32-40" name="__codelineno-32-40" href="#__codelineno-32-40"></a>
<a id="__codelineno-32-41" name="__codelineno-32-41" href="#__codelineno-32-41"></a>const (
<a id="__codelineno-32-42" name="__codelineno-32-42" href="#__codelineno-32-42"></a>
<a id="__codelineno-32-43" name="__codelineno-32-43" href="#__codelineno-32-43"></a>
<a id="__codelineno-32-44" name="__codelineno-32-44" href="#__codelineno-32-44"></a>
<a id="__codelineno-32-45" name="__codelineno-32-45" href="#__codelineno-32-45"></a>instrumentationName = &quot;my.company.com/my-pubsub-handler-instrumentation-name&quot;
<a id="__codelineno-32-46" name="__codelineno-32-46" href="#__codelineno-32-46"></a>
<a id="__codelineno-32-47" name="__codelineno-32-47" href="#__codelineno-32-47"></a>
<a id="__codelineno-32-48" name="__codelineno-32-48" href="#__codelineno-32-48"></a>
<a id="__codelineno-32-49" name="__codelineno-32-49" href="#__codelineno-32-49"></a>instrumentationVer  = &quot;0.1.0&quot;
<a id="__codelineno-32-50" name="__codelineno-32-50" href="#__codelineno-32-50"></a>
<a id="__codelineno-32-51" name="__codelineno-32-51" href="#__codelineno-32-51"></a>
<a id="__codelineno-32-52" name="__codelineno-32-52" href="#__codelineno-32-52"></a>
<a id="__codelineno-32-53" name="__codelineno-32-53" href="#__codelineno-32-53"></a>)
<a id="__codelineno-32-54" name="__codelineno-32-54" href="#__codelineno-32-54"></a>
<a id="__codelineno-32-55" name="__codelineno-32-55" href="#__codelineno-32-55"></a>
<a id="__codelineno-32-56" name="__codelineno-32-56" href="#__codelineno-32-56"></a>
<a id="__codelineno-32-57" name="__codelineno-32-57" href="#__codelineno-32-57"></a>type PubSubHandler = func(context.Context, PubSubMessage) error
<a id="__codelineno-32-58" name="__codelineno-32-58" href="#__codelineno-32-58"></a>
<a id="__codelineno-32-59" name="__codelineno-32-59" href="#__codelineno-32-59"></a>
<a id="__codelineno-32-60" name="__codelineno-32-60" href="#__codelineno-32-60"></a>
<a id="__codelineno-32-61" name="__codelineno-32-61" href="#__codelineno-32-61"></a>type Flush interface {
<a id="__codelineno-32-62" name="__codelineno-32-62" href="#__codelineno-32-62"></a>
<a id="__codelineno-32-63" name="__codelineno-32-63" href="#__codelineno-32-63"></a>
<a id="__codelineno-32-64" name="__codelineno-32-64" href="#__codelineno-32-64"></a>
<a id="__codelineno-32-65" name="__codelineno-32-65" href="#__codelineno-32-65"></a>ForceFlush(context.Context) error
<a id="__codelineno-32-66" name="__codelineno-32-66" href="#__codelineno-32-66"></a>
<a id="__codelineno-32-67" name="__codelineno-32-67" href="#__codelineno-32-67"></a>
<a id="__codelineno-32-68" name="__codelineno-32-68" href="#__codelineno-32-68"></a>
<a id="__codelineno-32-69" name="__codelineno-32-69" href="#__codelineno-32-69"></a>}
<a id="__codelineno-32-70" name="__codelineno-32-70" href="#__codelineno-32-70"></a>
<a id="__codelineno-32-71" name="__codelineno-32-71" href="#__codelineno-32-71"></a>
<a id="__codelineno-32-72" name="__codelineno-32-72" href="#__codelineno-32-72"></a>
<a id="__codelineno-32-73" name="__codelineno-32-73" href="#__codelineno-32-73"></a>func InstrumentedHandler(topicID string, handler PubSubHandler, flush Flush) PubSubHandler {
<a id="__codelineno-32-74" name="__codelineno-32-74" href="#__codelineno-32-74"></a>
<a id="__codelineno-32-75" name="__codelineno-32-75" href="#__codelineno-32-75"></a>
<a id="__codelineno-32-76" name="__codelineno-32-76" href="#__codelineno-32-76"></a>
<a id="__codelineno-32-77" name="__codelineno-32-77" href="#__codelineno-32-77"></a>return func(ctx context.Context, msg PubSubMessage) error {
<a id="__codelineno-32-78" name="__codelineno-32-78" href="#__codelineno-32-78"></a>
<a id="__codelineno-32-79" name="__codelineno-32-79" href="#__codelineno-32-79"></a>
<a id="__codelineno-32-80" name="__codelineno-32-80" href="#__codelineno-32-80"></a>
<a id="__codelineno-32-81" name="__codelineno-32-81" href="#__codelineno-32-81"></a>// create span
<a id="__codelineno-32-82" name="__codelineno-32-82" href="#__codelineno-32-82"></a>
<a id="__codelineno-32-83" name="__codelineno-32-83" href="#__codelineno-32-83"></a>
<a id="__codelineno-32-84" name="__codelineno-32-84" href="#__codelineno-32-84"></a>
<a id="__codelineno-32-85" name="__codelineno-32-85" href="#__codelineno-32-85"></a>ctx, span := beforePubSubHandlerInvoke(ctx, topicID, msg)
<a id="__codelineno-32-86" name="__codelineno-32-86" href="#__codelineno-32-86"></a>
<a id="__codelineno-32-87" name="__codelineno-32-87" href="#__codelineno-32-87"></a>
<a id="__codelineno-32-88" name="__codelineno-32-88" href="#__codelineno-32-88"></a>
<a id="__codelineno-32-89" name="__codelineno-32-89" href="#__codelineno-32-89"></a>defer span.End()
<a id="__codelineno-32-90" name="__codelineno-32-90" href="#__codelineno-32-90"></a>
<a id="__codelineno-32-91" name="__codelineno-32-91" href="#__codelineno-32-91"></a>
<a id="__codelineno-32-92" name="__codelineno-32-92" href="#__codelineno-32-92"></a>
<a id="__codelineno-32-93" name="__codelineno-32-93" href="#__codelineno-32-93"></a>// call actual handler function
<a id="__codelineno-32-94" name="__codelineno-32-94" href="#__codelineno-32-94"></a>
<a id="__codelineno-32-95" name="__codelineno-32-95" href="#__codelineno-32-95"></a>
<a id="__codelineno-32-96" name="__codelineno-32-96" href="#__codelineno-32-96"></a>
<a id="__codelineno-32-97" name="__codelineno-32-97" href="#__codelineno-32-97"></a>err := handler(ctx, msg)
<a id="__codelineno-32-98" name="__codelineno-32-98" href="#__codelineno-32-98"></a>
<a id="__codelineno-32-99" name="__codelineno-32-99" href="#__codelineno-32-99"></a>
<a id="__codelineno-32-100" name="__codelineno-32-100" href="#__codelineno-32-100"></a>
<a id="__codelineno-32-101" name="__codelineno-32-101" href="#__codelineno-32-101"></a>// update span with handler result
<a id="__codelineno-32-102" name="__codelineno-32-102" href="#__codelineno-32-102"></a>
<a id="__codelineno-32-103" name="__codelineno-32-103" href="#__codelineno-32-103"></a>
<a id="__codelineno-32-104" name="__codelineno-32-104" href="#__codelineno-32-104"></a>
<a id="__codelineno-32-105" name="__codelineno-32-105" href="#__codelineno-32-105"></a>afterPubSubHandlerInvoke(span, err)
<a id="__codelineno-32-106" name="__codelineno-32-106" href="#__codelineno-32-106"></a>
<a id="__codelineno-32-107" name="__codelineno-32-107" href="#__codelineno-32-107"></a>
<a id="__codelineno-32-108" name="__codelineno-32-108" href="#__codelineno-32-108"></a>
<a id="__codelineno-32-109" name="__codelineno-32-109" href="#__codelineno-32-109"></a>// flush spans
<a id="__codelineno-32-110" name="__codelineno-32-110" href="#__codelineno-32-110"></a>
<a id="__codelineno-32-111" name="__codelineno-32-111" href="#__codelineno-32-111"></a>
<a id="__codelineno-32-112" name="__codelineno-32-112" href="#__codelineno-32-112"></a>
<a id="__codelineno-32-113" name="__codelineno-32-113" href="#__codelineno-32-113"></a>flush.ForceFlush(ctx)
<a id="__codelineno-32-114" name="__codelineno-32-114" href="#__codelineno-32-114"></a>
<a id="__codelineno-32-115" name="__codelineno-32-115" href="#__codelineno-32-115"></a>
<a id="__codelineno-32-116" name="__codelineno-32-116" href="#__codelineno-32-116"></a>
<a id="__codelineno-32-117" name="__codelineno-32-117" href="#__codelineno-32-117"></a>return err
<a id="__codelineno-32-118" name="__codelineno-32-118" href="#__codelineno-32-118"></a>
<a id="__codelineno-32-119" name="__codelineno-32-119" href="#__codelineno-32-119"></a>
<a id="__codelineno-32-120" name="__codelineno-32-120" href="#__codelineno-32-120"></a>
<a id="__codelineno-32-121" name="__codelineno-32-121" href="#__codelineno-32-121"></a>}
<a id="__codelineno-32-122" name="__codelineno-32-122" href="#__codelineno-32-122"></a>
<a id="__codelineno-32-123" name="__codelineno-32-123" href="#__codelineno-32-123"></a>
<a id="__codelineno-32-124" name="__codelineno-32-124" href="#__codelineno-32-124"></a>
<a id="__codelineno-32-125" name="__codelineno-32-125" href="#__codelineno-32-125"></a>}
<a id="__codelineno-32-126" name="__codelineno-32-126" href="#__codelineno-32-126"></a>
<a id="__codelineno-32-127" name="__codelineno-32-127" href="#__codelineno-32-127"></a>
<a id="__codelineno-32-128" name="__codelineno-32-128" href="#__codelineno-32-128"></a>
<a id="__codelineno-32-129" name="__codelineno-32-129" href="#__codelineno-32-129"></a>func beforePubSubHandlerInvoke(ctx context.Context, topicID string, msg PubSubMessage) (context.Context, trace.Span) {
<a id="__codelineno-32-130" name="__codelineno-32-130" href="#__codelineno-32-130"></a>
<a id="__codelineno-32-131" name="__codelineno-32-131" href="#__codelineno-32-131"></a>
<a id="__codelineno-32-132" name="__codelineno-32-132" href="#__codelineno-32-132"></a>
<a id="__codelineno-32-133" name="__codelineno-32-133" href="#__codelineno-32-133"></a>if msg.Attributes != nil {
<a id="__codelineno-32-134" name="__codelineno-32-134" href="#__codelineno-32-134"></a>
<a id="__codelineno-32-135" name="__codelineno-32-135" href="#__codelineno-32-135"></a>
<a id="__codelineno-32-136" name="__codelineno-32-136" href="#__codelineno-32-136"></a>
<a id="__codelineno-32-137" name="__codelineno-32-137" href="#__codelineno-32-137"></a>// extract propagated span
<a id="__codelineno-32-138" name="__codelineno-32-138" href="#__codelineno-32-138"></a>
<a id="__codelineno-32-139" name="__codelineno-32-139" href="#__codelineno-32-139"></a>
<a id="__codelineno-32-140" name="__codelineno-32-140" href="#__codelineno-32-140"></a>
<a id="__codelineno-32-141" name="__codelineno-32-141" href="#__codelineno-32-141"></a>propagator := otel.GetTextMapPropagator()
<a id="__codelineno-32-142" name="__codelineno-32-142" href="#__codelineno-32-142"></a>
<a id="__codelineno-32-143" name="__codelineno-32-143" href="#__codelineno-32-143"></a>
<a id="__codelineno-32-144" name="__codelineno-32-144" href="#__codelineno-32-144"></a>
<a id="__codelineno-32-145" name="__codelineno-32-145" href="#__codelineno-32-145"></a>ctx = propagator.Extract(ctx, propagation.MapCarrier(msg.Attributes))
<a id="__codelineno-32-146" name="__codelineno-32-146" href="#__codelineno-32-146"></a>
<a id="__codelineno-32-147" name="__codelineno-32-147" href="#__codelineno-32-147"></a>
<a id="__codelineno-32-148" name="__codelineno-32-148" href="#__codelineno-32-148"></a>
<a id="__codelineno-32-149" name="__codelineno-32-149" href="#__codelineno-32-149"></a>}
<a id="__codelineno-32-150" name="__codelineno-32-150" href="#__codelineno-32-150"></a>
<a id="__codelineno-32-151" name="__codelineno-32-151" href="#__codelineno-32-151"></a>
<a id="__codelineno-32-152" name="__codelineno-32-152" href="#__codelineno-32-152"></a>
<a id="__codelineno-32-153" name="__codelineno-32-153" href="#__codelineno-32-153"></a>opts := []trace.SpanStartOption{
<a id="__codelineno-32-154" name="__codelineno-32-154" href="#__codelineno-32-154"></a>
<a id="__codelineno-32-155" name="__codelineno-32-155" href="#__codelineno-32-155"></a>
<a id="__codelineno-32-156" name="__codelineno-32-156" href="#__codelineno-32-156"></a>
<a id="__codelineno-32-157" name="__codelineno-32-157" href="#__codelineno-32-157"></a>trace.WithSpanKind(trace.SpanKindConsumer),
<a id="__codelineno-32-158" name="__codelineno-32-158" href="#__codelineno-32-158"></a>
<a id="__codelineno-32-159" name="__codelineno-32-159" href="#__codelineno-32-159"></a>
<a id="__codelineno-32-160" name="__codelineno-32-160" href="#__codelineno-32-160"></a>
<a id="__codelineno-32-161" name="__codelineno-32-161" href="#__codelineno-32-161"></a>trace.WithAttributes(
<a id="__codelineno-32-162" name="__codelineno-32-162" href="#__codelineno-32-162"></a>
<a id="__codelineno-32-163" name="__codelineno-32-163" href="#__codelineno-32-163"></a>
<a id="__codelineno-32-164" name="__codelineno-32-164" href="#__codelineno-32-164"></a>
<a id="__codelineno-32-165" name="__codelineno-32-165" href="#__codelineno-32-165"></a>//customizable attributes
<a id="__codelineno-32-166" name="__codelineno-32-166" href="#__codelineno-32-166"></a>
<a id="__codelineno-32-167" name="__codelineno-32-167" href="#__codelineno-32-167"></a>
<a id="__codelineno-32-168" name="__codelineno-32-168" href="#__codelineno-32-168"></a>
<a id="__codelineno-32-169" name="__codelineno-32-169" href="#__codelineno-32-169"></a>semconv.FaaSTriggerPubsub,
<a id="__codelineno-32-170" name="__codelineno-32-170" href="#__codelineno-32-170"></a>
<a id="__codelineno-32-171" name="__codelineno-32-171" href="#__codelineno-32-171"></a>
<a id="__codelineno-32-172" name="__codelineno-32-172" href="#__codelineno-32-172"></a>
<a id="__codelineno-32-173" name="__codelineno-32-173" href="#__codelineno-32-173"></a>semconv.MessagingSystemKey.String(&quot;pubsub&quot;),
<a id="__codelineno-32-174" name="__codelineno-32-174" href="#__codelineno-32-174"></a>
<a id="__codelineno-32-175" name="__codelineno-32-175" href="#__codelineno-32-175"></a>
<a id="__codelineno-32-176" name="__codelineno-32-176" href="#__codelineno-32-176"></a>
<a id="__codelineno-32-177" name="__codelineno-32-177" href="#__codelineno-32-177"></a>semconv.MessagingDestinationKey.String(topicID),
<a id="__codelineno-32-178" name="__codelineno-32-178" href="#__codelineno-32-178"></a>
<a id="__codelineno-32-179" name="__codelineno-32-179" href="#__codelineno-32-179"></a>
<a id="__codelineno-32-180" name="__codelineno-32-180" href="#__codelineno-32-180"></a>
<a id="__codelineno-32-181" name="__codelineno-32-181" href="#__codelineno-32-181"></a>semconv.MessagingDestinationKindTopic,
<a id="__codelineno-32-182" name="__codelineno-32-182" href="#__codelineno-32-182"></a>
<a id="__codelineno-32-183" name="__codelineno-32-183" href="#__codelineno-32-183"></a>
<a id="__codelineno-32-184" name="__codelineno-32-184" href="#__codelineno-32-184"></a>
<a id="__codelineno-32-185" name="__codelineno-32-185" href="#__codelineno-32-185"></a>semconv.MessagingOperationProcess,
<a id="__codelineno-32-186" name="__codelineno-32-186" href="#__codelineno-32-186"></a>
<a id="__codelineno-32-187" name="__codelineno-32-187" href="#__codelineno-32-187"></a>
<a id="__codelineno-32-188" name="__codelineno-32-188" href="#__codelineno-32-188"></a>
<a id="__codelineno-32-189" name="__codelineno-32-189" href="#__codelineno-32-189"></a>semconv.MessagingMessageIDKey.String(msg.MessageId),
<a id="__codelineno-32-190" name="__codelineno-32-190" href="#__codelineno-32-190"></a>
<a id="__codelineno-32-191" name="__codelineno-32-191" href="#__codelineno-32-191"></a>
<a id="__codelineno-32-192" name="__codelineno-32-192" href="#__codelineno-32-192"></a>
<a id="__codelineno-32-193" name="__codelineno-32-193" href="#__codelineno-32-193"></a>),
<a id="__codelineno-32-194" name="__codelineno-32-194" href="#__codelineno-32-194"></a>
<a id="__codelineno-32-195" name="__codelineno-32-195" href="#__codelineno-32-195"></a>
<a id="__codelineno-32-196" name="__codelineno-32-196" href="#__codelineno-32-196"></a>
<a id="__codelineno-32-197" name="__codelineno-32-197" href="#__codelineno-32-197"></a>}
<a id="__codelineno-32-198" name="__codelineno-32-198" href="#__codelineno-32-198"></a>
<a id="__codelineno-32-199" name="__codelineno-32-199" href="#__codelineno-32-199"></a>
<a id="__codelineno-32-200" name="__codelineno-32-200" href="#__codelineno-32-200"></a>
<a id="__codelineno-32-201" name="__codelineno-32-201" href="#__codelineno-32-201"></a>tracer := otel.GetTracerProvider().Tracer(
<a id="__codelineno-32-202" name="__codelineno-32-202" href="#__codelineno-32-202"></a>
<a id="__codelineno-32-203" name="__codelineno-32-203" href="#__codelineno-32-203"></a>
<a id="__codelineno-32-204" name="__codelineno-32-204" href="#__codelineno-32-204"></a>
<a id="__codelineno-32-205" name="__codelineno-32-205" href="#__codelineno-32-205"></a>instrumentationName, trace.WithInstrumentationVersion(instrumentationVer),
<a id="__codelineno-32-206" name="__codelineno-32-206" href="#__codelineno-32-206"></a>
<a id="__codelineno-32-207" name="__codelineno-32-207" href="#__codelineno-32-207"></a>
<a id="__codelineno-32-208" name="__codelineno-32-208" href="#__codelineno-32-208"></a>
<a id="__codelineno-32-209" name="__codelineno-32-209" href="#__codelineno-32-209"></a>)
<a id="__codelineno-32-210" name="__codelineno-32-210" href="#__codelineno-32-210"></a>
<a id="__codelineno-32-211" name="__codelineno-32-211" href="#__codelineno-32-211"></a>
<a id="__codelineno-32-212" name="__codelineno-32-212" href="#__codelineno-32-212"></a>
<a id="__codelineno-32-213" name="__codelineno-32-213" href="#__codelineno-32-213"></a>return tracer.Start(ctx, fmt.Sprintf(&quot;%s process&quot;, topicID), opts...)
<a id="__codelineno-32-214" name="__codelineno-32-214" href="#__codelineno-32-214"></a>
<a id="__codelineno-32-215" name="__codelineno-32-215" href="#__codelineno-32-215"></a>
<a id="__codelineno-32-216" name="__codelineno-32-216" href="#__codelineno-32-216"></a>
<a id="__codelineno-32-217" name="__codelineno-32-217" href="#__codelineno-32-217"></a>}
<a id="__codelineno-32-218" name="__codelineno-32-218" href="#__codelineno-32-218"></a>
<a id="__codelineno-32-219" name="__codelineno-32-219" href="#__codelineno-32-219"></a>
<a id="__codelineno-32-220" name="__codelineno-32-220" href="#__codelineno-32-220"></a>
<a id="__codelineno-32-221" name="__codelineno-32-221" href="#__codelineno-32-221"></a>func afterPubSubHandlerInvoke(span trace.Span, err error) {
<a id="__codelineno-32-222" name="__codelineno-32-222" href="#__codelineno-32-222"></a>
<a id="__codelineno-32-223" name="__codelineno-32-223" href="#__codelineno-32-223"></a>
<a id="__codelineno-32-224" name="__codelineno-32-224" href="#__codelineno-32-224"></a>
<a id="__codelineno-32-225" name="__codelineno-32-225" href="#__codelineno-32-225"></a>if err != nil {
<a id="__codelineno-32-226" name="__codelineno-32-226" href="#__codelineno-32-226"></a>
<a id="__codelineno-32-227" name="__codelineno-32-227" href="#__codelineno-32-227"></a>
<a id="__codelineno-32-228" name="__codelineno-32-228" href="#__codelineno-32-228"></a>
<a id="__codelineno-32-229" name="__codelineno-32-229" href="#__codelineno-32-229"></a>span.RecordError(err)
<a id="__codelineno-32-230" name="__codelineno-32-230" href="#__codelineno-32-230"></a>
<a id="__codelineno-32-231" name="__codelineno-32-231" href="#__codelineno-32-231"></a>
<a id="__codelineno-32-232" name="__codelineno-32-232" href="#__codelineno-32-232"></a>
<a id="__codelineno-32-233" name="__codelineno-32-233" href="#__codelineno-32-233"></a>span.SetStatus(codes.Error, err.Error())
<a id="__codelineno-32-234" name="__codelineno-32-234" href="#__codelineno-32-234"></a>
<a id="__codelineno-32-235" name="__codelineno-32-235" href="#__codelineno-32-235"></a>
<a id="__codelineno-32-236" name="__codelineno-32-236" href="#__codelineno-32-236"></a>
<a id="__codelineno-32-237" name="__codelineno-32-237" href="#__codelineno-32-237"></a>}
<a id="__codelineno-32-238" name="__codelineno-32-238" href="#__codelineno-32-238"></a>
<a id="__codelineno-32-239" name="__codelineno-32-239" href="#__codelineno-32-239"></a>
<a id="__codelineno-32-240" name="__codelineno-32-240" href="#__codelineno-32-240"></a>
<a id="__codelineno-32-241" name="__codelineno-32-241" href="#__codelineno-32-241"></a>}
</code></pre></div>
<p>Putting everything together, here is how to use the instrumented handler in your function:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>package myfunction
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>import (
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>&quot;context&quot;
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>&quot;instrumentor&quot;
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a>&quot;otelsetup&quot;
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a>
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a>
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a>
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a>)
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a>
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a>
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a>
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a>var InstrumentedHandler instrumentor.PubSubHandler
<a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a>
<a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a>
<a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a>
<a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a>func init() {
<a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a>
<a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a>
<a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a>
<a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a>tracerProvider := otelsetup.InitTracing(&quot;my-service&quot;, &quot;1.0.0&quot;)
<a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a>
<a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a>
<a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a>
<a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a>InstrumentedHandler = instrumentor.InstrumentedHandler(&quot;my-topic&quot;, Handler, tracerProvider)
<a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a>
<a id="__codelineno-33-39" name="__codelineno-33-39" href="#__codelineno-33-39"></a>
<a id="__codelineno-33-40" name="__codelineno-33-40" href="#__codelineno-33-40"></a>
<a id="__codelineno-33-41" name="__codelineno-33-41" href="#__codelineno-33-41"></a>}
<a id="__codelineno-33-42" name="__codelineno-33-42" href="#__codelineno-33-42"></a>
<a id="__codelineno-33-43" name="__codelineno-33-43" href="#__codelineno-33-43"></a>
<a id="__codelineno-33-44" name="__codelineno-33-44" href="#__codelineno-33-44"></a>
<a id="__codelineno-33-45" name="__codelineno-33-45" href="#__codelineno-33-45"></a>func Handler(ctx context.Context, msg PubSubMessage) error {
<a id="__codelineno-33-46" name="__codelineno-33-46" href="#__codelineno-33-46"></a>
<a id="__codelineno-33-47" name="__codelineno-33-47" href="#__codelineno-33-47"></a>
<a id="__codelineno-33-48" name="__codelineno-33-48" href="#__codelineno-33-48"></a>
<a id="__codelineno-33-49" name="__codelineno-33-49" href="#__codelineno-33-49"></a>// Your code goes here
<a id="__codelineno-33-50" name="__codelineno-33-50" href="#__codelineno-33-50"></a>
<a id="__codelineno-33-51" name="__codelineno-33-51" href="#__codelineno-33-51"></a>
<a id="__codelineno-33-52" name="__codelineno-33-52" href="#__codelineno-33-52"></a>
<a id="__codelineno-33-53" name="__codelineno-33-53" href="#__codelineno-33-53"></a>return nil
<a id="__codelineno-33-54" name="__codelineno-33-54" href="#__codelineno-33-54"></a>
<a id="__codelineno-33-55" name="__codelineno-33-55" href="#__codelineno-33-55"></a>
<a id="__codelineno-33-56" name="__codelineno-33-56" href="#__codelineno-33-56"></a>
<a id="__codelineno-33-57" name="__codelineno-33-57" href="#__codelineno-33-57"></a>}
</code></pre></div>
<p>When deploying your function to GCP, make sure to use <code>InstrumentedHandler</code> as the entry point to your Google Cloud Function.</p>
<h3 id="step-4-instrument-outgoing-requests">Step 4 Instrument outgoing requests<a class="headerlink" href="#step-4-instrument-outgoing-requests" title="Permanent link">&para;</a></h3>
<p>To achieve end-to-end tracing, it is important to also make sure your outgoing requests are instrumented.</p>
<p>The following sections show how to instrument certain outgoing requests:</p>
<ul>
<li><a href="#outgoing-http-instrument">Instrument outgoing HTTP requests</a></li>
<li><a href="#pubsub-publish-instrument">Instrument Pub/Sub publish requests</a></li>
</ul>
<p>OpenTelemetry Go uses <code>context.Context</code> to link a newly created span to its parent, so when using an instrumentation or creating a span manually, make sure to pass it the <code>context.Context</code> instance that was passed to your Google Cloud Function (or an instance derived from it). Otherwise, your trace will not be linked properly.</p>
<h4 id="instrument-outgoing-http-requests">Instrument outgoing HTTP requests<a class="headerlink" href="#instrument-outgoing-http-requests" title="Permanent link">&para;</a></h4>
<p>OpenTelemetry Go provides an instrumentation for tracing outgoing HTTP calls. Add it as a dependency to your function by using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>go get go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp
</code></pre></div>
<p>Here is how you can use this instrumentation in your code:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>import (
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>&quot;context&quot;
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>&quot;net/http&quot;
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>&quot;go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp&quot;
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a>)
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>
<a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a>
<a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a>func makeHttpRequest(ctx context.Context, url string) {
<a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a>
<a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a>
<a id="__codelineno-35-24" name="__codelineno-35-24" href="#__codelineno-35-24"></a>
<a id="__codelineno-35-25" name="__codelineno-35-25" href="#__codelineno-35-25"></a>// create an instrumented HTTP client
<a id="__codelineno-35-26" name="__codelineno-35-26" href="#__codelineno-35-26"></a>
<a id="__codelineno-35-27" name="__codelineno-35-27" href="#__codelineno-35-27"></a>
<a id="__codelineno-35-28" name="__codelineno-35-28" href="#__codelineno-35-28"></a>
<a id="__codelineno-35-29" name="__codelineno-35-29" href="#__codelineno-35-29"></a>client := http.Client{Transport: otelhttp.NewTransport(http.DefaultTransport)}
<a id="__codelineno-35-30" name="__codelineno-35-30" href="#__codelineno-35-30"></a>
<a id="__codelineno-35-31" name="__codelineno-35-31" href="#__codelineno-35-31"></a>
<a id="__codelineno-35-32" name="__codelineno-35-32" href="#__codelineno-35-32"></a>
<a id="__codelineno-35-33" name="__codelineno-35-33" href="#__codelineno-35-33"></a>req, err := http.NewRequestWithContext(ctx, &quot;GET&quot;, url, nil)
<a id="__codelineno-35-34" name="__codelineno-35-34" href="#__codelineno-35-34"></a>
<a id="__codelineno-35-35" name="__codelineno-35-35" href="#__codelineno-35-35"></a>
<a id="__codelineno-35-36" name="__codelineno-35-36" href="#__codelineno-35-36"></a>
<a id="__codelineno-35-37" name="__codelineno-35-37" href="#__codelineno-35-37"></a>if err != nil {
<a id="__codelineno-35-38" name="__codelineno-35-38" href="#__codelineno-35-38"></a>
<a id="__codelineno-35-39" name="__codelineno-35-39" href="#__codelineno-35-39"></a>
<a id="__codelineno-35-40" name="__codelineno-35-40" href="#__codelineno-35-40"></a>
<a id="__codelineno-35-41" name="__codelineno-35-41" href="#__codelineno-35-41"></a>// error handling
<a id="__codelineno-35-42" name="__codelineno-35-42" href="#__codelineno-35-42"></a>
<a id="__codelineno-35-43" name="__codelineno-35-43" href="#__codelineno-35-43"></a>
<a id="__codelineno-35-44" name="__codelineno-35-44" href="#__codelineno-35-44"></a>
<a id="__codelineno-35-45" name="__codelineno-35-45" href="#__codelineno-35-45"></a>return
<a id="__codelineno-35-46" name="__codelineno-35-46" href="#__codelineno-35-46"></a>
<a id="__codelineno-35-47" name="__codelineno-35-47" href="#__codelineno-35-47"></a>
<a id="__codelineno-35-48" name="__codelineno-35-48" href="#__codelineno-35-48"></a>
<a id="__codelineno-35-49" name="__codelineno-35-49" href="#__codelineno-35-49"></a>}
<a id="__codelineno-35-50" name="__codelineno-35-50" href="#__codelineno-35-50"></a>
<a id="__codelineno-35-51" name="__codelineno-35-51" href="#__codelineno-35-51"></a>
<a id="__codelineno-35-52" name="__codelineno-35-52" href="#__codelineno-35-52"></a>
<a id="__codelineno-35-53" name="__codelineno-35-53" href="#__codelineno-35-53"></a>res, err := client.Do(req)
<a id="__codelineno-35-54" name="__codelineno-35-54" href="#__codelineno-35-54"></a>
<a id="__codelineno-35-55" name="__codelineno-35-55" href="#__codelineno-35-55"></a>
<a id="__codelineno-35-56" name="__codelineno-35-56" href="#__codelineno-35-56"></a>
<a id="__codelineno-35-57" name="__codelineno-35-57" href="#__codelineno-35-57"></a>if err != nil {
<a id="__codelineno-35-58" name="__codelineno-35-58" href="#__codelineno-35-58"></a>
<a id="__codelineno-35-59" name="__codelineno-35-59" href="#__codelineno-35-59"></a>
<a id="__codelineno-35-60" name="__codelineno-35-60" href="#__codelineno-35-60"></a>
<a id="__codelineno-35-61" name="__codelineno-35-61" href="#__codelineno-35-61"></a>// error handling
<a id="__codelineno-35-62" name="__codelineno-35-62" href="#__codelineno-35-62"></a>
<a id="__codelineno-35-63" name="__codelineno-35-63" href="#__codelineno-35-63"></a>
<a id="__codelineno-35-64" name="__codelineno-35-64" href="#__codelineno-35-64"></a>
<a id="__codelineno-35-65" name="__codelineno-35-65" href="#__codelineno-35-65"></a>return
<a id="__codelineno-35-66" name="__codelineno-35-66" href="#__codelineno-35-66"></a>
<a id="__codelineno-35-67" name="__codelineno-35-67" href="#__codelineno-35-67"></a>
<a id="__codelineno-35-68" name="__codelineno-35-68" href="#__codelineno-35-68"></a>
<a id="__codelineno-35-69" name="__codelineno-35-69" href="#__codelineno-35-69"></a>}
<a id="__codelineno-35-70" name="__codelineno-35-70" href="#__codelineno-35-70"></a>
<a id="__codelineno-35-71" name="__codelineno-35-71" href="#__codelineno-35-71"></a>
<a id="__codelineno-35-72" name="__codelineno-35-72" href="#__codelineno-35-72"></a>
<a id="__codelineno-35-73" name="__codelineno-35-73" href="#__codelineno-35-73"></a>defer res.Body.Close()
<a id="__codelineno-35-74" name="__codelineno-35-74" href="#__codelineno-35-74"></a>
<a id="__codelineno-35-75" name="__codelineno-35-75" href="#__codelineno-35-75"></a>
<a id="__codelineno-35-76" name="__codelineno-35-76" href="#__codelineno-35-76"></a>
<a id="__codelineno-35-77" name="__codelineno-35-77" href="#__codelineno-35-77"></a>// response handling code goes here
<a id="__codelineno-35-78" name="__codelineno-35-78" href="#__codelineno-35-78"></a>
<a id="__codelineno-35-79" name="__codelineno-35-79" href="#__codelineno-35-79"></a>
<a id="__codelineno-35-80" name="__codelineno-35-80" href="#__codelineno-35-80"></a>
<a id="__codelineno-35-81" name="__codelineno-35-81" href="#__codelineno-35-81"></a>}
</code></pre></div>
<ul>
<li>Do not use convenience functions such as <code>GET</code> or <code>POST</code> on the standard <code>http.Client</code>, because they do not accept a <code>context.Context</code> object. To make sure that your HTTP request is properly linked, either create a request with a context object as in the sample above, or use one of the convenience functions (such as <code>otelhttp.Get</code> or <code>otelhttp.Put</code>) of the HTTP instrumentation.</li>
<li>Make sure to close or fully read the response body. Otherwise, the outgoing request will not be instrumented properly.</li>
</ul>
<h4 id="instrument-pubsub-publish-request">Instrument Pub/Sub publish request<a class="headerlink" href="#instrument-pubsub-publish-request" title="Permanent link">&para;</a></h4>
<p>For the Pub/Sub client, there is currently no instrumentation in OpenTelemetry Go. Check out the following snippet to see how you can use the OpenTelemetry Go API to instrument Pub/Sub publish operations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>import (
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>&quot;context&quot;
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>&quot;fmt&quot;
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>&quot;cloud.google.com/go/pubsub&quot;
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a>
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a>&quot;go.opentelemetry.io/otel&quot;
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a>
<a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a>
<a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a>&quot;go.opentelemetry.io/otel/codes&quot;
<a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a>
<a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a>
<a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a>
<a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a>&quot;go.opentelemetry.io/otel/propagation&quot;
<a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a>
<a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a>
<a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a>
<a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a>semconv &quot;go.opentelemetry.io/otel/semconv/v1.7.0&quot;
<a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a>
<a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a>
<a id="__codelineno-36-32" name="__codelineno-36-32" href="#__codelineno-36-32"></a>
<a id="__codelineno-36-33" name="__codelineno-36-33" href="#__codelineno-36-33"></a>&quot;go.opentelemetry.io/otel/trace&quot;
<a id="__codelineno-36-34" name="__codelineno-36-34" href="#__codelineno-36-34"></a>
<a id="__codelineno-36-35" name="__codelineno-36-35" href="#__codelineno-36-35"></a>
<a id="__codelineno-36-36" name="__codelineno-36-36" href="#__codelineno-36-36"></a>
<a id="__codelineno-36-37" name="__codelineno-36-37" href="#__codelineno-36-37"></a>)
<a id="__codelineno-36-38" name="__codelineno-36-38" href="#__codelineno-36-38"></a>
<a id="__codelineno-36-39" name="__codelineno-36-39" href="#__codelineno-36-39"></a>
<a id="__codelineno-36-40" name="__codelineno-36-40" href="#__codelineno-36-40"></a>
<a id="__codelineno-36-41" name="__codelineno-36-41" href="#__codelineno-36-41"></a>const (
<a id="__codelineno-36-42" name="__codelineno-36-42" href="#__codelineno-36-42"></a>
<a id="__codelineno-36-43" name="__codelineno-36-43" href="#__codelineno-36-43"></a>
<a id="__codelineno-36-44" name="__codelineno-36-44" href="#__codelineno-36-44"></a>
<a id="__codelineno-36-45" name="__codelineno-36-45" href="#__codelineno-36-45"></a>instrumentationName = &quot;my.company.com/my-pubsub-instrumentation-lib&quot;
<a id="__codelineno-36-46" name="__codelineno-36-46" href="#__codelineno-36-46"></a>
<a id="__codelineno-36-47" name="__codelineno-36-47" href="#__codelineno-36-47"></a>
<a id="__codelineno-36-48" name="__codelineno-36-48" href="#__codelineno-36-48"></a>
<a id="__codelineno-36-49" name="__codelineno-36-49" href="#__codelineno-36-49"></a>instrumentationVer  = &quot;0.1.0&quot;
<a id="__codelineno-36-50" name="__codelineno-36-50" href="#__codelineno-36-50"></a>
<a id="__codelineno-36-51" name="__codelineno-36-51" href="#__codelineno-36-51"></a>
<a id="__codelineno-36-52" name="__codelineno-36-52" href="#__codelineno-36-52"></a>
<a id="__codelineno-36-53" name="__codelineno-36-53" href="#__codelineno-36-53"></a>)
<a id="__codelineno-36-54" name="__codelineno-36-54" href="#__codelineno-36-54"></a>
<a id="__codelineno-36-55" name="__codelineno-36-55" href="#__codelineno-36-55"></a>
<a id="__codelineno-36-56" name="__codelineno-36-56" href="#__codelineno-36-56"></a>
<a id="__codelineno-36-57" name="__codelineno-36-57" href="#__codelineno-36-57"></a>func PublishMessage(ctx context.Context, client *pubsub.Client, msg *pubsub.Message, topicID string) (string, error) {
<a id="__codelineno-36-58" name="__codelineno-36-58" href="#__codelineno-36-58"></a>
<a id="__codelineno-36-59" name="__codelineno-36-59" href="#__codelineno-36-59"></a>
<a id="__codelineno-36-60" name="__codelineno-36-60" href="#__codelineno-36-60"></a>
<a id="__codelineno-36-61" name="__codelineno-36-61" href="#__codelineno-36-61"></a>// create span
<a id="__codelineno-36-62" name="__codelineno-36-62" href="#__codelineno-36-62"></a>
<a id="__codelineno-36-63" name="__codelineno-36-63" href="#__codelineno-36-63"></a>
<a id="__codelineno-36-64" name="__codelineno-36-64" href="#__codelineno-36-64"></a>
<a id="__codelineno-36-65" name="__codelineno-36-65" href="#__codelineno-36-65"></a>ctx, span := beforePublishMessage(ctx, topicID, msg)
<a id="__codelineno-36-66" name="__codelineno-36-66" href="#__codelineno-36-66"></a>
<a id="__codelineno-36-67" name="__codelineno-36-67" href="#__codelineno-36-67"></a>
<a id="__codelineno-36-68" name="__codelineno-36-68" href="#__codelineno-36-68"></a>
<a id="__codelineno-36-69" name="__codelineno-36-69" href="#__codelineno-36-69"></a>defer span.End()
<a id="__codelineno-36-70" name="__codelineno-36-70" href="#__codelineno-36-70"></a>
<a id="__codelineno-36-71" name="__codelineno-36-71" href="#__codelineno-36-71"></a>
<a id="__codelineno-36-72" name="__codelineno-36-72" href="#__codelineno-36-72"></a>
<a id="__codelineno-36-73" name="__codelineno-36-73" href="#__codelineno-36-73"></a>// Send Pub/Sub message
<a id="__codelineno-36-74" name="__codelineno-36-74" href="#__codelineno-36-74"></a>
<a id="__codelineno-36-75" name="__codelineno-36-75" href="#__codelineno-36-75"></a>
<a id="__codelineno-36-76" name="__codelineno-36-76" href="#__codelineno-36-76"></a>
<a id="__codelineno-36-77" name="__codelineno-36-77" href="#__codelineno-36-77"></a>messageID, err := client.Topic(topicID).Publish(ctx, msg).Get(ctx)
<a id="__codelineno-36-78" name="__codelineno-36-78" href="#__codelineno-36-78"></a>
<a id="__codelineno-36-79" name="__codelineno-36-79" href="#__codelineno-36-79"></a>
<a id="__codelineno-36-80" name="__codelineno-36-80" href="#__codelineno-36-80"></a>
<a id="__codelineno-36-81" name="__codelineno-36-81" href="#__codelineno-36-81"></a>// enrich span with publish result
<a id="__codelineno-36-82" name="__codelineno-36-82" href="#__codelineno-36-82"></a>
<a id="__codelineno-36-83" name="__codelineno-36-83" href="#__codelineno-36-83"></a>
<a id="__codelineno-36-84" name="__codelineno-36-84" href="#__codelineno-36-84"></a>
<a id="__codelineno-36-85" name="__codelineno-36-85" href="#__codelineno-36-85"></a>afterPublishMessage(span, messageID, err)
<a id="__codelineno-36-86" name="__codelineno-36-86" href="#__codelineno-36-86"></a>
<a id="__codelineno-36-87" name="__codelineno-36-87" href="#__codelineno-36-87"></a>
<a id="__codelineno-36-88" name="__codelineno-36-88" href="#__codelineno-36-88"></a>
<a id="__codelineno-36-89" name="__codelineno-36-89" href="#__codelineno-36-89"></a>return messageID, err
<a id="__codelineno-36-90" name="__codelineno-36-90" href="#__codelineno-36-90"></a>
<a id="__codelineno-36-91" name="__codelineno-36-91" href="#__codelineno-36-91"></a>
<a id="__codelineno-36-92" name="__codelineno-36-92" href="#__codelineno-36-92"></a>
<a id="__codelineno-36-93" name="__codelineno-36-93" href="#__codelineno-36-93"></a>}
<a id="__codelineno-36-94" name="__codelineno-36-94" href="#__codelineno-36-94"></a>
<a id="__codelineno-36-95" name="__codelineno-36-95" href="#__codelineno-36-95"></a>
<a id="__codelineno-36-96" name="__codelineno-36-96" href="#__codelineno-36-96"></a>
<a id="__codelineno-36-97" name="__codelineno-36-97" href="#__codelineno-36-97"></a>func beforePublishMessage(ctx context.Context, topicID string, msg *pubsub.Message) (context.Context, trace.Span) {
<a id="__codelineno-36-98" name="__codelineno-36-98" href="#__codelineno-36-98"></a>
<a id="__codelineno-36-99" name="__codelineno-36-99" href="#__codelineno-36-99"></a>
<a id="__codelineno-36-100" name="__codelineno-36-100" href="#__codelineno-36-100"></a>
<a id="__codelineno-36-101" name="__codelineno-36-101" href="#__codelineno-36-101"></a>opts := []trace.SpanStartOption{
<a id="__codelineno-36-102" name="__codelineno-36-102" href="#__codelineno-36-102"></a>
<a id="__codelineno-36-103" name="__codelineno-36-103" href="#__codelineno-36-103"></a>
<a id="__codelineno-36-104" name="__codelineno-36-104" href="#__codelineno-36-104"></a>
<a id="__codelineno-36-105" name="__codelineno-36-105" href="#__codelineno-36-105"></a>trace.WithSpanKind(trace.SpanKindProducer),
<a id="__codelineno-36-106" name="__codelineno-36-106" href="#__codelineno-36-106"></a>
<a id="__codelineno-36-107" name="__codelineno-36-107" href="#__codelineno-36-107"></a>
<a id="__codelineno-36-108" name="__codelineno-36-108" href="#__codelineno-36-108"></a>
<a id="__codelineno-36-109" name="__codelineno-36-109" href="#__codelineno-36-109"></a>trace.WithAttributes(
<a id="__codelineno-36-110" name="__codelineno-36-110" href="#__codelineno-36-110"></a>
<a id="__codelineno-36-111" name="__codelineno-36-111" href="#__codelineno-36-111"></a>
<a id="__codelineno-36-112" name="__codelineno-36-112" href="#__codelineno-36-112"></a>
<a id="__codelineno-36-113" name="__codelineno-36-113" href="#__codelineno-36-113"></a>// customizable span attributes
<a id="__codelineno-36-114" name="__codelineno-36-114" href="#__codelineno-36-114"></a>
<a id="__codelineno-36-115" name="__codelineno-36-115" href="#__codelineno-36-115"></a>
<a id="__codelineno-36-116" name="__codelineno-36-116" href="#__codelineno-36-116"></a>
<a id="__codelineno-36-117" name="__codelineno-36-117" href="#__codelineno-36-117"></a>semconv.MessagingSystemKey.String(&quot;pubsub&quot;),
<a id="__codelineno-36-118" name="__codelineno-36-118" href="#__codelineno-36-118"></a>
<a id="__codelineno-36-119" name="__codelineno-36-119" href="#__codelineno-36-119"></a>
<a id="__codelineno-36-120" name="__codelineno-36-120" href="#__codelineno-36-120"></a>
<a id="__codelineno-36-121" name="__codelineno-36-121" href="#__codelineno-36-121"></a>semconv.MessagingDestinationKey.String(topicID),
<a id="__codelineno-36-122" name="__codelineno-36-122" href="#__codelineno-36-122"></a>
<a id="__codelineno-36-123" name="__codelineno-36-123" href="#__codelineno-36-123"></a>
<a id="__codelineno-36-124" name="__codelineno-36-124" href="#__codelineno-36-124"></a>
<a id="__codelineno-36-125" name="__codelineno-36-125" href="#__codelineno-36-125"></a>semconv.MessagingDestinationKindTopic,
<a id="__codelineno-36-126" name="__codelineno-36-126" href="#__codelineno-36-126"></a>
<a id="__codelineno-36-127" name="__codelineno-36-127" href="#__codelineno-36-127"></a>
<a id="__codelineno-36-128" name="__codelineno-36-128" href="#__codelineno-36-128"></a>
<a id="__codelineno-36-129" name="__codelineno-36-129" href="#__codelineno-36-129"></a>),
<a id="__codelineno-36-130" name="__codelineno-36-130" href="#__codelineno-36-130"></a>
<a id="__codelineno-36-131" name="__codelineno-36-131" href="#__codelineno-36-131"></a>
<a id="__codelineno-36-132" name="__codelineno-36-132" href="#__codelineno-36-132"></a>
<a id="__codelineno-36-133" name="__codelineno-36-133" href="#__codelineno-36-133"></a>}
<a id="__codelineno-36-134" name="__codelineno-36-134" href="#__codelineno-36-134"></a>
<a id="__codelineno-36-135" name="__codelineno-36-135" href="#__codelineno-36-135"></a>
<a id="__codelineno-36-136" name="__codelineno-36-136" href="#__codelineno-36-136"></a>
<a id="__codelineno-36-137" name="__codelineno-36-137" href="#__codelineno-36-137"></a>tracer := otel.Tracer(
<a id="__codelineno-36-138" name="__codelineno-36-138" href="#__codelineno-36-138"></a>
<a id="__codelineno-36-139" name="__codelineno-36-139" href="#__codelineno-36-139"></a>
<a id="__codelineno-36-140" name="__codelineno-36-140" href="#__codelineno-36-140"></a>
<a id="__codelineno-36-141" name="__codelineno-36-141" href="#__codelineno-36-141"></a>instrumentationName, trace.WithInstrumentationVersion(instrumentationVer),
<a id="__codelineno-36-142" name="__codelineno-36-142" href="#__codelineno-36-142"></a>
<a id="__codelineno-36-143" name="__codelineno-36-143" href="#__codelineno-36-143"></a>
<a id="__codelineno-36-144" name="__codelineno-36-144" href="#__codelineno-36-144"></a>
<a id="__codelineno-36-145" name="__codelineno-36-145" href="#__codelineno-36-145"></a>)
<a id="__codelineno-36-146" name="__codelineno-36-146" href="#__codelineno-36-146"></a>
<a id="__codelineno-36-147" name="__codelineno-36-147" href="#__codelineno-36-147"></a>
<a id="__codelineno-36-148" name="__codelineno-36-148" href="#__codelineno-36-148"></a>
<a id="__codelineno-36-149" name="__codelineno-36-149" href="#__codelineno-36-149"></a>ctx, span := tracer.Start(ctx, fmt.Sprintf(&quot;%s send&quot;, topicID), opts...)
<a id="__codelineno-36-150" name="__codelineno-36-150" href="#__codelineno-36-150"></a>
<a id="__codelineno-36-151" name="__codelineno-36-151" href="#__codelineno-36-151"></a>
<a id="__codelineno-36-152" name="__codelineno-36-152" href="#__codelineno-36-152"></a>
<a id="__codelineno-36-153" name="__codelineno-36-153" href="#__codelineno-36-153"></a>if msg.Attributes == nil {
<a id="__codelineno-36-154" name="__codelineno-36-154" href="#__codelineno-36-154"></a>
<a id="__codelineno-36-155" name="__codelineno-36-155" href="#__codelineno-36-155"></a>
<a id="__codelineno-36-156" name="__codelineno-36-156" href="#__codelineno-36-156"></a>
<a id="__codelineno-36-157" name="__codelineno-36-157" href="#__codelineno-36-157"></a>msg.Attributes = make(map[string]string)
<a id="__codelineno-36-158" name="__codelineno-36-158" href="#__codelineno-36-158"></a>
<a id="__codelineno-36-159" name="__codelineno-36-159" href="#__codelineno-36-159"></a>
<a id="__codelineno-36-160" name="__codelineno-36-160" href="#__codelineno-36-160"></a>
<a id="__codelineno-36-161" name="__codelineno-36-161" href="#__codelineno-36-161"></a>}
<a id="__codelineno-36-162" name="__codelineno-36-162" href="#__codelineno-36-162"></a>
<a id="__codelineno-36-163" name="__codelineno-36-163" href="#__codelineno-36-163"></a>
<a id="__codelineno-36-164" name="__codelineno-36-164" href="#__codelineno-36-164"></a>
<a id="__codelineno-36-165" name="__codelineno-36-165" href="#__codelineno-36-165"></a>// propagate Span across process boundaries
<a id="__codelineno-36-166" name="__codelineno-36-166" href="#__codelineno-36-166"></a>
<a id="__codelineno-36-167" name="__codelineno-36-167" href="#__codelineno-36-167"></a>
<a id="__codelineno-36-168" name="__codelineno-36-168" href="#__codelineno-36-168"></a>
<a id="__codelineno-36-169" name="__codelineno-36-169" href="#__codelineno-36-169"></a>otel.GetTextMapPropagator().Inject(ctx, propagation.MapCarrier(msg.Attributes))
<a id="__codelineno-36-170" name="__codelineno-36-170" href="#__codelineno-36-170"></a>
<a id="__codelineno-36-171" name="__codelineno-36-171" href="#__codelineno-36-171"></a>
<a id="__codelineno-36-172" name="__codelineno-36-172" href="#__codelineno-36-172"></a>
<a id="__codelineno-36-173" name="__codelineno-36-173" href="#__codelineno-36-173"></a>return ctx, span
<a id="__codelineno-36-174" name="__codelineno-36-174" href="#__codelineno-36-174"></a>
<a id="__codelineno-36-175" name="__codelineno-36-175" href="#__codelineno-36-175"></a>
<a id="__codelineno-36-176" name="__codelineno-36-176" href="#__codelineno-36-176"></a>
<a id="__codelineno-36-177" name="__codelineno-36-177" href="#__codelineno-36-177"></a>}
<a id="__codelineno-36-178" name="__codelineno-36-178" href="#__codelineno-36-178"></a>
<a id="__codelineno-36-179" name="__codelineno-36-179" href="#__codelineno-36-179"></a>
<a id="__codelineno-36-180" name="__codelineno-36-180" href="#__codelineno-36-180"></a>
<a id="__codelineno-36-181" name="__codelineno-36-181" href="#__codelineno-36-181"></a>func afterPublishMessage(span trace.Span, messageID string, err error) {
<a id="__codelineno-36-182" name="__codelineno-36-182" href="#__codelineno-36-182"></a>
<a id="__codelineno-36-183" name="__codelineno-36-183" href="#__codelineno-36-183"></a>
<a id="__codelineno-36-184" name="__codelineno-36-184" href="#__codelineno-36-184"></a>
<a id="__codelineno-36-185" name="__codelineno-36-185" href="#__codelineno-36-185"></a>if err != nil {
<a id="__codelineno-36-186" name="__codelineno-36-186" href="#__codelineno-36-186"></a>
<a id="__codelineno-36-187" name="__codelineno-36-187" href="#__codelineno-36-187"></a>
<a id="__codelineno-36-188" name="__codelineno-36-188" href="#__codelineno-36-188"></a>
<a id="__codelineno-36-189" name="__codelineno-36-189" href="#__codelineno-36-189"></a>span.RecordError(err)
<a id="__codelineno-36-190" name="__codelineno-36-190" href="#__codelineno-36-190"></a>
<a id="__codelineno-36-191" name="__codelineno-36-191" href="#__codelineno-36-191"></a>
<a id="__codelineno-36-192" name="__codelineno-36-192" href="#__codelineno-36-192"></a>
<a id="__codelineno-36-193" name="__codelineno-36-193" href="#__codelineno-36-193"></a>span.SetStatus(codes.Error, err.Error())
<a id="__codelineno-36-194" name="__codelineno-36-194" href="#__codelineno-36-194"></a>
<a id="__codelineno-36-195" name="__codelineno-36-195" href="#__codelineno-36-195"></a>
<a id="__codelineno-36-196" name="__codelineno-36-196" href="#__codelineno-36-196"></a>
<a id="__codelineno-36-197" name="__codelineno-36-197" href="#__codelineno-36-197"></a>} else {
<a id="__codelineno-36-198" name="__codelineno-36-198" href="#__codelineno-36-198"></a>
<a id="__codelineno-36-199" name="__codelineno-36-199" href="#__codelineno-36-199"></a>
<a id="__codelineno-36-200" name="__codelineno-36-200" href="#__codelineno-36-200"></a>
<a id="__codelineno-36-201" name="__codelineno-36-201" href="#__codelineno-36-201"></a>span.SetAttributes(semconv.MessagingMessageIDKey.String(messageID))
<a id="__codelineno-36-202" name="__codelineno-36-202" href="#__codelineno-36-202"></a>
<a id="__codelineno-36-203" name="__codelineno-36-203" href="#__codelineno-36-203"></a>
<a id="__codelineno-36-204" name="__codelineno-36-204" href="#__codelineno-36-204"></a>
<a id="__codelineno-36-205" name="__codelineno-36-205" href="#__codelineno-36-205"></a>}
<a id="__codelineno-36-206" name="__codelineno-36-206" href="#__codelineno-36-206"></a>
<a id="__codelineno-36-207" name="__codelineno-36-207" href="#__codelineno-36-207"></a>
<a id="__codelineno-36-208" name="__codelineno-36-208" href="#__codelineno-36-208"></a>
<a id="__codelineno-36-209" name="__codelineno-36-209" href="#__codelineno-36-209"></a>}
</code></pre></div>
<p>The above snippet propagates the outgoing span by injecting it into the <code>Attributes</code> field on the Pub/Sub message. An <a href="#instrument-pubsub-handler">instrumented Pub/Sub function</a> will extract this propagated span to link the trace together.</p>
<h2 id="verify-that-the-traces-are-ingested-into-dynatrace">Verify that the traces are ingested into Dynatrace<a class="headerlink" href="#verify-that-the-traces-are-ingested-into-dynatrace" title="Permanent link">&para;</a></h2>
<p>A few minutes after invoking your Google Cloud Functions, look for your spans:</p>
<ul>
<li>Go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab.</li>
<li>Your spans will be part of an existing PurePath distributed trace if the root of your call is already being monitored by the OneAgent.</li>
</ul>
<p>If your Google Cloud Function is not getting any traffic, there will be no traces.</p>
<h2 id="optional-configure-data-capture-to-meet-privacy-requirements">(Optional) Configure data capture to meet privacy requirements<a class="headerlink" href="#optional-configure-data-capture-to-meet-privacy-requirements" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<hr />
<h2 id="source-otel-gcf-nodejsmd">Source: otel-gcf-nodejs.md<a class="headerlink" href="#source-otel-gcf-nodejsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Trace Google Cloud Functions with OpenTelemetry JavaScript
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-nodejs
scraped: 2026-02-16T21:32:46.721429</p>
<hr />
<h1 id="trace-google-cloud-functions-with-opentelemetry-javascript">Trace Google Cloud Functions with OpenTelemetry JavaScript<a class="headerlink" href="#trace-google-cloud-functions-with-opentelemetry-javascript" title="Permanent link">&para;</a></h1>
<h1 id="trace-google-cloud-functions-with-opentelemetry-javascript_1">Trace Google Cloud Functions with OpenTelemetry JavaScript<a class="headerlink" href="#trace-google-cloud-functions-with-opentelemetry-javascript_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>8-min read</li>
<li>Updated on Nov 13, 2023</li>
</ul>
<p>This guide shows how to instrument Google Cloud Functions with <a href="https://github.com/open-telemetry/opentelemetry-js">OpenTelemetry JS√Ø¬ª¬ø</a> and export the traces to Dynatrace. To learn more about how Dynatrace works with OpenTelemetry, see <a href="/docs/ingest-from/opentelemetry" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">OpenTelemetry and Dynatrace</a>.</p>
<h2 id="prerequisites_8">Prerequisites<a class="headerlink" href="#prerequisites_8" title="Permanent link">&para;</a></h2>
<p>The following prerequisites and limitations apply:</p>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="instrument-google-cloud-functions_1">Instrument Google Cloud Functions<a class="headerlink" href="#instrument-google-cloud-functions_1" title="Permanent link">&para;</a></h2>
<p>Dynatrace uses OpenTelemetry Trace Ingest to provide end-to-end visibility to your Google Cloud Functions.</p>
<p>To instrument your Google Cloud Functions</p>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Add OpenTelemetry dependencies</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-nodejs#otel-dependencies "Learn how to instrument Google Cloud Functions with OpenTelemetry JS and export the traces to Dynatrace.")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Set up OpenTelemetry</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-nodejs#otel-setup "Learn how to instrument Google Cloud Functions with OpenTelemetry JS and export the traces to Dynatrace.")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Instrument the function entry point</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-nodejs#instrument-handler "Learn how to instrument Google Cloud Functions with OpenTelemetry JS and export the traces to Dynatrace.")[<img alt="Step 4" src="https://dt-cdn.net/images/step-4-3f89d67d41.svg" title="Step 4" /></p>
<p><strong>Instrument outgoing requests</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/otel-gcf-nodejs#outgoing-instrument "Learn how to instrument Google Cloud Functions with OpenTelemetry JS and export the traces to Dynatrace.")</p>
<h3 id="step-1-add-opentelemetry-dependencies_1">Step 1 Add OpenTelemetry dependencies<a class="headerlink" href="#step-1-add-opentelemetry-dependencies_1" title="Permanent link">&para;</a></h3>
<p>Add the following required OpenTelemetry dependencies to <code>package.json</code> file (your version numbers may vary):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>&quot;dependencies&quot;: {
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>&quot;@opentelemetry/api&quot;: &quot;^1.0.4&quot;,
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a>&quot;@opentelemetry/core&quot;: &quot;^1.0.1&quot;,
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a>&quot;@opentelemetry/exporter-trace-otlp-proto&quot;: &quot;^0.27.0&quot;,
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a>
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a>
<a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a>&quot;@opentelemetry/instrumentation&quot;: &quot;^0.27.0&quot;,
<a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a>
<a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a>
<a id="__codelineno-37-20" name="__codelineno-37-20" href="#__codelineno-37-20"></a>
<a id="__codelineno-37-21" name="__codelineno-37-21" href="#__codelineno-37-21"></a>&quot;@opentelemetry/instrumentation-http&quot;: &quot;^0.27.0&quot;,
<a id="__codelineno-37-22" name="__codelineno-37-22" href="#__codelineno-37-22"></a>
<a id="__codelineno-37-23" name="__codelineno-37-23" href="#__codelineno-37-23"></a>
<a id="__codelineno-37-24" name="__codelineno-37-24" href="#__codelineno-37-24"></a>
<a id="__codelineno-37-25" name="__codelineno-37-25" href="#__codelineno-37-25"></a>&quot;@opentelemetry/sdk-trace-node&quot;: &quot;^1.0.1&quot;,
<a id="__codelineno-37-26" name="__codelineno-37-26" href="#__codelineno-37-26"></a>
<a id="__codelineno-37-27" name="__codelineno-37-27" href="#__codelineno-37-27"></a>
<a id="__codelineno-37-28" name="__codelineno-37-28" href="#__codelineno-37-28"></a>
<a id="__codelineno-37-29" name="__codelineno-37-29" href="#__codelineno-37-29"></a>&quot;@opentelemetry/semantic-conventions&quot;: &quot;^1.0.1&quot;
<a id="__codelineno-37-30" name="__codelineno-37-30" href="#__codelineno-37-30"></a>
<a id="__codelineno-37-31" name="__codelineno-37-31" href="#__codelineno-37-31"></a>
<a id="__codelineno-37-32" name="__codelineno-37-32" href="#__codelineno-37-32"></a>
<a id="__codelineno-37-33" name="__codelineno-37-33" href="#__codelineno-37-33"></a>}
</code></pre></div>
<h3 id="step-2-set-up-opentelemetry_1">Step 2 Set up OpenTelemetry<a class="headerlink" href="#step-2-set-up-opentelemetry_1" title="Permanent link">&para;</a></h3>
<p>To make sure traces are collected, linked, and exported to Dynatrace, you need to set up and configure OpenTelemetry accordingly. For this, the Dynatrace endpoint and an authentication token are required.</p>
<p>To determine the endpoint</p>
<ol>
<li>Open Dynatrace.</li>
<li>
<p>Check the address line of your browser. The URL will match one of the following patterns:</p>
</li>
<li>
<p><strong>Dynatrace SaaS</strong>: <code>https://{your-environment-id}.live.dynatrace.com/...</code></p>
</li>
<li><strong>Dynatrace Managed</strong>: <code>https://{your-domain}/e/{your-environment-id}/...</code></li>
<li>
<p>Replace the <code>...</code> part with <code>api/v2/otlp</code> to get the URL you will need to configure the OpenTelemetry exporter.</p>
</li>
<li>
<p><strong>Dynatrace SaaS</strong>: <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code></p>
</li>
<li><strong>Dynatrace Managed</strong>: <code>https://{your-domain}/e/{your-environment-id}/api/v2/otlp</code></li>
</ol>
<p>To create an authentication token</p>
<ol>
<li>Go to <strong>Access Tokens</strong> and select <strong>Generate new token</strong>.</li>
<li>Provide a <strong>Token name</strong>.</li>
<li>In the <strong>Search scopes</strong> box, search for <code>Ingest OpenTelemetry traces</code> and select the checkbox.</li>
<li>Select <strong>Generate token</strong>.</li>
<li>Select <strong>Copy</strong> to copy the token to your clipboard.</li>
<li>Save the token in a safe place; you can't display it again, and you will need it to configure the OpenTelemetry exporter.</li>
</ol>
<p>Here is how to setup the OpenTelemetry tracing pipeline:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>const { NodeTracerProvider } = require(&#39;@opentelemetry/sdk-trace-node&#39;);
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>const { W3CTraceContextPropagator, AlwaysOnSampler } = require(&#39;@opentelemetry/core&#39;);
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>const { registerInstrumentations } = require(&#39;@opentelemetry/instrumentation&#39;);
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a>const { HttpInstrumentation } = require(&#39;@opentelemetry/instrumentation-http&#39;);
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a>const { SemanticResourceAttributes } = require(&#39;@opentelemetry/semantic-conventions&#39;);
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a>
<a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a>
<a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a>
<a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a>const { OTLPTraceExporter } = require(&quot;@opentelemetry/exporter-trace-otlp-proto&quot;);
<a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a>
<a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a>
<a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a>
<a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a>const { BatchSpanProcessor } = require(&quot;@opentelemetry/sdk-trace-base&quot;);
<a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a>
<a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a>
<a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a>
<a id="__codelineno-38-29" name="__codelineno-38-29" href="#__codelineno-38-29"></a>const { Resource } = require(&quot;@opentelemetry/resources&quot;);
<a id="__codelineno-38-30" name="__codelineno-38-30" href="#__codelineno-38-30"></a>
<a id="__codelineno-38-31" name="__codelineno-38-31" href="#__codelineno-38-31"></a>
<a id="__codelineno-38-32" name="__codelineno-38-32" href="#__codelineno-38-32"></a>
<a id="__codelineno-38-33" name="__codelineno-38-33" href="#__codelineno-38-33"></a>const { diag, DiagConsoleLogger, DiagLogLevel } = require(&quot;@opentelemetry/api&quot;);
<a id="__codelineno-38-34" name="__codelineno-38-34" href="#__codelineno-38-34"></a>
<a id="__codelineno-38-35" name="__codelineno-38-35" href="#__codelineno-38-35"></a>
<a id="__codelineno-38-36" name="__codelineno-38-36" href="#__codelineno-38-36"></a>
<a id="__codelineno-38-37" name="__codelineno-38-37" href="#__codelineno-38-37"></a>diag.setLogger(new DiagConsoleLogger(), DiagLogLevel.ALL);
<a id="__codelineno-38-38" name="__codelineno-38-38" href="#__codelineno-38-38"></a>
<a id="__codelineno-38-39" name="__codelineno-38-39" href="#__codelineno-38-39"></a>
<a id="__codelineno-38-40" name="__codelineno-38-40" href="#__codelineno-38-40"></a>
<a id="__codelineno-38-41" name="__codelineno-38-41" href="#__codelineno-38-41"></a>function setupOtel(functionName) {
<a id="__codelineno-38-42" name="__codelineno-38-42" href="#__codelineno-38-42"></a>
<a id="__codelineno-38-43" name="__codelineno-38-43" href="#__codelineno-38-43"></a>
<a id="__codelineno-38-44" name="__codelineno-38-44" href="#__codelineno-38-44"></a>
<a id="__codelineno-38-45" name="__codelineno-38-45" href="#__codelineno-38-45"></a>// create tracer provider
<a id="__codelineno-38-46" name="__codelineno-38-46" href="#__codelineno-38-46"></a>
<a id="__codelineno-38-47" name="__codelineno-38-47" href="#__codelineno-38-47"></a>
<a id="__codelineno-38-48" name="__codelineno-38-48" href="#__codelineno-38-48"></a>
<a id="__codelineno-38-49" name="__codelineno-38-49" href="#__codelineno-38-49"></a>const provider = new NodeTracerProvider({
<a id="__codelineno-38-50" name="__codelineno-38-50" href="#__codelineno-38-50"></a>
<a id="__codelineno-38-51" name="__codelineno-38-51" href="#__codelineno-38-51"></a>
<a id="__codelineno-38-52" name="__codelineno-38-52" href="#__codelineno-38-52"></a>
<a id="__codelineno-38-53" name="__codelineno-38-53" href="#__codelineno-38-53"></a>resource: new Resource({
<a id="__codelineno-38-54" name="__codelineno-38-54" href="#__codelineno-38-54"></a>
<a id="__codelineno-38-55" name="__codelineno-38-55" href="#__codelineno-38-55"></a>
<a id="__codelineno-38-56" name="__codelineno-38-56" href="#__codelineno-38-56"></a>
<a id="__codelineno-38-57" name="__codelineno-38-57" href="#__codelineno-38-57"></a>[SemanticResourceAttributes.SERVICE_NAME]: functionName,
<a id="__codelineno-38-58" name="__codelineno-38-58" href="#__codelineno-38-58"></a>
<a id="__codelineno-38-59" name="__codelineno-38-59" href="#__codelineno-38-59"></a>
<a id="__codelineno-38-60" name="__codelineno-38-60" href="#__codelineno-38-60"></a>
<a id="__codelineno-38-61" name="__codelineno-38-61" href="#__codelineno-38-61"></a>}),
<a id="__codelineno-38-62" name="__codelineno-38-62" href="#__codelineno-38-62"></a>
<a id="__codelineno-38-63" name="__codelineno-38-63" href="#__codelineno-38-63"></a>
<a id="__codelineno-38-64" name="__codelineno-38-64" href="#__codelineno-38-64"></a>
<a id="__codelineno-38-65" name="__codelineno-38-65" href="#__codelineno-38-65"></a>sampler: new AlwaysOnSampler()
<a id="__codelineno-38-66" name="__codelineno-38-66" href="#__codelineno-38-66"></a>
<a id="__codelineno-38-67" name="__codelineno-38-67" href="#__codelineno-38-67"></a>
<a id="__codelineno-38-68" name="__codelineno-38-68" href="#__codelineno-38-68"></a>
<a id="__codelineno-38-69" name="__codelineno-38-69" href="#__codelineno-38-69"></a>});
<a id="__codelineno-38-70" name="__codelineno-38-70" href="#__codelineno-38-70"></a>
<a id="__codelineno-38-71" name="__codelineno-38-71" href="#__codelineno-38-71"></a>
<a id="__codelineno-38-72" name="__codelineno-38-72" href="#__codelineno-38-72"></a>
<a id="__codelineno-38-73" name="__codelineno-38-73" href="#__codelineno-38-73"></a>// add proto exporter
<a id="__codelineno-38-74" name="__codelineno-38-74" href="#__codelineno-38-74"></a>
<a id="__codelineno-38-75" name="__codelineno-38-75" href="#__codelineno-38-75"></a>
<a id="__codelineno-38-76" name="__codelineno-38-76" href="#__codelineno-38-76"></a>
<a id="__codelineno-38-77" name="__codelineno-38-77" href="#__codelineno-38-77"></a>const exporter = new OTLPTraceExporter();
<a id="__codelineno-38-78" name="__codelineno-38-78" href="#__codelineno-38-78"></a>
<a id="__codelineno-38-79" name="__codelineno-38-79" href="#__codelineno-38-79"></a>
<a id="__codelineno-38-80" name="__codelineno-38-80" href="#__codelineno-38-80"></a>
<a id="__codelineno-38-81" name="__codelineno-38-81" href="#__codelineno-38-81"></a>provider.addSpanProcessor(new BatchSpanProcessor(exporter));
<a id="__codelineno-38-82" name="__codelineno-38-82" href="#__codelineno-38-82"></a>
<a id="__codelineno-38-83" name="__codelineno-38-83" href="#__codelineno-38-83"></a>
<a id="__codelineno-38-84" name="__codelineno-38-84" href="#__codelineno-38-84"></a>
<a id="__codelineno-38-85" name="__codelineno-38-85" href="#__codelineno-38-85"></a>// register globally
<a id="__codelineno-38-86" name="__codelineno-38-86" href="#__codelineno-38-86"></a>
<a id="__codelineno-38-87" name="__codelineno-38-87" href="#__codelineno-38-87"></a>
<a id="__codelineno-38-88" name="__codelineno-38-88" href="#__codelineno-38-88"></a>
<a id="__codelineno-38-89" name="__codelineno-38-89" href="#__codelineno-38-89"></a>provider.register({
<a id="__codelineno-38-90" name="__codelineno-38-90" href="#__codelineno-38-90"></a>
<a id="__codelineno-38-91" name="__codelineno-38-91" href="#__codelineno-38-91"></a>
<a id="__codelineno-38-92" name="__codelineno-38-92" href="#__codelineno-38-92"></a>
<a id="__codelineno-38-93" name="__codelineno-38-93" href="#__codelineno-38-93"></a>propagator: new W3CTraceContextPropagator()
<a id="__codelineno-38-94" name="__codelineno-38-94" href="#__codelineno-38-94"></a>
<a id="__codelineno-38-95" name="__codelineno-38-95" href="#__codelineno-38-95"></a>
<a id="__codelineno-38-96" name="__codelineno-38-96" href="#__codelineno-38-96"></a>
<a id="__codelineno-38-97" name="__codelineno-38-97" href="#__codelineno-38-97"></a>});
<a id="__codelineno-38-98" name="__codelineno-38-98" href="#__codelineno-38-98"></a>
<a id="__codelineno-38-99" name="__codelineno-38-99" href="#__codelineno-38-99"></a>
<a id="__codelineno-38-100" name="__codelineno-38-100" href="#__codelineno-38-100"></a>
<a id="__codelineno-38-101" name="__codelineno-38-101" href="#__codelineno-38-101"></a>// add http automatic instrumentation
<a id="__codelineno-38-102" name="__codelineno-38-102" href="#__codelineno-38-102"></a>
<a id="__codelineno-38-103" name="__codelineno-38-103" href="#__codelineno-38-103"></a>
<a id="__codelineno-38-104" name="__codelineno-38-104" href="#__codelineno-38-104"></a>
<a id="__codelineno-38-105" name="__codelineno-38-105" href="#__codelineno-38-105"></a>registerInstrumentations({
<a id="__codelineno-38-106" name="__codelineno-38-106" href="#__codelineno-38-106"></a>
<a id="__codelineno-38-107" name="__codelineno-38-107" href="#__codelineno-38-107"></a>
<a id="__codelineno-38-108" name="__codelineno-38-108" href="#__codelineno-38-108"></a>
<a id="__codelineno-38-109" name="__codelineno-38-109" href="#__codelineno-38-109"></a>instrumentations: [
<a id="__codelineno-38-110" name="__codelineno-38-110" href="#__codelineno-38-110"></a>
<a id="__codelineno-38-111" name="__codelineno-38-111" href="#__codelineno-38-111"></a>
<a id="__codelineno-38-112" name="__codelineno-38-112" href="#__codelineno-38-112"></a>
<a id="__codelineno-38-113" name="__codelineno-38-113" href="#__codelineno-38-113"></a>new HttpInstrumentation()
<a id="__codelineno-38-114" name="__codelineno-38-114" href="#__codelineno-38-114"></a>
<a id="__codelineno-38-115" name="__codelineno-38-115" href="#__codelineno-38-115"></a>
<a id="__codelineno-38-116" name="__codelineno-38-116" href="#__codelineno-38-116"></a>
<a id="__codelineno-38-117" name="__codelineno-38-117" href="#__codelineno-38-117"></a>],
<a id="__codelineno-38-118" name="__codelineno-38-118" href="#__codelineno-38-118"></a>
<a id="__codelineno-38-119" name="__codelineno-38-119" href="#__codelineno-38-119"></a>
<a id="__codelineno-38-120" name="__codelineno-38-120" href="#__codelineno-38-120"></a>
<a id="__codelineno-38-121" name="__codelineno-38-121" href="#__codelineno-38-121"></a>});
<a id="__codelineno-38-122" name="__codelineno-38-122" href="#__codelineno-38-122"></a>
<a id="__codelineno-38-123" name="__codelineno-38-123" href="#__codelineno-38-123"></a>
<a id="__codelineno-38-124" name="__codelineno-38-124" href="#__codelineno-38-124"></a>
<a id="__codelineno-38-125" name="__codelineno-38-125" href="#__codelineno-38-125"></a>return provider;
<a id="__codelineno-38-126" name="__codelineno-38-126" href="#__codelineno-38-126"></a>
<a id="__codelineno-38-127" name="__codelineno-38-127" href="#__codelineno-38-127"></a>
<a id="__codelineno-38-128" name="__codelineno-38-128" href="#__codelineno-38-128"></a>
<a id="__codelineno-38-129" name="__codelineno-38-129" href="#__codelineno-38-129"></a>}
</code></pre></div>
<p>To configure the exporter to your tenant add, the following environment variables when deploying your Google Cloud function:</p>
<ul>
<li><code>OTEL_EXPORTER_OTLP_ENDPOINT</code>: set it to the previously determined endpoint</li>
<li><code>OTEL_EXPORTER_OTLP_HEADERS</code>: set it to <code>Authorization=Api-Token &lt;TOKEN&gt;</code>, where <code>&lt;TOKEN&gt;</code> is the previously created authentication token.</li>
</ul>
<h3 id="step-3-instrument-the-function-entry-point_1">Step 3 Instrument the function entry point<a class="headerlink" href="#step-3-instrument-the-function-entry-point_1" title="Permanent link">&para;</a></h3>
<p>To instrument invocations to a Google Cloud Function with OpenTelemetry, there are basically two things to do:</p>
<ol>
<li>Create a span around the entry point of the function to trace invocations.</li>
<li>Extract and link the parent span from the propagated context (learn more about <a href="https://engineering.dynatrace.com/open-source/standards/w3c-trace-context/">W3C Trace Context√Ø¬ª¬ø</a>).</li>
</ol>
<p>For certain libraries OpenTelemetry JS already provides <a href="https://github.com/open-telemetry/opentelemetry-js-contrib">instrumentations√Ø¬ª¬ø</a> that you can use to take care of these things.</p>
<p>The following section shows how to instrument an HTTP (<code>Trigger: HTTP</code>) Google Cloud Function.</p>
<h4 id="instrument-an-http-google-cloud-function_1">Instrument an HTTP Google Cloud Function<a class="headerlink" href="#instrument-an-http-google-cloud-function_1" title="Permanent link">&para;</a></h4>
<p>The entry point of a newly created HTTP Google Cloud Function looks like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>/**
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>* Responds to any HTTP request.
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>*
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a>* @param {!express:Request} req HTTP request context.
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a>* @param {!express:Response} res HTTP response context.
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a>*/
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a>
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a>
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a>exports.helloWorld = (req, res) =&gt; {
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a>
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a>
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a>
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a>let message = req.query.message || req.body.message || &#39;Hello World!&#39;;
<a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a>
<a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a>
<a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a>
<a id="__codelineno-39-33" name="__codelineno-39-33" href="#__codelineno-39-33"></a>res.status(200).send(message);
<a id="__codelineno-39-34" name="__codelineno-39-34" href="#__codelineno-39-34"></a>
<a id="__codelineno-39-35" name="__codelineno-39-35" href="#__codelineno-39-35"></a>
<a id="__codelineno-39-36" name="__codelineno-39-36" href="#__codelineno-39-36"></a>
<a id="__codelineno-39-37" name="__codelineno-39-37" href="#__codelineno-39-37"></a>};
</code></pre></div>
<p>OpenTelemetry JS already provides an <a href="https://github.com/open-telemetry/opentelemetry-js/tree/main/experimental/packages/opentelemetry-instrumentation-http">instrumentation√Ø¬ª¬ø</a> for this. In order to make sure that an incoming HTTP request is instrumented
and spans are captured, a few code code snippets must be added to the function's code.</p>
<p>Add this as your first <code>require</code> statement:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>const { trace, context } = require(&quot;@opentelemetry/api&quot;);
</code></pre></div>
<p>Then add this helper function, which calls the <code>setupOtel</code> function we defined above and applies a user-defined name (<code>funcName</code>) to the automatically created span.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>function instrumentHandler(handler, funcName) {
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>setupOtel(funcName);
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>return (req, res) =&gt; {
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>const span = trace.getSpan(context.active());
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a>
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a>
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a>
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a>if (span != null) {
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a>
<a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a>
<a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a>
<a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a>span.updateName(funcName);
<a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a>
<a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a>
<a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a>
<a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a>}
<a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a>
<a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a>
<a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a>
<a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a>handler(req, res);
<a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a>
<a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a>
<a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a>
<a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a>};
<a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a>
<a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a>
<a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a>
<a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a>}
</code></pre></div>
<p>Next, we move the function's actual "business" logic into the <code>myHandler</code> function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>async function myHandler(req, res) {
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>let message = req.query.message || req.body.message || &#39;Hello World!&#39;;
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>res.status(200).send(message);
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a>
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a>};
</code></pre></div>
<p>Finally, we make sure to set the now instrumented <code>myHandler</code> function as the entry point and <code>require</code> the <code>http(s)</code> modules.</p>
<p>Without requiring the <code>http(s)</code> modules, no spans will be created and the function's trace will not show up in Dynatrace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>exports.helloWorld = instrumentHandler(myHandler, &quot;helloWorld&quot;);
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>// make sure the http(s) library is patched before the first call
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>require(&quot;http&quot;);
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a>require(&quot;https&quot;);
</code></pre></div>
<h3 id="step-4-instrument-outgoing-requests_1">Step 4 Instrument outgoing requests<a class="headerlink" href="#step-4-instrument-outgoing-requests_1" title="Permanent link">&para;</a></h3>
<p>To achieve end-to-end tracing, it is important that outgoing requests are also instrumented.</p>
<p>The following section shows how to instrument outgoing HTTP(S) requests.</p>
<h4 id="instrument-outgoing-http-requests_1">Instrument outgoing HTTP requests<a class="headerlink" href="#instrument-outgoing-http-requests_1" title="Permanent link">&para;</a></h4>
<p>OpenTelemetry JS provides an <a href="https://github.com/open-telemetry/opentelemetry-js/tree/main/experimental/packages/opentelemetry-instrumentation-http">instrumentation√Ø¬ª¬ø</a> for tracing outgoing HTTP calls (which we already used in the code snippets above for tracing the incoming HTTP call).</p>
<p>The following helper function <code>httpGet</code> wraps outgoing HTTP(S) calls in a <code>Promise</code> object so that the result of the call can be <code>await</code>ed in the main function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>async function httpGet(url) {
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>return new Promise((resolve, reject) =&gt; {
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>const isHttps = url.startsWith(&quot;https://&quot;);
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a>
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a>const httpLib = isHttps ? https : http;
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a>
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a>
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a>const request = httpLib.get(url, (res) =&gt; {
<a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a>
<a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a>
<a id="__codelineno-44-20" name="__codelineno-44-20" href="#__codelineno-44-20"></a>
<a id="__codelineno-44-21" name="__codelineno-44-21" href="#__codelineno-44-21"></a>console.log(`${url} status code - ${res.statusCode}`);
<a id="__codelineno-44-22" name="__codelineno-44-22" href="#__codelineno-44-22"></a>
<a id="__codelineno-44-23" name="__codelineno-44-23" href="#__codelineno-44-23"></a>
<a id="__codelineno-44-24" name="__codelineno-44-24" href="#__codelineno-44-24"></a>
<a id="__codelineno-44-25" name="__codelineno-44-25" href="#__codelineno-44-25"></a>const responseData = [];
<a id="__codelineno-44-26" name="__codelineno-44-26" href="#__codelineno-44-26"></a>
<a id="__codelineno-44-27" name="__codelineno-44-27" href="#__codelineno-44-27"></a>
<a id="__codelineno-44-28" name="__codelineno-44-28" href="#__codelineno-44-28"></a>
<a id="__codelineno-44-29" name="__codelineno-44-29" href="#__codelineno-44-29"></a>res.on(&quot;error&quot;, (error) =&gt; {
<a id="__codelineno-44-30" name="__codelineno-44-30" href="#__codelineno-44-30"></a>
<a id="__codelineno-44-31" name="__codelineno-44-31" href="#__codelineno-44-31"></a>
<a id="__codelineno-44-32" name="__codelineno-44-32" href="#__codelineno-44-32"></a>
<a id="__codelineno-44-33" name="__codelineno-44-33" href="#__codelineno-44-33"></a>console.error(`${url} reponse error - ${error}`);
<a id="__codelineno-44-34" name="__codelineno-44-34" href="#__codelineno-44-34"></a>
<a id="__codelineno-44-35" name="__codelineno-44-35" href="#__codelineno-44-35"></a>
<a id="__codelineno-44-36" name="__codelineno-44-36" href="#__codelineno-44-36"></a>
<a id="__codelineno-44-37" name="__codelineno-44-37" href="#__codelineno-44-37"></a>reject(error);
<a id="__codelineno-44-38" name="__codelineno-44-38" href="#__codelineno-44-38"></a>
<a id="__codelineno-44-39" name="__codelineno-44-39" href="#__codelineno-44-39"></a>
<a id="__codelineno-44-40" name="__codelineno-44-40" href="#__codelineno-44-40"></a>
<a id="__codelineno-44-41" name="__codelineno-44-41" href="#__codelineno-44-41"></a>});
<a id="__codelineno-44-42" name="__codelineno-44-42" href="#__codelineno-44-42"></a>
<a id="__codelineno-44-43" name="__codelineno-44-43" href="#__codelineno-44-43"></a>
<a id="__codelineno-44-44" name="__codelineno-44-44" href="#__codelineno-44-44"></a>
<a id="__codelineno-44-45" name="__codelineno-44-45" href="#__codelineno-44-45"></a>res.on(&quot;data&quot;, (chunk) =&gt; {
<a id="__codelineno-44-46" name="__codelineno-44-46" href="#__codelineno-44-46"></a>
<a id="__codelineno-44-47" name="__codelineno-44-47" href="#__codelineno-44-47"></a>
<a id="__codelineno-44-48" name="__codelineno-44-48" href="#__codelineno-44-48"></a>
<a id="__codelineno-44-49" name="__codelineno-44-49" href="#__codelineno-44-49"></a>responseData.push(chunk);
<a id="__codelineno-44-50" name="__codelineno-44-50" href="#__codelineno-44-50"></a>
<a id="__codelineno-44-51" name="__codelineno-44-51" href="#__codelineno-44-51"></a>
<a id="__codelineno-44-52" name="__codelineno-44-52" href="#__codelineno-44-52"></a>
<a id="__codelineno-44-53" name="__codelineno-44-53" href="#__codelineno-44-53"></a>});
<a id="__codelineno-44-54" name="__codelineno-44-54" href="#__codelineno-44-54"></a>
<a id="__codelineno-44-55" name="__codelineno-44-55" href="#__codelineno-44-55"></a>
<a id="__codelineno-44-56" name="__codelineno-44-56" href="#__codelineno-44-56"></a>
<a id="__codelineno-44-57" name="__codelineno-44-57" href="#__codelineno-44-57"></a>res.on(&quot;end&quot;, () =&gt; {
<a id="__codelineno-44-58" name="__codelineno-44-58" href="#__codelineno-44-58"></a>
<a id="__codelineno-44-59" name="__codelineno-44-59" href="#__codelineno-44-59"></a>
<a id="__codelineno-44-60" name="__codelineno-44-60" href="#__codelineno-44-60"></a>
<a id="__codelineno-44-61" name="__codelineno-44-61" href="#__codelineno-44-61"></a>resolve({ statusCode: res.statusCode, data: responseData });
<a id="__codelineno-44-62" name="__codelineno-44-62" href="#__codelineno-44-62"></a>
<a id="__codelineno-44-63" name="__codelineno-44-63" href="#__codelineno-44-63"></a>
<a id="__codelineno-44-64" name="__codelineno-44-64" href="#__codelineno-44-64"></a>
<a id="__codelineno-44-65" name="__codelineno-44-65" href="#__codelineno-44-65"></a>});
<a id="__codelineno-44-66" name="__codelineno-44-66" href="#__codelineno-44-66"></a>
<a id="__codelineno-44-67" name="__codelineno-44-67" href="#__codelineno-44-67"></a>
<a id="__codelineno-44-68" name="__codelineno-44-68" href="#__codelineno-44-68"></a>
<a id="__codelineno-44-69" name="__codelineno-44-69" href="#__codelineno-44-69"></a>});
<a id="__codelineno-44-70" name="__codelineno-44-70" href="#__codelineno-44-70"></a>
<a id="__codelineno-44-71" name="__codelineno-44-71" href="#__codelineno-44-71"></a>
<a id="__codelineno-44-72" name="__codelineno-44-72" href="#__codelineno-44-72"></a>
<a id="__codelineno-44-73" name="__codelineno-44-73" href="#__codelineno-44-73"></a>request.on(&quot;error&quot;, error =&gt; {
<a id="__codelineno-44-74" name="__codelineno-44-74" href="#__codelineno-44-74"></a>
<a id="__codelineno-44-75" name="__codelineno-44-75" href="#__codelineno-44-75"></a>
<a id="__codelineno-44-76" name="__codelineno-44-76" href="#__codelineno-44-76"></a>
<a id="__codelineno-44-77" name="__codelineno-44-77" href="#__codelineno-44-77"></a>console.error(`${url} request error - ${error}`);
<a id="__codelineno-44-78" name="__codelineno-44-78" href="#__codelineno-44-78"></a>
<a id="__codelineno-44-79" name="__codelineno-44-79" href="#__codelineno-44-79"></a>
<a id="__codelineno-44-80" name="__codelineno-44-80" href="#__codelineno-44-80"></a>
<a id="__codelineno-44-81" name="__codelineno-44-81" href="#__codelineno-44-81"></a>reject(error);
<a id="__codelineno-44-82" name="__codelineno-44-82" href="#__codelineno-44-82"></a>
<a id="__codelineno-44-83" name="__codelineno-44-83" href="#__codelineno-44-83"></a>
<a id="__codelineno-44-84" name="__codelineno-44-84" href="#__codelineno-44-84"></a>
<a id="__codelineno-44-85" name="__codelineno-44-85" href="#__codelineno-44-85"></a>});
<a id="__codelineno-44-86" name="__codelineno-44-86" href="#__codelineno-44-86"></a>
<a id="__codelineno-44-87" name="__codelineno-44-87" href="#__codelineno-44-87"></a>
<a id="__codelineno-44-88" name="__codelineno-44-88" href="#__codelineno-44-88"></a>
<a id="__codelineno-44-89" name="__codelineno-44-89" href="#__codelineno-44-89"></a>request.end();
<a id="__codelineno-44-90" name="__codelineno-44-90" href="#__codelineno-44-90"></a>
<a id="__codelineno-44-91" name="__codelineno-44-91" href="#__codelineno-44-91"></a>
<a id="__codelineno-44-92" name="__codelineno-44-92" href="#__codelineno-44-92"></a>
<a id="__codelineno-44-93" name="__codelineno-44-93" href="#__codelineno-44-93"></a>});
<a id="__codelineno-44-94" name="__codelineno-44-94" href="#__codelineno-44-94"></a>
<a id="__codelineno-44-95" name="__codelineno-44-95" href="#__codelineno-44-95"></a>
<a id="__codelineno-44-96" name="__codelineno-44-96" href="#__codelineno-44-96"></a>
<a id="__codelineno-44-97" name="__codelineno-44-97" href="#__codelineno-44-97"></a>}
</code></pre></div>
<p>The main function can then perform outgoing HTTP(S) calls, making use of this helper function <code>httpGet</code>, which is automatically instrumented by OpenTelemetry.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>async function myHandler(req, res) {
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>await httpGet(&#39;https://example.com&#39;);
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>await httpGet(&#39;http://example.net&#39;);
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>let message = req.query.message || req.body.message || &#39;Hello World!&#39;;
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>
<a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>
<a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a>res.status(200).send(message);
<a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a>
<a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a>
<a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a>
<a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a>};
</code></pre></div>
<p>Putting everything together, here is the full sample code for tracing a Node.js Google Cloud Function that is invoked via HTTP and that performs outgoing HTTP(S) calls.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>const { trace, context } = require(&quot;@opentelemetry/api&quot;);
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>const { NodeTracerProvider } = require(&#39;@opentelemetry/sdk-trace-node&#39;);
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a>const { W3CTraceContextPropagator, AlwaysOnSampler } = require(&#39;@opentelemetry/core&#39;);
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>const { registerInstrumentations } = require(&#39;@opentelemetry/instrumentation&#39;);
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a>
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a>const { HttpInstrumentation } = require(&#39;@opentelemetry/instrumentation-http&#39;);
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a>
<a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a>
<a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a>const { SemanticResourceAttributes } = require(&#39;@opentelemetry/semantic-conventions&#39;);
<a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a>
<a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a>
<a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a>
<a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a>const { OTLPTraceExporter } = require(&quot;@opentelemetry/exporter-trace-otlp-proto&quot;);
<a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a>
<a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a>
<a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a>
<a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a>const { BatchSpanProcessor } = require(&quot;@opentelemetry/sdk-trace-base&quot;);
<a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a>
<a id="__codelineno-46-31" name="__codelineno-46-31" href="#__codelineno-46-31"></a>
<a id="__codelineno-46-32" name="__codelineno-46-32" href="#__codelineno-46-32"></a>
<a id="__codelineno-46-33" name="__codelineno-46-33" href="#__codelineno-46-33"></a>const { Resource } = require(&quot;@opentelemetry/resources&quot;);
<a id="__codelineno-46-34" name="__codelineno-46-34" href="#__codelineno-46-34"></a>
<a id="__codelineno-46-35" name="__codelineno-46-35" href="#__codelineno-46-35"></a>
<a id="__codelineno-46-36" name="__codelineno-46-36" href="#__codelineno-46-36"></a>
<a id="__codelineno-46-37" name="__codelineno-46-37" href="#__codelineno-46-37"></a>const { diag, DiagConsoleLogger, DiagLogLevel } = require(&quot;@opentelemetry/api&quot;);
<a id="__codelineno-46-38" name="__codelineno-46-38" href="#__codelineno-46-38"></a>
<a id="__codelineno-46-39" name="__codelineno-46-39" href="#__codelineno-46-39"></a>
<a id="__codelineno-46-40" name="__codelineno-46-40" href="#__codelineno-46-40"></a>
<a id="__codelineno-46-41" name="__codelineno-46-41" href="#__codelineno-46-41"></a>const http = require(&quot;http&quot;);
<a id="__codelineno-46-42" name="__codelineno-46-42" href="#__codelineno-46-42"></a>
<a id="__codelineno-46-43" name="__codelineno-46-43" href="#__codelineno-46-43"></a>
<a id="__codelineno-46-44" name="__codelineno-46-44" href="#__codelineno-46-44"></a>
<a id="__codelineno-46-45" name="__codelineno-46-45" href="#__codelineno-46-45"></a>const https = require(&quot;https&quot;);
<a id="__codelineno-46-46" name="__codelineno-46-46" href="#__codelineno-46-46"></a>
<a id="__codelineno-46-47" name="__codelineno-46-47" href="#__codelineno-46-47"></a>
<a id="__codelineno-46-48" name="__codelineno-46-48" href="#__codelineno-46-48"></a>
<a id="__codelineno-46-49" name="__codelineno-46-49" href="#__codelineno-46-49"></a>diag.setLogger(new DiagConsoleLogger(), DiagLogLevel.ALL);
<a id="__codelineno-46-50" name="__codelineno-46-50" href="#__codelineno-46-50"></a>
<a id="__codelineno-46-51" name="__codelineno-46-51" href="#__codelineno-46-51"></a>
<a id="__codelineno-46-52" name="__codelineno-46-52" href="#__codelineno-46-52"></a>
<a id="__codelineno-46-53" name="__codelineno-46-53" href="#__codelineno-46-53"></a>function setupOtel(functionName) {
<a id="__codelineno-46-54" name="__codelineno-46-54" href="#__codelineno-46-54"></a>
<a id="__codelineno-46-55" name="__codelineno-46-55" href="#__codelineno-46-55"></a>
<a id="__codelineno-46-56" name="__codelineno-46-56" href="#__codelineno-46-56"></a>
<a id="__codelineno-46-57" name="__codelineno-46-57" href="#__codelineno-46-57"></a>// create tracer provider
<a id="__codelineno-46-58" name="__codelineno-46-58" href="#__codelineno-46-58"></a>
<a id="__codelineno-46-59" name="__codelineno-46-59" href="#__codelineno-46-59"></a>
<a id="__codelineno-46-60" name="__codelineno-46-60" href="#__codelineno-46-60"></a>
<a id="__codelineno-46-61" name="__codelineno-46-61" href="#__codelineno-46-61"></a>const provider = new NodeTracerProvider({
<a id="__codelineno-46-62" name="__codelineno-46-62" href="#__codelineno-46-62"></a>
<a id="__codelineno-46-63" name="__codelineno-46-63" href="#__codelineno-46-63"></a>
<a id="__codelineno-46-64" name="__codelineno-46-64" href="#__codelineno-46-64"></a>
<a id="__codelineno-46-65" name="__codelineno-46-65" href="#__codelineno-46-65"></a>resource: new Resource({
<a id="__codelineno-46-66" name="__codelineno-46-66" href="#__codelineno-46-66"></a>
<a id="__codelineno-46-67" name="__codelineno-46-67" href="#__codelineno-46-67"></a>
<a id="__codelineno-46-68" name="__codelineno-46-68" href="#__codelineno-46-68"></a>
<a id="__codelineno-46-69" name="__codelineno-46-69" href="#__codelineno-46-69"></a>[SemanticResourceAttributes.SERVICE_NAME]: functionName,
<a id="__codelineno-46-70" name="__codelineno-46-70" href="#__codelineno-46-70"></a>
<a id="__codelineno-46-71" name="__codelineno-46-71" href="#__codelineno-46-71"></a>
<a id="__codelineno-46-72" name="__codelineno-46-72" href="#__codelineno-46-72"></a>
<a id="__codelineno-46-73" name="__codelineno-46-73" href="#__codelineno-46-73"></a>}),
<a id="__codelineno-46-74" name="__codelineno-46-74" href="#__codelineno-46-74"></a>
<a id="__codelineno-46-75" name="__codelineno-46-75" href="#__codelineno-46-75"></a>
<a id="__codelineno-46-76" name="__codelineno-46-76" href="#__codelineno-46-76"></a>
<a id="__codelineno-46-77" name="__codelineno-46-77" href="#__codelineno-46-77"></a>sampler: new AlwaysOnSampler()
<a id="__codelineno-46-78" name="__codelineno-46-78" href="#__codelineno-46-78"></a>
<a id="__codelineno-46-79" name="__codelineno-46-79" href="#__codelineno-46-79"></a>
<a id="__codelineno-46-80" name="__codelineno-46-80" href="#__codelineno-46-80"></a>
<a id="__codelineno-46-81" name="__codelineno-46-81" href="#__codelineno-46-81"></a>});
<a id="__codelineno-46-82" name="__codelineno-46-82" href="#__codelineno-46-82"></a>
<a id="__codelineno-46-83" name="__codelineno-46-83" href="#__codelineno-46-83"></a>
<a id="__codelineno-46-84" name="__codelineno-46-84" href="#__codelineno-46-84"></a>
<a id="__codelineno-46-85" name="__codelineno-46-85" href="#__codelineno-46-85"></a>// add proto exporter
<a id="__codelineno-46-86" name="__codelineno-46-86" href="#__codelineno-46-86"></a>
<a id="__codelineno-46-87" name="__codelineno-46-87" href="#__codelineno-46-87"></a>
<a id="__codelineno-46-88" name="__codelineno-46-88" href="#__codelineno-46-88"></a>
<a id="__codelineno-46-89" name="__codelineno-46-89" href="#__codelineno-46-89"></a>const exporter = new OTLPTraceExporter();
<a id="__codelineno-46-90" name="__codelineno-46-90" href="#__codelineno-46-90"></a>
<a id="__codelineno-46-91" name="__codelineno-46-91" href="#__codelineno-46-91"></a>
<a id="__codelineno-46-92" name="__codelineno-46-92" href="#__codelineno-46-92"></a>
<a id="__codelineno-46-93" name="__codelineno-46-93" href="#__codelineno-46-93"></a>provider.addSpanProcessor(new BatchSpanProcessor(exporter));
<a id="__codelineno-46-94" name="__codelineno-46-94" href="#__codelineno-46-94"></a>
<a id="__codelineno-46-95" name="__codelineno-46-95" href="#__codelineno-46-95"></a>
<a id="__codelineno-46-96" name="__codelineno-46-96" href="#__codelineno-46-96"></a>
<a id="__codelineno-46-97" name="__codelineno-46-97" href="#__codelineno-46-97"></a>// register globally
<a id="__codelineno-46-98" name="__codelineno-46-98" href="#__codelineno-46-98"></a>
<a id="__codelineno-46-99" name="__codelineno-46-99" href="#__codelineno-46-99"></a>
<a id="__codelineno-46-100" name="__codelineno-46-100" href="#__codelineno-46-100"></a>
<a id="__codelineno-46-101" name="__codelineno-46-101" href="#__codelineno-46-101"></a>provider.register({
<a id="__codelineno-46-102" name="__codelineno-46-102" href="#__codelineno-46-102"></a>
<a id="__codelineno-46-103" name="__codelineno-46-103" href="#__codelineno-46-103"></a>
<a id="__codelineno-46-104" name="__codelineno-46-104" href="#__codelineno-46-104"></a>
<a id="__codelineno-46-105" name="__codelineno-46-105" href="#__codelineno-46-105"></a>propagator: new W3CTraceContextPropagator()
<a id="__codelineno-46-106" name="__codelineno-46-106" href="#__codelineno-46-106"></a>
<a id="__codelineno-46-107" name="__codelineno-46-107" href="#__codelineno-46-107"></a>
<a id="__codelineno-46-108" name="__codelineno-46-108" href="#__codelineno-46-108"></a>
<a id="__codelineno-46-109" name="__codelineno-46-109" href="#__codelineno-46-109"></a>});
<a id="__codelineno-46-110" name="__codelineno-46-110" href="#__codelineno-46-110"></a>
<a id="__codelineno-46-111" name="__codelineno-46-111" href="#__codelineno-46-111"></a>
<a id="__codelineno-46-112" name="__codelineno-46-112" href="#__codelineno-46-112"></a>
<a id="__codelineno-46-113" name="__codelineno-46-113" href="#__codelineno-46-113"></a>// add http automatic instrumentation
<a id="__codelineno-46-114" name="__codelineno-46-114" href="#__codelineno-46-114"></a>
<a id="__codelineno-46-115" name="__codelineno-46-115" href="#__codelineno-46-115"></a>
<a id="__codelineno-46-116" name="__codelineno-46-116" href="#__codelineno-46-116"></a>
<a id="__codelineno-46-117" name="__codelineno-46-117" href="#__codelineno-46-117"></a>registerInstrumentations({
<a id="__codelineno-46-118" name="__codelineno-46-118" href="#__codelineno-46-118"></a>
<a id="__codelineno-46-119" name="__codelineno-46-119" href="#__codelineno-46-119"></a>
<a id="__codelineno-46-120" name="__codelineno-46-120" href="#__codelineno-46-120"></a>
<a id="__codelineno-46-121" name="__codelineno-46-121" href="#__codelineno-46-121"></a>instrumentations: [
<a id="__codelineno-46-122" name="__codelineno-46-122" href="#__codelineno-46-122"></a>
<a id="__codelineno-46-123" name="__codelineno-46-123" href="#__codelineno-46-123"></a>
<a id="__codelineno-46-124" name="__codelineno-46-124" href="#__codelineno-46-124"></a>
<a id="__codelineno-46-125" name="__codelineno-46-125" href="#__codelineno-46-125"></a>new HttpInstrumentation()
<a id="__codelineno-46-126" name="__codelineno-46-126" href="#__codelineno-46-126"></a>
<a id="__codelineno-46-127" name="__codelineno-46-127" href="#__codelineno-46-127"></a>
<a id="__codelineno-46-128" name="__codelineno-46-128" href="#__codelineno-46-128"></a>
<a id="__codelineno-46-129" name="__codelineno-46-129" href="#__codelineno-46-129"></a>],
<a id="__codelineno-46-130" name="__codelineno-46-130" href="#__codelineno-46-130"></a>
<a id="__codelineno-46-131" name="__codelineno-46-131" href="#__codelineno-46-131"></a>
<a id="__codelineno-46-132" name="__codelineno-46-132" href="#__codelineno-46-132"></a>
<a id="__codelineno-46-133" name="__codelineno-46-133" href="#__codelineno-46-133"></a>});
<a id="__codelineno-46-134" name="__codelineno-46-134" href="#__codelineno-46-134"></a>
<a id="__codelineno-46-135" name="__codelineno-46-135" href="#__codelineno-46-135"></a>
<a id="__codelineno-46-136" name="__codelineno-46-136" href="#__codelineno-46-136"></a>
<a id="__codelineno-46-137" name="__codelineno-46-137" href="#__codelineno-46-137"></a>return provider;
<a id="__codelineno-46-138" name="__codelineno-46-138" href="#__codelineno-46-138"></a>
<a id="__codelineno-46-139" name="__codelineno-46-139" href="#__codelineno-46-139"></a>
<a id="__codelineno-46-140" name="__codelineno-46-140" href="#__codelineno-46-140"></a>
<a id="__codelineno-46-141" name="__codelineno-46-141" href="#__codelineno-46-141"></a>}
<a id="__codelineno-46-142" name="__codelineno-46-142" href="#__codelineno-46-142"></a>
<a id="__codelineno-46-143" name="__codelineno-46-143" href="#__codelineno-46-143"></a>
<a id="__codelineno-46-144" name="__codelineno-46-144" href="#__codelineno-46-144"></a>
<a id="__codelineno-46-145" name="__codelineno-46-145" href="#__codelineno-46-145"></a>async function httpGet(url) {
<a id="__codelineno-46-146" name="__codelineno-46-146" href="#__codelineno-46-146"></a>
<a id="__codelineno-46-147" name="__codelineno-46-147" href="#__codelineno-46-147"></a>
<a id="__codelineno-46-148" name="__codelineno-46-148" href="#__codelineno-46-148"></a>
<a id="__codelineno-46-149" name="__codelineno-46-149" href="#__codelineno-46-149"></a>return new Promise((resolve, reject) =&gt; {
<a id="__codelineno-46-150" name="__codelineno-46-150" href="#__codelineno-46-150"></a>
<a id="__codelineno-46-151" name="__codelineno-46-151" href="#__codelineno-46-151"></a>
<a id="__codelineno-46-152" name="__codelineno-46-152" href="#__codelineno-46-152"></a>
<a id="__codelineno-46-153" name="__codelineno-46-153" href="#__codelineno-46-153"></a>const isHttps = url.startsWith(&quot;https://&quot;);
<a id="__codelineno-46-154" name="__codelineno-46-154" href="#__codelineno-46-154"></a>
<a id="__codelineno-46-155" name="__codelineno-46-155" href="#__codelineno-46-155"></a>
<a id="__codelineno-46-156" name="__codelineno-46-156" href="#__codelineno-46-156"></a>
<a id="__codelineno-46-157" name="__codelineno-46-157" href="#__codelineno-46-157"></a>const httpLib = isHttps ? https : http;
<a id="__codelineno-46-158" name="__codelineno-46-158" href="#__codelineno-46-158"></a>
<a id="__codelineno-46-159" name="__codelineno-46-159" href="#__codelineno-46-159"></a>
<a id="__codelineno-46-160" name="__codelineno-46-160" href="#__codelineno-46-160"></a>
<a id="__codelineno-46-161" name="__codelineno-46-161" href="#__codelineno-46-161"></a>const request = httpLib.get(url, (res) =&gt; {
<a id="__codelineno-46-162" name="__codelineno-46-162" href="#__codelineno-46-162"></a>
<a id="__codelineno-46-163" name="__codelineno-46-163" href="#__codelineno-46-163"></a>
<a id="__codelineno-46-164" name="__codelineno-46-164" href="#__codelineno-46-164"></a>
<a id="__codelineno-46-165" name="__codelineno-46-165" href="#__codelineno-46-165"></a>console.log(`${url} status code - ${res.statusCode}`);
<a id="__codelineno-46-166" name="__codelineno-46-166" href="#__codelineno-46-166"></a>
<a id="__codelineno-46-167" name="__codelineno-46-167" href="#__codelineno-46-167"></a>
<a id="__codelineno-46-168" name="__codelineno-46-168" href="#__codelineno-46-168"></a>
<a id="__codelineno-46-169" name="__codelineno-46-169" href="#__codelineno-46-169"></a>const responseData = [];
<a id="__codelineno-46-170" name="__codelineno-46-170" href="#__codelineno-46-170"></a>
<a id="__codelineno-46-171" name="__codelineno-46-171" href="#__codelineno-46-171"></a>
<a id="__codelineno-46-172" name="__codelineno-46-172" href="#__codelineno-46-172"></a>
<a id="__codelineno-46-173" name="__codelineno-46-173" href="#__codelineno-46-173"></a>res.on(&quot;error&quot;, (error) =&gt; {
<a id="__codelineno-46-174" name="__codelineno-46-174" href="#__codelineno-46-174"></a>
<a id="__codelineno-46-175" name="__codelineno-46-175" href="#__codelineno-46-175"></a>
<a id="__codelineno-46-176" name="__codelineno-46-176" href="#__codelineno-46-176"></a>
<a id="__codelineno-46-177" name="__codelineno-46-177" href="#__codelineno-46-177"></a>console.error(`${url} reponse error - ${error}`);
<a id="__codelineno-46-178" name="__codelineno-46-178" href="#__codelineno-46-178"></a>
<a id="__codelineno-46-179" name="__codelineno-46-179" href="#__codelineno-46-179"></a>
<a id="__codelineno-46-180" name="__codelineno-46-180" href="#__codelineno-46-180"></a>
<a id="__codelineno-46-181" name="__codelineno-46-181" href="#__codelineno-46-181"></a>reject(error);
<a id="__codelineno-46-182" name="__codelineno-46-182" href="#__codelineno-46-182"></a>
<a id="__codelineno-46-183" name="__codelineno-46-183" href="#__codelineno-46-183"></a>
<a id="__codelineno-46-184" name="__codelineno-46-184" href="#__codelineno-46-184"></a>
<a id="__codelineno-46-185" name="__codelineno-46-185" href="#__codelineno-46-185"></a>});
<a id="__codelineno-46-186" name="__codelineno-46-186" href="#__codelineno-46-186"></a>
<a id="__codelineno-46-187" name="__codelineno-46-187" href="#__codelineno-46-187"></a>
<a id="__codelineno-46-188" name="__codelineno-46-188" href="#__codelineno-46-188"></a>
<a id="__codelineno-46-189" name="__codelineno-46-189" href="#__codelineno-46-189"></a>res.on(&quot;data&quot;, (chunk) =&gt; {
<a id="__codelineno-46-190" name="__codelineno-46-190" href="#__codelineno-46-190"></a>
<a id="__codelineno-46-191" name="__codelineno-46-191" href="#__codelineno-46-191"></a>
<a id="__codelineno-46-192" name="__codelineno-46-192" href="#__codelineno-46-192"></a>
<a id="__codelineno-46-193" name="__codelineno-46-193" href="#__codelineno-46-193"></a>responseData.push(chunk);
<a id="__codelineno-46-194" name="__codelineno-46-194" href="#__codelineno-46-194"></a>
<a id="__codelineno-46-195" name="__codelineno-46-195" href="#__codelineno-46-195"></a>
<a id="__codelineno-46-196" name="__codelineno-46-196" href="#__codelineno-46-196"></a>
<a id="__codelineno-46-197" name="__codelineno-46-197" href="#__codelineno-46-197"></a>});
<a id="__codelineno-46-198" name="__codelineno-46-198" href="#__codelineno-46-198"></a>
<a id="__codelineno-46-199" name="__codelineno-46-199" href="#__codelineno-46-199"></a>
<a id="__codelineno-46-200" name="__codelineno-46-200" href="#__codelineno-46-200"></a>
<a id="__codelineno-46-201" name="__codelineno-46-201" href="#__codelineno-46-201"></a>res.on(&quot;end&quot;, () =&gt; {
<a id="__codelineno-46-202" name="__codelineno-46-202" href="#__codelineno-46-202"></a>
<a id="__codelineno-46-203" name="__codelineno-46-203" href="#__codelineno-46-203"></a>
<a id="__codelineno-46-204" name="__codelineno-46-204" href="#__codelineno-46-204"></a>
<a id="__codelineno-46-205" name="__codelineno-46-205" href="#__codelineno-46-205"></a>resolve({ statusCode: res.statusCode, data: responseData });
<a id="__codelineno-46-206" name="__codelineno-46-206" href="#__codelineno-46-206"></a>
<a id="__codelineno-46-207" name="__codelineno-46-207" href="#__codelineno-46-207"></a>
<a id="__codelineno-46-208" name="__codelineno-46-208" href="#__codelineno-46-208"></a>
<a id="__codelineno-46-209" name="__codelineno-46-209" href="#__codelineno-46-209"></a>});
<a id="__codelineno-46-210" name="__codelineno-46-210" href="#__codelineno-46-210"></a>
<a id="__codelineno-46-211" name="__codelineno-46-211" href="#__codelineno-46-211"></a>
<a id="__codelineno-46-212" name="__codelineno-46-212" href="#__codelineno-46-212"></a>
<a id="__codelineno-46-213" name="__codelineno-46-213" href="#__codelineno-46-213"></a>});
<a id="__codelineno-46-214" name="__codelineno-46-214" href="#__codelineno-46-214"></a>
<a id="__codelineno-46-215" name="__codelineno-46-215" href="#__codelineno-46-215"></a>
<a id="__codelineno-46-216" name="__codelineno-46-216" href="#__codelineno-46-216"></a>
<a id="__codelineno-46-217" name="__codelineno-46-217" href="#__codelineno-46-217"></a>request.on(&quot;error&quot;, error =&gt; {
<a id="__codelineno-46-218" name="__codelineno-46-218" href="#__codelineno-46-218"></a>
<a id="__codelineno-46-219" name="__codelineno-46-219" href="#__codelineno-46-219"></a>
<a id="__codelineno-46-220" name="__codelineno-46-220" href="#__codelineno-46-220"></a>
<a id="__codelineno-46-221" name="__codelineno-46-221" href="#__codelineno-46-221"></a>console.error(`${url} request error - ${error}`);
<a id="__codelineno-46-222" name="__codelineno-46-222" href="#__codelineno-46-222"></a>
<a id="__codelineno-46-223" name="__codelineno-46-223" href="#__codelineno-46-223"></a>
<a id="__codelineno-46-224" name="__codelineno-46-224" href="#__codelineno-46-224"></a>
<a id="__codelineno-46-225" name="__codelineno-46-225" href="#__codelineno-46-225"></a>reject(error);
<a id="__codelineno-46-226" name="__codelineno-46-226" href="#__codelineno-46-226"></a>
<a id="__codelineno-46-227" name="__codelineno-46-227" href="#__codelineno-46-227"></a>
<a id="__codelineno-46-228" name="__codelineno-46-228" href="#__codelineno-46-228"></a>
<a id="__codelineno-46-229" name="__codelineno-46-229" href="#__codelineno-46-229"></a>});
<a id="__codelineno-46-230" name="__codelineno-46-230" href="#__codelineno-46-230"></a>
<a id="__codelineno-46-231" name="__codelineno-46-231" href="#__codelineno-46-231"></a>
<a id="__codelineno-46-232" name="__codelineno-46-232" href="#__codelineno-46-232"></a>
<a id="__codelineno-46-233" name="__codelineno-46-233" href="#__codelineno-46-233"></a>request.end();
<a id="__codelineno-46-234" name="__codelineno-46-234" href="#__codelineno-46-234"></a>
<a id="__codelineno-46-235" name="__codelineno-46-235" href="#__codelineno-46-235"></a>
<a id="__codelineno-46-236" name="__codelineno-46-236" href="#__codelineno-46-236"></a>
<a id="__codelineno-46-237" name="__codelineno-46-237" href="#__codelineno-46-237"></a>});
<a id="__codelineno-46-238" name="__codelineno-46-238" href="#__codelineno-46-238"></a>
<a id="__codelineno-46-239" name="__codelineno-46-239" href="#__codelineno-46-239"></a>
<a id="__codelineno-46-240" name="__codelineno-46-240" href="#__codelineno-46-240"></a>
<a id="__codelineno-46-241" name="__codelineno-46-241" href="#__codelineno-46-241"></a>}
<a id="__codelineno-46-242" name="__codelineno-46-242" href="#__codelineno-46-242"></a>
<a id="__codelineno-46-243" name="__codelineno-46-243" href="#__codelineno-46-243"></a>
<a id="__codelineno-46-244" name="__codelineno-46-244" href="#__codelineno-46-244"></a>
<a id="__codelineno-46-245" name="__codelineno-46-245" href="#__codelineno-46-245"></a>// The function&#39;s custom logic goes in here.
<a id="__codelineno-46-246" name="__codelineno-46-246" href="#__codelineno-46-246"></a>
<a id="__codelineno-46-247" name="__codelineno-46-247" href="#__codelineno-46-247"></a>
<a id="__codelineno-46-248" name="__codelineno-46-248" href="#__codelineno-46-248"></a>
<a id="__codelineno-46-249" name="__codelineno-46-249" href="#__codelineno-46-249"></a>async function myHandler(req, res) {
<a id="__codelineno-46-250" name="__codelineno-46-250" href="#__codelineno-46-250"></a>
<a id="__codelineno-46-251" name="__codelineno-46-251" href="#__codelineno-46-251"></a>
<a id="__codelineno-46-252" name="__codelineno-46-252" href="#__codelineno-46-252"></a>
<a id="__codelineno-46-253" name="__codelineno-46-253" href="#__codelineno-46-253"></a>// Perform 2 outgoing HTTP calls.
<a id="__codelineno-46-254" name="__codelineno-46-254" href="#__codelineno-46-254"></a>
<a id="__codelineno-46-255" name="__codelineno-46-255" href="#__codelineno-46-255"></a>
<a id="__codelineno-46-256" name="__codelineno-46-256" href="#__codelineno-46-256"></a>
<a id="__codelineno-46-257" name="__codelineno-46-257" href="#__codelineno-46-257"></a>await httpGet(&#39;https://example.com&#39;);
<a id="__codelineno-46-258" name="__codelineno-46-258" href="#__codelineno-46-258"></a>
<a id="__codelineno-46-259" name="__codelineno-46-259" href="#__codelineno-46-259"></a>
<a id="__codelineno-46-260" name="__codelineno-46-260" href="#__codelineno-46-260"></a>
<a id="__codelineno-46-261" name="__codelineno-46-261" href="#__codelineno-46-261"></a>await httpGet(&#39;http://example.net&#39;);
<a id="__codelineno-46-262" name="__codelineno-46-262" href="#__codelineno-46-262"></a>
<a id="__codelineno-46-263" name="__codelineno-46-263" href="#__codelineno-46-263"></a>
<a id="__codelineno-46-264" name="__codelineno-46-264" href="#__codelineno-46-264"></a>
<a id="__codelineno-46-265" name="__codelineno-46-265" href="#__codelineno-46-265"></a>let message = req.query.message || req.body.message || &#39;Hello World!&#39;;
<a id="__codelineno-46-266" name="__codelineno-46-266" href="#__codelineno-46-266"></a>
<a id="__codelineno-46-267" name="__codelineno-46-267" href="#__codelineno-46-267"></a>
<a id="__codelineno-46-268" name="__codelineno-46-268" href="#__codelineno-46-268"></a>
<a id="__codelineno-46-269" name="__codelineno-46-269" href="#__codelineno-46-269"></a>res.status(200).send(message);
<a id="__codelineno-46-270" name="__codelineno-46-270" href="#__codelineno-46-270"></a>
<a id="__codelineno-46-271" name="__codelineno-46-271" href="#__codelineno-46-271"></a>
<a id="__codelineno-46-272" name="__codelineno-46-272" href="#__codelineno-46-272"></a>
<a id="__codelineno-46-273" name="__codelineno-46-273" href="#__codelineno-46-273"></a>};
<a id="__codelineno-46-274" name="__codelineno-46-274" href="#__codelineno-46-274"></a>
<a id="__codelineno-46-275" name="__codelineno-46-275" href="#__codelineno-46-275"></a>
<a id="__codelineno-46-276" name="__codelineno-46-276" href="#__codelineno-46-276"></a>
<a id="__codelineno-46-277" name="__codelineno-46-277" href="#__codelineno-46-277"></a>function instrumentHandler(handler, funcName) {
<a id="__codelineno-46-278" name="__codelineno-46-278" href="#__codelineno-46-278"></a>
<a id="__codelineno-46-279" name="__codelineno-46-279" href="#__codelineno-46-279"></a>
<a id="__codelineno-46-280" name="__codelineno-46-280" href="#__codelineno-46-280"></a>
<a id="__codelineno-46-281" name="__codelineno-46-281" href="#__codelineno-46-281"></a>setupOtel(funcName);
<a id="__codelineno-46-282" name="__codelineno-46-282" href="#__codelineno-46-282"></a>
<a id="__codelineno-46-283" name="__codelineno-46-283" href="#__codelineno-46-283"></a>
<a id="__codelineno-46-284" name="__codelineno-46-284" href="#__codelineno-46-284"></a>
<a id="__codelineno-46-285" name="__codelineno-46-285" href="#__codelineno-46-285"></a>return (req, res) =&gt; {
<a id="__codelineno-46-286" name="__codelineno-46-286" href="#__codelineno-46-286"></a>
<a id="__codelineno-46-287" name="__codelineno-46-287" href="#__codelineno-46-287"></a>
<a id="__codelineno-46-288" name="__codelineno-46-288" href="#__codelineno-46-288"></a>
<a id="__codelineno-46-289" name="__codelineno-46-289" href="#__codelineno-46-289"></a>const span = trace.getSpan(context.active());
<a id="__codelineno-46-290" name="__codelineno-46-290" href="#__codelineno-46-290"></a>
<a id="__codelineno-46-291" name="__codelineno-46-291" href="#__codelineno-46-291"></a>
<a id="__codelineno-46-292" name="__codelineno-46-292" href="#__codelineno-46-292"></a>
<a id="__codelineno-46-293" name="__codelineno-46-293" href="#__codelineno-46-293"></a>if (span != null) {
<a id="__codelineno-46-294" name="__codelineno-46-294" href="#__codelineno-46-294"></a>
<a id="__codelineno-46-295" name="__codelineno-46-295" href="#__codelineno-46-295"></a>
<a id="__codelineno-46-296" name="__codelineno-46-296" href="#__codelineno-46-296"></a>
<a id="__codelineno-46-297" name="__codelineno-46-297" href="#__codelineno-46-297"></a>span.updateName(funcName);
<a id="__codelineno-46-298" name="__codelineno-46-298" href="#__codelineno-46-298"></a>
<a id="__codelineno-46-299" name="__codelineno-46-299" href="#__codelineno-46-299"></a>
<a id="__codelineno-46-300" name="__codelineno-46-300" href="#__codelineno-46-300"></a>
<a id="__codelineno-46-301" name="__codelineno-46-301" href="#__codelineno-46-301"></a>}
<a id="__codelineno-46-302" name="__codelineno-46-302" href="#__codelineno-46-302"></a>
<a id="__codelineno-46-303" name="__codelineno-46-303" href="#__codelineno-46-303"></a>
<a id="__codelineno-46-304" name="__codelineno-46-304" href="#__codelineno-46-304"></a>
<a id="__codelineno-46-305" name="__codelineno-46-305" href="#__codelineno-46-305"></a>handler(req, res);
<a id="__codelineno-46-306" name="__codelineno-46-306" href="#__codelineno-46-306"></a>
<a id="__codelineno-46-307" name="__codelineno-46-307" href="#__codelineno-46-307"></a>
<a id="__codelineno-46-308" name="__codelineno-46-308" href="#__codelineno-46-308"></a>
<a id="__codelineno-46-309" name="__codelineno-46-309" href="#__codelineno-46-309"></a>};
<a id="__codelineno-46-310" name="__codelineno-46-310" href="#__codelineno-46-310"></a>
<a id="__codelineno-46-311" name="__codelineno-46-311" href="#__codelineno-46-311"></a>
<a id="__codelineno-46-312" name="__codelineno-46-312" href="#__codelineno-46-312"></a>
<a id="__codelineno-46-313" name="__codelineno-46-313" href="#__codelineno-46-313"></a>}
<a id="__codelineno-46-314" name="__codelineno-46-314" href="#__codelineno-46-314"></a>
<a id="__codelineno-46-315" name="__codelineno-46-315" href="#__codelineno-46-315"></a>
<a id="__codelineno-46-316" name="__codelineno-46-316" href="#__codelineno-46-316"></a>
<a id="__codelineno-46-317" name="__codelineno-46-317" href="#__codelineno-46-317"></a>// This is the function&#39;S entrypoint.
<a id="__codelineno-46-318" name="__codelineno-46-318" href="#__codelineno-46-318"></a>
<a id="__codelineno-46-319" name="__codelineno-46-319" href="#__codelineno-46-319"></a>
<a id="__codelineno-46-320" name="__codelineno-46-320" href="#__codelineno-46-320"></a>
<a id="__codelineno-46-321" name="__codelineno-46-321" href="#__codelineno-46-321"></a>exports.helloWorld = instrumentHandler(myHandler, &quot;helloWorld&quot;);
<a id="__codelineno-46-322" name="__codelineno-46-322" href="#__codelineno-46-322"></a>
<a id="__codelineno-46-323" name="__codelineno-46-323" href="#__codelineno-46-323"></a>
<a id="__codelineno-46-324" name="__codelineno-46-324" href="#__codelineno-46-324"></a>
<a id="__codelineno-46-325" name="__codelineno-46-325" href="#__codelineno-46-325"></a>// make sure the http(s) library is patched before the first call
<a id="__codelineno-46-326" name="__codelineno-46-326" href="#__codelineno-46-326"></a>
<a id="__codelineno-46-327" name="__codelineno-46-327" href="#__codelineno-46-327"></a>
<a id="__codelineno-46-328" name="__codelineno-46-328" href="#__codelineno-46-328"></a>
<a id="__codelineno-46-329" name="__codelineno-46-329" href="#__codelineno-46-329"></a>require(&quot;http&quot;);
<a id="__codelineno-46-330" name="__codelineno-46-330" href="#__codelineno-46-330"></a>
<a id="__codelineno-46-331" name="__codelineno-46-331" href="#__codelineno-46-331"></a>
<a id="__codelineno-46-332" name="__codelineno-46-332" href="#__codelineno-46-332"></a>
<a id="__codelineno-46-333" name="__codelineno-46-333" href="#__codelineno-46-333"></a>require(&quot;https&quot;);
</code></pre></div>
<p>These are the resulting <em>Distributed traces</em> as they show up in Dynatrace.</p>
<p><img alt="The OpenTelemetry JS GCF traces in Dynatrace" src="https://dt-cdn.net/images/otel-gcf-nodejs-1578-425c527e3f.png" /></p>
<h2 id="verify-that-the-traces-are-ingested-into-dynatrace_1">Verify that the traces are ingested into Dynatrace<a class="headerlink" href="#verify-that-the-traces-are-ingested-into-dynatrace_1" title="Permanent link">&para;</a></h2>
<p>A few minutes after invoking your Google Cloud Functions, look for your spans:</p>
<ul>
<li>Go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab.</li>
<li>Your spans will be part of an existing PurePath distributed trace if the root of your call is already being monitored by the OneAgent.
  If your Google Cloud Function is not getting any traffic, there will be no traces.</li>
</ul>
<h2 id="optional-configure-data-capture-to-meet-privacy-requirements_1">(Optional) Configure data capture to meet privacy requirements<a class="headerlink" href="#optional-configure-data-capture-to-meet-privacy-requirements_1" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<hr />
<h2 id="source-gcp-functionsmd">Source: gcp-functions.md<a class="headerlink" href="#source-gcp-functionsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Functions monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions
scraped: 2026-02-17T04:49:26.490830</p>
<hr />
<h1 id="google-cloud-functions-monitoring_2">Google Cloud Functions monitoring<a class="headerlink" href="#google-cloud-functions-monitoring_2" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-functions-monitoring_3">Google Cloud Functions monitoring<a class="headerlink" href="#google-cloud-functions-monitoring_3" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>1-min read</li>
<li>Updated on Jul 19, 2023</li>
</ul>
<p>Google Cloud Functions lets you run your code without provisioning or managing servers. This deployment model is sometimes referred to as "serverless" or "Function as a Service" (FaaS).</p>
<ul>
<li>A Google Cloud Function runs in an application on a container managed by Google. This lets you focus on writing code without worrying about the underlying application or infrastructure.</li>
<li>Google Cloud Functions are ephemeral. This means that the underlying container can be suspended or recycled when there's no request pending.</li>
</ul>
<h2 id="integration">Integration<a class="headerlink" href="#integration" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-nodejs" title="Monitor Google Cloud Functions with OpenTelemetry for Node.js and Dynatrace.">Integrate on Google Cloud Functions Node.js</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-python" title="Monitor Google Cloud Functions with OpenTelemetry for Python and Dynatrace.">Integrate on Google Cloud Functions Python</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-go" title="Monitor Google Cloud Functions with OpenTelemetry for Go and Dynatrace.">Integrate on Google Cloud Functions GoLang</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/opentelemetry-on-gcf-dotnet" title="Monitor Google Cloud Functions with OpenTelemetry for .NET and Dynatrace.">Integrate on Google Cloud Functions .NET</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/cloud-functions-monitoring" title="Monitor Google Cloud Functions and view available metrics.">Google Cloud Functions monitoring</a></li>
</ul>
<h2 id="monitoring-consumption">Monitoring consumption<a class="headerlink" href="#monitoring-consumption" title="Permanent link">&para;</a></h2>
<p>For Google Cloud Functions, monitoring consumption is based on Davis data units. See <a href="/docs/license/monitoring-consumption-classic/davis-data-units/serverless-monitoring" title="Understand how serverless monitoring consumption is calculated.">Serverless monitoring</a> for details.</p>
<h2 id="related-topics_7">Related topics<a class="headerlink" href="#related-topics_7" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="https://www.dynatrace.com/technologies/google-cloud-monitoring/">Google Cloud monitoring√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-deploy-k8md">Source: deploy-k8.md<a class="headerlink" href="#source-deploy-k8md" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Set up the Dynatrace GCP metric and log integration on a new GKE Autopilot cluster
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8
scraped: 2026-02-17T05:11:48.022833</p>
<hr />
<h1 id="set-up-the-dynatrace-gcp-metric-and-log-integration-on-a-new-gke-autopilot-cluster">Set up the Dynatrace GCP metric and log integration on a new GKE Autopilot cluster<a class="headerlink" href="#set-up-the-dynatrace-gcp-metric-and-log-integration-on-a-new-gke-autopilot-cluster" title="Permanent link">&para;</a></h1>
<h1 id="set-up-the-dynatrace-gcp-metric-and-log-integration-on-a-new-gke-autopilot-cluster_1">Set up the Dynatrace GCP metric and log integration on a new GKE Autopilot cluster<a class="headerlink" href="#set-up-the-dynatrace-gcp-metric-and-log-integration-on-a-new-gke-autopilot-cluster_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>15-min read</li>
<li>Updated on Oct 08, 2024</li>
</ul>
<p>Dynatrace version 1.230+</p>
<p>Follow the instructions below to set up Google Cloud monitoring for metrics and logs on a new GKE Autopilot cluster, using Google Cloud Shell. During setup, a new Pub/Sub subscription will be created. GKE will run two containers: a metric forwarder and a log forwarder. After installation, you'll get metrics, logs, dashboards, and alerts for your configured services in Dynatrace.</p>
<p>If you prefer to run the deployment script on an existing standard GKE or GKE Autopilot cluster, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-on-existing-cluster" title="Deploy log and metric monitoring for Google Cloud services on an existing standard GKE or GKE Autopilot cluster">Set up the Dynatrace Google Cloud log and metric integration on an existing GKE cluster</a>.</p>
<p>For other deployment options, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide" title="Other options to set up log and/or metric monitoring for Google Cloud services">Alternative deployment scenarios</a>.</p>
<p>This page describes how to install version 1.0 of the GCP integration on a GKE cluster.</p>
<ul>
<li>If you already have an <a href="/docs/ingest-from/google-cloud-platform/legacy/deployment-k8s-container-legacy" title="Set up log and metric monitoring for GCP services in a Kubernetes container.">earlier version</a> installed, you need to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function" title="Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.">migrate</a>.</li>
</ul>
<h2 id="limitations_2">Limitations<a class="headerlink" href="#limitations_2" title="Permanent link">&para;</a></h2>
<p>Dynatrace GCP log integration supports up to 8 GB of data processing per hour (with base resources√¢¬Ä¬îwithout scaling). With bigger loads, messages will start to be retained in the PubSub Subscription. To measure latency, look for these metrics: <code>Oldest unacked message age</code> and <code>Unacked messages</code>. For scaling recommendations, see the <a href="#scalingguide">scaling guide</a> below.</p>
<p>Dynatrace GCP metric integration supports up to 50 GCP projects with the standard deployment. To monitor larger environments, you need to enable metrics scope. See <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">Monitor multiple GCP projects - Large environments</a>.</p>
<h2 id="prerequisites_9">Prerequisites<a class="headerlink" href="#prerequisites_9" title="Permanent link">&para;</a></h2>
<p>To deploy the integration, you need to make sure the following requirements are met on the machine where you are running the installation.</p>
<ul>
<li>Linux OS only</li>
<li>Internet access</li>
<li>GKE Cluster access</li>
<li>Dynatrace environment access</li>
</ul>
<p>You need to configure the Dynatrace endpoint (environment, cluster or ActiveGate URL) to which the GKE cluster should send metrics and logs. Make sure that you have direct network access or, if there is a proxy or any other component present in between, that communication is not affected.</p>
<h3 id="tools">Tools<a class="headerlink" href="#tools" title="Permanent link">&para;</a></h3>
<p>You can deploy the Dynatrace GCP integration in Google Cloud Shell or in bash.</p>
<p>If you use bash, you need to install:</p>
<ul>
<li><a href="https://dt-url.net/e8110336">Google Cloud SDK√Ø¬ª¬ø</a></li>
<li><a href="https://kubernetes.io/docs/tasks/tools/">kubectl√Ø¬ª¬ø</a></li>
<li><a href="https://helm.sh/docs/intro/install/">helm√Ø¬ª¬ø</a></li>
<li><a href="https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64">jq (version 1.6)√Ø¬ª¬ø</a></li>
<li><a href="https://github.com/mikefarah/yq/releases/download/v4.9.8/yq_linux_amd64">yq (version 4.9.x+)√Ø¬ª¬ø</a></li>
<li>curl</li>
<li>unzip</li>
</ul>
<h3 id="gcp-permissions">GCP permissions<a class="headerlink" href="#gcp-permissions" title="Permanent link">&para;</a></h3>
<p>Running the deployment script requires a list of permissions. You can create a custom role (see below) and use it to deploy <code>dynatrace-gcp-monitor</code>.</p>
<ol>
<li>Create a YAML file named <code>dynatrace-gcp-monitor-helm-deployment-role.yaml</code> with the following content:</li>
</ol>
<p>dynatrace-gcp-monitor-helm-deployment-role.yaml</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>title: Dynatrace GCP Monitor helm deployment role
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>description: Role for Dynatrace GCP Monitor helm and pubsub deployment
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>stage: GA
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a>
<a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a>includedPermissions:
<a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a>
<a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a>
<a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a>
<a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a>- container.clusters.get
<a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a>
<a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a>
<a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a>
<a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a>- container.configMaps.create
<a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a>
<a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a>
<a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a>
<a id="__codelineno-47-25" name="__codelineno-47-25" href="#__codelineno-47-25"></a>- container.configMaps.delete
<a id="__codelineno-47-26" name="__codelineno-47-26" href="#__codelineno-47-26"></a>
<a id="__codelineno-47-27" name="__codelineno-47-27" href="#__codelineno-47-27"></a>
<a id="__codelineno-47-28" name="__codelineno-47-28" href="#__codelineno-47-28"></a>
<a id="__codelineno-47-29" name="__codelineno-47-29" href="#__codelineno-47-29"></a>- container.configMaps.get
<a id="__codelineno-47-30" name="__codelineno-47-30" href="#__codelineno-47-30"></a>
<a id="__codelineno-47-31" name="__codelineno-47-31" href="#__codelineno-47-31"></a>
<a id="__codelineno-47-32" name="__codelineno-47-32" href="#__codelineno-47-32"></a>
<a id="__codelineno-47-33" name="__codelineno-47-33" href="#__codelineno-47-33"></a>- container.configMaps.update
<a id="__codelineno-47-34" name="__codelineno-47-34" href="#__codelineno-47-34"></a>
<a id="__codelineno-47-35" name="__codelineno-47-35" href="#__codelineno-47-35"></a>
<a id="__codelineno-47-36" name="__codelineno-47-36" href="#__codelineno-47-36"></a>
<a id="__codelineno-47-37" name="__codelineno-47-37" href="#__codelineno-47-37"></a>- container.deployments.create
<a id="__codelineno-47-38" name="__codelineno-47-38" href="#__codelineno-47-38"></a>
<a id="__codelineno-47-39" name="__codelineno-47-39" href="#__codelineno-47-39"></a>
<a id="__codelineno-47-40" name="__codelineno-47-40" href="#__codelineno-47-40"></a>
<a id="__codelineno-47-41" name="__codelineno-47-41" href="#__codelineno-47-41"></a>- container.deployments.delete
<a id="__codelineno-47-42" name="__codelineno-47-42" href="#__codelineno-47-42"></a>
<a id="__codelineno-47-43" name="__codelineno-47-43" href="#__codelineno-47-43"></a>
<a id="__codelineno-47-44" name="__codelineno-47-44" href="#__codelineno-47-44"></a>
<a id="__codelineno-47-45" name="__codelineno-47-45" href="#__codelineno-47-45"></a>- container.deployments.get
<a id="__codelineno-47-46" name="__codelineno-47-46" href="#__codelineno-47-46"></a>
<a id="__codelineno-47-47" name="__codelineno-47-47" href="#__codelineno-47-47"></a>
<a id="__codelineno-47-48" name="__codelineno-47-48" href="#__codelineno-47-48"></a>
<a id="__codelineno-47-49" name="__codelineno-47-49" href="#__codelineno-47-49"></a>- container.deployments.update
<a id="__codelineno-47-50" name="__codelineno-47-50" href="#__codelineno-47-50"></a>
<a id="__codelineno-47-51" name="__codelineno-47-51" href="#__codelineno-47-51"></a>
<a id="__codelineno-47-52" name="__codelineno-47-52" href="#__codelineno-47-52"></a>
<a id="__codelineno-47-53" name="__codelineno-47-53" href="#__codelineno-47-53"></a>- container.namespaces.create
<a id="__codelineno-47-54" name="__codelineno-47-54" href="#__codelineno-47-54"></a>
<a id="__codelineno-47-55" name="__codelineno-47-55" href="#__codelineno-47-55"></a>
<a id="__codelineno-47-56" name="__codelineno-47-56" href="#__codelineno-47-56"></a>
<a id="__codelineno-47-57" name="__codelineno-47-57" href="#__codelineno-47-57"></a>- container.namespaces.get
<a id="__codelineno-47-58" name="__codelineno-47-58" href="#__codelineno-47-58"></a>
<a id="__codelineno-47-59" name="__codelineno-47-59" href="#__codelineno-47-59"></a>
<a id="__codelineno-47-60" name="__codelineno-47-60" href="#__codelineno-47-60"></a>
<a id="__codelineno-47-61" name="__codelineno-47-61" href="#__codelineno-47-61"></a>- container.pods.get
<a id="__codelineno-47-62" name="__codelineno-47-62" href="#__codelineno-47-62"></a>
<a id="__codelineno-47-63" name="__codelineno-47-63" href="#__codelineno-47-63"></a>
<a id="__codelineno-47-64" name="__codelineno-47-64" href="#__codelineno-47-64"></a>
<a id="__codelineno-47-65" name="__codelineno-47-65" href="#__codelineno-47-65"></a>- container.pods.list
<a id="__codelineno-47-66" name="__codelineno-47-66" href="#__codelineno-47-66"></a>
<a id="__codelineno-47-67" name="__codelineno-47-67" href="#__codelineno-47-67"></a>
<a id="__codelineno-47-68" name="__codelineno-47-68" href="#__codelineno-47-68"></a>
<a id="__codelineno-47-69" name="__codelineno-47-69" href="#__codelineno-47-69"></a>- container.secrets.create
<a id="__codelineno-47-70" name="__codelineno-47-70" href="#__codelineno-47-70"></a>
<a id="__codelineno-47-71" name="__codelineno-47-71" href="#__codelineno-47-71"></a>
<a id="__codelineno-47-72" name="__codelineno-47-72" href="#__codelineno-47-72"></a>
<a id="__codelineno-47-73" name="__codelineno-47-73" href="#__codelineno-47-73"></a>- container.secrets.delete
<a id="__codelineno-47-74" name="__codelineno-47-74" href="#__codelineno-47-74"></a>
<a id="__codelineno-47-75" name="__codelineno-47-75" href="#__codelineno-47-75"></a>
<a id="__codelineno-47-76" name="__codelineno-47-76" href="#__codelineno-47-76"></a>
<a id="__codelineno-47-77" name="__codelineno-47-77" href="#__codelineno-47-77"></a>- container.secrets.get
<a id="__codelineno-47-78" name="__codelineno-47-78" href="#__codelineno-47-78"></a>
<a id="__codelineno-47-79" name="__codelineno-47-79" href="#__codelineno-47-79"></a>
<a id="__codelineno-47-80" name="__codelineno-47-80" href="#__codelineno-47-80"></a>
<a id="__codelineno-47-81" name="__codelineno-47-81" href="#__codelineno-47-81"></a>- container.secrets.list
<a id="__codelineno-47-82" name="__codelineno-47-82" href="#__codelineno-47-82"></a>
<a id="__codelineno-47-83" name="__codelineno-47-83" href="#__codelineno-47-83"></a>
<a id="__codelineno-47-84" name="__codelineno-47-84" href="#__codelineno-47-84"></a>
<a id="__codelineno-47-85" name="__codelineno-47-85" href="#__codelineno-47-85"></a>- container.secrets.update
<a id="__codelineno-47-86" name="__codelineno-47-86" href="#__codelineno-47-86"></a>
<a id="__codelineno-47-87" name="__codelineno-47-87" href="#__codelineno-47-87"></a>
<a id="__codelineno-47-88" name="__codelineno-47-88" href="#__codelineno-47-88"></a>
<a id="__codelineno-47-89" name="__codelineno-47-89" href="#__codelineno-47-89"></a>- container.serviceAccounts.create
<a id="__codelineno-47-90" name="__codelineno-47-90" href="#__codelineno-47-90"></a>
<a id="__codelineno-47-91" name="__codelineno-47-91" href="#__codelineno-47-91"></a>
<a id="__codelineno-47-92" name="__codelineno-47-92" href="#__codelineno-47-92"></a>
<a id="__codelineno-47-93" name="__codelineno-47-93" href="#__codelineno-47-93"></a>- container.serviceAccounts.delete
<a id="__codelineno-47-94" name="__codelineno-47-94" href="#__codelineno-47-94"></a>
<a id="__codelineno-47-95" name="__codelineno-47-95" href="#__codelineno-47-95"></a>
<a id="__codelineno-47-96" name="__codelineno-47-96" href="#__codelineno-47-96"></a>
<a id="__codelineno-47-97" name="__codelineno-47-97" href="#__codelineno-47-97"></a>- container.serviceAccounts.get
<a id="__codelineno-47-98" name="__codelineno-47-98" href="#__codelineno-47-98"></a>
<a id="__codelineno-47-99" name="__codelineno-47-99" href="#__codelineno-47-99"></a>
<a id="__codelineno-47-100" name="__codelineno-47-100" href="#__codelineno-47-100"></a>
<a id="__codelineno-47-101" name="__codelineno-47-101" href="#__codelineno-47-101"></a>- iam.roles.create
<a id="__codelineno-47-102" name="__codelineno-47-102" href="#__codelineno-47-102"></a>
<a id="__codelineno-47-103" name="__codelineno-47-103" href="#__codelineno-47-103"></a>
<a id="__codelineno-47-104" name="__codelineno-47-104" href="#__codelineno-47-104"></a>
<a id="__codelineno-47-105" name="__codelineno-47-105" href="#__codelineno-47-105"></a>- iam.roles.list
<a id="__codelineno-47-106" name="__codelineno-47-106" href="#__codelineno-47-106"></a>
<a id="__codelineno-47-107" name="__codelineno-47-107" href="#__codelineno-47-107"></a>
<a id="__codelineno-47-108" name="__codelineno-47-108" href="#__codelineno-47-108"></a>
<a id="__codelineno-47-109" name="__codelineno-47-109" href="#__codelineno-47-109"></a>- iam.roles.update
<a id="__codelineno-47-110" name="__codelineno-47-110" href="#__codelineno-47-110"></a>
<a id="__codelineno-47-111" name="__codelineno-47-111" href="#__codelineno-47-111"></a>
<a id="__codelineno-47-112" name="__codelineno-47-112" href="#__codelineno-47-112"></a>
<a id="__codelineno-47-113" name="__codelineno-47-113" href="#__codelineno-47-113"></a>- iam.serviceAccounts.actAs
<a id="__codelineno-47-114" name="__codelineno-47-114" href="#__codelineno-47-114"></a>
<a id="__codelineno-47-115" name="__codelineno-47-115" href="#__codelineno-47-115"></a>
<a id="__codelineno-47-116" name="__codelineno-47-116" href="#__codelineno-47-116"></a>
<a id="__codelineno-47-117" name="__codelineno-47-117" href="#__codelineno-47-117"></a>- iam.serviceAccounts.create
<a id="__codelineno-47-118" name="__codelineno-47-118" href="#__codelineno-47-118"></a>
<a id="__codelineno-47-119" name="__codelineno-47-119" href="#__codelineno-47-119"></a>
<a id="__codelineno-47-120" name="__codelineno-47-120" href="#__codelineno-47-120"></a>
<a id="__codelineno-47-121" name="__codelineno-47-121" href="#__codelineno-47-121"></a>- iam.serviceAccounts.getIamPolicy
<a id="__codelineno-47-122" name="__codelineno-47-122" href="#__codelineno-47-122"></a>
<a id="__codelineno-47-123" name="__codelineno-47-123" href="#__codelineno-47-123"></a>
<a id="__codelineno-47-124" name="__codelineno-47-124" href="#__codelineno-47-124"></a>
<a id="__codelineno-47-125" name="__codelineno-47-125" href="#__codelineno-47-125"></a>- iam.serviceAccounts.list
<a id="__codelineno-47-126" name="__codelineno-47-126" href="#__codelineno-47-126"></a>
<a id="__codelineno-47-127" name="__codelineno-47-127" href="#__codelineno-47-127"></a>
<a id="__codelineno-47-128" name="__codelineno-47-128" href="#__codelineno-47-128"></a>
<a id="__codelineno-47-129" name="__codelineno-47-129" href="#__codelineno-47-129"></a>- iam.serviceAccounts.setIamPolicy
<a id="__codelineno-47-130" name="__codelineno-47-130" href="#__codelineno-47-130"></a>
<a id="__codelineno-47-131" name="__codelineno-47-131" href="#__codelineno-47-131"></a>
<a id="__codelineno-47-132" name="__codelineno-47-132" href="#__codelineno-47-132"></a>
<a id="__codelineno-47-133" name="__codelineno-47-133" href="#__codelineno-47-133"></a>- pubsub.subscriptions.create
<a id="__codelineno-47-134" name="__codelineno-47-134" href="#__codelineno-47-134"></a>
<a id="__codelineno-47-135" name="__codelineno-47-135" href="#__codelineno-47-135"></a>
<a id="__codelineno-47-136" name="__codelineno-47-136" href="#__codelineno-47-136"></a>
<a id="__codelineno-47-137" name="__codelineno-47-137" href="#__codelineno-47-137"></a>- pubsub.subscriptions.get
<a id="__codelineno-47-138" name="__codelineno-47-138" href="#__codelineno-47-138"></a>
<a id="__codelineno-47-139" name="__codelineno-47-139" href="#__codelineno-47-139"></a>
<a id="__codelineno-47-140" name="__codelineno-47-140" href="#__codelineno-47-140"></a>
<a id="__codelineno-47-141" name="__codelineno-47-141" href="#__codelineno-47-141"></a>- pubsub.subscriptions.list
<a id="__codelineno-47-142" name="__codelineno-47-142" href="#__codelineno-47-142"></a>
<a id="__codelineno-47-143" name="__codelineno-47-143" href="#__codelineno-47-143"></a>
<a id="__codelineno-47-144" name="__codelineno-47-144" href="#__codelineno-47-144"></a>
<a id="__codelineno-47-145" name="__codelineno-47-145" href="#__codelineno-47-145"></a>- pubsub.topics.attachSubscription
<a id="__codelineno-47-146" name="__codelineno-47-146" href="#__codelineno-47-146"></a>
<a id="__codelineno-47-147" name="__codelineno-47-147" href="#__codelineno-47-147"></a>
<a id="__codelineno-47-148" name="__codelineno-47-148" href="#__codelineno-47-148"></a>
<a id="__codelineno-47-149" name="__codelineno-47-149" href="#__codelineno-47-149"></a>- pubsub.topics.create
<a id="__codelineno-47-150" name="__codelineno-47-150" href="#__codelineno-47-150"></a>
<a id="__codelineno-47-151" name="__codelineno-47-151" href="#__codelineno-47-151"></a>
<a id="__codelineno-47-152" name="__codelineno-47-152" href="#__codelineno-47-152"></a>
<a id="__codelineno-47-153" name="__codelineno-47-153" href="#__codelineno-47-153"></a>- pubsub.topics.getIamPolicy
<a id="__codelineno-47-154" name="__codelineno-47-154" href="#__codelineno-47-154"></a>
<a id="__codelineno-47-155" name="__codelineno-47-155" href="#__codelineno-47-155"></a>
<a id="__codelineno-47-156" name="__codelineno-47-156" href="#__codelineno-47-156"></a>
<a id="__codelineno-47-157" name="__codelineno-47-157" href="#__codelineno-47-157"></a>- pubsub.topics.list
<a id="__codelineno-47-158" name="__codelineno-47-158" href="#__codelineno-47-158"></a>
<a id="__codelineno-47-159" name="__codelineno-47-159" href="#__codelineno-47-159"></a>
<a id="__codelineno-47-160" name="__codelineno-47-160" href="#__codelineno-47-160"></a>
<a id="__codelineno-47-161" name="__codelineno-47-161" href="#__codelineno-47-161"></a>- pubsub.topics.setIamPolicy
<a id="__codelineno-47-162" name="__codelineno-47-162" href="#__codelineno-47-162"></a>
<a id="__codelineno-47-163" name="__codelineno-47-163" href="#__codelineno-47-163"></a>
<a id="__codelineno-47-164" name="__codelineno-47-164" href="#__codelineno-47-164"></a>
<a id="__codelineno-47-165" name="__codelineno-47-165" href="#__codelineno-47-165"></a>- pubsub.topics.update
<a id="__codelineno-47-166" name="__codelineno-47-166" href="#__codelineno-47-166"></a>
<a id="__codelineno-47-167" name="__codelineno-47-167" href="#__codelineno-47-167"></a>
<a id="__codelineno-47-168" name="__codelineno-47-168" href="#__codelineno-47-168"></a>
<a id="__codelineno-47-169" name="__codelineno-47-169" href="#__codelineno-47-169"></a>- resourcemanager.projects.get
<a id="__codelineno-47-170" name="__codelineno-47-170" href="#__codelineno-47-170"></a>
<a id="__codelineno-47-171" name="__codelineno-47-171" href="#__codelineno-47-171"></a>
<a id="__codelineno-47-172" name="__codelineno-47-172" href="#__codelineno-47-172"></a>
<a id="__codelineno-47-173" name="__codelineno-47-173" href="#__codelineno-47-173"></a>- resourcemanager.projects.getIamPolicy
<a id="__codelineno-47-174" name="__codelineno-47-174" href="#__codelineno-47-174"></a>
<a id="__codelineno-47-175" name="__codelineno-47-175" href="#__codelineno-47-175"></a>
<a id="__codelineno-47-176" name="__codelineno-47-176" href="#__codelineno-47-176"></a>
<a id="__codelineno-47-177" name="__codelineno-47-177" href="#__codelineno-47-177"></a>- resourcemanager.projects.setIamPolicy
<a id="__codelineno-47-178" name="__codelineno-47-178" href="#__codelineno-47-178"></a>
<a id="__codelineno-47-179" name="__codelineno-47-179" href="#__codelineno-47-179"></a>
<a id="__codelineno-47-180" name="__codelineno-47-180" href="#__codelineno-47-180"></a>
<a id="__codelineno-47-181" name="__codelineno-47-181" href="#__codelineno-47-181"></a>- serviceusage.services.enable
<a id="__codelineno-47-182" name="__codelineno-47-182" href="#__codelineno-47-182"></a>
<a id="__codelineno-47-183" name="__codelineno-47-183" href="#__codelineno-47-183"></a>
<a id="__codelineno-47-184" name="__codelineno-47-184" href="#__codelineno-47-184"></a>
<a id="__codelineno-47-185" name="__codelineno-47-185" href="#__codelineno-47-185"></a>- serviceusage.services.get
<a id="__codelineno-47-186" name="__codelineno-47-186" href="#__codelineno-47-186"></a>
<a id="__codelineno-47-187" name="__codelineno-47-187" href="#__codelineno-47-187"></a>
<a id="__codelineno-47-188" name="__codelineno-47-188" href="#__codelineno-47-188"></a>
<a id="__codelineno-47-189" name="__codelineno-47-189" href="#__codelineno-47-189"></a>- serviceusage.services.list
<a id="__codelineno-47-190" name="__codelineno-47-190" href="#__codelineno-47-190"></a>
<a id="__codelineno-47-191" name="__codelineno-47-191" href="#__codelineno-47-191"></a>
<a id="__codelineno-47-192" name="__codelineno-47-192" href="#__codelineno-47-192"></a>
<a id="__codelineno-47-193" name="__codelineno-47-193" href="#__codelineno-47-193"></a>- serviceusage.services.use
</code></pre></div>
<p>Each group of permissions is used to handle the different resources included in the integration. Creation and access are for new resources, update is for reusing existing resources, and deletion is for uninstalling.</p>
<ul>
<li>container.configMaps: for mapping secrets and other variables used by the containers.</li>
<li>container.deployments: for the K8s' deployment within the cluster (which includes the pods, containers, etc.).</li>
<li>container.namespaces: for the K8s namespace in which we are deploying the resources.</li>
<li>container.pods: for the K8s pods.</li>
<li>container.secrets: for the K8s secrets in which to store the data-sensitive variables.</li>
<li>container.serviceAccounts: for the SA to be taken in the K8s context.</li>
<li>iam.roles: for the necessary permissions for data collection.</li>
<li>iam.serviceAccounts: for the general context SA.</li>
<li>resourcemanager.projects: for handling the project in which we are deploying our integration.</li>
<li>serviceusage.services: for handling the services' APIs.</li>
<li>pubsub.subscriptions: for the PubSub subscription we are using to collect and ingest logs.</li>
<li>
<p>pubsub.topics: for the PubSub topic we are using to collect and ingest logs.</p>
</li>
<li>
<p>Run the command below, replacing <code>&lt;your_project_ID&gt;</code> with the project ID where you want to deploy the Dynatrace GCP integration.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>gcloud iam roles create dynatrace_monitor.helm_deployment --project=&lt;your_project_ID&gt; --file=dynatrace-gcp-monitor-helm-deployment-role.yaml
</code></pre></div>
<p>Be sure to add this role to your GCP user. For details, see <a href="https://dt-url.net/vx03vid">Grant or revoke a single role√Ø¬ª¬ø</a>.</p>
<h3 id="configure-log-export">Configure log export<a class="headerlink" href="#configure-log-export" title="Permanent link">&para;</a></h3>
<ol>
<li>Run the following shell script in the GCP project you've selected for deployment.</li>
</ol>
<p>Be sure to replace <code>&lt;your-subscription-name&gt;</code> and <code>&lt;your-topic-name&gt;</code> with your own values.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>wget https://raw.githubusercontent.com/dynatrace-oss/dynatrace-gcp-monitor/master/scripts/deploy-pubsub.sh
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>chmod +x deploy-pubsub.sh
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a>
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>./deploy-pubsub.sh --topic-name &lt;your-topic-name&gt; --subscription-name &lt;your-subscription-name&gt;
</code></pre></div>
<ol>
<li>Configure <a href="https://dt-url.net/4743r02">log export√Ø¬ª¬ø</a> to send the desired logs to the GCP Pub/Sub topic created above.</li>
</ol>
<h3 id="dynatrace-permissions">Dynatrace permissions<a class="headerlink" href="#dynatrace-permissions" title="Permanent link">&para;</a></h3>
<p>You need to create a token with a set of permissions.</p>
<ol>
<li>Go to <strong>Access tokens</strong>.</li>
<li>Select <strong>Generate new token</strong>.</li>
<li>Enter a name for your token.</li>
<li>Under <strong>Template</strong>, select <code>GCP Services Monitoring</code>.</li>
<li>Select <strong>Generate</strong>.</li>
<li>Copy the generated token to the clipboard. Store the token in a password manager for future use.</li>
</ol>
<p>Alternatively, you can create the token and add permissions manually.</p>
<p>Add manually</p>
<p><a href="/docs/manage/identity-access-management/access-tokens-and-oauth-clients/access-tokens#create-api-token" title="Learn the concept of an access token and its scopes.">Create an API token</a> and <a href="/docs/dynatrace-api/basics/dynatrace-api-authentication#token-permissions" title="Find out how to get authenticated to use the Dynatrace API.">enable the following permissions</a>:</p>
<ul>
<li>
<p>API v1:</p>
</li>
<li>
<p><strong>Read configuration</strong></p>
</li>
<li><strong>Write configuration</strong></li>
<li>
<p>API v2:</p>
</li>
<li>
<p><strong>Ingest metrics</strong></p>
</li>
<li><strong>Read extensions</strong></li>
<li><strong>Write extensions</strong></li>
<li><strong>Read extensions monitoring configuration</strong></li>
<li><strong>Write extensions monitoring configuration</strong></li>
<li><strong>Read extensions environment configuration</strong></li>
<li><strong>Write extensions environment configuration</strong></li>
<li><strong>Ingest logs</strong></li>
<li><strong>Manage metadata of Hub items</strong></li>
<li><strong>Read Hub related data</strong></li>
<li><strong>Install and update Hub items</strong></li>
</ul>
<p>To monitor logs from multiple projects, you need to create <strong>Log Routing Sinks</strong> in each source project selecting as a destination for your main project (in which you also deployed the integration and the PubSub Topic and Subscription).
For more information, see <a href="https://dt-url.net/cl038gj">Route logs to supported destinations√Ø¬ª¬ø</a>.</p>
<h3 id="log-ingestion">Log ingestion<a class="headerlink" href="#log-ingestion" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Determine where log ingestion will be performed, according to your deployment. This distinction is important when configuring the <a href="#param">parameters</a> for this integration.</p>
</li>
<li>
<p><strong>For SaaS deployments:</strong> SaaS log ingest, where log ingestion is performed directly through the Cluster API. Recommended</p>
</li>
<li><strong>For Managed deployments:</strong> You can use an existing ActiveGate for log ingestion. For information on how to deploy it, see <a href="/docs/ingest-from/dynatrace-activegate/installation" title="Learn how to configure ActiveGate">ActiveGate installation</a>.</li>
</ul>
<p>Because of GCP's implementation of Cloud Function 2nd gen, logs from those resources will be linked to the underlying Cloud Run instances. Both extensions will have to be enabled.</p>
<p>To learn more, visit <a href="https://dt-url.net/b6038q5">Google Cloud Functions version comparison√Ø¬ª¬ø</a>.</p>
<h2 id="install">Install<a class="headerlink" href="#install" title="Permanent link">&para;</a></h2>
<p>Complete the steps below to finish your setup.</p>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Download the Helm deployment package in Google Cloud Shell</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#dwld "Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Configure parameter values</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#param "Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Run the deployment script</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#script "Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.")</p>
<h3 id="step-1-download-the-helm-deployment-package-in-google-cloud-shell">Step 1 Download the Helm deployment package in Google Cloud Shell<a class="headerlink" href="#step-1-download-the-helm-deployment-package-in-google-cloud-shell" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>wget -q &quot;https://github.com/dynatrace-oss/dynatrace-gcp-monitor/releases/latest/download/helm-deployment-package.tar&quot;; tar -xvf helm-deployment-package.tar; chmod +x helm-deployment-package/deploy-helm.sh
</code></pre></div>
<h3 id="step-2-configure-parameter-values">Step 2 Configure parameter values<a class="headerlink" href="#step-2-configure-parameter-values" title="Permanent link">&para;</a></h3>
<ol>
<li>The Helm deployment package contains a <code>values.yaml</code> file with the necessary configuration for this deployment. Go to <code>helm-deployment-package/dynatrace-gcp-monitor</code> and edit the <code>values.yaml</code> file, setting the required and optional parameter values as follows.</li>
</ol>
<p>You might want to store this file somewhere for future updates, since it will be needed in case of redeployments. Also, keep in mind that its schema can change. In such case, you should use the new file and only copy over the parameter values.</p>
<p><strong>Parameter name</strong></p>
<p><strong>Description</strong></p>
<p><strong>Default value</strong></p>
<p><code>parallelProcesses</code></p>
<p>Optional Number of parallel processes to run the whole log monitoring loop</p>
<p><code>1</code></p>
<p><code>numberOfConcurrentLogForwardingLoops</code></p>
<p>Optional Number of workers pulling logs from pubsub concurrently and pushing them to Dynatrace</p>
<p><code>5</code></p>
<p><code>numberOfConcurrentMessagePullCoroutines</code></p>
<p>Optional Number of concurrent coroutines to pull messages from pub/sub</p>
<p><code>10</code></p>
<p><code>numberOfConcurrentPushCoroutines</code></p>
<p>Optional Number of concurrent coroutines to push messages to Dynatrace</p>
<p><code>5</code></p>
<p><code>gcpProjectId</code></p>
<p>Required The ID of the GCP project you've selected for deployment.</p>
<p>Your current project ID</p>
<p><code>deploymentType</code></p>
<p>Required Leave to <code>all</code>.</p>
<p><code>all</code></p>
<p><code>dynatraceAccessKey</code></p>
<p>Required Your <a href="/docs/manage/identity-access-management/access-tokens-and-oauth-clients/access-tokens#create-api-token" title="Learn the concept of an access token and its scopes.">Dynatrace API token</a> with the <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#api" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">required permissions</a></p>
<p><code>dynatraceUrl</code></p>
<p>RequiredFor SaaS log/metric ingestion, it's your environment URL (<code>https://&lt;your-environment-id&gt;.live.dynatrace.com</code>).</p>
<p><code>logsSubscriptionId</code></p>
<p>Required The ID of your log Sink Pub/Sub subscription. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#pubsub" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Configure log export</a>.</p>
<p><code>dynatraceLogIngestUrl</code></p>
<p>Optional You can set it if you want to ingest logs separately from metrics.For SaaS log ingestion, it's your environment URL (<code>https://&lt;your_environment_ID&gt;.live.dynatrace.com</code>).</p>
<p><code>dynatraceAccessKeySecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from GCP Secret Manager, instead of using <code>dynatraceAccessKey</code>.</p>
<p><code>dynatraceUrlSecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from GCP Secret Manager, instead of using <code>dynatraceUrl</code>.</p>
<p><code>dynatraceLogIngestUrlSecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from GCP Secret Manager, instead of using <code>dynatraceLogIngestUrl</code>.</p>
<p><code>dtSecurityContext</code></p>
<p>Optional Assign the attribute value used for data segmentation, analysis, and permission mapping within the Dynatrace platform. Refer to <a href="/docs/manage/identity-access-management/use-cases/access-security-context" title="Grant access to entities with security context">Grant access to entities with security context</a> for more information. If left empty, the value of <code>gcpProjectId</code> will be assigned automatically.</p>
<p>Value of <code>gcpProjectId</code></p>
<p><code>requireValidCertificate</code></p>
<p>Optional If set to <code>true</code>, Dynatrace requires the SSL certificate of your Dynatrace environment.For SaaS log ingestion, we recommend leaving the default value.</p>
<p><code>true</code></p>
<p><code>selfMonitoringEnabled</code></p>
<p>Optional Send custom metrics to GCP to quickly diagnose if <code>dynatrace-gcp-monitor</code> processes and sends metrics/logs to Dynatrace properly. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Self-monitoring metrics for the Dynatrace GCP integration</a>.</p>
<p><code>false</code></p>
<p><code>serviceAccount</code></p>
<p>Optional Name of the service account to be created</p>
<p><code>dockerImage</code></p>
<p>OptionalDynatrace GCP Monitor docker image. We recommend using the default value, but you can adapt it if needed.</p>
<p><code>dynatrace/dynatrace-gcp-monitor:v1-latest</code></p>
<p><code>logIngestContentMaxLength</code></p>
<p>Optional The maximum content length of a log event. Should be less than or equal to the setting on your Dynatrace environment.</p>
<p><code>8192</code></p>
<p><code>logIngestAttributeValueMaxLength</code></p>
<p>Optional The maximum length of the log event attribute value. If it exceeds the server limit, content will be truncated.</p>
<p><code>250</code></p>
<p><code>logIngestRequestMaxEvents</code></p>
<p>Optional The maximum number of log events in a single payload to the logs ingestion endpoint. If it exceeds the server limit, payload will be rejected with code <code>413</code>.</p>
<p><code>5000</code></p>
<p><code>logIngestRequestMaxSize</code></p>
<p>Optional The maximum size in bytes of a single payload to the logs ingestion endpoint. If it exceeds the server limit, payload will be rejected with code <code>413</code>.</p>
<p><code>1048576</code></p>
<p><code>logIngestEventMaxAgeSeconds</code></p>
<p>Optional Determines the maximum age of a forwarded log event. Should be less than or equal to the setting on your Dynatrace environment.</p>
<p><code>86400</code></p>
<p><code>printMetricIngestInput</code></p>
<p>Optional If set to <code>true</code>, the GCP Monitor outputs the lines of metrics to stdout.</p>
<p><code>false</code></p>
<p><code>serviceUsageBooking</code></p>
<p>Optional Service usage booking is used for metrics and determines a caller-specified project for quota and billing purposes. If set to <code>source</code>, monitoring API calls are booked in the project where the Kubernetes container is running. If set to <code>destination</code>, monitoring API calls are booked in the project that is monitored. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">Monitor multiple GCP projects - Standard environments - Step 4</a>.</p>
<p><code>source</code></p>
<p><code>useProxy</code></p>
<p>Optional Depending on the value you set for this flag, the GCP Monitor will use the following proxy settings: Dynatrace (set to <code>DT_ONLY</code>), GCP API (set to <code>GCP_ONLY</code>), or both (set to <code>ALL</code>).</p>
<p>By default, proxy settings are not used.</p>
<p><code>httpProxy</code></p>
<p>Optional The proxy HTTP address; use this flag in conjunction with <code>USE_PROXY</code>.</p>
<p><code>httpsProxy</code></p>
<p>Optional The proxy HTTPS address; use this flag in conjunction with <code>USE_PROXY</code>.</p>
<p><code>gcpServicesYaml</code></p>
<p>Optional Configuration file for GCP services.</p>
<p><code>queryInterval</code></p>
<p>Optional Metrics polling interval in minutes. Allowed values: <code>1</code> - <code>6</code></p>
<p><code>3</code></p>
<p><code>vpcNetwork</code></p>
<p>Optional Existing VPC Network where the autopilot cluster will be deployed. Shared VPC is not supported.</p>
<p><code>default</code></p>
<p><code>useCustomSubnet</code></p>
<p>Optional Set to <code>true</code> only if you want to use a custom mode VPC network.If set to <code>true</code>, you'll need to pass the <code>customSubnetName</code> parameter.</p>
<p><code>false</code></p>
<p><code>customSubnetName</code></p>
<p>Required Only if <code>useCustomSubnet</code> is set to <code>true</code>.<br />
   Set this value to the subnet name you want to deploy the Google Cloud Monitor in.</p>
<p><code>""</code></p>
<p><code>scopingProjectSupportEnabled</code></p>
<p>Optional Set to <code>true</code> when metrics scope is configured, so metrics will be collected from all projects added to the metrics scope. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">Monitor multiple GCP projects - Large environments</a>.</p>
<p><code>false</code></p>
<p><code>excludedProjects</code></p>
<p>Optional Comma-separated list of projects to be excluded from monitoring (for example, <code>&lt;project_A&gt;,&lt;project_B&gt;</code>)</p>
<p><code>excludedMetricsAndDimensions</code></p>
<p>Optional Yaml formatted list of metrics and their dimensions to be excluded for monitoring.</p>
<p><code>metricAutodiscovery</code></p>
<p>Optional If set to <code>true</code>, the GCP Monitor will run metric auto-discovery mode, expanding your options for selecting metrics to monitor. For more information, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/gcp-autodiscovery" title="Push any metrics to Dynatrace from Google Cloud projects.">Monitor GCP projects using auto-discovery</a>.</p>
<p><code>false</code></p>
<p><code>clusterIpv4Cidr</code></p>
<p>Optional Set the IP address range for the pods in this cluster in CIDR notation, if you want to use a custom range.</p>
<p><code>servicesIpv4Cidr</code></p>
<p>Optional Set the IP range for the services IPs. It can be specified as a netmask size or as in the CIDR notion.</p>
<p><code>useCustomMasterCidr</code></p>
<p>Optional If set to <code>true</code>, you can specify the IPv4 CIDR range to use for the master network.</p>
<p><code>false</code></p>
<p><code>masterIpv4Cidr</code></p>
<p>Optional IPv4 CIDR range requires the <code>useCustomMasterCidr</code> value to be <code>true</code> in order to use for the master network.
2. Choose which services you want Dynatrace to monitor.</p>
<p>By default, the Dynatrace GCP integration starts monitoring a set of selected services. Go to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a> for a list of supported services.</p>
<p>For DDU consumption information, see <a href="#ddu">Monitoring consumption</a>.</p>
<h3 id="step-3-run-the-deployment-script">Step 3 Run the deployment script<a class="headerlink" href="#step-3-run-the-deployment-script" title="Permanent link">&para;</a></h3>
<p>The deployment script will automatically create the new GKE Autopilot cluster named <code>dynatrace-gcp-monitor</code> and deploy the installation to it. The latest versions of GCP extensions will be uploaded.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>cd helm-deployment-package
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>./deploy-helm.sh --create-autopilot-cluster
</code></pre></div>
<p>To set a different name for the new cluster, run the command below instead, making sure to replace the placeholder (<code>&lt;name-of-new-cluster&gt;</code>) with your preferred name.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>cd helm-deployment-package
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>./deploy-helm.sh --create-autopilot-cluster --autopilot-cluster-name &lt;name-of-new-cluster&gt;
</code></pre></div>
<p>To keep the existing versions of present extensions and install the latest versions for the rest of the selected extensions, if they are not present, run the command below instead.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>cd helm-deployment-package
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>./deploy-helm.sh --create-autopilot-cluster --without-extensions-upgrade
</code></pre></div>
<h2 id="verify-installation">Verify installation<a class="headerlink" href="#verify-installation" title="Permanent link">&para;</a></h2>
<p>To check whether installation was successful</p>
<ol>
<li>Check if the container is running.</li>
</ol>
<p>After the installation, it may take couple of minutes until the container is up and running.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>kubectl -n dynatrace get pods
</code></pre></div>
2. Check the container logs for errors or exceptions. You have two options:</p>
<p>In the Kubernetes CLI</p>
<p>In your GCP console</p>
<p>Run the following commands.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>kubectl -n dynatrace logs -l app=dynatrace-gcp-monitor -c dynatrace-gcp-monitor-metrics
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>kubectl -n dynatrace logs -l app=dynatrace-gcp-monitor -c dynatrace-gcp-monitor-logs
</code></pre></div>
<p>To check the container logs for errors in your GCP console</p>
<ol>
<li>Go to <strong>Logs explorer</strong>.</li>
<li>
<p>Use the filters below to get metric and/or log ingest logs from the Kubernetes container:</p>
</li>
<li>
<p><code>resource.type="k8s_container"</code></p>
</li>
<li><code>resource.labels.container_name="dynatrace-gcp-monitor-metrics"</code> (for metric ingest logs)</li>
<li><code>resource.labels.container_name="dynatrace-gcp-monitor-logs"</code> (for log ingest logs)</li>
<li>Check if dashboards are imported.</li>
</ol>
<p>Go to <img alt="Dashboards Classic" src="https://dt-cdn.net/images/dashboards-classic-512-15764940e8.png" title="Dashboards Classic" /> <strong>Dashboards Classic</strong> and filter by <strong>Tag</strong> for <code>Google Cloud</code>. A number of dashboards for Google Cloud Services should be available.</p>
<h2 id="choose-services-for-metrics-monitoring">Choose services for metrics monitoring<a class="headerlink" href="#choose-services-for-metrics-monitoring" title="Permanent link">&para;</a></h2>
<h3 id="services-enabled-by-default">Services enabled by default<a class="headerlink" href="#services-enabled-by-default" title="Permanent link">&para;</a></h3>
<p>Monitoring of following services will be enabled during deployment of GCP Monitor:</p>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-apis-monitoring" title="Monitor Google Cloud APIs and view available metrics.">Google APIs</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-app-engine/app-engine-monitoring" title="Monitor Google App Engine and view available metrics.">Google App Engine</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-bigquery-monitoring" title="Monitor Google BigQuery and view available metrics.">Google BigQuery</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/cloud-functions-monitoring" title="Monitor Google Cloud Functions and view available metrics.">Google Cloud Functions</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun/cloud-run-monitoring" title="Monitor Google Cloud Run and view available metrics.">Google Cloud Run</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-storage-monitoring" title="Monitor Google Cloud Storage and view available metrics.">Google Cloud Storage</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-compute-engine/compute-engine-monitoring" title="Monitor Google Compute Engine and view available metrics.">Google Compute Engine</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-in-datastore-mode-monitoring" title="Monitor Google Cloud Firestore in Datastore mode and view available metrics.">Google Firestore in Datastore mode</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-monitoring" title="Monitor Google Filestore and view available metrics.">Google Filestore</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-gke/google-kubernetes-engine-monitoring" title="Monitor Google Kubernetes Engine and view available metrics.">Google Kubernetes Engine</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-load-balancing-monitoring" title="Monitor Google Cloud Load Balancing and view available metrics.">Google Cloud Load Balancing</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-monitoring" title="Monitor Google Cloud Pub/Sub and view available metrics.">Google Cloud Pub/Sub</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-lite-monitoring" title="Monitor Google Cloud Pub/Sub Lite and view available metrics.">Google Cloud Pub/Sub Lite</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-sql" title="Monitor Google Cloud SQL and view available metrics.">Google Cloud SQL</a></li>
</ul>
<p>There are more service integrations available, but need to be enabled. Go to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a> for a list of supported services. The next section describes how to manage them. For an alternative approach, consider leveraging <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/gcp-autodiscovery" title="Push any metrics to Dynatrace from Google Cloud projects.">auto-discovery</a> to extend your metric coverage.</p>
<h3 id="manage-enabled-services">Manage enabled services<a class="headerlink" href="#manage-enabled-services" title="Permanent link">&para;</a></h3>
<p>You can manage enabled services via Dynatrace Hub.</p>
<p>Filter for "gcp"√¢¬Ä¬îyou'll find annotations in the results for items that are already available in your environment.</p>
<p>To enable a new service, select it in Hub and then install it.</p>
<p>You can also disable a service via Dynatrace Hub.</p>
<p>To see if the services need updating, open them in Hub and check release notes. The updates can include new metrics, new assets like dashboards, or other changes.</p>
<p>All changes to enabled services are applied to GCP Monitor within few minutes.</p>
<h4 id="feature-sets-available-metrics">Feature sets &amp; available metrics<a class="headerlink" href="#feature-sets-available-metrics" title="Permanent link">&para;</a></h4>
<p>To see what metrics are included for specific service, check <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a>. By default, only <code>defaultMetrics</code> feature set is enabled. To enable additional feature sets, you have to uncomment them in <code>values.yaml</code> file and redeploy whole GCP Monitor.</p>
<p>Current configuration of feature sets can be found in cluster's ConfigMap named <code>dynatrace-gcp-function-config</code>.</p>
<h4 id="advanced-scope-management">Advanced scope management<a class="headerlink" href="#advanced-scope-management" title="Permanent link">&para;</a></h4>
<p>To further refine monitoring scope, you can use <code>filter_conditions</code> field in <code>values.yaml</code> file. This requires GCP Monitor to be redeployed. See <a href="https://cloud.google.com/monitoring/api/v3/filters?hl=en_US">GCP Monitoring filters√Ø¬ª¬ø</a> for syntax.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>filter_conditions:
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>resource.labels.location = &quot;us-central1-c&quot; AND resource.labels.namespace_name = &quot;dynatrace&quot;
</code></pre></div>
<h2 id="enable-alerting">Enable alerting<a class="headerlink" href="#enable-alerting" title="Permanent link">&para;</a></h2>
<p>To activate alerting, you need to enable metric events for alerting in Dynatrace.</p>
<p>To enable metric events</p>
<ol>
<li>Go to <strong>Settings</strong>.</li>
<li>In <strong>Anomaly detection</strong>, select <strong>Metric events</strong>.</li>
<li>Filter for GCP alerts and turn on <strong>On/Off</strong> for the alerts you want to activate.</li>
</ol>
<h2 id="view-metrics-and-logs">View metrics and logs<a class="headerlink" href="#view-metrics-and-logs" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can:</p>
<ul>
<li>See metrics from monitored services: go to <strong>Metrics</strong> and filter by <code>gcp</code>.</li>
<li>View and analyze GCP logs: go to <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong> and, to look for GCP logs, filter by <code>cloud.provider: gcp</code>.</li>
</ul>
<h2 id="change-deployment-settings">Change deployment settings<a class="headerlink" href="#change-deployment-settings" title="Permanent link">&para;</a></h2>
<h3 id="change-parameters-from-valuesyaml">Change parameters from <code>values.yaml</code><a class="headerlink" href="#change-parameters-from-valuesyaml" title="Permanent link">&para;</a></h3>
<p>To load a new <code>values.yaml</code> file, you need to upgrade your Helm release.</p>
<p>To update your Helm release</p>
<ol>
<li>Find out what Helm release version you're using.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>helm ls -n dynatrace
</code></pre></div>
2. Run the command below, making sure to replace <code>&lt;your-helm-release&gt;</code> with value from previous step.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>helm upgrade &lt;your-helm-release&gt; dynatrace-gcp-monitor -n dynatrace
</code></pre></div>
<p>For details, see <a href="https://helm.sh/docs/helm/helm_upgrade/">Helm upgrade√Ø¬ª¬ø</a>.</p>
<h3 id="change-deployment-type">Change deployment type<a class="headerlink" href="#change-deployment-type" title="Permanent link">&para;</a></h3>
<p>To change the deployment type (<code>all</code>, <code>metrics</code>, or <code>logs</code>)</p>
<ol>
<li>Find out what helm release version you're using.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>helm ls -n dynatrace
</code></pre></div>
2. Uninstall the release.</p>
<p>Be sure to replace <code>&lt;your-helm-release&gt;</code> with the release name from the previous output.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>helm uninstall &lt;your-helm-release&gt; -n dynatrace
</code></pre></div>
3. Edit <code>deploymentType</code> in <code>values.yaml</code> with the new value and save the file.
4. Run the deployment command again. For details, see <a href="#script">Run the deployment script</a>.</p>
<h2 id="verification">Verification<a class="headerlink" href="#verification" title="Permanent link">&para;</a></h2>
<p>To investigate potential deployment and connectivity issues</p>
<ol>
<li><a href="#verify">Verify installation</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Enable self-monitoring</a> Optional</li>
<li>
<p>Check the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file created during the installation process.</p>
</li>
<li>
<p>This file will be created each time the installation script runs.</p>
</li>
<li>The debug information won't contain sensitive data such as the Dynatrace access key.</li>
<li>
<p>If you are contacting a Dynatrace product expert via live chat:</p>
</li>
<li>
<p>Make sure to provide the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file described in the previous step.</p>
</li>
<li>
<p>Provide version information.</p>
<ul>
<li>For issues during installation, check the <code>version.txt</code> file.</li>
<li>For issues during runtime, <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">check container logs</a>.</li>
</ul>
</li>
</ol>
<h2 id="scaling-guide-for-logs">Scaling guide for logs<a class="headerlink" href="#scaling-guide-for-logs" title="Permanent link">&para;</a></h2>
<p>The default container with 1.25vCPU and 1Gi (with default configuration) can handle 8 GB of log throughput per hour. Achieving more throughput requires allocating more resources to the container (scale up), increasing the number of container replicas (scale out), and changing configuration numbers to use allocated resources efficiently. All config variables can be found and changed in <code>dynatrace-gcp-monitor-config</code>.</p>
<p>The following table presents tested configuration and achieved throughput with scaled up&amp;out containers:</p>
<p>Achieved throughput</p>
<p>Machine resources</p>
<p>Replica sets</p>
<p>Config variable values</p>
<p>~8MB/s =&gt; ~480MB/min</p>
<p>4vCPU 4Gi RAM</p>
<p>1</p>
<p><code>PARALLEL_PROCESSES=4</code>,<br />
<code>NUMBER_OF_CONCURRENT_MESSAGE_PULL_COROUTINES = 30</code>,<br />
<code>NUMBER_OF_CONCURRENT_PUSH_COROUTINES=20</code></p>
<p>~25MB/s =&gt; ~1.5GB/min =&gt; ~2TB/day</p>
<p>4vCPU 4Gi RAM</p>
<p>4</p>
<p><code>PARALLEL_PROCESSES=4</code>,<br />
<code>NUMBER_OF_CONCURRENT_MESSAGE_PULL_COROUTINES = 30</code>,<br />
<code>NUMBER_OF_CONCURRENT_PUSH_COROUTINES=20</code></p>
<p>~46MB/s =&gt; ~2.7GB/min =&gt; ~4TB/day</p>
<p>4vCPU 4Gi RAM</p>
<p>6</p>
<p><code>PARALLEL_PROCESSES=4</code>,<br />
<code>NUMBER_OF_CONCURRENT_MESSAGE_PULL_COROUTINES = 30</code>,<br />
<code>NUMBER_OF_CONCURRENT_PUSH_COROUTINES=20</code></p>
<h2 id="autoscaling-guide-for-logs">Autoscaling guide for logs<a class="headerlink" href="#autoscaling-guide-for-logs" title="Permanent link">&para;</a></h2>
<p>Autoscaling works only for <code>logs</code> type of deployment, not <code>all</code>.</p>
<p>We recommend manually scaling the container to have a 4vCPU 4Gi machine and then enabling autoscaling.</p>
<p>GCP provides autoscaling of containers in both directions: <strong>horizontal</strong> and <strong>vertical</strong>. However, Dynatrace recommends only <strong>horizontal</strong> scaling.</p>
<p>If you have a 4vCPU 4Gi machine, you can enable autoscaling <strong>horizontally</strong>. However, we <strong>don't</strong> recommend scaling horizontally with the base resources of the container (1.25vCPU, 1Gi). It hasn't been proven to be efficient during testing. One 4vCPU machine does better than four 1vCPU machines. To enable autoscaling horizontally, use the horizontal autoscaling command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>kubectl autoscale deployment dynatrace-gcp-monitor --namespace dynatrace --cpu-percent=90 --min=1 --max=6
</code></pre></div>
<p>Autoscaling is recommended only when you have a minimum of 450 MB/min throughput and can provide a 4vCPU 4Gi RAM machine. Autoscaling is only scaling out, not scaling the machine up.</p>
<p>We <strong>don't</strong> recommend scaling <strong>vertically</strong> because every time a machine is scaled up, an environment variable needs to be changed to create more processes corresponding to machine cores.</p>
<h2 id="uninstall">Uninstall<a class="headerlink" href="#uninstall" title="Permanent link">&para;</a></h2>
<ol>
<li>Find out what Helm release version you're using.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>helm ls -n dynatrace
</code></pre></div>
<ol>
<li>Uninstall the release.</li>
</ol>
<p>Be sure to replace <code>&lt;your-helm-release&gt;</code> with the release name from the previous output.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>helm uninstall &lt;your-helm-release&gt; -n dynatrace
</code></pre></div>
<p>Alternatively, you can delete the namespace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>kubectl delete namespace dynatrace
</code></pre></div>
<ol>
<li>To remove all monitoring assets (such as dashboards and alerts) from Dynatrace, you need to remove all GCP extensions.</li>
</ol>
<p>You can find and delete relevant extensions via Dynatrace Hub.</p>
<p>Make sure to uninstall the following resources manually:</p>
<ul>
<li>The initial Role created and attached to the Service Account that you used to deploy the integration.</li>
<li>The PubSub Topic.</li>
<li>The PubSub Subscription.</li>
<li>The LogRoute Sink.</li>
</ul>
<h2 id="monitoring-consumption_1">Monitoring consumption<a class="headerlink" href="#monitoring-consumption_1" title="Permanent link">&para;</a></h2>
<h3 id="metric-ingestion">Metric ingestion<a class="headerlink" href="#metric-ingestion" title="Permanent link">&para;</a></h3>
<p>All cloud services consume DDUs. The amount of DDU consumption per service instance depends on the number of monitored metrics and their dimensions (each metric dimension results in the ingestion of 1 data point; 1 data point consumes 0.001 DDUs). For details, see <a href="/docs/license/monitoring-consumption-classic/davis-data-units" title="Understand how Dynatrace monitoring consumption is calculated based on Davis data units (DDU).">Extending Dynatrace (Davis data units)</a>.</p>
<h3 id="log-ingestion_1">Log ingestion<a class="headerlink" href="#log-ingestion_1" title="Permanent link">&para;</a></h3>
<p>DDU consumption applies to cloud Log Monitoring. See <a href="/docs/license/monitoring-consumption-classic/davis-data-units/log-monitoring-consumption" title="Understand how the volume of DDU consumption is calculated for Dynatrace Log Monitoring Classic.">DDUs for Log Monitoring</a> for details.</p>
<h2 id="related-topics_8">Related topics<a class="headerlink" href="#related-topics_8" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Google-Cloud-Monitor-Troubleshooting/ta-p/243796">Google Cloud Monitor Troubleshooting√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-deploy-with-google-cloud-functionmd">Source: deploy-with-google-cloud-function.md<a class="headerlink" href="#source-deploy-with-google-cloud-functionmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Deploy the Dynatrace Google Cloud metric integration in Google Cloud Functions
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-with-google-cloud-function
scraped: 2026-02-17T05:06:23.573933</p>
<hr />
<h1 id="deploy-the-dynatrace-google-cloud-metric-integration-in-google-cloud-functions">Deploy the Dynatrace Google Cloud metric integration in Google Cloud Functions<a class="headerlink" href="#deploy-the-dynatrace-google-cloud-metric-integration-in-google-cloud-functions" title="Permanent link">&para;</a></h1>
<h1 id="deploy-the-dynatrace-google-cloud-metric-integration-in-google-cloud-functions_1">Deploy the Dynatrace Google Cloud metric integration in Google Cloud Functions<a class="headerlink" href="#deploy-the-dynatrace-google-cloud-metric-integration-in-google-cloud-functions_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>7-min read</li>
<li>Updated on Sep 06, 2022</li>
<li>Deprecated</li>
</ul>
<p>Dynatrace version 1.230+</p>
<p>Dynatrace Google Cloud metric integration in Google Cloud Functions is <strong>not</strong> supported anymore.</p>
<p>If you're using this kind of deployment, you should switch to k8s-based Google Cloud integration as soon as possible.
See <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function-1-to-k8s-1" title="Migrate from Google Cloud Functions v1.0 to Google Cloud k8s v1.0.">Migrate from Google Cloud Functions 1.0 to Google Cloud k8s 1.0</a>.</p>
<p>As an alternative to the <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">main deployment</a>, that provides Google Cloud monitoring for both metrics and logs, and where the deployment takes place in a GKE cluster, you can choose to set up monitoring for metrics only, in Google Cloud Cloud Function. Note that the Google Cloud Cloud Function deployment isn't recommended for large environments and doesn't support log forwarding.
In this scenario, you will be able run the deployment script either in Google Cloud Shell or in bash. After installation, you'll get metrics, dashboards, and alerts for your configured services in Dynatrace.</p>
<p>For other deployment options, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide" title="Other options to set up log and/or metric monitoring for Google Cloud services">Alternative deployment scenarios</a>.</p>
<p>This page describes how to deploy version 1.0 of the Dynatrace Google Cloud integration in Google Cloud Cloud Function.</p>
<ul>
<li>If you already have an <a href="/docs/ingest-from/google-cloud-platform/legacy/deploy-with-google-cloud-function-legacy" title="Set up monitoring for Google Cloud services using a Google Cloud Function.">earlier version</a> of the Google Cloud Monitor installed, you need to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function" title="Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.">migrate</a>.</li>
</ul>
<h2 id="prerequisites_10">Prerequisites<a class="headerlink" href="#prerequisites_10" title="Permanent link">&para;</a></h2>
<h3 id="tools_1">Tools<a class="headerlink" href="#tools_1" title="Permanent link">&para;</a></h3>
<p>You can deploy the Dynatrace Google Cloud integration in Google Cloud Shell or in bash.</p>
<p>If you use bash, you need to install:</p>
<ul>
<li><a href="https://dt-url.net/e8110336">Google Cloud SDK√Ø¬ª¬ø</a></li>
</ul>
<h3 id="google-cloud-permissions">Google Cloud permissions<a class="headerlink" href="#google-cloud-permissions" title="Permanent link">&para;</a></h3>
<p>Running the deployment script requires a list of permissions. You need to create a custom role and use it to deploy <code>dynatrace-gcp-monitor</code>.</p>
<p>To create a custom role</p>
<ol>
<li>Create a YAML file named <code>dynatrace-gcp-monitor-cloud-function-deployment-role.yaml</code> with the following content:</li>
</ol>
<p>dynatrace-gcp-monitor-cloud-function-deployment-role.yaml</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>title: Dynatrace GCP Monitor cloud function deployment role
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a>description: Role for Dynatrace GCP Monitor cloud function deployment
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a>stage: GA
<a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a>
<a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a>
<a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a>
<a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a>includedPermissions:
<a id="__codelineno-65-14" name="__codelineno-65-14" href="#__codelineno-65-14"></a>
<a id="__codelineno-65-15" name="__codelineno-65-15" href="#__codelineno-65-15"></a>
<a id="__codelineno-65-16" name="__codelineno-65-16" href="#__codelineno-65-16"></a>
<a id="__codelineno-65-17" name="__codelineno-65-17" href="#__codelineno-65-17"></a>- appengine.applications.get
<a id="__codelineno-65-18" name="__codelineno-65-18" href="#__codelineno-65-18"></a>
<a id="__codelineno-65-19" name="__codelineno-65-19" href="#__codelineno-65-19"></a>
<a id="__codelineno-65-20" name="__codelineno-65-20" href="#__codelineno-65-20"></a>
<a id="__codelineno-65-21" name="__codelineno-65-21" href="#__codelineno-65-21"></a>- appengine.applications.create
<a id="__codelineno-65-22" name="__codelineno-65-22" href="#__codelineno-65-22"></a>
<a id="__codelineno-65-23" name="__codelineno-65-23" href="#__codelineno-65-23"></a>
<a id="__codelineno-65-24" name="__codelineno-65-24" href="#__codelineno-65-24"></a>
<a id="__codelineno-65-25" name="__codelineno-65-25" href="#__codelineno-65-25"></a>- cloudfunctions.functions.create
<a id="__codelineno-65-26" name="__codelineno-65-26" href="#__codelineno-65-26"></a>
<a id="__codelineno-65-27" name="__codelineno-65-27" href="#__codelineno-65-27"></a>
<a id="__codelineno-65-28" name="__codelineno-65-28" href="#__codelineno-65-28"></a>
<a id="__codelineno-65-29" name="__codelineno-65-29" href="#__codelineno-65-29"></a>- cloudfunctions.functions.get
<a id="__codelineno-65-30" name="__codelineno-65-30" href="#__codelineno-65-30"></a>
<a id="__codelineno-65-31" name="__codelineno-65-31" href="#__codelineno-65-31"></a>
<a id="__codelineno-65-32" name="__codelineno-65-32" href="#__codelineno-65-32"></a>
<a id="__codelineno-65-33" name="__codelineno-65-33" href="#__codelineno-65-33"></a>- cloudfunctions.functions.list
<a id="__codelineno-65-34" name="__codelineno-65-34" href="#__codelineno-65-34"></a>
<a id="__codelineno-65-35" name="__codelineno-65-35" href="#__codelineno-65-35"></a>
<a id="__codelineno-65-36" name="__codelineno-65-36" href="#__codelineno-65-36"></a>
<a id="__codelineno-65-37" name="__codelineno-65-37" href="#__codelineno-65-37"></a>- cloudfunctions.functions.sourceCodeSet
<a id="__codelineno-65-38" name="__codelineno-65-38" href="#__codelineno-65-38"></a>
<a id="__codelineno-65-39" name="__codelineno-65-39" href="#__codelineno-65-39"></a>
<a id="__codelineno-65-40" name="__codelineno-65-40" href="#__codelineno-65-40"></a>
<a id="__codelineno-65-41" name="__codelineno-65-41" href="#__codelineno-65-41"></a>- cloudfunctions.functions.update
<a id="__codelineno-65-42" name="__codelineno-65-42" href="#__codelineno-65-42"></a>
<a id="__codelineno-65-43" name="__codelineno-65-43" href="#__codelineno-65-43"></a>
<a id="__codelineno-65-44" name="__codelineno-65-44" href="#__codelineno-65-44"></a>
<a id="__codelineno-65-45" name="__codelineno-65-45" href="#__codelineno-65-45"></a>- cloudfunctions.functions.getIamPolicy
<a id="__codelineno-65-46" name="__codelineno-65-46" href="#__codelineno-65-46"></a>
<a id="__codelineno-65-47" name="__codelineno-65-47" href="#__codelineno-65-47"></a>
<a id="__codelineno-65-48" name="__codelineno-65-48" href="#__codelineno-65-48"></a>
<a id="__codelineno-65-49" name="__codelineno-65-49" href="#__codelineno-65-49"></a>- cloudfunctions.operations.get
<a id="__codelineno-65-50" name="__codelineno-65-50" href="#__codelineno-65-50"></a>
<a id="__codelineno-65-51" name="__codelineno-65-51" href="#__codelineno-65-51"></a>
<a id="__codelineno-65-52" name="__codelineno-65-52" href="#__codelineno-65-52"></a>
<a id="__codelineno-65-53" name="__codelineno-65-53" href="#__codelineno-65-53"></a>- cloudfunctions.operations.list
<a id="__codelineno-65-54" name="__codelineno-65-54" href="#__codelineno-65-54"></a>
<a id="__codelineno-65-55" name="__codelineno-65-55" href="#__codelineno-65-55"></a>
<a id="__codelineno-65-56" name="__codelineno-65-56" href="#__codelineno-65-56"></a>
<a id="__codelineno-65-57" name="__codelineno-65-57" href="#__codelineno-65-57"></a>- cloudscheduler.locations.list
<a id="__codelineno-65-58" name="__codelineno-65-58" href="#__codelineno-65-58"></a>
<a id="__codelineno-65-59" name="__codelineno-65-59" href="#__codelineno-65-59"></a>
<a id="__codelineno-65-60" name="__codelineno-65-60" href="#__codelineno-65-60"></a>
<a id="__codelineno-65-61" name="__codelineno-65-61" href="#__codelineno-65-61"></a>- cloudscheduler.jobs.list
<a id="__codelineno-65-62" name="__codelineno-65-62" href="#__codelineno-65-62"></a>
<a id="__codelineno-65-63" name="__codelineno-65-63" href="#__codelineno-65-63"></a>
<a id="__codelineno-65-64" name="__codelineno-65-64" href="#__codelineno-65-64"></a>
<a id="__codelineno-65-65" name="__codelineno-65-65" href="#__codelineno-65-65"></a>- cloudscheduler.jobs.create
<a id="__codelineno-65-66" name="__codelineno-65-66" href="#__codelineno-65-66"></a>
<a id="__codelineno-65-67" name="__codelineno-65-67" href="#__codelineno-65-67"></a>
<a id="__codelineno-65-68" name="__codelineno-65-68" href="#__codelineno-65-68"></a>
<a id="__codelineno-65-69" name="__codelineno-65-69" href="#__codelineno-65-69"></a>- cloudscheduler.jobs.get
<a id="__codelineno-65-70" name="__codelineno-65-70" href="#__codelineno-65-70"></a>
<a id="__codelineno-65-71" name="__codelineno-65-71" href="#__codelineno-65-71"></a>
<a id="__codelineno-65-72" name="__codelineno-65-72" href="#__codelineno-65-72"></a>
<a id="__codelineno-65-73" name="__codelineno-65-73" href="#__codelineno-65-73"></a>- cloudscheduler.jobs.delete
<a id="__codelineno-65-74" name="__codelineno-65-74" href="#__codelineno-65-74"></a>
<a id="__codelineno-65-75" name="__codelineno-65-75" href="#__codelineno-65-75"></a>
<a id="__codelineno-65-76" name="__codelineno-65-76" href="#__codelineno-65-76"></a>
<a id="__codelineno-65-77" name="__codelineno-65-77" href="#__codelineno-65-77"></a>- pubsub.topics.list
<a id="__codelineno-65-78" name="__codelineno-65-78" href="#__codelineno-65-78"></a>
<a id="__codelineno-65-79" name="__codelineno-65-79" href="#__codelineno-65-79"></a>
<a id="__codelineno-65-80" name="__codelineno-65-80" href="#__codelineno-65-80"></a>
<a id="__codelineno-65-81" name="__codelineno-65-81" href="#__codelineno-65-81"></a>- pubsub.topics.create
<a id="__codelineno-65-82" name="__codelineno-65-82" href="#__codelineno-65-82"></a>
<a id="__codelineno-65-83" name="__codelineno-65-83" href="#__codelineno-65-83"></a>
<a id="__codelineno-65-84" name="__codelineno-65-84" href="#__codelineno-65-84"></a>
<a id="__codelineno-65-85" name="__codelineno-65-85" href="#__codelineno-65-85"></a>- pubsub.topics.update
<a id="__codelineno-65-86" name="__codelineno-65-86" href="#__codelineno-65-86"></a>
<a id="__codelineno-65-87" name="__codelineno-65-87" href="#__codelineno-65-87"></a>
<a id="__codelineno-65-88" name="__codelineno-65-88" href="#__codelineno-65-88"></a>
<a id="__codelineno-65-89" name="__codelineno-65-89" href="#__codelineno-65-89"></a>- secretmanager.secrets.list
<a id="__codelineno-65-90" name="__codelineno-65-90" href="#__codelineno-65-90"></a>
<a id="__codelineno-65-91" name="__codelineno-65-91" href="#__codelineno-65-91"></a>
<a id="__codelineno-65-92" name="__codelineno-65-92" href="#__codelineno-65-92"></a>
<a id="__codelineno-65-93" name="__codelineno-65-93" href="#__codelineno-65-93"></a>- secretmanager.versions.add
<a id="__codelineno-65-94" name="__codelineno-65-94" href="#__codelineno-65-94"></a>
<a id="__codelineno-65-95" name="__codelineno-65-95" href="#__codelineno-65-95"></a>
<a id="__codelineno-65-96" name="__codelineno-65-96" href="#__codelineno-65-96"></a>
<a id="__codelineno-65-97" name="__codelineno-65-97" href="#__codelineno-65-97"></a>- secretmanager.secrets.create
<a id="__codelineno-65-98" name="__codelineno-65-98" href="#__codelineno-65-98"></a>
<a id="__codelineno-65-99" name="__codelineno-65-99" href="#__codelineno-65-99"></a>
<a id="__codelineno-65-100" name="__codelineno-65-100" href="#__codelineno-65-100"></a>
<a id="__codelineno-65-101" name="__codelineno-65-101" href="#__codelineno-65-101"></a>- secretmanager.versions.list
<a id="__codelineno-65-102" name="__codelineno-65-102" href="#__codelineno-65-102"></a>
<a id="__codelineno-65-103" name="__codelineno-65-103" href="#__codelineno-65-103"></a>
<a id="__codelineno-65-104" name="__codelineno-65-104" href="#__codelineno-65-104"></a>
<a id="__codelineno-65-105" name="__codelineno-65-105" href="#__codelineno-65-105"></a>- secretmanager.secrets.getIamPolicy
<a id="__codelineno-65-106" name="__codelineno-65-106" href="#__codelineno-65-106"></a>
<a id="__codelineno-65-107" name="__codelineno-65-107" href="#__codelineno-65-107"></a>
<a id="__codelineno-65-108" name="__codelineno-65-108" href="#__codelineno-65-108"></a>
<a id="__codelineno-65-109" name="__codelineno-65-109" href="#__codelineno-65-109"></a>- secretmanager.secrets.setIamPolicy
<a id="__codelineno-65-110" name="__codelineno-65-110" href="#__codelineno-65-110"></a>
<a id="__codelineno-65-111" name="__codelineno-65-111" href="#__codelineno-65-111"></a>
<a id="__codelineno-65-112" name="__codelineno-65-112" href="#__codelineno-65-112"></a>
<a id="__codelineno-65-113" name="__codelineno-65-113" href="#__codelineno-65-113"></a>- resourcemanager.projects.get
<a id="__codelineno-65-114" name="__codelineno-65-114" href="#__codelineno-65-114"></a>
<a id="__codelineno-65-115" name="__codelineno-65-115" href="#__codelineno-65-115"></a>
<a id="__codelineno-65-116" name="__codelineno-65-116" href="#__codelineno-65-116"></a>
<a id="__codelineno-65-117" name="__codelineno-65-117" href="#__codelineno-65-117"></a>- resourcemanager.projects.getIamPolicy
<a id="__codelineno-65-118" name="__codelineno-65-118" href="#__codelineno-65-118"></a>
<a id="__codelineno-65-119" name="__codelineno-65-119" href="#__codelineno-65-119"></a>
<a id="__codelineno-65-120" name="__codelineno-65-120" href="#__codelineno-65-120"></a>
<a id="__codelineno-65-121" name="__codelineno-65-121" href="#__codelineno-65-121"></a>- resourcemanager.projects.setIamPolicy
<a id="__codelineno-65-122" name="__codelineno-65-122" href="#__codelineno-65-122"></a>
<a id="__codelineno-65-123" name="__codelineno-65-123" href="#__codelineno-65-123"></a>
<a id="__codelineno-65-124" name="__codelineno-65-124" href="#__codelineno-65-124"></a>
<a id="__codelineno-65-125" name="__codelineno-65-125" href="#__codelineno-65-125"></a>- serviceusage.services.enable
<a id="__codelineno-65-126" name="__codelineno-65-126" href="#__codelineno-65-126"></a>
<a id="__codelineno-65-127" name="__codelineno-65-127" href="#__codelineno-65-127"></a>
<a id="__codelineno-65-128" name="__codelineno-65-128" href="#__codelineno-65-128"></a>
<a id="__codelineno-65-129" name="__codelineno-65-129" href="#__codelineno-65-129"></a>- iam.serviceAccounts.actAs
<a id="__codelineno-65-130" name="__codelineno-65-130" href="#__codelineno-65-130"></a>
<a id="__codelineno-65-131" name="__codelineno-65-131" href="#__codelineno-65-131"></a>
<a id="__codelineno-65-132" name="__codelineno-65-132" href="#__codelineno-65-132"></a>
<a id="__codelineno-65-133" name="__codelineno-65-133" href="#__codelineno-65-133"></a>- iam.serviceAccounts.list
<a id="__codelineno-65-134" name="__codelineno-65-134" href="#__codelineno-65-134"></a>
<a id="__codelineno-65-135" name="__codelineno-65-135" href="#__codelineno-65-135"></a>
<a id="__codelineno-65-136" name="__codelineno-65-136" href="#__codelineno-65-136"></a>
<a id="__codelineno-65-137" name="__codelineno-65-137" href="#__codelineno-65-137"></a>- iam.serviceAccounts.create
<a id="__codelineno-65-138" name="__codelineno-65-138" href="#__codelineno-65-138"></a>
<a id="__codelineno-65-139" name="__codelineno-65-139" href="#__codelineno-65-139"></a>
<a id="__codelineno-65-140" name="__codelineno-65-140" href="#__codelineno-65-140"></a>
<a id="__codelineno-65-141" name="__codelineno-65-141" href="#__codelineno-65-141"></a>- iam.serviceAccounts.getIamPolicy
<a id="__codelineno-65-142" name="__codelineno-65-142" href="#__codelineno-65-142"></a>
<a id="__codelineno-65-143" name="__codelineno-65-143" href="#__codelineno-65-143"></a>
<a id="__codelineno-65-144" name="__codelineno-65-144" href="#__codelineno-65-144"></a>
<a id="__codelineno-65-145" name="__codelineno-65-145" href="#__codelineno-65-145"></a>- iam.serviceAccounts.setIamPolicy
<a id="__codelineno-65-146" name="__codelineno-65-146" href="#__codelineno-65-146"></a>
<a id="__codelineno-65-147" name="__codelineno-65-147" href="#__codelineno-65-147"></a>
<a id="__codelineno-65-148" name="__codelineno-65-148" href="#__codelineno-65-148"></a>
<a id="__codelineno-65-149" name="__codelineno-65-149" href="#__codelineno-65-149"></a>- iam.roles.list
<a id="__codelineno-65-150" name="__codelineno-65-150" href="#__codelineno-65-150"></a>
<a id="__codelineno-65-151" name="__codelineno-65-151" href="#__codelineno-65-151"></a>
<a id="__codelineno-65-152" name="__codelineno-65-152" href="#__codelineno-65-152"></a>
<a id="__codelineno-65-153" name="__codelineno-65-153" href="#__codelineno-65-153"></a>- iam.roles.create
<a id="__codelineno-65-154" name="__codelineno-65-154" href="#__codelineno-65-154"></a>
<a id="__codelineno-65-155" name="__codelineno-65-155" href="#__codelineno-65-155"></a>
<a id="__codelineno-65-156" name="__codelineno-65-156" href="#__codelineno-65-156"></a>
<a id="__codelineno-65-157" name="__codelineno-65-157" href="#__codelineno-65-157"></a>- iam.roles.update
<a id="__codelineno-65-158" name="__codelineno-65-158" href="#__codelineno-65-158"></a>
<a id="__codelineno-65-159" name="__codelineno-65-159" href="#__codelineno-65-159"></a>
<a id="__codelineno-65-160" name="__codelineno-65-160" href="#__codelineno-65-160"></a>
<a id="__codelineno-65-161" name="__codelineno-65-161" href="#__codelineno-65-161"></a>- monitoring.dashboards.list
<a id="__codelineno-65-162" name="__codelineno-65-162" href="#__codelineno-65-162"></a>
<a id="__codelineno-65-163" name="__codelineno-65-163" href="#__codelineno-65-163"></a>
<a id="__codelineno-65-164" name="__codelineno-65-164" href="#__codelineno-65-164"></a>
<a id="__codelineno-65-165" name="__codelineno-65-165" href="#__codelineno-65-165"></a>- monitoring.dashboards.create
</code></pre></div>
2. Run the command below, replacing <code>&lt;your_project_ID&gt;</code> with the project ID where you want to deploy the Dynatrace integration.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>gcloud iam roles create dynatrace_monitor.cloud_function_deployment --project=&lt;your_project_ID&gt; --file=dynatrace-gcp-monitor-cloud-function-deployment-role.yaml
</code></pre></div>
<p>Be sure to add this role to your Google Cloud user. For details, see <a href="https://dt-url.net/vx03vid">Grant or revoke a single role√Ø¬ª¬ø</a>.</p>
<h3 id="dynatrace-permissions_1">Dynatrace permissions<a class="headerlink" href="#dynatrace-permissions_1" title="Permanent link">&para;</a></h3>
<p><a href="https://dt-url.net/be03q3a">Create an API token√Ø¬ª¬ø</a> and <a href="https://dt-url.net/c023q1m">enable the following permissions√Ø¬ª¬ø</a>:</p>
<ul>
<li>
<p>API v1:</p>
</li>
<li>
<p><strong>Read configuration</strong></p>
</li>
<li><strong>Write configuration</strong></li>
<li>
<p>API v2:</p>
</li>
<li>
<p><strong>Ingest metrics</strong></p>
</li>
<li><strong>Read extensions</strong></li>
<li><strong>Write extensions</strong></li>
<li><strong>Read extension monitoring configurations</strong></li>
<li><strong>Write extension monitoring configurations</strong></li>
<li><strong>Read extension environment configurations</strong></li>
<li><strong>Write extension environment configurations</strong></li>
</ul>
<h3 id="dynatrace-url">Dynatrace URL<a class="headerlink" href="#dynatrace-url" title="Permanent link">&para;</a></h3>
<p>Determine the URL for your environment.</p>
<ul>
<li>For Dynatrace SaaS: <code>https://&lt;your-environment-id&gt;.live.dynatrace.com/</code></li>
<li>For Dynatrace Managed: <code>https://&lt;your-domain&gt;/e/&lt;your-environment-id&gt;/</code></li>
</ul>
<p>To determine <code>&lt;your-environment-id&gt;</code>, see <a href="https://dt-url.net/ej43qge">environment ID√Ø¬ª¬ø</a>.</p>
<h2 id="install_1">Install<a class="headerlink" href="#install_1" title="Permanent link">&para;</a></h2>
<p>You can deploy the Dynatrace Google Cloud integration in Google Cloud Shell or in bash. To set up integration, follow the instructions below.</p>
<p>For bash deployment, be sure to restart the console and <a href="https://dt-url.net/ac43q0f">initialize Cloud SDK√Ø¬ª¬ø</a> before you start installation.</p>
<p>To initialize Cloud SDK, run</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>gcloud init
</code></pre></div>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Download the deployment package</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-with-google-cloud-function#dwld "Set up monitoring for Google Cloud services in Google Cloud Functions.")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Configure deployment</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-with-google-cloud-function#configure-deployment "Set up monitoring for Google Cloud services in Google Cloud Functions.")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Run the deployment script</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-with-google-cloud-function#script "Set up monitoring for Google Cloud services in Google Cloud Functions.")</p>
<h3 id="step-1-download-the-deployment-package">Step 1 Download the deployment package<a class="headerlink" href="#step-1-download-the-deployment-package" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>wget -q &quot;https://github.com/dynatrace-oss/dynatrace-gcp-monitor/releases/tag/release-1.1.8/download/function-deployment-package.zip&quot; -O function-deployment-package.zip; unzip function-deployment-package.zip; chmod a+x *.sh
</code></pre></div>
<h3 id="step-2-configure-deployment">Step 2 Configure deployment<a class="headerlink" href="#step-2-configure-deployment" title="Permanent link">&para;</a></h3>
<ol>
<li>Adjust the parameters in the <code>activation-config.yaml</code> file from the deployment package.</li>
</ol>
<p>You might want to store this file somewhere for future updates, since it will be needed in case of redeployments. Also, keep in mind that its schema can change. In such case, you should use the new file and only copy over the parameter values.
2. Choose which services you want Dynatrace to monitor.</p>
<p>By default, the Google Cloud integration starts monitoring a series of selected services. Uncomment any additional services you want Dynatrace to monitor in the <code>activation-config.yaml</code> file.</p>
<p>For DDU consumption information, see <a href="#ddu">Monitoring consumption</a>.</p>
<h3 id="step-3-run-the-deployment-script_1">Step 3 Run the deployment script<a class="headerlink" href="#step-3-run-the-deployment-script_1" title="Permanent link">&para;</a></h3>
<p>Version upgrade of extensions is done by default. To keep the versions of existing extensions, run the script with the <code>--without-extensions-upgrade</code> parameter.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>./setup.sh
</code></pre></div>
<p>The script may ask you for confirmations during deployment. For CI/CD purposes, you can add the <code>-d</code> option to make the script noninteractive.</p>
<p>After deploying the integration, you can see metrics from monitored services. If you want to change the monitoring scope (services &amp; featureSets) or update the Google Cloud integration, see <a href="#manage">Change deployment settings</a> below.</p>
<h2 id="verify-installation_1">Verify installation<a class="headerlink" href="#verify-installation_1" title="Permanent link">&para;</a></h2>
<p>To check whether installation was successful</p>
<ol>
<li>In your Google Cloud console, go to Cloud Functions and make sure that <code>dynatrace-gcp-monitor</code> is there.</li>
<li>Select the newly deployed Google Cloud Monitor function and go to <strong>Logs</strong> to make sure there are no error messages.</li>
</ol>
<h2 id="enable-alerting_1">Enable alerting<a class="headerlink" href="#enable-alerting_1" title="Permanent link">&para;</a></h2>
<p>To activate alerting, you need to enable metric events for alerting in Dynatrace.</p>
<p>To enable custom events</p>
<ol>
<li>Go to <strong>Settings</strong>.</li>
<li>In <strong>Anomaly detection</strong>, select <strong>Metric events</strong>.</li>
<li>Filter for GCP alerts and turn on <strong>On/Off</strong> for the alerts you want to activate.</li>
</ol>
<h2 id="view-enabled-services">View enabled services<a class="headerlink" href="#view-enabled-services" title="Permanent link">&para;</a></h2>
<p>To find the list of currently enabled services, go to Cloud Function in your Google Cloud console, and check the <code>ACTIVATION_CONFIG</code> environment variable.</p>
<h2 id="update-services">Update services<a class="headerlink" href="#update-services" title="Permanent link">&para;</a></h2>
<p>Adding, removing and updating versions of existing services is done by modyfing the corresponding list of services and redeploying.</p>
<ol>
<li>
<p>Apply your changes to <code>activation-config.yaml</code> by commenting or uncommenting configuration blocks corresponding to specific services.
   Terminology within the file includes:</p>
</li>
<li>
<p><code>service</code>: represents Google Cloud service name you want to monitor. Services are grouped by extensions, but you can decide what you need to monitor on a lower level (<code>featureSets</code>)</p>
</li>
<li><code>featureSet</code>: a set of metrics for a given service. <code>default_metrics</code> is a default <code>featureSet</code> with a recommended set of metrics to be monitored. In more specific use cases, you can consider monitoring such sets as <code>istio featureSet</code> for <code>gae_instance service</code></li>
<li>
<p><code>filter_conditions</code>: a service-level filter that enables you to narrow the monitoring scope. It is based on the <a href="https://cloud.google.com/monitoring/api/v3/filters?hl=en_US">Google Cloud Monitoring filters√Ø¬ª¬ø</a>.<br />
     Example:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>filter_conditions:
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a>
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a>resource.labels.location = &quot;us-central1-c&quot; AND resource.labels.namespace_name = &quot;dynatrace&quot;
</code></pre></div>
2. Update monitored services by running the script below.</p>
</li>
</ol>
<p>Version upgrade of extensions is done by default. To keep the versions of existing extensions, run the script with the <code>--without-extensions-upgrade</code> parameter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>./setup.sh
</code></pre></div>
3. If you removed services from monitoring, find the relevant extensions in Dynatrace Hub and delete them to remove service-specific assets (such as dashboards and alerts).</p>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h3>
<p>In the following example</p>
<ul>
<li>The <code>gae_instance</code> service is disabled.</li>
<li>For the <code>gce_instance</code> service, only two feature sets are enabled: <code>default_metrics</code> and <code>istio</code>.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a># Google App Engine Instance
<a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>
<a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a>
<a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a>
<a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a>#- service: gae_instance
<a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a>
<a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a>
<a id="__codelineno-72-8" name="__codelineno-72-8" href="#__codelineno-72-8"></a>
<a id="__codelineno-72-9" name="__codelineno-72-9" href="#__codelineno-72-9"></a>#  featureSets:
<a id="__codelineno-72-10" name="__codelineno-72-10" href="#__codelineno-72-10"></a>
<a id="__codelineno-72-11" name="__codelineno-72-11" href="#__codelineno-72-11"></a>
<a id="__codelineno-72-12" name="__codelineno-72-12" href="#__codelineno-72-12"></a>
<a id="__codelineno-72-13" name="__codelineno-72-13" href="#__codelineno-72-13"></a>#    - default_metrics
<a id="__codelineno-72-14" name="__codelineno-72-14" href="#__codelineno-72-14"></a>
<a id="__codelineno-72-15" name="__codelineno-72-15" href="#__codelineno-72-15"></a>
<a id="__codelineno-72-16" name="__codelineno-72-16" href="#__codelineno-72-16"></a>
<a id="__codelineno-72-17" name="__codelineno-72-17" href="#__codelineno-72-17"></a>#  vars:
<a id="__codelineno-72-18" name="__codelineno-72-18" href="#__codelineno-72-18"></a>
<a id="__codelineno-72-19" name="__codelineno-72-19" href="#__codelineno-72-19"></a>
<a id="__codelineno-72-20" name="__codelineno-72-20" href="#__codelineno-72-20"></a>
<a id="__codelineno-72-21" name="__codelineno-72-21" href="#__codelineno-72-21"></a>#    filter_conditions: &quot;&quot;
<a id="__codelineno-72-22" name="__codelineno-72-22" href="#__codelineno-72-22"></a>
<a id="__codelineno-72-23" name="__codelineno-72-23" href="#__codelineno-72-23"></a>
<a id="__codelineno-72-24" name="__codelineno-72-24" href="#__codelineno-72-24"></a>
<a id="__codelineno-72-25" name="__codelineno-72-25" href="#__codelineno-72-25"></a># Google VM Instance
<a id="__codelineno-72-26" name="__codelineno-72-26" href="#__codelineno-72-26"></a>
<a id="__codelineno-72-27" name="__codelineno-72-27" href="#__codelineno-72-27"></a>
<a id="__codelineno-72-28" name="__codelineno-72-28" href="#__codelineno-72-28"></a>
<a id="__codelineno-72-29" name="__codelineno-72-29" href="#__codelineno-72-29"></a>- service: gce_instance
<a id="__codelineno-72-30" name="__codelineno-72-30" href="#__codelineno-72-30"></a>
<a id="__codelineno-72-31" name="__codelineno-72-31" href="#__codelineno-72-31"></a>
<a id="__codelineno-72-32" name="__codelineno-72-32" href="#__codelineno-72-32"></a>
<a id="__codelineno-72-33" name="__codelineno-72-33" href="#__codelineno-72-33"></a>featureSets:
<a id="__codelineno-72-34" name="__codelineno-72-34" href="#__codelineno-72-34"></a>
<a id="__codelineno-72-35" name="__codelineno-72-35" href="#__codelineno-72-35"></a>
<a id="__codelineno-72-36" name="__codelineno-72-36" href="#__codelineno-72-36"></a>
<a id="__codelineno-72-37" name="__codelineno-72-37" href="#__codelineno-72-37"></a>- default_metrics
<a id="__codelineno-72-38" name="__codelineno-72-38" href="#__codelineno-72-38"></a>
<a id="__codelineno-72-39" name="__codelineno-72-39" href="#__codelineno-72-39"></a>
<a id="__codelineno-72-40" name="__codelineno-72-40" href="#__codelineno-72-40"></a>
<a id="__codelineno-72-41" name="__codelineno-72-41" href="#__codelineno-72-41"></a>#    - agent
<a id="__codelineno-72-42" name="__codelineno-72-42" href="#__codelineno-72-42"></a>
<a id="__codelineno-72-43" name="__codelineno-72-43" href="#__codelineno-72-43"></a>
<a id="__codelineno-72-44" name="__codelineno-72-44" href="#__codelineno-72-44"></a>
<a id="__codelineno-72-45" name="__codelineno-72-45" href="#__codelineno-72-45"></a>#    - firewallinsights
<a id="__codelineno-72-46" name="__codelineno-72-46" href="#__codelineno-72-46"></a>
<a id="__codelineno-72-47" name="__codelineno-72-47" href="#__codelineno-72-47"></a>
<a id="__codelineno-72-48" name="__codelineno-72-48" href="#__codelineno-72-48"></a>
<a id="__codelineno-72-49" name="__codelineno-72-49" href="#__codelineno-72-49"></a>- istio
<a id="__codelineno-72-50" name="__codelineno-72-50" href="#__codelineno-72-50"></a>
<a id="__codelineno-72-51" name="__codelineno-72-51" href="#__codelineno-72-51"></a>
<a id="__codelineno-72-52" name="__codelineno-72-52" href="#__codelineno-72-52"></a>
<a id="__codelineno-72-53" name="__codelineno-72-53" href="#__codelineno-72-53"></a>#    - uptime_check
<a id="__codelineno-72-54" name="__codelineno-72-54" href="#__codelineno-72-54"></a>
<a id="__codelineno-72-55" name="__codelineno-72-55" href="#__codelineno-72-55"></a>
<a id="__codelineno-72-56" name="__codelineno-72-56" href="#__codelineno-72-56"></a>
<a id="__codelineno-72-57" name="__codelineno-72-57" href="#__codelineno-72-57"></a>vars:
<a id="__codelineno-72-58" name="__codelineno-72-58" href="#__codelineno-72-58"></a>
<a id="__codelineno-72-59" name="__codelineno-72-59" href="#__codelineno-72-59"></a>
<a id="__codelineno-72-60" name="__codelineno-72-60" href="#__codelineno-72-60"></a>
<a id="__codelineno-72-61" name="__codelineno-72-61" href="#__codelineno-72-61"></a>filter_conditions: &quot;&quot;
</code></pre></div>
<p>For a complete list of the Google Cloud supported services, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new#services" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a>.</p>
<h2 id="change-deployment-settings_1">Change deployment settings<a class="headerlink" href="#change-deployment-settings_1" title="Permanent link">&para;</a></h2>
<p>To add or remove services, or to update parameters, you need to redeploy the integration.</p>
<ol>
<li>Apply your changes to <code>activation-config.yaml</code>.</li>
</ol>
<p>Be sure to use the same value for the <code>FUNCTION_NAME</code> parameter as before.
2. <a href="#script">Rerun the deployment script</a>.</p>
<h2 id="verification_1">Verification<a class="headerlink" href="#verification_1" title="Permanent link">&para;</a></h2>
<p>To investigate potential deployment and connectivity issues</p>
<ol>
<li><a href="#verify">Verify installation</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Enable self-monitoring</a> Optional</li>
<li>
<p>Check the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file created during the installation process.</p>
</li>
<li>
<p>This file will be created each time the installation script runs.</p>
</li>
<li>The debug information won't contain sensitive data such as the Dynatrace access key.</li>
<li>
<p>If you are contacting a Dynatrace product expert via live chat:</p>
</li>
<li>
<p>Make sure to provide the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file described in the previous step.</p>
</li>
<li>
<p>Provide version information.</p>
<ul>
<li>For issues during installation, check the <code>version.txt</code> file.</li>
<li>For issues during runtime, <a href="#verify">check function logs</a>.</li>
</ul>
</li>
</ol>
<h2 id="uninstall_1">Uninstall<a class="headerlink" href="#uninstall_1" title="Permanent link">&para;</a></h2>
<ol>
<li>Go to your installation directory and run the command below.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>./uninstall.sh
</code></pre></div>
<ol>
<li>To remove all monitoring assets (such as dashboards and alerts) from Dynatrace, you need to remove all Google Cloud extensions.</li>
</ol>
<p>You can find and delete relevant extensions via Dynatrace Hub.</p>
<h2 id="monitoring-consumption_2">Monitoring consumption<a class="headerlink" href="#monitoring-consumption_2" title="Permanent link">&para;</a></h2>
<p>All cloud services consume DDUs. The amount of DDU consumption per service instance depends on the number of monitored metrics and their dimensions (each metric dimension results in the ingestion of 1 data point; 1 data point consumes 0.001 DDUs). For details, see <a href="/docs/license/monitoring-consumption-classic/davis-data-units" title="Understand how Dynatrace monitoring consumption is calculated based on Davis data units (DDU).">Extending Dynatrace (Davis data units)</a>.</p>
<h2 id="related-topics_9">Related topics<a class="headerlink" href="#related-topics_9" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
</ul>
<hr />
<h2 id="source-migrate-gcp-functionmd">Source: migrate-gcp-function.md<a class="headerlink" href="#source-migrate-gcp-functionmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Migrate to Google Cloud integration version 1.0
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function
scraped: 2026-02-17T05:08:14.293504</p>
<hr />
<h1 id="migrate-to-google-cloud-integration-version-10">Migrate to Google Cloud integration version 1.0<a class="headerlink" href="#migrate-to-google-cloud-integration-version-10" title="Permanent link">&para;</a></h1>
<h1 id="migrate-to-google-cloud-integration-version-10_1">Migrate to Google Cloud integration version 1.0<a class="headerlink" href="#migrate-to-google-cloud-integration-version-10_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace version 1.230+</p>
<p>The new version of the Google Cloud integration (v.1.0) uses <a href="/docs/ingest-from/extensions" title="Learn how to create and manage Dynatrace Extensions.">Extensions 2.0</a> and introduces <a href="/docs/ingest-from/extend-dynatrace/extend-topology/custom-topology" title="Learn how to create a custom topology model that's suited to your telemetry data.">custom topology</a> for a number of Google Cloud services.</p>
<p>List of services with custom topology</p>
<ul>
<li>Google Compute Engine</li>
<li>Google Cloud Storage</li>
<li>Google Cloud Functions</li>
<li>Google Cloud Run</li>
<li>Google App Engine</li>
<li>Google Cloud Tasks</li>
<li>Google Cloud SQL</li>
<li>Google Cloud Datastore</li>
<li>Google Load Balancing</li>
<li>Google Cloud NAT Gateway</li>
<li>Google Filestore</li>
<li>Google Kubernetes Engine</li>
<li>Google Pub/Sub</li>
<li>Google Pub/Sub Lite</li>
<li>Google Memorystore</li>
<li>Google Spanner</li>
</ul>
<p>Note that your existing metric dimension names will change when you switch to Google Cloud integration using Dynatrace Extensions 2.0. Dimension name changes affect all configured managements zones, custom alerts, and custom dashboards in your environment. To restore proper functionality for these entities, please follow the instructions below.</p>
<p>Upgrading existing <code>dynatrace-gcp-monitor</code> installations from earlier versions is not supported. You need to first delete your existing deployment and then install the Google Cloud integration v.1.0. For instructions, see below.</p>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Delete existing deployment</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function#delete-deployment "Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Remove dashboards and/or alerts</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function#remove-dashboards "Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Install new Google Cloud deployment</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function#install-deployment "Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.")[<img alt="Step 4" src="https://dt-cdn.net/images/step-4-3f89d67d41.svg" title="Step 4" /></p>
<p><strong>Update dimensions</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function#update-dimensions "Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.")</p>
<h2 id="step-1-delete-existing-deployment">Step 1 Delete existing deployment<a class="headerlink" href="#step-1-delete-existing-deployment" title="Permanent link">&para;</a></h2>
<p>For Kubernetes container deployment</p>
<p>For GC Function deployment</p>
<ol>
<li>Find out what release version you're using.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>helm ls -n dynatrace
</code></pre></div>
2. Uninstall the release.</p>
<p>Be sure to replace <code>&lt;release-name&gt;</code> with the release name from the previous output.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>helm uninstall &lt;release-name&gt; -n dynatrace
</code></pre></div>
<ol>
<li>Uninstall the release.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>wget https://raw.githubusercontent.com/dynatrace-oss/dynatrace-gcp-monitor/master/scripts/uninstall.sh -O uninstall.sh ; chmod a+x uninstall.sh ; ./uninstall.sh
</code></pre></div>
<ol>
<li>Remove the <code>activation-config.yaml</code> service configuration file.</li>
</ol>
<h2 id="step-2-remove-dashboards-andor-alerts">Step 2 Remove dashboards and/or alerts<a class="headerlink" href="#step-2-remove-dashboards-andor-alerts" title="Permanent link">&para;</a></h2>
<p>You need to manually remove any dashboards or alerts created manually during the previous installation.</p>
<h2 id="step-3-install-new-google-cloud-deployment">Step 3 Install new Google Cloud deployment<a class="headerlink" href="#step-3-install-new-google-cloud-deployment" title="Permanent link">&para;</a></h2>
<p>To install the new Google Cloud deployment, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up the Dynatrace Google Cloud metric and log integration (v.1.0) on a new GKE Autopilot cluster</a>.</p>
<h2 id="step-4-update-dimensions">Step 4 Update dimensions<a class="headerlink" href="#step-4-update-dimensions" title="Permanent link">&para;</a></h2>
<p>If you created your own dashboards, alerts, or management zones based on Google Cloud metrics, you need to manually update the dimensions according to the list below in order to get links for entities.</p>
<h3 id="list-of-dimension-changes">List of dimension changes<a class="headerlink" href="#list-of-dimension-changes" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Old dimension name</th>
<th>New dimension name</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>project_id</code></td>
<td><code>gcp.project.id</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>gcp.region</code></td>
</tr>
<tr>
<td><code>zone</code></td>
<td><code>gcp.region</code></td>
</tr>
<tr>
<td><code>instance_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>autoscaler_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>model_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>queue_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>device_registry_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>job_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>version_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>database_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>volume_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>router_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>instance_group_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>interconnect</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>attachment</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>volume_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>snapshot_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>subscription_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>topic_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>key_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>worker_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>agent_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>gateway_id</code></td>
<td><code>gcp.instance.id</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>autoscaler_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>environment_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>cluster_name gcp.instance.name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>function_name gcp.instance.name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>revision_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>job_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>instance_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>domain_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>table_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>firewall_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>bucket_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>container_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>url_map_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>instance_group_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>load_balancer_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>canonical_service_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>node_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>pod_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>broker_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>revision_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>trigger_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>fqdn</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>target_domain_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>gateway_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>policy_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>proxy_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>load_balancer_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>backend_target_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>connector_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
<tr>
<td><code>gateway_name</code></td>
<td><code>gcp.instance.name</code></td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>To update dimensions for dashboards</p>
</li>
<li>
<p>Go to <img alt="Dashboards Classic" src="https://dt-cdn.net/images/dashboards-classic-512-15764940e8.png" title="Dashboards Classic" /> <strong>Dashboards Classic</strong>.</p>
</li>
<li>Select the dashboard for which you want to update dimensions, and then select <strong>More</strong> (<strong>√¢¬Ä¬¶</strong>) &gt; <strong>Configure</strong>.</li>
<li>Select <strong>Dashboard JSON</strong>.</li>
<li>In the <code>"splitBy"</code> section, replace the old dimensions with the new values as determined from the <a href="#dimension">list of dimension changes</a>.</li>
<li>Select <strong>Save changes</strong>.</li>
</ul>
<p>Alternatively, you can replace the dimensions by configuring each dashboard tile of a selected dashboard in Data Explorer.</p>
<ul>
<li>
<p>To update dimensions for alerts</p>
</li>
<li>
<p>Go to <strong>Settings</strong>.</p>
</li>
<li>Select <strong>Anomaly detection</strong> &gt; <strong>Metric events</strong>.</li>
<li>Select the event for which you want to update dimensions.</li>
<li>In the <strong>Add dimension filter</strong> field, select the new dimension keys and enter the corresponding dimension values as determined from the <a href="#dimension">list of dimension changes</a>.</li>
<li>Select <strong>Save changes</strong>.</li>
<li>
<p>To update dimensions for management zones</p>
</li>
<li>
<p>Go to <strong>Settings</strong>.</p>
</li>
<li>Select <strong>Preferences</strong> &gt; <strong>Management zones</strong>.</li>
<li>Select <strong>Edit</strong> for the management zone for which you want to update dimensions.</li>
<li>Select <strong>Edit</strong> to edit an existing rule.</li>
<li>In <strong>Conditions</strong>, edit the <code>DIMENSION</code> value according to the <a href="#dimension">List of dimension changes</a>.</li>
<li>Select <strong>Save changes</strong>.</li>
</ul>
<h2 id="related-topics_10">Related topics<a class="headerlink" href="#related-topics_10" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
</ul>
<hr />
<h2 id="source-set-up-gcp-integration-logs-onlymd">Source: set-up-gcp-integration-logs-only.md<a class="headerlink" href="#source-set-up-gcp-integration-logs-onlymd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Set up the Dynatrace Google Cloud log integration in a Kubernetes container (GKE)
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-logs-only
scraped: 2026-02-17T05:09:22.263449</p>
<hr />
<h1 id="set-up-the-dynatrace-google-cloud-log-integration-in-a-kubernetes-container-gke">Set up the Dynatrace Google Cloud log integration in a Kubernetes container (GKE)<a class="headerlink" href="#set-up-the-dynatrace-google-cloud-log-integration-in-a-kubernetes-container-gke" title="Permanent link">&para;</a></h1>
<h1 id="set-up-the-dynatrace-google-cloud-log-integration-in-a-kubernetes-container-gke_1">Set up the Dynatrace Google Cloud log integration in a Kubernetes container (GKE)<a class="headerlink" href="#set-up-the-dynatrace-google-cloud-log-integration-in-a-kubernetes-container-gke_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>12-min read</li>
<li>Updated on Oct 08, 2024</li>
</ul>
<p>Dynatrace version 1.230+</p>
<p>As an alternative to the <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">main deployment</a>, that provides Google Cloud monitoring for both metrics and logs, you can choose to set up monitoring for logs only. In this scenario, you'll run the deployment script in Google Cloud Shell. Instructions will depend on the location where you want the deployment script to run:</p>
<ul>
<li>On a new GKE Autopilot cluster created automatically Recommended</li>
<li>On an existing GKE standard or GKE Autopilot cluster</li>
</ul>
<p>During setup, a new Pub/Sub subscription will be created. GKE will run a log forwarder container. After installation, you'll get logs, dashboards, and alerts for your configured services in Dynatrace.</p>
<p>For other deployment options, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide" title="Other options to set up log and/or metric monitoring for Google Cloud services">Alternative deployment scenarios</a>.</p>
<p>This page describes how to install version 1.0 of the Google Cloud integration on a GKE cluster.</p>
<ul>
<li>If you already have an <a href="/docs/ingest-from/google-cloud-platform/legacy/deployment-k8s-container-legacy" title="Set up log and metric monitoring for GCP services in a Kubernetes container.">earlier version</a> installed, you need to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function" title="Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.">migrate</a>.</li>
</ul>
<h2 id="limitations_3">Limitations<a class="headerlink" href="#limitations_3" title="Permanent link">&para;</a></h2>
<p>Dynatrace Google Cloud log integration supports up to 8 GB of data processing per hour (with base resources√¢¬Ä¬îwithout scaling). With bigger loads, messages will start to be retained in the PubSub Subscription. To measure latency, look for these metrics: <code>Oldest unacked message age</code> and <code>Unacked messages</code>. For scaling recommendations, see the <a href="#scalingguide">scaling guide</a> below.</p>
<h2 id="prerequisites_11">Prerequisites<a class="headerlink" href="#prerequisites_11" title="Permanent link">&para;</a></h2>
<p>To deploy the integration, you need to make sure the following requirements are met on the machine where you are running the installation.</p>
<ul>
<li>Linux OS only</li>
<li>Internet access</li>
<li>GKE Cluster access</li>
<li>Dynatrace environment access</li>
</ul>
<p>You need to configure the Dynatrace endpoint (environment, cluster or ActiveGate URL) to which the GKE cluster should send metrics and logs. Make sure that you have direct network access or, if there is a proxy or any other component present in between, that communication is not affected.</p>
<h3 id="tools_2">Tools<a class="headerlink" href="#tools_2" title="Permanent link">&para;</a></h3>
<p>You can deploy the Dynatrace GCP integration in Google Cloud Shell or in bash.</p>
<p>If you use bash, you need to install:</p>
<ul>
<li><a href="https://dt-url.net/e8110336">Google Cloud SDK√Ø¬ª¬ø</a></li>
<li><a href="https://kubernetes.io/docs/tasks/tools/">kubectl√Ø¬ª¬ø</a></li>
<li><a href="https://helm.sh/docs/intro/install/">helm√Ø¬ª¬ø</a></li>
<li><a href="https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64">jq (version 1.6)√Ø¬ª¬ø</a></li>
<li><a href="https://github.com/mikefarah/yq/releases/download/v4.9.8/yq_linux_amd64">yq (version 4.9.x+)√Ø¬ª¬ø</a></li>
<li>curl</li>
<li>unzip</li>
</ul>
<h3 id="google-cloud-permissions_1">Google Cloud permissions<a class="headerlink" href="#google-cloud-permissions_1" title="Permanent link">&para;</a></h3>
<p>Running the deployment script requires a list of permissions. You need to create a custom role (see below) and use it to deploy <code>dynatrace-gcp-monitor</code>.</p>
<ol>
<li>Create a YAML file named <code>dynatrace-gcp-monitor-helm-deployment-role.yaml</code> with the following content:</li>
</ol>
<p>dynatrace-gcp-monitor-helm-deployment-role.yaml</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>title: Dynatrace GCP Monitor helm deployment role
<a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>
<a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a>
<a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a>
<a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a>description: Role for Dynatrace GCP Monitor helm and pubsub deployment
<a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a>
<a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a>
<a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a>
<a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a>stage: GA
<a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a>
<a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a>
<a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a>
<a id="__codelineno-77-13" name="__codelineno-77-13" href="#__codelineno-77-13"></a>includedPermissions:
<a id="__codelineno-77-14" name="__codelineno-77-14" href="#__codelineno-77-14"></a>
<a id="__codelineno-77-15" name="__codelineno-77-15" href="#__codelineno-77-15"></a>
<a id="__codelineno-77-16" name="__codelineno-77-16" href="#__codelineno-77-16"></a>
<a id="__codelineno-77-17" name="__codelineno-77-17" href="#__codelineno-77-17"></a>- container.clusters.get
<a id="__codelineno-77-18" name="__codelineno-77-18" href="#__codelineno-77-18"></a>
<a id="__codelineno-77-19" name="__codelineno-77-19" href="#__codelineno-77-19"></a>
<a id="__codelineno-77-20" name="__codelineno-77-20" href="#__codelineno-77-20"></a>
<a id="__codelineno-77-21" name="__codelineno-77-21" href="#__codelineno-77-21"></a>- container.configMaps.create
<a id="__codelineno-77-22" name="__codelineno-77-22" href="#__codelineno-77-22"></a>
<a id="__codelineno-77-23" name="__codelineno-77-23" href="#__codelineno-77-23"></a>
<a id="__codelineno-77-24" name="__codelineno-77-24" href="#__codelineno-77-24"></a>
<a id="__codelineno-77-25" name="__codelineno-77-25" href="#__codelineno-77-25"></a>- container.configMaps.delete
<a id="__codelineno-77-26" name="__codelineno-77-26" href="#__codelineno-77-26"></a>
<a id="__codelineno-77-27" name="__codelineno-77-27" href="#__codelineno-77-27"></a>
<a id="__codelineno-77-28" name="__codelineno-77-28" href="#__codelineno-77-28"></a>
<a id="__codelineno-77-29" name="__codelineno-77-29" href="#__codelineno-77-29"></a>- container.configMaps.get
<a id="__codelineno-77-30" name="__codelineno-77-30" href="#__codelineno-77-30"></a>
<a id="__codelineno-77-31" name="__codelineno-77-31" href="#__codelineno-77-31"></a>
<a id="__codelineno-77-32" name="__codelineno-77-32" href="#__codelineno-77-32"></a>
<a id="__codelineno-77-33" name="__codelineno-77-33" href="#__codelineno-77-33"></a>- container.configMaps.update
<a id="__codelineno-77-34" name="__codelineno-77-34" href="#__codelineno-77-34"></a>
<a id="__codelineno-77-35" name="__codelineno-77-35" href="#__codelineno-77-35"></a>
<a id="__codelineno-77-36" name="__codelineno-77-36" href="#__codelineno-77-36"></a>
<a id="__codelineno-77-37" name="__codelineno-77-37" href="#__codelineno-77-37"></a>- container.deployments.create
<a id="__codelineno-77-38" name="__codelineno-77-38" href="#__codelineno-77-38"></a>
<a id="__codelineno-77-39" name="__codelineno-77-39" href="#__codelineno-77-39"></a>
<a id="__codelineno-77-40" name="__codelineno-77-40" href="#__codelineno-77-40"></a>
<a id="__codelineno-77-41" name="__codelineno-77-41" href="#__codelineno-77-41"></a>- container.deployments.delete
<a id="__codelineno-77-42" name="__codelineno-77-42" href="#__codelineno-77-42"></a>
<a id="__codelineno-77-43" name="__codelineno-77-43" href="#__codelineno-77-43"></a>
<a id="__codelineno-77-44" name="__codelineno-77-44" href="#__codelineno-77-44"></a>
<a id="__codelineno-77-45" name="__codelineno-77-45" href="#__codelineno-77-45"></a>- container.deployments.get
<a id="__codelineno-77-46" name="__codelineno-77-46" href="#__codelineno-77-46"></a>
<a id="__codelineno-77-47" name="__codelineno-77-47" href="#__codelineno-77-47"></a>
<a id="__codelineno-77-48" name="__codelineno-77-48" href="#__codelineno-77-48"></a>
<a id="__codelineno-77-49" name="__codelineno-77-49" href="#__codelineno-77-49"></a>- container.deployments.update
<a id="__codelineno-77-50" name="__codelineno-77-50" href="#__codelineno-77-50"></a>
<a id="__codelineno-77-51" name="__codelineno-77-51" href="#__codelineno-77-51"></a>
<a id="__codelineno-77-52" name="__codelineno-77-52" href="#__codelineno-77-52"></a>
<a id="__codelineno-77-53" name="__codelineno-77-53" href="#__codelineno-77-53"></a>- container.namespaces.create
<a id="__codelineno-77-54" name="__codelineno-77-54" href="#__codelineno-77-54"></a>
<a id="__codelineno-77-55" name="__codelineno-77-55" href="#__codelineno-77-55"></a>
<a id="__codelineno-77-56" name="__codelineno-77-56" href="#__codelineno-77-56"></a>
<a id="__codelineno-77-57" name="__codelineno-77-57" href="#__codelineno-77-57"></a>- container.namespaces.get
<a id="__codelineno-77-58" name="__codelineno-77-58" href="#__codelineno-77-58"></a>
<a id="__codelineno-77-59" name="__codelineno-77-59" href="#__codelineno-77-59"></a>
<a id="__codelineno-77-60" name="__codelineno-77-60" href="#__codelineno-77-60"></a>
<a id="__codelineno-77-61" name="__codelineno-77-61" href="#__codelineno-77-61"></a>- container.pods.get
<a id="__codelineno-77-62" name="__codelineno-77-62" href="#__codelineno-77-62"></a>
<a id="__codelineno-77-63" name="__codelineno-77-63" href="#__codelineno-77-63"></a>
<a id="__codelineno-77-64" name="__codelineno-77-64" href="#__codelineno-77-64"></a>
<a id="__codelineno-77-65" name="__codelineno-77-65" href="#__codelineno-77-65"></a>- container.pods.list
<a id="__codelineno-77-66" name="__codelineno-77-66" href="#__codelineno-77-66"></a>
<a id="__codelineno-77-67" name="__codelineno-77-67" href="#__codelineno-77-67"></a>
<a id="__codelineno-77-68" name="__codelineno-77-68" href="#__codelineno-77-68"></a>
<a id="__codelineno-77-69" name="__codelineno-77-69" href="#__codelineno-77-69"></a>- container.secrets.create
<a id="__codelineno-77-70" name="__codelineno-77-70" href="#__codelineno-77-70"></a>
<a id="__codelineno-77-71" name="__codelineno-77-71" href="#__codelineno-77-71"></a>
<a id="__codelineno-77-72" name="__codelineno-77-72" href="#__codelineno-77-72"></a>
<a id="__codelineno-77-73" name="__codelineno-77-73" href="#__codelineno-77-73"></a>- container.secrets.delete
<a id="__codelineno-77-74" name="__codelineno-77-74" href="#__codelineno-77-74"></a>
<a id="__codelineno-77-75" name="__codelineno-77-75" href="#__codelineno-77-75"></a>
<a id="__codelineno-77-76" name="__codelineno-77-76" href="#__codelineno-77-76"></a>
<a id="__codelineno-77-77" name="__codelineno-77-77" href="#__codelineno-77-77"></a>- container.secrets.get
<a id="__codelineno-77-78" name="__codelineno-77-78" href="#__codelineno-77-78"></a>
<a id="__codelineno-77-79" name="__codelineno-77-79" href="#__codelineno-77-79"></a>
<a id="__codelineno-77-80" name="__codelineno-77-80" href="#__codelineno-77-80"></a>
<a id="__codelineno-77-81" name="__codelineno-77-81" href="#__codelineno-77-81"></a>- container.secrets.list
<a id="__codelineno-77-82" name="__codelineno-77-82" href="#__codelineno-77-82"></a>
<a id="__codelineno-77-83" name="__codelineno-77-83" href="#__codelineno-77-83"></a>
<a id="__codelineno-77-84" name="__codelineno-77-84" href="#__codelineno-77-84"></a>
<a id="__codelineno-77-85" name="__codelineno-77-85" href="#__codelineno-77-85"></a>- container.secrets.update
<a id="__codelineno-77-86" name="__codelineno-77-86" href="#__codelineno-77-86"></a>
<a id="__codelineno-77-87" name="__codelineno-77-87" href="#__codelineno-77-87"></a>
<a id="__codelineno-77-88" name="__codelineno-77-88" href="#__codelineno-77-88"></a>
<a id="__codelineno-77-89" name="__codelineno-77-89" href="#__codelineno-77-89"></a>- container.serviceAccounts.create
<a id="__codelineno-77-90" name="__codelineno-77-90" href="#__codelineno-77-90"></a>
<a id="__codelineno-77-91" name="__codelineno-77-91" href="#__codelineno-77-91"></a>
<a id="__codelineno-77-92" name="__codelineno-77-92" href="#__codelineno-77-92"></a>
<a id="__codelineno-77-93" name="__codelineno-77-93" href="#__codelineno-77-93"></a>- container.serviceAccounts.delete
<a id="__codelineno-77-94" name="__codelineno-77-94" href="#__codelineno-77-94"></a>
<a id="__codelineno-77-95" name="__codelineno-77-95" href="#__codelineno-77-95"></a>
<a id="__codelineno-77-96" name="__codelineno-77-96" href="#__codelineno-77-96"></a>
<a id="__codelineno-77-97" name="__codelineno-77-97" href="#__codelineno-77-97"></a>- container.serviceAccounts.get
<a id="__codelineno-77-98" name="__codelineno-77-98" href="#__codelineno-77-98"></a>
<a id="__codelineno-77-99" name="__codelineno-77-99" href="#__codelineno-77-99"></a>
<a id="__codelineno-77-100" name="__codelineno-77-100" href="#__codelineno-77-100"></a>
<a id="__codelineno-77-101" name="__codelineno-77-101" href="#__codelineno-77-101"></a>- iam.roles.create
<a id="__codelineno-77-102" name="__codelineno-77-102" href="#__codelineno-77-102"></a>
<a id="__codelineno-77-103" name="__codelineno-77-103" href="#__codelineno-77-103"></a>
<a id="__codelineno-77-104" name="__codelineno-77-104" href="#__codelineno-77-104"></a>
<a id="__codelineno-77-105" name="__codelineno-77-105" href="#__codelineno-77-105"></a>- iam.roles.list
<a id="__codelineno-77-106" name="__codelineno-77-106" href="#__codelineno-77-106"></a>
<a id="__codelineno-77-107" name="__codelineno-77-107" href="#__codelineno-77-107"></a>
<a id="__codelineno-77-108" name="__codelineno-77-108" href="#__codelineno-77-108"></a>
<a id="__codelineno-77-109" name="__codelineno-77-109" href="#__codelineno-77-109"></a>- iam.roles.update
<a id="__codelineno-77-110" name="__codelineno-77-110" href="#__codelineno-77-110"></a>
<a id="__codelineno-77-111" name="__codelineno-77-111" href="#__codelineno-77-111"></a>
<a id="__codelineno-77-112" name="__codelineno-77-112" href="#__codelineno-77-112"></a>
<a id="__codelineno-77-113" name="__codelineno-77-113" href="#__codelineno-77-113"></a>- iam.serviceAccounts.actAs
<a id="__codelineno-77-114" name="__codelineno-77-114" href="#__codelineno-77-114"></a>
<a id="__codelineno-77-115" name="__codelineno-77-115" href="#__codelineno-77-115"></a>
<a id="__codelineno-77-116" name="__codelineno-77-116" href="#__codelineno-77-116"></a>
<a id="__codelineno-77-117" name="__codelineno-77-117" href="#__codelineno-77-117"></a>- iam.serviceAccounts.create
<a id="__codelineno-77-118" name="__codelineno-77-118" href="#__codelineno-77-118"></a>
<a id="__codelineno-77-119" name="__codelineno-77-119" href="#__codelineno-77-119"></a>
<a id="__codelineno-77-120" name="__codelineno-77-120" href="#__codelineno-77-120"></a>
<a id="__codelineno-77-121" name="__codelineno-77-121" href="#__codelineno-77-121"></a>- iam.serviceAccounts.getIamPolicy
<a id="__codelineno-77-122" name="__codelineno-77-122" href="#__codelineno-77-122"></a>
<a id="__codelineno-77-123" name="__codelineno-77-123" href="#__codelineno-77-123"></a>
<a id="__codelineno-77-124" name="__codelineno-77-124" href="#__codelineno-77-124"></a>
<a id="__codelineno-77-125" name="__codelineno-77-125" href="#__codelineno-77-125"></a>- iam.serviceAccounts.list
<a id="__codelineno-77-126" name="__codelineno-77-126" href="#__codelineno-77-126"></a>
<a id="__codelineno-77-127" name="__codelineno-77-127" href="#__codelineno-77-127"></a>
<a id="__codelineno-77-128" name="__codelineno-77-128" href="#__codelineno-77-128"></a>
<a id="__codelineno-77-129" name="__codelineno-77-129" href="#__codelineno-77-129"></a>- iam.serviceAccounts.setIamPolicy
<a id="__codelineno-77-130" name="__codelineno-77-130" href="#__codelineno-77-130"></a>
<a id="__codelineno-77-131" name="__codelineno-77-131" href="#__codelineno-77-131"></a>
<a id="__codelineno-77-132" name="__codelineno-77-132" href="#__codelineno-77-132"></a>
<a id="__codelineno-77-133" name="__codelineno-77-133" href="#__codelineno-77-133"></a>- pubsub.subscriptions.create
<a id="__codelineno-77-134" name="__codelineno-77-134" href="#__codelineno-77-134"></a>
<a id="__codelineno-77-135" name="__codelineno-77-135" href="#__codelineno-77-135"></a>
<a id="__codelineno-77-136" name="__codelineno-77-136" href="#__codelineno-77-136"></a>
<a id="__codelineno-77-137" name="__codelineno-77-137" href="#__codelineno-77-137"></a>- pubsub.subscriptions.get
<a id="__codelineno-77-138" name="__codelineno-77-138" href="#__codelineno-77-138"></a>
<a id="__codelineno-77-139" name="__codelineno-77-139" href="#__codelineno-77-139"></a>
<a id="__codelineno-77-140" name="__codelineno-77-140" href="#__codelineno-77-140"></a>
<a id="__codelineno-77-141" name="__codelineno-77-141" href="#__codelineno-77-141"></a>- pubsub.subscriptions.list
<a id="__codelineno-77-142" name="__codelineno-77-142" href="#__codelineno-77-142"></a>
<a id="__codelineno-77-143" name="__codelineno-77-143" href="#__codelineno-77-143"></a>
<a id="__codelineno-77-144" name="__codelineno-77-144" href="#__codelineno-77-144"></a>
<a id="__codelineno-77-145" name="__codelineno-77-145" href="#__codelineno-77-145"></a>- pubsub.topics.attachSubscription
<a id="__codelineno-77-146" name="__codelineno-77-146" href="#__codelineno-77-146"></a>
<a id="__codelineno-77-147" name="__codelineno-77-147" href="#__codelineno-77-147"></a>
<a id="__codelineno-77-148" name="__codelineno-77-148" href="#__codelineno-77-148"></a>
<a id="__codelineno-77-149" name="__codelineno-77-149" href="#__codelineno-77-149"></a>- pubsub.topics.create
<a id="__codelineno-77-150" name="__codelineno-77-150" href="#__codelineno-77-150"></a>
<a id="__codelineno-77-151" name="__codelineno-77-151" href="#__codelineno-77-151"></a>
<a id="__codelineno-77-152" name="__codelineno-77-152" href="#__codelineno-77-152"></a>
<a id="__codelineno-77-153" name="__codelineno-77-153" href="#__codelineno-77-153"></a>- pubsub.topics.getIamPolicy
<a id="__codelineno-77-154" name="__codelineno-77-154" href="#__codelineno-77-154"></a>
<a id="__codelineno-77-155" name="__codelineno-77-155" href="#__codelineno-77-155"></a>
<a id="__codelineno-77-156" name="__codelineno-77-156" href="#__codelineno-77-156"></a>
<a id="__codelineno-77-157" name="__codelineno-77-157" href="#__codelineno-77-157"></a>- pubsub.topics.list
<a id="__codelineno-77-158" name="__codelineno-77-158" href="#__codelineno-77-158"></a>
<a id="__codelineno-77-159" name="__codelineno-77-159" href="#__codelineno-77-159"></a>
<a id="__codelineno-77-160" name="__codelineno-77-160" href="#__codelineno-77-160"></a>
<a id="__codelineno-77-161" name="__codelineno-77-161" href="#__codelineno-77-161"></a>- pubsub.topics.setIamPolicy
<a id="__codelineno-77-162" name="__codelineno-77-162" href="#__codelineno-77-162"></a>
<a id="__codelineno-77-163" name="__codelineno-77-163" href="#__codelineno-77-163"></a>
<a id="__codelineno-77-164" name="__codelineno-77-164" href="#__codelineno-77-164"></a>
<a id="__codelineno-77-165" name="__codelineno-77-165" href="#__codelineno-77-165"></a>- pubsub.topics.update
<a id="__codelineno-77-166" name="__codelineno-77-166" href="#__codelineno-77-166"></a>
<a id="__codelineno-77-167" name="__codelineno-77-167" href="#__codelineno-77-167"></a>
<a id="__codelineno-77-168" name="__codelineno-77-168" href="#__codelineno-77-168"></a>
<a id="__codelineno-77-169" name="__codelineno-77-169" href="#__codelineno-77-169"></a>- resourcemanager.projects.get
<a id="__codelineno-77-170" name="__codelineno-77-170" href="#__codelineno-77-170"></a>
<a id="__codelineno-77-171" name="__codelineno-77-171" href="#__codelineno-77-171"></a>
<a id="__codelineno-77-172" name="__codelineno-77-172" href="#__codelineno-77-172"></a>
<a id="__codelineno-77-173" name="__codelineno-77-173" href="#__codelineno-77-173"></a>- resourcemanager.projects.getIamPolicy
<a id="__codelineno-77-174" name="__codelineno-77-174" href="#__codelineno-77-174"></a>
<a id="__codelineno-77-175" name="__codelineno-77-175" href="#__codelineno-77-175"></a>
<a id="__codelineno-77-176" name="__codelineno-77-176" href="#__codelineno-77-176"></a>
<a id="__codelineno-77-177" name="__codelineno-77-177" href="#__codelineno-77-177"></a>- resourcemanager.projects.setIamPolicy
<a id="__codelineno-77-178" name="__codelineno-77-178" href="#__codelineno-77-178"></a>
<a id="__codelineno-77-179" name="__codelineno-77-179" href="#__codelineno-77-179"></a>
<a id="__codelineno-77-180" name="__codelineno-77-180" href="#__codelineno-77-180"></a>
<a id="__codelineno-77-181" name="__codelineno-77-181" href="#__codelineno-77-181"></a>- serviceusage.services.enable
<a id="__codelineno-77-182" name="__codelineno-77-182" href="#__codelineno-77-182"></a>
<a id="__codelineno-77-183" name="__codelineno-77-183" href="#__codelineno-77-183"></a>
<a id="__codelineno-77-184" name="__codelineno-77-184" href="#__codelineno-77-184"></a>
<a id="__codelineno-77-185" name="__codelineno-77-185" href="#__codelineno-77-185"></a>- serviceusage.services.get
<a id="__codelineno-77-186" name="__codelineno-77-186" href="#__codelineno-77-186"></a>
<a id="__codelineno-77-187" name="__codelineno-77-187" href="#__codelineno-77-187"></a>
<a id="__codelineno-77-188" name="__codelineno-77-188" href="#__codelineno-77-188"></a>
<a id="__codelineno-77-189" name="__codelineno-77-189" href="#__codelineno-77-189"></a>- serviceusage.services.list
<a id="__codelineno-77-190" name="__codelineno-77-190" href="#__codelineno-77-190"></a>
<a id="__codelineno-77-191" name="__codelineno-77-191" href="#__codelineno-77-191"></a>
<a id="__codelineno-77-192" name="__codelineno-77-192" href="#__codelineno-77-192"></a>
<a id="__codelineno-77-193" name="__codelineno-77-193" href="#__codelineno-77-193"></a>- serviceusage.services.use
</code></pre></div>
<p>Each group of permissions is used to handle the different resources included in the integration. Creation and access are for new resources, update is for reusing existing resources, and deletion is for uninstalling.</p>
<ul>
<li>container.configMaps: for mapping secrets and other variables used by the containers.</li>
<li>container.deployments: for the K8s' deployment within the cluster (which includes the pods, containers, etc.).</li>
<li>container.namespaces: for the K8s namespace in which we are deploying the resources.</li>
<li>container.pods: for the K8s pods.</li>
<li>container.secrets: for the K8s secrets in which to store the data-sensitive variables.</li>
<li>container.serviceAccounts: for the SA to be taken in the K8s context.</li>
<li>iam.roles: for the necessary permissions for data collection.</li>
<li>iam.serviceAccounts: for the general context SA.</li>
<li>resourcemanager.projects: for handling the project in which we are deploying our integration.</li>
<li>serviceusage.services: for handling the services' APIs.</li>
<li>pubsub.subscriptions: for the PubSub subscription we are using to collect and ingest logs.</li>
<li>
<p>pubsub.topics: for the PubSub topic we are using to collect and ingest logs.</p>
</li>
<li>
<p>Run the command below, replacing <code>&lt;your_project_ID&gt;</code> with the project ID where you want to deploy the Dynatrace integration.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>gcloud iam roles create dynatrace_monitor.helm_deployment --project=&lt;your_project_ID&gt; --file=dynatrace-gcp-monitor-helm-deployment-role.yaml
</code></pre></div>
<p>Be sure to add this role to your Google Cloud user. For details, see <a href="https://dt-url.net/vx03vid">Grant or revoke a single role√Ø¬ª¬ø</a>.</p>
<h3 id="configure-log-export_1">Configure log export<a class="headerlink" href="#configure-log-export_1" title="Permanent link">&para;</a></h3>
<ol>
<li>Run the following shell script in the Google Cloud project you've selected for deployment.</li>
</ol>
<p>Be sure to replace <code>&lt;your-subscription-name&gt;</code> and <code>&lt;your-topic-name&gt;</code> with your own values.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>wget https://raw.githubusercontent.com/dynatrace-oss/dynatrace-gcp-monitor/master/scripts/deploy-pubsub.sh
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a>
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a>
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a>chmod +x deploy-pubsub.sh
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>
<a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a>
<a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a>
<a id="__codelineno-79-9" name="__codelineno-79-9" href="#__codelineno-79-9"></a>./deploy-pubsub.sh --topic-name &lt;your-topic-name&gt; --subscription-name &lt;your-subscription-name&gt;
</code></pre></div>
<ol>
<li>Configure <a href="https://dt-url.net/4743r02">log export√Ø¬ª¬ø</a> to send the desired logs to the Google Cloud Pub/Sub topic created above.</li>
</ol>
<p>To monitor logs from multiple projects, you need to create <strong>Log Routing Sinks</strong> in each source project selecting as a destination for your main project (in which you also deployed the integration and the PubSub Topic and Subscription).
For more information, see <a href="https://dt-url.net/cl038gj">Route logs to supported destinations√Ø¬ª¬ø</a>.</p>
<h3 id="dynatrace-permissions_2">Dynatrace permissions<a class="headerlink" href="#dynatrace-permissions_2" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="/docs/manage/identity-access-management/access-tokens-and-oauth-clients/access-tokens#create-api-token" title="Learn the concept of an access token and its scopes.">Create an API token</a> and <a href="/docs/dynatrace-api/basics/dynatrace-api-authentication#token-permissions" title="Find out how to get authenticated to use the Dynatrace API.">enable the following permission</a>: <strong>Ingest logs</strong> (API v2).</li>
</ul>
<h3 id="log-ingestion_2">Log ingestion<a class="headerlink" href="#log-ingestion_2" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Determine where log ingestion will be performed, according to your deployment. This distinction is important when configuring the <a href="#param">parameters</a> for this integration.</p>
</li>
<li>
<p><strong>For SaaS deployments:</strong> SaaS log ingest, where log ingestion is performed directly through the Cluster API. Recommended</p>
</li>
<li><strong>For Managed deployments:</strong> You can use an existing ActiveGate for log ingestion. For information on how to deploy it, see <a href="/docs/ingest-from/dynatrace-activegate/installation" title="Learn how to configure ActiveGate">ActiveGate installation</a>.</li>
</ul>
<p>Because of GCP's implementation of Cloud Function 2nd gen, logs from those resources will be linked to the underlying Cloud Run instances. Both extensions will have to be enabled.</p>
<p>To learn more, visit <a href="https://dt-url.net/b6038q5">Google Cloud Functions version comparison√Ø¬ª¬ø</a>.</p>
<h2 id="install_2">Install<a class="headerlink" href="#install_2" title="Permanent link">&para;</a></h2>
<p>Complete the steps below to finish your setup.</p>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Download the Helm deployment package in Google Cloud Shell</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-logs-only#dwld "Set up log monitoring for Google Cloud services in a Kubernetes container (GKE).")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Configure parameter values</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-logs-only#param "Set up log monitoring for Google Cloud services in a Kubernetes container (GKE).")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Connect your Kubernetes cluster</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-logs-only#connect "Set up log monitoring for Google Cloud services in a Kubernetes container (GKE).")[<img alt="Step 4" src="https://dt-cdn.net/images/step-4-3f89d67d41.svg" title="Step 4" /></p>
<p><strong>Run the deployment script</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-logs-only#script "Set up log monitoring for Google Cloud services in a Kubernetes container (GKE).")</p>
<h3 id="step-1-download-the-helm-deployment-package-in-google-cloud-shell_1">Step 1 Download the Helm deployment package in Google Cloud Shell<a class="headerlink" href="#step-1-download-the-helm-deployment-package-in-google-cloud-shell_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a>wget -q &quot;https://github.com/dynatrace-oss/dynatrace-gcp-monitor/releases/latest/download/helm-deployment-package.tar&quot;; tar -xvf helm-deployment-package.tar; chmod +x helm-deployment-package/deploy-helm.sh
</code></pre></div>
<h3 id="step-2-configure-parameter-values_1">Step 2 Configure parameter values<a class="headerlink" href="#step-2-configure-parameter-values_1" title="Permanent link">&para;</a></h3>
<p>The Helm deployment package contains a <code>values.yaml</code> file with the necessary configuration for this deployment. Go to <code>helm-deployment-package/dynatrace-gcp-monitor</code>and edit the <code>values.yaml</code> file, setting the required and optional parameter values as follows.</p>
<p>You might want to store this file somewhere for future updates, since it will be needed in case of redeployments. Also, keep in mind that its schema can change. In such case, you should use the new file and only copy over the parameter values.</p>
<p><strong>Parameter name</strong></p>
<p><strong>Description</strong></p>
<p><strong>Default value</strong></p>
<p><code>gcpProjectId</code></p>
<p>Required The ID of the Google Cloud project you've selected for deployment.</p>
<p>Your current project ID</p>
<p><code>deploymentType</code></p>
<p>Required Set to <code>logs</code>.</p>
<p><code>all</code></p>
<p><code>dynatraceAccessKey</code></p>
<p>Required Your <a href="/docs/manage/identity-access-management/access-tokens-and-oauth-clients/access-tokens#create-api-token" title="Learn the concept of an access token and its scopes.">Dynatrace API token</a> with the <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#api" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">required permissions</a>.</p>
<p><code>dynatraceAccessKeySecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from Google Cloud Secret Manager, instead of using <code>dynatraceAccessKey</code>.</p>
<p><code>dynatraceUrlSecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from Google Cloud Secret Manager, instead of using <code>dynatraceUrl</code>.</p>
<p><code>dtSecurityContext</code></p>
<p>Optional Assign the attribute value used for data segmentation, analysis, and permission mapping within the Dynatrace platform. Refer to <a href="/docs/manage/identity-access-management/use-cases/access-security-context" title="Grant access to entities with security context">Grant access to entities with security context</a> for more information. If left empty, the value of <code>gcpProjectId</code> will be assigned automatically.</p>
<p>Value of <code>gcpProjectId</code></p>
<p><code>dynatraceUrl</code></p>
<p>Required For SaaS log ingestion, it's your environment URL (<code>https://&lt;your-environment-id&gt;.live.dynatrace.com</code>).</p>
<p><code>logsSubscriptionId</code></p>
<p>Required The ID of your log Sink Pub/Sub subscription. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#pubsub" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Configure log export</a>.</p>
<p><code>requireValidCertificate</code></p>
<p>Optional If set to <code>true</code>, Dynatrace requires the SSL certificate of your Dynatrace environment.<br />
For SaaS log ingestion, we recommend leaving the default value.</p>
<p><code>true</code></p>
<p><code>selfMonitoringEnabled</code></p>
<p>Optional Send custom metrics to Google Cloud to quickly diagnose if <code>dynatrace-gcp-monitor</code> processes and sends logs to Dynatrace properly.For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Self-monitoring metrics for the Dynatrace Google Cloud integration</a>.</p>
<p><code>false</code></p>
<p><code>serviceAccount</code></p>
<p>Optional Name of the service account to be created.</p>
<p><code>dockerImage</code></p>
<p>OptionalDynatrace Google Cloud Monitor Docker image. We recommend using the default value, but you can adapt it if needed.</p>
<p><code>dynatrace/dynatrace-gcp-monitor:v1-latest</code></p>
<p><code>logIngestContentMaxLength</code></p>
<p>Optional The maximum content length of a log event. Should be less than or equal to the setting on your Dynatrace environment.</p>
<p><code>8192</code></p>
<p><code>logIngestAttributeValueMaxLength</code></p>
<p>Optional The maximum length of the log event attribute value. If it exceeds the server limit, content will be truncated.</p>
<p><code>250</code></p>
<p><code>logIngestRequestMaxEvents</code></p>
<p>Optional The maximum number of log events in a single payload to the logs ingestion endpoint. If it exceeds the server limit, payload will be rejected with code <code>413</code>.</p>
<p><code>5000</code></p>
<p><code>logIngestRequestMaxSize</code></p>
<p>Optional The maximum size in bytes of a single payload to the logs ingestion endpoint. If it exceeds the server limit, payload will be rejected with code <code>413</code>.</p>
<p><code>1048576</code></p>
<p><code>logIngestEventMaxAgeSeconds</code></p>
<p>Optional Determines the maximum age of a forwarded log event. Should be less than or equal to the setting on your Dynatrace environment.</p>
<p><code>86400</code></p>
<p><code>clusterIpv4Cidr</code></p>
<p>Optional Set the IP address range for the pods in this cluster in CIDR notation, if you want to use a custom range.</p>
<p><code>servicesIpv4Cidr</code></p>
<p>Optional Set the IP range for the services IPs. It can be specified as a netmask size or as in the CIDR notion.</p>
<p><code>useCustomMasterCidr</code></p>
<p>Optional If set to <code>true</code>, you can specify the IPv4 CIDR range to use for the master network.</p>
<p><code>false</code></p>
<p><code>masterIpv4Cidr</code></p>
<p>Optional IPv4 CIDR range to use for the master network. Requires the <code>useCustomMasterCidr</code> value to be true.</p>
<p>For DDU consumptiom information, see <a href="#ddu">Monitoring consumption</a>.</p>
<h3 id="step-3-connect-your-kubernetes-cluster">Step 3 Connect your Kubernetes cluster<a class="headerlink" href="#step-3-connect-your-kubernetes-cluster" title="Permanent link">&para;</a></h3>
<ul>
<li>If you want to have a new GKE Autopilot cluster created by the deployment script, add <code>--create-autopilot-cluster</code> to the script. Setting up the connection to the cluster will happen automatically in this case and you can proceed to <a href="#script">step 4</a>.</li>
<li>If you run the deployment script on an existing standard GKE or GKE Autopilot cluster, you can connect to your cluster from the Google Cloud console or via terminal. Follow the instructions below.</li>
</ul>
<p>From the Google Cloud console</p>
<p>Via terminal</p>
<ol>
<li>In your Google Cloud console, go to your Kubernetes Engine.</li>
<li>Select <strong>Clusters</strong>, and then select <strong>Connect</strong>.</li>
<li>Select <strong>Run in Cloud Shell</strong>.</li>
</ol>
<p>Run the command below, making sure to replace</p>
<ul>
<li><code>&lt;cluster&gt;</code> with your cluster name</li>
<li><code>&lt;region&gt;</code> with the region where your cluster is running</li>
<li><code>&lt;project&gt;</code> with the project ID where your cluster is running</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a>gcloud container clusters get-credentials &lt;cluster&gt; --region &lt;region&gt; --project &lt;project&gt;
</code></pre></div>
<p>For details, see <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl#generate_kubeconfig_entry">Configuring cluster access for kubectl√Ø¬ª¬ø</a>.</p>
<h3 id="step-4-run-the-deployment-script">Step 4 Run the deployment script<a class="headerlink" href="#step-4-run-the-deployment-script" title="Permanent link">&para;</a></h3>
<ul>
<li>If you run the deployment script on an existing standard GKE or GKE Autopilot cluster, the deployment script will create an IAM service account with the necessary roles and deploy <code>dynatrace-gcp-monitor</code> to your Kubernetes cluster.</li>
<li>If you run the deployment script with the <code>--create-autopilot-cluster</code> option, the deployment script will automatically create the new GKE Autopilot cluster and deploy <code>dynatrace-gcp-monitor</code> to it.</li>
</ul>
<p>To run the deployment script, follow the instructions below.</p>
<p>Run on existing cluster</p>
<p>Run on new cluster</p>
<p>The latest versions of Google Cloud extensions will be uploaded. You have two options:</p>
<ul>
<li>Run the deployment script without parameters if you want to use the default values provided (<code>dynatrace-gcp-monitor-sa</code> for the IAM service account name and <code>dynatrace_monitor</code> for the IAM role name prefix):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a>cd helm-deployment-package
<a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a>
<a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a>
<a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a>
<a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a>./deploy-helm.sh
</code></pre></div>
<ul>
<li>Run the deployment script with parameters if you want to set your own values (be sure to replace the placeholders with your desired values):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a>cd helm-deployment-package
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a>
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a>./deploy-helm.sh [--role-name &lt;role-to-be-created/updated&gt;]
</code></pre></div>
<p>To keep the existing versions of present extensions and install the latest versions for the rest of the selected extensions, if they are not present, run the command below instead.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>cd helm-deployment-package
<a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>
<a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a>
<a id="__codelineno-84-4" name="__codelineno-84-4" href="#__codelineno-84-4"></a>
<a id="__codelineno-84-5" name="__codelineno-84-5" href="#__codelineno-84-5"></a>./deploy-helm.sh --without-extensions-upgrade
</code></pre></div>
<p>Run the command below. The latest versions of extensions will be uploaded.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>cd helm-deployment-package
<a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a>
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a>
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a>
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>./deploy-helm.sh --create-autopilot-cluster
</code></pre></div>
<p>To set a different name for the new cluster, run the command below instead, making sure to replace the placeholder (<code>&lt;name-of-new-cluster&gt;</code>) with your preferred name.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>cd helm-deployment-package
<a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>
<a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a>
<a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a>
<a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a>./deploy-helm.sh --create-autopilot-cluster --autopilot-cluster-name &lt;name-of-new-cluster&gt;
</code></pre></div>
<p>To keep the existing versions of present extensions and install the latest versions for the rest of the selected extensions, if they are not present, run the command below instead.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>cd helm-deployment-package
<a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a>
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a>
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a>./deploy-helm.sh --create-autopilot-cluster --without-extensions-upgrade
</code></pre></div>
<h2 id="verify-installation_2">Verify installation<a class="headerlink" href="#verify-installation_2" title="Permanent link">&para;</a></h2>
<p>To check whether installation was successful</p>
<ol>
<li>Check if the container is running.</li>
</ol>
<p>After the installation, it may take couple of minutes until the container is up and running.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>kubectl -n dynatrace get pods
</code></pre></div>
2. Check the container logs for errors or exceptions. You have two options:</p>
<p>In the Kubernetes CLI</p>
<p>In your Google Cloud console</p>
<p>Run the following command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>kubectl -n dynatrace logs -l app=dynatrace-gcp-monitor -c dynatrace-gcp-monitor-logs
</code></pre></div>
<p>To check the container logs for errors in your Google Cloud console</p>
<ol>
<li>Go to <strong>Logs explorer</strong>.</li>
<li>
<p>Use the filters below to get metric and/or log ingest logs from the Kubernetes container:</p>
</li>
<li>
<p><code>resource.type="k8s_container"</code></p>
</li>
<li>
<p><code>resource.labels.container_name="dynatrace-gcp-monitor-logs"</code></p>
</li>
<li>
<p>Check if dashboards are imported.</p>
</li>
</ol>
<p>In Dynatrace, go to <img alt="Dashboards Classic" src="https://dt-cdn.net/images/dashboards-classic-512-15764940e8.png" title="Dashboards Classic" /> <strong>Dashboards Classic</strong> and filter by <strong>Tag</strong> for <code>Google Cloud</code>. A number of dashboards for Google Cloud Services should be available.</p>
<h2 id="enable-alerting_2">Enable alerting<a class="headerlink" href="#enable-alerting_2" title="Permanent link">&para;</a></h2>
<p>To activate alerting, you need to enable metric events for alerting in Dynatrace.</p>
<p>To enable metric events</p>
<ol>
<li>Go to <strong>Settings</strong>.</li>
<li>In <strong>Anomaly detection</strong>, select <strong>Metric events</strong>.</li>
<li>Filter for Google Cloud alerts and turn on <strong>On/Off</strong> for the alerts you want to activate.</li>
</ol>
<h2 id="view-logs">View logs<a class="headerlink" href="#view-logs" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can view and analyze Google Cloud logs in Dynatrace if you go to <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong> and filter by <code>cloud.provider: gcp</code>.</p>
<h2 id="change-deployment-settings_2">Change deployment settings<a class="headerlink" href="#change-deployment-settings_2" title="Permanent link">&para;</a></h2>
<h3 id="change-parameters-from-valuesyaml_1">Change parameters from <code>values.yaml</code><a class="headerlink" href="#change-parameters-from-valuesyaml_1" title="Permanent link">&para;</a></h3>
<p>To load a new <code>values.yaml</code> file, you need to upgrade your Helm release.</p>
<p>To update your Helm release</p>
<ol>
<li>Find out what Helm release version you're using.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a>helm ls -n dynatrace
</code></pre></div>
2. Run the command below, making sure to replace <code>&lt;your-helm-release&gt;</code> with the value from the previous step.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>helm upgrade &lt;your-helm-release&gt; dynatrace-gcp-monitor -n dynatrace
</code></pre></div>
<p>For details, see <a href="https://helm.sh/docs/helm/helm_upgrade/">Helm upgrade√Ø¬ª¬ø</a>.</p>
<h3 id="change-deployment-type_1">Change deployment type<a class="headerlink" href="#change-deployment-type_1" title="Permanent link">&para;</a></h3>
<p>To change the deployment type (<code>all</code>, <code>metrics</code>, or <code>logs</code>)</p>
<ol>
<li>Find out what Helm release version you're using.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a>helm ls -n dynatrace
</code></pre></div>
2. Uninstall the release.</p>
<p>Be sure to replace <code>&lt;your-helm-release&gt;</code> with the release name from the previous output.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>helm uninstall &lt;your-helm-release&gt; -n dynatrace
</code></pre></div>
3. Edit <code>deploymentType</code> in <code>values.yaml</code> with the new value and save the file.
4. Run the deployment command again. For details, see <a href="#script">Run the deployment script</a>.</p>
<h2 id="verification_2">Verification<a class="headerlink" href="#verification_2" title="Permanent link">&para;</a></h2>
<p>To investigate potential deployment and connectivity issues</p>
<ol>
<li><a href="#verify">Verify installation</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Enable self-monitoring</a> Optional</li>
<li>
<p>Check the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file created during the installation process.</p>
</li>
<li>
<p>This file will be created each time the installation script runs.</p>
</li>
<li>The debug information won't contain sensitive data such as the Dynatrace access key.</li>
<li>
<p>If you are contacting a Dynatrace product expert via live chat:</p>
</li>
<li>
<p>Make sure to provide the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file described in the previous step.</p>
</li>
<li>
<p>Provide version information.</p>
<ul>
<li>For issues during installation, check the <code>version.txt</code> file.</li>
<li>For issues during runtime, <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">check container logs</a>.</li>
</ul>
</li>
</ol>
<h2 id="scaling-guide-for-logs_1">Scaling guide for logs<a class="headerlink" href="#scaling-guide-for-logs_1" title="Permanent link">&para;</a></h2>
<p>The default container with 1.25vCPU and 1Gi (with default configuration) can handle 8 GB of log throughput per hour. Achieving more throughput requires allocating more resources to the container (scale up), increasing the number of container replicas (scale out), and changing configuration numbers to use allocated resources efficiently. All config variables can be found and changed in <code>dynatrace-gcp-monitor-config</code>.</p>
<p>The following table presents tested configuration and achieved throughput with scaled up&amp;out containers:</p>
<p>Achieved throughput</p>
<p>Machine resources</p>
<p>Replica sets</p>
<p>Config variable values</p>
<p>~8MB/s =&gt; ~480MB/min</p>
<p>4vCPU 4Gi RAM</p>
<p>1</p>
<p><code>PARALLEL_PROCESSES=4</code>,<br />
<code>NUMBER_OF_CONCURRENT_MESSAGE_PULL_COROUTINES = 30</code>,<br />
<code>NUMBER_OF_CONCURRENT_PUSH_COROUTINES=20</code></p>
<p>~25MB/s =&gt; ~1.5GB/min =&gt; ~2TB/day</p>
<p>4vCPU 4Gi RAM</p>
<p>4</p>
<p><code>PARALLEL_PROCESSES=4</code>,<br />
<code>NUMBER_OF_CONCURRENT_MESSAGE_PULL_COROUTINES = 30</code>,<br />
<code>NUMBER_OF_CONCURRENT_PUSH_COROUTINES=20</code></p>
<p>~46MB/s =&gt; ~2.7GB/min =&gt; ~4TB/day</p>
<p>4vCPU 4Gi RAM</p>
<p>6</p>
<p><code>PARALLEL_PROCESSES=4</code>,<br />
<code>NUMBER_OF_CONCURRENT_MESSAGE_PULL_COROUTINES = 30</code>,<br />
<code>NUMBER_OF_CONCURRENT_PUSH_COROUTINES=20</code></p>
<h2 id="autoscaling-guide-for-logs_1">Autoscaling guide for logs<a class="headerlink" href="#autoscaling-guide-for-logs_1" title="Permanent link">&para;</a></h2>
<p>Autoscaling works only for <code>logs</code> type of deployment, not <code>all</code>.</p>
<p>We recommend manually scaling the container to have a 4vCPU 4Gi machine and then enabling autoscaling.</p>
<p>GCP provides autoscaling of containers in both directions: <strong>horizontal</strong> and <strong>vertical</strong>. However, Dynatrace recommends only <strong>horizontal</strong> scaling.</p>
<p>If you have a 4vCPU 4Gi machine, you can enable autoscaling <strong>horizontally</strong>. However, we <strong>don't</strong> recommend scaling horizontally with the base resources of the container (1.25vCPU, 1Gi). It hasn't been proven to be efficient during testing. One 4vCPU machine does better than four 1vCPU machines. To enable autoscaling horizontally, use the horizontal autoscaling command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a>kubectl autoscale deployment dynatrace-gcp-monitor --namespace dynatrace --cpu-percent=90 --min=1 --max=6
</code></pre></div>
<p>Autoscaling is recommended only when you have a minimum of 450 MB/min throughput and can provide a 4vCPU 4Gi RAM machine. Autoscaling is only scaling out, not scaling the machine up.</p>
<p>We <strong>don't</strong> recommend scaling <strong>vertically</strong> because every time a machine is scaled up, an environment variable needs to be changed to create more processes corresponding to machine cores.</p>
<h2 id="uninstall_2">Uninstall<a class="headerlink" href="#uninstall_2" title="Permanent link">&para;</a></h2>
<ol>
<li>Find out what Helm release version you're using.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a>helm ls -n dynatrace
</code></pre></div>
<ol>
<li>Uninstall the release.</li>
</ol>
<p>Be sure to replace <code>&lt;your-helm-release&gt;</code> with the release name from the previous output.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a>helm uninstall &lt;your-helm-release&gt; -n dynatrace
</code></pre></div>
<p>Alternatively, you can delete the namespace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a>kubectl delete namespace dynatrace
</code></pre></div>
<ol>
<li>To remove all monitoring assets (such as dashboards and alerts) from Dynatrace, you need to remove all Google Cloud extensions.</li>
</ol>
<p>You can find and delete relevant extensions via Dynatrace Hub.</p>
<p>Make sure to uninstall the following resources manually:</p>
<ul>
<li>The initial Role created and attached to the Service Account that you used to deploy the integration.</li>
<li>The PubSub Topic.</li>
<li>The PubSub Subscription.</li>
<li>The LogRoute Sink.</li>
</ul>
<h2 id="monitoring-consumption_3">Monitoring consumption<a class="headerlink" href="#monitoring-consumption_3" title="Permanent link">&para;</a></h2>
<p>DDU consumption applies to cloud Log Monitoring. See <a href="/docs/license/monitoring-consumption-classic/davis-data-units/log-monitoring-consumption" title="Understand how the volume of DDU consumption is calculated for Dynatrace Log Monitoring Classic.">DDUs for Log Monitoring</a> for details.</p>
<h2 id="related-topics_11">Related topics<a class="headerlink" href="#related-topics_11" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Google-Cloud-Monitor-Troubleshooting/ta-p/243796">Google Cloud Monitor Troubleshooting√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-set-up-gcp-integration-metrics-onlymd">Source: set-up-gcp-integration-metrics-only.md<a class="headerlink" href="#source-set-up-gcp-integration-metrics-onlymd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Set up the Dynatrace Google Cloud metric integration on a GKE cluster
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-metrics-only
scraped: 2026-02-17T05:06:58.000813</p>
<hr />
<h1 id="set-up-the-dynatrace-google-cloud-metric-integration-on-a-gke-cluster">Set up the Dynatrace Google Cloud metric integration on a GKE cluster<a class="headerlink" href="#set-up-the-dynatrace-google-cloud-metric-integration-on-a-gke-cluster" title="Permanent link">&para;</a></h1>
<h1 id="set-up-the-dynatrace-google-cloud-metric-integration-on-a-gke-cluster_1">Set up the Dynatrace Google Cloud metric integration on a GKE cluster<a class="headerlink" href="#set-up-the-dynatrace-google-cloud-metric-integration-on-a-gke-cluster_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>15-min read</li>
<li>Updated on Oct 08, 2024</li>
</ul>
<p>Dynatrace version 1.230+</p>
<p>As an alternative to the <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">main deployment</a>, that provides Google Cloud monitoring for both metrics and logs, you can choose to set up monitoring for metrics only. In this scenario, you'll run the deployment script in Google Cloud Shell. Instructions will depend on the location where you want the deployment script to run:</p>
<ul>
<li>On a new GKE Autopilot cluster created automatically Recommended</li>
<li>On an existing GKE standard or GKE Autopilot cluster</li>
</ul>
<p>During setup, GKE will run a metric forwarder container. After installation, you'll get metrics, dashboards, and alerts for your configured services in Dynatrace.</p>
<p>For other deployment options, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide" title="Other options to set up log and/or metric monitoring for Google Cloud services">Alternative deployment scenarios</a>.</p>
<p>This page describes how to install version 1.0 of the Google Cloud integration on a GKE cluster.</p>
<ul>
<li>If you already have an <a href="/docs/ingest-from/google-cloud-platform/legacy/deployment-k8s-container-legacy" title="Set up log and metric monitoring for GCP services in a Kubernetes container.">earlier version</a> installed, you need to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function" title="Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.">migrate</a>.</li>
</ul>
<h2 id="limitations_4">Limitations<a class="headerlink" href="#limitations_4" title="Permanent link">&para;</a></h2>
<p>Dynatrace Google Cloud metric integration supports up to 50 Google Cloud projects with the standard deployment. To monitor larger environments, you need to enable metrics scope. See <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">Monitor multiple Google Cloud projects - Large environments</a>.</p>
<h2 id="prerequisites_12">Prerequisites<a class="headerlink" href="#prerequisites_12" title="Permanent link">&para;</a></h2>
<p>To deploy the integration, you need to make sure the following requirements are met on the machine where you are running the installation.</p>
<ul>
<li>Linux OS only</li>
<li>Internet access</li>
<li>GKE Cluster access</li>
<li>Dynatrace environment access</li>
</ul>
<p>You need to configure the Dynatrace endpoint (environment, cluster or ActiveGate URL) to which the GKE cluster should send metrics and logs. Make sure that you have direct network access or, if there is a proxy or any other component present in between, that communication is not affected.</p>
<h3 id="tools_3">Tools<a class="headerlink" href="#tools_3" title="Permanent link">&para;</a></h3>
<p>You can deploy the Dynatrace GCP integration in Google Cloud Shell or in bash.</p>
<p>If you use bash, you need to install:</p>
<ul>
<li><a href="https://dt-url.net/e8110336">Google Cloud SDK√Ø¬ª¬ø</a></li>
<li><a href="https://kubernetes.io/docs/tasks/tools/">kubectl√Ø¬ª¬ø</a></li>
<li><a href="https://helm.sh/docs/intro/install/">helm√Ø¬ª¬ø</a></li>
<li><a href="https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64">jq (version 1.6)√Ø¬ª¬ø</a></li>
<li><a href="https://github.com/mikefarah/yq/releases/download/v4.9.8/yq_linux_amd64">yq (version 4.9.x+)√Ø¬ª¬ø</a></li>
<li>curl</li>
<li>unzip</li>
</ul>
<h3 id="google-cloud-permissions_2">Google Cloud permissions<a class="headerlink" href="#google-cloud-permissions_2" title="Permanent link">&para;</a></h3>
<p>Running the deployment script requires a list of permissions. You need to create a custom role (see below) and use it to deploy <code>dynatrace-gcp-monitor</code>.</p>
<ol>
<li>Create a YAML file named <code>dynatrace-gcp-monitor-helm-deployment-role.yaml</code> with the following content:</li>
</ol>
<p>dynatrace-gcp-monitor-helm-deployment-role.yaml</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a>title: Dynatrace GCP Monitor helm deployment role
<a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>
<a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a>
<a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a>
<a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a>description: Role for Dynatrace GCP Monitor helm and pubsub deployment
<a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a>
<a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a>
<a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a>
<a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a>stage: GA
<a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a>
<a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a>
<a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a>
<a id="__codelineno-98-13" name="__codelineno-98-13" href="#__codelineno-98-13"></a>includedPermissions:
<a id="__codelineno-98-14" name="__codelineno-98-14" href="#__codelineno-98-14"></a>
<a id="__codelineno-98-15" name="__codelineno-98-15" href="#__codelineno-98-15"></a>
<a id="__codelineno-98-16" name="__codelineno-98-16" href="#__codelineno-98-16"></a>
<a id="__codelineno-98-17" name="__codelineno-98-17" href="#__codelineno-98-17"></a>- container.clusters.get
<a id="__codelineno-98-18" name="__codelineno-98-18" href="#__codelineno-98-18"></a>
<a id="__codelineno-98-19" name="__codelineno-98-19" href="#__codelineno-98-19"></a>
<a id="__codelineno-98-20" name="__codelineno-98-20" href="#__codelineno-98-20"></a>
<a id="__codelineno-98-21" name="__codelineno-98-21" href="#__codelineno-98-21"></a>- container.configMaps.create
<a id="__codelineno-98-22" name="__codelineno-98-22" href="#__codelineno-98-22"></a>
<a id="__codelineno-98-23" name="__codelineno-98-23" href="#__codelineno-98-23"></a>
<a id="__codelineno-98-24" name="__codelineno-98-24" href="#__codelineno-98-24"></a>
<a id="__codelineno-98-25" name="__codelineno-98-25" href="#__codelineno-98-25"></a>- container.configMaps.delete
<a id="__codelineno-98-26" name="__codelineno-98-26" href="#__codelineno-98-26"></a>
<a id="__codelineno-98-27" name="__codelineno-98-27" href="#__codelineno-98-27"></a>
<a id="__codelineno-98-28" name="__codelineno-98-28" href="#__codelineno-98-28"></a>
<a id="__codelineno-98-29" name="__codelineno-98-29" href="#__codelineno-98-29"></a>- container.configMaps.get
<a id="__codelineno-98-30" name="__codelineno-98-30" href="#__codelineno-98-30"></a>
<a id="__codelineno-98-31" name="__codelineno-98-31" href="#__codelineno-98-31"></a>
<a id="__codelineno-98-32" name="__codelineno-98-32" href="#__codelineno-98-32"></a>
<a id="__codelineno-98-33" name="__codelineno-98-33" href="#__codelineno-98-33"></a>- container.configMaps.update
<a id="__codelineno-98-34" name="__codelineno-98-34" href="#__codelineno-98-34"></a>
<a id="__codelineno-98-35" name="__codelineno-98-35" href="#__codelineno-98-35"></a>
<a id="__codelineno-98-36" name="__codelineno-98-36" href="#__codelineno-98-36"></a>
<a id="__codelineno-98-37" name="__codelineno-98-37" href="#__codelineno-98-37"></a>- container.deployments.create
<a id="__codelineno-98-38" name="__codelineno-98-38" href="#__codelineno-98-38"></a>
<a id="__codelineno-98-39" name="__codelineno-98-39" href="#__codelineno-98-39"></a>
<a id="__codelineno-98-40" name="__codelineno-98-40" href="#__codelineno-98-40"></a>
<a id="__codelineno-98-41" name="__codelineno-98-41" href="#__codelineno-98-41"></a>- container.deployments.delete
<a id="__codelineno-98-42" name="__codelineno-98-42" href="#__codelineno-98-42"></a>
<a id="__codelineno-98-43" name="__codelineno-98-43" href="#__codelineno-98-43"></a>
<a id="__codelineno-98-44" name="__codelineno-98-44" href="#__codelineno-98-44"></a>
<a id="__codelineno-98-45" name="__codelineno-98-45" href="#__codelineno-98-45"></a>- container.deployments.get
<a id="__codelineno-98-46" name="__codelineno-98-46" href="#__codelineno-98-46"></a>
<a id="__codelineno-98-47" name="__codelineno-98-47" href="#__codelineno-98-47"></a>
<a id="__codelineno-98-48" name="__codelineno-98-48" href="#__codelineno-98-48"></a>
<a id="__codelineno-98-49" name="__codelineno-98-49" href="#__codelineno-98-49"></a>- container.deployments.update
<a id="__codelineno-98-50" name="__codelineno-98-50" href="#__codelineno-98-50"></a>
<a id="__codelineno-98-51" name="__codelineno-98-51" href="#__codelineno-98-51"></a>
<a id="__codelineno-98-52" name="__codelineno-98-52" href="#__codelineno-98-52"></a>
<a id="__codelineno-98-53" name="__codelineno-98-53" href="#__codelineno-98-53"></a>- container.namespaces.create
<a id="__codelineno-98-54" name="__codelineno-98-54" href="#__codelineno-98-54"></a>
<a id="__codelineno-98-55" name="__codelineno-98-55" href="#__codelineno-98-55"></a>
<a id="__codelineno-98-56" name="__codelineno-98-56" href="#__codelineno-98-56"></a>
<a id="__codelineno-98-57" name="__codelineno-98-57" href="#__codelineno-98-57"></a>- container.namespaces.get
<a id="__codelineno-98-58" name="__codelineno-98-58" href="#__codelineno-98-58"></a>
<a id="__codelineno-98-59" name="__codelineno-98-59" href="#__codelineno-98-59"></a>
<a id="__codelineno-98-60" name="__codelineno-98-60" href="#__codelineno-98-60"></a>
<a id="__codelineno-98-61" name="__codelineno-98-61" href="#__codelineno-98-61"></a>- container.pods.get
<a id="__codelineno-98-62" name="__codelineno-98-62" href="#__codelineno-98-62"></a>
<a id="__codelineno-98-63" name="__codelineno-98-63" href="#__codelineno-98-63"></a>
<a id="__codelineno-98-64" name="__codelineno-98-64" href="#__codelineno-98-64"></a>
<a id="__codelineno-98-65" name="__codelineno-98-65" href="#__codelineno-98-65"></a>- container.pods.list
<a id="__codelineno-98-66" name="__codelineno-98-66" href="#__codelineno-98-66"></a>
<a id="__codelineno-98-67" name="__codelineno-98-67" href="#__codelineno-98-67"></a>
<a id="__codelineno-98-68" name="__codelineno-98-68" href="#__codelineno-98-68"></a>
<a id="__codelineno-98-69" name="__codelineno-98-69" href="#__codelineno-98-69"></a>- container.secrets.create
<a id="__codelineno-98-70" name="__codelineno-98-70" href="#__codelineno-98-70"></a>
<a id="__codelineno-98-71" name="__codelineno-98-71" href="#__codelineno-98-71"></a>
<a id="__codelineno-98-72" name="__codelineno-98-72" href="#__codelineno-98-72"></a>
<a id="__codelineno-98-73" name="__codelineno-98-73" href="#__codelineno-98-73"></a>- container.secrets.delete
<a id="__codelineno-98-74" name="__codelineno-98-74" href="#__codelineno-98-74"></a>
<a id="__codelineno-98-75" name="__codelineno-98-75" href="#__codelineno-98-75"></a>
<a id="__codelineno-98-76" name="__codelineno-98-76" href="#__codelineno-98-76"></a>
<a id="__codelineno-98-77" name="__codelineno-98-77" href="#__codelineno-98-77"></a>- container.secrets.get
<a id="__codelineno-98-78" name="__codelineno-98-78" href="#__codelineno-98-78"></a>
<a id="__codelineno-98-79" name="__codelineno-98-79" href="#__codelineno-98-79"></a>
<a id="__codelineno-98-80" name="__codelineno-98-80" href="#__codelineno-98-80"></a>
<a id="__codelineno-98-81" name="__codelineno-98-81" href="#__codelineno-98-81"></a>- container.secrets.list
<a id="__codelineno-98-82" name="__codelineno-98-82" href="#__codelineno-98-82"></a>
<a id="__codelineno-98-83" name="__codelineno-98-83" href="#__codelineno-98-83"></a>
<a id="__codelineno-98-84" name="__codelineno-98-84" href="#__codelineno-98-84"></a>
<a id="__codelineno-98-85" name="__codelineno-98-85" href="#__codelineno-98-85"></a>- container.secrets.update
<a id="__codelineno-98-86" name="__codelineno-98-86" href="#__codelineno-98-86"></a>
<a id="__codelineno-98-87" name="__codelineno-98-87" href="#__codelineno-98-87"></a>
<a id="__codelineno-98-88" name="__codelineno-98-88" href="#__codelineno-98-88"></a>
<a id="__codelineno-98-89" name="__codelineno-98-89" href="#__codelineno-98-89"></a>- container.serviceAccounts.create
<a id="__codelineno-98-90" name="__codelineno-98-90" href="#__codelineno-98-90"></a>
<a id="__codelineno-98-91" name="__codelineno-98-91" href="#__codelineno-98-91"></a>
<a id="__codelineno-98-92" name="__codelineno-98-92" href="#__codelineno-98-92"></a>
<a id="__codelineno-98-93" name="__codelineno-98-93" href="#__codelineno-98-93"></a>- container.serviceAccounts.delete
<a id="__codelineno-98-94" name="__codelineno-98-94" href="#__codelineno-98-94"></a>
<a id="__codelineno-98-95" name="__codelineno-98-95" href="#__codelineno-98-95"></a>
<a id="__codelineno-98-96" name="__codelineno-98-96" href="#__codelineno-98-96"></a>
<a id="__codelineno-98-97" name="__codelineno-98-97" href="#__codelineno-98-97"></a>- container.serviceAccounts.get
<a id="__codelineno-98-98" name="__codelineno-98-98" href="#__codelineno-98-98"></a>
<a id="__codelineno-98-99" name="__codelineno-98-99" href="#__codelineno-98-99"></a>
<a id="__codelineno-98-100" name="__codelineno-98-100" href="#__codelineno-98-100"></a>
<a id="__codelineno-98-101" name="__codelineno-98-101" href="#__codelineno-98-101"></a>- iam.roles.create
<a id="__codelineno-98-102" name="__codelineno-98-102" href="#__codelineno-98-102"></a>
<a id="__codelineno-98-103" name="__codelineno-98-103" href="#__codelineno-98-103"></a>
<a id="__codelineno-98-104" name="__codelineno-98-104" href="#__codelineno-98-104"></a>
<a id="__codelineno-98-105" name="__codelineno-98-105" href="#__codelineno-98-105"></a>- iam.roles.list
<a id="__codelineno-98-106" name="__codelineno-98-106" href="#__codelineno-98-106"></a>
<a id="__codelineno-98-107" name="__codelineno-98-107" href="#__codelineno-98-107"></a>
<a id="__codelineno-98-108" name="__codelineno-98-108" href="#__codelineno-98-108"></a>
<a id="__codelineno-98-109" name="__codelineno-98-109" href="#__codelineno-98-109"></a>- iam.roles.update
<a id="__codelineno-98-110" name="__codelineno-98-110" href="#__codelineno-98-110"></a>
<a id="__codelineno-98-111" name="__codelineno-98-111" href="#__codelineno-98-111"></a>
<a id="__codelineno-98-112" name="__codelineno-98-112" href="#__codelineno-98-112"></a>
<a id="__codelineno-98-113" name="__codelineno-98-113" href="#__codelineno-98-113"></a>- iam.serviceAccounts.actAs
<a id="__codelineno-98-114" name="__codelineno-98-114" href="#__codelineno-98-114"></a>
<a id="__codelineno-98-115" name="__codelineno-98-115" href="#__codelineno-98-115"></a>
<a id="__codelineno-98-116" name="__codelineno-98-116" href="#__codelineno-98-116"></a>
<a id="__codelineno-98-117" name="__codelineno-98-117" href="#__codelineno-98-117"></a>- iam.serviceAccounts.create
<a id="__codelineno-98-118" name="__codelineno-98-118" href="#__codelineno-98-118"></a>
<a id="__codelineno-98-119" name="__codelineno-98-119" href="#__codelineno-98-119"></a>
<a id="__codelineno-98-120" name="__codelineno-98-120" href="#__codelineno-98-120"></a>
<a id="__codelineno-98-121" name="__codelineno-98-121" href="#__codelineno-98-121"></a>- iam.serviceAccounts.getIamPolicy
<a id="__codelineno-98-122" name="__codelineno-98-122" href="#__codelineno-98-122"></a>
<a id="__codelineno-98-123" name="__codelineno-98-123" href="#__codelineno-98-123"></a>
<a id="__codelineno-98-124" name="__codelineno-98-124" href="#__codelineno-98-124"></a>
<a id="__codelineno-98-125" name="__codelineno-98-125" href="#__codelineno-98-125"></a>- iam.serviceAccounts.list
<a id="__codelineno-98-126" name="__codelineno-98-126" href="#__codelineno-98-126"></a>
<a id="__codelineno-98-127" name="__codelineno-98-127" href="#__codelineno-98-127"></a>
<a id="__codelineno-98-128" name="__codelineno-98-128" href="#__codelineno-98-128"></a>
<a id="__codelineno-98-129" name="__codelineno-98-129" href="#__codelineno-98-129"></a>- iam.serviceAccounts.setIamPolicy
<a id="__codelineno-98-130" name="__codelineno-98-130" href="#__codelineno-98-130"></a>
<a id="__codelineno-98-131" name="__codelineno-98-131" href="#__codelineno-98-131"></a>
<a id="__codelineno-98-132" name="__codelineno-98-132" href="#__codelineno-98-132"></a>
<a id="__codelineno-98-133" name="__codelineno-98-133" href="#__codelineno-98-133"></a>- resourcemanager.projects.get
<a id="__codelineno-98-134" name="__codelineno-98-134" href="#__codelineno-98-134"></a>
<a id="__codelineno-98-135" name="__codelineno-98-135" href="#__codelineno-98-135"></a>
<a id="__codelineno-98-136" name="__codelineno-98-136" href="#__codelineno-98-136"></a>
<a id="__codelineno-98-137" name="__codelineno-98-137" href="#__codelineno-98-137"></a>- resourcemanager.projects.getIamPolicy
<a id="__codelineno-98-138" name="__codelineno-98-138" href="#__codelineno-98-138"></a>
<a id="__codelineno-98-139" name="__codelineno-98-139" href="#__codelineno-98-139"></a>
<a id="__codelineno-98-140" name="__codelineno-98-140" href="#__codelineno-98-140"></a>
<a id="__codelineno-98-141" name="__codelineno-98-141" href="#__codelineno-98-141"></a>- resourcemanager.projects.setIamPolicy
<a id="__codelineno-98-142" name="__codelineno-98-142" href="#__codelineno-98-142"></a>
<a id="__codelineno-98-143" name="__codelineno-98-143" href="#__codelineno-98-143"></a>
<a id="__codelineno-98-144" name="__codelineno-98-144" href="#__codelineno-98-144"></a>
<a id="__codelineno-98-145" name="__codelineno-98-145" href="#__codelineno-98-145"></a>- serviceusage.services.enable
<a id="__codelineno-98-146" name="__codelineno-98-146" href="#__codelineno-98-146"></a>
<a id="__codelineno-98-147" name="__codelineno-98-147" href="#__codelineno-98-147"></a>
<a id="__codelineno-98-148" name="__codelineno-98-148" href="#__codelineno-98-148"></a>
<a id="__codelineno-98-149" name="__codelineno-98-149" href="#__codelineno-98-149"></a>- serviceusage.services.get
<a id="__codelineno-98-150" name="__codelineno-98-150" href="#__codelineno-98-150"></a>
<a id="__codelineno-98-151" name="__codelineno-98-151" href="#__codelineno-98-151"></a>
<a id="__codelineno-98-152" name="__codelineno-98-152" href="#__codelineno-98-152"></a>
<a id="__codelineno-98-153" name="__codelineno-98-153" href="#__codelineno-98-153"></a>- serviceusage.services.list
<a id="__codelineno-98-154" name="__codelineno-98-154" href="#__codelineno-98-154"></a>
<a id="__codelineno-98-155" name="__codelineno-98-155" href="#__codelineno-98-155"></a>
<a id="__codelineno-98-156" name="__codelineno-98-156" href="#__codelineno-98-156"></a>
<a id="__codelineno-98-157" name="__codelineno-98-157" href="#__codelineno-98-157"></a>- serviceusage.services.use
</code></pre></div>
<p>Each group of permissions is used to handle the different resources included in the integration. Creation and access are for new resources, update is for reusing existing resources, and deletion is for uninstalling.</p>
<ul>
<li>container.configMaps: for mapping secrets and other variables used by the containers.</li>
<li>container.deployments: for the K8s' deployment within the cluster (which includes the pods, containers, etc.).</li>
<li>container.namespaces: for the K8s namespace in which we are deploying the resources.</li>
<li>container.pods: for the K8s pods.</li>
<li>container.secrets: for the K8s secrets in which to store the data-sensitive variables.</li>
<li>container.serviceAccounts: for the SA to be taken in the K8s context.</li>
<li>iam.roles: for the necessary permissions for metrics collection.</li>
<li>iam.serviceAccounts: for the general context SA.</li>
<li>resourcemanager.projects: for handling the project in which we are deploying our integration.</li>
<li>
<p>serviceusage.services: for handling the services' APIs.</p>
</li>
<li>
<p>Run the command below, replacing <code>&lt;your_project_ID&gt;</code> with the project ID where you want to deploy the Dynatrace integration.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>gcloud iam roles create dynatrace_monitor.helm_deployment --project=&lt;your_project_ID&gt; --file=dynatrace-gcp-monitor-helm-deployment-role.yaml
</code></pre></div>
<p>Be sure to add this role to your Google Cloud user. For details, see <a href="https://dt-url.net/vx03vid">Grant or revoke a single role√Ø¬ª¬ø</a>.</p>
<h3 id="google-cloud-settings">Google Cloud settings<a class="headerlink" href="#google-cloud-settings" title="Permanent link">&para;</a></h3>
<p>The location where you deploy the integration determines whether you need to change additional settings.</p>
<h4 id="deploy-on-a-gke-autopilot-cluster">Deploy on a GKE Autopilot cluster<a class="headerlink" href="#deploy-on-a-gke-autopilot-cluster" title="Permanent link">&para;</a></h4>
<p>If you deploy the integration on an existing GKE Autopilot cluster or on a new Autopilot cluster that will be automatically created by the deployment script, you don't need to make any additional settings.</p>
<h4 id="deploy-on-a-gke-standard-cluster">Deploy on a GKE standard cluster<a class="headerlink" href="#deploy-on-a-gke-standard-cluster" title="Permanent link">&para;</a></h4>
<p>If you deploy the integration on an existing GKE standard cluster, you need to:</p>
<ul>
<li><a href="https://dt-url.net/2j23qqv">Enable Workload Identity on a cluster.√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/an43q2s">Enable <code>GKE_METADATA</code> on the GKE node pools.√Ø¬ª¬ø</a></li>
</ul>
<h3 id="dynatrace-permissions_3">Dynatrace permissions<a class="headerlink" href="#dynatrace-permissions_3" title="Permanent link">&para;</a></h3>
<p>You need to create a token with a set of permissions.</p>
<ol>
<li>Go to <strong>Access tokens</strong>.</li>
<li>Select <strong>Generate new token</strong>.</li>
<li>Enter a name for your token.</li>
<li>Under <strong>Template</strong>, select <code>GCP Services Monitoring</code>.</li>
<li>Select <strong>Generate</strong>.</li>
<li>Copy the generated token to the clipboard. Store the token in a password manager for future use.</li>
</ol>
<p>Alternatively, you can create the token and add permissions manually.</p>
<p>Add manually</p>
<p><a href="/docs/manage/identity-access-management/access-tokens-and-oauth-clients/access-tokens#create-api-token" title="Learn the concept of an access token and its scopes.">Create an API token</a> and <a href="/docs/dynatrace-api/basics/dynatrace-api-authentication#token-permissions" title="Find out how to get authenticated to use the Dynatrace API.">enable the following permissions</a>:</p>
<ul>
<li>
<p>API v1:</p>
</li>
<li>
<p><strong>Read configuration</strong></p>
</li>
<li><strong>Write configuration</strong></li>
<li>
<p>API v2:</p>
</li>
<li>
<p><strong>Ingest metrics</strong></p>
</li>
<li><strong>Read extensions</strong></li>
<li><strong>Write extensions</strong></li>
<li><strong>Read extensions monitoring configuration</strong></li>
<li><strong>Write extensions monitoring configuration</strong></li>
<li><strong>Read extensions environment configuration</strong></li>
<li><strong>Write extensions environment configuration</strong></li>
<li><strong>Manage metadata of Hub items</strong></li>
<li><strong>Read Hub related data</strong></li>
<li><strong>Install and update Hub items</strong></li>
</ul>
<h2 id="install_3">Install<a class="headerlink" href="#install_3" title="Permanent link">&para;</a></h2>
<p>Complete the steps below to finish your setup.</p>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Download the Helm deployment package in Google Cloud Shell</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-metrics-only#dwld "Set up metric monitoring for Google Cloud services on a GKE cluster.")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Configure parameter values</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-metrics-only#params "Set up metric monitoring for Google Cloud services on a GKE cluster.")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Connect your Kubernetes cluster</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-metrics-only#connect "Set up metric monitoring for Google Cloud services on a GKE cluster.")[<img alt="Step 4" src="https://dt-cdn.net/images/step-4-3f89d67d41.svg" title="Step 4" /></p>
<p><strong>Run the deployment script</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-metrics-only#script "Set up metric monitoring for Google Cloud services on a GKE cluster.")</p>
<h3 id="step-1-download-the-helm-deployment-package-in-google-cloud-shell_2">Step 1 Download the Helm deployment package in Google Cloud Shell<a class="headerlink" href="#step-1-download-the-helm-deployment-package-in-google-cloud-shell_2" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a>wget -q &quot;https://github.com/dynatrace-oss/dynatrace-gcp-monitor/releases/latest/download/helm-deployment-package.tar&quot;; tar -xvf helm-deployment-package.tar; chmod +x helm-deployment-package/deploy-helm.sh
</code></pre></div>
<h3 id="step-2-configure-parameter-values_2">Step 2 Configure parameter values<a class="headerlink" href="#step-2-configure-parameter-values_2" title="Permanent link">&para;</a></h3>
<ol>
<li>The Helm deployment package contains a <code>values.yaml</code> file with the necessary configuration for this deployment. Go to <code>helm-deployment-package/dynatrace-gcp-monitor</code>and edit the <code>values.yaml</code> file, setting the required and optional parameter values as follows.</li>
</ol>
<p>You might want to store this file somewhere for future updates, since it will be needed in case of redeployments. Also, keep in mind that its schema can change. In such case, you should use the new file and only copy over the parameter values.</p>
<p><strong>Parameter name</strong></p>
<p><strong>Description</strong></p>
<p><strong>Default value</strong></p>
<p><code>gcpProjectId</code></p>
<p>Required The ID of the Google Cloud project you've selected for deployment.</p>
<p>Your current project ID</p>
<p><code>deploymentType</code></p>
<p>Required Set to <code>metrics</code>.</p>
<p><code>all</code></p>
<p><code>dynatraceAccessKey</code></p>
<p>Required Your <a href="/docs/manage/identity-access-management/access-tokens-and-oauth-clients/access-tokens#create-api-token" title="Learn the concept of an access token and its scopes.">Dynatrace API token</a> with the <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#api" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">required permissions</a>.</p>
<p><code>dynatraceAccessKeySecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from Google Cloud Secret Manager, instead of using <code>dynatraceAccessKey</code>.</p>
<p><code>dynatraceUrlSecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from Google Cloud Secret Manager, instead of using <code>dynatraceUrl</code>.</p>
<p><code>dtSecurityContext</code></p>
<p>Optional Assign the attribute value used for data segmentation, analysis, and permission mapping within the Dynatrace platform. Refer to <a href="/docs/manage/identity-access-management/use-cases/access-security-context" title="Grant access to entities with security context">Grant access to entities with security context</a> for more information. If left empty, the value of <code>gcpProjectId</code> will be assigned automatically.</p>
<p>Value of <code>gcpProjectId</code></p>
<p><code>dynatraceUrl</code></p>
<p>Required For SaaS log ingestion, it's your environment URL (<code>https://&lt;your-environment-id&gt;.live.dynatrace.com</code>).</p>
<p><code>requireValidCertificate</code></p>
<p>Optional If set to <code>true</code>, Dynatrace requires the SSL certificate of your Dynatrace environment.<br />
   For SaaS log ingestion, we recommend leaving the default value.</p>
<p><code>true</code></p>
<p><code>selfMonitoringEnabled</code></p>
<p>Optional Send custom metrics to Google Cloud to quickly diagnose if <code>dynatrace-gcp-monitor</code> processes and sends logs to Dynatrace properly.For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Self-monitoring metrics for the Dynatrace Google Cloud integration</a>.</p>
<p><code>false</code></p>
<p><code>serviceAccount</code></p>
<p>Optional Name of the service account to be created.</p>
<p><code>dockerImage</code></p>
<p>OptionalDynatrace Google Cloud Monitor Docker image. We recommend using the default value, but you can adapt it if needed.</p>
<p><code>dynatrace/dynatrace-gcp-monitor:v1-latest</code></p>
<p><code>printMetricIngestInput</code></p>
<p>Optional If set to <code>true</code>, the Google Cloud Monitor outputs the lines of metrics to stdout.</p>
<p><code>false</code></p>
<p><code>serviceUsageBooking</code></p>
<p>Optional Service usage booking is used for metrics and determines a caller-specified project for quota and billing purposes.If set to <code>source</code>, monitoring API calls are booked in the project where the Kubernetes container is running.If set to <code>destination</code>, monitoring API calls are booked in the project that is monitored.For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">Monitor multiple Google Cloud projects - Standard environments - Step 4</a>.</p>
<p><code>source</code></p>
<p><code>useProxy</code></p>
<p>Optional Depending on the value you set for this flag, the Google Cloud Monitor will use the following proxy settings: Dynatrace (set to <code>DT_ONLY</code>), Google Cloud API (set to <code>GCP_ONLY</code>), or both (set to <code>ALL</code>).</p>
<p>By default, proxy settings are not used.</p>
<p><code>httpProxy</code></p>
<p>Optional The proxy HTTP address; use this flag in conjunction with <code>USE_PROXY</code>.</p>
<p><code>httpsProxy</code></p>
<p>Optional The proxy HTTPS address; use this flag in conjunction with <code>USE_PROXY</code>.</p>
<p><code>gcpServicesYaml</code></p>
<p>Optional Configuration file for Google Cloud services.</p>
<p><code>queryInterval</code></p>
<p>Optional Metrics polling interval in minutes. Allowed values: <code>1</code> - <code>6</code></p>
<p><code>3</code></p>
<p><code>scopingProjectSupportEnabled</code></p>
<p>Optional Set to <code>true</code> when metrics scope is configured, so metrics will be collected from all projects added to the metrics scope. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">Monitor multiple Google Cloud projects - Large environments</a>.</p>
<p><code>false</code></p>
<p><code>excludedProjects</code></p>
<p>Optional Comma-separated list of projects to be excluded from monitoring (for example, <code>&lt;project_A&gt;,&lt;project_B&gt;</code>)</p>
<p><code>excludedMetricsAndDimensions</code></p>
<p>Optional Yaml formatted list of metrics and their dimensions to be excluded for monitoring.</p>
<p><code>metricAutodiscovery</code></p>
<p>Optional If set to <code>true</code>, the Google Cloud Monitor will run in metric auto-discovery mode, expanding your options for selecting metrics to monitor. For more information, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/gcp-autodiscovery" title="Push any metrics to Dynatrace from Google Cloud projects.">Monitor Google Cloud projects using auto-discovery</a>.</p>
<p><code>clusterIpv4Cidr</code></p>
<p>Optional Set the IP address range for the pods in this cluster in CIDR notation, if you want to use a custom range.</p>
<p><code>servicesIpv4Cidr</code></p>
<p>Optional Set the IP range for the services IPs. It can be specified as a netmask size or as in the CIDR notion.</p>
<p><code>useCustomMasterCidr</code></p>
<p>Optional If set to <code>true</code>, you can specify the IPv4 CIDR range to use for the master network.</p>
<p><code>false</code></p>
<p><code>masterIpv4Cidr</code></p>
<p>Optional IPv4 CIDR range to use for the master network requires the <code>useCustomMasterCidr</code> value to be true.
2. Choose which services you want Dynatrace to monitor.</p>
<p>By default, the Dynatrace Google Cloud integration starts monitoring a set of selected services. Go to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a> for a list of supported services.</p>
<p>For DDU consumption information, see <a href="#ddu">Monitoring consumption</a>.</p>
<h3 id="step-3-connect-your-kubernetes-cluster_1">Step 3 Connect your Kubernetes cluster<a class="headerlink" href="#step-3-connect-your-kubernetes-cluster_1" title="Permanent link">&para;</a></h3>
<ul>
<li>If you want to have a new GKE Autopilot cluster created by the deployment script, add <code>--create-autopilot-cluster</code> to the script. Setting up a connection to the cluster will happen automatically in this case and you can proceed to <a href="#script">step 4</a>.</li>
<li>If you run the deployment script on an existing standard GKE or GKE Autopilot cluster, you can connect to your cluster from the Google Cloud console or via terminal. Follow the instructions below.</li>
</ul>
<p>From the Google Cloud console</p>
<p>Via terminal</p>
<ol>
<li>In your Google Cloud console, go to your Kubernetes Engine.</li>
<li>Select <strong>Clusters</strong>, and then select <strong>Connect</strong>.</li>
<li>Select <strong>Run in Cloud Shell</strong>.</li>
</ol>
<p>Run the command below, making sure to replace</p>
<ul>
<li><code>&lt;cluster&gt;</code> with your cluster name</li>
<li><code>&lt;region&gt;</code> with the region where your cluster is running</li>
<li><code>&lt;project&gt;</code> with the project ID where your cluster is running</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a>gcloud container clusters get-credentials &lt;cluster&gt; --region &lt;region&gt; --project &lt;project&gt;
</code></pre></div>
<p>For details, see <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl#generate_kubeconfig_entry">Configuring cluster access for kubectl√Ø¬ª¬ø</a>.</p>
<h3 id="step-4-run-the-deployment-script_1">Step 4 Run the deployment script<a class="headerlink" href="#step-4-run-the-deployment-script_1" title="Permanent link">&para;</a></h3>
<ul>
<li>If you run the deployment script on an existing standard GKE or GKE Autopilot cluster, the deployment script will create an IAM service account with the necessary roles and deploy <code>dynatrace-gcp-monitor</code> to your Kubernetes cluster.</li>
<li>If you run the deployment script with the <code>--create-autopilot-cluster</code> option, the deployment script will automatically create the new GKE Autopilot cluster and deploy <code>dynatrace-gcp-monitor</code> to it.</li>
</ul>
<p>To run the deployment script, follow the instructions below.</p>
<p>Run on existing cluster</p>
<p>Run on new cluster</p>
<p>The latest versions of Google Cloud extensions will be uploaded. You have two options:</p>
<ul>
<li>Run the deployment script without parameters if you want to use the default values provided (<code>dynatrace-gcp-monitor-sa</code> for the IAM service account name and <code>dynatrace_monitor</code> for the IAM role name prefix):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>cd helm-deployment-package
<a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>
<a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a>
<a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a>
<a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a>./deploy-helm.sh
</code></pre></div>
<ul>
<li>Run the deployment script with parameters if you want to set your own values (be sure to replace the placeholders with your desired values):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a>cd helm-deployment-package
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>
<a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a>
<a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a>./deploy-helm.sh [--role-name &lt;role-to-be-created/updated&gt;]
</code></pre></div>
<p>To keep the existing versions of present extensions and install the latest versions for the rest of the selected extensions, if they are not present, run the command below instead.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a>cd helm-deployment-package
<a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a>
<a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>
<a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a>
<a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a>./deploy-helm.sh --without-extensions-upgrade
</code></pre></div>
<p>Run the command below. The latest versions of extensions will be uploaded.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a>cd helm-deployment-package
<a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>
<a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>
<a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a>
<a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a>./deploy-helm.sh --create-autopilot-cluster
</code></pre></div>
<p>To set a different name for the new cluster, run the command below instead, making sure to replace the placeholder (<code>&lt;name-of-new-cluster&gt;</code>) with your preferred name.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a>cd helm-deployment-package
<a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>
<a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>
<a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a>
<a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>./deploy-helm.sh --create-autopilot-cluster --autopilot-cluster-name &lt;name-of-new-cluster&gt;
</code></pre></div>
<p>To keep the existing versions of present extensions and install the latest versions for the rest of the selected extensions, if they are not present, run the command below instead.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a>cd helm-deployment-package
<a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>
<a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a>
<a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a>
<a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a>./deploy-helm.sh --create-autopilot-cluster --without-extensions-upgrade
</code></pre></div>
<h2 id="verify-installation_3">Verify installation<a class="headerlink" href="#verify-installation_3" title="Permanent link">&para;</a></h2>
<p>To check whether installation was successful</p>
<ol>
<li>Check if the container is running.</li>
</ol>
<p>After the installation, it may take a couple of minutes before the container is up and running.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a>kubectl -n dynatrace get pods
</code></pre></div>
2. Check the container logs for errors or exceptions. You have two options:</p>
<p>In the Kubernetes CLI</p>
<p>In your Google Cloud console</p>
<p>Run the following command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a>kubectl -n dynatrace logs -l app=dynatrace-gcp-monitor -c dynatrace-gcp-monitor-metrics
</code></pre></div>
<p>To check the container logs for errors in your Google Cloud console</p>
<ol>
<li>Go to <strong>Logs explorer</strong>.</li>
<li>
<p>Use the filters below to get metric and/or log ingest logs from the Kubernetes container:</p>
</li>
<li>
<p><code>resource.type="k8s_container"</code></p>
</li>
<li>
<p><code>resource.labels.container_name="dynatrace-gcp-monitor-metrics"</code></p>
</li>
<li>
<p>Check if dashboards are imported.</p>
</li>
</ol>
<p>Go to <img alt="Dashboards Classic" src="https://dt-cdn.net/images/dashboards-classic-512-15764940e8.png" title="Dashboards Classic" /> <strong>Dashboards Classic</strong> and filter by <strong>Tag</strong> for <code>Google Cloud</code>. A number of dashboards for Google Cloud Services should be available.</p>
<h2 id="choose-services-for-metrics-monitoring_1">Choose services for metrics monitoring<a class="headerlink" href="#choose-services-for-metrics-monitoring_1" title="Permanent link">&para;</a></h2>
<h3 id="services-enabled-by-default_1">Services enabled by default<a class="headerlink" href="#services-enabled-by-default_1" title="Permanent link">&para;</a></h3>
<p>Monitoring of following services will be enabled during deployment of Google Cloud Monitor:</p>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-apis-monitoring" title="Monitor Google Cloud APIs and view available metrics.">Google APIs</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-app-engine/app-engine-monitoring" title="Monitor Google App Engine and view available metrics.">Google App Engine</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-bigquery-monitoring" title="Monitor Google BigQuery and view available metrics.">Google BigQuery</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/cloud-functions-monitoring" title="Monitor Google Cloud Functions and view available metrics.">Google Cloud Functions</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun/cloud-run-monitoring" title="Monitor Google Cloud Run and view available metrics.">Google Cloud Run</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-storage-monitoring" title="Monitor Google Cloud Storage and view available metrics.">Google Cloud Storage</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-compute-engine/compute-engine-monitoring" title="Monitor Google Compute Engine and view available metrics.">Google Compute Engine</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-in-datastore-mode-monitoring" title="Monitor Google Cloud Firestore in Datastore mode and view available metrics.">Google Firestore in Datastore mode</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-monitoring" title="Monitor Google Filestore and view available metrics.">Google Filestore</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-gke/google-kubernetes-engine-monitoring" title="Monitor Google Kubernetes Engine and view available metrics.">Google Kubernetes Engine</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-load-balancing-monitoring" title="Monitor Google Cloud Load Balancing and view available metrics.">Google Cloud Load Balancing</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-monitoring" title="Monitor Google Cloud Pub/Sub and view available metrics.">Google Cloud Pub/Sub</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-lite-monitoring" title="Monitor Google Cloud Pub/Sub Lite and view available metrics.">Google Cloud Pub/Sub Lite</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-sql" title="Monitor Google Cloud SQL and view available metrics.">Google Cloud SQL</a></li>
</ul>
<p>There are more service integrations available, but need to be enabled. Go to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a> for a list of supported services. The next section describes how to manage them. For an alternative approach, consider leveraging <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/gcp-autodiscovery" title="Push any metrics to Dynatrace from Google Cloud projects.">auto-discovery</a> to extend your metric coverage.</p>
<h3 id="manage-enabled-services_1">Manage enabled services<a class="headerlink" href="#manage-enabled-services_1" title="Permanent link">&para;</a></h3>
<p>You can manage enabled services via Dynatrace Hub.</p>
<p>Filter for "gcp"√¢¬Ä¬îyou'll find annotations in the results for items that are already available in your environment.</p>
<p>To enable a new service, select it in Hub and then install it.</p>
<p>You can also disable a service via Dynatrace Hub.</p>
<p>To see if the services need updating, open them in Hub and check release notes. The updates can include new metrics, new assets like dashboards, or other changes.</p>
<p>All changes to enabled services are applied to Google Cloud Monitor within few minutes.</p>
<h4 id="feature-sets-available-metrics_1">Feature sets &amp; available metrics<a class="headerlink" href="#feature-sets-available-metrics_1" title="Permanent link">&para;</a></h4>
<p>To see what metrics are included for specific service, check <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a>. By default, only <code>defaultMetrics</code> feature set is enabled. To enable additional feature sets, you have to uncomment them in <code>values.yaml</code> file and redeploy whole Google Cloud Monitor.</p>
<p>Current configuration of feature sets can be found in cluster's ConfigMap named <code>dynatrace-gcp-function-config</code>.</p>
<h4 id="advanced-scope-management_1">Advanced scope management<a class="headerlink" href="#advanced-scope-management_1" title="Permanent link">&para;</a></h4>
<p>To further refine monitoring scope, you can use <code>filter_conditions</code> field in <code>values.yaml</code> file. This requires Google Cloud Monitor to be redeployed. See <a href="https://cloud.google.com/monitoring/api/v3/filters?hl=en_US">Google Cloud Monitoring filters√Ø¬ª¬ø</a> for syntax.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a>filter_conditions:
<a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>
<a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a>
<a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a>
<a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a>resource.labels.location = &quot;us-central1-c&quot; AND resource.labels.namespace_name = &quot;dynatrace&quot;
</code></pre></div>
<h2 id="enable-alerting_3">Enable alerting<a class="headerlink" href="#enable-alerting_3" title="Permanent link">&para;</a></h2>
<p>To activate alerting, you need to enable metric events for alerting in Dynatrace.</p>
<p>To enable metric events</p>
<ol>
<li>Go to <strong>Settings</strong>.</li>
<li>In <strong>Anomaly detection</strong>, select <strong>Metric events</strong>.</li>
<li>Filter for Google Cloud alerts and turn on <strong>On/Off</strong> for the alerts you want to activate.</li>
</ol>
<h2 id="view-metrics_2">View metrics<a class="headerlink" href="#view-metrics_2" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services (go to <strong>Metrics</strong> and filter by <code>gcp</code>).</p>
<h2 id="change-deployment-settings_3">Change deployment settings<a class="headerlink" href="#change-deployment-settings_3" title="Permanent link">&para;</a></h2>
<h3 id="change-parameters-from-valuesyaml_2">Change parameters from <code>values.yaml</code><a class="headerlink" href="#change-parameters-from-valuesyaml_2" title="Permanent link">&para;</a></h3>
<p>To load a new <code>values.yaml</code> file, you need to upgrade your Helm release.</p>
<p>To update your Helm release</p>
<ol>
<li>Find out what Helm release version you're using.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a>helm ls -n dynatrace
</code></pre></div>
2. Run the command below, making sure to replace <code>&lt;your-helm-release&gt;</code> with the value from the previous step.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a>helm upgrade &lt;your-helm-release&gt; dynatrace-gcp-monitor -n dynatrace
</code></pre></div>
<p>For details, see <a href="https://helm.sh/docs/helm/helm_upgrade/">Helm upgrade√Ø¬ª¬ø</a>.</p>
<h3 id="change-deployment-type_2">Change deployment type<a class="headerlink" href="#change-deployment-type_2" title="Permanent link">&para;</a></h3>
<p>To change the deployment type (<code>all</code>, <code>metrics</code>, or <code>logs</code>)</p>
<ol>
<li>Find out what helm release version you're using.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a>helm ls -n dynatrace
</code></pre></div>
2. Uninstall the release.</p>
<p>Be sure to replace <code>&lt;your-helm-release&gt;</code> with the release name from the previous output.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a>helm uninstall &lt;your-helm-release&gt; -n dynatrace
</code></pre></div>
3. Edit <code>deploymentType</code> in <code>values.yaml</code> with the new value and save the file.
4. Run the deployment command again. For details, see <a href="#script">Run the deployment script</a>.</p>
<h2 id="verification_3">Verification<a class="headerlink" href="#verification_3" title="Permanent link">&para;</a></h2>
<p>To investigate potential deployment and connectivity issues</p>
<ol>
<li><a href="#verify">Verify installation</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Enable self-monitoring</a> Optional</li>
<li>
<p>Check the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file created during the installation process.</p>
</li>
<li>
<p>This file will be created each time the installation script runs.</p>
</li>
<li>The debug information won't contain sensitive data such as the Dynatrace access key.</li>
<li>
<p>If you are contacting a Dynatrace product expert via live chat:</p>
</li>
<li>
<p>Make sure to provide the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file described in the previous step.</p>
</li>
<li>
<p>Provide version information.</p>
<ul>
<li>For issues during installation, check the <code>version.txt</code> file.</li>
<li>For issues during runtime, <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">check container logs</a>.</li>
</ul>
</li>
</ol>
<h2 id="uninstall_3">Uninstall<a class="headerlink" href="#uninstall_3" title="Permanent link">&para;</a></h2>
<ol>
<li>Find out what Helm release version you're using.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a>helm ls -n dynatrace
</code></pre></div>
<ol>
<li>Uninstall the release.</li>
</ol>
<p>Be sure to replace <code>&lt;your-helm-release&gt;</code> with the release name from the previous output.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a>helm uninstall &lt;your-helm-release&gt; -n dynatrace
</code></pre></div>
<p>Alternatively, you can delete the namespace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a>kubectl delete namespace dynatrace
</code></pre></div>
<ol>
<li>To remove all monitoring assets (such as dashboards and alerts) from Dynatrace, you need to remove all Google Cloud extensions.</li>
</ol>
<p>You can find and delete relevant extensions via Dynatrace Hub.</p>
<p>Make sure to uninstall the initial Role created and attached to the Service Account that you used to deploy the integration.</p>
<h2 id="monitoring-consumption_4">Monitoring consumption<a class="headerlink" href="#monitoring-consumption_4" title="Permanent link">&para;</a></h2>
<p>All cloud services consume DDUs. The amount of DDU consumption per service instance depends on the number of monitored metrics and their dimensions (each metric dimension results in the ingestion of 1 data point; 1 data point consumes 0.001 DDUs). For details, see <a href="/docs/license/monitoring-consumption-classic/davis-data-units" title="Understand how Dynatrace monitoring consumption is calculated based on Davis data units (DDU).">Extending Dynatrace (Davis data units)</a>.</p>
<h2 id="related-topics_12">Related topics<a class="headerlink" href="#related-topics_12" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Google-Cloud-Monitor-Troubleshooting/ta-p/243796">Google Cloud Monitor Troubleshooting√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-set-up-gcp-integration-on-existing-clustermd">Source: set-up-gcp-integration-on-existing-cluster.md<a class="headerlink" href="#source-set-up-gcp-integration-on-existing-clustermd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Set up the Dynatrace Google Cloud log and metric integration on an existing GKE cluster
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-on-existing-cluster
scraped: 2026-02-17T05:06:32.095074</p>
<hr />
<h1 id="set-up-the-dynatrace-google-cloud-log-and-metric-integration-on-an-existing-gke-cluster">Set up the Dynatrace Google Cloud log and metric integration on an existing GKE cluster<a class="headerlink" href="#set-up-the-dynatrace-google-cloud-log-and-metric-integration-on-an-existing-gke-cluster" title="Permanent link">&para;</a></h1>
<h1 id="set-up-the-dynatrace-google-cloud-log-and-metric-integration-on-an-existing-gke-cluster_1">Set up the Dynatrace Google Cloud log and metric integration on an existing GKE cluster<a class="headerlink" href="#set-up-the-dynatrace-google-cloud-log-and-metric-integration-on-an-existing-gke-cluster_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>15-min read</li>
<li>Updated on Oct 08, 2024</li>
</ul>
<p>Dynatrace version 1.230+</p>
<p>As an alternative to the <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">main deployment</a>, where the deployment script runs in a new automatically created GKE Autopilot cluster, you can choose to run the deployment script on an existing standard GKE or GKE Autopilot cluster. In this scenario, you will set up Google Cloud monitoring for metrics and logs in Google Cloud Shell. During setup, a new Pub/Sub subscription will be created. GKE will run two containers: a metric forwarder and a log forwarder. After installation, you'll get metrics, logs, dashboards, and alerts for your configured services in Dynatrace.</p>
<p>For other deployment options, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide" title="Other options to set up log and/or metric monitoring for Google Cloud services">Alternative deployment scenarios</a>.</p>
<p>Dynatrace version 1.230+</p>
<p>This page describes how to install version 1.0 of the Google Cloud integration on a GKE cluster.</p>
<ul>
<li>If you already have an <a href="/docs/ingest-from/google-cloud-platform/legacy/deployment-k8s-container-legacy" title="Set up log and metric monitoring for GCP services in a Kubernetes container.">earlier version</a> installed, you need to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function" title="Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.">migrate</a>.</li>
</ul>
<h2 id="limitations_5">Limitations<a class="headerlink" href="#limitations_5" title="Permanent link">&para;</a></h2>
<p>Dynatrace Google Cloud log integration supports up to 8 GB of data processing per hour (with base resources√¢¬Ä¬îwithout scaling). With bigger loads, messages will start to be retained in the PubSub Subscription. To measure latency, look for these metrics: <code>Oldest unacked message age</code> and <code>Unacked messages</code>. For scaling recommendations, see the <a href="#scalingguide">scaling guide</a> below.</p>
<p>Dynatrace Google Cloud metric integration supports up to 50 Google Cloud projects with the standard deployment. To monitor larger environments, you need to enable metrics scope. See <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">Monitor multiple Google Cloud projects - Large environments</a>.</p>
<h2 id="prerequisites_13">Prerequisites<a class="headerlink" href="#prerequisites_13" title="Permanent link">&para;</a></h2>
<p>To deploy the integration, you need to make sure the following requirements are met on the machine where you are running the installation.</p>
<ul>
<li>Linux OS only</li>
<li>Internet access</li>
<li>GKE Cluster access</li>
<li>Dynatrace environment access</li>
</ul>
<p>You need to configure the Dynatrace endpoint (environment, cluster or ActiveGate URL) to which the GKE cluster should send metrics and logs. Make sure that you have direct network access or, if there is a proxy or any other component present in between, that communication is not affected.</p>
<h3 id="tools_4">Tools<a class="headerlink" href="#tools_4" title="Permanent link">&para;</a></h3>
<p>You can deploy the Dynatrace GCP integration in Google Cloud Shell or in bash.</p>
<p>If you use bash, you need to install:</p>
<ul>
<li><a href="https://dt-url.net/e8110336">Google Cloud SDK√Ø¬ª¬ø</a></li>
<li><a href="https://kubernetes.io/docs/tasks/tools/">kubectl√Ø¬ª¬ø</a></li>
<li><a href="https://helm.sh/docs/intro/install/">helm√Ø¬ª¬ø</a></li>
<li><a href="https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64">jq (version 1.6)√Ø¬ª¬ø</a></li>
<li><a href="https://github.com/mikefarah/yq/releases/download/v4.9.8/yq_linux_amd64">yq (version 4.9.x+)√Ø¬ª¬ø</a></li>
<li>curl</li>
<li>unzip</li>
</ul>
<h3 id="google-cloud-permissions_3">Google Cloud permissions<a class="headerlink" href="#google-cloud-permissions_3" title="Permanent link">&para;</a></h3>
<p>Running the deployment script requires a list of permissions. You need to create a custom role (see below) and use it to deploy <code>dynatrace-gcp-monitor</code>.</p>
<ol>
<li>Create a YAML file named <code>dynatrace-gcp-monitor-helm-deployment-role.yaml</code> with the following content:</li>
</ol>
<p>dynatrace-gcp-monitor-helm-deployment-role.yaml</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a>title: Dynatrace GCP Monitor helm deployment role
<a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a>
<a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a>
<a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a>
<a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a>description: Role for Dynatrace GCP Monitor helm and pubsub deployment
<a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a>
<a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a>
<a id="__codelineno-118-8" name="__codelineno-118-8" href="#__codelineno-118-8"></a>
<a id="__codelineno-118-9" name="__codelineno-118-9" href="#__codelineno-118-9"></a>stage: GA
<a id="__codelineno-118-10" name="__codelineno-118-10" href="#__codelineno-118-10"></a>
<a id="__codelineno-118-11" name="__codelineno-118-11" href="#__codelineno-118-11"></a>
<a id="__codelineno-118-12" name="__codelineno-118-12" href="#__codelineno-118-12"></a>
<a id="__codelineno-118-13" name="__codelineno-118-13" href="#__codelineno-118-13"></a>includedPermissions:
<a id="__codelineno-118-14" name="__codelineno-118-14" href="#__codelineno-118-14"></a>
<a id="__codelineno-118-15" name="__codelineno-118-15" href="#__codelineno-118-15"></a>
<a id="__codelineno-118-16" name="__codelineno-118-16" href="#__codelineno-118-16"></a>
<a id="__codelineno-118-17" name="__codelineno-118-17" href="#__codelineno-118-17"></a>- container.clusters.get
<a id="__codelineno-118-18" name="__codelineno-118-18" href="#__codelineno-118-18"></a>
<a id="__codelineno-118-19" name="__codelineno-118-19" href="#__codelineno-118-19"></a>
<a id="__codelineno-118-20" name="__codelineno-118-20" href="#__codelineno-118-20"></a>
<a id="__codelineno-118-21" name="__codelineno-118-21" href="#__codelineno-118-21"></a>- container.configMaps.create
<a id="__codelineno-118-22" name="__codelineno-118-22" href="#__codelineno-118-22"></a>
<a id="__codelineno-118-23" name="__codelineno-118-23" href="#__codelineno-118-23"></a>
<a id="__codelineno-118-24" name="__codelineno-118-24" href="#__codelineno-118-24"></a>
<a id="__codelineno-118-25" name="__codelineno-118-25" href="#__codelineno-118-25"></a>- container.configMaps.delete
<a id="__codelineno-118-26" name="__codelineno-118-26" href="#__codelineno-118-26"></a>
<a id="__codelineno-118-27" name="__codelineno-118-27" href="#__codelineno-118-27"></a>
<a id="__codelineno-118-28" name="__codelineno-118-28" href="#__codelineno-118-28"></a>
<a id="__codelineno-118-29" name="__codelineno-118-29" href="#__codelineno-118-29"></a>- container.configMaps.get
<a id="__codelineno-118-30" name="__codelineno-118-30" href="#__codelineno-118-30"></a>
<a id="__codelineno-118-31" name="__codelineno-118-31" href="#__codelineno-118-31"></a>
<a id="__codelineno-118-32" name="__codelineno-118-32" href="#__codelineno-118-32"></a>
<a id="__codelineno-118-33" name="__codelineno-118-33" href="#__codelineno-118-33"></a>- container.configMaps.update
<a id="__codelineno-118-34" name="__codelineno-118-34" href="#__codelineno-118-34"></a>
<a id="__codelineno-118-35" name="__codelineno-118-35" href="#__codelineno-118-35"></a>
<a id="__codelineno-118-36" name="__codelineno-118-36" href="#__codelineno-118-36"></a>
<a id="__codelineno-118-37" name="__codelineno-118-37" href="#__codelineno-118-37"></a>- container.deployments.create
<a id="__codelineno-118-38" name="__codelineno-118-38" href="#__codelineno-118-38"></a>
<a id="__codelineno-118-39" name="__codelineno-118-39" href="#__codelineno-118-39"></a>
<a id="__codelineno-118-40" name="__codelineno-118-40" href="#__codelineno-118-40"></a>
<a id="__codelineno-118-41" name="__codelineno-118-41" href="#__codelineno-118-41"></a>- container.deployments.delete
<a id="__codelineno-118-42" name="__codelineno-118-42" href="#__codelineno-118-42"></a>
<a id="__codelineno-118-43" name="__codelineno-118-43" href="#__codelineno-118-43"></a>
<a id="__codelineno-118-44" name="__codelineno-118-44" href="#__codelineno-118-44"></a>
<a id="__codelineno-118-45" name="__codelineno-118-45" href="#__codelineno-118-45"></a>- container.deployments.get
<a id="__codelineno-118-46" name="__codelineno-118-46" href="#__codelineno-118-46"></a>
<a id="__codelineno-118-47" name="__codelineno-118-47" href="#__codelineno-118-47"></a>
<a id="__codelineno-118-48" name="__codelineno-118-48" href="#__codelineno-118-48"></a>
<a id="__codelineno-118-49" name="__codelineno-118-49" href="#__codelineno-118-49"></a>- container.deployments.update
<a id="__codelineno-118-50" name="__codelineno-118-50" href="#__codelineno-118-50"></a>
<a id="__codelineno-118-51" name="__codelineno-118-51" href="#__codelineno-118-51"></a>
<a id="__codelineno-118-52" name="__codelineno-118-52" href="#__codelineno-118-52"></a>
<a id="__codelineno-118-53" name="__codelineno-118-53" href="#__codelineno-118-53"></a>- container.namespaces.create
<a id="__codelineno-118-54" name="__codelineno-118-54" href="#__codelineno-118-54"></a>
<a id="__codelineno-118-55" name="__codelineno-118-55" href="#__codelineno-118-55"></a>
<a id="__codelineno-118-56" name="__codelineno-118-56" href="#__codelineno-118-56"></a>
<a id="__codelineno-118-57" name="__codelineno-118-57" href="#__codelineno-118-57"></a>- container.namespaces.get
<a id="__codelineno-118-58" name="__codelineno-118-58" href="#__codelineno-118-58"></a>
<a id="__codelineno-118-59" name="__codelineno-118-59" href="#__codelineno-118-59"></a>
<a id="__codelineno-118-60" name="__codelineno-118-60" href="#__codelineno-118-60"></a>
<a id="__codelineno-118-61" name="__codelineno-118-61" href="#__codelineno-118-61"></a>- container.pods.get
<a id="__codelineno-118-62" name="__codelineno-118-62" href="#__codelineno-118-62"></a>
<a id="__codelineno-118-63" name="__codelineno-118-63" href="#__codelineno-118-63"></a>
<a id="__codelineno-118-64" name="__codelineno-118-64" href="#__codelineno-118-64"></a>
<a id="__codelineno-118-65" name="__codelineno-118-65" href="#__codelineno-118-65"></a>- container.pods.list
<a id="__codelineno-118-66" name="__codelineno-118-66" href="#__codelineno-118-66"></a>
<a id="__codelineno-118-67" name="__codelineno-118-67" href="#__codelineno-118-67"></a>
<a id="__codelineno-118-68" name="__codelineno-118-68" href="#__codelineno-118-68"></a>
<a id="__codelineno-118-69" name="__codelineno-118-69" href="#__codelineno-118-69"></a>- container.secrets.create
<a id="__codelineno-118-70" name="__codelineno-118-70" href="#__codelineno-118-70"></a>
<a id="__codelineno-118-71" name="__codelineno-118-71" href="#__codelineno-118-71"></a>
<a id="__codelineno-118-72" name="__codelineno-118-72" href="#__codelineno-118-72"></a>
<a id="__codelineno-118-73" name="__codelineno-118-73" href="#__codelineno-118-73"></a>- container.secrets.delete
<a id="__codelineno-118-74" name="__codelineno-118-74" href="#__codelineno-118-74"></a>
<a id="__codelineno-118-75" name="__codelineno-118-75" href="#__codelineno-118-75"></a>
<a id="__codelineno-118-76" name="__codelineno-118-76" href="#__codelineno-118-76"></a>
<a id="__codelineno-118-77" name="__codelineno-118-77" href="#__codelineno-118-77"></a>- container.secrets.get
<a id="__codelineno-118-78" name="__codelineno-118-78" href="#__codelineno-118-78"></a>
<a id="__codelineno-118-79" name="__codelineno-118-79" href="#__codelineno-118-79"></a>
<a id="__codelineno-118-80" name="__codelineno-118-80" href="#__codelineno-118-80"></a>
<a id="__codelineno-118-81" name="__codelineno-118-81" href="#__codelineno-118-81"></a>- container.secrets.list
<a id="__codelineno-118-82" name="__codelineno-118-82" href="#__codelineno-118-82"></a>
<a id="__codelineno-118-83" name="__codelineno-118-83" href="#__codelineno-118-83"></a>
<a id="__codelineno-118-84" name="__codelineno-118-84" href="#__codelineno-118-84"></a>
<a id="__codelineno-118-85" name="__codelineno-118-85" href="#__codelineno-118-85"></a>- container.secrets.update
<a id="__codelineno-118-86" name="__codelineno-118-86" href="#__codelineno-118-86"></a>
<a id="__codelineno-118-87" name="__codelineno-118-87" href="#__codelineno-118-87"></a>
<a id="__codelineno-118-88" name="__codelineno-118-88" href="#__codelineno-118-88"></a>
<a id="__codelineno-118-89" name="__codelineno-118-89" href="#__codelineno-118-89"></a>- container.serviceAccounts.create
<a id="__codelineno-118-90" name="__codelineno-118-90" href="#__codelineno-118-90"></a>
<a id="__codelineno-118-91" name="__codelineno-118-91" href="#__codelineno-118-91"></a>
<a id="__codelineno-118-92" name="__codelineno-118-92" href="#__codelineno-118-92"></a>
<a id="__codelineno-118-93" name="__codelineno-118-93" href="#__codelineno-118-93"></a>- container.serviceAccounts.delete
<a id="__codelineno-118-94" name="__codelineno-118-94" href="#__codelineno-118-94"></a>
<a id="__codelineno-118-95" name="__codelineno-118-95" href="#__codelineno-118-95"></a>
<a id="__codelineno-118-96" name="__codelineno-118-96" href="#__codelineno-118-96"></a>
<a id="__codelineno-118-97" name="__codelineno-118-97" href="#__codelineno-118-97"></a>- container.serviceAccounts.get
<a id="__codelineno-118-98" name="__codelineno-118-98" href="#__codelineno-118-98"></a>
<a id="__codelineno-118-99" name="__codelineno-118-99" href="#__codelineno-118-99"></a>
<a id="__codelineno-118-100" name="__codelineno-118-100" href="#__codelineno-118-100"></a>
<a id="__codelineno-118-101" name="__codelineno-118-101" href="#__codelineno-118-101"></a>- iam.roles.create
<a id="__codelineno-118-102" name="__codelineno-118-102" href="#__codelineno-118-102"></a>
<a id="__codelineno-118-103" name="__codelineno-118-103" href="#__codelineno-118-103"></a>
<a id="__codelineno-118-104" name="__codelineno-118-104" href="#__codelineno-118-104"></a>
<a id="__codelineno-118-105" name="__codelineno-118-105" href="#__codelineno-118-105"></a>- iam.roles.list
<a id="__codelineno-118-106" name="__codelineno-118-106" href="#__codelineno-118-106"></a>
<a id="__codelineno-118-107" name="__codelineno-118-107" href="#__codelineno-118-107"></a>
<a id="__codelineno-118-108" name="__codelineno-118-108" href="#__codelineno-118-108"></a>
<a id="__codelineno-118-109" name="__codelineno-118-109" href="#__codelineno-118-109"></a>- iam.roles.update
<a id="__codelineno-118-110" name="__codelineno-118-110" href="#__codelineno-118-110"></a>
<a id="__codelineno-118-111" name="__codelineno-118-111" href="#__codelineno-118-111"></a>
<a id="__codelineno-118-112" name="__codelineno-118-112" href="#__codelineno-118-112"></a>
<a id="__codelineno-118-113" name="__codelineno-118-113" href="#__codelineno-118-113"></a>- iam.serviceAccounts.actAs
<a id="__codelineno-118-114" name="__codelineno-118-114" href="#__codelineno-118-114"></a>
<a id="__codelineno-118-115" name="__codelineno-118-115" href="#__codelineno-118-115"></a>
<a id="__codelineno-118-116" name="__codelineno-118-116" href="#__codelineno-118-116"></a>
<a id="__codelineno-118-117" name="__codelineno-118-117" href="#__codelineno-118-117"></a>- iam.serviceAccounts.create
<a id="__codelineno-118-118" name="__codelineno-118-118" href="#__codelineno-118-118"></a>
<a id="__codelineno-118-119" name="__codelineno-118-119" href="#__codelineno-118-119"></a>
<a id="__codelineno-118-120" name="__codelineno-118-120" href="#__codelineno-118-120"></a>
<a id="__codelineno-118-121" name="__codelineno-118-121" href="#__codelineno-118-121"></a>- iam.serviceAccounts.getIamPolicy
<a id="__codelineno-118-122" name="__codelineno-118-122" href="#__codelineno-118-122"></a>
<a id="__codelineno-118-123" name="__codelineno-118-123" href="#__codelineno-118-123"></a>
<a id="__codelineno-118-124" name="__codelineno-118-124" href="#__codelineno-118-124"></a>
<a id="__codelineno-118-125" name="__codelineno-118-125" href="#__codelineno-118-125"></a>- iam.serviceAccounts.list
<a id="__codelineno-118-126" name="__codelineno-118-126" href="#__codelineno-118-126"></a>
<a id="__codelineno-118-127" name="__codelineno-118-127" href="#__codelineno-118-127"></a>
<a id="__codelineno-118-128" name="__codelineno-118-128" href="#__codelineno-118-128"></a>
<a id="__codelineno-118-129" name="__codelineno-118-129" href="#__codelineno-118-129"></a>- iam.serviceAccounts.setIamPolicy
<a id="__codelineno-118-130" name="__codelineno-118-130" href="#__codelineno-118-130"></a>
<a id="__codelineno-118-131" name="__codelineno-118-131" href="#__codelineno-118-131"></a>
<a id="__codelineno-118-132" name="__codelineno-118-132" href="#__codelineno-118-132"></a>
<a id="__codelineno-118-133" name="__codelineno-118-133" href="#__codelineno-118-133"></a>- pubsub.subscriptions.create
<a id="__codelineno-118-134" name="__codelineno-118-134" href="#__codelineno-118-134"></a>
<a id="__codelineno-118-135" name="__codelineno-118-135" href="#__codelineno-118-135"></a>
<a id="__codelineno-118-136" name="__codelineno-118-136" href="#__codelineno-118-136"></a>
<a id="__codelineno-118-137" name="__codelineno-118-137" href="#__codelineno-118-137"></a>- pubsub.subscriptions.get
<a id="__codelineno-118-138" name="__codelineno-118-138" href="#__codelineno-118-138"></a>
<a id="__codelineno-118-139" name="__codelineno-118-139" href="#__codelineno-118-139"></a>
<a id="__codelineno-118-140" name="__codelineno-118-140" href="#__codelineno-118-140"></a>
<a id="__codelineno-118-141" name="__codelineno-118-141" href="#__codelineno-118-141"></a>- pubsub.subscriptions.list
<a id="__codelineno-118-142" name="__codelineno-118-142" href="#__codelineno-118-142"></a>
<a id="__codelineno-118-143" name="__codelineno-118-143" href="#__codelineno-118-143"></a>
<a id="__codelineno-118-144" name="__codelineno-118-144" href="#__codelineno-118-144"></a>
<a id="__codelineno-118-145" name="__codelineno-118-145" href="#__codelineno-118-145"></a>- pubsub.topics.attachSubscription
<a id="__codelineno-118-146" name="__codelineno-118-146" href="#__codelineno-118-146"></a>
<a id="__codelineno-118-147" name="__codelineno-118-147" href="#__codelineno-118-147"></a>
<a id="__codelineno-118-148" name="__codelineno-118-148" href="#__codelineno-118-148"></a>
<a id="__codelineno-118-149" name="__codelineno-118-149" href="#__codelineno-118-149"></a>- pubsub.topics.create
<a id="__codelineno-118-150" name="__codelineno-118-150" href="#__codelineno-118-150"></a>
<a id="__codelineno-118-151" name="__codelineno-118-151" href="#__codelineno-118-151"></a>
<a id="__codelineno-118-152" name="__codelineno-118-152" href="#__codelineno-118-152"></a>
<a id="__codelineno-118-153" name="__codelineno-118-153" href="#__codelineno-118-153"></a>- pubsub.topics.getIamPolicy
<a id="__codelineno-118-154" name="__codelineno-118-154" href="#__codelineno-118-154"></a>
<a id="__codelineno-118-155" name="__codelineno-118-155" href="#__codelineno-118-155"></a>
<a id="__codelineno-118-156" name="__codelineno-118-156" href="#__codelineno-118-156"></a>
<a id="__codelineno-118-157" name="__codelineno-118-157" href="#__codelineno-118-157"></a>- pubsub.topics.list
<a id="__codelineno-118-158" name="__codelineno-118-158" href="#__codelineno-118-158"></a>
<a id="__codelineno-118-159" name="__codelineno-118-159" href="#__codelineno-118-159"></a>
<a id="__codelineno-118-160" name="__codelineno-118-160" href="#__codelineno-118-160"></a>
<a id="__codelineno-118-161" name="__codelineno-118-161" href="#__codelineno-118-161"></a>- pubsub.topics.setIamPolicy
<a id="__codelineno-118-162" name="__codelineno-118-162" href="#__codelineno-118-162"></a>
<a id="__codelineno-118-163" name="__codelineno-118-163" href="#__codelineno-118-163"></a>
<a id="__codelineno-118-164" name="__codelineno-118-164" href="#__codelineno-118-164"></a>
<a id="__codelineno-118-165" name="__codelineno-118-165" href="#__codelineno-118-165"></a>- pubsub.topics.update
<a id="__codelineno-118-166" name="__codelineno-118-166" href="#__codelineno-118-166"></a>
<a id="__codelineno-118-167" name="__codelineno-118-167" href="#__codelineno-118-167"></a>
<a id="__codelineno-118-168" name="__codelineno-118-168" href="#__codelineno-118-168"></a>
<a id="__codelineno-118-169" name="__codelineno-118-169" href="#__codelineno-118-169"></a>- resourcemanager.projects.get
<a id="__codelineno-118-170" name="__codelineno-118-170" href="#__codelineno-118-170"></a>
<a id="__codelineno-118-171" name="__codelineno-118-171" href="#__codelineno-118-171"></a>
<a id="__codelineno-118-172" name="__codelineno-118-172" href="#__codelineno-118-172"></a>
<a id="__codelineno-118-173" name="__codelineno-118-173" href="#__codelineno-118-173"></a>- resourcemanager.projects.getIamPolicy
<a id="__codelineno-118-174" name="__codelineno-118-174" href="#__codelineno-118-174"></a>
<a id="__codelineno-118-175" name="__codelineno-118-175" href="#__codelineno-118-175"></a>
<a id="__codelineno-118-176" name="__codelineno-118-176" href="#__codelineno-118-176"></a>
<a id="__codelineno-118-177" name="__codelineno-118-177" href="#__codelineno-118-177"></a>- resourcemanager.projects.setIamPolicy
<a id="__codelineno-118-178" name="__codelineno-118-178" href="#__codelineno-118-178"></a>
<a id="__codelineno-118-179" name="__codelineno-118-179" href="#__codelineno-118-179"></a>
<a id="__codelineno-118-180" name="__codelineno-118-180" href="#__codelineno-118-180"></a>
<a id="__codelineno-118-181" name="__codelineno-118-181" href="#__codelineno-118-181"></a>- serviceusage.services.enable
<a id="__codelineno-118-182" name="__codelineno-118-182" href="#__codelineno-118-182"></a>
<a id="__codelineno-118-183" name="__codelineno-118-183" href="#__codelineno-118-183"></a>
<a id="__codelineno-118-184" name="__codelineno-118-184" href="#__codelineno-118-184"></a>
<a id="__codelineno-118-185" name="__codelineno-118-185" href="#__codelineno-118-185"></a>- serviceusage.services.get
<a id="__codelineno-118-186" name="__codelineno-118-186" href="#__codelineno-118-186"></a>
<a id="__codelineno-118-187" name="__codelineno-118-187" href="#__codelineno-118-187"></a>
<a id="__codelineno-118-188" name="__codelineno-118-188" href="#__codelineno-118-188"></a>
<a id="__codelineno-118-189" name="__codelineno-118-189" href="#__codelineno-118-189"></a>- serviceusage.services.list
<a id="__codelineno-118-190" name="__codelineno-118-190" href="#__codelineno-118-190"></a>
<a id="__codelineno-118-191" name="__codelineno-118-191" href="#__codelineno-118-191"></a>
<a id="__codelineno-118-192" name="__codelineno-118-192" href="#__codelineno-118-192"></a>
<a id="__codelineno-118-193" name="__codelineno-118-193" href="#__codelineno-118-193"></a>- serviceusage.services.use
</code></pre></div>
<p>Each group of permissions is used to handle the different resources included in the integration. Creation and access are for new resources, update is for reusing existing resources, and deletion is for uninstalling.</p>
<ul>
<li>container.configMaps: for mapping secrets and other variables used by the containers.</li>
<li>container.deployments: for the K8s' deployment within the cluster (which includes the pods, containers, etc.).</li>
<li>container.namespaces: for the K8s namespace in which we are deploying the resources.</li>
<li>container.pods: for the K8s pods.</li>
<li>container.secrets: for the K8s secrets in which to store the data-sensitive variables.</li>
<li>container.serviceAccounts: for the SA to be taken in the K8s context.</li>
<li>iam.roles: for the necessary permissions for data collection.</li>
<li>iam.serviceAccounts: for the general context SA.</li>
<li>resourcemanager.projects: for handling the project in which we are deploying our integration.</li>
<li>serviceusage.services: for handling the services' APIs.</li>
<li>pubsub.subscriptions: for the PubSub subscription we are using to collect and ingest logs.</li>
<li>
<p>pubsub.topics: for the PubSub topic we are using to collect and ingest logs.</p>
</li>
<li>
<p>Run the command below, replacing <code>&lt;your_project_ID&gt;</code> with the project ID where you want to deploy the Dynatrace integration.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a>gcloud iam roles create dynatrace_monitor.helm_deployment --project=&lt;your_project_ID&gt; --file=dynatrace-gcp-monitor-helm-deployment-role.yaml
</code></pre></div>
<p>Be sure to add this role to your Google Cloud user. For details, see <a href="https://dt-url.net/vx03vid">Grant or revoke a single role√Ø¬ª¬ø</a>.</p>
<h3 id="google-cloud-settings_1">Google Cloud settings<a class="headerlink" href="#google-cloud-settings_1" title="Permanent link">&para;</a></h3>
<p>The location where you deploy the integration determines whether you need make any additional settings.</p>
<h4 id="deploy-on-an-existing-gke-autopilot-cluster">Deploy on an existing GKE Autopilot cluster<a class="headerlink" href="#deploy-on-an-existing-gke-autopilot-cluster" title="Permanent link">&para;</a></h4>
<p>If you deploy the integration on an existing GKE Autopilot cluster, you don't need to make any additional settings.</p>
<h4 id="deploy-on-an-existing-gke-standard-cluster">Deploy on an existing GKE standard cluster<a class="headerlink" href="#deploy-on-an-existing-gke-standard-cluster" title="Permanent link">&para;</a></h4>
<p>If you deploy the integration on an existing GKE standard cluster, you need to</p>
<ul>
<li><a href="https://dt-url.net/2j23qqv">Enable Workload Identity on a cluster√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/an43q2s">Enable <code>GKE_METADATA</code> on the GKE node pools√Ø¬ª¬ø</a></li>
</ul>
<h3 id="configure-log-export_2">Configure log export<a class="headerlink" href="#configure-log-export_2" title="Permanent link">&para;</a></h3>
<ol>
<li>Run the following shell script in the Google Cloud project you've selected for deployment.</li>
</ol>
<p>Be sure to replace <code>&lt;your-subscription-name&gt;</code> and <code>&lt;your-topic-name&gt;</code> with your own values.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a>wget https://raw.githubusercontent.com/dynatrace-oss/dynatrace-gcp-monitor/master/scripts/deploy-pubsub.sh
<a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>
<a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>
<a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a>
<a id="__codelineno-120-5" name="__codelineno-120-5" href="#__codelineno-120-5"></a>chmod +x deploy-pubsub.sh
<a id="__codelineno-120-6" name="__codelineno-120-6" href="#__codelineno-120-6"></a>
<a id="__codelineno-120-7" name="__codelineno-120-7" href="#__codelineno-120-7"></a>
<a id="__codelineno-120-8" name="__codelineno-120-8" href="#__codelineno-120-8"></a>
<a id="__codelineno-120-9" name="__codelineno-120-9" href="#__codelineno-120-9"></a>./deploy-pubsub.sh --topic-name &lt;your-topic-name&gt; --subscription-name &lt;your-subscription-name&gt;
</code></pre></div>
<ol>
<li>Configure <a href="https://dt-url.net/4743r02">log export√Ø¬ª¬ø</a> to send the desired logs to the Google Cloud Pub/Sub topic created above.</li>
</ol>
<h3 id="dynatrace-permissions_4">Dynatrace permissions<a class="headerlink" href="#dynatrace-permissions_4" title="Permanent link">&para;</a></h3>
<p>You need to create a token with a set of permissions.</p>
<ol>
<li>Go to <strong>Access tokens</strong>.</li>
<li>Select <strong>Generate new token</strong>.</li>
<li>Enter a name for your token.</li>
<li>Under <strong>Template</strong>, select <code>GCP Services Monitoring</code>.</li>
<li>Select <strong>Generate</strong>.</li>
<li>Copy the generated token to the clipboard. Store the token in a password manager for future use.</li>
</ol>
<p>Alternatively, you can create the token and add permissions manually.</p>
<p>Add manually</p>
<p><a href="/docs/manage/identity-access-management/access-tokens-and-oauth-clients/access-tokens#create-api-token" title="Learn the concept of an access token and its scopes.">Create an API token</a> and <a href="/docs/dynatrace-api/basics/dynatrace-api-authentication#token-permissions" title="Find out how to get authenticated to use the Dynatrace API.">enable the following permissions</a>:</p>
<ul>
<li>
<p>API v1:</p>
</li>
<li>
<p><strong>Read configuration</strong></p>
</li>
<li><strong>Write configuration</strong></li>
<li>
<p>API v2:</p>
</li>
<li>
<p><strong>Ingest metrics</strong></p>
</li>
<li><strong>Read extensions</strong></li>
<li><strong>Write extensions</strong></li>
<li><strong>Read extensions monitoring configuration</strong></li>
<li><strong>Write extensions monitoring configuration</strong></li>
<li><strong>Read extensions environment configuration</strong></li>
<li><strong>Write extensions environment configuration</strong></li>
<li><strong>Ingest logs</strong></li>
<li><strong>Manage metadata of Hub items</strong></li>
<li><strong>Read Hub related data</strong></li>
<li><strong>Install and update Hub items</strong></li>
</ul>
<p>To monitor logs from multiple projects, you need to create <strong>Log Routing Sinks</strong> in each source project selecting as a destination for your main project (in which you also deployed the integration and the PubSub Topic and Subscription).
For more information, see <a href="https://dt-url.net/cl038gj">Route logs to supported destinations√Ø¬ª¬ø</a>.</p>
<h3 id="log-ingestion_3">Log ingestion<a class="headerlink" href="#log-ingestion_3" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Determine where log ingestion will be performed, according to your deployment. This distinction is important when configuring the <a href="#param">parameters</a> for this integration.</p>
</li>
<li>
<p><strong>For SaaS deployments:</strong> SaaS log ingest, where log ingestion is performed directly through the Cluster API. Recommended</p>
</li>
<li><strong>For Managed deployments:</strong> You can use an existing ActiveGate for log ingestion. For information on how to deploy it, see <a href="/docs/ingest-from/dynatrace-activegate/installation" title="Learn how to configure ActiveGate">ActiveGate installation</a>.</li>
</ul>
<p>Because of GCP's implementation of Cloud Function 2nd gen, logs from those resources will be linked to the underlying Cloud Run instances. Both extensions will have to be enabled.</p>
<p>To learn more, visit <a href="https://dt-url.net/b6038q5">Google Cloud Functions version comparison√Ø¬ª¬ø</a>.</p>
<h2 id="install_4">Install<a class="headerlink" href="#install_4" title="Permanent link">&para;</a></h2>
<p>Complete the steps below to finish your setup.</p>
<p>[<img alt="Step 1" src="https://dt-cdn.net/images/step-1-086e22066c.svg" title="Step 1" /></p>
<p><strong>Download the Helm deployment package in Google Cloud Shell</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-on-existing-cluster#dwld "Deploy log and metric monitoring for Google Cloud services on an existing standard GKE or GKE Autopilot cluster")[<img alt="Step 2" src="https://dt-cdn.net/images/step-2-1a1384627e.svg" title="Step 2" /></p>
<p><strong>Configure parameter values</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-on-existing-cluster#param "Deploy log and metric monitoring for Google Cloud services on an existing standard GKE or GKE Autopilot cluster")[<img alt="Step 3" src="https://dt-cdn.net/images/step-3-350cf6c19a.svg" title="Step 3" /></p>
<p><strong>Connect your Kubernetes cluster</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-on-existing-cluster#connect "Deploy log and metric monitoring for Google Cloud services on an existing standard GKE or GKE Autopilot cluster")[<img alt="Step 4" src="https://dt-cdn.net/images/step-4-3f89d67d41.svg" title="Step 4" /></p>
<p><strong>Run the deployment script</strong>](/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-on-existing-cluster#script "Deploy log and metric monitoring for Google Cloud services on an existing standard GKE or GKE Autopilot cluster")</p>
<h3 id="step-1-download-the-helm-deployment-package-in-google-cloud-shell_3">Step 1 Download the Helm deployment package in Google Cloud Shell<a class="headerlink" href="#step-1-download-the-helm-deployment-package-in-google-cloud-shell_3" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a>wget -q &quot;https://github.com/dynatrace-oss/dynatrace-gcp-monitor/releases/latest/download/helm-deployment-package.tar&quot;; tar -xvf helm-deployment-package.tar; chmod +x helm-deployment-package/deploy-helm.sh
</code></pre></div>
<h3 id="step-2-configure-parameter-values_3">Step 2 Configure parameter values<a class="headerlink" href="#step-2-configure-parameter-values_3" title="Permanent link">&para;</a></h3>
<ol>
<li>The Helm deployment package contains a <code>values.yaml</code> file with the necessary configuration for this deployment. Go to <code>helm-deployment-package/dynatrace-gcp-monitor</code>and edit the <code>values.yaml</code> file, setting the required and optional parameter values as follows.</li>
</ol>
<p>You might want to store this file somewhere for future updates, since it will be needed in case of redeployments. Also, keep in mind that its schema can change. In such case, you should use the new file and only copy over the parameter values.</p>
<p><strong>Parameter name</strong></p>
<p><strong>Description</strong></p>
<p><strong>Default value</strong></p>
<p><code>parallelProcesses</code></p>
<p>Optional Number of parallel processes to run the whole log monitoring loop</p>
<p><code>1</code></p>
<p><code>numberOfConcurrentLogForwardingLoops</code></p>
<p>Optional Number of workers pulling logs from pubsub concurrently and pushing them to Dynatrace</p>
<p><code>5</code></p>
<p><code>numberOfConcurrentMessagePullCoroutines</code></p>
<p>Optional Number of concurrent coroutines to pull messages from pub/sub</p>
<p><code>10</code></p>
<p><code>numberOfConcurrentPushCoroutines</code></p>
<p>Optional Number of concurrent coroutines to push messages to Dynatrace</p>
<p><code>5</code></p>
<p><code>gcpProjectId</code></p>
<p>Required The ID of the GCP project you've selected for deployment.</p>
<p>Your current project ID</p>
<p><code>deploymentType</code></p>
<p>Required Leave to <code>all</code>.</p>
<p><code>all</code></p>
<p><code>dynatraceAccessKey</code></p>
<p>Required Your <a href="/docs/manage/identity-access-management/access-tokens-and-oauth-clients/access-tokens#create-api-token" title="Learn the concept of an access token and its scopes.">Dynatrace API token</a> with the <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#api" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">required permissions</a></p>
<p><code>dynatraceUrl</code></p>
<p>Required For SaaS log/metric ingestion, it's your environment URL (<code>https://&lt;your-environment-id&gt;.live.dynatrace.com</code>).</p>
<p><code>logsSubscriptionId</code></p>
<p>Required The ID of your log Sink Pub/Sub subscription. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#pubsub" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Configure log export</a>.</p>
<p><code>dynatraceLogIngestUrl</code></p>
<p>Optional You can set it if you want to ingest logs separately from metrics.For SaaS log ingestion, it's your environment URL (<code>https://&lt;your_environment_ID&gt;.live.dynatrace.com</code>).</p>
<p><code>dynatraceAccessKeySecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from GCP Secret Manager, instead of using <code>dynatraceAccessKey</code>.</p>
<p><code>dynatraceUrlSecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from GCP Secret Manager, instead of using <code>dynatraceUrl</code>.</p>
<p><code>dtSecurityContext</code></p>
<p>Optional Assign the attribute value used for data segmentation, analysis, and permission mapping within the Dynatrace platform. Refer to <a href="/docs/manage/identity-access-management/use-cases/access-security-context" title="Grant access to entities with security context">Grant access to entities with security context</a> for more information. If left empty, the value of <code>gcpProjectId</code> will be assigned automatically.</p>
<p>Value of <code>gcpProjectId</code></p>
<p><code>dynatraceLogIngestUrlSecretName</code></p>
<p>Optional You can specify the key to fetch the endpoint from GCP Secret Manager, instead of using <code>dynatraceLogIngestUrl</code>.</p>
<p><code>requireValidCertificate</code></p>
<p>Optional If set to <code>true</code>, Dynatrace requires the SSL certificate of your Dynatrace environment.For SaaS log ingestion, we recommend leaving the default value.</p>
<p><code>true</code></p>
<p><code>selfMonitoringEnabled</code></p>
<p>Optional Send custom metrics to GCP to quickly diagnose if <code>dynatrace-gcp-monitor</code> processes and sends metrics/logs to Dynatrace properly.For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Self-monitoring metrics for the Dynatrace GCP integration</a>.</p>
<p><code>false</code></p>
<p><code>serviceAccount</code></p>
<p>Optional Name of the service account to be created.</p>
<p><code>dockerImage</code></p>
<p>OptionalDynatrace GCP Monitor docker image. We recommend using the default value, but you can adapt it if needed.</p>
<p><code>dynatrace/dynatrace-gcp-monitor:v1-latest</code></p>
<p><code>logIngestContentMaxLength</code></p>
<p>Optional The maximum content length of a log event. Should be less than or equal to the setting on your Dynatrace environment.</p>
<p><code>8192</code></p>
<p><code>logIngestAttributeValueMaxLength</code></p>
<p>Optional The maximum length of the log event attribute value. If it exceeds the server limit, content will be truncated.</p>
<p><code>250</code></p>
<p><code>logIngestRequestMaxEvents</code></p>
<p>Optional The maximum number of log events in a single payload to the logs ingestion endpoint. If it exceeds the server limit, payload will be rejected with code <code>413</code>.</p>
<p><code>5000</code></p>
<p><code>logIngestRequestMaxSize</code></p>
<p>Optional The maximum size in bytes of a single payload to the logs ingestion endpoint. If it exceeds the server limit, payload will be rejected with code <code>413</code>.</p>
<p><code>1048576</code></p>
<p><code>logIngestEventMaxAgeSeconds</code></p>
<p>Optional Determines the maximum age of a forwarded log event. Should be less than or equal to the setting on your Dynatrace environment.</p>
<p><code>86400</code></p>
<p><code>printMetricIngestInput</code></p>
<p>Optional If set to <code>true</code>, the GCP Monitor outputs the lines of metrics to stdout.</p>
<p><code>false</code></p>
<p><code>serviceUsageBooking</code></p>
<p>Optional Service usage booking is used for metrics and determines a caller-specified project for quota and billing purposes. If set to <code>source</code>, monitoring API calls are booked in the project where the Kubernetes container is running. If set to <code>destination</code>, monitoring API calls are booked in the project that is monitored. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">Monitor multiple GCP projects - Standard environments - Step 4</a>.</p>
<p><code>source</code></p>
<p><code>useProxy</code></p>
<p>Optional Depending on the value you set for this flag, the GCP Monitor will use the following proxy settings: Dynatrace (set to <code>DT_ONLY</code>), GCP API (set to <code>GCP_ONLY</code>), or both (set to <code>ALL</code>).</p>
<p>By default, proxy settings are not used.</p>
<p><code>httpProxy</code></p>
<p>Optional The proxy HTTP address; use this flag in conjunction with <code>USE_PROXY</code>.</p>
<p><code>httpsProxy</code></p>
<p>Optional The proxy HTTPS address; use this flag in conjunction with <code>USE_PROXY</code>.</p>
<p><code>gcpServicesYaml</code></p>
<p>Optional Configuration file for GCP services.</p>
<p><code>queryInterval</code></p>
<p>Optional Metrics polling interval in minutes. Allowed values: <code>1</code> - <code>6</code></p>
<p><code>3</code></p>
<p><code>scopingProjectSupportEnabled</code></p>
<p>Optional Set to <code>true</code> when metrics scope is configured, so metrics will be collected from all projects added to the metrics scope.For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">Monitor multiple GCP projects - Large environments</a>.</p>
<p><code>false</code></p>
<p><code>excludedProjects</code></p>
<p>Optional Comma-separated list of projects to be excluded from monitoring (for example, <code>&lt;project_A&gt;,&lt;project_B&gt;</code>)</p>
<p><code>excludedMetricsAndDimensions</code></p>
<p>Optional Yaml formatted list of metrics and their dimensions to be excluded for monitoring.</p>
<p><code>metricAutodiscovery</code></p>
<p>Optional If set to <code>true</code>, the GCP Monitor will run metric auto-discovery mode, expanding your options for selecting metrics to monitor. For more information, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/gcp-autodiscovery" title="Push any metrics to Dynatrace from Google Cloud projects.">Monitor GCP projects using auto-discovery</a>.</p>
<p><code>false</code>
2. Choose which services you want Dynatrace to monitor.</p>
<p>By default, the Dynatrace Google Cloud integration starts monitoring a set of selected services. Go to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a> for a list of supported services.</p>
<p>For DDU consumption information, see <a href="#ddu">Monitoring consumption</a>.</p>
<h3 id="step-3-connect-your-kubernetes-cluster_2">Step 3 Connect your Kubernetes cluster<a class="headerlink" href="#step-3-connect-your-kubernetes-cluster_2" title="Permanent link">&para;</a></h3>
<p>To connect to your existing GKE standard cluster or existing GKE Autopilot cluster, run the command below, making sure to replace</p>
<ul>
<li><code>&lt;cluster&gt;</code> with your cluster name</li>
<li><code>&lt;region&gt;</code> with the region where your cluster is running</li>
<li><code>&lt;project&gt;</code> with the project ID where your cluster is running</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a>gcloud container clusters get-credentials &lt;cluster&gt; --region &lt;region&gt; --project &lt;project&gt;
</code></pre></div>
<p>For details, see <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl#generate_kubeconfig_entry">Configuring cluster access for kubectl√Ø¬ª¬ø</a>.</p>
<h3 id="step-4-run-the-deployment-script_2">Step 4 Run the deployment script<a class="headerlink" href="#step-4-run-the-deployment-script_2" title="Permanent link">&para;</a></h3>
<p>The deployment script will create an IAM service account with the necessary roles and deploy <code>dynatrace-gcp-monitor</code> to your GKE cluster. The latest versions of Google Cloud extensions will be uploaded.</p>
<p>You have two options:</p>
<ul>
<li>Run the deployment script without parameters if you want to use the default values provided (<code>dynatrace-gcp-monitor-sa</code> for the IAM service account name and <code>dynatrace_monitor</code> for the IAM role name prefix):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a>cd helm-deployment-package
<a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a>
<a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a>
<a id="__codelineno-123-4" name="__codelineno-123-4" href="#__codelineno-123-4"></a>
<a id="__codelineno-123-5" name="__codelineno-123-5" href="#__codelineno-123-5"></a>./deploy-helm.sh
</code></pre></div>
<ul>
<li>Run the deployment script with parameters if you want to set your own values (be sure to replace the placeholders with your desired values):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a>cd helm-deployment-package
<a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a>
<a id="__codelineno-124-3" name="__codelineno-124-3" href="#__codelineno-124-3"></a>
<a id="__codelineno-124-4" name="__codelineno-124-4" href="#__codelineno-124-4"></a>
<a id="__codelineno-124-5" name="__codelineno-124-5" href="#__codelineno-124-5"></a>./deploy-helm.sh [--role-name &lt;role-to-be-created/updated&gt;]
</code></pre></div>
<p>To keep the existing versions of present extensions and install the latest versions for the rest of the selected extensions, if they are not present, run the command below instead.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a>cd helm-deployment-package
<a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a>
<a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a>
<a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a>
<a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a>./deploy-helm.sh --without-extensions-upgrade
</code></pre></div>
<h2 id="verify-installation_4">Verify installation<a class="headerlink" href="#verify-installation_4" title="Permanent link">&para;</a></h2>
<p>To check whether installation was successful</p>
<ol>
<li>Check if the container is running.</li>
</ol>
<p>After the installation, it may take couple of minutes until the container is up and running.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a>kubectl -n dynatrace get pods
</code></pre></div>
2. Check the container logs for errors or exceptions. You have two options:</p>
<p>In the Kubernetes CLI</p>
<p>In your Google Cloud console</p>
<p>Run the following commands.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a>kubectl -n dynatrace logs -l app=dynatrace-gcp-monitor -c dynatrace-gcp-monitor-metrics
<a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a>
<a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a>
<a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a>
<a id="__codelineno-127-5" name="__codelineno-127-5" href="#__codelineno-127-5"></a>kubectl -n dynatrace logs -l app=dynatrace-gcp-monitor -c dynatrace-gcp-monitor-logs
</code></pre></div>
<p>To check the container logs for errors in your Google Cloud console</p>
<ol>
<li>Go to <strong>Logs explorer</strong>.</li>
<li>
<p>Use the filters below to get metric and/or log ingest logs from the Kubernetes container:</p>
</li>
<li>
<p><code>resource.type="k8s_container"</code></p>
</li>
<li><code>resource.labels.container_name="dynatrace-gcp-monitor-metrics"</code> (for metric ingest logs)</li>
<li>
<p><code>resource.labels.container_name="dynatrace-gcp-monitor-logs"</code> (for log ingest logs)</p>
</li>
<li>
<p>Check if dashboards are imported.</p>
</li>
</ol>
<p>Go to <img alt="Dashboards Classic" src="https://dt-cdn.net/images/dashboards-classic-512-15764940e8.png" title="Dashboards Classic" /> <strong>Dashboards Classic</strong> and filter by <strong>Tag</strong> for <code>Google Cloud</code>. A number of dashboards for Google Cloud Services should be available.</p>
<h2 id="choose-services-for-metrics-monitoring_2">Choose services for metrics monitoring<a class="headerlink" href="#choose-services-for-metrics-monitoring_2" title="Permanent link">&para;</a></h2>
<h3 id="services-enabled-by-default_2">Services enabled by default<a class="headerlink" href="#services-enabled-by-default_2" title="Permanent link">&para;</a></h3>
<p>Monitoring of following services will be enabled during deployment of Google Cloud Monitor:</p>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-apis-monitoring" title="Monitor Google Cloud APIs and view available metrics.">Google APIs</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-app-engine/app-engine-monitoring" title="Monitor Google App Engine and view available metrics.">Google App Engine</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-bigquery-monitoring" title="Monitor Google BigQuery and view available metrics.">Google BigQuery</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/cloud-functions-monitoring" title="Monitor Google Cloud Functions and view available metrics.">Google Cloud Functions</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun/cloud-run-monitoring" title="Monitor Google Cloud Run and view available metrics.">Google Cloud Run</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-storage-monitoring" title="Monitor Google Cloud Storage and view available metrics.">Google Cloud Storage</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-compute-engine/compute-engine-monitoring" title="Monitor Google Compute Engine and view available metrics.">Google Compute Engine</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-in-datastore-mode-monitoring" title="Monitor Google Cloud Firestore in Datastore mode and view available metrics.">Google Firestore in Datastore mode</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-monitoring" title="Monitor Google Filestore and view available metrics.">Google Filestore</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-gke/google-kubernetes-engine-monitoring" title="Monitor Google Kubernetes Engine and view available metrics.">Google Kubernetes Engine</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-load-balancing-monitoring" title="Monitor Google Cloud Load Balancing and view available metrics.">Google Cloud Load Balancing</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-monitoring" title="Monitor Google Cloud Pub/Sub and view available metrics.">Google Cloud Pub/Sub</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-lite-monitoring" title="Monitor Google Cloud Pub/Sub Lite and view available metrics.">Google Cloud Pub/Sub Lite</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-sql" title="Monitor Google Cloud SQL and view available metrics.">Google Cloud SQL</a></li>
</ul>
<p>There are more service integrations available, but need to be enabled. Go to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a> for a list of supported services. Next section describes how to manage them. For an alternative approach, consider leveraging <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/gcp-autodiscovery" title="Push any metrics to Dynatrace from Google Cloud projects.">auto-discovery</a> to extend your metric coverage.</p>
<h3 id="manage-enabled-services_2">Manage enabled services<a class="headerlink" href="#manage-enabled-services_2" title="Permanent link">&para;</a></h3>
<p>You can manage enabled services via Dynatrace Hub.</p>
<p>Filter for "gcp"√¢¬Ä¬îyou'll find annotations in the results for items that are already available in your environment.</p>
<p>To enable a new service, select it in Hub and then install it.</p>
<p>You can also disable a service via Dynatrace Hub.</p>
<p>To see if the services need updating, open them in Hub and check release notes. The updates can include new metrics, new assets like dashboards, or other changes.</p>
<p>All changes to enabled services are applied to Google Cloud Monitor within few minutes.</p>
<h4 id="feature-sets-available-metrics_2">Feature sets &amp; available metrics<a class="headerlink" href="#feature-sets-available-metrics_2" title="Permanent link">&para;</a></h4>
<p>To see what metrics are included for specific service, check <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported services</a>. By default, only <code>defaultMetrics</code> feature set is enabled. To enable additional feature sets, you have to uncomment them in <code>values.yaml</code> file and redeploy whole Google Cloud Monitor.</p>
<p>Current configuration of feature sets can be found in cluster's ConfigMap named <code>dynatrace-gcp-function-config</code>.</p>
<h4 id="advanced-scope-management_2">Advanced scope management<a class="headerlink" href="#advanced-scope-management_2" title="Permanent link">&para;</a></h4>
<p>To further refine monitoring scope, you can use <code>filter_conditions</code> field in <code>values.yaml</code> file. This requires Google Cloud Monitor to be redeployed. See <a href="https://cloud.google.com/monitoring/api/v3/filters?hl=en_US">Google Cloud Monitoring filters√Ø¬ª¬ø</a> for syntax.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>filter_conditions:
<a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>
<a id="__codelineno-128-3" name="__codelineno-128-3" href="#__codelineno-128-3"></a>
<a id="__codelineno-128-4" name="__codelineno-128-4" href="#__codelineno-128-4"></a>
<a id="__codelineno-128-5" name="__codelineno-128-5" href="#__codelineno-128-5"></a>resource.labels.location = &quot;us-central1-c&quot; AND resource.labels.namespace_name = &quot;dynatrace&quot;
</code></pre></div>
<h2 id="enable-alerting_4">Enable alerting<a class="headerlink" href="#enable-alerting_4" title="Permanent link">&para;</a></h2>
<p>To activate alerting, you need to enable metric events for alerting in Dynatrace.</p>
<p>To enable metric events</p>
<ol>
<li>Go to <strong>Settings</strong>.</li>
<li>Select <strong>Anomaly detection</strong> &gt; <strong>Metric events</strong>.</li>
<li>Filter for Google Cloud alerts and turn on <strong>On/Off</strong> for the alerts you want to activate.</li>
</ol>
<h2 id="view-metrics-and-logs_1">View metrics and logs<a class="headerlink" href="#view-metrics-and-logs_1" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, depending on your deployment type, you can:</p>
<ul>
<li>See metrics from monitored services: go to <strong>Metrics</strong> and filter by <code>gcp</code>.</li>
<li>View and analyze Google Cloud logs: in Dynatrace, go to <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong> and, to look for Google Cloud logs, filter by <code>cloud.provider: gcp</code>.</li>
</ul>
<h2 id="change-deployment-settings_4">Change deployment settings<a class="headerlink" href="#change-deployment-settings_4" title="Permanent link">&para;</a></h2>
<h3 id="change-parameters-from-valuesyaml_3">Change parameters from <code>values.yaml</code><a class="headerlink" href="#change-parameters-from-valuesyaml_3" title="Permanent link">&para;</a></h3>
<p>To load a new <code>values.yaml</code> file, you need to upgrade your Helm release.</p>
<p>To update your Helm release</p>
<ol>
<li>Find out what helm release version you're using.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a>helm ls -n dynatrace
</code></pre></div>
2. Run the command below, making sure to replace <code>&lt;your-helm-release&gt;</code> with the value from the previous step.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a>helm upgrade &lt;your-helm-release&gt; dynatrace-gcp-monitor -n dynatrace
</code></pre></div>
<p>For details, see <a href="https://helm.sh/docs/helm/helm_upgrade/">Helm upgrade√Ø¬ª¬ø</a>.</p>
<h3 id="change-deployment-type_3">Change deployment type<a class="headerlink" href="#change-deployment-type_3" title="Permanent link">&para;</a></h3>
<p>To change the deployment type (<code>all</code>, <code>metrics</code>, or <code>logs</code>)</p>
<ol>
<li>Find out what Helm release version you're using.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a>helm ls -n dynatrace
</code></pre></div>
2. Uninstall the release.</p>
<p>Be sure to replace <code>&lt;your-helm-release&gt;</code> with the release name from the previous output.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>helm uninstall &lt;your-helm-release&gt; -n dynatrace
</code></pre></div>
3. Edit <code>deploymentType</code> in <code>values.yaml</code> with the new value and save the file.
4. Run the deployment command again. For details, see <a href="#script">Run the deployment script</a>.</p>
<h2 id="verification_4">Verification<a class="headerlink" href="#verification_4" title="Permanent link">&para;</a></h2>
<p>To investigate potential deployment and connectivity issues</p>
<ol>
<li><a href="#verify">Verify installation</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Enable self-monitoring</a> Optional</li>
<li>
<p>Check the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file created during the installation process.</p>
</li>
<li>
<p>This file will be created each time the installation script runs.</p>
</li>
<li>The debug information won't contain sensitive data such as the Dynatrace access key.</li>
<li>
<p>If you are contacting a Dynatrace product expert via live chat:</p>
</li>
<li>
<p>Make sure to provide the <code>dynatrace_gcp_&lt;date_time&gt;.log</code> log file described in the previous step.</p>
</li>
<li>
<p>Provide version information.</p>
<ul>
<li>For issues during installation, check the <code>version.txt</code> file.</li>
<li>For issues during runtime, <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">check container logs</a>.</li>
</ul>
</li>
</ol>
<h2 id="scaling-guide-for-logs_2">Scaling guide for logs<a class="headerlink" href="#scaling-guide-for-logs_2" title="Permanent link">&para;</a></h2>
<p>The default container with 1.25vCPU and 1Gi (with default configuration) can handle 8 GB of log throughput per hour. Achieving more throughput requires allocating more resources to the container (scale up), increasing the number of container replicas (scale out), and changing configuration numbers to use allocated resources efficiently. All config variables can be found and changed in <code>dynatrace-gcp-monitor-config</code>.</p>
<p>The following table presents tested configuration and achieved throughput with scaled up&amp;out containers:</p>
<p>Achieved throughput</p>
<p>Machine resources</p>
<p>Replica sets</p>
<p>Config variable values</p>
<p>~8MB/s =&gt; ~480MB/min</p>
<p>4vCPU 4Gi RAM</p>
<p>1</p>
<p><code>PARALLEL_PROCESSES=4</code>,<br />
<code>NUMBER_OF_CONCURRENT_MESSAGE_PULL_COROUTINES = 30</code>,<br />
<code>NUMBER_OF_CONCURRENT_PUSH_COROUTINES=20</code></p>
<p>~25MB/s =&gt; ~1.5GB/min =&gt; ~2TB/day</p>
<p>4vCPU 4Gi RAM</p>
<p>4</p>
<p><code>PARALLEL_PROCESSES=4</code>,<br />
<code>NUMBER_OF_CONCURRENT_MESSAGE_PULL_COROUTINES = 30</code>,<br />
<code>NUMBER_OF_CONCURRENT_PUSH_COROUTINES=20</code></p>
<p>~46MB/s =&gt; ~2.7GB/min =&gt; ~4TB/day</p>
<p>4vCPU 4Gi RAM</p>
<p>6</p>
<p><code>PARALLEL_PROCESSES=4</code>,<br />
<code>NUMBER_OF_CONCURRENT_MESSAGE_PULL_COROUTINES = 30</code>,<br />
<code>NUMBER_OF_CONCURRENT_PUSH_COROUTINES=20</code></p>
<h2 id="autoscaling-guide-for-logs_2">Autoscaling guide for logs<a class="headerlink" href="#autoscaling-guide-for-logs_2" title="Permanent link">&para;</a></h2>
<p>Autoscaling works only for <code>logs</code> type of deployment, not <code>all</code>.</p>
<p>We recommend manually scaling the container to have a 4vCPU 4Gi machine and then enabling autoscaling.</p>
<p>GCP provides autoscaling of containers in both directions: <strong>horizontal</strong> and <strong>vertical</strong>. However, Dynatrace recommends only <strong>horizontal</strong> scaling.</p>
<p>If you have a 4vCPU 4Gi machine, you can enable autoscaling <strong>horizontally</strong>. However, we <strong>don't</strong> recommend scaling horizontally with the base resources of the container (1.25vCPU, 1Gi). It hasn't been proven to be efficient during testing. One 4vCPU machine does better than four 1vCPU machines. To enable autoscaling horizontally, use the horizontal autoscaling command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>kubectl autoscale deployment dynatrace-gcp-monitor --namespace dynatrace --cpu-percent=90 --min=1 --max=6
</code></pre></div>
<p>Autoscaling is recommended only when you have a minimum of 450 MB/min throughput and can provide a 4vCPU 4Gi RAM machine. Autoscaling is only scaling out, not scaling the machine up.</p>
<p>We <strong>don't</strong> recommend scaling <strong>vertically</strong> because every time a machine is scaled up, an environment variable needs to be changed to create more processes corresponding to machine cores.</p>
<h2 id="uninstall_4">Uninstall<a class="headerlink" href="#uninstall_4" title="Permanent link">&para;</a></h2>
<ol>
<li>Find out what Helm release version you're using.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a>helm ls -n dynatrace
</code></pre></div>
<ol>
<li>Uninstall the release.</li>
</ol>
<p>Be sure to replace <code>&lt;your-helm-release&gt;</code> with the release name from the previous output.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a>helm uninstall &lt;your-helm-release&gt; -n dynatrace
</code></pre></div>
<p>Alternatively, you can delete the namespace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a>kubectl delete namespace dynatrace
</code></pre></div>
<ol>
<li>To remove all monitoring assets (such as dashboards and alerts) from Dynatrace, you need to remove all Google Cloud extensions.</li>
</ol>
<p>You can find and delete relevant extensions via Dynatrace Hub.</p>
<p>Make sure to uninstall the following resources manually:</p>
<ul>
<li>The initial Role created and attached to the Service Account that you used to deploy the integration.</li>
<li>The PubSub Topic.</li>
<li>The PubSub Subscription.</li>
<li>The LogRoute Sink.</li>
</ul>
<h2 id="monitoring-consumption_5">Monitoring consumption<a class="headerlink" href="#monitoring-consumption_5" title="Permanent link">&para;</a></h2>
<h3 id="metric-ingestion_1">Metric ingestion<a class="headerlink" href="#metric-ingestion_1" title="Permanent link">&para;</a></h3>
<p>All cloud services consume DDUs. The amount of DDU consumption per service instance depends on the number of monitored metrics and their dimensions (each metric dimension results in the ingestion of 1 data point; 1 data point consumes 0.001 DDUs). For details, see <a href="/docs/license/monitoring-consumption-classic/davis-data-units" title="Understand how Dynatrace monitoring consumption is calculated based on Davis data units (DDU).">Extending Dynatrace (Davis data units)</a>.</p>
<h3 id="log-ingestion_4">Log ingestion<a class="headerlink" href="#log-ingestion_4" title="Permanent link">&para;</a></h3>
<p>DDU consumption applies to cloud Log Monitoring. See <a href="/docs/license/monitoring-consumption-classic/davis-data-units/log-monitoring-consumption" title="Understand how the volume of DDU consumption is calculated for Dynatrace Log Monitoring Classic.">DDUs for Log Monitoring</a> for details.</p>
<h2 id="related-topics_13">Related topics<a class="headerlink" href="#related-topics_13" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Google-Cloud-Monitor-Troubleshooting/ta-p/243796">Google Cloud Monitor Troubleshooting√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-gcp-guidemd">Source: gcp-guide.md<a class="headerlink" href="#source-gcp-guidemd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: End-to-end guide for monitoring Google Cloud services integrating Operations Suite
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide
scraped: 2026-02-17T05:01:45.364328</p>
<hr />
<h1 id="end-to-end-guide-for-monitoring-google-cloud-services-integrating-operations-suite">End-to-end guide for monitoring Google Cloud services integrating Operations Suite<a class="headerlink" href="#end-to-end-guide-for-monitoring-google-cloud-services-integrating-operations-suite" title="Permanent link">&para;</a></h1>
<h1 id="end-to-end-guide-for-monitoring-google-cloud-services-integrating-operations-suite_1">End-to-end guide for monitoring Google Cloud services integrating Operations Suite<a class="headerlink" href="#end-to-end-guide-for-monitoring-google-cloud-services-integrating-operations-suite_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>2-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace perfectly integrates with Google Cloud to provide deep visibility into the workloads that are running on this platform.</p>
<h2 id="google-cloud-supported-services">Google Cloud supported services<a class="headerlink" href="#google-cloud-supported-services" title="Permanent link">&para;</a></h2>
<p>Dynatrace can analyze metrics from all services available in Google Operations API. To learn about monitoring the Google Cloud supported services, capabilities and configuration options, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud supported service metrics</a>.</p>
<h2 id="google-cloud-overview">Google Cloud overview<a class="headerlink" href="#google-cloud-overview" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides the Google Cloud overview page. It includes views per Google Cloud project and lists of instances for VMs, SQLs, Cloud Functions, and Kubernetes.</p>
<p>If you are already monitoring Google Cloud and the overview is not available, you need to update the Google Cloud integration you have.</p>
<h2 id="set-up-metric-and-log-ingest">Set up metric and log ingest<a class="headerlink" href="#set-up-metric-and-log-ingest" title="Permanent link">&para;</a></h2>
<p>To start analyzing metrics and logs from all services available in the Google Operations API, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up the Dynatrace Google Cloud metric and log integration on a new GKE Autopilot cluster</a> Recommended.</p>
<p>For other deployment options, see</p>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-on-existing-cluster" title="Deploy log and metric monitoring for Google Cloud services on an existing standard GKE or GKE Autopilot cluster">Set up the Dynatrace Google Cloud log and metric integration on an existing GKE cluster</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-metrics-only" title="Set up metric monitoring for Google Cloud services on a GKE cluster.">Set up the Dynatrace Google Cloud metric integration on a GKE cluster</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/set-up-gcp-integration-logs-only" title="Set up log monitoring for Google Cloud services in a Kubernetes container (GKE).">Set up the Dynatrace Google Cloud log integration on a GKE cluster</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-with-google-cloud-function" title="Set up monitoring for Google Cloud services in Google Cloud Functions.">Deploy the Dynatrace Google Cloud metric integration in Google Cloud Function</a></li>
</ul>
<p>The <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">main deployment</a> describes how to install version 1.0 of the Google Cloud integration on a GKE cluster. If you already have earlier versions installed, you need to <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/migrate-gcp-function" title="Migrate from Google Cloud integration version 0.1 to version 1.0 on Kubernetes and as a Google Cloud Function.">migrate</a>.</p>
<p>After deploying the integration, <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/monitor-multiple-projects" title="Push metrics to Dynatrace from multiple Google Cloud projects.">you can push metrics to Dynatrace from multiple Google Cloud projects</a>.</p>
<p>To check if your monitoring function processes and sends logs to Dynatrace properly, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8/self-monitoring-gcp" title="Determine if your self-monitoring function is properly processing and sending logs to Dynatrace.">Self-monitoring for the Dynatrace Google Cloud integration</a>.</p>
<h2 id="monitoring-consumption_6">Monitoring consumption<a class="headerlink" href="#monitoring-consumption_6" title="Permanent link">&para;</a></h2>
<h3 id="metric-ingestion_2">Metric ingestion<a class="headerlink" href="#metric-ingestion_2" title="Permanent link">&para;</a></h3>
<p>All cloud services consume DDUs. The amount of DDU consumption per service instance depends on the number of monitored metrics and their dimensions (each metric dimension results in the ingestion of 1 data point; 1 data point consumes 0.001 DDUs). For details, see <a href="/docs/license/monitoring-consumption-classic/davis-data-units" title="Understand how Dynatrace monitoring consumption is calculated based on Davis data units (DDU).">Extending Dynatrace (Davis data units)</a>.</p>
<h3 id="log-ingestion_5">Log ingestion<a class="headerlink" href="#log-ingestion_5" title="Permanent link">&para;</a></h3>
<p>DDU consumption applies to cloud Log Monitoring. See <a href="/docs/license/monitoring-consumption-classic/davis-data-units/log-monitoring-consumption" title="Understand how the volume of DDU consumption is calculated for Dynatrace Log Monitoring Classic.">DDUs for Log Monitoring</a> for details.</p>
<h2 id="related-topics_14">Related topics<a class="headerlink" href="#related-topics_14" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
</ul>
<hr />
<h2 id="source-gcp-apigee-monitoringmd">Source: gcp-apigee-monitoring.md<a class="headerlink" href="#source-gcp-apigee-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Apigee monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-apigee-monitoring
scraped: 2026-02-17T05:01:11.563837</p>
<hr />
<h1 id="google-cloud-apigee-monitoring">Google Cloud Apigee monitoring<a class="headerlink" href="#google-cloud-apigee-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-apigee-monitoring_1">Google Cloud Apigee monitoring<a class="headerlink" href="#google-cloud-apigee-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_14">Prerequisites<a class="headerlink" href="#prerequisites_14" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_2">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_2" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_3">View metrics<a class="headerlink" href="#view-metrics_3" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_2">Metric table<a class="headerlink" href="#metric-table_2" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Apigee.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>apigee_googleapis_com_Environment/default_metrics</td>
<td>Apigee anomaly event count</td>
<td>Count</td>
<td>apigee.googleapis.com/environment/anomaly_count</td>
</tr>
<tr>
<td>apigee_googleapis_com_Proxy/default_metrics</td>
<td>Apigee policy response latencies</td>
<td>MilliSecond</td>
<td>apigee.googleapis.com/policy/latencies</td>
</tr>
<tr>
<td>apigee_googleapis_com_Proxy/default_metrics</td>
<td>Apigee proxy response latencies</td>
<td>MilliSecond</td>
<td>apigee.googleapis.com/proxy/latencies</td>
</tr>
<tr>
<td>apigee_googleapis_com_Proxy/default_metrics</td>
<td>Apigee proxy request cumulative count</td>
<td>Count</td>
<td>apigee.googleapis.com/proxy/request_count</td>
</tr>
<tr>
<td>apigee_googleapis_com_Proxy/default_metrics</td>
<td>Apigee proxy response cumulative count</td>
<td>Count</td>
<td>apigee.googleapis.com/proxy/response_count</td>
</tr>
<tr>
<td>apigee_googleapis_com_Proxy/default_metrics</td>
<td>Apigee target response latencies</td>
<td>MilliSecond</td>
<td>apigee.googleapis.com/target/latencies</td>
</tr>
<tr>
<td>apigee_googleapis_com_Proxy/default_metrics</td>
<td>Apigee target request cumulative count</td>
<td>Count</td>
<td>apigee.googleapis.com/target/request_count</td>
</tr>
<tr>
<td>apigee_googleapis_com_Proxy/default_metrics</td>
<td>Apigee target response cumulative count</td>
<td>Count</td>
<td>apigee.googleapis.com/target/response_count</td>
</tr>
<tr>
<td>Deprecated apigee_googleapis_com_ProxyV2/default_metrics</td>
<td>Percentile of Apigee policy response latencies</td>
<td>MilliSecond</td>
<td>apigee.googleapis.com/policyv2/latencies_percentile</td>
</tr>
<tr>
<td>Deprecated apigee_googleapis_com_ProxyV2/default_metrics</td>
<td>Percentile of Apigee proxy response latencies</td>
<td>MilliSecond</td>
<td>apigee.googleapis.com/proxyv2/latencies_percentile</td>
</tr>
<tr>
<td>Deprecated apigee_googleapis_com_ProxyV2/default_metrics</td>
<td>Apigee proxy request cumulative count</td>
<td>Count</td>
<td>apigee.googleapis.com/proxyv2/request_count</td>
</tr>
<tr>
<td>Deprecated apigee_googleapis_com_ProxyV2/default_metrics</td>
<td>Apigee proxy response cumulative count</td>
<td>Count</td>
<td>apigee.googleapis.com/proxyv2/response_count</td>
</tr>
<tr>
<td>Deprecated apigee_googleapis_com_ProxyV2/default_metrics</td>
<td>Apigee target request cumulative count</td>
<td>Count</td>
<td>apigee.googleapis.com/targetv2/request_count</td>
</tr>
<tr>
<td>Deprecated apigee_googleapis_com_ProxyV2/default_metrics</td>
<td>Apigee target response cumulative count</td>
<td>Count</td>
<td>apigee.googleapis.com/targetv2/response_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_15">Related topics<a class="headerlink" href="#related-topics_15" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-apis-monitoringmd">Source: gcp-apis-monitoring.md<a class="headerlink" href="#source-gcp-apis-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud APIs monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-apis-monitoring
scraped: 2026-02-17T05:07:39.337816</p>
<hr />
<h1 id="google-cloud-apis-monitoring">Google Cloud APIs monitoring<a class="headerlink" href="#google-cloud-apis-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-apis-monitoring_1">Google Cloud APIs monitoring<a class="headerlink" href="#google-cloud-apis-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_15">Prerequisites<a class="headerlink" href="#prerequisites_15" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_3">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_3" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_4">View metrics<a class="headerlink" href="#view-metrics_4" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_3">Metric table<a class="headerlink" href="#metric-table_3" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud APIs.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>api/default_metrics</td>
<td>Request count</td>
<td>Count</td>
<td>serviceruntime.googleapis.com/api/request_count</td>
</tr>
<tr>
<td>api/default_metrics</td>
<td>Request latencies</td>
<td>Second</td>
<td>serviceruntime.googleapis.com/api/request_latencies</td>
</tr>
<tr>
<td>api/default_metrics</td>
<td>Request backend latencies</td>
<td>Second</td>
<td>serviceruntime.googleapis.com/api/request_latencies_backend</td>
</tr>
<tr>
<td>api/default_metrics</td>
<td>Request overhead latencies</td>
<td>Second</td>
<td>serviceruntime.googleapis.com/api/request_latencies_overhead</td>
</tr>
<tr>
<td>consumer_quota/default_metrics</td>
<td>Allocation quota usage</td>
<td>Count</td>
<td>serviceruntime.googleapis.com/quota/allocation/usage</td>
</tr>
<tr>
<td>consumer_quota/default_metrics</td>
<td>Quota exceeded error</td>
<td>Count</td>
<td>serviceruntime.googleapis.com/quota/exceeded</td>
</tr>
<tr>
<td>consumer_quota/default_metrics</td>
<td>Quota limit</td>
<td>Count</td>
<td>serviceruntime.googleapis.com/quota/limit</td>
</tr>
<tr>
<td>consumer_quota/default_metrics</td>
<td>Rate quota usage</td>
<td>Count</td>
<td>serviceruntime.googleapis.com/quota/rate/net_usage</td>
</tr>
<tr>
<td>consumed_api/default_metrics</td>
<td>Request count</td>
<td>Count</td>
<td>serviceruntime.googleapis.com/api/request_count</td>
</tr>
<tr>
<td>consumed_api/default_metrics</td>
<td>Request latencies</td>
<td>Second</td>
<td>serviceruntime.googleapis.com/api/request_latencies</td>
</tr>
<tr>
<td>consumed_api/default_metrics</td>
<td>Request sizes</td>
<td>Byte</td>
<td>serviceruntime.googleapis.com/api/request_sizes</td>
</tr>
<tr>
<td>consumed_api/default_metrics</td>
<td>Response sizes</td>
<td>Byte</td>
<td>serviceruntime.googleapis.com/api/response_sizes</td>
</tr>
<tr>
<td>producer_quota/default_metrics</td>
<td>Allocation quota usage</td>
<td>Count</td>
<td>serviceruntime.googleapis.com/quota/allocation/usage</td>
</tr>
<tr>
<td>producer_quota/default_metrics</td>
<td>Quota limit</td>
<td>Count</td>
<td>serviceruntime.googleapis.com/quota/limit</td>
</tr>
<tr>
<td>producer_quota/default_metrics</td>
<td>Rate quota usage</td>
<td>Count</td>
<td>serviceruntime.googleapis.com/quota/rate/net_usage</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_16">Related topics<a class="headerlink" href="#related-topics_16" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-assistant-smart-home-monitoringmd">Source: gcp-assistant-smart-home-monitoring.md<a class="headerlink" href="#source-gcp-assistant-smart-home-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Assistant Smart Home monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-assistant-smart-home-monitoring
scraped: 2026-02-17T05:07:21.711342</p>
<hr />
<h1 id="google-cloud-assistant-smart-home-monitoring">Google Cloud Assistant Smart Home monitoring<a class="headerlink" href="#google-cloud-assistant-smart-home-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-assistant-smart-home-monitoring_1">Google Cloud Assistant Smart Home monitoring<a class="headerlink" href="#google-cloud-assistant-smart-home-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_16">Prerequisites<a class="headerlink" href="#prerequisites_16" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_4">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_4" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_5">View metrics<a class="headerlink" href="#view-metrics_5" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_4">Metric table<a class="headerlink" href="#metric-table_4" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Assistant Smart Home.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>assistant_action_project/default_metrics</td>
<td>Daily active users</td>
<td>Count</td>
<td>actions.googleapis.com/smarthome_action/num_active_users</td>
</tr>
<tr>
<td>assistant_action_project/default_metrics</td>
<td>Request count</td>
<td>Count</td>
<td>actions.googleapis.com/smarthome_action/request_count</td>
</tr>
<tr>
<td>assistant_action_project/default_metrics</td>
<td>Request latencies</td>
<td>MilliSecond</td>
<td>actions.googleapis.com/smarthome_action/request_latencies</td>
</tr>
<tr>
<td>assistant_action_project/default_metrics</td>
<td>7 day active users</td>
<td>Count</td>
<td>actions.googleapis.com/smarthome_action/seven_day_active_users</td>
</tr>
<tr>
<td>assistant_action_project/default_metrics</td>
<td>28 day active users</td>
<td>Count</td>
<td>actions.googleapis.com/smarthome_action/twenty_eight_day_active_users</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_17">Related topics<a class="headerlink" href="#related-topics_17" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-bigtable-monitoringmd">Source: gcp-bigtable-monitoring.md<a class="headerlink" href="#source-gcp-bigtable-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Bigtable monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-bigtable-monitoring
scraped: 2026-02-17T05:11:39.005589</p>
<hr />
<h1 id="google-cloud-bigtable-monitoring">Google Cloud Bigtable monitoring<a class="headerlink" href="#google-cloud-bigtable-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-bigtable-monitoring_1">Google Cloud Bigtable monitoring<a class="headerlink" href="#google-cloud-bigtable-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_17">Prerequisites<a class="headerlink" href="#prerequisites_17" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_5">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_5" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_6">View metrics<a class="headerlink" href="#view-metrics_6" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_5">Metric table<a class="headerlink" href="#metric-table_5" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Bigtable.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>bigtable_cluster/default_metrics</td>
<td>CPU load</td>
<td>Count</td>
<td>bigtable.googleapis.com/cluster/cpu_load</td>
</tr>
<tr>
<td>bigtable_cluster/default_metrics</td>
<td>CPU load (hottest node)</td>
<td>Count</td>
<td>bigtable.googleapis.com/cluster/cpu_load_hottest_node</td>
</tr>
<tr>
<td>bigtable_cluster/default_metrics</td>
<td>Disk load</td>
<td>Count</td>
<td>bigtable.googleapis.com/cluster/disk_load</td>
</tr>
<tr>
<td>bigtable_cluster/default_metrics</td>
<td>Nodes</td>
<td>Count</td>
<td>bigtable.googleapis.com/cluster/node_count</td>
</tr>
<tr>
<td>bigtable_cluster/default_metrics</td>
<td>Storage utilization</td>
<td>Count</td>
<td>bigtable.googleapis.com/cluster/storage_utilization</td>
</tr>
<tr>
<td>bigtable_cluster/default_metrics</td>
<td>Data stored</td>
<td>Byte</td>
<td>bigtable.googleapis.com/disk/bytes_used</td>
</tr>
<tr>
<td>bigtable_cluster/default_metrics</td>
<td>Storage capacity per node</td>
<td>Byte</td>
<td>bigtable.googleapis.com/disk/per_node_storage_capacity</td>
</tr>
<tr>
<td>bigtable_cluster/default_metrics</td>
<td>Storage capacity</td>
<td>Byte</td>
<td>bigtable.googleapis.com/disk/storage_capacity</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Replication latencies</td>
<td>MilliSecond</td>
<td>bigtable.googleapis.com/replication/latency</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Replication maximum delay</td>
<td>Second</td>
<td>bigtable.googleapis.com/replication/max_delay</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Error count</td>
<td>Count</td>
<td>bigtable.googleapis.com/server/error_count</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Server Latencies</td>
<td>MilliSecond</td>
<td>bigtable.googleapis.com/server/latencies</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Modified rows</td>
<td>Count</td>
<td>bigtable.googleapis.com/server/modified_rows_count</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Multi-cluster failovers</td>
<td>Count</td>
<td>bigtable.googleapis.com/server/multi_cluster_failovers_count</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Received bytes</td>
<td>Byte</td>
<td>bigtable.googleapis.com/server/received_bytes_count</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Request count</td>
<td>Count</td>
<td>bigtable.googleapis.com/server/request_count</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Returned rows</td>
<td>Count</td>
<td>bigtable.googleapis.com/server/returned_rows_count</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Sent bytes</td>
<td>Byte</td>
<td>bigtable.googleapis.com/server/sent_bytes_count</td>
</tr>
<tr>
<td>bigtable_table/default_metrics</td>
<td>Data stored</td>
<td>Byte</td>
<td>bigtable.googleapis.com/table/bytes_used</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_18">Related topics<a class="headerlink" href="#related-topics_18" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-cloud-composer-monitoringmd">Source: gcp-cloud-composer-monitoring.md<a class="headerlink" href="#source-gcp-cloud-composer-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Composer monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-composer-monitoring
scraped: 2026-02-16T09:39:20.654753</p>
<hr />
<h1 id="google-cloud-composer-monitoring">Google Cloud Composer monitoring<a class="headerlink" href="#google-cloud-composer-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-composer-monitoring_1">Google Cloud Composer monitoring<a class="headerlink" href="#google-cloud-composer-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_18">Prerequisites<a class="headerlink" href="#prerequisites_18" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_6">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_6" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_7">View metrics<a class="headerlink" href="#view-metrics_7" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_6">Metric table<a class="headerlink" href="#metric-table_6" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Composer.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>API Requests</td>
<td>Count</td>
<td>composer.googleapis.com/environment/api/request_count</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>API Latency</td>
<td>MilliSecond</td>
<td>composer.googleapis.com/environment/api/request_latencies</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Parse Error Count</td>
<td>Count</td>
<td>composer.googleapis.com/environment/dag_processing/parse_error_count</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>DAG parsing processes</td>
<td>Count</td>
<td>composer.googleapis.com/environment/dag_processing/processes</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Processors Timeout Count</td>
<td>Count</td>
<td>composer.googleapis.com/environment/dag_processing/processor_timeout_count</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Total Parse Time</td>
<td>Second</td>
<td>composer.googleapis.com/environment/dag_processing/total_parse_time</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Dag Bag Size</td>
<td>Count</td>
<td>composer.googleapis.com/environment/dagbag_size</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Database Healthy</td>
<td>Unspecified</td>
<td>composer.googleapis.com/environment/database_health</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Executor Open Slots</td>
<td>Count</td>
<td>composer.googleapis.com/environment/executor/open_slots</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Executor Running Tasks</td>
<td>Count</td>
<td>composer.googleapis.com/environment/executor/running_tasks</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Task Instance Count</td>
<td>Count</td>
<td>composer.googleapis.com/environment/finished_task_instance_count</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Healthy</td>
<td>Unspecified</td>
<td>composer.googleapis.com/environment/healthy</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Celery Workers</td>
<td>Count</td>
<td>composer.googleapis.com/environment/num_celery_workers</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Scheduler Heartbeats</td>
<td>Count</td>
<td>composer.googleapis.com/environment/scheduler_heartbeat_count</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Task Queue Length</td>
<td>Count</td>
<td>composer.googleapis.com/environment/task_queue_length</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Worker Pod Eviction Count</td>
<td>Count</td>
<td>composer.googleapis.com/environment/worker/pod_eviction_count</td>
</tr>
<tr>
<td>cloud_composer_environment/default_metrics</td>
<td>Zombie Tasks Killed</td>
<td>Count</td>
<td>composer.googleapis.com/environment/zombie_task_killed_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_19">Related topics<a class="headerlink" href="#related-topics_19" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-cloud-data-loss-prevention-monitoringmd">Source: gcp-cloud-data-loss-prevention-monitoring.md<a class="headerlink" href="#source-gcp-cloud-data-loss-prevention-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Data Loss Prevention monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-data-loss-prevention-monitoring
scraped: 2026-02-16T09:36:47.557826</p>
<hr />
<h1 id="google-cloud-data-loss-prevention-monitoring">Google Cloud Data Loss Prevention monitoring<a class="headerlink" href="#google-cloud-data-loss-prevention-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-data-loss-prevention-monitoring_1">Google Cloud Data Loss Prevention monitoring<a class="headerlink" href="#google-cloud-data-loss-prevention-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_19">Prerequisites<a class="headerlink" href="#prerequisites_19" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_7">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_7" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_8">View metrics<a class="headerlink" href="#view-metrics_8" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_7">Metric table<a class="headerlink" href="#metric-table_7" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Data Loss Prevention.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>cloud_dlp_project/default_metrics</td>
<td>Content bytes inspected</td>
<td>Byte</td>
<td>dlp.googleapis.com/content_bytes_inspected_count</td>
</tr>
<tr>
<td>cloud_dlp_project/default_metrics</td>
<td>Content bytes transformed</td>
<td>Byte</td>
<td>dlp.googleapis.com/content_bytes_transformed_count</td>
</tr>
<tr>
<td>cloud_dlp_project/default_metrics</td>
<td>Findings</td>
<td>Count</td>
<td>dlp.googleapis.com/finding_count</td>
</tr>
<tr>
<td>cloud_dlp_project/default_metrics</td>
<td>Job results</td>
<td>Count</td>
<td>dlp.googleapis.com/job_result_count</td>
</tr>
<tr>
<td>cloud_dlp_project/default_metrics</td>
<td>Job trigger runs</td>
<td>Count</td>
<td>dlp.googleapis.com/job_trigger_run_count</td>
</tr>
<tr>
<td>cloud_dlp_project/default_metrics</td>
<td>Storage bytes inspected</td>
<td>Byte</td>
<td>dlp.googleapis.com/storage_bytes_inspected_count</td>
</tr>
<tr>
<td>cloud_dlp_project/default_metrics</td>
<td>Storage bytes transformed</td>
<td>Byte</td>
<td>dlp.googleapis.com/storage_bytes_transformed_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_20">Related topics<a class="headerlink" href="#related-topics_20" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-cloud-dns-monitoringmd">Source: gcp-cloud-dns-monitoring.md<a class="headerlink" href="#source-gcp-cloud-dns-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud DNS monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-dns-monitoring
scraped: 2026-02-16T09:28:58.033291</p>
<hr />
<h1 id="google-cloud-dns-monitoring">Google Cloud DNS monitoring<a class="headerlink" href="#google-cloud-dns-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-dns-monitoring_1">Google Cloud DNS monitoring<a class="headerlink" href="#google-cloud-dns-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_20">Prerequisites<a class="headerlink" href="#prerequisites_20" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_8">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_8" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_9">View metrics<a class="headerlink" href="#view-metrics_9" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_8">Metric table<a class="headerlink" href="#metric-table_8" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud DNS.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>dns_query/default_metrics</td>
<td>DNS response counts</td>
<td>Unspecified</td>
<td>dns.googleapis.com/query/response_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_21">Related topics<a class="headerlink" href="#related-topics_21" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-cloud-firestore-monitoringmd">Source: gcp-cloud-firestore-monitoring.md<a class="headerlink" href="#source-gcp-cloud-firestore-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Firestore monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-firestore-monitoring
scraped: 2026-02-17T05:10:51.376490</p>
<hr />
<h1 id="google-cloud-firestore-monitoring">Google Cloud Firestore monitoring<a class="headerlink" href="#google-cloud-firestore-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-firestore-monitoring_1">Google Cloud Firestore monitoring<a class="headerlink" href="#google-cloud-firestore-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_21">Prerequisites<a class="headerlink" href="#prerequisites_21" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_9">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_9" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_10">View metrics<a class="headerlink" href="#view-metrics_10" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_9">Metric table<a class="headerlink" href="#metric-table_9" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Firestore.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>firestore_instance/default_metrics</td>
<td>Document Deletes</td>
<td>Count</td>
<td>firestore.googleapis.com/document/delete_count</td>
</tr>
<tr>
<td>firestore_instance/default_metrics</td>
<td>Document Reads</td>
<td>Count</td>
<td>firestore.googleapis.com/document/read_count</td>
</tr>
<tr>
<td>firestore_instance/default_metrics</td>
<td>Document Writes</td>
<td>Count</td>
<td>firestore.googleapis.com/document/write_count</td>
</tr>
<tr>
<td>firestore_instance/default_metrics</td>
<td>Connected Clients</td>
<td>Count</td>
<td>firestore.googleapis.com/network/active_connections</td>
</tr>
<tr>
<td>firestore_instance/default_metrics</td>
<td>Snapshot Listeners</td>
<td>Count</td>
<td>firestore.googleapis.com/network/snapshot_listeners</td>
</tr>
<tr>
<td>firestore_instance/default_metrics</td>
<td>Rule Evaluations</td>
<td>Count</td>
<td>firestore.googleapis.com/rules/evaluation_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_22">Related topics<a class="headerlink" href="#related-topics_22" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-cloud-load-balancing-monitoringmd">Source: gcp-cloud-load-balancing-monitoring.md<a class="headerlink" href="#source-gcp-cloud-load-balancing-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Load Balancing monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-load-balancing-monitoring
scraped: 2026-02-16T09:35:45.918996</p>
<hr />
<h1 id="google-cloud-load-balancing-monitoring">Google Cloud Load Balancing monitoring<a class="headerlink" href="#google-cloud-load-balancing-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-load-balancing-monitoring_1">Google Cloud Load Balancing monitoring<a class="headerlink" href="#google-cloud-load-balancing-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_22">Prerequisites<a class="headerlink" href="#prerequisites_22" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_10">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_10" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_11">View metrics<a class="headerlink" href="#view-metrics_11" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_10">Metric table<a class="headerlink" href="#metric-table_10" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Load Balancing.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>https_lb_rule/default_metrics</td>
<td>Backend latency</td>
<td>MilliSecond</td>
<td>loadbalancing.googleapis.com/https/backend_latencies</td>
</tr>
<tr>
<td>https_lb_rule/default_metrics</td>
<td>Backend Request Bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/https/backend_request_bytes_count</td>
</tr>
<tr>
<td>https_lb_rule/default_metrics</td>
<td>Backend Request Count</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/https/backend_request_count</td>
</tr>
<tr>
<td>https_lb_rule/default_metrics</td>
<td>Backend Response Bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/https/backend_response_bytes_count</td>
</tr>
<tr>
<td>https_lb_rule/default_metrics</td>
<td>Frontend RTT</td>
<td>MilliSecond</td>
<td>loadbalancing.googleapis.com/https/frontend_tcp_rtt</td>
</tr>
<tr>
<td>https_lb_rule/default_metrics</td>
<td>Request bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/https/request_bytes_count</td>
</tr>
<tr>
<td>https_lb_rule/default_metrics</td>
<td>Request count</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/https/request_count</td>
</tr>
<tr>
<td>https_lb_rule/default_metrics</td>
<td>Response bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/https/response_bytes_count</td>
</tr>
<tr>
<td>https_lb_rule/default_metrics</td>
<td>Total latency</td>
<td>MilliSecond</td>
<td>loadbalancing.googleapis.com/https/total_latencies</td>
</tr>
<tr>
<td>internal_http_lb_rule/default_metrics</td>
<td>Backend latencies</td>
<td>MilliSecond</td>
<td>loadbalancing.googleapis.com/https/internal/backend_latencies</td>
</tr>
<tr>
<td>internal_http_lb_rule/default_metrics</td>
<td>Request bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/https/internal/request_bytes_count</td>
</tr>
<tr>
<td>internal_http_lb_rule/default_metrics</td>
<td>Request count</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/https/internal/request_count</td>
</tr>
<tr>
<td>internal_http_lb_rule/default_metrics</td>
<td>Response bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/https/internal/response_bytes_count</td>
</tr>
<tr>
<td>internal_http_lb_rule/default_metrics</td>
<td>Total latencies</td>
<td>MilliSecond</td>
<td>loadbalancing.googleapis.com/https/internal/total_latencies</td>
</tr>
<tr>
<td>internal_tcp_lb_rule/default_metrics</td>
<td>Egress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/l3/internal/egress_bytes_count</td>
</tr>
<tr>
<td>internal_tcp_lb_rule/default_metrics</td>
<td>Egress packets</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/l3/internal/egress_packets_count</td>
</tr>
<tr>
<td>internal_tcp_lb_rule/default_metrics</td>
<td>Ingress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/l3/internal/ingress_bytes_count</td>
</tr>
<tr>
<td>internal_tcp_lb_rule/default_metrics</td>
<td>Ingress packets</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/l3/internal/ingress_packets_count</td>
</tr>
<tr>
<td>internal_tcp_lb_rule/default_metrics</td>
<td>RTT latencies</td>
<td>MilliSecond</td>
<td>loadbalancing.googleapis.com/l3/internal/rtt_latencies</td>
</tr>
<tr>
<td>internal_udp_lb_rule/default_metrics</td>
<td>Egress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/l3/internal/egress_bytes_count</td>
</tr>
<tr>
<td>internal_udp_lb_rule/default_metrics</td>
<td>Egress packets</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/l3/internal/egress_packets_count</td>
</tr>
<tr>
<td>internal_udp_lb_rule/default_metrics</td>
<td>Ingress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/l3/internal/ingress_bytes_count</td>
</tr>
<tr>
<td>internal_udp_lb_rule/default_metrics</td>
<td>Ingress packets</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/l3/internal/ingress_packets_count</td>
</tr>
<tr>
<td>tcp_lb_rule/default_metrics</td>
<td>Egress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/l3/external/egress_bytes_count</td>
</tr>
<tr>
<td>tcp_lb_rule/default_metrics</td>
<td>Egress packets</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/l3/external/egress_packets_count</td>
</tr>
<tr>
<td>tcp_lb_rule/default_metrics</td>
<td>Ingress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/l3/external/ingress_bytes_count</td>
</tr>
<tr>
<td>tcp_lb_rule/default_metrics</td>
<td>Ingress packets</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/l3/external/ingress_packets_count</td>
</tr>
<tr>
<td>tcp_lb_rule/default_metrics</td>
<td>RTT latencies</td>
<td>MilliSecond</td>
<td>loadbalancing.googleapis.com/l3/external/rtt_latencies</td>
</tr>
<tr>
<td>udp_lb_rule/default_metrics</td>
<td>Egress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/l3/external/egress_bytes_count</td>
</tr>
<tr>
<td>udp_lb_rule/default_metrics</td>
<td>Egress packets</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/l3/external/egress_packets_count</td>
</tr>
<tr>
<td>udp_lb_rule/default_metrics</td>
<td>Ingress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/l3/external/ingress_bytes_count</td>
</tr>
<tr>
<td>udp_lb_rule/default_metrics</td>
<td>Ingress packets</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/l3/external/ingress_packets_count</td>
</tr>
<tr>
<td>tcp_ssl_proxy_rule/default_metrics</td>
<td>Closed connections</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/tcp_ssl_proxy/closed_connections</td>
</tr>
<tr>
<td>tcp_ssl_proxy_rule/default_metrics</td>
<td>Egress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/tcp_ssl_proxy/egress_bytes_count</td>
</tr>
<tr>
<td>tcp_ssl_proxy_rule/default_metrics</td>
<td>Frontend RTT</td>
<td>MilliSecond</td>
<td>loadbalancing.googleapis.com/tcp_ssl_proxy/frontend_tcp_rtt</td>
</tr>
<tr>
<td>tcp_ssl_proxy_rule/default_metrics</td>
<td>Ingress bytes</td>
<td>Byte</td>
<td>loadbalancing.googleapis.com/tcp_ssl_proxy/ingress_bytes_count</td>
</tr>
<tr>
<td>tcp_ssl_proxy_rule/default_metrics</td>
<td>New connections opened</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/tcp_ssl_proxy/new_connections</td>
</tr>
<tr>
<td>tcp_ssl_proxy_rule/default_metrics</td>
<td>Open Connections</td>
<td>Count</td>
<td>loadbalancing.googleapis.com/tcp_ssl_proxy/open_connections</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_23">Related topics<a class="headerlink" href="#related-topics_23" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-cloud-sqlmd">Source: gcp-cloud-sql.md<a class="headerlink" href="#source-gcp-cloud-sqlmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud SQL monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-sql
scraped: 2026-02-17T05:02:46.791280</p>
<hr />
<h1 id="google-cloud-sql-monitoring">Google Cloud SQL monitoring<a class="headerlink" href="#google-cloud-sql-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-sql-monitoring_1">Google Cloud SQL monitoring<a class="headerlink" href="#google-cloud-sql-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_23">Prerequisites<a class="headerlink" href="#prerequisites_23" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_11">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_11" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_12">View metrics<a class="headerlink" href="#view-metrics_12" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_11">Metric table<a class="headerlink" href="#metric-table_11" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud SQL.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Auto-failover Requests</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/auto_failover_request_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Available for failover</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/available_for_failover</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>CPU reserved cores</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/cpu/reserved_cores</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>CPU usage</td>
<td>Second</td>
<td>cloudsql.googleapis.com/database/cpu/usage_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>CPU utilization</td>
<td>Percent</td>
<td>cloudsql.googleapis.com/database/cpu/utilization</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Bytes used</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/disk/bytes_used</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Disk quota</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/disk/quota</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Disk read IO</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/disk/read_ops_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Disk utilization</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/disk/utilization</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Disk write IO</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/disk/write_ops_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Instance state</td>
<td>Unspecified</td>
<td>cloudsql.googleapis.com/database/instance_state</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Memory quota</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/memory/quota</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Total memory usage</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/memory/total_usage</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Memory usage</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/memory/usage</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Memory utilization</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/memory/utilization</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>InnoDB dirty pages</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/innodb_buffer_pool_pages_dirty</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>InnoDB free pages</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/innodb_buffer_pool_pages_free</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>InnoDB total pages</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/innodb_buffer_pool_pages_total</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>InnoDB fsync calls</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/innodb_data_fsyncs</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>InnoDB log fsync calls</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/innodb_os_log_fsyncs</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>InnoDB pages read</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/innodb_pages_read</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>InnoDB pages written</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/innodb_pages_written</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Queries</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/queries</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Questions</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/questions</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Network bytes received by MySQL</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/mysql/received_bytes_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Available for failover (Deprecated)</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/replication/available_for_failover</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Last I/O thread error number</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/replication/last_io_errno</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Last SQL thread error number</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/mysql/replication/last_sql_errno</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Replica lag</td>
<td>Second</td>
<td>cloudsql.googleapis.com/database/mysql/replication/seconds_behind_master</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Slave I/O thread running state</td>
<td>Unspecified</td>
<td>cloudsql.googleapis.com/database/mysql/replication/slave_io_running_state</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Slave SQL thread running state</td>
<td>Unspecified</td>
<td>cloudsql.googleapis.com/database/mysql/replication/slave_sql_running_state</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Network bytes sent by MySQL</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/mysql/sent_bytes_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Cloud SQL Connections</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/network/connections</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Received bytes</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/network/received_bytes_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Sent bytes</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/network/sent_bytes_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Execution time</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/aggregate/execution_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>IO time</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/aggregate/io_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Latency</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/aggregate/latencies</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Aggregated lock time</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/aggregate/lock_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Affected rows</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/aggregate/row_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Shared blocks cache access</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/aggregate/shared_blk_access_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per query execution times</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/perquery/execution_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per query IO time</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/perquery/io_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per query latency</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/perquery/latencies</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per query lock time</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/perquery/lock_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per query affected rows</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/perquery/row_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per query Shared blocks cache access</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/perquery/shared_blk_access_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per tag execution time</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/pertag/execution_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per tag IO time</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/pertag/io_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per tag latency</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/pertag/latencies</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per tag lock time</td>
<td>MicroSecond</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/pertag/lock_time</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per tag affected rows</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/pertag/row_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Per tag shared blocks cache accessed</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/postgresql/insights/pertag/shared_blk_access_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>PostgreSQL Connections</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/postgresql/num_backends</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Lag bytes</td>
<td>Byte</td>
<td>cloudsql.googleapis.com/database/postgresql/replication/replica_byte_lag</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Number of transactions</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/postgresql/transaction_count</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Replica lag</td>
<td>Second</td>
<td>cloudsql.googleapis.com/database/replication/replica_lag</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Server up</td>
<td>Count</td>
<td>cloudsql.googleapis.com/database/up</td>
</tr>
<tr>
<td>cloudsql_database/default_metrics</td>
<td>Uptime</td>
<td>Second</td>
<td>cloudsql.googleapis.com/database/uptime</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_24">Related topics<a class="headerlink" href="#related-topics_24" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-cloud-storage-monitoringmd">Source: gcp-cloud-storage-monitoring.md<a class="headerlink" href="#source-gcp-cloud-storage-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Storage monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-storage-monitoring
scraped: 2026-02-16T21:28:01.673089</p>
<hr />
<h1 id="google-cloud-storage-monitoring">Google Cloud Storage monitoring<a class="headerlink" href="#google-cloud-storage-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-storage-monitoring_1">Google Cloud Storage monitoring<a class="headerlink" href="#google-cloud-storage-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_24">Prerequisites<a class="headerlink" href="#prerequisites_24" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_12">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_12" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_13">View metrics<a class="headerlink" href="#view-metrics_13" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_12">Metric table<a class="headerlink" href="#metric-table_12" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Storage.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Rule evaluations</td>
<td>Count</td>
<td>firebasestorage.googleapis.com/rules/evaluation_count</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Request count</td>
<td>Count</td>
<td>storage.googleapis.com/api/request_count</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Authentication count</td>
<td>Count</td>
<td>storage.googleapis.com/authn/authentication_count</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Object-ACL based access count</td>
<td>Count</td>
<td>storage.googleapis.com/authz/acl_based_object_access_count</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>ACLs usage</td>
<td>Count</td>
<td>storage.googleapis.com/authz/acl_operations_count</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Object ACL changes</td>
<td>Count</td>
<td>storage.googleapis.com/authz/object_specific_acl_mutation_count</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Received bytes</td>
<td>Byte</td>
<td>storage.googleapis.com/network/received_bytes_count</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Sent bytes</td>
<td>Byte</td>
<td>storage.googleapis.com/network/sent_bytes_count</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Object count</td>
<td>Count</td>
<td>storage.googleapis.com/storage/object_count</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Total byte seconds</td>
<td>Byte</td>
<td>storage.googleapis.com/storage/total_byte_seconds</td>
</tr>
<tr>
<td>gcs_bucket/default_metrics</td>
<td>Total bytes</td>
<td>Byte</td>
<td>storage.googleapis.com/storage/total_bytes</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_25">Related topics<a class="headerlink" href="#related-topics_25" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-cloud-tasks-monitoringmd">Source: gcp-cloud-tasks-monitoring.md<a class="headerlink" href="#source-gcp-cloud-tasks-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Tasks monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-tasks-monitoring
scraped: 2026-02-17T05:07:33.759196</p>
<hr />
<h1 id="google-cloud-tasks-monitoring">Google Cloud Tasks monitoring<a class="headerlink" href="#google-cloud-tasks-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-tasks-monitoring_1">Google Cloud Tasks monitoring<a class="headerlink" href="#google-cloud-tasks-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_25">Prerequisites<a class="headerlink" href="#prerequisites_25" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_13">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_13" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_14">View metrics<a class="headerlink" href="#view-metrics_14" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_13">Metric table<a class="headerlink" href="#metric-table_13" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Tasks.</p>
<table>
<thead>
<tr>
<th>Feature Set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>cloud_tasks_queue/default_metrics</td>
<td>API requests</td>
<td>Count</td>
<td>cloudtasks.googleapis.com/api/request_count</td>
</tr>
<tr>
<td>cloud_tasks_queue/default_metrics</td>
<td>Queue depth</td>
<td>Count</td>
<td>cloudtasks.googleapis.com/queue/depth</td>
</tr>
<tr>
<td>cloud_tasks_queue/default_metrics</td>
<td>Task attempt count</td>
<td>Count</td>
<td>cloudtasks.googleapis.com/queue/task_attempt_count</td>
</tr>
<tr>
<td>cloud_tasks_queue/default_metrics</td>
<td>Task attempt delays</td>
<td>MilliSecond</td>
<td>cloudtasks.googleapis.com/queue/task_attempt_delays</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_26">Related topics<a class="headerlink" href="#related-topics_26" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-dataflow-monitoringmd">Source: gcp-dataflow-monitoring.md<a class="headerlink" href="#source-gcp-dataflow-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Dataflow monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-dataflow-monitoring
scraped: 2026-02-17T05:06:40.360545</p>
<hr />
<h1 id="google-cloud-dataflow-monitoring">Google Cloud Dataflow monitoring<a class="headerlink" href="#google-cloud-dataflow-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-dataflow-monitoring_1">Google Cloud Dataflow monitoring<a class="headerlink" href="#google-cloud-dataflow-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_26">Prerequisites<a class="headerlink" href="#prerequisites_26" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_14">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_14" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_15">View metrics<a class="headerlink" href="#view-metrics_15" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_14">Metric table<a class="headerlink" href="#metric-table_14" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Dataflow.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Billable shuffle data processed</td>
<td>Byte</td>
<td>dataflow.googleapis.com/job/billable_shuffle_data_processed</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Current number of vCPUs in use</td>
<td>Count</td>
<td>dataflow.googleapis.com/job/current_num_vcpus</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Current shuffle slots in use</td>
<td>Count</td>
<td>dataflow.googleapis.com/job/current_shuffle_slots</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Data watermark lag</td>
<td>Second</td>
<td>dataflow.googleapis.com/job/data_watermark_age</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Elapsed time</td>
<td>Second</td>
<td>dataflow.googleapis.com/job/elapsed_time</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Element count</td>
<td>Count</td>
<td>dataflow.googleapis.com/job/element_count</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Elements Produced</td>
<td>Count</td>
<td>dataflow.googleapis.com/job/elements_produced_count</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Estimated byte count</td>
<td>Byte</td>
<td>dataflow.googleapis.com/job/estimated_byte_count</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Estimated Bytes Produced</td>
<td>Count</td>
<td>dataflow.googleapis.com/job/estimated_bytes_produced_count</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Failed</td>
<td>Count</td>
<td>dataflow.googleapis.com/job/is_failed</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Per-stage data watermark lag</td>
<td>Second</td>
<td>dataflow.googleapis.com/job/per_stage_data_watermark_age</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Per-stage system lag</td>
<td>Second</td>
<td>dataflow.googleapis.com/job/per_stage_system_lag</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>PubsubIO.Read requests from Dataflow jobs</td>
<td>Count</td>
<td>dataflow.googleapis.com/job/pubsub/read_count</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Pub/Sub Pull Request Latencies</td>
<td>MilliSecond</td>
<td>dataflow.googleapis.com/job/pubsub/read_latencies</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Pub/Sub Publish Requests</td>
<td>Count</td>
<td>dataflow.googleapis.com/job/pubsub/write_count</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Pub/Sub Publish Request Latencies</td>
<td>MilliSecond</td>
<td>dataflow.googleapis.com/job/pubsub/write_latencies</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td></td>
<td></td>
<td>dataflow.googleapis.com/job/status</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>System lag</td>
<td>Second</td>
<td>dataflow.googleapis.com/job/system_lag</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Total memory usage time</td>
<td>GigaByte</td>
<td>dataflow.googleapis.com/job/total_memory_usage_time</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Total PD usage time</td>
<td>GigaByte</td>
<td>dataflow.googleapis.com/job/total_pd_usage_time</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Total shuffle data processed</td>
<td>Byte</td>
<td>dataflow.googleapis.com/job/total_shuffle_data_processed</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Total streaming data processed</td>
<td>Byte</td>
<td>dataflow.googleapis.com/job/total_streaming_data_processed</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>Total vCPU time</td>
<td>Second</td>
<td>dataflow.googleapis.com/job/total_vcpu_time</td>
</tr>
<tr>
<td>dataflow_job/default_metrics</td>
<td>User Counter</td>
<td>Count</td>
<td>dataflow.googleapis.com/job/user_counter</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_27">Related topics<a class="headerlink" href="#related-topics_27" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-dataproc-monitoringmd">Source: gcp-dataproc-monitoring.md<a class="headerlink" href="#source-gcp-dataproc-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Dataproc monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-dataproc-monitoring
scraped: 2026-02-16T21:28:51.422338</p>
<hr />
<h1 id="google-cloud-dataproc-monitoring">Google Cloud Dataproc monitoring<a class="headerlink" href="#google-cloud-dataproc-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-dataproc-monitoring_1">Google Cloud Dataproc monitoring<a class="headerlink" href="#google-cloud-dataproc-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_27">Prerequisites<a class="headerlink" href="#prerequisites_27" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_15">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_15" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_16">View metrics<a class="headerlink" href="#view-metrics_16" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_15">Metric table<a class="headerlink" href="#metric-table_15" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Dataproc.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>HDFS DataNodes</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/hdfs/datanodes</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>HDFS capacity</td>
<td>GibiByte</td>
<td>dataproc.googleapis.com/cluster/hdfs/storage_capacity</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>HDFS storage utilization</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/hdfs/storage_utilization</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Unhealthy HDFS blocks by status</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/hdfs/unhealthy_blocks</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Job duration</td>
<td>Second</td>
<td>dataproc.googleapis.com/cluster/job/completion_time</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Job state duration</td>
<td>Second</td>
<td>dataproc.googleapis.com/cluster/job/duration</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Failed jobs</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/job/failed_count</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Running jobs</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/job/running_count</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Submitted jobs</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/job/submitted_count</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Operation duration</td>
<td>Second</td>
<td>dataproc.googleapis.com/cluster/operation/completion_time</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Operation state duration</td>
<td>Second</td>
<td>dataproc.googleapis.com/cluster/operation/duration</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Failed operations</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/operation/failed_count</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Running operations</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/operation/running_count</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>Submitted operations</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/operation/submitted_count</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>YARN allocated memory percentage</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/yarn/allocated_memory_percentage</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>YARN active applications</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/yarn/apps</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>YARN containers</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/yarn/containers</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>YARN memory size</td>
<td>GibiByte</td>
<td>dataproc.googleapis.com/cluster/yarn/memory_size</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>YARN NodeManagers</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/yarn/nodemanagers</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>YARN pending memory size</td>
<td>GibiByte</td>
<td>dataproc.googleapis.com/cluster/yarn/pending_memory_size</td>
</tr>
<tr>
<td>cloud_dataproc_cluster/default_metrics</td>
<td>YARN virtual cores</td>
<td>Count</td>
<td>dataproc.googleapis.com/cluster/yarn/virtual_cores</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_28">Related topics<a class="headerlink" href="#related-topics_28" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-filestore-in-datastore-mode-monitoringmd">Source: gcp-filestore-in-datastore-mode-monitoring.md<a class="headerlink" href="#source-gcp-filestore-in-datastore-mode-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Firestore in Datastore mode monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-in-datastore-mode-monitoring
scraped: 2026-02-15T21:29:55.455182</p>
<hr />
<h1 id="google-cloud-firestore-in-datastore-mode-monitoring">Google Cloud Firestore in Datastore mode monitoring<a class="headerlink" href="#google-cloud-firestore-in-datastore-mode-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-firestore-in-datastore-mode-monitoring_1">Google Cloud Firestore in Datastore mode monitoring<a class="headerlink" href="#google-cloud-firestore-in-datastore-mode-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_28">Prerequisites<a class="headerlink" href="#prerequisites_28" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_16">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_16" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_17">View metrics<a class="headerlink" href="#view-metrics_17" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_16">Metric table<a class="headerlink" href="#metric-table_16" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Firestore in Datastore mode.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>datastore_request/default_metrics</td>
<td>Requests</td>
<td>Count</td>
<td>datastore.googleapis.com/api/request_count</td>
</tr>
<tr>
<td>datastore_request/default_metrics</td>
<td>Sizes of read entities</td>
<td>Byte</td>
<td>datastore.googleapis.com/entity/read_sizes</td>
</tr>
<tr>
<td>datastore_request/default_metrics</td>
<td>Sizes of written entities</td>
<td>Byte</td>
<td>datastore.googleapis.com/entity/write_sizes</td>
</tr>
<tr>
<td>datastore_request/default_metrics</td>
<td>Index writes</td>
<td>Count</td>
<td>datastore.googleapis.com/index/write_count</td>
</tr>
<tr>
<td>datastore_request/default_metrics</td>
<td>Requests</td>
<td>Count</td>
<td>firestore.googleapis.com/api/request_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_29">Related topics<a class="headerlink" href="#related-topics_29" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-filestore-monitoringmd">Source: gcp-filestore-monitoring.md<a class="headerlink" href="#source-gcp-filestore-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Filestore monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-monitoring
scraped: 2026-02-16T09:30:07.286070</p>
<hr />
<h1 id="google-cloud-filestore-monitoring">Google Cloud Filestore monitoring<a class="headerlink" href="#google-cloud-filestore-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-filestore-monitoring_1">Google Cloud Filestore monitoring<a class="headerlink" href="#google-cloud-filestore-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_29">Prerequisites<a class="headerlink" href="#prerequisites_29" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_17">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_17" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_18">View metrics<a class="headerlink" href="#view-metrics_18" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_17">Metric table<a class="headerlink" href="#metric-table_17" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Filestore.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Average read latency</td>
<td>MilliSecond</td>
<td>file.googleapis.com/nfs/server/average_read_latency</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Average write latency</td>
<td>MilliSecond</td>
<td>file.googleapis.com/nfs/server/average_write_latency</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Free disk bytes</td>
<td>Byte</td>
<td>file.googleapis.com/nfs/server/free_bytes</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Free disk space percent</td>
<td>Percent</td>
<td>file.googleapis.com/nfs/server/free_bytes_percent</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Metadata operation count</td>
<td>Count</td>
<td>file.googleapis.com/nfs/server/metadata_ops_count</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Procedure call count</td>
<td>Count</td>
<td>file.googleapis.com/nfs/server/procedure_call_count</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Bytes read</td>
<td>Byte</td>
<td>file.googleapis.com/nfs/server/read_bytes_count</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Time (in milliseconds) spent on read operations</td>
<td>MilliSecond</td>
<td>file.googleapis.com/nfs/server/read_milliseconds_count</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Disk read operation count</td>
<td>Count</td>
<td>file.googleapis.com/nfs/server/read_ops_count</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Used disk bytes</td>
<td>Byte</td>
<td>file.googleapis.com/nfs/server/used_bytes</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Used disk space percent</td>
<td>Percent</td>
<td>file.googleapis.com/nfs/server/used_bytes_percent</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Bytes written</td>
<td>Byte</td>
<td>file.googleapis.com/nfs/server/write_bytes_count</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Time (in milliseconds) spent on write operations</td>
<td>MilliSecond</td>
<td>file.googleapis.com/nfs/server/write_milliseconds_count</td>
</tr>
<tr>
<td>filestore_instance/default_metrics</td>
<td>Disk write operation count</td>
<td>Count</td>
<td>file.googleapis.com/nfs/server/write_ops_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_30">Related topics<a class="headerlink" href="#related-topics_30" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-firebase-monitoringmd">Source: gcp-firebase-monitoring.md<a class="headerlink" href="#source-gcp-firebase-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Firebase monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-firebase-monitoring
scraped: 2026-02-16T21:29:14.614721</p>
<hr />
<h1 id="google-cloud-firebase-monitoring">Google Cloud Firebase monitoring<a class="headerlink" href="#google-cloud-firebase-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-firebase-monitoring_1">Google Cloud Firebase monitoring<a class="headerlink" href="#google-cloud-firebase-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_30">Prerequisites<a class="headerlink" href="#prerequisites_30" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_18">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_18" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_19">View metrics<a class="headerlink" href="#view-metrics_19" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_18">Metric table<a class="headerlink" href="#metric-table_18" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Firebase.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>firebase_domain/default_metrics</td>
<td>Bytes stored limit</td>
<td>Byte</td>
<td>firebasehosting.googleapis.com/storage/limit</td>
</tr>
<tr>
<td>firebase_domain/default_metrics</td>
<td>Bytes stored</td>
<td>Byte</td>
<td>firebasehosting.googleapis.com/storage/total_bytes</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Database Load</td>
<td>Count</td>
<td>firebasedatabase.googleapis.com/io/database_load</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Saved Bytes</td>
<td>Byte</td>
<td>firebasedatabase.googleapis.com/io/persisted_bytes_count</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Responses sent</td>
<td>Count</td>
<td>firebasedatabase.googleapis.com/io/sent_responses_count</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>I/O utilization</td>
<td>Count</td>
<td>firebasedatabase.googleapis.com/io/utilization</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Connections</td>
<td>Count</td>
<td>firebasedatabase.googleapis.com/network/active_connections</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>API Hits</td>
<td>Count</td>
<td>firebasedatabase.googleapis.com/network/api_hits_count</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Broadcast Load</td>
<td>Count</td>
<td>firebasedatabase.googleapis.com/network/broadcast_load</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Disabled for network</td>
<td>Unspecified</td>
<td>firebasedatabase.googleapis.com/network/disabled_for_overages</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>HTTPS Requests Received</td>
<td>Count</td>
<td>firebasedatabase.googleapis.com/network/https_requests_count</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Bytes sent monthly</td>
<td>Byte</td>
<td>firebasedatabase.googleapis.com/network/monthly_sent</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Bytes sent limit</td>
<td>Byte</td>
<td>firebasedatabase.googleapis.com/network/monthly_sent_limit</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Total billed bytes</td>
<td>Byte</td>
<td>firebasedatabase.googleapis.com/network/sent_bytes_count</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Payload and Protocol Bytes sent</td>
<td>Byte</td>
<td>firebasedatabase.googleapis.com/network/sent_payload_and_protocol_bytes_count</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Payload Bytes Sent</td>
<td>Byte</td>
<td>firebasedatabase.googleapis.com/network/sent_payload_bytes_count</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Rule evaluations</td>
<td>Count</td>
<td>firebasedatabase.googleapis.com/rules/evaluation_count</td>
</tr>
<tr>
<td>firebase_namespace/default_metrics</td>
<td>Bytes stored limit</td>
<td>Byte</td>
<td>firebasedatabase.googleapis.com/storage/limit</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_31">Related topics<a class="headerlink" href="#related-topics_31" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-hybrid-connectivity-monitoringmd">Source: gcp-hybrid-connectivity-monitoring.md<a class="headerlink" href="#source-gcp-hybrid-connectivity-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Hybrid Connectivity monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-hybrid-connectivity-monitoring
scraped: 2026-02-16T09:35:31.017264</p>
<hr />
<h1 id="google-cloud-hybrid-connectivity-monitoring">Google Cloud Hybrid Connectivity monitoring<a class="headerlink" href="#google-cloud-hybrid-connectivity-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-hybrid-connectivity-monitoring_1">Google Cloud Hybrid Connectivity monitoring<a class="headerlink" href="#google-cloud-hybrid-connectivity-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_31">Prerequisites<a class="headerlink" href="#prerequisites_31" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_19">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_19" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_20">View metrics<a class="headerlink" href="#view-metrics_20" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_19">Metric table<a class="headerlink" href="#metric-table_19" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Hybrid Connectivity.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>gce_router/default_metrics</td>
<td>Received routes count</td>
<td>Count</td>
<td>router.googleapis.com/best_received_routes_count</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>BFD control packets receive intervals</td>
<td>MilliSecond</td>
<td>router.googleapis.com/bfd/control/receive_intervals</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>Control packets received</td>
<td>Count</td>
<td>router.googleapis.com/bfd/control/received_packets_count</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>Control packets rejected</td>
<td>Count</td>
<td>router.googleapis.com/bfd/control/rejected_packets_count</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>BFD control packets transmit intervals</td>
<td>MilliSecond</td>
<td>router.googleapis.com/bfd/control/transmit_intervals</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>Control packets transmitted</td>
<td>Count</td>
<td>router.googleapis.com/bfd/control/transmitted_packets_count</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>BFD session status</td>
<td>Count</td>
<td>router.googleapis.com/bfd/session_up</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>BGP received routes count</td>
<td>Count</td>
<td>router.googleapis.com/bgp/received_routes_count</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>BGP sent routes count</td>
<td>Count</td>
<td>router.googleapis.com/bgp/sent_routes_count</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>BGP session status</td>
<td>Count</td>
<td>router.googleapis.com/bgp/session_up</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>BGP sessions down count</td>
<td>Count</td>
<td>router.googleapis.com/bgp_sessions_down_count</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>BGP sessions up count</td>
<td>Count</td>
<td>router.googleapis.com/bgp_sessions_up_count</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>Router status</td>
<td>Count</td>
<td>router.googleapis.com/router_up</td>
</tr>
<tr>
<td>gce_router/default_metrics</td>
<td>Sent routes count</td>
<td>Count</td>
<td>router.googleapis.com/sent_routes_count</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Network Capacity</td>
<td>BytePerSecond</td>
<td>interconnect.googleapis.com/network/interconnect/capacity</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Dropped Packets</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/interconnect/dropped_packets_count</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Circuit Operational Status</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/interconnect/link/operational</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Circuit Receive Power</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/interconnect/link/rx_power</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Circuit Transmit Power</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/interconnect/link/tx_power</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Operational Status</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/interconnect/operational</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Ingress Errors</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/interconnect/receive_errors_count</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Ingress Bytes</td>
<td>Byte</td>
<td>interconnect.googleapis.com/network/interconnect/received_bytes_count</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Ingress Unicast Packets</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/interconnect/received_unicast_packets_count</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Egress Errors</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/interconnect/send_errors_count</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Egress Bytes</td>
<td>Byte</td>
<td>interconnect.googleapis.com/network/interconnect/sent_bytes_count</td>
</tr>
<tr>
<td>interconnect/default_metrics</td>
<td>Egress Unicast Packets</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/interconnect/sent_unicast_packets_count</td>
</tr>
<tr>
<td>vpn_gateway/default_metrics</td>
<td>Number of connections</td>
<td>Count</td>
<td>vpn.googleapis.com/gateway/connections</td>
</tr>
<tr>
<td>vpn_gateway/default_metrics</td>
<td>Incoming packets dropped</td>
<td>Count</td>
<td>vpn.googleapis.com/network/dropped_received_packets_count</td>
</tr>
<tr>
<td>vpn_gateway/default_metrics</td>
<td>Outgoing packets dropped</td>
<td>Count</td>
<td>vpn.googleapis.com/network/dropped_sent_packets_count</td>
</tr>
<tr>
<td>vpn_gateway/default_metrics</td>
<td>Received bytes</td>
<td>Byte</td>
<td>vpn.googleapis.com/network/received_bytes_count</td>
</tr>
<tr>
<td>vpn_gateway/default_metrics</td>
<td>Received packets</td>
<td>Unspecified</td>
<td>vpn.googleapis.com/network/received_packets_count</td>
</tr>
<tr>
<td>vpn_gateway/default_metrics</td>
<td>Sent bytes</td>
<td>Byte</td>
<td>vpn.googleapis.com/network/sent_bytes_count</td>
</tr>
<tr>
<td>vpn_gateway/default_metrics</td>
<td>Sent packets</td>
<td>Unspecified</td>
<td>vpn.googleapis.com/network/sent_packets_count</td>
</tr>
<tr>
<td>vpn_gateway/default_metrics</td>
<td>Tunnel established</td>
<td>Count</td>
<td>vpn.googleapis.com/tunnel_established</td>
</tr>
<tr>
<td>interconnect_attachment/default_metrics</td>
<td>Network Capacity</td>
<td>BytePerSecond</td>
<td>interconnect.googleapis.com/network/attachment/capacity</td>
</tr>
<tr>
<td>interconnect_attachment/default_metrics</td>
<td>Ingress Bytes</td>
<td>Byte</td>
<td>interconnect.googleapis.com/network/attachment/received_bytes_count</td>
</tr>
<tr>
<td>interconnect_attachment/default_metrics</td>
<td>Ingress Packets</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/attachment/received_packets_count</td>
</tr>
<tr>
<td>interconnect_attachment/default_metrics</td>
<td>Egress Bytes</td>
<td>Byte</td>
<td>interconnect.googleapis.com/network/attachment/sent_bytes_count</td>
</tr>
<tr>
<td>interconnect_attachment/default_metrics</td>
<td>Egress Packets</td>
<td>Unspecified</td>
<td>interconnect.googleapis.com/network/attachment/sent_packets_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_32">Related topics<a class="headerlink" href="#related-topics_32" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-memorystore-monitoringmd">Source: gcp-memorystore-monitoring.md<a class="headerlink" href="#source-gcp-memorystore-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Memorystore monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-memorystore-monitoring
scraped: 2026-02-16T09:27:36.220790</p>
<hr />
<h1 id="google-cloud-memorystore-monitoring">Google Cloud Memorystore monitoring<a class="headerlink" href="#google-cloud-memorystore-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-memorystore-monitoring_1">Google Cloud Memorystore monitoring<a class="headerlink" href="#google-cloud-memorystore-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_32">Prerequisites<a class="headerlink" href="#prerequisites_32" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_20">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_20" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_21">View metrics<a class="headerlink" href="#view-metrics_21" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_20">Metric table<a class="headerlink" href="#metric-table_20" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Memorystore.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>redis_instance/default_metrics</td>
<td>Blocked Clients</td>
<td>Count</td>
<td>redis.googleapis.com/clients/blocked</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Connected Clients</td>
<td>Count</td>
<td>redis.googleapis.com/clients/connected</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Calls</td>
<td>Count</td>
<td>redis.googleapis.com/commands/calls</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Total Time of Calls</td>
<td>MicroSecond</td>
<td>redis.googleapis.com/commands/total_time</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Time per Call</td>
<td>Count</td>
<td>redis.googleapis.com/commands/usec_per_call</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Average TTL</td>
<td>MilliSecond</td>
<td>redis.googleapis.com/keyspace/avg_ttl</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Keys</td>
<td>Count</td>
<td>redis.googleapis.com/keyspace/keys</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Expirable Keys</td>
<td>Count</td>
<td>redis.googleapis.com/keyspace/keys_with_expiration</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Persisting RDB</td>
<td>Count</td>
<td>redis.googleapis.com/persistence/rdb/bgsave_in_progress</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Bytes lagging</td>
<td>Byte</td>
<td>redis.googleapis.com/replication/master/slaves/lag</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Replication byte offset (Replica)</td>
<td>Byte</td>
<td>redis.googleapis.com/replication/master/slaves/offset</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Replication byte offset (Master)</td>
<td>Byte</td>
<td>redis.googleapis.com/replication/master_repl_offset</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Bytes pending replication</td>
<td>Byte</td>
<td>redis.googleapis.com/replication/offset_diff</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Node Role</td>
<td>Count</td>
<td>redis.googleapis.com/replication/role</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Uptime</td>
<td>Second</td>
<td>redis.googleapis.com/server/uptime</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Cache Hit ratio</td>
<td>Count</td>
<td>redis.googleapis.com/stats/cache_hit_ratio</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Total Connections Received</td>
<td>Count</td>
<td>redis.googleapis.com/stats/connections/total</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>CPU seconds</td>
<td>Second</td>
<td>redis.googleapis.com/stats/cpu_utilization</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Evicted Keys</td>
<td>Count</td>
<td>redis.googleapis.com/stats/evicted_keys</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Expired Keys</td>
<td>Count</td>
<td>redis.googleapis.com/stats/expired_keys</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Hits</td>
<td>Count</td>
<td>redis.googleapis.com/stats/keyspace_hits</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Misses</td>
<td>Count</td>
<td>redis.googleapis.com/stats/keyspace_misses</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Maximum Memory</td>
<td>Byte</td>
<td>redis.googleapis.com/stats/memory/maxmemory</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Time in system memory overload</td>
<td>MicroSecond</td>
<td>redis.googleapis.com/stats/memory/system_memory_overload_duration</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>System Memory Usage Ratio</td>
<td>Count</td>
<td>redis.googleapis.com/stats/memory/system_memory_usage_ratio</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Used Memory</td>
<td>Byte</td>
<td>redis.googleapis.com/stats/memory/usage</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Memory Usage Ratio</td>
<td>Count</td>
<td>redis.googleapis.com/stats/memory/usage_ratio</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Total traffic to Redis</td>
<td>Byte</td>
<td>redis.googleapis.com/stats/network_traffic</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Pubsub Channels</td>
<td>Count</td>
<td>redis.googleapis.com/stats/pubsub/channels</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Pubsub Patterns</td>
<td>Count</td>
<td>redis.googleapis.com/stats/pubsub/patterns</td>
</tr>
<tr>
<td>redis_instance/default_metrics</td>
<td>Rejected Connections</td>
<td>Count</td>
<td>redis.googleapis.com/stats/reject_connections_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_33">Related topics<a class="headerlink" href="#related-topics_33" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-netapp-monitoringmd">Source: gcp-netapp-monitoring.md<a class="headerlink" href="#source-gcp-netapp-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: NetApp on Google Cloud monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-netapp-monitoring
scraped: 2026-02-16T09:37:32.135432</p>
<hr />
<h1 id="netapp-on-google-cloud-monitoring">NetApp on Google Cloud monitoring<a class="headerlink" href="#netapp-on-google-cloud-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="netapp-on-google-cloud-monitoring_1">NetApp on Google Cloud monitoring<a class="headerlink" href="#netapp-on-google-cloud-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_33">Prerequisites<a class="headerlink" href="#prerequisites_33" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_21">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_21" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_22">View metrics<a class="headerlink" href="#view-metrics_22" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_21">Metric table<a class="headerlink" href="#metric-table_21" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for NetApp on Google Cloud.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>netapp_cloud_volume/default_metrics</td>
<td>Volume inode allocation</td>
<td>Unspecified</td>
<td>netapp.com/cloudvolume/inode_allocation</td>
</tr>
<tr>
<td>netapp_cloud_volume/default_metrics</td>
<td>Volume inode usage</td>
<td>Unspecified</td>
<td>netapp.com/cloudvolume/inode_usage</td>
</tr>
<tr>
<td>netapp_cloud_volume/default_metrics</td>
<td>Operations count</td>
<td>Count</td>
<td>netapp.com/cloudvolume/operation_count</td>
</tr>
<tr>
<td>netapp_cloud_volume/default_metrics</td>
<td>Bytes read</td>
<td>Byte</td>
<td>netapp.com/cloudvolume/read_bytes_count</td>
</tr>
<tr>
<td>netapp_cloud_volume/default_metrics</td>
<td>Volume IO operation latency</td>
<td>MilliSecond</td>
<td>netapp.com/cloudvolume/request_latencies</td>
</tr>
<tr>
<td>netapp_cloud_volume/default_metrics</td>
<td>Volume space allocation</td>
<td>Byte</td>
<td>netapp.com/cloudvolume/volume_size</td>
</tr>
<tr>
<td>netapp_cloud_volume/default_metrics</td>
<td>Volume space usage</td>
<td>Byte</td>
<td>netapp.com/cloudvolume/volume_usage</td>
</tr>
<tr>
<td>netapp_cloud_volume/default_metrics</td>
<td>Bytes written</td>
<td>Byte</td>
<td>netapp.com/cloudvolume/write_bytes_count</td>
</tr>
<tr>
<td>cloudvolumesgcp_api_netapp_com_NetAppCloudVolumeSO/default_metrics</td>
<td>NetApp CVS-SO Logical Bytes Backed Up</td>
<td>Byte</td>
<td>cloudvolumesgcp-api.netapp.com/cloudvolume_so/logical_bytes_backed_up</td>
</tr>
<tr>
<td>cloudvolumesgcp_api_netapp_com_NetAppCloudVolumeSO/default_metrics</td>
<td>NetApp CVS-SO Operation Count</td>
<td>Count</td>
<td>cloudvolumesgcp-api.netapp.com/cloudvolume_so/operation_count</td>
</tr>
<tr>
<td>cloudvolumesgcp_api_netapp_com_NetAppCloudVolumeSO/default_metrics</td>
<td>NetApp CVS-SO Read Bytes Count</td>
<td>Byte</td>
<td>cloudvolumesgcp-api.netapp.com/cloudvolume_so/read_bytes_count</td>
</tr>
<tr>
<td>cloudvolumesgcp_api_netapp_com_NetAppCloudVolumeSO/default_metrics</td>
<td>NetApp CVS-SO Request Latencies</td>
<td>MilliSecond</td>
<td>cloudvolumesgcp-api.netapp.com/cloudvolume_so/request_latencies</td>
</tr>
<tr>
<td>cloudvolumesgcp_api_netapp_com_NetAppCloudVolumeSO/default_metrics</td>
<td>NetApp CVS-SO Volume Size</td>
<td>Byte</td>
<td>cloudvolumesgcp-api.netapp.com/cloudvolume_so/volume_size</td>
</tr>
<tr>
<td>cloudvolumesgcp_api_netapp_com_NetAppCloudVolumeSO/default_metrics</td>
<td>NetApp CVS-SO Volume Usage</td>
<td>Byte</td>
<td>cloudvolumesgcp-api.netapp.com/cloudvolume_so/volume_usage</td>
</tr>
<tr>
<td>cloudvolumesgcp_api_netapp_com_NetAppCloudVolumeSO/default_metrics</td>
<td>NetApp CVS-SO Write Bytes Count</td>
<td>Byte</td>
<td>cloudvolumesgcp-api.netapp.com/cloudvolume_so/write_bytes_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_34">Related topics<a class="headerlink" href="#related-topics_34" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-network-security-monitoringmd">Source: gcp-network-security-monitoring.md<a class="headerlink" href="#source-gcp-network-security-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Network Security monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-network-security-monitoring
scraped: 2026-02-17T05:05:53.846435</p>
<hr />
<h1 id="google-cloud-network-security-monitoring">Google Cloud Network Security monitoring<a class="headerlink" href="#google-cloud-network-security-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-network-security-monitoring_1">Google Cloud Network Security monitoring<a class="headerlink" href="#google-cloud-network-security-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_34">Prerequisites<a class="headerlink" href="#prerequisites_34" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_22">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_22" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_23">View metrics<a class="headerlink" href="#view-metrics_23" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_22">Metric table<a class="headerlink" href="#metric-table_22" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Network Security.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>network_security_policy/default_metrics</td>
<td>Previewed request count</td>
<td>Count</td>
<td>networksecurity.googleapis.com/https/previewed_request_count</td>
</tr>
<tr>
<td>network_security_policy/default_metrics</td>
<td>Request count</td>
<td>Count</td>
<td>networksecurity.googleapis.com/https/request_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_35">Related topics<a class="headerlink" href="#related-topics_35" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-network-topology-monitoringmd">Source: gcp-network-topology-monitoring.md<a class="headerlink" href="#source-gcp-network-topology-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Network Topology monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-network-topology-monitoring
scraped: 2026-02-17T04:59:18.957886</p>
<hr />
<h1 id="google-cloud-network-topology-monitoring">Google Cloud Network Topology monitoring<a class="headerlink" href="#google-cloud-network-topology-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-network-topology-monitoring_1">Google Cloud Network Topology monitoring<a class="headerlink" href="#google-cloud-network-topology-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_35">Prerequisites<a class="headerlink" href="#prerequisites_35" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_23">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_23" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_24">View metrics<a class="headerlink" href="#view-metrics_24" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_23">Metric table<a class="headerlink" href="#metric-table_23" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Network Topology.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>gce_zone_network_health/default_metrics</td>
<td>Number of probes</td>
<td>Count</td>
<td>networking.googleapis.com/cloud_netslo/active_probing/probe_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_36">Related topics<a class="headerlink" href="#related-topics_36" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-operations-cloud-monitoring-and-loggingmd">Source: gcp-operations-cloud-monitoring-and-logging.md<a class="headerlink" href="#source-gcp-operations-cloud-monitoring-and-loggingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Operations: Cloud Monitoring &amp; Logging
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-operations-cloud-monitoring-and-logging
scraped: 2026-02-17T05:04:37.557018</p>
<hr />
<h1 id="operations-cloud-monitoring-logging">Operations: Cloud Monitoring &amp; Logging<a class="headerlink" href="#operations-cloud-monitoring-logging" title="Permanent link">&para;</a></h1>
<h1 id="operations-cloud-monitoring-logging_1">Operations: Cloud Monitoring &amp; Logging<a class="headerlink" href="#operations-cloud-monitoring-logging_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_36">Prerequisites<a class="headerlink" href="#prerequisites_36" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_24">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_24" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_25">View metrics<a class="headerlink" href="#view-metrics_25" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_24">Metric table<a class="headerlink" href="#metric-table_24" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Operations suite.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>uptime_url/default_metrics</td>
<td>Check passed</td>
<td>Unspecified</td>
<td>monitoring.googleapis.com/uptime_check/check_passed</td>
</tr>
<tr>
<td>uptime_url/default_metrics</td>
<td>Content mismatch</td>
<td>Unspecified</td>
<td>monitoring.googleapis.com/uptime_check/content_mismatch</td>
</tr>
<tr>
<td>uptime_url/default_metrics</td>
<td></td>
<td></td>
<td>monitoring.googleapis.com/uptime_check/error_code</td>
</tr>
<tr>
<td>uptime_url/default_metrics</td>
<td></td>
<td></td>
<td>monitoring.googleapis.com/uptime_check/http_status</td>
</tr>
<tr>
<td>uptime_url/default_metrics</td>
<td>Request latency</td>
<td>MilliSecond</td>
<td>monitoring.googleapis.com/uptime_check/request_latency</td>
</tr>
<tr>
<td>uptime_url/default_metrics</td>
<td>Time until SSL certificate expires</td>
<td>Day</td>
<td>monitoring.googleapis.com/uptime_check/time_until_ssl_cert_expires</td>
</tr>
<tr>
<td>gce_instance/uptime_check</td>
<td>Content mismatch</td>
<td>Unspecified</td>
<td>monitoring.googleapis.com/uptime_check/content_mismatch</td>
</tr>
<tr>
<td>gce_instance/uptime_check</td>
<td></td>
<td></td>
<td>monitoring.googleapis.com/uptime_check/error_code</td>
</tr>
<tr>
<td>gce_instance/uptime_check</td>
<td></td>
<td></td>
<td>monitoring.googleapis.com/uptime_check/http_status</td>
</tr>
<tr>
<td>gce_instance/uptime_check</td>
<td>Request latency</td>
<td>MilliSecond</td>
<td>monitoring.googleapis.com/uptime_check/request_latency</td>
</tr>
<tr>
<td>gce_instance/uptime_check</td>
<td>Time until SSL certificate expires</td>
<td>Day</td>
<td>monitoring.googleapis.com/uptime_check/time_until_ssl_cert_expires</td>
</tr>
<tr>
<td>gae_app_uptime_check/default_metrics</td>
<td>Check passed</td>
<td>Unspecified</td>
<td>monitoring.googleapis.com/uptime_check/check_passed</td>
</tr>
<tr>
<td>gae_app_uptime_check/default_metrics</td>
<td>Content mismatch</td>
<td>Unspecified</td>
<td>monitoring.googleapis.com/uptime_check/content_mismatch</td>
</tr>
<tr>
<td>gae_app_uptime_check/default_metrics</td>
<td></td>
<td></td>
<td>monitoring.googleapis.com/uptime_check/error_code</td>
</tr>
<tr>
<td>gae_app_uptime_check/default_metrics</td>
<td></td>
<td></td>
<td>monitoring.googleapis.com/uptime_check/http_status</td>
</tr>
<tr>
<td>gae_app_uptime_check/default_metrics</td>
<td>Request latency</td>
<td>MilliSecond</td>
<td>monitoring.googleapis.com/uptime_check/request_latency</td>
</tr>
<tr>
<td>gae_app_uptime_check/default_metrics</td>
<td>Time until SSL certificate expires</td>
<td>Day</td>
<td>monitoring.googleapis.com/uptime_check/time_until_ssl_cert_expires</td>
</tr>
<tr>
<td>logging_sink/default_metrics</td>
<td>Exported log bytes</td>
<td>Byte</td>
<td>logging.googleapis.com/exports/byte_count</td>
</tr>
<tr>
<td>logging_sink/default_metrics</td>
<td>Exported log entries failures</td>
<td>Count</td>
<td>logging.googleapis.com/exports/error_count</td>
</tr>
<tr>
<td>logging_sink/default_metrics</td>
<td>Exported log entries</td>
<td>Count</td>
<td>logging.googleapis.com/exports/log_entry_count</td>
</tr>
<tr>
<td>cloudtrace_googleapis_com_CloudtraceProject/default_metrics</td>
<td>Spans Exported to BigQuery</td>
<td>Count</td>
<td>cloudtrace.googleapis.com/bigquery_export/exported_span_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_37">Related topics<a class="headerlink" href="#related-topics_37" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-pub-sub-lite-monitoringmd">Source: gcp-pub-sub-lite-monitoring.md<a class="headerlink" href="#source-gcp-pub-sub-lite-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Pub/Sub Lite monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-lite-monitoring
scraped: 2026-02-17T05:04:52.359513</p>
<hr />
<h1 id="google-cloud-pubsub-lite-monitoring">Google Cloud Pub/Sub Lite monitoring<a class="headerlink" href="#google-cloud-pubsub-lite-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-pubsub-lite-monitoring_1">Google Cloud Pub/Sub Lite monitoring<a class="headerlink" href="#google-cloud-pubsub-lite-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_37">Prerequisites<a class="headerlink" href="#prerequisites_37" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_25">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_25" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_26">View metrics<a class="headerlink" href="#view-metrics_26" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_25">Metric table<a class="headerlink" href="#metric-table_25" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Pub/Sub Lite.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Oldest retained message age</td>
<td>Second</td>
<td>pubsublite.googleapis.com/topic/oldest_retained_message_age</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Publish message count</td>
<td>Count</td>
<td>pubsublite.googleapis.com/topic/publish_message_count</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Publish quota byte limit</td>
<td>Byte</td>
<td>pubsublite.googleapis.com/topic/publish_quota_byte_limit</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Publish quota bytes</td>
<td>Byte</td>
<td>pubsublite.googleapis.com/topic/publish_quota_bytes</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Publish quota utilization ratio</td>
<td>Percent</td>
<td>pubsublite.googleapis.com/topic/publish_quota_utilization</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Publish raw bytes</td>
<td>Byte</td>
<td>pubsublite.googleapis.com/topic/publish_raw_bytes</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Publish request count</td>
<td>Count</td>
<td>pubsublite.googleapis.com/topic/publish_request_count</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Topic sent quota bytes</td>
<td>Byte</td>
<td>pubsublite.googleapis.com/topic/sent_quota_bytes</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Storage quota byte limit</td>
<td>Byte</td>
<td>pubsublite.googleapis.com/topic/storage_quota_byte_limit</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Subscribe quota byte limit</td>
<td>Byte</td>
<td>pubsublite.googleapis.com/topic/subscribe_quota_byte_limit</td>
</tr>
<tr>
<td>pubsublite_topic_partition/default_metrics</td>
<td>Subscribe quota utilization ratio</td>
<td>Percent</td>
<td>pubsublite.googleapis.com/topic/subscribe_quota_utilization</td>
</tr>
<tr>
<td>pubsublite_subscription_partition/default_metrics</td>
<td>Backlog message count</td>
<td>Count</td>
<td>pubsublite.googleapis.com/subscription/backlog_message_count</td>
</tr>
<tr>
<td>pubsublite_subscription_partition/default_metrics</td>
<td>Backlog quota bytes</td>
<td>Byte</td>
<td>pubsublite.googleapis.com/subscription/backlog_quota_bytes</td>
</tr>
<tr>
<td>pubsublite_subscription_partition/default_metrics</td>
<td>Oldest unacked message age</td>
<td>Second</td>
<td>pubsublite.googleapis.com/subscription/oldest_unacked_message_age</td>
</tr>
<tr>
<td>pubsublite_subscription_partition/default_metrics</td>
<td>Subscription sent message count</td>
<td>Count</td>
<td>pubsublite.googleapis.com/subscription/sent_message_count</td>
</tr>
<tr>
<td>pubsublite_subscription_partition/default_metrics</td>
<td>Subscription sent quota bytes</td>
<td>Byte</td>
<td>pubsublite.googleapis.com/subscription/sent_quota_bytes</td>
</tr>
<tr>
<td>pubsublite_subscription_partition/default_metrics</td>
<td>Subscription sent raw bytes</td>
<td>Byte</td>
<td>pubsublite.googleapis.com/subscription/sent_raw_bytes</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_38">Related topics<a class="headerlink" href="#related-topics_38" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-pub-sub-monitoringmd">Source: gcp-pub-sub-monitoring.md<a class="headerlink" href="#source-gcp-pub-sub-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Pub/Sub monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-monitoring
scraped: 2026-02-17T05:05:15.293968</p>
<hr />
<h1 id="google-cloud-pubsub-monitoring">Google Cloud Pub/Sub monitoring<a class="headerlink" href="#google-cloud-pubsub-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-pubsub-monitoring_1">Google Cloud Pub/Sub monitoring<a class="headerlink" href="#google-cloud-pubsub-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>3-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_38">Prerequisites<a class="headerlink" href="#prerequisites_38" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_26">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_26" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_27">View metrics<a class="headerlink" href="#view-metrics_27" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_26">Metric table<a class="headerlink" href="#metric-table_26" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Pub/Sub.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>pubsub_snapshot/default_metrics</td>
<td>Snapshot backlog bytes</td>
<td>Byte</td>
<td>pubsub.googleapis.com/snapshot/backlog_bytes</td>
</tr>
<tr>
<td>pubsub_snapshot/default_metrics</td>
<td>Snapshot backlog bytes by region</td>
<td>Byte</td>
<td>pubsub.googleapis.com/snapshot/backlog_bytes_by_region</td>
</tr>
<tr>
<td>pubsub_snapshot/default_metrics</td>
<td>Snapshot updates</td>
<td>Count</td>
<td>pubsub.googleapis.com/snapshot/config_updates_count</td>
</tr>
<tr>
<td>pubsub_snapshot/default_metrics</td>
<td>Snapshot messages</td>
<td>Count</td>
<td>pubsub.googleapis.com/snapshot/num_messages</td>
</tr>
<tr>
<td>pubsub_snapshot/default_metrics</td>
<td>Snapshot messages by region</td>
<td>Count</td>
<td>pubsub.googleapis.com/snapshot/num_messages_by_region</td>
</tr>
<tr>
<td>pubsub_snapshot/default_metrics</td>
<td>Oldest snapshot message age</td>
<td>Second</td>
<td>pubsub.googleapis.com/snapshot/oldest_message_age</td>
</tr>
<tr>
<td>pubsub_snapshot/default_metrics</td>
<td>Oldest snapshot message age by region</td>
<td>Second</td>
<td>pubsub.googleapis.com/snapshot/oldest_message_age_by_region</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Ack message count</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/ack_message_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Backlog size</td>
<td>Byte</td>
<td>pubsub.googleapis.com/subscription/backlog_bytes</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Subscription byte cost</td>
<td>Byte</td>
<td>pubsub.googleapis.com/subscription/byte_cost</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Subscription updates</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/config_updates_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Dead letter message count</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/dead_letter_message_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Mod ack deadline message count</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/mod_ack_deadline_message_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>ModifyAckDeadline message operations</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/mod_ack_deadline_message_operation_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>ModifyAckDeadline requests</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/mod_ack_deadline_request_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Outstanding push messages</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/num_outstanding_messages</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Retained acked messages</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/num_retained_acked_messages</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Retained acked messages by region</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/num_retained_acked_messages_by_region</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Unacked messages by region</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/num_unacked_messages_by_region</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Unacked messages</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/num_undelivered_messages</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Oldest retained acked message age</td>
<td>Second</td>
<td>pubsub.googleapis.com/subscription/oldest_retained_acked_message_age</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Oldest retained acked message age by region</td>
<td>Second</td>
<td>pubsub.googleapis.com/subscription/oldest_retained_acked_message_age_by_region</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Oldest unacked message age</td>
<td>Second</td>
<td>pubsub.googleapis.com/subscription/oldest_unacked_message_age</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Oldest unacked message age by region</td>
<td>Second</td>
<td>pubsub.googleapis.com/subscription/oldest_unacked_message_age_by_region</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Acknowledge message operations</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/pull_ack_message_operation_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Acknowledge requests</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/pull_ack_request_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Pull operations</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/pull_message_operation_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Pull requests</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/pull_request_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Push requests</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/push_request_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Push latency</td>
<td>MicroSecond</td>
<td>pubsub.googleapis.com/subscription/push_request_latencies</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Retained acked bytes</td>
<td>Byte</td>
<td>pubsub.googleapis.com/subscription/retained_acked_bytes</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Retained acked bytes by region</td>
<td>Byte</td>
<td>pubsub.googleapis.com/subscription/retained_acked_bytes_by_region</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Seek requests</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/seek_request_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Sent message count</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/sent_message_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>StreamingPull Acknowledge message operations</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/streaming_pull_ack_message_operation_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>StreamingPull Acknowledge requests</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/streaming_pull_ack_request_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>StreamingPull message operations</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/streaming_pull_message_operation_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>StreamingPull ModifyAckDeadline message operations</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/streaming_pull_mod_ack_deadline_message_operation_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>StreamingPull ModifyAckDeadline requests</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/streaming_pull_mod_ack_deadline_request_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>StreamingPull responses</td>
<td>Count</td>
<td>pubsub.googleapis.com/subscription/streaming_pull_response_count</td>
</tr>
<tr>
<td>pubsub_subscription/default_metrics</td>
<td>Unacked bytes by region</td>
<td>Byte</td>
<td>pubsub.googleapis.com/subscription/unacked_bytes_by_region</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Topic byte cost</td>
<td>Byte</td>
<td>pubsub.googleapis.com/topic/byte_cost</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Topic updates</td>
<td>Count</td>
<td>pubsub.googleapis.com/topic/config_updates_count</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Publish message size</td>
<td>Byte</td>
<td>pubsub.googleapis.com/topic/message_sizes</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Retained acked messages by region</td>
<td>Count</td>
<td>pubsub.googleapis.com/topic/num_retained_acked_messages_by_region</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Unacked messages by region</td>
<td>Count</td>
<td>pubsub.googleapis.com/topic/num_unacked_messages_by_region</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Oldest retained acked message age by region</td>
<td>Second</td>
<td>pubsub.googleapis.com/topic/oldest_retained_acked_message_age_by_region</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Oldest unacked message age by region</td>
<td>Second</td>
<td>pubsub.googleapis.com/topic/oldest_unacked_message_age_by_region</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Retained acked bytes by region</td>
<td>Byte</td>
<td>pubsub.googleapis.com/topic/retained_acked_bytes_by_region</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Publish message operations</td>
<td>Count</td>
<td>pubsub.googleapis.com/topic/send_message_operation_count</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Publish requests</td>
<td>Count</td>
<td>pubsub.googleapis.com/topic/send_request_count</td>
</tr>
<tr>
<td>pubsub_topic/default_metrics</td>
<td>Unacked bytes by region</td>
<td>Byte</td>
<td>pubsub.googleapis.com/topic/unacked_bytes_by_region</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_39">Related topics<a class="headerlink" href="#related-topics_39" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-recaptcha-enterprise-monitoringmd">Source: gcp-recaptcha-enterprise-monitoring.md<a class="headerlink" href="#source-gcp-recaptcha-enterprise-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud reCAPTCHA Enterprise monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-recaptcha-enterprise-monitoring
scraped: 2026-02-17T05:03:24.389261</p>
<hr />
<h1 id="google-cloud-recaptcha-enterprise-monitoring">Google Cloud reCAPTCHA Enterprise monitoring<a class="headerlink" href="#google-cloud-recaptcha-enterprise-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-recaptcha-enterprise-monitoring_1">Google Cloud reCAPTCHA Enterprise monitoring<a class="headerlink" href="#google-cloud-recaptcha-enterprise-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_39">Prerequisites<a class="headerlink" href="#prerequisites_39" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_27">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_27" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_28">View metrics<a class="headerlink" href="#view-metrics_28" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_27">Metric table<a class="headerlink" href="#metric-table_27" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud reCAPTCHA Enterprise.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>recaptchaenterprise_googleapis_com_Key/default_metrics</td>
<td>Score counts</td>
<td>Count</td>
<td>recaptchaenterprise.googleapis.com/score_counts</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_40">Related topics<a class="headerlink" href="#related-topics_40" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-router-monitoringmd">Source: gcp-router-monitoring.md<a class="headerlink" href="#source-gcp-router-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Router monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-router-monitoring
scraped: 2026-02-17T05:12:27.013198</p>
<hr />
<h1 id="google-cloud-router-monitoring">Google Cloud Router monitoring<a class="headerlink" href="#google-cloud-router-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-router-monitoring_1">Google Cloud Router monitoring<a class="headerlink" href="#google-cloud-router-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_40">Prerequisites<a class="headerlink" href="#prerequisites_40" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_28">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_28" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_29">View metrics<a class="headerlink" href="#view-metrics_29" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_28">Metric table<a class="headerlink" href="#metric-table_28" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Router.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Allocated ports</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/allocated_ports</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Closed connections count</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/closed_connections_count</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Received packets dropped count</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/dropped_received_packets_count</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Sent packets dropped count</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/dropped_sent_packets_count</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>NAT allocation failed</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/nat_allocation_failed</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>New connections count</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/new_connections_count</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Open connections</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/open_connections</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Port usage</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/port_usage</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Received bytes count</td>
<td>Byte</td>
<td>router.googleapis.com/nat/received_bytes_count</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Received packets count</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/received_packets_count</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Sent bytes count</td>
<td>Byte</td>
<td>router.googleapis.com/nat/sent_bytes_count</td>
</tr>
<tr>
<td>nat_gateway/default_metrics</td>
<td>Sent packets count</td>
<td>Unspecified</td>
<td>router.googleapis.com/nat/sent_packets_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_41">Related topics<a class="headerlink" href="#related-topics_41" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-spanner-monitoringmd">Source: gcp-spanner-monitoring.md<a class="headerlink" href="#source-gcp-spanner-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Spanner monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-spanner-monitoring
scraped: 2026-02-16T21:31:50.549496</p>
<hr />
<h1 id="google-cloud-spanner-monitoring">Google Cloud Spanner monitoring<a class="headerlink" href="#google-cloud-spanner-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-spanner-monitoring_1">Google Cloud Spanner monitoring<a class="headerlink" href="#google-cloud-spanner-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_41">Prerequisites<a class="headerlink" href="#prerequisites_41" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_29">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_29" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_30">View metrics<a class="headerlink" href="#view-metrics_30" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_29">Metric table<a class="headerlink" href="#metric-table_29" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Spanner.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>spanner_instance/default_metrics</td>
<td>API requests</td>
<td>Count</td>
<td>spanner.googleapis.com/api/api_request_count</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Bytes received by Cloud Spanner.</td>
<td>Byte</td>
<td>spanner.googleapis.com/api/received_bytes_count</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>API request rate</td>
<td>PerSecond</td>
<td>spanner.googleapis.com/api/request_count</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Request latencies</td>
<td>Second</td>
<td>spanner.googleapis.com/api/request_latencies</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Bytes sent by Cloud Spanner.</td>
<td>Byte</td>
<td>spanner.googleapis.com/api/sent_bytes_count</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Backup storage used.</td>
<td>Byte</td>
<td>spanner.googleapis.com/instance/backup/used_bytes</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Smoothed CPU utilization</td>
<td>Percent</td>
<td>spanner.googleapis.com/instance/cpu/smoothed_utilization</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>CPU utilization</td>
<td>Percent</td>
<td>spanner.googleapis.com/instance/cpu/utilization</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>CPU utilization by priority</td>
<td>Percent</td>
<td>spanner.googleapis.com/instance/cpu/utilization_by_priority</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Nodes</td>
<td>Count</td>
<td>spanner.googleapis.com/instance/node_count</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Sessions</td>
<td>Count</td>
<td>spanner.googleapis.com/instance/session_count</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Storage limit</td>
<td>Byte</td>
<td>spanner.googleapis.com/instance/storage/limit_bytes</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Storage used.</td>
<td>Byte</td>
<td>spanner.googleapis.com/instance/storage/used_bytes</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Storage utilization</td>
<td>Percent</td>
<td>spanner.googleapis.com/instance/storage/utilization</td>
</tr>
<tr>
<td>spanner_instance/default_metrics</td>
<td>Count of queries</td>
<td>Count</td>
<td>spanner.googleapis.com/query_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_42">Related topics<a class="headerlink" href="#related-topics_42" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-storage-transfer-service-monitoringmd">Source: gcp-storage-transfer-service-monitoring.md<a class="headerlink" href="#source-gcp-storage-transfer-service-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Storage Transfer Service monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-storage-transfer-service-monitoring
scraped: 2026-02-17T05:07:20.112015</p>
<hr />
<h1 id="google-cloud-storage-transfer-service-monitoring">Google Cloud Storage Transfer Service monitoring<a class="headerlink" href="#google-cloud-storage-transfer-service-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-storage-transfer-service-monitoring_1">Google Cloud Storage Transfer Service monitoring<a class="headerlink" href="#google-cloud-storage-transfer-service-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_42">Prerequisites<a class="headerlink" href="#prerequisites_42" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_30">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_30" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_31">View metrics<a class="headerlink" href="#view-metrics_31" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_30">Metric table<a class="headerlink" href="#metric-table_30" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud Storage Transfer Service.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>transfer_service_agent/default_metrics</td>
<td>Agent connected status</td>
<td>Unspecified</td>
<td>storagetransfer.googleapis.com/agent/connected</td>
</tr>
<tr>
<td>transfer_service_agent/default_metrics</td>
<td>Agent transfer delta</td>
<td>Byte</td>
<td>storagetransfer.googleapis.com/agent/transferred_bytes_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_43">Related topics<a class="headerlink" href="#related-topics_43" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-virtual-private-cloud-monitoringmd">Source: gcp-virtual-private-cloud-monitoring.md<a class="headerlink" href="#source-gcp-virtual-private-cloud-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud Virtual Private Cloud (VPC) monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-virtual-private-cloud-monitoring
scraped: 2026-02-16T09:35:22.855723</p>
<hr />
<h1 id="google-cloud-virtual-private-cloud-vpc-monitoring">Google Cloud Virtual Private Cloud (VPC) monitoring<a class="headerlink" href="#google-cloud-virtual-private-cloud-vpc-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-virtual-private-cloud-vpc-monitoring_1">Google Cloud Virtual Private Cloud (VPC) monitoring<a class="headerlink" href="#google-cloud-virtual-private-cloud-vpc-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_43">Prerequisites<a class="headerlink" href="#prerequisites_43" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_31">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_31" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_32">View metrics<a class="headerlink" href="#view-metrics_32" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_31">Metric table<a class="headerlink" href="#metric-table_31" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Cloud VPC.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>vpc_access_connector/default_metrics</td>
<td>CPU Utilizations</td>
<td>Percent</td>
<td>vpcaccess.googleapis.com/connector/cpu/utilizations</td>
</tr>
<tr>
<td>vpc_access_connector/default_metrics</td>
<td>Active instances</td>
<td>Count</td>
<td>vpcaccess.googleapis.com/connector/instances</td>
</tr>
<tr>
<td>vpc_access_connector/default_metrics</td>
<td>Bytes received delta</td>
<td>Byte</td>
<td>vpcaccess.googleapis.com/connector/received_bytes_count</td>
</tr>
<tr>
<td>vpc_access_connector/default_metrics</td>
<td>Packets received delta</td>
<td>Unspecified</td>
<td>vpcaccess.googleapis.com/connector/received_packets_count</td>
</tr>
<tr>
<td>vpc_access_connector/default_metrics</td>
<td>Bytes sent delta</td>
<td>Byte</td>
<td>vpcaccess.googleapis.com/connector/sent_bytes_count</td>
</tr>
<tr>
<td>vpc_access_connector/default_metrics</td>
<td>Packets sent delta</td>
<td>Unspecified</td>
<td>vpcaccess.googleapis.com/connector/sent_packets_count</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_44">Related topics<a class="headerlink" href="#related-topics_44" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-gcp-supported-service-metrics-newmd">Source: gcp-supported-service-metrics-new.md<a class="headerlink" href="#source-gcp-supported-service-metrics-newmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud supported services
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new
scraped: 2026-02-17T04:49:24.836397</p>
<hr />
<h1 id="google-cloud-supported-services_1">Google Cloud supported services<a class="headerlink" href="#google-cloud-supported-services_1" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-supported-services_2">Google Cloud supported services<a class="headerlink" href="#google-cloud-supported-services_2" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>3-min read</li>
<li>Updated on Sep 23, 2024</li>
</ul>
<p>Dynatrace version 1.230+</p>
<p>This section refers to Google Cloud service metrics that are available with Google Cloud version 1.0 integration.</p>
<ul>
<li>For Google Cloud service metrics that are available with earlier versions of the Google Cloud integration, see <a href="/docs/ingest-from/google-cloud-platform/legacy/gcp-supported-service-metrics-legacy" title="Supported GCP service metrics, metrics configuration, DDU consumption, and preset dashboard availability">Google Cloud supported service metrics (legacy)</a>.</li>
</ul>
<h2 id="prerequisites_44">Prerequisites<a class="headerlink" href="#prerequisites_44" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Deploy Dynatrace integration</a></p>
<h2 id="supported-services-for-metrics">Supported services for metrics<a class="headerlink" href="#supported-services-for-metrics" title="Permanent link">&para;</a></h2>
<p>After deploying the Dynatrace integration, you can get insights into Google Cloud services metrics collected from the Google Operations API to ensure health of your cloud infrastructure.</p>
<p>Below, see the list of Google Cloud supported services.</p>
<p>Services</p>
<p>Supported entities<a href="#fn-1-1-def">1</a></p>
<p>Supported logs</p>
<p>Logs entities</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-ai-platform-monitoring" title="Monitor Google Cloud AI Platform and view available metrics.">Google Cloud AI Platform monitoring (deprecated)</a></p>
<p>cloudml_job, cloudml_model_version</p>
<p>yes</p>
<p>cloudml_job, cloudml_model_version</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-alloydb-monitoring" title="Monitor Google Cloud AlloyDB and view available metrics.">Google Cloud AlloyDB monitoring</a></p>
<p>alloydb_database, alloydb_instance</p>
<p>yes</p>
<p>alloydb_database, alloydb_instance</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-apis-monitoring" title="Monitor Google Cloud APIs and view available metrics.">Google Cloud APIs monitoring</a></p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-apigee-monitoring" title="Monitor Google Cloud Apigee and view available metrics.">Google Cloud Apigee monitoring</a></p>
<p>apigee_environment, apigee_proxy, apigee_target</p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-app-engine/app-engine-monitoring" title="Monitor Google App Engine and view available metrics.">Google App Engine with Operations suite metrics monitoring</a></p>
<p>gae_app</p>
<p>yes</p>
<p>gae_app</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-assistant-smart-home-monitoring" title="Monitor Google Cloud Assistant Smart Home and view available metrics.">Google Cloud Assistant Smart Home monitoring</a></p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-bigquery-monitoring" title="Monitor Google BigQuery and view available metrics.">Google BigQuery monitoring</a></p>
<p>bigquery_bigengine_model</p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-bigtable-monitoring" title="Monitor Google Cloud Bigtable and view available metrics.">Google Cloud Bigtable monitoring</a></p>
<p>bigtable_cluster, bigtable_table</p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-dns-monitoring" title="Monitor Google Cloud DNS and view available metrics.">Google Cloud DNS monitoring</a></p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions/cloud-functions-monitoring" title="Monitor Google Cloud Functions and view available metrics.">Google Cloud Functions monitoring</a></p>
<p>cloud_function</p>
<p>yes</p>
<p>cloud_function</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-iot-core-monitoring" title="Monitor Google Cloud IoT Core and view available metrics.">Google Cloud IoT Core monitoring (deprecated)</a></p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-router-monitoring" title="Monitor Google Cloud Router and view available metrics.">Google Cloud Router monitoring</a></p>
<p>nat_gateway</p>
<p>yes</p>
<p>nat_gateway</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun/cloud-run-monitoring" title="Monitor Google Cloud Run and view available metrics.">Google Cloud Run monitoring</a></p>
<p>cloud_function, cloud_run_revision</p>
<p>yes</p>
<p>cloud_run_revision</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-storage-monitoring" title="Monitor Google Cloud Storage and view available metrics.">Google Cloud Storage monitoring</a></p>
<p>gcs_bucket</p>
<p>yes</p>
<p>gcs_bucket</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-tasks-monitoring" title="Monitor Google Cloud Tasks and view available metrics.">Google Cloud Tasks monitoring</a></p>
<p>cloud_tasks_queue</p>
<p>yes</p>
<p>cloud_tasks_queue</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-composer-monitoring" title="Monitor Google Cloud Composer and view available metrics.">Google Cloud Composer monitoring</a></p>
<p>cloud_composer_environment</p>
<p>yes</p>
<p>cloud_composer_environment</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-compute-engine/compute-engine-monitoring" title="Monitor Google Compute Engine and view available metrics.">Google Compute Engine with Operations suite metrics monitoring</a></p>
<p>autoscaler, gce_instance, instance_group, tpu_worker</p>
<p>yes</p>
<p>autoscaler, gce_autoscaler, gce_instance_group, gce_instance, tpu_worker</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-data-loss-prevention-monitoring" title="Monitor Google Cloud Data Loss Prevention (now part of Sensitive Data Protection) and view available metrics.">Google Cloud Data Loss Prevention monitoring</a></p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-storage-transfer-service-monitoring" title="Monitor Google Cloud Storage Transfer Service and view available metrics.">Google Cloud Storage Transfer Service monitoring</a></p>
<p>storage_transfer_job, transfer_service_agent</p>
<p>yes</p>
<p>storage_transfer_job</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-dataflow-monitoring" title="Monitor Google Cloud Dataflow and view available metrics.">Google Cloud Dataflow monitoring</a></p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-dataproc-monitoring" title="Monitor Google Cloud Dataproc and view available metrics.">Google Cloud Dataproc monitoring</a></p>
<p>cloud_dataproc_cluster</p>
<p>yes</p>
<p>cloud_dataproc_cluster</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-in-datastore-mode-monitoring" title="Monitor Google Cloud Firestore in Datastore mode and view available metrics.">Google Cloud Firestore in Datastore mode monitoring</a></p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-filestore-monitoring" title="Monitor Google Filestore and view available metrics.">Google Cloud Filestore monitoring</a></p>
<p>filestore_instance</p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-firebase-monitoring" title="Monitor Google Cloud Firebase and view available metrics.">Google Cloud Firebase monitoring</a></p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-firestore-monitoring" title="Monitor Google Cloud Firestore and view available metrics.">Google Cloud Firestore monitoring</a></p>
<p>firestore_database</p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-hybrid-connectivity-monitoring" title="Monitor Google Cloud Hybrid Connectivity and view available metrics.">Google Cloud Hybrid Connectivity monitoring</a></p>
<p>interconnect, interconnect_attachment, gce_router, vpn_gateway</p>
<p>yes</p>
<p>gce_router, vpn_gateway</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-gke/google-kubernetes-engine-monitoring" title="Monitor Google Kubernetes Engine and view available metrics.">Google Kubernetes Engine monitoring</a></p>
<p>k8s_cluster, k8s_container, k8s_node, k8s_pod</p>
<p>yes</p>
<p>k8s_cluster, k8s_container, k8s_node, k8s_pod</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-load-balancing-monitoring" title="Monitor Google Cloud Load Balancing and view available metrics.">Google Cloud Load Balancing monitoring</a></p>
<p>https_lb, internal_http_lb_rule, internal_network_lb_rule, network_lb_rule, tcp_ssl_proxy_rule</p>
<p>yes</p>
<p>http_load_balancer, internal_http_lb_rule, internal_network_lb_rule, network_lb_rule, tcp_ssl_proxy_rule</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-managed-microsoft-ad-monitoring" title="Monitor Google Managed Microsoft AD and view available metrics.">Google Managed Microsoft AD monitoring</a></p>
<p>microsoft_ad_domain</p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-memorystore-monitoring" title="Monitor Google Cloud Memorystore and view available metrics.">Google Cloud Memorystore monitoring</a></p>
<p>redis_instance</p>
<p>yes</p>
<p>redis_instance</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-netapp-monitoring" title="Monitor NetApp on Google Cloud and view available metrics.">NetApp on Google Cloud monitoring</a></p>
<p>netapp_volumes_replication, netapp_volumes_storage_pool, netapp_volumes_volume</p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-network-security-monitoring" title="Monitor Google Cloud Network Security and view available metrics.">Google Cloud Network Security monitoring</a></p>
<p>network_security_policy</p>
<p>yes</p>
<p>network_security_policy</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-operations-cloud-monitoring-and-logging" title="Monitor Google Cloud's operations suite and view available metrics.">Operations: Cloud Monitoring &amp; Logging</a></p>
<p>uptime_url</p>
<p>yes</p>
<p>uptime_url</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-monitoring" title="Monitor Google Cloud Pub/Sub and view available metrics.">Google Cloud Pub/Sub monitoring</a></p>
<p>pubsub_snapshot, pubsub_subscription, pubsub_topic</p>
<p>yes</p>
<p>pubsub_snapshot, pubsub_subscription, pubsub_topic</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-pub-sub-lite-monitoring" title="Monitor Google Cloud Pub/Sub Lite and view available metrics.">Google Cloud Pub/Sub Lite monitoring</a></p>
<p>subscription_partition, topic_partition</p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-spanner-monitoring" title="Monitor Google Cloud Spanner and view available metrics.">Google Cloud Spanner monitoring</a></p>
<p>spanner_instance</p>
<p>yes</p>
<p>spanner_instance</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-cloud-sql" title="Monitor Google Cloud SQL and view available metrics.">Google Cloud SQL monitoring</a></p>
<p>cloudsql_database</p>
<p>yes</p>
<p>cloudsql_database</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-virtual-private-cloud-monitoring" title="Monitor Google Cloud Virtual Private Cloud (VPC) and view available metrics.">Google Cloud Virtual Private Cloud (VPC) monitoring</a></p>
<p>vpc_access_connector</p>
<p>yes</p>
<p>vpc_access_connector</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-network-topology-monitoring" title="Monitor Google Cloud Network Topology and view available metrics.">Google Cloud Network Topology monitoring</a></p>
<p>no</p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new/gcp-vertex-ai" title="Monitor Google Cloud Vertex AI and view available metrics.">Google Vertex AI monitoring</a></p>
<p>vertex_ai_deployment_resource_pool,<br />
vertex_ai_endpoint,<br />
vertex_ai_feature_online_store,<br />
vertex_ai_feature_store,<br />
vertex_ai_pipeline_job,<br />
vertex_ai_index, vertex_ai_index_endpoint,<br />
vertex_ai_publisher_model,<br />
vision_ai_instance,<br />
vision_ai_stream</p>
<p>yes</p>
<p>vertex_ai_deployment_resource_pool,<br />
vertex_ai_endpoint,<br />
vertex_ai_feature_store,<br />
vertex_ai_pipeline_job,<br />
vertex_ai_index_endpoint</p>
<p>1</p>
<p>Services might have one entity, several entities, or none. For each entity, you can see metrics, properties, logs, errors, and many more in Dynatrace <a href="/docs/observe/infrastructure-observability/cloud-platform-monitoring/clouds-app" title="Monitor all cloud platforms at once."><img alt="Clouds" src="https://dt-cdn.net/images/clouds-1025-170946931c.png" title="Clouds" /> <strong>Clouds</strong></a>.</p>
<h2 id="check-available-metrics">Check available metrics<a class="headerlink" href="#check-available-metrics" title="Permanent link">&para;</a></h2>
<p>To check available metrics for a service, you need to</p>
<ol>
<li>Find the extension in the <a href="https://www.dynatrace.com/hub/?query=google&amp;filter=all">Hub√Ø¬ª¬ø</a> and select it to open the overview page. See example: <a href="https://www.dynatrace.com/hub/detail/google-functions/?query=cloud+function&amp;filter=all">Google Cloud Functions√Ø¬ª¬ø</a>.</li>
<li>Scroll down to the bottom of the overview page of the extension to find the <strong>Feature sets</strong> section.</li>
<li>In the table, select the <strong>default_metrics</strong> dropdown.</li>
<li>Now, you can check all available metrics for the chosen service.</li>
</ol>
<h2 id="monitoring-consumption_7">Monitoring consumption<a class="headerlink" href="#monitoring-consumption_7" title="Permanent link">&para;</a></h2>
<h3 id="metric-ingestion_3">Metric ingestion<a class="headerlink" href="#metric-ingestion_3" title="Permanent link">&para;</a></h3>
<p>All cloud services consume DDUs. The amount of DDU consumption per service instance depends on the number of monitored metrics and their dimensions (each metric dimension results in the ingestion of 1 data point; 1 data point consumes 0.001 DDUs). For details, see <a href="/docs/license/monitoring-consumption-classic/davis-data-units" title="Understand how Dynatrace monitoring consumption is calculated based on Davis data units (DDU).">Extending Dynatrace (Davis data units)</a>.</p>
<h3 id="log-ingestion_6">Log ingestion<a class="headerlink" href="#log-ingestion_6" title="Permanent link">&para;</a></h3>
<p>DDU consumption applies to cloud Log Monitoring. See <a href="/docs/license/monitoring-consumption-classic/davis-data-units/log-monitoring-consumption" title="Understand how the volume of DDU consumption is calculated for Dynatrace Log Monitoring Classic.">DDUs for Log Monitoring</a> for details.</p>
<h2 id="related-topics_45">Related topics<a class="headerlink" href="#related-topics_45" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-app-engine-monitoringmd">Source: app-engine-monitoring.md<a class="headerlink" href="#source-app-engine-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google App Engine with Operations suite metrics monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/google-app-engine/app-engine-monitoring
scraped: 2026-02-17T04:59:27.198830</p>
<hr />
<h1 id="google-app-engine-with-operations-suite-metrics-monitoring">Google App Engine with Operations suite metrics monitoring<a class="headerlink" href="#google-app-engine-with-operations-suite-metrics-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-app-engine-with-operations-suite-metrics-monitoring_1">Google App Engine with Operations suite metrics monitoring<a class="headerlink" href="#google-app-engine-with-operations-suite-metrics-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>3-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_45">Prerequisites<a class="headerlink" href="#prerequisites_45" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_32">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_32" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_33">View metrics<a class="headerlink" href="#view-metrics_33" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_32">Metric table<a class="headerlink" href="#metric-table_32" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google App Engine.</p>
<table>
<thead>
<tr>
<th>Feature Set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>gae_app/default_metrics</td>
<td>Monitoring Agent API Request Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/api_request_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Logging Agent Log Entry Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/log_entry_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Logging Agent Retried Log Entry Writes Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/log_entry_retry_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Monitoring Agent Memory Usage</td>
<td>Byte</td>
<td>agent.googleapis.com/agent/memory_usage</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Monitoring Agent Metric Point Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/monitoring/point_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Logging Agent API Request Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/request_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Monitoring Agent Process Labels Size</td>
<td>Byte</td>
<td>agent.googleapis.com/agent/streamspace_size</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Monitoring Agent is Throttling Processes</td>
<td>Count</td>
<td>agent.googleapis.com/agent/streamspace_size_throttling</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Monitoring/Logging Agent Uptime</td>
<td>Second</td>
<td>agent.googleapis.com/agent/uptime</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Autoscaling Metrics Utilization Capacity</td>
<td>Count</td>
<td>appengine.googleapis.com/flex/autoscaler/capacity</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Autoscaling Metrics Current Utilization</td>
<td>Count</td>
<td>appengine.googleapis.com/flex/autoscaler/current_utilization</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Connections</td>
<td>Count</td>
<td>appengine.googleapis.com/flex/connections/current</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Reserved cores</td>
<td>Count</td>
<td>appengine.googleapis.com/flex/cpu/reserved_cores</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>CPU utilization</td>
<td>Percent</td>
<td>appengine.googleapis.com/flex/cpu/utilization</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Disk bytes read</td>
<td>Byte</td>
<td>appengine.googleapis.com/flex/disk/read_bytes_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Disk bytes written</td>
<td>Byte</td>
<td>appengine.googleapis.com/flex/disk/write_bytes_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Network bytes received.</td>
<td>Byte</td>
<td>appengine.googleapis.com/flex/network/received_bytes_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Network bytes sent.</td>
<td>Byte</td>
<td>appengine.googleapis.com/flex/network/sent_bytes_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Interception count</td>
<td>Count</td>
<td>appengine.googleapis.com/http/server/dos_intercept_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Quota denial count</td>
<td>Count</td>
<td>appengine.googleapis.com/http/server/quota_denial_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Response count</td>
<td>Count</td>
<td>appengine.googleapis.com/http/server/response_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Response latency</td>
<td>MilliSecond</td>
<td>appengine.googleapis.com/http/server/response_latencies</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Response count by style</td>
<td>Count</td>
<td>appengine.googleapis.com/http/server/response_style_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Memcache utilization</td>
<td>Count</td>
<td>appengine.googleapis.com/memcache/centi_mcu_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Hit ratio</td>
<td>Count</td>
<td>appengine.googleapis.com/memcache/hit_ratio</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Memcache operations</td>
<td>Count</td>
<td>appengine.googleapis.com/memcache/operation_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Memcache received bytes</td>
<td>Byte</td>
<td>appengine.googleapis.com/memcache/received_bytes_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Memcache sent bytes</td>
<td>Byte</td>
<td>appengine.googleapis.com/memcache/sent_bytes_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Used Cache Size</td>
<td>Byte</td>
<td>appengine.googleapis.com/memcache/used_cache_size</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Estimated instance count</td>
<td>Count</td>
<td>appengine.googleapis.com/system/billed_instance_estimate_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>CPU megacycles</td>
<td>Count</td>
<td>appengine.googleapis.com/system/cpu/usage</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Instance count</td>
<td>Count</td>
<td>appengine.googleapis.com/system/instance_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Memory usage</td>
<td>Byte</td>
<td>appengine.googleapis.com/system/memory/usage</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Received bytes</td>
<td>Byte</td>
<td>appengine.googleapis.com/system/network/received_bytes_count</td>
</tr>
<tr>
<td>gae_app/default_metrics</td>
<td>Sent bytes</td>
<td>Byte</td>
<td>appengine.googleapis.com/system/network/sent_bytes_count</td>
</tr>
<tr>
<td>gae_instance/default_metrics</td>
<td>Connections</td>
<td>Count</td>
<td>appengine.googleapis.com/flex/instance/connections/current</td>
</tr>
<tr>
<td>gae_instance/default_metrics</td>
<td>CPU Utilization</td>
<td>Percent</td>
<td>appengine.googleapis.com/flex/instance/cpu/utilization</td>
</tr>
<tr>
<td>gae_instance/default_metrics</td>
<td>Network bytes received</td>
<td>Byte</td>
<td>appengine.googleapis.com/flex/instance/network/received_bytes_count</td>
</tr>
<tr>
<td>gae_instance/default_metrics</td>
<td>Network bytes sent</td>
<td>Byte</td>
<td>appengine.googleapis.com/flex/instance/network/sent_bytes_count</td>
</tr>
<tr>
<td>gae_instance/default_metrics</td>
<td>Websocket average duration</td>
<td>Second</td>
<td>appengine.googleapis.com/flex/instance/ws/avg_duration</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_46">Related topics<a class="headerlink" href="#related-topics_46" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-google-app-enginemd">Source: google-app-engine.md<a class="headerlink" href="#source-google-app-enginemd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Monitor Google App Engine
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/google-app-engine
scraped: 2026-02-06T16:24:08.961664</p>
<hr />
<h1 id="monitor-google-app-engine">Monitor Google App Engine<a class="headerlink" href="#monitor-google-app-engine" title="Permanent link">&para;</a></h1>
<h1 id="monitor-google-app-engine_1">Monitor Google App Engine<a class="headerlink" href="#monitor-google-app-engine_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Published Jun 23, 2020</li>
</ul>
<p>The Google App Engine standard environment type supports applications that run on Java, .NET, Node.js, Golang, and more. For custom Docker images, Google App Engine provides flexible environment support.</p>
<h2 id="prerequisites_46">Prerequisites<a class="headerlink" href="#prerequisites_46" title="Permanent link">&para;</a></h2>
<ul>
<li>Create a <a href="/docs/manage/identity-access-management/access-tokens-and-oauth-clients/access-tokens#paas-token" title="Learn the concept of an access token and its scopes.">PaaS Token</a>.</li>
<li>Review the list of <a href="/docs/ingest-from/technology-support" title="Find technical details related to Dynatrace support for specific platforms and development frameworks.">supported applications and versions</a>.</li>
</ul>
<h2 id="integrate-oneagent-into-the-application-image">Integrate OneAgent into the application image<a class="headerlink" href="#integrate-oneagent-into-the-application-image" title="Permanent link">&para;</a></h2>
<p>To integrate OneAgent into a container deployment with a Dockerfile in Google App Engine flexible environment and activate instrumentation of your application, add the commands below to your current Dockerfile, making sure to enter your own values for the <code>DT_API_URL</code>, <code>DT_API_TOKEN</code>, and <code>DT_ONEAGENT_OPTIONS</code> arguments.</p>
<ul>
<li><code>&lt;environmentID&gt;</code> should be replaced with your Dynatrace environment ID. If you√¢¬Ä¬ôre using Dynatrace Managed, you need to provide your Dynatrace Server URL (<code>https://&lt;YourDynatraceServerURL&gt;/e/&lt;environmentID&gt;/api</code>).</li>
<li><code>&lt;token&gt;</code>should be replaced with the PaaS token mentioned in the prerequisites.</li>
<li>Technology support is enabled via <code>include</code> parameters. Valid options for <code>flavor=default</code> are <code>all</code>, <code>java</code>, <code>apache</code>, <code>nginx</code>, <code>nodejs</code>, <code>dotnet</code>, <code>php</code> and <code>go</code>. Including specific technology-support options, rather than support for all technology options, results in a smaller OneAgent package. For Alpine Linux based environments, Dynatrace OneAgent supports the flavor <code>musl</code>. Valid options for <code>flavor=musl</code> are <code>all</code>, <code>go</code>, <code>java</code>, <code>apache</code>, <code>nginx</code>, and <code>nodejs</code>.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-137-1" name="__codelineno-137-1" href="#__codelineno-137-1"></a>ARG DT_API_URL=&quot;https://&lt;environmentID&gt;.live.dynatrace.com/api&quot;
<a id="__codelineno-137-2" name="__codelineno-137-2" href="#__codelineno-137-2"></a>
<a id="__codelineno-137-3" name="__codelineno-137-3" href="#__codelineno-137-3"></a>
<a id="__codelineno-137-4" name="__codelineno-137-4" href="#__codelineno-137-4"></a>
<a id="__codelineno-137-5" name="__codelineno-137-5" href="#__codelineno-137-5"></a>ARG DT_API_TOKEN=&quot;&lt;token&gt;&quot;
<a id="__codelineno-137-6" name="__codelineno-137-6" href="#__codelineno-137-6"></a>
<a id="__codelineno-137-7" name="__codelineno-137-7" href="#__codelineno-137-7"></a>
<a id="__codelineno-137-8" name="__codelineno-137-8" href="#__codelineno-137-8"></a>
<a id="__codelineno-137-9" name="__codelineno-137-9" href="#__codelineno-137-9"></a>ARG DT_ONEAGENT_OPTIONS=&quot;flavor=default&amp;include=&lt;technology1&gt;&amp;include=&lt;technology2&gt;&quot;
<a id="__codelineno-137-10" name="__codelineno-137-10" href="#__codelineno-137-10"></a>
<a id="__codelineno-137-11" name="__codelineno-137-11" href="#__codelineno-137-11"></a>
<a id="__codelineno-137-12" name="__codelineno-137-12" href="#__codelineno-137-12"></a>
<a id="__codelineno-137-13" name="__codelineno-137-13" href="#__codelineno-137-13"></a>ENV DT_HOME=&quot;/opt/dynatrace/oneagent&quot;
<a id="__codelineno-137-14" name="__codelineno-137-14" href="#__codelineno-137-14"></a>
<a id="__codelineno-137-15" name="__codelineno-137-15" href="#__codelineno-137-15"></a>
<a id="__codelineno-137-16" name="__codelineno-137-16" href="#__codelineno-137-16"></a>
<a id="__codelineno-137-17" name="__codelineno-137-17" href="#__codelineno-137-17"></a>RUN mkdir -p &quot;$DT_HOME&quot; &amp;&amp; \
<a id="__codelineno-137-18" name="__codelineno-137-18" href="#__codelineno-137-18"></a>
<a id="__codelineno-137-19" name="__codelineno-137-19" href="#__codelineno-137-19"></a>
<a id="__codelineno-137-20" name="__codelineno-137-20" href="#__codelineno-137-20"></a>
<a id="__codelineno-137-21" name="__codelineno-137-21" href="#__codelineno-137-21"></a>wget -O &quot;$DT_HOME/oneagent.zip&quot; &quot;$DT_API_URL/v1/deployment/installer/agent/unix/paas/latest?Api-Token=$DT_API_TOKEN&amp;$DT_ONEAGENT_OPTIONS&quot; &amp;&amp; \
<a id="__codelineno-137-22" name="__codelineno-137-22" href="#__codelineno-137-22"></a>
<a id="__codelineno-137-23" name="__codelineno-137-23" href="#__codelineno-137-23"></a>
<a id="__codelineno-137-24" name="__codelineno-137-24" href="#__codelineno-137-24"></a>
<a id="__codelineno-137-25" name="__codelineno-137-25" href="#__codelineno-137-25"></a>unzip -d &quot;$DT_HOME&quot; &quot;$DT_HOME/oneagent.zip&quot; &amp;&amp; \
<a id="__codelineno-137-26" name="__codelineno-137-26" href="#__codelineno-137-26"></a>
<a id="__codelineno-137-27" name="__codelineno-137-27" href="#__codelineno-137-27"></a>
<a id="__codelineno-137-28" name="__codelineno-137-28" href="#__codelineno-137-28"></a>
<a id="__codelineno-137-29" name="__codelineno-137-29" href="#__codelineno-137-29"></a>rm &quot;$DT_HOME/oneagent.zip&quot;
<a id="__codelineno-137-30" name="__codelineno-137-30" href="#__codelineno-137-30"></a>
<a id="__codelineno-137-31" name="__codelineno-137-31" href="#__codelineno-137-31"></a>
<a id="__codelineno-137-32" name="__codelineno-137-32" href="#__codelineno-137-32"></a>
<a id="__codelineno-137-33" name="__codelineno-137-33" href="#__codelineno-137-33"></a>ENTRYPOINT [ &quot;/opt/dynatrace/oneagent/dynatrace-agent64.sh&quot; ]
<a id="__codelineno-137-34" name="__codelineno-137-34" href="#__codelineno-137-34"></a>
<a id="__codelineno-137-35" name="__codelineno-137-35" href="#__codelineno-137-35"></a>
<a id="__codelineno-137-36" name="__codelineno-137-36" href="#__codelineno-137-36"></a>
<a id="__codelineno-137-37" name="__codelineno-137-37" href="#__codelineno-137-37"></a>CMD [ &quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot; ] # the command of your application, for example, Java
</code></pre></div>
<p>The <code>wget</code> and <code>unzip</code> commands above might fail if they aren't provided by the base image.</p>
<h2 id="deploy-the-application-image">Deploy the application image<a class="headerlink" href="#deploy-the-application-image" title="Permanent link">&para;</a></h2>
<p>After integrating the OneAgent into the application Docker file, deploy the application. In order to do this, switch to the directory of the application that contains the <code>Dockerfile</code> and the <code>app.yaml</code> file, and run the following command in the <code>gcloud</code> CLI.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-138-1" name="__codelineno-138-1" href="#__codelineno-138-1"></a>gcloud app deploy
</code></pre></div>
<p>Google App Engine will take care of building the Docker image based on the Docker file provided, and thereby of downloading and installing the OneAgent code-modules into the application image.</p>
<h2 id="update-oneagent_1">Update OneAgent<a class="headerlink" href="#update-oneagent_1" title="Permanent link">&para;</a></h2>
<p>Every time you want to update your version of Dynatrace OneAgent, you must redeploy your application. Google App Engine thus rebuilds the application image with the latest OneAgent components. Any newly started containers from this application image is then monitored with the latest version of OneAgent.</p>
<h2 id="related-topics_47">Related topics<a class="headerlink" href="#related-topics_47" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="/docs/ingest-from/technology-support/oneagent-platform-and-capability-support-matrix" title="Learn which capabilities are supported by OneAgent on different operating systems and platforms.">OneAgent platform and capability support matrix</a></li>
</ul>
<hr />
<h2 id="source-compute-engine-monitoringmd">Source: compute-engine-monitoring.md<a class="headerlink" href="#source-compute-engine-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Compute Engine with Operations suite metrics monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/google-compute-engine/compute-engine-monitoring
scraped: 2026-02-17T05:00:44.606903</p>
<hr />
<h1 id="google-compute-engine-with-operations-suite-metrics-monitoring">Google Compute Engine with Operations suite metrics monitoring<a class="headerlink" href="#google-compute-engine-with-operations-suite-metrics-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-compute-engine-with-operations-suite-metrics-monitoring_1">Google Compute Engine with Operations suite metrics monitoring<a class="headerlink" href="#google-compute-engine-with-operations-suite-metrics-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>18-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_47">Prerequisites<a class="headerlink" href="#prerequisites_47" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_33">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_33" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_34">View metrics<a class="headerlink" href="#view-metrics_34" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_33">Metric table<a class="headerlink" href="#metric-table_33" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Compute Engine.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>gce_instance/default_metrics</td>
<td>Dropped bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/firewall/dropped_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Dropped packets</td>
<td>Count</td>
<td>compute.googleapis.com/firewall/dropped_packets_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Runnable task count.</td>
<td>Count</td>
<td>compute.googleapis.com/guest/cpu/runnable_task_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>CPU usage</td>
<td>Second</td>
<td>compute.googleapis.com/guest/cpu/usage_time</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Disk usage in Bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/guest/disk/bytes_used</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>IO Time</td>
<td>MilliSecond</td>
<td>compute.googleapis.com/guest/disk/io_time</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Merged disk operations</td>
<td>Count</td>
<td>compute.googleapis.com/guest/disk/merged_operation_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Disk bytes transferred</td>
<td>Byte</td>
<td>compute.googleapis.com/guest/disk/operation_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Disk operations</td>
<td>Count</td>
<td>compute.googleapis.com/guest/disk/operation_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Disk operation time</td>
<td>MilliSecond</td>
<td>compute.googleapis.com/guest/disk/operation_time</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Queue Length</td>
<td>Count</td>
<td>compute.googleapis.com/guest/disk/queue_length</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>IO Time</td>
<td>MilliSecond</td>
<td>compute.googleapis.com/guest/disk/weighted_io_time</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Anonymous memory usage in Bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/guest/memory/anonymous_used</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Memory usage in Bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/guest/memory/bytes_used</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Dirty pages usage in Bytes.</td>
<td>Byte</td>
<td>compute.googleapis.com/guest/memory/dirty_used</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Page cache memory usage in Bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/guest/memory/page_cache_used</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Unevictable memory usage in Bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/guest/memory/unevictable_used</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Problem Count</td>
<td>Count</td>
<td>compute.googleapis.com/guest/system/problem_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Problem State</td>
<td>Count</td>
<td>compute.googleapis.com/guest/system/problem_state</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Uptime</td>
<td>Second</td>
<td>compute.googleapis.com/guest/system/uptime</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Reserved vCPUs</td>
<td>Count</td>
<td>compute.googleapis.com/instance/cpu/reserved_cores</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Scheduler Wait Time</td>
<td>Second</td>
<td>compute.googleapis.com/instance/cpu/scheduler_wait_time</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>CPU usage</td>
<td>Second</td>
<td>compute.googleapis.com/instance/cpu/usage_time</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>CPU utilization</td>
<td>Percent</td>
<td>compute.googleapis.com/instance/cpu/utilization</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Peak disk read bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/disk/max_read_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Peak disk read ops</td>
<td>Count</td>
<td>compute.googleapis.com/instance/disk/max_read_ops_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Peak disk write bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/disk/max_write_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Peak disk write ops</td>
<td>Count</td>
<td>compute.googleapis.com/instance/disk/max_write_ops_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Disk read bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/disk/read_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Disk read operations</td>
<td>Count</td>
<td>compute.googleapis.com/instance/disk/read_ops_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Throttled read bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/disk/throttled_read_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Throttled read operations</td>
<td>Count</td>
<td>compute.googleapis.com/instance/disk/throttled_read_ops_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Throttled write bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/disk/throttled_write_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Throttled write operations</td>
<td>Count</td>
<td>compute.googleapis.com/instance/disk/throttled_write_ops_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Disk write bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/disk/write_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Disk write operations</td>
<td>Count</td>
<td>compute.googleapis.com/instance/disk/write_ops_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Early Boot Validation</td>
<td>Count</td>
<td>compute.googleapis.com/instance/integrity/early_boot_validation_status</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Late Boot Validation</td>
<td>Count</td>
<td>compute.googleapis.com/instance/integrity/late_boot_validation_status</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>VM Memory Total</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/memory/balloon/ram_size</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>VM Memory Used</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/memory/balloon/ram_used</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>VM Swap In</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/memory/balloon/swap_in_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>VM Swap Out</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/memory/balloon/swap_out_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Received bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/network/received_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Received packets</td>
<td>Count</td>
<td>compute.googleapis.com/instance/network/received_packets_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Sent bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/instance/network/sent_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Sent packets</td>
<td>Count</td>
<td>compute.googleapis.com/instance/network/sent_packets_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Uptime</td>
<td>Second</td>
<td>compute.googleapis.com/instance/uptime</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Uptime Total</td>
<td>Second</td>
<td>compute.googleapis.com/instance/uptime_total</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Dropped packets</td>
<td>Count</td>
<td>compute.googleapis.com/mirroring/dropped_packets_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Mirrored bytes</td>
<td>Byte</td>
<td>compute.googleapis.com/mirroring/mirrored_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Mirrored packets</td>
<td>Count</td>
<td>compute.googleapis.com/mirroring/mirrored_packets_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Allocated ports</td>
<td>Unspecified</td>
<td>compute.googleapis.com/nat/allocated_ports</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Closed connections count</td>
<td>Unspecified</td>
<td>compute.googleapis.com/nat/closed_connections_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Received packets dropped count</td>
<td>Unspecified</td>
<td>compute.googleapis.com/nat/dropped_received_packets_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Sent packets dropped count</td>
<td>Unspecified</td>
<td>compute.googleapis.com/nat/dropped_sent_packets_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>New connections count</td>
<td>Unspecified</td>
<td>compute.googleapis.com/nat/new_connections_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Open connections</td>
<td>Unspecified</td>
<td>compute.googleapis.com/nat/open_connections</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Port usage</td>
<td>Unspecified</td>
<td>compute.googleapis.com/nat/port_usage</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Received bytes count</td>
<td>Byte</td>
<td>compute.googleapis.com/nat/received_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Received packets count</td>
<td>Unspecified</td>
<td>compute.googleapis.com/nat/received_packets_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Sent bytes count</td>
<td>Byte</td>
<td>compute.googleapis.com/nat/sent_bytes_count</td>
</tr>
<tr>
<td>gce_instance/default_metrics</td>
<td>Sent packets count</td>
<td>Unspecified</td>
<td>compute.googleapis.com/nat/sent_packets_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Monitoring Agent API Request Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/api_request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Logging Agent Log Entry Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/log_entry_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Logging Agent Retried Log Entry Writes Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/log_entry_retry_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Monitoring Agent Memory Usage</td>
<td>Byte</td>
<td>agent.googleapis.com/agent/memory_usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Monitoring Agent Metric Point Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/monitoring/point_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Logging Agent API Request Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Monitoring Agent Process Labels Size</td>
<td>Byte</td>
<td>agent.googleapis.com/agent/streamspace_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Monitoring Agent is Throttling Processes</td>
<td>Count</td>
<td>agent.googleapis.com/agent/streamspace_size_throttling</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Monitoring/Logging Agent Uptime</td>
<td>Second</td>
<td>agent.googleapis.com/agent/uptime</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Open connections</td>
<td>Count</td>
<td>agent.googleapis.com/apache/connections</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Idle workers</td>
<td>Count</td>
<td>agent.googleapis.com/apache/idle_workers</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Requests</td>
<td>Count</td>
<td>agent.googleapis.com/apache/request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Scoreboard</td>
<td>Count</td>
<td>agent.googleapis.com/apache/scoreboard</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Traffic</td>
<td>Byte</td>
<td>agent.googleapis.com/apache/traffic</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Hit count</td>
<td>Count</td>
<td>agent.googleapis.com/cassandra/cache/hits</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Read latency</td>
<td>MicroSecond</td>
<td>agent.googleapis.com/cassandra/client_request/latency/50p</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Read latency</td>
<td>MicroSecond</td>
<td>agent.googleapis.com/cassandra/client_request/latency/95p</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Read latency</td>
<td>MicroSecond</td>
<td>agent.googleapis.com/cassandra/client_request/latency/99p</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Read latency</td>
<td>MicroSecond</td>
<td>agent.googleapis.com/cassandra/client_request/latency/max</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Compression ratio</td>
<td>Count</td>
<td>agent.googleapis.com/cassandra/column_family/compression_ratio</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Max row size</td>
<td>Byte</td>
<td>agent.googleapis.com/cassandra/column_family/max_row_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Commit log size</td>
<td>Byte</td>
<td>agent.googleapis.com/cassandra/commitlog_total_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Completed tasks</td>
<td>Count</td>
<td>agent.googleapis.com/cassandra/completed_tasks</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Tasks</td>
<td>Count</td>
<td>agent.googleapis.com/cassandra/current_tasks</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Dropped messages</td>
<td>Count</td>
<td>agent.googleapis.com/cassandra/dropped_message/dropped_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Exceptions</td>
<td>Count</td>
<td>agent.googleapis.com/cassandra/storage_service_exception_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Storage load</td>
<td>Byte</td>
<td>agent.googleapis.com/cassandra/storage_service_load</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Request latency</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/couchdb/average_request_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Bulk requests</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/httpd/bulk_request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Requests</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/httpd/request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Request methods</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/httpd/request_method_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Response codes</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/httpd/response_code_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Temp view reads</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/httpd/temporary_view_read_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>View reads</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/httpd/view_read_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Open databases</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/open_databases</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Open files</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/open_files</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Reads</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/read_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Writes</td>
<td>Count</td>
<td>agent.googleapis.com/couchdb/write_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>CPU load (15m)</td>
<td>Count</td>
<td>agent.googleapis.com/cpu/load_15m</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>CPU load (1m)</td>
<td>Count</td>
<td>agent.googleapis.com/cpu/load_1m</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>CPU load (5m)</td>
<td>Count</td>
<td>agent.googleapis.com/cpu/load_5m</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>CPU usage</td>
<td>Second</td>
<td>agent.googleapis.com/cpu/usage_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>CPU utilization</td>
<td>Percent</td>
<td>agent.googleapis.com/cpu/utilization</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk usage</td>
<td>Byte</td>
<td>agent.googleapis.com/disk/bytes_used</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk I/O time</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/disk/io_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk merged operations</td>
<td>Count</td>
<td>agent.googleapis.com/disk/merged_operations</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk operations</td>
<td>Count</td>
<td>agent.googleapis.com/disk/operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk operation time</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/disk/operation_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk pending operations</td>
<td>Count</td>
<td>agent.googleapis.com/disk/pending_operations</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk utilization</td>
<td>Percent</td>
<td>agent.googleapis.com/disk/percent_used</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk bytes read</td>
<td>Byte</td>
<td>agent.googleapis.com/disk/read_bytes_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk weighted I/O time</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/disk/weighted_io_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Disk bytes written</td>
<td>Byte</td>
<td>agent.googleapis.com/disk/write_bytes_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Cache size</td>
<td>Byte</td>
<td>agent.googleapis.com/elasticsearch/cache_memory_usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Field evictions</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/field_eviction_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Filter evictions</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/filter_cache_eviction_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>GC count</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/gc_collection_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memory usage</td>
<td>Byte</td>
<td>agent.googleapis.com/elasticsearch/memory_usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Network traffic</td>
<td>Byte</td>
<td>agent.googleapis.com/elasticsearch/network</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Documents</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/num_current_documents</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Data nodes</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/num_data_nodes</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Open connections</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/num_http_connections</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Nodes</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/num_nodes</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Open files</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/num_open_files</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Open connections</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/num_server_connections</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Shards</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/num_shards</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Completed operations</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Operation time</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/elasticsearch/operation_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Max threads</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/peak_threads</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Storage size</td>
<td>Byte</td>
<td>agent.googleapis.com/elasticsearch/storage_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Threads</td>
<td>Count</td>
<td>agent.googleapis.com/elasticsearch/threads</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>IPC connections</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/ipc/connections</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>IPC queue size</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/ipc/queue_length</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>IPC traffic</td>
<td>Byte</td>
<td>agent.googleapis.com/hbase/ipc/traffic_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Load</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/master/average_load</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Dead region servers</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/master/dead_region_servers</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Live region servers</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/master/live_region_servers</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Block cache accesses</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/block_cache/access_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Evicted block count</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/block_cache/evicted_blocks_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Block cache hit ratio</td>
<td>Percent</td>
<td>agent.googleapis.com/hbase/regionserver/block_cache/hit_ratio_percent</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Block cache size</td>
<td>Byte</td>
<td>agent.googleapis.com/hbase/regionserver/block_cache/memory</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Block count</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/block_cache/num_items</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Call queue size</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/call_queue/length</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Compaction queue size</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/compaction_queue/length</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Flush queue size</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/flush_queue/length</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Heap usage</td>
<td>Byte</td>
<td>agent.googleapis.com/hbase/regionserver/memory/heap_usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memstore files</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/memstore/files</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memstore index size</td>
<td>Byte</td>
<td>agent.googleapis.com/hbase/regionserver/memstore/index_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memstore open stores</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/memstore/open_stores</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memstore size</td>
<td>Byte</td>
<td>agent.googleapis.com/hbase/regionserver/memstore/size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Online regions</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/online_regions</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Request count</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>RPC request rate</td>
<td>PerSecond</td>
<td>agent.googleapis.com/hbase/regionserver/requests/total_rate</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Slow operations</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/regionserver/slow_operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Thrift average batch latency</td>
<td>NanoSecond</td>
<td>agent.googleapis.com/hbase/thrift/batch_latency/average</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Thrift average call latency</td>
<td>NanoSecond</td>
<td>agent.googleapis.com/hbase/thrift/call_latency/average</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Thrift call queue size</td>
<td>Count</td>
<td>agent.googleapis.com/hbase/thrift/call_queue/length</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Thrift average slow call latency</td>
<td>NanoSecond</td>
<td>agent.googleapis.com/hbase/thrift/slow_call_latency/average</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Thrift average time in queue</td>
<td>NanoSecond</td>
<td>agent.googleapis.com/hbase/thrift/time_in_queue/average</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>IIS open connections</td>
<td>Count</td>
<td>agent.googleapis.com/iis/current_connections</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>IIS transferred bytes</td>
<td>Byte</td>
<td>agent.googleapis.com/iis/network/transferred_bytes_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>IIS connections</td>
<td>Count</td>
<td>agent.googleapis.com/iis/new_connection_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>IIS requests</td>
<td>Count</td>
<td>agent.googleapis.com/iis/request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Network errors</td>
<td>Count</td>
<td>agent.googleapis.com/interface/errors</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Network packets</td>
<td>Count</td>
<td>agent.googleapis.com/interface/packets</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Network traffic</td>
<td>Byte</td>
<td>agent.googleapis.com/interface/traffic</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>GC count</td>
<td>Count</td>
<td>agent.googleapis.com/jvm/gc/count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>GC time</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/jvm/gc/time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memory usage</td>
<td>Byte</td>
<td>agent.googleapis.com/jvm/memory/usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>CPU time</td>
<td>NanoSecond</td>
<td>agent.googleapis.com/jvm/os/cpu_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Open files</td>
<td>Count</td>
<td>agent.googleapis.com/jvm/os/open_files</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Daemon threads</td>
<td>Count</td>
<td>agent.googleapis.com/jvm/thread/num_daemon</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Threads</td>
<td>Count</td>
<td>agent.googleapis.com/jvm/thread/num_live</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Max threads</td>
<td>Count</td>
<td>agent.googleapis.com/jvm/thread/peak</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Uptime</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/jvm/uptime</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Failed requests</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/broker/topics/failed_request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Incoming messages</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/broker/topics/incoming_message_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Traffic</td>
<td>Byte</td>
<td>agent.googleapis.com/kafka/broker/topics/traffic</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Active controllers</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/controller/kafka/active</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Offline partitions</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/controller/kafka/offline_partitions</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Leader elections</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/controller/leader_elections/election_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Stale leader elections</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/controller/leader_elections/unclean_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Flushes</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/log/flush_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Requests</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/network/request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Delayed purgatory requests</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/purgatory/num_delayed_requests</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Purgatory requests</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/purgatory/size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Maximum lag</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/replica_fetcher/max_lag</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Minimum fetch rate</td>
<td>PerSecond</td>
<td>agent.googleapis.com/kafka/replica_fetcher/min_fetch_rate</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Gaining replicas</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/replica_manager/isr/expand_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Lagging replicas</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/replica_manager/isr/shrink_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Leaders</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/replica_manager/leaders</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Partitions</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/replica_manager/partitions</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Unreliable partitions</td>
<td>Count</td>
<td>agent.googleapis.com/kafka/replica_manager/under_replicated_partitions</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Commands</td>
<td>Count</td>
<td>agent.googleapis.com/memcached/command_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Connections</td>
<td>Count</td>
<td>agent.googleapis.com/memcached/current_connections</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Items</td>
<td>Count</td>
<td>agent.googleapis.com/memcached/current_items</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Evictions</td>
<td>Count</td>
<td>agent.googleapis.com/memcached/eviction_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memory usage</td>
<td>Byte</td>
<td>agent.googleapis.com/memcached/memory</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Traffic</td>
<td>Byte</td>
<td>agent.googleapis.com/memcached/network</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Operations</td>
<td>Count</td>
<td>agent.googleapis.com/memcached/operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Hit ratio</td>
<td>Percent</td>
<td>agent.googleapis.com/memcached/operation_hitratio</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>CPU time</td>
<td>Second</td>
<td>agent.googleapis.com/memcached/rusage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Threads</td>
<td>Count</td>
<td>agent.googleapis.com/memcached/threads</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memory usage</td>
<td>Byte</td>
<td>agent.googleapis.com/memory/bytes_used</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memory utilization</td>
<td>Percent</td>
<td>agent.googleapis.com/memory/percent_used</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Cache hits</td>
<td>Count</td>
<td>agent.googleapis.com/mongodb/cache/hits</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Cache misses</td>
<td>Count</td>
<td>agent.googleapis.com/mongodb/cache/misses</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Collections</td>
<td>Count</td>
<td>agent.googleapis.com/mongodb/collections</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Connections</td>
<td>Count</td>
<td>agent.googleapis.com/mongodb/connections</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Data size</td>
<td>Byte</td>
<td>agent.googleapis.com/mongodb/data_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Extents</td>
<td>Count</td>
<td>agent.googleapis.com/mongodb/extents</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Global lock time</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/mongodb/global_lock_hold_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Index size</td>
<td>Byte</td>
<td>agent.googleapis.com/mongodb/index_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Indexes</td>
<td>Count</td>
<td>agent.googleapis.com/mongodb/indexes</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memory usage</td>
<td>MebiByte</td>
<td>agent.googleapis.com/mongodb/memory_usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Objects</td>
<td>Count</td>
<td>agent.googleapis.com/mongodb/objects</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Operations</td>
<td>Count</td>
<td>agent.googleapis.com/mongodb/operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Storage size</td>
<td>Byte</td>
<td>agent.googleapis.com/mongodb/storage_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>SQL Server open connections</td>
<td>Count</td>
<td>agent.googleapis.com/mssql/connections/user</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>SQL Server transaction rate</td>
<td>PerSecond</td>
<td>agent.googleapis.com/mssql/transaction_rate</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>SQL Server write transaction rate</td>
<td>PerSecond</td>
<td>agent.googleapis.com/mssql/write_transaction_rate</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Buffer pool pages</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/buffer_pool/num_pages</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Buffer pool operations</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/buffer_pool/operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Buffer pool size</td>
<td>Byte</td>
<td>agent.googleapis.com/mysql/buffer_pool_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Commands</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/command_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Handlers</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/handler_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>InnoDB doublewrite buffers</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/innodb/doublewrite_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>InnoDB log operations</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/innodb/log_operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>InnoDB operations</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/innodb/operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>InnoDB page operations</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/innodb/page_operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>InnoDB locks</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/innodb/row_lock_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>InnoDB row operations</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/innodb/row_operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Locks</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/lock_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>QCache operations</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/qcache/operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>QCache queries</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/qcache/query_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Replica lag</td>
<td>Second</td>
<td>agent.googleapis.com/mysql/slave_replication_lag</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Sorts</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/sort_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Threads</td>
<td>Count</td>
<td>agent.googleapis.com/mysql/thread_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>TCP connections</td>
<td>Count</td>
<td>agent.googleapis.com/network/tcp_connections</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Accepted connections</td>
<td>Count</td>
<td>agent.googleapis.com/nginx/connections/accepted_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Active connections</td>
<td>Count</td>
<td>agent.googleapis.com/nginx/connections/current</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Handled connections</td>
<td>Count</td>
<td>agent.googleapis.com/nginx/connections/handled_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Requests</td>
<td>Count</td>
<td>agent.googleapis.com/nginx/request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Pagefile utilization</td>
<td>Percent</td>
<td>agent.googleapis.com/pagefile/percent_used</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Blocks read</td>
<td>Count</td>
<td>agent.googleapis.com/postgresql/blocks_read_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Commits</td>
<td>Count</td>
<td>agent.googleapis.com/postgresql/commit_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>DB size</td>
<td>Byte</td>
<td>agent.googleapis.com/postgresql/db_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Backends</td>
<td>Count</td>
<td>agent.googleapis.com/postgresql/num_backends</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>DB rows</td>
<td>Count</td>
<td>agent.googleapis.com/postgresql/num_tuples</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Operations</td>
<td>Count</td>
<td>agent.googleapis.com/postgresql/operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Rollbacks</td>
<td>Count</td>
<td>agent.googleapis.com/postgresql/rollback_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Processes</td>
<td>Count</td>
<td>agent.googleapis.com/processes/count_by_state</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Process CPU</td>
<td>Second</td>
<td>agent.googleapis.com/processes/cpu_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Process disk read I/O</td>
<td>Byte</td>
<td>agent.googleapis.com/processes/disk/read_bytes_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Process disk write I/O</td>
<td>Byte</td>
<td>agent.googleapis.com/processes/disk/write_bytes_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Fork count</td>
<td>Count</td>
<td>agent.googleapis.com/processes/fork_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Process resident memory</td>
<td>Byte</td>
<td>agent.googleapis.com/processes/rss_usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Process virtual memory</td>
<td>Byte</td>
<td>agent.googleapis.com/processes/vm_usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Consumers</td>
<td>Count</td>
<td>agent.googleapis.com/rabbitmq/consumers</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Delivery rate</td>
<td>PerSecond</td>
<td>agent.googleapis.com/rabbitmq/delivery_rate</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Messages</td>
<td>Count</td>
<td>agent.googleapis.com/rabbitmq/num_messages</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Publish rate</td>
<td>PerSecond</td>
<td>agent.googleapis.com/rabbitmq/publish_rate</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Unsaved changes</td>
<td>Count</td>
<td>agent.googleapis.com/redis/changes_since_last_save</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Blocked clients</td>
<td>Count</td>
<td>agent.googleapis.com/redis/clients/blocked</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Connected clients</td>
<td>Count</td>
<td>agent.googleapis.com/redis/clients/connected</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Commands</td>
<td>Count</td>
<td>agent.googleapis.com/redis/commands_processed</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Slave connections</td>
<td>Count</td>
<td>agent.googleapis.com/redis/connections/slaves</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Connections</td>
<td>Count</td>
<td>agent.googleapis.com/redis/connections/total</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Expired keys</td>
<td>Count</td>
<td>agent.googleapis.com/redis/expired_keys</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memory usage</td>
<td>Byte</td>
<td>agent.googleapis.com/redis/memory/usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Lua memory usage</td>
<td>Byte</td>
<td>agent.googleapis.com/redis/memory/usage_lua</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>PubSub channels</td>
<td>Count</td>
<td>agent.googleapis.com/redis/pubsub/channels</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>PubSub patterns</td>
<td>Count</td>
<td>agent.googleapis.com/redis/pubsub/patterns</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Uptime</td>
<td>Second</td>
<td>agent.googleapis.com/redis/uptime</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>95% latency (1m)</td>
<td>MicroSecond</td>
<td>agent.googleapis.com/riak/latency/95th_percentile</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Average latency (1m)</td>
<td>MicroSecond</td>
<td>agent.googleapis.com/riak/latency/average</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Maximum latency (1m)</td>
<td>MicroSecond</td>
<td>agent.googleapis.com/riak/latency/maximum</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Memory usage</td>
<td>Byte</td>
<td>agent.googleapis.com/riak/memory_usage</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>95% siblings (1m)</td>
<td>Count</td>
<td>agent.googleapis.com/riak/num_siblings/95th_percentile</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Average siblings (1m)</td>
<td>Count</td>
<td>agent.googleapis.com/riak/num_siblings/average</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Maximum siblings (1m)</td>
<td>Count</td>
<td>agent.googleapis.com/riak/num_siblings/maximum</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>95% object size (1m)</td>
<td>Byte</td>
<td>agent.googleapis.com/riak/object_size/95th_percentile</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Average object size (1m)</td>
<td>Byte</td>
<td>agent.googleapis.com/riak/object_size/average</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Maximum object size (1m)</td>
<td>Byte</td>
<td>agent.googleapis.com/riak/object_size/maximum</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Operations</td>
<td>Count</td>
<td>agent.googleapis.com/riak/operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Swap usage</td>
<td>Byte</td>
<td>agent.googleapis.com/swap/bytes_used</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Swap I/O operations</td>
<td>Count</td>
<td>agent.googleapis.com/swap/io</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Swap utilization</td>
<td>Percent</td>
<td>agent.googleapis.com/swap/percent_used</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Sessions</td>
<td>Count</td>
<td>agent.googleapis.com/tomcat/manager/sessions</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Errors</td>
<td>Count</td>
<td>agent.googleapis.com/tomcat/request_processor/error_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Processing time</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/tomcat/request_processor/processing_time</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Requests</td>
<td>Count</td>
<td>agent.googleapis.com/tomcat/request_processor/request_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Traffic</td>
<td>Byte</td>
<td>agent.googleapis.com/tomcat/request_processor/traffic_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Busy threads</td>
<td>Count</td>
<td>agent.googleapis.com/tomcat/threads/busy</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Current threads</td>
<td>Count</td>
<td>agent.googleapis.com/tomcat/threads/current</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Backend connection successes</td>
<td>Count</td>
<td>agent.googleapis.com/varnish/backend_connection_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Cache operations</td>
<td>Count</td>
<td>agent.googleapis.com/varnish/cache_operation_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Client connections</td>
<td>Count</td>
<td>agent.googleapis.com/varnish/client_connection_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Open connections</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/connections_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Data size</td>
<td>Byte</td>
<td>agent.googleapis.com/zookeeper/data_size</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Followers</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/followers/count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Synced followers</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/followers/synced_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Packets received</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/network/received_packets_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Packets sent</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/network/sent_packets_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Nodes</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/nodes/count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Ephemeral nodes</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/nodes/ephemeral_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Watches</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/nodes/watches_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Average request latency</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/zookeeper/requests/latency/average</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Maximum request latency</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/zookeeper/requests/latency/maximum</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Minimum request latency</td>
<td>MilliSecond</td>
<td>agent.googleapis.com/zookeeper/requests/latency/minimum</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Outstanding requests</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/requests/outstanding_count</td>
</tr>
<tr>
<td>gce_instance/agent</td>
<td>Pending syncs</td>
<td>Count</td>
<td>agent.googleapis.com/zookeeper/sync_operations/pending_count</td>
</tr>
<tr>
<td>gce_instance/firewallinsights</td>
<td>VM Firewall Hit Counts</td>
<td>Count</td>
<td>firewallinsights.googleapis.com/vm/firewall_hit_count</td>
</tr>
<tr>
<td>gce_instance/firewallinsights</td>
<td>VM Firewall Last Used Timestamp</td>
<td>Count</td>
<td>firewallinsights.googleapis.com/vm/firewall_last_used_timestamp</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Client Connection Close Count</td>
<td>Byte</td>
<td>istio.io/service/client/connection_close_count</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Client Connection Open Count</td>
<td>Byte</td>
<td>istio.io/service/client/connection_open_count</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Client Received Bytes Count</td>
<td>Byte</td>
<td>istio.io/service/client/received_bytes_count</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Client Request Bytes</td>
<td>Byte</td>
<td>istio.io/service/client/request_bytes</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Client Request Count</td>
<td>Count</td>
<td>istio.io/service/client/request_count</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Client Response Bytes</td>
<td>Byte</td>
<td>istio.io/service/client/response_bytes</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Client Roundtrip Latencies</td>
<td>MilliSecond</td>
<td>istio.io/service/client/roundtrip_latencies</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Client Sent Bytes Count</td>
<td>Byte</td>
<td>istio.io/service/client/sent_bytes_count</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Server Connection Close Count</td>
<td>Byte</td>
<td>istio.io/service/server/connection_close_count</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Server Connection Open Count</td>
<td>Byte</td>
<td>istio.io/service/server/connection_open_count</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Server Received Bytes Count</td>
<td>Byte</td>
<td>istio.io/service/server/received_bytes_count</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Server Request Bytes</td>
<td>Byte</td>
<td>istio.io/service/server/request_bytes</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Server Request Count</td>
<td>Count</td>
<td>istio.io/service/server/request_count</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Server Response Bytes</td>
<td>Byte</td>
<td>istio.io/service/server/response_bytes</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Server Response Latencies</td>
<td>MilliSecond</td>
<td>istio.io/service/server/response_latencies</td>
</tr>
<tr>
<td>gce_instance/istio</td>
<td>Server Sent Bytes Count</td>
<td>Byte</td>
<td>istio.io/service/server/sent_bytes_count</td>
</tr>
<tr>
<td>gce_instance_vm_flow/default_metrics</td>
<td>Egress bytes</td>
<td>Byte</td>
<td>networking.googleapis.com/vm_flow/egress_bytes_count</td>
</tr>
<tr>
<td>gce_instance_vm_flow/default_metrics</td>
<td>Ingress bytes</td>
<td>Byte</td>
<td>networking.googleapis.com/vm_flow/ingress_bytes_count</td>
</tr>
<tr>
<td>gce_instance_vm_flow/default_metrics</td>
<td>RTT latencies</td>
<td>MilliSecond</td>
<td>networking.googleapis.com/vm_flow/rtt</td>
</tr>
<tr>
<td>instance_group/default_metrics</td>
<td>Instance group size</td>
<td>Count</td>
<td>compute.googleapis.com/instance_group/size</td>
</tr>
<tr>
<td>autoscaler/default_metrics</td>
<td>Serving capacity</td>
<td>Count</td>
<td>autoscaler.googleapis.com/capacity</td>
</tr>
<tr>
<td>autoscaler/default_metrics</td>
<td>Current Autoscaler utilization</td>
<td>Count</td>
<td>autoscaler.googleapis.com/current_utilization</td>
</tr>
<tr>
<td>tpu_worker/default_metrics</td>
<td>Container CPU utilization</td>
<td>Percent</td>
<td>tpu.googleapis.com/container/cpu/utilization</td>
</tr>
<tr>
<td>tpu_worker/default_metrics</td>
<td>Container memory usage</td>
<td>Byte</td>
<td>tpu.googleapis.com/container/memory/usage</td>
</tr>
<tr>
<td>tpu_worker/default_metrics</td>
<td>CPU utilization</td>
<td>Percent</td>
<td>tpu.googleapis.com/cpu/utilization</td>
</tr>
<tr>
<td>tpu_worker/default_metrics</td>
<td>Memory usage</td>
<td>Byte</td>
<td>tpu.googleapis.com/memory/usage</td>
</tr>
<tr>
<td>tpu_worker/default_metrics</td>
<td>Network bytes received</td>
<td>Byte</td>
<td>tpu.googleapis.com/network/received_bytes_count</td>
</tr>
<tr>
<td>tpu_worker/default_metrics</td>
<td>Network bytes sent</td>
<td>Byte</td>
<td>tpu.googleapis.com/network/sent_bytes_count</td>
</tr>
<tr>
<td>tpu_worker/default_metrics</td>
<td>MXU utilization</td>
<td>Percent</td>
<td>tpu.googleapis.com/tpu/mxu/utilization</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_48">Related topics<a class="headerlink" href="#related-topics_48" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-google-compute-enginemd">Source: google-compute-engine.md<a class="headerlink" href="#source-google-compute-enginemd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Monitor Google Compute Engine
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/google-compute-engine
scraped: 2026-02-17T04:48:56.365872</p>
<hr />
<h1 id="monitor-google-compute-engine">Monitor Google Compute Engine<a class="headerlink" href="#monitor-google-compute-engine" title="Permanent link">&para;</a></h1>
<h1 id="monitor-google-compute-engine_1">Monitor Google Compute Engine<a class="headerlink" href="#monitor-google-compute-engine_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Oct 03, 2018</li>
</ul>
<h2 id="deploy-oneagent">Deploy OneAgent<a class="headerlink" href="#deploy-oneagent" title="Permanent link">&para;</a></h2>
<p>Monitoring Google Compute Engine instances works out-of-the-box by just running the regular <a href="/docs/ingest-from/dynatrace-oneagent/installation-and-operation/linux/installation/install-oneagent-on-linux" title="Learn how to download and install Dynatrace OneAgent on Linux.">Linux</a> and <a href="/docs/ingest-from/dynatrace-oneagent/installation-and-operation/windows/installation/install-oneagent-on-windows" title="Learn how to download and install Dynatrace OneAgent on Windows.">Windows</a> OneAgent installers. You√¢¬Ä¬ôll get full-stack visibility, from hosts to processes and services layer.</p>
<h2 id="update-oneagent_2">Update OneAgent<a class="headerlink" href="#update-oneagent_2" title="Permanent link">&para;</a></h2>
<p>You can update OneAgent by running regular <a href="/docs/ingest-from/dynatrace-oneagent/installation-and-operation/linux/operation/update-oneagent-on-linux" title="Learn about the different ways to update OneAgent on Linux.">Linux</a> and <a href="/docs/ingest-from/dynatrace-oneagent/installation-and-operation/windows/operation/update-oneagent-on-windows" title="Learn about the different ways to update Dynatrace OneAgent on Windows.">Windows</a> OneAgent update.</p>
<h2 id="related-topics_49">Related topics<a class="headerlink" href="#related-topics_49" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="/docs/ingest-from/technology-support/oneagent-platform-and-capability-support-matrix" title="Learn which capabilities are supported by OneAgent on different operating systems and platforms.">OneAgent platform and capability support matrix</a></li>
</ul>
<hr />
<h2 id="source-google-kubernetes-engine-monitoringmd">Source: google-kubernetes-engine-monitoring.md<a class="headerlink" href="#source-google-kubernetes-engine-monitoringmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Kubernetes Engine monitoring
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/google-gke/google-kubernetes-engine-monitoring
scraped: 2026-02-16T21:25:19.214195</p>
<hr />
<h1 id="google-kubernetes-engine-monitoring">Google Kubernetes Engine monitoring<a class="headerlink" href="#google-kubernetes-engine-monitoring" title="Permanent link">&para;</a></h1>
<h1 id="google-kubernetes-engine-monitoring_1">Google Kubernetes Engine monitoring<a class="headerlink" href="#google-kubernetes-engine-monitoring_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>7-min read</li>
<li>Published Jan 17, 2022</li>
</ul>
<p>Dynatrace Google Cloud integration leverages data collected from the Google Operation API to constantly monitor health and performance of Google Cloud Services. While combining all relevant data into dashboards, it also enables alerting and event tracking.</p>
<h2 id="prerequisites_48">Prerequisites<a class="headerlink" href="#prerequisites_48" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Set up integration</a></p>
<h2 id="add-services-and-feature-sets-optional_34">Add services and feature sets Optional<a class="headerlink" href="#add-services-and-feature-sets-optional_34" title="Permanent link">&para;</a></h2>
<p>After integration, Dynatrace automatically monitors a number of preset Google Cloud services and feature sets (metrics). Besides these, you can add more services or feature sets to monitoring. For details, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide/deploy-k8#manage" title="Set up log and metric monitoring for GCP services on a new GKE Autopilot cluster.">Add or remove services</a>.</p>
<p>For a list of feature sets available for this service, see <a href="#table">Metric table</a>.</p>
<h2 id="view-metrics_35">View metrics<a class="headerlink" href="#view-metrics_35" title="Permanent link">&para;</a></h2>
<p>After deploying the integration, you can see metrics from monitored services in the <a href="/docs/analyze-explore-automate/dashboards-classic/metrics-browser" title="Browse metrics with the Dynatrace metrics browser.">Metrics browser</a>, <a href="/docs/analyze-explore-automate/explorer" title="Query for metrics and transform results to gain desired insights.">Data Explorer</a>, and your dashboard tiles.</p>
<h2 id="metric-table_34">Metric table<a class="headerlink" href="#metric-table_34" title="Permanent link">&para;</a></h2>
<p>The following feature sets are available for Google Kubernetes Engine.</p>
<table>
<thead>
<tr>
<th>Feature set</th>
<th>Name</th>
<th>Unit</th>
<th>GCP metric identifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>k8s_cluster/default_metrics</td>
<td>Log entries</td>
<td>Count</td>
<td>logging.googleapis.com/log_entry_count</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Allocatable cores</td>
<td>Unspecified</td>
<td>kubernetes.io/node/cpu/allocatable_cores</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>CPU allocatable utilization</td>
<td>Count</td>
<td>kubernetes.io/node/cpu/allocatable_utilization</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>CPU usage time</td>
<td>Second</td>
<td>kubernetes.io/node/cpu/core_usage_time</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Total cores</td>
<td>Unspecified</td>
<td>kubernetes.io/node/cpu/total_cores</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Allocatable ephemeral storage</td>
<td>Byte</td>
<td>kubernetes.io/node/ephemeral_storage/allocatable_bytes</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Free inodes</td>
<td>Count</td>
<td>kubernetes.io/node/ephemeral_storage/inodes_free</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Total inodes</td>
<td>Count</td>
<td>kubernetes.io/node/ephemeral_storage/inodes_total</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Total ephemeral storage</td>
<td>Byte</td>
<td>kubernetes.io/node/ephemeral_storage/total_bytes</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Ephemeral storage usage</td>
<td>Byte</td>
<td>kubernetes.io/node/ephemeral_storage/used_bytes</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Allocatable memory</td>
<td>Byte</td>
<td>kubernetes.io/node/memory/allocatable_bytes</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Memory allocatable utilization</td>
<td>Count</td>
<td>kubernetes.io/node/memory/allocatable_utilization</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Total memory</td>
<td>Byte</td>
<td>kubernetes.io/node/memory/total_bytes</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Memory usage</td>
<td>Byte</td>
<td>kubernetes.io/node/memory/used_bytes</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Bytes received</td>
<td>Byte</td>
<td>kubernetes.io/node/network/received_bytes_count</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Bytes transmitted</td>
<td>Byte</td>
<td>kubernetes.io/node/network/sent_bytes_count</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>PID capacity</td>
<td>Count</td>
<td>kubernetes.io/node/pid_limit</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>PID usage</td>
<td>Count</td>
<td>kubernetes.io/node/pid_used</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>CPU usage time</td>
<td>Second</td>
<td>kubernetes.io/node_daemon/cpu/core_usage_time</td>
</tr>
<tr>
<td>k8s_node/default_metrics</td>
<td>Memory usage</td>
<td>Byte</td>
<td>kubernetes.io/node_daemon/memory/used_bytes</td>
</tr>
<tr>
<td>k8s_pod/default_metrics</td>
<td>Bytes received</td>
<td>Byte</td>
<td>kubernetes.io/pod/network/received_bytes_count</td>
</tr>
<tr>
<td>k8s_pod/default_metrics</td>
<td>Bytes transmitted</td>
<td>Byte</td>
<td>kubernetes.io/pod/network/sent_bytes_count</td>
</tr>
<tr>
<td>k8s_pod/default_metrics</td>
<td>Volume capacity</td>
<td>Byte</td>
<td>kubernetes.io/pod/volume/total_bytes</td>
</tr>
<tr>
<td>k8s_pod/default_metrics</td>
<td>Volume usage</td>
<td>Byte</td>
<td>kubernetes.io/pod/volume/used_bytes</td>
</tr>
<tr>
<td>k8s_pod/default_metrics</td>
<td>Volume utilization</td>
<td>Count</td>
<td>kubernetes.io/pod/volume/utilization</td>
</tr>
<tr>
<td>k8s_pod/istio</td>
<td>Client Connection Close Count</td>
<td>Byte</td>
<td>istio.io/service/client/connection_close_count</td>
</tr>
<tr>
<td>k8s_pod/istio</td>
<td>Client Connection Open Count</td>
<td>Byte</td>
<td>istio.io/service/client/connection_open_count</td>
</tr>
<tr>
<td>k8s_pod/istio</td>
<td>Client Received Bytes Count</td>
<td>Byte</td>
<td>istio.io/service/client/received_bytes_count</td>
</tr>
<tr>
<td>k8s_pod/istio</td>
<td>Client Request Bytes</td>
<td>Byte</td>
<td>istio.io/service/client/request_bytes</td>
</tr>
<tr>
<td>k8s_pod/istio</td>
<td>Client Request Count</td>
<td>Count</td>
<td>istio.io/service/client/request_count</td>
</tr>
<tr>
<td>k8s_pod/istio</td>
<td>Client Response Bytes</td>
<td>Byte</td>
<td>istio.io/service/client/response_bytes</td>
</tr>
<tr>
<td>k8s_pod/istio</td>
<td>Client Roundtrip Latencies</td>
<td>MilliSecond</td>
<td>istio.io/service/client/roundtrip_latencies</td>
</tr>
<tr>
<td>k8s_pod/istio</td>
<td>Client Sent Bytes Count</td>
<td>Byte</td>
<td>istio.io/service/client/sent_bytes_count</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>CPU usage time</td>
<td>Second</td>
<td>kubernetes.io/container/cpu/core_usage_time</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Limit cores</td>
<td>Unspecified</td>
<td>kubernetes.io/container/cpu/limit_cores</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>CPU limit utilization</td>
<td>Count</td>
<td>kubernetes.io/container/cpu/limit_utilization</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Request cores</td>
<td>Unspecified</td>
<td>kubernetes.io/container/cpu/request_cores</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>CPU request utilization</td>
<td>Count</td>
<td>kubernetes.io/container/cpu/request_utilization</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Ephemeral storage limit</td>
<td>Byte</td>
<td>kubernetes.io/container/ephemeral_storage/limit_bytes</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Ephemeral storage request</td>
<td>Byte</td>
<td>kubernetes.io/container/ephemeral_storage/request_bytes</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Ephemeral storage usage</td>
<td>Byte</td>
<td>kubernetes.io/container/ephemeral_storage/used_bytes</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Memory limit</td>
<td>Byte</td>
<td>kubernetes.io/container/memory/limit_bytes</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Memory limit utilization</td>
<td>Count</td>
<td>kubernetes.io/container/memory/limit_utilization</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Page faults</td>
<td>Count</td>
<td>kubernetes.io/container/memory/page_fault_count</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Memory request</td>
<td>Byte</td>
<td>kubernetes.io/container/memory/request_bytes</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Memory request utilization</td>
<td>Count</td>
<td>kubernetes.io/container/memory/request_utilization</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Memory usage</td>
<td>Byte</td>
<td>kubernetes.io/container/memory/used_bytes</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Restart count</td>
<td>Count</td>
<td>kubernetes.io/container/restart_count</td>
</tr>
<tr>
<td>k8s_container/default_metrics</td>
<td>Uptime</td>
<td>Second</td>
<td>kubernetes.io/container/uptime</td>
</tr>
<tr>
<td>k8s_container/agent</td>
<td>Monitoring Agent API Request Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/api_request_count</td>
</tr>
<tr>
<td>k8s_container/agent</td>
<td>Logging Agent Log Entry Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/log_entry_count</td>
</tr>
<tr>
<td>k8s_container/agent</td>
<td>Logging Agent Retried Log Entry Writes Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/log_entry_retry_count</td>
</tr>
<tr>
<td>k8s_container/agent</td>
<td>Monitoring Agent Memory Usage</td>
<td>Byte</td>
<td>agent.googleapis.com/agent/memory_usage</td>
</tr>
<tr>
<td>k8s_container/agent</td>
<td>Monitoring Agent Metric Point Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/monitoring/point_count</td>
</tr>
<tr>
<td>k8s_container/agent</td>
<td>Logging Agent API Request Count</td>
<td>Count</td>
<td>agent.googleapis.com/agent/request_count</td>
</tr>
<tr>
<td>k8s_container/agent</td>
<td>Monitoring Agent Process Labels Size</td>
<td>Byte</td>
<td>agent.googleapis.com/agent/streamspace_size</td>
</tr>
<tr>
<td>k8s_container/agent</td>
<td>Monitoring Agent is Throttling Processes</td>
<td>Count</td>
<td>agent.googleapis.com/agent/streamspace_size_throttling</td>
</tr>
<tr>
<td>k8s_container/agent</td>
<td>Monitoring/Logging Agent Uptime</td>
<td>Second</td>
<td>agent.googleapis.com/agent/uptime</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra client request latency</td>
<td>Count</td>
<td>apigee.googleapis.com/cassandra/clientrequest_latency</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra pending compaction tasks</td>
<td>Count</td>
<td>apigee.googleapis.com/cassandra/compaction_pendingtasks</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra bytes committed per area</td>
<td>Byte</td>
<td>apigee.googleapis.com/cassandra/jvm_memory_bytes_committed</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra initial memory bytes</td>
<td>Byte</td>
<td>apigee.googleapis.com/cassandra/jvm_memory_bytes_init</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra max bytes of memory</td>
<td>Byte</td>
<td>apigee.googleapis.com/cassandra/jvm_memory_bytes_max</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra used JVM memory bytes</td>
<td>Byte</td>
<td>apigee.googleapis.com/cassandra/jvm_memory_bytes_used</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra bytes committed per memory pool</td>
<td>Byte</td>
<td>apigee.googleapis.com/cassandra/jvm_memory_pool_bytes_committed</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra initial bytes of JVM memory pool</td>
<td>Byte</td>
<td>apigee.googleapis.com/cassandra/jvm_memory_pool_bytes_init</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra JVM memory pool bytes max</td>
<td>Byte</td>
<td>apigee.googleapis.com/cassandra/jvm_memory_pool_bytes_max</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra bytes per memory pool</td>
<td>Byte</td>
<td>apigee.googleapis.com/cassandra/jvm_memory_pool_bytes_used</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra user and system CPU in seconds</td>
<td>Second</td>
<td>apigee.googleapis.com/cassandra/process_cpu_seconds_total</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra process max file descriptors</td>
<td>Count</td>
<td>apigee.googleapis.com/cassandra/process_max_fds</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee Cassandra process open file descriptors</td>
<td>Count</td>
<td>apigee.googleapis.com/cassandra/process_open_fds</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee server fault count</td>
<td>Count</td>
<td>apigee.googleapis.com/server/fault_count</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee server latencies</td>
<td>MilliSecond</td>
<td>apigee.googleapis.com/server/latencies</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee server nio</td>
<td>Count</td>
<td>apigee.googleapis.com/server/nio</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee server thread count</td>
<td>Count</td>
<td>apigee.googleapis.com/server/num_threads</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee server request count</td>
<td>Count</td>
<td>apigee.googleapis.com/server/request_count</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee server response count</td>
<td>Count</td>
<td>apigee.googleapis.com/server/response_count</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA disk used bytes</td>
<td>Byte</td>
<td>apigee.googleapis.com/udca/disk/used_bytes</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA server local file count</td>
<td>Count</td>
<td>apigee.googleapis.com/udca/server/local_file_count</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA server timestamp difference between current time and latest file</td>
<td>Second</td>
<td>apigee.googleapis.com/udca/server/local_file_latest_ts</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA server timestamp difference between current time and oldest file</td>
<td>Second</td>
<td>apigee.googleapis.com/udca/server/local_file_oldest_ts</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA pruned file count</td>
<td>Count</td>
<td>apigee.googleapis.com/udca/server/pruned_file_count</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA outstanding number of entries in retry cache</td>
<td>Count</td>
<td>apigee.googleapis.com/udca/server/retry_cache_size</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA server total latencies</td>
<td>Second</td>
<td>apigee.googleapis.com/udca/server/total_latencies</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA server upload latencies</td>
<td>Second</td>
<td>apigee.googleapis.com/udca/server/upload_latencies</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA server HTTP error count</td>
<td>Count</td>
<td>apigee.googleapis.com/udca/upstream/http_error_count</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA server HTTP latencies</td>
<td>Second</td>
<td>apigee.googleapis.com/udca/upstream/http_latencies</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA uploaded file count</td>
<td>Count</td>
<td>apigee.googleapis.com/udca/upstream/uploaded_file_count</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee UDCA uploaded file size distribution</td>
<td>Byte</td>
<td>apigee.googleapis.com/udca/upstream/uploaded_file_sizes</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee upstream latencies</td>
<td>MilliSecond</td>
<td>apigee.googleapis.com/upstream/latencies</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee upstream request count</td>
<td>Count</td>
<td>apigee.googleapis.com/upstream/request_count</td>
</tr>
<tr>
<td>k8s_container/apigee</td>
<td>Apigee upstream response count</td>
<td>Count</td>
<td>apigee.googleapis.com/upstream/response_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Config Convergence Latencies</td>
<td>MilliSecond</td>
<td>istio.io/control/config_convergence_latencies</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Config Event Count</td>
<td>Count</td>
<td>istio.io/control/config_event_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Config Push Count</td>
<td>Count</td>
<td>istio.io/control/config_push_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Config Validation Count</td>
<td>Count</td>
<td>istio.io/control/config_validation_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Proxy Clients</td>
<td>Count</td>
<td>istio.io/control/proxy_clients</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Rejected Config Count</td>
<td>Count</td>
<td>istio.io/control/rejected_config_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Sidecar Injection Count</td>
<td>Count</td>
<td>istio.io/control/sidecar_injection_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Server Connection Close Count</td>
<td>Byte</td>
<td>istio.io/service/server/connection_close_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Server Connection Open Count</td>
<td>Byte</td>
<td>istio.io/service/server/connection_open_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Server Received Bytes Count</td>
<td>Byte</td>
<td>istio.io/service/server/received_bytes_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Server Request Bytes</td>
<td>Byte</td>
<td>istio.io/service/server/request_bytes</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Server Request Count</td>
<td>Count</td>
<td>istio.io/service/server/request_count</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Server Response Bytes</td>
<td>Byte</td>
<td>istio.io/service/server/response_bytes</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Server Response Latencies</td>
<td>MilliSecond</td>
<td>istio.io/service/server/response_latencies</td>
</tr>
<tr>
<td>k8s_container/istio</td>
<td>Server Sent Bytes Count</td>
<td>Byte</td>
<td>istio.io/service/server/sent_bytes_count</td>
</tr>
<tr>
<td>k8s_container/nginx</td>
<td>Nginx connections_accepted</td>
<td>Unspecified</td>
<td>kubernetes.io/nginx/connections_accepted</td>
</tr>
<tr>
<td>k8s_container/nginx</td>
<td>Nginx connections_active</td>
<td>Unspecified</td>
<td>kubernetes.io/nginx/connections_active</td>
</tr>
<tr>
<td>k8s_container/nginx</td>
<td>Nginx connections_handled</td>
<td>Unspecified</td>
<td>kubernetes.io/nginx/connections_handled</td>
</tr>
<tr>
<td>k8s_container/nginx</td>
<td>Nginx connections_reading</td>
<td>Unspecified</td>
<td>kubernetes.io/nginx/connections_reading</td>
</tr>
<tr>
<td>k8s_container/nginx</td>
<td>Nginx connections_waiting</td>
<td>Unspecified</td>
<td>kubernetes.io/nginx/connections_waiting</td>
</tr>
<tr>
<td>k8s_container/nginx</td>
<td>Nginx connections_writing</td>
<td>Unspecified</td>
<td>kubernetes.io/nginx/connections_writing</td>
</tr>
<tr>
<td>k8s_container/nginx</td>
<td>Nginx http_requests_total</td>
<td>Unspecified</td>
<td>kubernetes.io/nginx/http_requests_total</td>
</tr>
<tr>
<td>k8s_container/nginx</td>
<td>Nginx nginxexporter_build_info</td>
<td>Count</td>
<td>kubernetes.io/nginx/nginxexporter_build_info</td>
</tr>
<tr>
<td>k8s_container/nginx</td>
<td>Nginx up</td>
<td>Count</td>
<td>kubernetes.io/nginx/up</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_50">Related topics<a class="headerlink" href="#related-topics_50" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />
<h2 id="source-google-gkemd">Source: google-gke.md<a class="headerlink" href="#source-google-gkemd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Monitor Google Kubernetes Engine (GKE)
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations/google-gke
scraped: 2026-02-17T04:48:59.072065</p>
<hr />
<h1 id="monitor-google-kubernetes-engine-gke">Monitor Google Kubernetes Engine (GKE)<a class="headerlink" href="#monitor-google-kubernetes-engine-gke" title="Permanent link">&para;</a></h1>
<h1 id="monitor-google-kubernetes-engine-gke_1">Monitor Google Kubernetes Engine (GKE)<a class="headerlink" href="#monitor-google-kubernetes-engine-gke_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>1-min read</li>
<li>Published Sep 26, 2018</li>
</ul>
<p>Dynatrace OneAgent provides extensive monitoring of Google Kubernetes Engine pods, nodes, and clusters. The OneAgent deployment process is consistent with other distributions.</p>
<h2 id="integration_1">Integration<a class="headerlink" href="#integration_1" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/setup-on-k8s" title="Ways to deploy and configure Dynatrace on Kubernetes">Kubernetes</a></p>
<p>Refer to the <a href="https://www.dynatrace.com/news/blog/60-seconds-to-self-upgrading-observability-on-google-kubernetes-engine/">Google Marketplace√Ø¬ª¬ø</a> for the OneAgent integration with Google Console.</p>
<h2 id="related-topics_51">Related topics<a class="headerlink" href="#related-topics_51" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
</ul>
<hr />
<h2 id="source-gcp-integrationsmd">Source: gcp-integrations.md<a class="headerlink" href="#source-gcp-integrationsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud integrations
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/gcp-integrations
scraped: 2026-02-17T04:51:50.084654</p>
<hr />
<h1 id="google-cloud-integrations">Google Cloud integrations<a class="headerlink" href="#google-cloud-integrations" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-integrations_1">Google Cloud integrations<a class="headerlink" href="#google-cloud-integrations_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>1-min read</li>
<li>Published Aug 12, 2021</li>
</ul>
<p>Dynatrace OneAgent provides full-stack monitoring on Google Compute Engine and Google Kubernetes Engine, but also monitoring on container and application level. Dynatrace supports Google App Engine with the application-only approach.</p>
<h2 id="integrations">Integrations<a class="headerlink" href="#integrations" title="Permanent link">&para;</a></h2>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-gke" title="Google GKE">Monitor Google Kubernetes Engine (GKE)</a></p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions" title="Set up monitoring for Google Cloud Functions.">Google Cloud Functions monitoring</a></p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/cloudrun" title="Monitor Java application deployed on Google Cloud Run managed.">Monitor Google Cloud Run managed</a></p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-app-engine" title="Install OneAgent on Google App Engine clusters for application-only monitoring.">Monitor Google App Engine</a></p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/google-compute-engine" title="Install OneAgent on Google Compute Engine.">Monitor Google Compute Engine</a></p>
<p><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-guide" title="Other options to set up log and/or metric monitoring for Google Cloud services">End-to-end guide for monitoring Google Cloud services integrating Operations Suite</a></p>
<h2 id="related-topics_52">Related topics<a class="headerlink" href="#related-topics_52" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform" title="Monitor Google Cloud with Dynatrace.">Set up Dynatrace on Google Cloud</a></li>
<li><a href="https://www.dynatrace.com/technologies/google-cloud-monitoring/">Google Cloud monitoring√Ø¬ª¬ø</a></li>
</ul>
<hr />
<h2 id="source-gcp-supported-service-metrics-legacymd">Source: gcp-supported-service-metrics-legacy.md<a class="headerlink" href="#source-gcp-supported-service-metrics-legacymd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Google Cloud supported service metrics (legacy)
source: https://www.dynatrace.com/docs/ingest-from/google-cloud-platform/legacy/gcp-supported-service-metrics-legacy
scraped: 2026-02-17T05:03:07.528693</p>
<hr />
<h1 id="google-cloud-supported-service-metrics-legacy">Google Cloud supported service metrics (legacy)<a class="headerlink" href="#google-cloud-supported-service-metrics-legacy" title="Permanent link">&para;</a></h1>
<h1 id="google-cloud-supported-service-metrics-legacy_1">Google Cloud supported service metrics (legacy)<a class="headerlink" href="#google-cloud-supported-service-metrics-legacy_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>7-min read</li>
<li>Published Apr 12, 2021</li>
<li>Deprecated</li>
</ul>
<p>This page refers to the GCP supported service metrics for version 0.1 of the GCP integration, which is scheduled for deprecation.
For a list of supported services and their metrics for version 1.0 of the GCP integration, see <a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-supported-service-metrics-new" title="Monitor Google Cloud services with Dynatrace and view available metrics.">Google Cloud service metrics (new)</a>.</p>
<p>Dynatrace supports all metrics available in the Google Operations API.</p>
<h2 id="prerequisites_49">Prerequisites<a class="headerlink" href="#prerequisites_49" title="Permanent link">&para;</a></h2>
<p>Deploy Dynatrace integration <a href="/docs/ingest-from/google-cloud-platform/legacy/deploy-with-google-cloud-function-legacy" title="Set up monitoring for Google Cloud services using a Google Cloud Function.">as a GCP function</a> or <a href="/docs/ingest-from/google-cloud-platform/legacy/deployment-k8s-container-legacy" title="Set up log and metric monitoring for GCP services in a Kubernetes container.">in a Kubernetes container</a>.</p>
<h2 id="supported-services">Supported services<a class="headerlink" href="#supported-services" title="Permanent link">&para;</a></h2>
<p>After deploying the Dynatrace integration, you can start monitoring the GCP supported services. The table below shows available metrics configurations<a href="#fn-1-1-def">1</a> per service, including <a href="/docs/license/monitoring-consumption-classic/davis-data-units" title="Understand how Dynatrace monitoring consumption is calculated based on Davis data units (DDU).">Davis data units (DDUs)</a> consumption<a href="#fn-1-2-def">2</a> per instance per minute.</p>
<p>1</p>
<p><strong>Metrics configuration</strong> refers to groups of metrics that can be ingested. Use the <strong>Configuration ID</strong> when adjusting the monitoring scope of your setup.</p>
<p>2</p>
<p><strong>DDU consumption</strong> is an estimation that may vary depending on characteristics of your environment. We recommend that you check your weekly DDU consumptions for more accurate budgeting.</p>
<table>
<thead>
<tr>
<th>Service name</th>
<th>Preset dashboard</th>
<th>Configuration name</th>
<th>Configuration ID</th>
<th>DDUs per minute per instance</th>
</tr>
</thead>
<tbody>
<tr>
<td>Google Cloud Function</td>
<td>Applicable</td>
<td></td>
<td>cloud_function/default</td>
<td>0.073 DDU</td>
</tr>
<tr>
<td>Cloud SQL</td>
<td>Applicable</td>
<td>Database</td>
<td>cloudsql_database/default</td>
<td>0.066 DDU</td>
</tr>
<tr>
<td>Google Cloud APIs</td>
<td>Applicable</td>
<td></td>
<td>api/default</td>
<td>0.086 DDU</td>
</tr>
<tr>
<td>Google Cloud Pub/Sub</td>
<td>Applicable</td>
<td>Snapshot</td>
<td>pubsub_snapshot/default</td>
<td>0.021 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Subscription</td>
<td>pubsub_subscription/default</td>
<td>0.166 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Topic</td>
<td>pubsub_topic/default</td>
<td>0.049 DDU</td>
</tr>
<tr>
<td>Google Pub/Sub Lite</td>
<td></td>
<td>Subscription Partition</td>
<td>pubsublite_subscription_partition/default</td>
<td>0.006 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Topic Partition</td>
<td>pubsublite_topic_partition/default</td>
<td>0.013 DDU</td>
</tr>
<tr>
<td>Cloud Load Balancing</td>
<td>Applicable</td>
<td>Google Internal HTTP/S Load Balancing Rule</td>
<td>internal_http_lb_rule/default</td>
<td>0.405 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Internal TCP Load Balancer Rule</td>
<td>internal_tcp_lb_rule/default</td>
<td>0.135 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Internal UDP Load Balancer Rule</td>
<td>internal_udp_lb_rule/default</td>
<td>0.108 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Cloud Network UDP Load Balancer Rule</td>
<td>udp_lb_rule/default</td>
<td>0.036 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Cloud HTTP/S Load Balancing Rule</td>
<td>https_lb_rule/default</td>
<td>3.897 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Cloud Network TCP Load Balancer Rule</td>
<td>tcp_lb_rule/default</td>
<td>0.045 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Cloud TCP/SSL Proxy Rule</td>
<td>tcp_ssl_proxy_rule/default</td>
<td>0.054 DDU</td>
</tr>
<tr>
<td>Google Kubernetes Engine</td>
<td>Applicable</td>
<td>Container Agent</td>
<td>k8s_container/agent</td>
<td>0.021 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Container Apigee</td>
<td>k8s_container/apigee</td>
<td>0.268 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Container NGINX</td>
<td>k8s_container/nginx</td>
<td>0.017 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Container</td>
<td>k8s_container/default</td>
<td>0.024 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Container</td>
<td>gke_container/default</td>
<td>0.109 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Cluster</td>
<td>k8s_cluster/default</td>
<td>0.009 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Node</td>
<td>k8s_node/default</td>
<td>0.039 DDU</td>
</tr>
<tr>
<td>Google Cloud Datastore</td>
<td>Applicable</td>
<td></td>
<td>datastore_request/default</td>
<td>0.025 DDU</td>
</tr>
<tr>
<td>Google Filestore</td>
<td>Applicable</td>
<td>Instance</td>
<td>filestore_instance/default</td>
<td>0.048 DDU</td>
</tr>
<tr>
<td>Google Cloud Storage</td>
<td>Applicable</td>
<td>bucket</td>
<td>gcs_bucket/default</td>
<td>0.185 DDU</td>
</tr>
<tr>
<td>Google VM Instance</td>
<td></td>
<td></td>
<td>gce_instance/appenginee</td>
<td>0.108 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Instance</td>
<td>gce_instance/default</td>
<td>2.828 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Agent</td>
<td>gce_instance/agent</td>
<td>2.794 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Firewall Insights</td>
<td>gce_instance/firewallinsights</td>
<td>0.18 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Cloud Router</td>
<td>gce_router/default</td>
<td>0.032 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Zone Network Health</td>
<td>gce_zone_network_health/default</td>
<td>0.243 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Uptime Checks</td>
<td>gce_instance/uptime_check</td>
<td>2.187 DDU</td>
</tr>
<tr>
<td>Google Cloud Spanner</td>
<td></td>
<td>Instance</td>
<td>spanner_instance/default</td>
<td>0.223 DDU</td>
</tr>
<tr>
<td>Google Cloud BigQuery</td>
<td></td>
<td>BI Engine Model</td>
<td>bigquery_biengine_model/default</td>
<td>0.055 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Dataset</td>
<td>bigquery_dataset/default</td>
<td>0.147 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Project</td>
<td>bigquery_project/default</td>
<td>0.085 DDU</td>
</tr>
<tr>
<td>Google Interconnect</td>
<td></td>
<td>Default</td>
<td>interconnect/default</td>
<td>0.03 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Attachment</td>
<td>interconnect_attachment/default</td>
<td>0.005 DDU</td>
</tr>
<tr>
<td>Google Cloud Memorystore</td>
<td></td>
<td>Instance</td>
<td>redis_instance/default</td>
<td>0.169 DDU</td>
</tr>
<tr>
<td>Google Apigee</td>
<td></td>
<td>Proxy (v2)</td>
<td>apigee.googleapis.com/ProxyV2/default</td>
<td>0.246 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Environment</td>
<td>apigee.googleapis.com/Environment/default</td>
<td>0.027 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Proxy</td>
<td>apigee.googleapis.com/Proxy/default</td>
<td>0.207 DDU</td>
</tr>
<tr>
<td>Google Consumer Quota</td>
<td></td>
<td></td>
<td>consumer_quota/default</td>
<td>0.021 DDU</td>
</tr>
<tr>
<td>Google Cloud NAT Gateway</td>
<td></td>
<td></td>
<td>nat_gateway/default</td>
<td>0.04 DDU</td>
</tr>
<tr>
<td>Google Transfer Service Agent</td>
<td></td>
<td></td>
<td>transfer_service_agent/default</td>
<td>0.002 DDU</td>
</tr>
<tr>
<td>Google Cloud DNS Query</td>
<td></td>
<td></td>
<td>dns_query/default</td>
<td>0.003 DDU</td>
</tr>
<tr>
<td>Google Cloud Run for Anthos Trigger</td>
<td></td>
<td></td>
<td>knative_trigger/default</td>
<td>0.57 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Cloud Run for Anthos Broker</td>
<td>knative_broker/default</td>
<td>0.27 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Google Cloud Run for Anthos Revision</td>
<td>knative_revision/default</td>
<td>0.547 DDU</td>
</tr>
<tr>
<td>Google Instance Group</td>
<td></td>
<td></td>
<td>instance_group/default</td>
<td>0.001 DDU</td>
</tr>
<tr>
<td>Google App Engine</td>
<td></td>
<td>Application - Uptime Checks</td>
<td>gae_app_uptime_check/default</td>
<td>2.916 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Application</td>
<td>gae_app/default</td>
<td>0.101 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Instance</td>
<td>gae_instance/default</td>
<td>0.005 DDU</td>
</tr>
<tr>
<td>Google Compute Engine Autoscaler</td>
<td></td>
<td>Google Autoscaler</td>
<td>autoscaler/default</td>
<td>0.006 DDU</td>
</tr>
<tr>
<td>Google Dataflow</td>
<td></td>
<td>Job</td>
<td>dataflow_job/default</td>
<td>3.397 DDU</td>
</tr>
<tr>
<td>Google Network Security Policy</td>
<td></td>
<td></td>
<td>network_security_policy/default</td>
<td>0.018 DDU</td>
</tr>
<tr>
<td>Google Cloud Logging</td>
<td></td>
<td>export sink</td>
<td>logging_sink/default</td>
<td>0.003 DDU</td>
</tr>
<tr>
<td>Google VPC Access Connector</td>
<td></td>
<td></td>
<td>vpc_access_connector/default</td>
<td>0.004 DDU</td>
</tr>
<tr>
<td>Google Cloud ML</td>
<td></td>
<td>Job</td>
<td>cloudml_job/default</td>
<td>0.162 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Model Version</td>
<td>cloudml_model_version/default</td>
<td>0.038 DDU</td>
</tr>
<tr>
<td>Google Cloud Bigtable</td>
<td></td>
<td>Cluster</td>
<td>bigtable_cluster/default</td>
<td>0.018 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Table</td>
<td>bigtable_table/default</td>
<td>0.111 DDU</td>
</tr>
<tr>
<td>Google Cloud Amazon EC2 Instance (via GCP)</td>
<td></td>
<td></td>
<td>cloud_tasks_queue/default</td>
<td>0.014 DDU</td>
</tr>
<tr>
<td>Google Cloud Composer</td>
<td></td>
<td>Environment</td>
<td>cloud_composer_environment/default</td>
<td>0.129 DDU</td>
</tr>
<tr>
<td>Google Cloud Data Loss Prevention</td>
<td></td>
<td>Project</td>
<td>cloud_dlp_project/default</td>
<td>0.019 DDU</td>
</tr>
<tr>
<td>Google Cloud Dataproc</td>
<td></td>
<td>Cluster</td>
<td>cloud_dataproc_cluster/default</td>
<td>0.081 DDU</td>
</tr>
<tr>
<td>Google Cloud Run Revision</td>
<td></td>
<td></td>
<td>cloud_run_revision/default</td>
<td>0.059 DDU</td>
</tr>
<tr>
<td>Google Cloud Trace</td>
<td></td>
<td></td>
<td>cloudtrace.googleapis.com/CloudtraceProject/default</td>
<td>0.003 DDU</td>
</tr>
<tr>
<td>Google Cloud TPU</td>
<td></td>
<td>Worker</td>
<td>tpu_worker/default</td>
<td>0.013 DDU</td>
</tr>
<tr>
<td>Google reCAPTCHA</td>
<td></td>
<td>Key</td>
<td>recaptchaenterprise.googleapis.com/Key/default</td>
<td>0.003 DDU</td>
</tr>
<tr>
<td>Google Firestore</td>
<td></td>
<td>Instance</td>
<td>firestore_instance/default</td>
<td>0.324 DDU</td>
</tr>
<tr>
<td>Google NetApp CVS-SO</td>
<td></td>
<td></td>
<td>cloudvolumesgcp-api.netapp.com/NetAppCloudVolumeSO/default</td>
<td>0.013 DDU</td>
</tr>
<tr>
<td>Google NetApp Cloud Volume</td>
<td></td>
<td></td>
<td>netapp_cloud_volume/default</td>
<td>0.032 DDU</td>
</tr>
<tr>
<td>Google Assistant Smart Home</td>
<td></td>
<td>Google Assistant Action Project</td>
<td>assistant_action_project/default</td>
<td>0.567 DDU</td>
</tr>
<tr>
<td>Google Firebase Hosting</td>
<td></td>
<td>Google Firebase Realtime Database</td>
<td>firebase_namespace/default</td>
<td>0.104 DDU</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Site Domain</td>
<td>firebase_domain/default</td>
<td>1.921 DDU</td>
</tr>
<tr>
<td>Google Cloud IoT Registry</td>
<td></td>
<td></td>
<td>cloudiot_device_registry/default</td>
<td>0.026 DDU</td>
</tr>
<tr>
<td>Google Consumed API</td>
<td></td>
<td></td>
<td>consumed_api/default</td>
<td>0.084 DDU</td>
</tr>
<tr>
<td>Google Cloud Microsoft Active Directory Domain</td>
<td></td>
<td></td>
<td>microsoft_ad_domain/default</td>
<td>0.028 DDU</td>
</tr>
<tr>
<td>Google IAM Service Account</td>
<td></td>
<td></td>
<td>iam_service_account/default</td>
<td>0.04 DDU</td>
</tr>
<tr>
<td>Google Producer Quota</td>
<td></td>
<td></td>
<td>producer_quota/default</td>
<td>0.012 DDU</td>
</tr>
<tr>
<td>Google Uptime Check URL</td>
<td></td>
<td></td>
<td>uptime_url/default</td>
<td>2.916 DDU</td>
</tr>
<tr>
<td>Google Cloud VPN Tunnel</td>
<td></td>
<td></td>
<td>vpn_gatewayv/</td>
<td>0.09 DDU</td>
</tr>
</tbody>
</table>
<h2 id="view-gcp-service-metrics">View GCP service metrics<a class="headerlink" href="#view-gcp-service-metrics" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides preset dashboards for a number of GCP services. You can see which GCP services have preset dashboards in the list of GCP supported services above.<br />
After deploying the Dynatrace integration, you can view these preset dashboards in <img alt="Dashboards Classic" src="https://dt-cdn.net/images/dashboards-classic-512-15764940e8.png" title="Dashboards Classic" /> <strong>Dashboards Classic</strong>.</p>
<p><strong>Example preset dashboard:</strong></p>
<p><img alt="GCP dash" src="https://dt-cdn.net/images/gcp-api-dashboard-2744-cef7a39830.png" /></p>
<h2 id="related-topics_53">Related topics<a class="headerlink" href="#related-topics_53" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations" title="Set up and configure Dynatrace on Google Cloud.">Google Cloud integrations</a></li>
</ul>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  –ö –Ω–∞—á–∞–ª—É
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      ¬© 2026 Dynatrace Managed Docs
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Yerkebulan-Ardabayev" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "navigation.instant", "search.suggest", "search.highlight", "content.code.copy", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../assets/javascripts/groq-chat.js"></script>
      
    
  </body>
</html>