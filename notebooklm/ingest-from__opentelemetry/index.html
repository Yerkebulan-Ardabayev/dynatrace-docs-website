
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Dynatrace Managed —Å AI-–ø–æ–º–æ—â–Ω–∏–∫–æ–º">
      
      
        <meta name="author" content="Yerkebulan Ardabayev">
      
      
        <link rel="canonical" href="https://yerkebulan-ardabayev.github.io/dynatrace-docs-website/notebooklm/ingest-from__opentelemetry/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Dynatrace Documentation: ingest-from/opentelemetry - Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dynatrace-documentation-ingest-fromopentelemetry" class="md-skip">
          –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="–í–µ—Ä—Ö–Ω–∏–π –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª">
    <a href="../.." title="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" class="md-header__button md-logo" aria-label="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dynatrace Documentation: ingest-from/opentelemetry
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="–¢—ë–º–Ω–∞—è —Ç–µ–º–∞"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="–¢—ë–º–Ω–∞—è —Ç–µ–º–∞" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="–ü–æ–∏—Å–∫" placeholder="–ü–æ–∏—Å–∫" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="–ü–æ–∏—Å–∫">
        
        <button type="reset" class="md-search__icon md-icon" title="–û—á–∏—Å—Ç–∏—Ç—å" aria-label="–û—á–∏—Å—Ç–∏—Ç—å" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Yerkebulan-Ardabayev/dynatrace-docs-website" title="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    dynatrace-docs-website
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="–í–∫–ª–∞–¥–∫–∏" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  üè† –ì–ª–∞–≤–Ω–∞—è

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../managed/" class="md-tabs__link">
          
  
  
  üéØ Managed

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../common/" class="md-tabs__link">
          
  
  
  üìä –û–±—â–µ–µ

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../saas-reference/" class="md-tabs__link">
        
  
  
    
  
  üìñ SaaS

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../ai/groq/" class="md-tabs__link">
        
  
  
    
  
  ü§ñ AI

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" class="md-nav__button md-logo" aria-label="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>

    </a>
    Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Yerkebulan-Ardabayev/dynatrace-docs-website" title="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    dynatrace-docs-website
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üè† –ì–ª–∞–≤–Ω–∞—è
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üéØ Managed
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    üéØ Managed
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±–∑–æ—Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –£—Å—Ç–∞–Ω–æ–≤–∫–∞
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ù–∞—Å—Ç—Ä–æ–π–∫–∞
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±–Ω–æ–≤–ª–µ–Ω–∏—è
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ë—ç–∫–∞–ø
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/managed-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ö–ª–∞—Å—Ç–µ—Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –õ–∏—Ü–µ–Ω–∑–∏—è
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/dynatrace-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/observe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/ingest-from/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üìä –û–±—â–µ–µ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    üìä –û–±—â–µ–µ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±–∑–æ—Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../saas-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üìñ SaaS
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/groq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ü§ñ AI
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-configurationmd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source: configuration.md
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="dynatrace-documentation-ingest-fromopentelemetry">Dynatrace Documentation: ingest-from/opentelemetry<a class="headerlink" href="#dynatrace-documentation-ingest-fromopentelemetry" title="Permanent link">&para;</a></h1>
<p>Generated: 2026-02-16</p>
<p>Files combined: 40</p>
<hr />
<h2 id="source-configurationmd">Source: configuration.md<a class="headerlink" href="#source-configurationmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Collector Configuration
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/configuration
scraped: 2026-02-15T21:28:16.168727</p>
<hr />
<h1 id="collector-configuration">Collector Configuration<a class="headerlink" href="#collector-configuration" title="Permanent link">&para;</a></h1>
<h1 id="collector-configuration_1">Collector Configuration<a class="headerlink" href="#collector-configuration_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Updated on Dec 05, 2025</li>
</ul>
<p>To successfully configure your Collector instance, you need to configure each component (receiver, optional processor, and exporter) individually in the Collector YAML configuration file and enable them via additional pipeline objects.</p>
<p>Dynatrace Collector</p>
<p>As part of a Dynatrace Collector setup, note that you can only configure the components shipped with Dynatrace Collector.</p>
<p>Find a full list of all supported Collector components at <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a>.</p>
<h2 id="configuration-example">Configuration example<a class="headerlink" href="#configuration-example" title="Permanent link">&para;</a></h2>
<p>Here is an example YAML file for a very basic Collector configuration that can be used to export OpenTelemetry traces, metrics, and logs to Dynatrace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>receivers:
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>otlp:
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>protocols:
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>grpc:
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>http:
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>processors:
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>cumulativetodelta:
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>max_staleness: 25h
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>exporters:
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>otlp_http:
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>logs_endpoint: &quot;${env:DT_ENDPOINT}/v1/logs?structure=flattened&quot;
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>headers:
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a>
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a>service:
<a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a>
<a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a>
<a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a>pipelines:
<a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a>
<a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a>
<a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a>traces:
<a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a>
<a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a>receivers: [otlp]
<a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a>
<a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a>
<a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a>processors: []
<a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a>
<a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a>
<a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a>exporters: [otlp_http]
<a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a>
<a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a>
<a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a>metrics:
<a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a>
<a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a>receivers: [otlp]
<a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95" href="#__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96" href="#__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97" href="#__codelineno-0-97"></a>processors: [cumulativetodelta]
<a id="__codelineno-0-98" name="__codelineno-0-98" href="#__codelineno-0-98"></a>
<a id="__codelineno-0-99" name="__codelineno-0-99" href="#__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100" href="#__codelineno-0-100"></a>
<a id="__codelineno-0-101" name="__codelineno-0-101" href="#__codelineno-0-101"></a>exporters: [otlp_http]
<a id="__codelineno-0-102" name="__codelineno-0-102" href="#__codelineno-0-102"></a>
<a id="__codelineno-0-103" name="__codelineno-0-103" href="#__codelineno-0-103"></a>
<a id="__codelineno-0-104" name="__codelineno-0-104" href="#__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105" href="#__codelineno-0-105"></a>logs:
<a id="__codelineno-0-106" name="__codelineno-0-106" href="#__codelineno-0-106"></a>
<a id="__codelineno-0-107" name="__codelineno-0-107" href="#__codelineno-0-107"></a>
<a id="__codelineno-0-108" name="__codelineno-0-108" href="#__codelineno-0-108"></a>
<a id="__codelineno-0-109" name="__codelineno-0-109" href="#__codelineno-0-109"></a>receivers: [otlp]
<a id="__codelineno-0-110" name="__codelineno-0-110" href="#__codelineno-0-110"></a>
<a id="__codelineno-0-111" name="__codelineno-0-111" href="#__codelineno-0-111"></a>
<a id="__codelineno-0-112" name="__codelineno-0-112" href="#__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113" href="#__codelineno-0-113"></a>processors: []
<a id="__codelineno-0-114" name="__codelineno-0-114" href="#__codelineno-0-114"></a>
<a id="__codelineno-0-115" name="__codelineno-0-115" href="#__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116" href="#__codelineno-0-116"></a>
<a id="__codelineno-0-117" name="__codelineno-0-117" href="#__codelineno-0-117"></a>exporters: [otlp_http]
</code></pre></div>
<p>Cumulativetodelta processor recommendation</p>
<p>It is recommended to set the <code>max_staleness</code> parameter of the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor">cumulativetodelta processor√Ø¬ª¬ø</a> to a value higher than how often the collector receives metrics (e.g., how often metrics via OTLP are received, or how long the Prometheus scrape interval is). This ensures that no references to abandoned metric streams accumulate in memory over time.</p>
<p>In this YAML file, we configure the following components:</p>
<ul>
<li>An OTLP receiver (<code>otlp</code>) that can receive data via gRPC and HTTP.</li>
<li>A processor to convert any metrics with cumulative temporality to delta temporality (see <a href="#delta-metrics">Delta metrics</a> for more details).</li>
<li>
<p>An OTLP HTTP exporter (<code>otlp_http</code>) configured with:</p>
</li>
<li>
<p>The Dynatrace endpoint, see <a href="/docs/ingest-from/opentelemetry/otlp-api#base-url" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Base URLs</a>.</p>
</li>
<li>The logs endpoint configured to flatten structured logs, see &lt;#structured-logs&gt;.</li>
<li>An API token, see <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Authentication</a>.</li>
</ul>
<p>In the example configuration above, the Dynatrace token needs to have the <strong>Ingest OpenTelemetry traces</strong> (<code>openTelemetryTrace.ingest</code>), the <strong>Ingest metrics</strong> (<code>metrics.ingest</code>), and the <strong>Ingest logs</strong> (<code>logs.ingest</code>) permissions.</p>
<p>Within the service section, you define each component separately.</p>
<ul>
<li>Extensions can be enabled in their own section, while receivers, processors, and exporters are grouped under a pipeline section.</li>
<li>Pipelines can be of type traces, metrics, or logs.</li>
<li>Each receiver/processor/exporter can be used in more than one pipeline. For processors referenced in multiple pipelines, each pipeline gets a separate instance of the processors. This contrasts with receivers/exporters referenced in multiple pipelines, where only one instance of a receiver/exporter is used for all pipelines. Also, note that the order of processors dictates the order in which data is processed.</li>
<li>You can also define the same components more than once. For example, you can have two different receivers or even two or more distinct parts of the pipeline.</li>
<li>Even if a component is properly configured in its section, it will not be enabled unless it's also defined in the service section.</li>
</ul>
<h2 id="validate-the-configuration">Validate the configuration<a class="headerlink" href="#validate-the-configuration" title="Permanent link">&para;</a></h2>
<p>It is important to ensure the used Collector configuration is syntactically and semantically correct. For example, YAML uses spaces (not tabs) for indentation, to define the document hierarchy, and it is necessary to use the right level of indentation for each section and component. Collector provides the built-in <code>validate</code> command to verify the configuration and its components and services are properly configured.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>dynatrace-otel-collector validate --config=[PATH_TO_YOUR_CONFIGURATION_FILE]
</code></pre></div>
<p>If you run a container instance of the Collector, you can also use the following Docker command to run the validation directly from your container.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker run -v $(pwd):$(pwd) -w $(pwd) ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0 validate --config=[YOUR_CONFIGURATION_FILE]
</code></pre></div>
<h2 id="delta-metrics">Delta metrics<a class="headerlink" href="#delta-metrics" title="Permanent link">&para;</a></h2>
<p>Dynatrace requires metrics data to be <a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#aggregation-temporality" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">sent with delta temporality</a> and <strong>not</strong> cumulative temporality.</p>
<p>If your application doesn't allow you to configure delta temporality, you can use the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor"><code>cumulativetodelta</code> processor√Ø¬ª¬ø</a> to have your Collector instance adjust cumulative values to delta values. The <a href="#configuration-example">configuration example</a> above shows how to configure and reference the processor in your Collector configuration.</p>
<h2 id="chained-and-load-balanced-collectors">Chained and load-balanced Collectors<a class="headerlink" href="#chained-and-load-balanced-collectors" title="Permanent link">&para;</a></h2>
<p>When you use more than one Collector instance, it's important to maintain stable value propagation across all instances.</p>
<p>This is particularly important when you send OTLP requests across different Collector instances (for example, load balancing), as each Collector instance keeps track of its own delta offset, which may break the data reported to the Dynatrace backend.</p>
<p>In such scenarios, we recommend routing your OTLP requests through a single, outbound Collector instance that forwards the data to the Dynatrace backend and takes care of the delta conversion. The other Collector instances should use a cumulative aggregation, to ensure stable and consistent value propagation.</p>
<h2 id="configure-structured-logs-processing">Configure structured logs processing<a class="headerlink" href="#configure-structured-logs-processing" title="Permanent link">&para;</a></h2>
<p>When you export structured logs to Dynatrace, Dynatrace processes the log data in one of two ways.
It either:</p>
<ul>
<li>Keeps the original nested structure from your logs source ("raw").</li>
<li>Flattens it so all log attribute values are accessible via key paths ("flattened").</li>
</ul>
<p>To configure this behavior, use the <code>logs_endpoint</code> setting as shown in the <a href="#configuration-example">configuration example</a>, line 16.
Make sure to include the complete API endpoint path including <code>/v1/logs</code> (environment variables are allowed), followed by the desired behavior.</p>
<ul>
<li>To keep the original nested structure, use <code>structure=raw</code>.</li>
<li>To flatten the log data, use <code>structure=flattened</code>.</li>
</ul>
<p>If this configuration option is not specified, the default behavior depends on when your environment was created.</p>
<ul>
<li>For Dynatrace version 1.331+ and environments created after February 1, 2026: Raw.</li>
<li>For environments created before February 1, 2026: Flattened.</li>
</ul>
<hr />
<h2 id="source-deploymentmd">Source: deployment.md<a class="headerlink" href="#source-deploymentmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Deploy Dynatrace OTel Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/deployment
scraped: 2026-02-16T21:26:14.137029</p>
<hr />
<h1 id="deploy-dynatrace-otel-collector">Deploy Dynatrace OTel Collector<a class="headerlink" href="#deploy-dynatrace-otel-collector" title="Permanent link">&para;</a></h1>
<h1 id="deploy-dynatrace-otel-collector_1">Deploy Dynatrace OTel Collector<a class="headerlink" href="#deploy-dynatrace-otel-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>9-min read</li>
<li>Updated on Feb 12, 2024</li>
</ul>
<h2 id="deployment-modes">Deployment modes<a class="headerlink" href="#deployment-modes" title="Permanent link">&para;</a></h2>
<p>The Collector can be <a href="https://opentelemetry.io/docs/collector/quick-start/">deployed√Ø¬ª¬ø</a> as a standalone agent or gateway.</p>
<p>For illustrative purposes, the graphics below show the modes in a Kubernetes setup, but the same modes can also be used outside of Kubernetes.</p>
<p>Agent</p>
<p>Gateway</p>
<p>As an agent, the Collector is deployed either with the application or on the same host as the application. This Collector can receive telemetry data and enhance it with, for example, tags or infrastructure information.</p>
<p><img alt="OpenTelemetry collector as agent" src="https://dt-cdn.net/images/collector-agent-deployment-new-9322-7f44156cfc.jpg" /></p>
<p>As a gateway, one or more Collector instances can be deployed as standalone services. This Collector can be deployed additionally, for example, per cluster, region, or data center. A load balancer can help scale the independently operating Collector instances.</p>
<p><img alt="OpenTelemetry collector as gateway" src="https://dt-cdn.net/images/collector-gateway-deployment-new-2-9322-7087373547.jpg" /></p>
<p>It's also possible to combine these deployment modes and chain Collector instances. Consider this if you're deploying the Collector in large environments.</p>
<h2 id="deployment-options">Deployment Options<a class="headerlink" href="#deployment-options" title="Permanent link">&para;</a></h2>
<p>The Dynatrace Collector can be deployed for the following platforms:</p>
<ul>
<li><a href="#kubernetes">Kubernetes</a></li>
<li><a href="#docker">Docker</a></li>
<li><a href="#binary">Windows, macOS, and Linux</a></li>
<li><a href="#linux-installer-packages">Linux installer packages</a></li>
</ul>
<h3 id="kubernetes">Kubernetes<a class="headerlink" href="#kubernetes" title="Permanent link">&para;</a></h3>
<p>For Kubernetes, the Dynatrace Collector can be deployed in the following ways:</p>
<ul>
<li>OpenTelemetry Kubernetes Operator</li>
<li>Helm</li>
<li>Raw manifest</li>
</ul>
<h4 id="dynatrace-access-details">Dynatrace access details<a class="headerlink" href="#dynatrace-access-details" title="Permanent link">&para;</a></h4>
<p>Before you deploy the Collector, you need to set up the necessary Kubernetes secrets for the Dynatrace access details.</p>
<p>Use kubectl to create Kuberenetes secrets for the Dynatrace export details. Replace the placeholders (indicated by curly brackets) with the actual values for <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">the export URL and the API token</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>kubectl create secret generic dynatrace-otelcol-dt-api-credentials --from-literal=DT_ENDPOINT={ENDPOINT_URL_HERE} --from-literal=DT_API_TOKEN={API_TOKEN_HERE}
</code></pre></div>
<h4 id="kubernetes-deployment-variants">Kubernetes deployment variants<a class="headerlink" href="#kubernetes-deployment-variants" title="Permanent link">&para;</a></h4>
<p>The following sample configurations apply a resource limit of 512 megabytes. You may need to adjust this under <code>resources.limits.memory</code> for your particular use case.</p>
<p>OpenTelemetry Operator</p>
<p>Helm</p>
<p>Raw manifest</p>
<h4 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h4>
<p>If you haven't installed OpenTelemetry Operator yet, first make sure <a href="https://cert-manager.io/docs/installation/">cert-manager√Ø¬ª¬ø</a> is installed. Afterwards, you can deploy Operator with the following <code>kubectl</code> command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>kubectl apply -f https://github.com/open-telemetry/opentelemetry-operator/releases/download/v0.144.0/opentelemetry-operator.yaml
</code></pre></div>
<p>After the installation, deploy the Dynatrace Collector either in <a href="#deployment-modes">gateway or agent deployment mode</a>, with one of the following configuration samples. Save it as <code>crd-dynatrace-collector.yaml</code> and deploy it with <code>kubectl apply</code>.</p>
<p>Custom Resource Definition</p>
<p>The Kubernetes CRD of the Operator can be found on <a href="https://github.com/open-telemetry/opentelemetry-operator/blob/v0.144.0/docs/api.md#opentelemetrycollector-1">GitHub√Ø¬ª¬ø</a>.</p>
<p>Deploy as a gateway (Deployment)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>apiVersion: opentelemetry.io/v1beta1
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>kind: OpenTelemetryCollector
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>metadata:
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>name: dynatrace-otel
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>spec:
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>envFrom:
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>- secretRef:
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>env:
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>- name: MY_POD_IP
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>valueFrom:
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a>fieldRef:
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a>fieldPath: status.podIP
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a>mode: &quot;deployment&quot;
<a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a>
<a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a>
<a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a>
<a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a>image: &quot;ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0&quot;
<a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a>
<a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a>
<a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a>
<a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a>resources:
<a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a>
<a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a>
<a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a>
<a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a>limits:
<a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a>
<a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a>
<a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a>
<a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a>memory: 512Mi
<a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a>
<a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a>
<a id="__codelineno-5-72" name="__codelineno-5-72" href="#__codelineno-5-72"></a>
<a id="__codelineno-5-73" name="__codelineno-5-73" href="#__codelineno-5-73"></a>config:
<a id="__codelineno-5-74" name="__codelineno-5-74" href="#__codelineno-5-74"></a>
<a id="__codelineno-5-75" name="__codelineno-5-75" href="#__codelineno-5-75"></a>
<a id="__codelineno-5-76" name="__codelineno-5-76" href="#__codelineno-5-76"></a>
<a id="__codelineno-5-77" name="__codelineno-5-77" href="#__codelineno-5-77"></a>receivers:
<a id="__codelineno-5-78" name="__codelineno-5-78" href="#__codelineno-5-78"></a>
<a id="__codelineno-5-79" name="__codelineno-5-79" href="#__codelineno-5-79"></a>
<a id="__codelineno-5-80" name="__codelineno-5-80" href="#__codelineno-5-80"></a>
<a id="__codelineno-5-81" name="__codelineno-5-81" href="#__codelineno-5-81"></a>otlp:
<a id="__codelineno-5-82" name="__codelineno-5-82" href="#__codelineno-5-82"></a>
<a id="__codelineno-5-83" name="__codelineno-5-83" href="#__codelineno-5-83"></a>
<a id="__codelineno-5-84" name="__codelineno-5-84" href="#__codelineno-5-84"></a>
<a id="__codelineno-5-85" name="__codelineno-5-85" href="#__codelineno-5-85"></a>protocols:
<a id="__codelineno-5-86" name="__codelineno-5-86" href="#__codelineno-5-86"></a>
<a id="__codelineno-5-87" name="__codelineno-5-87" href="#__codelineno-5-87"></a>
<a id="__codelineno-5-88" name="__codelineno-5-88" href="#__codelineno-5-88"></a>
<a id="__codelineno-5-89" name="__codelineno-5-89" href="#__codelineno-5-89"></a>grpc:
<a id="__codelineno-5-90" name="__codelineno-5-90" href="#__codelineno-5-90"></a>
<a id="__codelineno-5-91" name="__codelineno-5-91" href="#__codelineno-5-91"></a>
<a id="__codelineno-5-92" name="__codelineno-5-92" href="#__codelineno-5-92"></a>
<a id="__codelineno-5-93" name="__codelineno-5-93" href="#__codelineno-5-93"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-5-94" name="__codelineno-5-94" href="#__codelineno-5-94"></a>
<a id="__codelineno-5-95" name="__codelineno-5-95" href="#__codelineno-5-95"></a>
<a id="__codelineno-5-96" name="__codelineno-5-96" href="#__codelineno-5-96"></a>
<a id="__codelineno-5-97" name="__codelineno-5-97" href="#__codelineno-5-97"></a>http:
<a id="__codelineno-5-98" name="__codelineno-5-98" href="#__codelineno-5-98"></a>
<a id="__codelineno-5-99" name="__codelineno-5-99" href="#__codelineno-5-99"></a>
<a id="__codelineno-5-100" name="__codelineno-5-100" href="#__codelineno-5-100"></a>
<a id="__codelineno-5-101" name="__codelineno-5-101" href="#__codelineno-5-101"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-5-102" name="__codelineno-5-102" href="#__codelineno-5-102"></a>
<a id="__codelineno-5-103" name="__codelineno-5-103" href="#__codelineno-5-103"></a>
<a id="__codelineno-5-104" name="__codelineno-5-104" href="#__codelineno-5-104"></a>
<a id="__codelineno-5-105" name="__codelineno-5-105" href="#__codelineno-5-105"></a>exporters:
<a id="__codelineno-5-106" name="__codelineno-5-106" href="#__codelineno-5-106"></a>
<a id="__codelineno-5-107" name="__codelineno-5-107" href="#__codelineno-5-107"></a>
<a id="__codelineno-5-108" name="__codelineno-5-108" href="#__codelineno-5-108"></a>
<a id="__codelineno-5-109" name="__codelineno-5-109" href="#__codelineno-5-109"></a>otlp_http:
<a id="__codelineno-5-110" name="__codelineno-5-110" href="#__codelineno-5-110"></a>
<a id="__codelineno-5-111" name="__codelineno-5-111" href="#__codelineno-5-111"></a>
<a id="__codelineno-5-112" name="__codelineno-5-112" href="#__codelineno-5-112"></a>
<a id="__codelineno-5-113" name="__codelineno-5-113" href="#__codelineno-5-113"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-5-114" name="__codelineno-5-114" href="#__codelineno-5-114"></a>
<a id="__codelineno-5-115" name="__codelineno-5-115" href="#__codelineno-5-115"></a>
<a id="__codelineno-5-116" name="__codelineno-5-116" href="#__codelineno-5-116"></a>
<a id="__codelineno-5-117" name="__codelineno-5-117" href="#__codelineno-5-117"></a>headers:
<a id="__codelineno-5-118" name="__codelineno-5-118" href="#__codelineno-5-118"></a>
<a id="__codelineno-5-119" name="__codelineno-5-119" href="#__codelineno-5-119"></a>
<a id="__codelineno-5-120" name="__codelineno-5-120" href="#__codelineno-5-120"></a>
<a id="__codelineno-5-121" name="__codelineno-5-121" href="#__codelineno-5-121"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-5-122" name="__codelineno-5-122" href="#__codelineno-5-122"></a>
<a id="__codelineno-5-123" name="__codelineno-5-123" href="#__codelineno-5-123"></a>
<a id="__codelineno-5-124" name="__codelineno-5-124" href="#__codelineno-5-124"></a>
<a id="__codelineno-5-125" name="__codelineno-5-125" href="#__codelineno-5-125"></a>service:
<a id="__codelineno-5-126" name="__codelineno-5-126" href="#__codelineno-5-126"></a>
<a id="__codelineno-5-127" name="__codelineno-5-127" href="#__codelineno-5-127"></a>
<a id="__codelineno-5-128" name="__codelineno-5-128" href="#__codelineno-5-128"></a>
<a id="__codelineno-5-129" name="__codelineno-5-129" href="#__codelineno-5-129"></a>pipelines:
<a id="__codelineno-5-130" name="__codelineno-5-130" href="#__codelineno-5-130"></a>
<a id="__codelineno-5-131" name="__codelineno-5-131" href="#__codelineno-5-131"></a>
<a id="__codelineno-5-132" name="__codelineno-5-132" href="#__codelineno-5-132"></a>
<a id="__codelineno-5-133" name="__codelineno-5-133" href="#__codelineno-5-133"></a>traces:
<a id="__codelineno-5-134" name="__codelineno-5-134" href="#__codelineno-5-134"></a>
<a id="__codelineno-5-135" name="__codelineno-5-135" href="#__codelineno-5-135"></a>
<a id="__codelineno-5-136" name="__codelineno-5-136" href="#__codelineno-5-136"></a>
<a id="__codelineno-5-137" name="__codelineno-5-137" href="#__codelineno-5-137"></a>receivers: [otlp]
<a id="__codelineno-5-138" name="__codelineno-5-138" href="#__codelineno-5-138"></a>
<a id="__codelineno-5-139" name="__codelineno-5-139" href="#__codelineno-5-139"></a>
<a id="__codelineno-5-140" name="__codelineno-5-140" href="#__codelineno-5-140"></a>
<a id="__codelineno-5-141" name="__codelineno-5-141" href="#__codelineno-5-141"></a>processors: []
<a id="__codelineno-5-142" name="__codelineno-5-142" href="#__codelineno-5-142"></a>
<a id="__codelineno-5-143" name="__codelineno-5-143" href="#__codelineno-5-143"></a>
<a id="__codelineno-5-144" name="__codelineno-5-144" href="#__codelineno-5-144"></a>
<a id="__codelineno-5-145" name="__codelineno-5-145" href="#__codelineno-5-145"></a>exporters: [otlp_http]
<a id="__codelineno-5-146" name="__codelineno-5-146" href="#__codelineno-5-146"></a>
<a id="__codelineno-5-147" name="__codelineno-5-147" href="#__codelineno-5-147"></a>
<a id="__codelineno-5-148" name="__codelineno-5-148" href="#__codelineno-5-148"></a>
<a id="__codelineno-5-149" name="__codelineno-5-149" href="#__codelineno-5-149"></a>metrics:
<a id="__codelineno-5-150" name="__codelineno-5-150" href="#__codelineno-5-150"></a>
<a id="__codelineno-5-151" name="__codelineno-5-151" href="#__codelineno-5-151"></a>
<a id="__codelineno-5-152" name="__codelineno-5-152" href="#__codelineno-5-152"></a>
<a id="__codelineno-5-153" name="__codelineno-5-153" href="#__codelineno-5-153"></a>receivers: [otlp]
<a id="__codelineno-5-154" name="__codelineno-5-154" href="#__codelineno-5-154"></a>
<a id="__codelineno-5-155" name="__codelineno-5-155" href="#__codelineno-5-155"></a>
<a id="__codelineno-5-156" name="__codelineno-5-156" href="#__codelineno-5-156"></a>
<a id="__codelineno-5-157" name="__codelineno-5-157" href="#__codelineno-5-157"></a>processors: []
<a id="__codelineno-5-158" name="__codelineno-5-158" href="#__codelineno-5-158"></a>
<a id="__codelineno-5-159" name="__codelineno-5-159" href="#__codelineno-5-159"></a>
<a id="__codelineno-5-160" name="__codelineno-5-160" href="#__codelineno-5-160"></a>
<a id="__codelineno-5-161" name="__codelineno-5-161" href="#__codelineno-5-161"></a>exporters: [otlp_http]
<a id="__codelineno-5-162" name="__codelineno-5-162" href="#__codelineno-5-162"></a>
<a id="__codelineno-5-163" name="__codelineno-5-163" href="#__codelineno-5-163"></a>
<a id="__codelineno-5-164" name="__codelineno-5-164" href="#__codelineno-5-164"></a>
<a id="__codelineno-5-165" name="__codelineno-5-165" href="#__codelineno-5-165"></a>logs:
<a id="__codelineno-5-166" name="__codelineno-5-166" href="#__codelineno-5-166"></a>
<a id="__codelineno-5-167" name="__codelineno-5-167" href="#__codelineno-5-167"></a>
<a id="__codelineno-5-168" name="__codelineno-5-168" href="#__codelineno-5-168"></a>
<a id="__codelineno-5-169" name="__codelineno-5-169" href="#__codelineno-5-169"></a>receivers: [otlp]
<a id="__codelineno-5-170" name="__codelineno-5-170" href="#__codelineno-5-170"></a>
<a id="__codelineno-5-171" name="__codelineno-5-171" href="#__codelineno-5-171"></a>
<a id="__codelineno-5-172" name="__codelineno-5-172" href="#__codelineno-5-172"></a>
<a id="__codelineno-5-173" name="__codelineno-5-173" href="#__codelineno-5-173"></a>processors: []
<a id="__codelineno-5-174" name="__codelineno-5-174" href="#__codelineno-5-174"></a>
<a id="__codelineno-5-175" name="__codelineno-5-175" href="#__codelineno-5-175"></a>
<a id="__codelineno-5-176" name="__codelineno-5-176" href="#__codelineno-5-176"></a>
<a id="__codelineno-5-177" name="__codelineno-5-177" href="#__codelineno-5-177"></a>exporters: [otlp_http]
</code></pre></div>
<p>Deploy as an agent (DaemonSet)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>apiVersion: opentelemetry.io/v1beta1
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>kind: OpenTelemetryCollector
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>metadata:
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>name: dynatrace-otel
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>spec:
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>envFrom:
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>- secretRef:
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>env:
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a>- name: MY_POD_IP
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>valueFrom:
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a>fieldRef:
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a>fieldPath: status.podIP
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a>mode: &quot;daemonset&quot;
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a>image: &quot;ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0&quot;
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a>resources:
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a>
<a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a>limits:
<a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a>
<a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a>
<a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a>
<a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a>memory: 512Mi
<a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a>
<a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a>
<a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a>
<a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a>config:
<a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a>
<a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a>
<a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a>
<a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a>receivers:
<a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a>
<a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a>
<a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a>
<a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a>otlp:
<a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a>
<a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a>
<a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a>
<a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a>protocols:
<a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a>
<a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a>
<a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a>
<a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a>grpc:
<a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a>
<a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a>
<a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a>
<a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a>
<a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a>
<a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a>
<a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a>http:
<a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a>
<a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a>
<a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a>
<a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-6-102" name="__codelineno-6-102" href="#__codelineno-6-102"></a>
<a id="__codelineno-6-103" name="__codelineno-6-103" href="#__codelineno-6-103"></a>
<a id="__codelineno-6-104" name="__codelineno-6-104" href="#__codelineno-6-104"></a>
<a id="__codelineno-6-105" name="__codelineno-6-105" href="#__codelineno-6-105"></a>exporters:
<a id="__codelineno-6-106" name="__codelineno-6-106" href="#__codelineno-6-106"></a>
<a id="__codelineno-6-107" name="__codelineno-6-107" href="#__codelineno-6-107"></a>
<a id="__codelineno-6-108" name="__codelineno-6-108" href="#__codelineno-6-108"></a>
<a id="__codelineno-6-109" name="__codelineno-6-109" href="#__codelineno-6-109"></a>otlp_http:
<a id="__codelineno-6-110" name="__codelineno-6-110" href="#__codelineno-6-110"></a>
<a id="__codelineno-6-111" name="__codelineno-6-111" href="#__codelineno-6-111"></a>
<a id="__codelineno-6-112" name="__codelineno-6-112" href="#__codelineno-6-112"></a>
<a id="__codelineno-6-113" name="__codelineno-6-113" href="#__codelineno-6-113"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-6-114" name="__codelineno-6-114" href="#__codelineno-6-114"></a>
<a id="__codelineno-6-115" name="__codelineno-6-115" href="#__codelineno-6-115"></a>
<a id="__codelineno-6-116" name="__codelineno-6-116" href="#__codelineno-6-116"></a>
<a id="__codelineno-6-117" name="__codelineno-6-117" href="#__codelineno-6-117"></a>headers:
<a id="__codelineno-6-118" name="__codelineno-6-118" href="#__codelineno-6-118"></a>
<a id="__codelineno-6-119" name="__codelineno-6-119" href="#__codelineno-6-119"></a>
<a id="__codelineno-6-120" name="__codelineno-6-120" href="#__codelineno-6-120"></a>
<a id="__codelineno-6-121" name="__codelineno-6-121" href="#__codelineno-6-121"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-6-122" name="__codelineno-6-122" href="#__codelineno-6-122"></a>
<a id="__codelineno-6-123" name="__codelineno-6-123" href="#__codelineno-6-123"></a>
<a id="__codelineno-6-124" name="__codelineno-6-124" href="#__codelineno-6-124"></a>
<a id="__codelineno-6-125" name="__codelineno-6-125" href="#__codelineno-6-125"></a>service:
<a id="__codelineno-6-126" name="__codelineno-6-126" href="#__codelineno-6-126"></a>
<a id="__codelineno-6-127" name="__codelineno-6-127" href="#__codelineno-6-127"></a>
<a id="__codelineno-6-128" name="__codelineno-6-128" href="#__codelineno-6-128"></a>
<a id="__codelineno-6-129" name="__codelineno-6-129" href="#__codelineno-6-129"></a>pipelines:
<a id="__codelineno-6-130" name="__codelineno-6-130" href="#__codelineno-6-130"></a>
<a id="__codelineno-6-131" name="__codelineno-6-131" href="#__codelineno-6-131"></a>
<a id="__codelineno-6-132" name="__codelineno-6-132" href="#__codelineno-6-132"></a>
<a id="__codelineno-6-133" name="__codelineno-6-133" href="#__codelineno-6-133"></a>traces:
<a id="__codelineno-6-134" name="__codelineno-6-134" href="#__codelineno-6-134"></a>
<a id="__codelineno-6-135" name="__codelineno-6-135" href="#__codelineno-6-135"></a>
<a id="__codelineno-6-136" name="__codelineno-6-136" href="#__codelineno-6-136"></a>
<a id="__codelineno-6-137" name="__codelineno-6-137" href="#__codelineno-6-137"></a>receivers: [otlp]
<a id="__codelineno-6-138" name="__codelineno-6-138" href="#__codelineno-6-138"></a>
<a id="__codelineno-6-139" name="__codelineno-6-139" href="#__codelineno-6-139"></a>
<a id="__codelineno-6-140" name="__codelineno-6-140" href="#__codelineno-6-140"></a>
<a id="__codelineno-6-141" name="__codelineno-6-141" href="#__codelineno-6-141"></a>processors: []
<a id="__codelineno-6-142" name="__codelineno-6-142" href="#__codelineno-6-142"></a>
<a id="__codelineno-6-143" name="__codelineno-6-143" href="#__codelineno-6-143"></a>
<a id="__codelineno-6-144" name="__codelineno-6-144" href="#__codelineno-6-144"></a>
<a id="__codelineno-6-145" name="__codelineno-6-145" href="#__codelineno-6-145"></a>exporters: [otlp_http]
<a id="__codelineno-6-146" name="__codelineno-6-146" href="#__codelineno-6-146"></a>
<a id="__codelineno-6-147" name="__codelineno-6-147" href="#__codelineno-6-147"></a>
<a id="__codelineno-6-148" name="__codelineno-6-148" href="#__codelineno-6-148"></a>
<a id="__codelineno-6-149" name="__codelineno-6-149" href="#__codelineno-6-149"></a>metrics:
<a id="__codelineno-6-150" name="__codelineno-6-150" href="#__codelineno-6-150"></a>
<a id="__codelineno-6-151" name="__codelineno-6-151" href="#__codelineno-6-151"></a>
<a id="__codelineno-6-152" name="__codelineno-6-152" href="#__codelineno-6-152"></a>
<a id="__codelineno-6-153" name="__codelineno-6-153" href="#__codelineno-6-153"></a>receivers: [otlp]
<a id="__codelineno-6-154" name="__codelineno-6-154" href="#__codelineno-6-154"></a>
<a id="__codelineno-6-155" name="__codelineno-6-155" href="#__codelineno-6-155"></a>
<a id="__codelineno-6-156" name="__codelineno-6-156" href="#__codelineno-6-156"></a>
<a id="__codelineno-6-157" name="__codelineno-6-157" href="#__codelineno-6-157"></a>processors: []
<a id="__codelineno-6-158" name="__codelineno-6-158" href="#__codelineno-6-158"></a>
<a id="__codelineno-6-159" name="__codelineno-6-159" href="#__codelineno-6-159"></a>
<a id="__codelineno-6-160" name="__codelineno-6-160" href="#__codelineno-6-160"></a>
<a id="__codelineno-6-161" name="__codelineno-6-161" href="#__codelineno-6-161"></a>exporters: [otlp_http]
<a id="__codelineno-6-162" name="__codelineno-6-162" href="#__codelineno-6-162"></a>
<a id="__codelineno-6-163" name="__codelineno-6-163" href="#__codelineno-6-163"></a>
<a id="__codelineno-6-164" name="__codelineno-6-164" href="#__codelineno-6-164"></a>
<a id="__codelineno-6-165" name="__codelineno-6-165" href="#__codelineno-6-165"></a>logs:
<a id="__codelineno-6-166" name="__codelineno-6-166" href="#__codelineno-6-166"></a>
<a id="__codelineno-6-167" name="__codelineno-6-167" href="#__codelineno-6-167"></a>
<a id="__codelineno-6-168" name="__codelineno-6-168" href="#__codelineno-6-168"></a>
<a id="__codelineno-6-169" name="__codelineno-6-169" href="#__codelineno-6-169"></a>receivers: [otlp]
<a id="__codelineno-6-170" name="__codelineno-6-170" href="#__codelineno-6-170"></a>
<a id="__codelineno-6-171" name="__codelineno-6-171" href="#__codelineno-6-171"></a>
<a id="__codelineno-6-172" name="__codelineno-6-172" href="#__codelineno-6-172"></a>
<a id="__codelineno-6-173" name="__codelineno-6-173" href="#__codelineno-6-173"></a>processors: []
<a id="__codelineno-6-174" name="__codelineno-6-174" href="#__codelineno-6-174"></a>
<a id="__codelineno-6-175" name="__codelineno-6-175" href="#__codelineno-6-175"></a>
<a id="__codelineno-6-176" name="__codelineno-6-176" href="#__codelineno-6-176"></a>
<a id="__codelineno-6-177" name="__codelineno-6-177" href="#__codelineno-6-177"></a>exporters: [otlp_http]
</code></pre></div>
<p>Choose one of the common <a href="#deployment-modes">deployment modes</a> for the Dynatrace Collector.</p>
<p>The Helm charts below use <code>alternateConfig</code> to provide the Collector configuration. With this entry, the default Helm chart configuration, as well as a possibly present <code>config</code> object, will be ignored.</p>
<p>Deploy as a gateway (Deployment)</p>
<ol>
<li>Save the following YAML configuration under <code>values-deployment.yaml</code></li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>mode: deployment
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>image:
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>repository: ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>tag: 0.44.0
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>command:
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>name: dynatrace-otel-collector
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>extraEnvs:
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>- name: DT_API_TOKEN
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a>valueFrom:
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a>
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>
<a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a>secretKeyRef:
<a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a>
<a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a>
<a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a>
<a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>
<a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a>
<a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a>
<a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a>key: DT_API_TOKEN
<a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a>
<a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a>
<a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a>
<a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a>- name: DT_ENDPOINT
<a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a>
<a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a>
<a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a>
<a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a>valueFrom:
<a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a>
<a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a>
<a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a>
<a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a>secretKeyRef:
<a id="__codelineno-7-58" name="__codelineno-7-58" href="#__codelineno-7-58"></a>
<a id="__codelineno-7-59" name="__codelineno-7-59" href="#__codelineno-7-59"></a>
<a id="__codelineno-7-60" name="__codelineno-7-60" href="#__codelineno-7-60"></a>
<a id="__codelineno-7-61" name="__codelineno-7-61" href="#__codelineno-7-61"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-7-62" name="__codelineno-7-62" href="#__codelineno-7-62"></a>
<a id="__codelineno-7-63" name="__codelineno-7-63" href="#__codelineno-7-63"></a>
<a id="__codelineno-7-64" name="__codelineno-7-64" href="#__codelineno-7-64"></a>
<a id="__codelineno-7-65" name="__codelineno-7-65" href="#__codelineno-7-65"></a>key: DT_ENDPOINT
<a id="__codelineno-7-66" name="__codelineno-7-66" href="#__codelineno-7-66"></a>
<a id="__codelineno-7-67" name="__codelineno-7-67" href="#__codelineno-7-67"></a>
<a id="__codelineno-7-68" name="__codelineno-7-68" href="#__codelineno-7-68"></a>
<a id="__codelineno-7-69" name="__codelineno-7-69" href="#__codelineno-7-69"></a>resources:
<a id="__codelineno-7-70" name="__codelineno-7-70" href="#__codelineno-7-70"></a>
<a id="__codelineno-7-71" name="__codelineno-7-71" href="#__codelineno-7-71"></a>
<a id="__codelineno-7-72" name="__codelineno-7-72" href="#__codelineno-7-72"></a>
<a id="__codelineno-7-73" name="__codelineno-7-73" href="#__codelineno-7-73"></a>limits:
<a id="__codelineno-7-74" name="__codelineno-7-74" href="#__codelineno-7-74"></a>
<a id="__codelineno-7-75" name="__codelineno-7-75" href="#__codelineno-7-75"></a>
<a id="__codelineno-7-76" name="__codelineno-7-76" href="#__codelineno-7-76"></a>
<a id="__codelineno-7-77" name="__codelineno-7-77" href="#__codelineno-7-77"></a>memory: 512Mi
<a id="__codelineno-7-78" name="__codelineno-7-78" href="#__codelineno-7-78"></a>
<a id="__codelineno-7-79" name="__codelineno-7-79" href="#__codelineno-7-79"></a>
<a id="__codelineno-7-80" name="__codelineno-7-80" href="#__codelineno-7-80"></a>
<a id="__codelineno-7-81" name="__codelineno-7-81" href="#__codelineno-7-81"></a>alternateConfig:
<a id="__codelineno-7-82" name="__codelineno-7-82" href="#__codelineno-7-82"></a>
<a id="__codelineno-7-83" name="__codelineno-7-83" href="#__codelineno-7-83"></a>
<a id="__codelineno-7-84" name="__codelineno-7-84" href="#__codelineno-7-84"></a>
<a id="__codelineno-7-85" name="__codelineno-7-85" href="#__codelineno-7-85"></a>extensions:
<a id="__codelineno-7-86" name="__codelineno-7-86" href="#__codelineno-7-86"></a>
<a id="__codelineno-7-87" name="__codelineno-7-87" href="#__codelineno-7-87"></a>
<a id="__codelineno-7-88" name="__codelineno-7-88" href="#__codelineno-7-88"></a>
<a id="__codelineno-7-89" name="__codelineno-7-89" href="#__codelineno-7-89"></a>health_check:
<a id="__codelineno-7-90" name="__codelineno-7-90" href="#__codelineno-7-90"></a>
<a id="__codelineno-7-91" name="__codelineno-7-91" href="#__codelineno-7-91"></a>
<a id="__codelineno-7-92" name="__codelineno-7-92" href="#__codelineno-7-92"></a>
<a id="__codelineno-7-93" name="__codelineno-7-93" href="#__codelineno-7-93"></a>endpoint: &quot;${env:MY_POD_IP}:13133&quot;
<a id="__codelineno-7-94" name="__codelineno-7-94" href="#__codelineno-7-94"></a>
<a id="__codelineno-7-95" name="__codelineno-7-95" href="#__codelineno-7-95"></a>
<a id="__codelineno-7-96" name="__codelineno-7-96" href="#__codelineno-7-96"></a>
<a id="__codelineno-7-97" name="__codelineno-7-97" href="#__codelineno-7-97"></a>receivers:
<a id="__codelineno-7-98" name="__codelineno-7-98" href="#__codelineno-7-98"></a>
<a id="__codelineno-7-99" name="__codelineno-7-99" href="#__codelineno-7-99"></a>
<a id="__codelineno-7-100" name="__codelineno-7-100" href="#__codelineno-7-100"></a>
<a id="__codelineno-7-101" name="__codelineno-7-101" href="#__codelineno-7-101"></a>otlp:
<a id="__codelineno-7-102" name="__codelineno-7-102" href="#__codelineno-7-102"></a>
<a id="__codelineno-7-103" name="__codelineno-7-103" href="#__codelineno-7-103"></a>
<a id="__codelineno-7-104" name="__codelineno-7-104" href="#__codelineno-7-104"></a>
<a id="__codelineno-7-105" name="__codelineno-7-105" href="#__codelineno-7-105"></a>protocols:
<a id="__codelineno-7-106" name="__codelineno-7-106" href="#__codelineno-7-106"></a>
<a id="__codelineno-7-107" name="__codelineno-7-107" href="#__codelineno-7-107"></a>
<a id="__codelineno-7-108" name="__codelineno-7-108" href="#__codelineno-7-108"></a>
<a id="__codelineno-7-109" name="__codelineno-7-109" href="#__codelineno-7-109"></a>grpc:
<a id="__codelineno-7-110" name="__codelineno-7-110" href="#__codelineno-7-110"></a>
<a id="__codelineno-7-111" name="__codelineno-7-111" href="#__codelineno-7-111"></a>
<a id="__codelineno-7-112" name="__codelineno-7-112" href="#__codelineno-7-112"></a>
<a id="__codelineno-7-113" name="__codelineno-7-113" href="#__codelineno-7-113"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-7-114" name="__codelineno-7-114" href="#__codelineno-7-114"></a>
<a id="__codelineno-7-115" name="__codelineno-7-115" href="#__codelineno-7-115"></a>
<a id="__codelineno-7-116" name="__codelineno-7-116" href="#__codelineno-7-116"></a>
<a id="__codelineno-7-117" name="__codelineno-7-117" href="#__codelineno-7-117"></a>http:
<a id="__codelineno-7-118" name="__codelineno-7-118" href="#__codelineno-7-118"></a>
<a id="__codelineno-7-119" name="__codelineno-7-119" href="#__codelineno-7-119"></a>
<a id="__codelineno-7-120" name="__codelineno-7-120" href="#__codelineno-7-120"></a>
<a id="__codelineno-7-121" name="__codelineno-7-121" href="#__codelineno-7-121"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-7-122" name="__codelineno-7-122" href="#__codelineno-7-122"></a>
<a id="__codelineno-7-123" name="__codelineno-7-123" href="#__codelineno-7-123"></a>
<a id="__codelineno-7-124" name="__codelineno-7-124" href="#__codelineno-7-124"></a>
<a id="__codelineno-7-125" name="__codelineno-7-125" href="#__codelineno-7-125"></a>filelog: null
<a id="__codelineno-7-126" name="__codelineno-7-126" href="#__codelineno-7-126"></a>
<a id="__codelineno-7-127" name="__codelineno-7-127" href="#__codelineno-7-127"></a>
<a id="__codelineno-7-128" name="__codelineno-7-128" href="#__codelineno-7-128"></a>
<a id="__codelineno-7-129" name="__codelineno-7-129" href="#__codelineno-7-129"></a>exporters:
<a id="__codelineno-7-130" name="__codelineno-7-130" href="#__codelineno-7-130"></a>
<a id="__codelineno-7-131" name="__codelineno-7-131" href="#__codelineno-7-131"></a>
<a id="__codelineno-7-132" name="__codelineno-7-132" href="#__codelineno-7-132"></a>
<a id="__codelineno-7-133" name="__codelineno-7-133" href="#__codelineno-7-133"></a>otlp_http:
<a id="__codelineno-7-134" name="__codelineno-7-134" href="#__codelineno-7-134"></a>
<a id="__codelineno-7-135" name="__codelineno-7-135" href="#__codelineno-7-135"></a>
<a id="__codelineno-7-136" name="__codelineno-7-136" href="#__codelineno-7-136"></a>
<a id="__codelineno-7-137" name="__codelineno-7-137" href="#__codelineno-7-137"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-7-138" name="__codelineno-7-138" href="#__codelineno-7-138"></a>
<a id="__codelineno-7-139" name="__codelineno-7-139" href="#__codelineno-7-139"></a>
<a id="__codelineno-7-140" name="__codelineno-7-140" href="#__codelineno-7-140"></a>
<a id="__codelineno-7-141" name="__codelineno-7-141" href="#__codelineno-7-141"></a>headers:
<a id="__codelineno-7-142" name="__codelineno-7-142" href="#__codelineno-7-142"></a>
<a id="__codelineno-7-143" name="__codelineno-7-143" href="#__codelineno-7-143"></a>
<a id="__codelineno-7-144" name="__codelineno-7-144" href="#__codelineno-7-144"></a>
<a id="__codelineno-7-145" name="__codelineno-7-145" href="#__codelineno-7-145"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-7-146" name="__codelineno-7-146" href="#__codelineno-7-146"></a>
<a id="__codelineno-7-147" name="__codelineno-7-147" href="#__codelineno-7-147"></a>
<a id="__codelineno-7-148" name="__codelineno-7-148" href="#__codelineno-7-148"></a>
<a id="__codelineno-7-149" name="__codelineno-7-149" href="#__codelineno-7-149"></a>service:
<a id="__codelineno-7-150" name="__codelineno-7-150" href="#__codelineno-7-150"></a>
<a id="__codelineno-7-151" name="__codelineno-7-151" href="#__codelineno-7-151"></a>
<a id="__codelineno-7-152" name="__codelineno-7-152" href="#__codelineno-7-152"></a>
<a id="__codelineno-7-153" name="__codelineno-7-153" href="#__codelineno-7-153"></a>extensions: [health_check]
<a id="__codelineno-7-154" name="__codelineno-7-154" href="#__codelineno-7-154"></a>
<a id="__codelineno-7-155" name="__codelineno-7-155" href="#__codelineno-7-155"></a>
<a id="__codelineno-7-156" name="__codelineno-7-156" href="#__codelineno-7-156"></a>
<a id="__codelineno-7-157" name="__codelineno-7-157" href="#__codelineno-7-157"></a>pipelines:
<a id="__codelineno-7-158" name="__codelineno-7-158" href="#__codelineno-7-158"></a>
<a id="__codelineno-7-159" name="__codelineno-7-159" href="#__codelineno-7-159"></a>
<a id="__codelineno-7-160" name="__codelineno-7-160" href="#__codelineno-7-160"></a>
<a id="__codelineno-7-161" name="__codelineno-7-161" href="#__codelineno-7-161"></a>traces:
<a id="__codelineno-7-162" name="__codelineno-7-162" href="#__codelineno-7-162"></a>
<a id="__codelineno-7-163" name="__codelineno-7-163" href="#__codelineno-7-163"></a>
<a id="__codelineno-7-164" name="__codelineno-7-164" href="#__codelineno-7-164"></a>
<a id="__codelineno-7-165" name="__codelineno-7-165" href="#__codelineno-7-165"></a>receivers: [otlp]
<a id="__codelineno-7-166" name="__codelineno-7-166" href="#__codelineno-7-166"></a>
<a id="__codelineno-7-167" name="__codelineno-7-167" href="#__codelineno-7-167"></a>
<a id="__codelineno-7-168" name="__codelineno-7-168" href="#__codelineno-7-168"></a>
<a id="__codelineno-7-169" name="__codelineno-7-169" href="#__codelineno-7-169"></a>processors: []
<a id="__codelineno-7-170" name="__codelineno-7-170" href="#__codelineno-7-170"></a>
<a id="__codelineno-7-171" name="__codelineno-7-171" href="#__codelineno-7-171"></a>
<a id="__codelineno-7-172" name="__codelineno-7-172" href="#__codelineno-7-172"></a>
<a id="__codelineno-7-173" name="__codelineno-7-173" href="#__codelineno-7-173"></a>exporters: [otlp_http]
<a id="__codelineno-7-174" name="__codelineno-7-174" href="#__codelineno-7-174"></a>
<a id="__codelineno-7-175" name="__codelineno-7-175" href="#__codelineno-7-175"></a>
<a id="__codelineno-7-176" name="__codelineno-7-176" href="#__codelineno-7-176"></a>
<a id="__codelineno-7-177" name="__codelineno-7-177" href="#__codelineno-7-177"></a>metrics:
<a id="__codelineno-7-178" name="__codelineno-7-178" href="#__codelineno-7-178"></a>
<a id="__codelineno-7-179" name="__codelineno-7-179" href="#__codelineno-7-179"></a>
<a id="__codelineno-7-180" name="__codelineno-7-180" href="#__codelineno-7-180"></a>
<a id="__codelineno-7-181" name="__codelineno-7-181" href="#__codelineno-7-181"></a>receivers: [otlp]
<a id="__codelineno-7-182" name="__codelineno-7-182" href="#__codelineno-7-182"></a>
<a id="__codelineno-7-183" name="__codelineno-7-183" href="#__codelineno-7-183"></a>
<a id="__codelineno-7-184" name="__codelineno-7-184" href="#__codelineno-7-184"></a>
<a id="__codelineno-7-185" name="__codelineno-7-185" href="#__codelineno-7-185"></a>processors: []
<a id="__codelineno-7-186" name="__codelineno-7-186" href="#__codelineno-7-186"></a>
<a id="__codelineno-7-187" name="__codelineno-7-187" href="#__codelineno-7-187"></a>
<a id="__codelineno-7-188" name="__codelineno-7-188" href="#__codelineno-7-188"></a>
<a id="__codelineno-7-189" name="__codelineno-7-189" href="#__codelineno-7-189"></a>exporters: [otlp_http]
<a id="__codelineno-7-190" name="__codelineno-7-190" href="#__codelineno-7-190"></a>
<a id="__codelineno-7-191" name="__codelineno-7-191" href="#__codelineno-7-191"></a>
<a id="__codelineno-7-192" name="__codelineno-7-192" href="#__codelineno-7-192"></a>
<a id="__codelineno-7-193" name="__codelineno-7-193" href="#__codelineno-7-193"></a>logs:
<a id="__codelineno-7-194" name="__codelineno-7-194" href="#__codelineno-7-194"></a>
<a id="__codelineno-7-195" name="__codelineno-7-195" href="#__codelineno-7-195"></a>
<a id="__codelineno-7-196" name="__codelineno-7-196" href="#__codelineno-7-196"></a>
<a id="__codelineno-7-197" name="__codelineno-7-197" href="#__codelineno-7-197"></a>receivers: [otlp]
<a id="__codelineno-7-198" name="__codelineno-7-198" href="#__codelineno-7-198"></a>
<a id="__codelineno-7-199" name="__codelineno-7-199" href="#__codelineno-7-199"></a>
<a id="__codelineno-7-200" name="__codelineno-7-200" href="#__codelineno-7-200"></a>
<a id="__codelineno-7-201" name="__codelineno-7-201" href="#__codelineno-7-201"></a>processors: []
<a id="__codelineno-7-202" name="__codelineno-7-202" href="#__codelineno-7-202"></a>
<a id="__codelineno-7-203" name="__codelineno-7-203" href="#__codelineno-7-203"></a>
<a id="__codelineno-7-204" name="__codelineno-7-204" href="#__codelineno-7-204"></a>
<a id="__codelineno-7-205" name="__codelineno-7-205" href="#__codelineno-7-205"></a>exporters: [otlp_http]
</code></pre></div>
2. Run the following commands to configure and install the Helm charts</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>helm repo add open-telemetry https://open-telemetry.github.io/opentelemetry-helm-charts
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>helm repo update
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>helm upgrade -i dynatrace-collector open-telemetry/opentelemetry-collector -f values-deployment.yaml
</code></pre></div>
<p>Deploy as an agent (DaemonSet)</p>
<ol>
<li>Save the following YAML configuration under <code>values-daemonset.yaml</code></li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>mode: daemonset
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>image:
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>repository: ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>tag: 0.44.0
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>command:
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>name: dynatrace-otel-collector
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a>extraEnvs:
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a>
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a>
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a>- name: DT_API_TOKEN
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a>
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a>
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a>valueFrom:
<a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a>
<a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a>
<a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a>
<a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a>secretKeyRef:
<a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a>
<a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a>
<a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a>
<a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a>
<a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a>
<a id="__codelineno-9-44" name="__codelineno-9-44" href="#__codelineno-9-44"></a>
<a id="__codelineno-9-45" name="__codelineno-9-45" href="#__codelineno-9-45"></a>key: DT_API_TOKEN
<a id="__codelineno-9-46" name="__codelineno-9-46" href="#__codelineno-9-46"></a>
<a id="__codelineno-9-47" name="__codelineno-9-47" href="#__codelineno-9-47"></a>
<a id="__codelineno-9-48" name="__codelineno-9-48" href="#__codelineno-9-48"></a>
<a id="__codelineno-9-49" name="__codelineno-9-49" href="#__codelineno-9-49"></a>- name: DT_ENDPOINT
<a id="__codelineno-9-50" name="__codelineno-9-50" href="#__codelineno-9-50"></a>
<a id="__codelineno-9-51" name="__codelineno-9-51" href="#__codelineno-9-51"></a>
<a id="__codelineno-9-52" name="__codelineno-9-52" href="#__codelineno-9-52"></a>
<a id="__codelineno-9-53" name="__codelineno-9-53" href="#__codelineno-9-53"></a>valueFrom:
<a id="__codelineno-9-54" name="__codelineno-9-54" href="#__codelineno-9-54"></a>
<a id="__codelineno-9-55" name="__codelineno-9-55" href="#__codelineno-9-55"></a>
<a id="__codelineno-9-56" name="__codelineno-9-56" href="#__codelineno-9-56"></a>
<a id="__codelineno-9-57" name="__codelineno-9-57" href="#__codelineno-9-57"></a>secretKeyRef:
<a id="__codelineno-9-58" name="__codelineno-9-58" href="#__codelineno-9-58"></a>
<a id="__codelineno-9-59" name="__codelineno-9-59" href="#__codelineno-9-59"></a>
<a id="__codelineno-9-60" name="__codelineno-9-60" href="#__codelineno-9-60"></a>
<a id="__codelineno-9-61" name="__codelineno-9-61" href="#__codelineno-9-61"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-9-62" name="__codelineno-9-62" href="#__codelineno-9-62"></a>
<a id="__codelineno-9-63" name="__codelineno-9-63" href="#__codelineno-9-63"></a>
<a id="__codelineno-9-64" name="__codelineno-9-64" href="#__codelineno-9-64"></a>
<a id="__codelineno-9-65" name="__codelineno-9-65" href="#__codelineno-9-65"></a>key: DT_ENDPOINT
<a id="__codelineno-9-66" name="__codelineno-9-66" href="#__codelineno-9-66"></a>
<a id="__codelineno-9-67" name="__codelineno-9-67" href="#__codelineno-9-67"></a>
<a id="__codelineno-9-68" name="__codelineno-9-68" href="#__codelineno-9-68"></a>
<a id="__codelineno-9-69" name="__codelineno-9-69" href="#__codelineno-9-69"></a>resources:
<a id="__codelineno-9-70" name="__codelineno-9-70" href="#__codelineno-9-70"></a>
<a id="__codelineno-9-71" name="__codelineno-9-71" href="#__codelineno-9-71"></a>
<a id="__codelineno-9-72" name="__codelineno-9-72" href="#__codelineno-9-72"></a>
<a id="__codelineno-9-73" name="__codelineno-9-73" href="#__codelineno-9-73"></a>limits:
<a id="__codelineno-9-74" name="__codelineno-9-74" href="#__codelineno-9-74"></a>
<a id="__codelineno-9-75" name="__codelineno-9-75" href="#__codelineno-9-75"></a>
<a id="__codelineno-9-76" name="__codelineno-9-76" href="#__codelineno-9-76"></a>
<a id="__codelineno-9-77" name="__codelineno-9-77" href="#__codelineno-9-77"></a>memory: 512Mi
<a id="__codelineno-9-78" name="__codelineno-9-78" href="#__codelineno-9-78"></a>
<a id="__codelineno-9-79" name="__codelineno-9-79" href="#__codelineno-9-79"></a>
<a id="__codelineno-9-80" name="__codelineno-9-80" href="#__codelineno-9-80"></a>
<a id="__codelineno-9-81" name="__codelineno-9-81" href="#__codelineno-9-81"></a>alternateConfig:
<a id="__codelineno-9-82" name="__codelineno-9-82" href="#__codelineno-9-82"></a>
<a id="__codelineno-9-83" name="__codelineno-9-83" href="#__codelineno-9-83"></a>
<a id="__codelineno-9-84" name="__codelineno-9-84" href="#__codelineno-9-84"></a>
<a id="__codelineno-9-85" name="__codelineno-9-85" href="#__codelineno-9-85"></a>extensions:
<a id="__codelineno-9-86" name="__codelineno-9-86" href="#__codelineno-9-86"></a>
<a id="__codelineno-9-87" name="__codelineno-9-87" href="#__codelineno-9-87"></a>
<a id="__codelineno-9-88" name="__codelineno-9-88" href="#__codelineno-9-88"></a>
<a id="__codelineno-9-89" name="__codelineno-9-89" href="#__codelineno-9-89"></a>health_check:
<a id="__codelineno-9-90" name="__codelineno-9-90" href="#__codelineno-9-90"></a>
<a id="__codelineno-9-91" name="__codelineno-9-91" href="#__codelineno-9-91"></a>
<a id="__codelineno-9-92" name="__codelineno-9-92" href="#__codelineno-9-92"></a>
<a id="__codelineno-9-93" name="__codelineno-9-93" href="#__codelineno-9-93"></a>endpoint: &quot;${env:MY_POD_IP}:13133&quot;
<a id="__codelineno-9-94" name="__codelineno-9-94" href="#__codelineno-9-94"></a>
<a id="__codelineno-9-95" name="__codelineno-9-95" href="#__codelineno-9-95"></a>
<a id="__codelineno-9-96" name="__codelineno-9-96" href="#__codelineno-9-96"></a>
<a id="__codelineno-9-97" name="__codelineno-9-97" href="#__codelineno-9-97"></a>receivers:
<a id="__codelineno-9-98" name="__codelineno-9-98" href="#__codelineno-9-98"></a>
<a id="__codelineno-9-99" name="__codelineno-9-99" href="#__codelineno-9-99"></a>
<a id="__codelineno-9-100" name="__codelineno-9-100" href="#__codelineno-9-100"></a>
<a id="__codelineno-9-101" name="__codelineno-9-101" href="#__codelineno-9-101"></a>otlp:
<a id="__codelineno-9-102" name="__codelineno-9-102" href="#__codelineno-9-102"></a>
<a id="__codelineno-9-103" name="__codelineno-9-103" href="#__codelineno-9-103"></a>
<a id="__codelineno-9-104" name="__codelineno-9-104" href="#__codelineno-9-104"></a>
<a id="__codelineno-9-105" name="__codelineno-9-105" href="#__codelineno-9-105"></a>protocols:
<a id="__codelineno-9-106" name="__codelineno-9-106" href="#__codelineno-9-106"></a>
<a id="__codelineno-9-107" name="__codelineno-9-107" href="#__codelineno-9-107"></a>
<a id="__codelineno-9-108" name="__codelineno-9-108" href="#__codelineno-9-108"></a>
<a id="__codelineno-9-109" name="__codelineno-9-109" href="#__codelineno-9-109"></a>grpc:
<a id="__codelineno-9-110" name="__codelineno-9-110" href="#__codelineno-9-110"></a>
<a id="__codelineno-9-111" name="__codelineno-9-111" href="#__codelineno-9-111"></a>
<a id="__codelineno-9-112" name="__codelineno-9-112" href="#__codelineno-9-112"></a>
<a id="__codelineno-9-113" name="__codelineno-9-113" href="#__codelineno-9-113"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-9-114" name="__codelineno-9-114" href="#__codelineno-9-114"></a>
<a id="__codelineno-9-115" name="__codelineno-9-115" href="#__codelineno-9-115"></a>
<a id="__codelineno-9-116" name="__codelineno-9-116" href="#__codelineno-9-116"></a>
<a id="__codelineno-9-117" name="__codelineno-9-117" href="#__codelineno-9-117"></a>http:
<a id="__codelineno-9-118" name="__codelineno-9-118" href="#__codelineno-9-118"></a>
<a id="__codelineno-9-119" name="__codelineno-9-119" href="#__codelineno-9-119"></a>
<a id="__codelineno-9-120" name="__codelineno-9-120" href="#__codelineno-9-120"></a>
<a id="__codelineno-9-121" name="__codelineno-9-121" href="#__codelineno-9-121"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-9-122" name="__codelineno-9-122" href="#__codelineno-9-122"></a>
<a id="__codelineno-9-123" name="__codelineno-9-123" href="#__codelineno-9-123"></a>
<a id="__codelineno-9-124" name="__codelineno-9-124" href="#__codelineno-9-124"></a>
<a id="__codelineno-9-125" name="__codelineno-9-125" href="#__codelineno-9-125"></a>exporters:
<a id="__codelineno-9-126" name="__codelineno-9-126" href="#__codelineno-9-126"></a>
<a id="__codelineno-9-127" name="__codelineno-9-127" href="#__codelineno-9-127"></a>
<a id="__codelineno-9-128" name="__codelineno-9-128" href="#__codelineno-9-128"></a>
<a id="__codelineno-9-129" name="__codelineno-9-129" href="#__codelineno-9-129"></a>otlp_http:
<a id="__codelineno-9-130" name="__codelineno-9-130" href="#__codelineno-9-130"></a>
<a id="__codelineno-9-131" name="__codelineno-9-131" href="#__codelineno-9-131"></a>
<a id="__codelineno-9-132" name="__codelineno-9-132" href="#__codelineno-9-132"></a>
<a id="__codelineno-9-133" name="__codelineno-9-133" href="#__codelineno-9-133"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-9-134" name="__codelineno-9-134" href="#__codelineno-9-134"></a>
<a id="__codelineno-9-135" name="__codelineno-9-135" href="#__codelineno-9-135"></a>
<a id="__codelineno-9-136" name="__codelineno-9-136" href="#__codelineno-9-136"></a>
<a id="__codelineno-9-137" name="__codelineno-9-137" href="#__codelineno-9-137"></a>headers:
<a id="__codelineno-9-138" name="__codelineno-9-138" href="#__codelineno-9-138"></a>
<a id="__codelineno-9-139" name="__codelineno-9-139" href="#__codelineno-9-139"></a>
<a id="__codelineno-9-140" name="__codelineno-9-140" href="#__codelineno-9-140"></a>
<a id="__codelineno-9-141" name="__codelineno-9-141" href="#__codelineno-9-141"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-9-142" name="__codelineno-9-142" href="#__codelineno-9-142"></a>
<a id="__codelineno-9-143" name="__codelineno-9-143" href="#__codelineno-9-143"></a>
<a id="__codelineno-9-144" name="__codelineno-9-144" href="#__codelineno-9-144"></a>
<a id="__codelineno-9-145" name="__codelineno-9-145" href="#__codelineno-9-145"></a>service:
<a id="__codelineno-9-146" name="__codelineno-9-146" href="#__codelineno-9-146"></a>
<a id="__codelineno-9-147" name="__codelineno-9-147" href="#__codelineno-9-147"></a>
<a id="__codelineno-9-148" name="__codelineno-9-148" href="#__codelineno-9-148"></a>
<a id="__codelineno-9-149" name="__codelineno-9-149" href="#__codelineno-9-149"></a>extensions: [health_check]
<a id="__codelineno-9-150" name="__codelineno-9-150" href="#__codelineno-9-150"></a>
<a id="__codelineno-9-151" name="__codelineno-9-151" href="#__codelineno-9-151"></a>
<a id="__codelineno-9-152" name="__codelineno-9-152" href="#__codelineno-9-152"></a>
<a id="__codelineno-9-153" name="__codelineno-9-153" href="#__codelineno-9-153"></a>pipelines:
<a id="__codelineno-9-154" name="__codelineno-9-154" href="#__codelineno-9-154"></a>
<a id="__codelineno-9-155" name="__codelineno-9-155" href="#__codelineno-9-155"></a>
<a id="__codelineno-9-156" name="__codelineno-9-156" href="#__codelineno-9-156"></a>
<a id="__codelineno-9-157" name="__codelineno-9-157" href="#__codelineno-9-157"></a>traces:
<a id="__codelineno-9-158" name="__codelineno-9-158" href="#__codelineno-9-158"></a>
<a id="__codelineno-9-159" name="__codelineno-9-159" href="#__codelineno-9-159"></a>
<a id="__codelineno-9-160" name="__codelineno-9-160" href="#__codelineno-9-160"></a>
<a id="__codelineno-9-161" name="__codelineno-9-161" href="#__codelineno-9-161"></a>receivers: [otlp]
<a id="__codelineno-9-162" name="__codelineno-9-162" href="#__codelineno-9-162"></a>
<a id="__codelineno-9-163" name="__codelineno-9-163" href="#__codelineno-9-163"></a>
<a id="__codelineno-9-164" name="__codelineno-9-164" href="#__codelineno-9-164"></a>
<a id="__codelineno-9-165" name="__codelineno-9-165" href="#__codelineno-9-165"></a>processors: []
<a id="__codelineno-9-166" name="__codelineno-9-166" href="#__codelineno-9-166"></a>
<a id="__codelineno-9-167" name="__codelineno-9-167" href="#__codelineno-9-167"></a>
<a id="__codelineno-9-168" name="__codelineno-9-168" href="#__codelineno-9-168"></a>
<a id="__codelineno-9-169" name="__codelineno-9-169" href="#__codelineno-9-169"></a>exporters: [otlp_http]
<a id="__codelineno-9-170" name="__codelineno-9-170" href="#__codelineno-9-170"></a>
<a id="__codelineno-9-171" name="__codelineno-9-171" href="#__codelineno-9-171"></a>
<a id="__codelineno-9-172" name="__codelineno-9-172" href="#__codelineno-9-172"></a>
<a id="__codelineno-9-173" name="__codelineno-9-173" href="#__codelineno-9-173"></a>metrics:
<a id="__codelineno-9-174" name="__codelineno-9-174" href="#__codelineno-9-174"></a>
<a id="__codelineno-9-175" name="__codelineno-9-175" href="#__codelineno-9-175"></a>
<a id="__codelineno-9-176" name="__codelineno-9-176" href="#__codelineno-9-176"></a>
<a id="__codelineno-9-177" name="__codelineno-9-177" href="#__codelineno-9-177"></a>receivers: [otlp]
<a id="__codelineno-9-178" name="__codelineno-9-178" href="#__codelineno-9-178"></a>
<a id="__codelineno-9-179" name="__codelineno-9-179" href="#__codelineno-9-179"></a>
<a id="__codelineno-9-180" name="__codelineno-9-180" href="#__codelineno-9-180"></a>
<a id="__codelineno-9-181" name="__codelineno-9-181" href="#__codelineno-9-181"></a>processors: []
<a id="__codelineno-9-182" name="__codelineno-9-182" href="#__codelineno-9-182"></a>
<a id="__codelineno-9-183" name="__codelineno-9-183" href="#__codelineno-9-183"></a>
<a id="__codelineno-9-184" name="__codelineno-9-184" href="#__codelineno-9-184"></a>
<a id="__codelineno-9-185" name="__codelineno-9-185" href="#__codelineno-9-185"></a>exporters: [otlp_http]
<a id="__codelineno-9-186" name="__codelineno-9-186" href="#__codelineno-9-186"></a>
<a id="__codelineno-9-187" name="__codelineno-9-187" href="#__codelineno-9-187"></a>
<a id="__codelineno-9-188" name="__codelineno-9-188" href="#__codelineno-9-188"></a>
<a id="__codelineno-9-189" name="__codelineno-9-189" href="#__codelineno-9-189"></a>logs:
<a id="__codelineno-9-190" name="__codelineno-9-190" href="#__codelineno-9-190"></a>
<a id="__codelineno-9-191" name="__codelineno-9-191" href="#__codelineno-9-191"></a>
<a id="__codelineno-9-192" name="__codelineno-9-192" href="#__codelineno-9-192"></a>
<a id="__codelineno-9-193" name="__codelineno-9-193" href="#__codelineno-9-193"></a>receivers: [otlp]
<a id="__codelineno-9-194" name="__codelineno-9-194" href="#__codelineno-9-194"></a>
<a id="__codelineno-9-195" name="__codelineno-9-195" href="#__codelineno-9-195"></a>
<a id="__codelineno-9-196" name="__codelineno-9-196" href="#__codelineno-9-196"></a>
<a id="__codelineno-9-197" name="__codelineno-9-197" href="#__codelineno-9-197"></a>processors: []
<a id="__codelineno-9-198" name="__codelineno-9-198" href="#__codelineno-9-198"></a>
<a id="__codelineno-9-199" name="__codelineno-9-199" href="#__codelineno-9-199"></a>
<a id="__codelineno-9-200" name="__codelineno-9-200" href="#__codelineno-9-200"></a>
<a id="__codelineno-9-201" name="__codelineno-9-201" href="#__codelineno-9-201"></a>exporters: [otlp_http]
</code></pre></div>
2. Run the following commands to configure and install the Helm charts</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>helm repo add open-telemetry https://open-telemetry.github.io/opentelemetry-helm-charts
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>helm repo update
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>helm upgrade -i dynatrace-collector open-telemetry/opentelemetry-collector -f values-daemonset.yaml
</code></pre></div>
<p>Network ports</p>
<p>Make sure to configure and forward all relevant network ports, using the <a href="https://github.com/open-telemetry/opentelemetry-helm-charts/blob/opentelemetry-collector-0.106.0/charts/opentelemetry-collector/values.yaml#L266-L313"><code>ports</code> configuration value√Ø¬ª¬ø</a>.</p>
<p>Service</p>
<p>Use <code>kubectl apply</code> with the following configuration to set up the service definitions and configure the correct ports.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>apiVersion: v1
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>kind: Service
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>metadata:
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>name: dynatrace-otel-collector
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>spec:
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>internalTrafficPolicy: Cluster
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>ipFamilies:
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a>
<a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a>
<a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>
<a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a>- IPv4
<a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a>
<a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a>
<a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a>
<a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a>ipFamilyPolicy: SingleStack
<a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a>
<a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a>
<a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a>
<a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a>ports:
<a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a>
<a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a>
<a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a>
<a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a>- name: jaeger-compact
<a id="__codelineno-11-42" name="__codelineno-11-42" href="#__codelineno-11-42"></a>
<a id="__codelineno-11-43" name="__codelineno-11-43" href="#__codelineno-11-43"></a>
<a id="__codelineno-11-44" name="__codelineno-11-44" href="#__codelineno-11-44"></a>
<a id="__codelineno-11-45" name="__codelineno-11-45" href="#__codelineno-11-45"></a>port: 6831
<a id="__codelineno-11-46" name="__codelineno-11-46" href="#__codelineno-11-46"></a>
<a id="__codelineno-11-47" name="__codelineno-11-47" href="#__codelineno-11-47"></a>
<a id="__codelineno-11-48" name="__codelineno-11-48" href="#__codelineno-11-48"></a>
<a id="__codelineno-11-49" name="__codelineno-11-49" href="#__codelineno-11-49"></a>protocol: UDP
<a id="__codelineno-11-50" name="__codelineno-11-50" href="#__codelineno-11-50"></a>
<a id="__codelineno-11-51" name="__codelineno-11-51" href="#__codelineno-11-51"></a>
<a id="__codelineno-11-52" name="__codelineno-11-52" href="#__codelineno-11-52"></a>
<a id="__codelineno-11-53" name="__codelineno-11-53" href="#__codelineno-11-53"></a>targetPort: 6831
<a id="__codelineno-11-54" name="__codelineno-11-54" href="#__codelineno-11-54"></a>
<a id="__codelineno-11-55" name="__codelineno-11-55" href="#__codelineno-11-55"></a>
<a id="__codelineno-11-56" name="__codelineno-11-56" href="#__codelineno-11-56"></a>
<a id="__codelineno-11-57" name="__codelineno-11-57" href="#__codelineno-11-57"></a>- name: jaeger-grpc
<a id="__codelineno-11-58" name="__codelineno-11-58" href="#__codelineno-11-58"></a>
<a id="__codelineno-11-59" name="__codelineno-11-59" href="#__codelineno-11-59"></a>
<a id="__codelineno-11-60" name="__codelineno-11-60" href="#__codelineno-11-60"></a>
<a id="__codelineno-11-61" name="__codelineno-11-61" href="#__codelineno-11-61"></a>port: 14250
<a id="__codelineno-11-62" name="__codelineno-11-62" href="#__codelineno-11-62"></a>
<a id="__codelineno-11-63" name="__codelineno-11-63" href="#__codelineno-11-63"></a>
<a id="__codelineno-11-64" name="__codelineno-11-64" href="#__codelineno-11-64"></a>
<a id="__codelineno-11-65" name="__codelineno-11-65" href="#__codelineno-11-65"></a>protocol: TCP
<a id="__codelineno-11-66" name="__codelineno-11-66" href="#__codelineno-11-66"></a>
<a id="__codelineno-11-67" name="__codelineno-11-67" href="#__codelineno-11-67"></a>
<a id="__codelineno-11-68" name="__codelineno-11-68" href="#__codelineno-11-68"></a>
<a id="__codelineno-11-69" name="__codelineno-11-69" href="#__codelineno-11-69"></a>targetPort: 14250
<a id="__codelineno-11-70" name="__codelineno-11-70" href="#__codelineno-11-70"></a>
<a id="__codelineno-11-71" name="__codelineno-11-71" href="#__codelineno-11-71"></a>
<a id="__codelineno-11-72" name="__codelineno-11-72" href="#__codelineno-11-72"></a>
<a id="__codelineno-11-73" name="__codelineno-11-73" href="#__codelineno-11-73"></a>- name: jaeger-thrift
<a id="__codelineno-11-74" name="__codelineno-11-74" href="#__codelineno-11-74"></a>
<a id="__codelineno-11-75" name="__codelineno-11-75" href="#__codelineno-11-75"></a>
<a id="__codelineno-11-76" name="__codelineno-11-76" href="#__codelineno-11-76"></a>
<a id="__codelineno-11-77" name="__codelineno-11-77" href="#__codelineno-11-77"></a>port: 14268
<a id="__codelineno-11-78" name="__codelineno-11-78" href="#__codelineno-11-78"></a>
<a id="__codelineno-11-79" name="__codelineno-11-79" href="#__codelineno-11-79"></a>
<a id="__codelineno-11-80" name="__codelineno-11-80" href="#__codelineno-11-80"></a>
<a id="__codelineno-11-81" name="__codelineno-11-81" href="#__codelineno-11-81"></a>protocol: TCP
<a id="__codelineno-11-82" name="__codelineno-11-82" href="#__codelineno-11-82"></a>
<a id="__codelineno-11-83" name="__codelineno-11-83" href="#__codelineno-11-83"></a>
<a id="__codelineno-11-84" name="__codelineno-11-84" href="#__codelineno-11-84"></a>
<a id="__codelineno-11-85" name="__codelineno-11-85" href="#__codelineno-11-85"></a>targetPort: 14268
<a id="__codelineno-11-86" name="__codelineno-11-86" href="#__codelineno-11-86"></a>
<a id="__codelineno-11-87" name="__codelineno-11-87" href="#__codelineno-11-87"></a>
<a id="__codelineno-11-88" name="__codelineno-11-88" href="#__codelineno-11-88"></a>
<a id="__codelineno-11-89" name="__codelineno-11-89" href="#__codelineno-11-89"></a>- appProtocol: grpc
<a id="__codelineno-11-90" name="__codelineno-11-90" href="#__codelineno-11-90"></a>
<a id="__codelineno-11-91" name="__codelineno-11-91" href="#__codelineno-11-91"></a>
<a id="__codelineno-11-92" name="__codelineno-11-92" href="#__codelineno-11-92"></a>
<a id="__codelineno-11-93" name="__codelineno-11-93" href="#__codelineno-11-93"></a>name: otlp
<a id="__codelineno-11-94" name="__codelineno-11-94" href="#__codelineno-11-94"></a>
<a id="__codelineno-11-95" name="__codelineno-11-95" href="#__codelineno-11-95"></a>
<a id="__codelineno-11-96" name="__codelineno-11-96" href="#__codelineno-11-96"></a>
<a id="__codelineno-11-97" name="__codelineno-11-97" href="#__codelineno-11-97"></a>port: 4317
<a id="__codelineno-11-98" name="__codelineno-11-98" href="#__codelineno-11-98"></a>
<a id="__codelineno-11-99" name="__codelineno-11-99" href="#__codelineno-11-99"></a>
<a id="__codelineno-11-100" name="__codelineno-11-100" href="#__codelineno-11-100"></a>
<a id="__codelineno-11-101" name="__codelineno-11-101" href="#__codelineno-11-101"></a>protocol: TCP
<a id="__codelineno-11-102" name="__codelineno-11-102" href="#__codelineno-11-102"></a>
<a id="__codelineno-11-103" name="__codelineno-11-103" href="#__codelineno-11-103"></a>
<a id="__codelineno-11-104" name="__codelineno-11-104" href="#__codelineno-11-104"></a>
<a id="__codelineno-11-105" name="__codelineno-11-105" href="#__codelineno-11-105"></a>targetPort: 4317
<a id="__codelineno-11-106" name="__codelineno-11-106" href="#__codelineno-11-106"></a>
<a id="__codelineno-11-107" name="__codelineno-11-107" href="#__codelineno-11-107"></a>
<a id="__codelineno-11-108" name="__codelineno-11-108" href="#__codelineno-11-108"></a>
<a id="__codelineno-11-109" name="__codelineno-11-109" href="#__codelineno-11-109"></a>- name: otlp-http
<a id="__codelineno-11-110" name="__codelineno-11-110" href="#__codelineno-11-110"></a>
<a id="__codelineno-11-111" name="__codelineno-11-111" href="#__codelineno-11-111"></a>
<a id="__codelineno-11-112" name="__codelineno-11-112" href="#__codelineno-11-112"></a>
<a id="__codelineno-11-113" name="__codelineno-11-113" href="#__codelineno-11-113"></a>port: 4318
<a id="__codelineno-11-114" name="__codelineno-11-114" href="#__codelineno-11-114"></a>
<a id="__codelineno-11-115" name="__codelineno-11-115" href="#__codelineno-11-115"></a>
<a id="__codelineno-11-116" name="__codelineno-11-116" href="#__codelineno-11-116"></a>
<a id="__codelineno-11-117" name="__codelineno-11-117" href="#__codelineno-11-117"></a>protocol: TCP
<a id="__codelineno-11-118" name="__codelineno-11-118" href="#__codelineno-11-118"></a>
<a id="__codelineno-11-119" name="__codelineno-11-119" href="#__codelineno-11-119"></a>
<a id="__codelineno-11-120" name="__codelineno-11-120" href="#__codelineno-11-120"></a>
<a id="__codelineno-11-121" name="__codelineno-11-121" href="#__codelineno-11-121"></a>targetPort: 4318
<a id="__codelineno-11-122" name="__codelineno-11-122" href="#__codelineno-11-122"></a>
<a id="__codelineno-11-123" name="__codelineno-11-123" href="#__codelineno-11-123"></a>
<a id="__codelineno-11-124" name="__codelineno-11-124" href="#__codelineno-11-124"></a>
<a id="__codelineno-11-125" name="__codelineno-11-125" href="#__codelineno-11-125"></a>- name: zipkin
<a id="__codelineno-11-126" name="__codelineno-11-126" href="#__codelineno-11-126"></a>
<a id="__codelineno-11-127" name="__codelineno-11-127" href="#__codelineno-11-127"></a>
<a id="__codelineno-11-128" name="__codelineno-11-128" href="#__codelineno-11-128"></a>
<a id="__codelineno-11-129" name="__codelineno-11-129" href="#__codelineno-11-129"></a>port: 9411
<a id="__codelineno-11-130" name="__codelineno-11-130" href="#__codelineno-11-130"></a>
<a id="__codelineno-11-131" name="__codelineno-11-131" href="#__codelineno-11-131"></a>
<a id="__codelineno-11-132" name="__codelineno-11-132" href="#__codelineno-11-132"></a>
<a id="__codelineno-11-133" name="__codelineno-11-133" href="#__codelineno-11-133"></a>protocol: TCP
<a id="__codelineno-11-134" name="__codelineno-11-134" href="#__codelineno-11-134"></a>
<a id="__codelineno-11-135" name="__codelineno-11-135" href="#__codelineno-11-135"></a>
<a id="__codelineno-11-136" name="__codelineno-11-136" href="#__codelineno-11-136"></a>
<a id="__codelineno-11-137" name="__codelineno-11-137" href="#__codelineno-11-137"></a>targetPort: 9411
<a id="__codelineno-11-138" name="__codelineno-11-138" href="#__codelineno-11-138"></a>
<a id="__codelineno-11-139" name="__codelineno-11-139" href="#__codelineno-11-139"></a>
<a id="__codelineno-11-140" name="__codelineno-11-140" href="#__codelineno-11-140"></a>
<a id="__codelineno-11-141" name="__codelineno-11-141" href="#__codelineno-11-141"></a>selector:
<a id="__codelineno-11-142" name="__codelineno-11-142" href="#__codelineno-11-142"></a>
<a id="__codelineno-11-143" name="__codelineno-11-143" href="#__codelineno-11-143"></a>
<a id="__codelineno-11-144" name="__codelineno-11-144" href="#__codelineno-11-144"></a>
<a id="__codelineno-11-145" name="__codelineno-11-145" href="#__codelineno-11-145"></a>app.kubernetes.io/instance: dynatrace-otel-collector
<a id="__codelineno-11-146" name="__codelineno-11-146" href="#__codelineno-11-146"></a>
<a id="__codelineno-11-147" name="__codelineno-11-147" href="#__codelineno-11-147"></a>
<a id="__codelineno-11-148" name="__codelineno-11-148" href="#__codelineno-11-148"></a>
<a id="__codelineno-11-149" name="__codelineno-11-149" href="#__codelineno-11-149"></a>app.kubernetes.io/name: dynatrace-otel-collector
<a id="__codelineno-11-150" name="__codelineno-11-150" href="#__codelineno-11-150"></a>
<a id="__codelineno-11-151" name="__codelineno-11-151" href="#__codelineno-11-151"></a>
<a id="__codelineno-11-152" name="__codelineno-11-152" href="#__codelineno-11-152"></a>
<a id="__codelineno-11-153" name="__codelineno-11-153" href="#__codelineno-11-153"></a>sessionAffinity: None
<a id="__codelineno-11-154" name="__codelineno-11-154" href="#__codelineno-11-154"></a>
<a id="__codelineno-11-155" name="__codelineno-11-155" href="#__codelineno-11-155"></a>
<a id="__codelineno-11-156" name="__codelineno-11-156" href="#__codelineno-11-156"></a>
<a id="__codelineno-11-157" name="__codelineno-11-157" href="#__codelineno-11-157"></a>type: ClusterIP
</code></pre></div>
<p>ConfigMap</p>
<p>Create a ConfigMap by applying the following configuration with <code>kubectl apply</code> to set up the Collector configuration.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>apiVersion: v1
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>kind: ConfigMap
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>metadata:
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>name: dynatrace-otel-collector-config
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>data:
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>otel-collector-config: |
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>receivers:
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>otlp:
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a>
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>protocols:
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>
<a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a>
<a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>
<a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a>grpc:
<a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>
<a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a>
<a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a>
<a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a>
<a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a>
<a id="__codelineno-12-44" name="__codelineno-12-44" href="#__codelineno-12-44"></a>
<a id="__codelineno-12-45" name="__codelineno-12-45" href="#__codelineno-12-45"></a>http:
<a id="__codelineno-12-46" name="__codelineno-12-46" href="#__codelineno-12-46"></a>
<a id="__codelineno-12-47" name="__codelineno-12-47" href="#__codelineno-12-47"></a>
<a id="__codelineno-12-48" name="__codelineno-12-48" href="#__codelineno-12-48"></a>
<a id="__codelineno-12-49" name="__codelineno-12-49" href="#__codelineno-12-49"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-12-50" name="__codelineno-12-50" href="#__codelineno-12-50"></a>
<a id="__codelineno-12-51" name="__codelineno-12-51" href="#__codelineno-12-51"></a>
<a id="__codelineno-12-52" name="__codelineno-12-52" href="#__codelineno-12-52"></a>
<a id="__codelineno-12-53" name="__codelineno-12-53" href="#__codelineno-12-53"></a>exporters:
<a id="__codelineno-12-54" name="__codelineno-12-54" href="#__codelineno-12-54"></a>
<a id="__codelineno-12-55" name="__codelineno-12-55" href="#__codelineno-12-55"></a>
<a id="__codelineno-12-56" name="__codelineno-12-56" href="#__codelineno-12-56"></a>
<a id="__codelineno-12-57" name="__codelineno-12-57" href="#__codelineno-12-57"></a>otlp_http:
<a id="__codelineno-12-58" name="__codelineno-12-58" href="#__codelineno-12-58"></a>
<a id="__codelineno-12-59" name="__codelineno-12-59" href="#__codelineno-12-59"></a>
<a id="__codelineno-12-60" name="__codelineno-12-60" href="#__codelineno-12-60"></a>
<a id="__codelineno-12-61" name="__codelineno-12-61" href="#__codelineno-12-61"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-12-62" name="__codelineno-12-62" href="#__codelineno-12-62"></a>
<a id="__codelineno-12-63" name="__codelineno-12-63" href="#__codelineno-12-63"></a>
<a id="__codelineno-12-64" name="__codelineno-12-64" href="#__codelineno-12-64"></a>
<a id="__codelineno-12-65" name="__codelineno-12-65" href="#__codelineno-12-65"></a>headers:
<a id="__codelineno-12-66" name="__codelineno-12-66" href="#__codelineno-12-66"></a>
<a id="__codelineno-12-67" name="__codelineno-12-67" href="#__codelineno-12-67"></a>
<a id="__codelineno-12-68" name="__codelineno-12-68" href="#__codelineno-12-68"></a>
<a id="__codelineno-12-69" name="__codelineno-12-69" href="#__codelineno-12-69"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-12-70" name="__codelineno-12-70" href="#__codelineno-12-70"></a>
<a id="__codelineno-12-71" name="__codelineno-12-71" href="#__codelineno-12-71"></a>
<a id="__codelineno-12-72" name="__codelineno-12-72" href="#__codelineno-12-72"></a>
<a id="__codelineno-12-73" name="__codelineno-12-73" href="#__codelineno-12-73"></a>service:
<a id="__codelineno-12-74" name="__codelineno-12-74" href="#__codelineno-12-74"></a>
<a id="__codelineno-12-75" name="__codelineno-12-75" href="#__codelineno-12-75"></a>
<a id="__codelineno-12-76" name="__codelineno-12-76" href="#__codelineno-12-76"></a>
<a id="__codelineno-12-77" name="__codelineno-12-77" href="#__codelineno-12-77"></a>pipelines:
<a id="__codelineno-12-78" name="__codelineno-12-78" href="#__codelineno-12-78"></a>
<a id="__codelineno-12-79" name="__codelineno-12-79" href="#__codelineno-12-79"></a>
<a id="__codelineno-12-80" name="__codelineno-12-80" href="#__codelineno-12-80"></a>
<a id="__codelineno-12-81" name="__codelineno-12-81" href="#__codelineno-12-81"></a>traces:
<a id="__codelineno-12-82" name="__codelineno-12-82" href="#__codelineno-12-82"></a>
<a id="__codelineno-12-83" name="__codelineno-12-83" href="#__codelineno-12-83"></a>
<a id="__codelineno-12-84" name="__codelineno-12-84" href="#__codelineno-12-84"></a>
<a id="__codelineno-12-85" name="__codelineno-12-85" href="#__codelineno-12-85"></a>receivers: [otlp]
<a id="__codelineno-12-86" name="__codelineno-12-86" href="#__codelineno-12-86"></a>
<a id="__codelineno-12-87" name="__codelineno-12-87" href="#__codelineno-12-87"></a>
<a id="__codelineno-12-88" name="__codelineno-12-88" href="#__codelineno-12-88"></a>
<a id="__codelineno-12-89" name="__codelineno-12-89" href="#__codelineno-12-89"></a>processors: []
<a id="__codelineno-12-90" name="__codelineno-12-90" href="#__codelineno-12-90"></a>
<a id="__codelineno-12-91" name="__codelineno-12-91" href="#__codelineno-12-91"></a>
<a id="__codelineno-12-92" name="__codelineno-12-92" href="#__codelineno-12-92"></a>
<a id="__codelineno-12-93" name="__codelineno-12-93" href="#__codelineno-12-93"></a>exporters: [otlp_http]
<a id="__codelineno-12-94" name="__codelineno-12-94" href="#__codelineno-12-94"></a>
<a id="__codelineno-12-95" name="__codelineno-12-95" href="#__codelineno-12-95"></a>
<a id="__codelineno-12-96" name="__codelineno-12-96" href="#__codelineno-12-96"></a>
<a id="__codelineno-12-97" name="__codelineno-12-97" href="#__codelineno-12-97"></a>metrics:
<a id="__codelineno-12-98" name="__codelineno-12-98" href="#__codelineno-12-98"></a>
<a id="__codelineno-12-99" name="__codelineno-12-99" href="#__codelineno-12-99"></a>
<a id="__codelineno-12-100" name="__codelineno-12-100" href="#__codelineno-12-100"></a>
<a id="__codelineno-12-101" name="__codelineno-12-101" href="#__codelineno-12-101"></a>receivers: [otlp]
<a id="__codelineno-12-102" name="__codelineno-12-102" href="#__codelineno-12-102"></a>
<a id="__codelineno-12-103" name="__codelineno-12-103" href="#__codelineno-12-103"></a>
<a id="__codelineno-12-104" name="__codelineno-12-104" href="#__codelineno-12-104"></a>
<a id="__codelineno-12-105" name="__codelineno-12-105" href="#__codelineno-12-105"></a>processors: []
<a id="__codelineno-12-106" name="__codelineno-12-106" href="#__codelineno-12-106"></a>
<a id="__codelineno-12-107" name="__codelineno-12-107" href="#__codelineno-12-107"></a>
<a id="__codelineno-12-108" name="__codelineno-12-108" href="#__codelineno-12-108"></a>
<a id="__codelineno-12-109" name="__codelineno-12-109" href="#__codelineno-12-109"></a>exporters: [otlp_http]
<a id="__codelineno-12-110" name="__codelineno-12-110" href="#__codelineno-12-110"></a>
<a id="__codelineno-12-111" name="__codelineno-12-111" href="#__codelineno-12-111"></a>
<a id="__codelineno-12-112" name="__codelineno-12-112" href="#__codelineno-12-112"></a>
<a id="__codelineno-12-113" name="__codelineno-12-113" href="#__codelineno-12-113"></a>logs:
<a id="__codelineno-12-114" name="__codelineno-12-114" href="#__codelineno-12-114"></a>
<a id="__codelineno-12-115" name="__codelineno-12-115" href="#__codelineno-12-115"></a>
<a id="__codelineno-12-116" name="__codelineno-12-116" href="#__codelineno-12-116"></a>
<a id="__codelineno-12-117" name="__codelineno-12-117" href="#__codelineno-12-117"></a>receivers: [otlp]
<a id="__codelineno-12-118" name="__codelineno-12-118" href="#__codelineno-12-118"></a>
<a id="__codelineno-12-119" name="__codelineno-12-119" href="#__codelineno-12-119"></a>
<a id="__codelineno-12-120" name="__codelineno-12-120" href="#__codelineno-12-120"></a>
<a id="__codelineno-12-121" name="__codelineno-12-121" href="#__codelineno-12-121"></a>processors: []
<a id="__codelineno-12-122" name="__codelineno-12-122" href="#__codelineno-12-122"></a>
<a id="__codelineno-12-123" name="__codelineno-12-123" href="#__codelineno-12-123"></a>
<a id="__codelineno-12-124" name="__codelineno-12-124" href="#__codelineno-12-124"></a>
<a id="__codelineno-12-125" name="__codelineno-12-125" href="#__codelineno-12-125"></a>exporters: [otlp_http]
</code></pre></div>
<p>Manifest</p>
<p>Apply the following manifest configuration with <code>kubectl apply</code> to create the Dynatrace Collector Deployment in <a href="#deployment-modes">gateway mode</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>apiVersion: apps/v1
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>kind: Deployment
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>metadata:
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>name: dynatrace-otel-collector
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>spec:
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>selector:
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>matchLabels:
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a>
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>
<a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a>app.kubernetes.io/name: dynatrace-otel-collector
<a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a>
<a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a>
<a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a>
<a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a>replicas: 1
<a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a>
<a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a>
<a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a>
<a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a>template:
<a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a>
<a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a>
<a id="__codelineno-13-40" name="__codelineno-13-40" href="#__codelineno-13-40"></a>
<a id="__codelineno-13-41" name="__codelineno-13-41" href="#__codelineno-13-41"></a>metadata:
<a id="__codelineno-13-42" name="__codelineno-13-42" href="#__codelineno-13-42"></a>
<a id="__codelineno-13-43" name="__codelineno-13-43" href="#__codelineno-13-43"></a>
<a id="__codelineno-13-44" name="__codelineno-13-44" href="#__codelineno-13-44"></a>
<a id="__codelineno-13-45" name="__codelineno-13-45" href="#__codelineno-13-45"></a>labels:
<a id="__codelineno-13-46" name="__codelineno-13-46" href="#__codelineno-13-46"></a>
<a id="__codelineno-13-47" name="__codelineno-13-47" href="#__codelineno-13-47"></a>
<a id="__codelineno-13-48" name="__codelineno-13-48" href="#__codelineno-13-48"></a>
<a id="__codelineno-13-49" name="__codelineno-13-49" href="#__codelineno-13-49"></a>app.kubernetes.io/instance: dynatrace-otel-collector
<a id="__codelineno-13-50" name="__codelineno-13-50" href="#__codelineno-13-50"></a>
<a id="__codelineno-13-51" name="__codelineno-13-51" href="#__codelineno-13-51"></a>
<a id="__codelineno-13-52" name="__codelineno-13-52" href="#__codelineno-13-52"></a>
<a id="__codelineno-13-53" name="__codelineno-13-53" href="#__codelineno-13-53"></a>app.kubernetes.io/name: dynatrace-otel-collector
<a id="__codelineno-13-54" name="__codelineno-13-54" href="#__codelineno-13-54"></a>
<a id="__codelineno-13-55" name="__codelineno-13-55" href="#__codelineno-13-55"></a>
<a id="__codelineno-13-56" name="__codelineno-13-56" href="#__codelineno-13-56"></a>
<a id="__codelineno-13-57" name="__codelineno-13-57" href="#__codelineno-13-57"></a>spec:
<a id="__codelineno-13-58" name="__codelineno-13-58" href="#__codelineno-13-58"></a>
<a id="__codelineno-13-59" name="__codelineno-13-59" href="#__codelineno-13-59"></a>
<a id="__codelineno-13-60" name="__codelineno-13-60" href="#__codelineno-13-60"></a>
<a id="__codelineno-13-61" name="__codelineno-13-61" href="#__codelineno-13-61"></a>#You may have to configure RBAC to grant proper permissions for enriching data
<a id="__codelineno-13-62" name="__codelineno-13-62" href="#__codelineno-13-62"></a>
<a id="__codelineno-13-63" name="__codelineno-13-63" href="#__codelineno-13-63"></a>
<a id="__codelineno-13-64" name="__codelineno-13-64" href="#__codelineno-13-64"></a>
<a id="__codelineno-13-65" name="__codelineno-13-65" href="#__codelineno-13-65"></a>#serviceAccountName: dynatrace-otel-collector
<a id="__codelineno-13-66" name="__codelineno-13-66" href="#__codelineno-13-66"></a>
<a id="__codelineno-13-67" name="__codelineno-13-67" href="#__codelineno-13-67"></a>
<a id="__codelineno-13-68" name="__codelineno-13-68" href="#__codelineno-13-68"></a>
<a id="__codelineno-13-69" name="__codelineno-13-69" href="#__codelineno-13-69"></a>containers:
<a id="__codelineno-13-70" name="__codelineno-13-70" href="#__codelineno-13-70"></a>
<a id="__codelineno-13-71" name="__codelineno-13-71" href="#__codelineno-13-71"></a>
<a id="__codelineno-13-72" name="__codelineno-13-72" href="#__codelineno-13-72"></a>
<a id="__codelineno-13-73" name="__codelineno-13-73" href="#__codelineno-13-73"></a>- name: dynatrace-otel-collector
<a id="__codelineno-13-74" name="__codelineno-13-74" href="#__codelineno-13-74"></a>
<a id="__codelineno-13-75" name="__codelineno-13-75" href="#__codelineno-13-75"></a>
<a id="__codelineno-13-76" name="__codelineno-13-76" href="#__codelineno-13-76"></a>
<a id="__codelineno-13-77" name="__codelineno-13-77" href="#__codelineno-13-77"></a>args: [&quot;--config&quot;, &quot;/conf/otel-collector-config.yaml&quot;]
<a id="__codelineno-13-78" name="__codelineno-13-78" href="#__codelineno-13-78"></a>
<a id="__codelineno-13-79" name="__codelineno-13-79" href="#__codelineno-13-79"></a>
<a id="__codelineno-13-80" name="__codelineno-13-80" href="#__codelineno-13-80"></a>
<a id="__codelineno-13-81" name="__codelineno-13-81" href="#__codelineno-13-81"></a>env:
<a id="__codelineno-13-82" name="__codelineno-13-82" href="#__codelineno-13-82"></a>
<a id="__codelineno-13-83" name="__codelineno-13-83" href="#__codelineno-13-83"></a>
<a id="__codelineno-13-84" name="__codelineno-13-84" href="#__codelineno-13-84"></a>
<a id="__codelineno-13-85" name="__codelineno-13-85" href="#__codelineno-13-85"></a>- name: MY_POD_IP
<a id="__codelineno-13-86" name="__codelineno-13-86" href="#__codelineno-13-86"></a>
<a id="__codelineno-13-87" name="__codelineno-13-87" href="#__codelineno-13-87"></a>
<a id="__codelineno-13-88" name="__codelineno-13-88" href="#__codelineno-13-88"></a>
<a id="__codelineno-13-89" name="__codelineno-13-89" href="#__codelineno-13-89"></a>valueFrom:
<a id="__codelineno-13-90" name="__codelineno-13-90" href="#__codelineno-13-90"></a>
<a id="__codelineno-13-91" name="__codelineno-13-91" href="#__codelineno-13-91"></a>
<a id="__codelineno-13-92" name="__codelineno-13-92" href="#__codelineno-13-92"></a>
<a id="__codelineno-13-93" name="__codelineno-13-93" href="#__codelineno-13-93"></a>fieldRef:
<a id="__codelineno-13-94" name="__codelineno-13-94" href="#__codelineno-13-94"></a>
<a id="__codelineno-13-95" name="__codelineno-13-95" href="#__codelineno-13-95"></a>
<a id="__codelineno-13-96" name="__codelineno-13-96" href="#__codelineno-13-96"></a>
<a id="__codelineno-13-97" name="__codelineno-13-97" href="#__codelineno-13-97"></a>apiVersion: v1
<a id="__codelineno-13-98" name="__codelineno-13-98" href="#__codelineno-13-98"></a>
<a id="__codelineno-13-99" name="__codelineno-13-99" href="#__codelineno-13-99"></a>
<a id="__codelineno-13-100" name="__codelineno-13-100" href="#__codelineno-13-100"></a>
<a id="__codelineno-13-101" name="__codelineno-13-101" href="#__codelineno-13-101"></a>fieldPath: status.podIP
<a id="__codelineno-13-102" name="__codelineno-13-102" href="#__codelineno-13-102"></a>
<a id="__codelineno-13-103" name="__codelineno-13-103" href="#__codelineno-13-103"></a>
<a id="__codelineno-13-104" name="__codelineno-13-104" href="#__codelineno-13-104"></a>
<a id="__codelineno-13-105" name="__codelineno-13-105" href="#__codelineno-13-105"></a>- name: DT_ENDPOINT
<a id="__codelineno-13-106" name="__codelineno-13-106" href="#__codelineno-13-106"></a>
<a id="__codelineno-13-107" name="__codelineno-13-107" href="#__codelineno-13-107"></a>
<a id="__codelineno-13-108" name="__codelineno-13-108" href="#__codelineno-13-108"></a>
<a id="__codelineno-13-109" name="__codelineno-13-109" href="#__codelineno-13-109"></a>valueFrom:
<a id="__codelineno-13-110" name="__codelineno-13-110" href="#__codelineno-13-110"></a>
<a id="__codelineno-13-111" name="__codelineno-13-111" href="#__codelineno-13-111"></a>
<a id="__codelineno-13-112" name="__codelineno-13-112" href="#__codelineno-13-112"></a>
<a id="__codelineno-13-113" name="__codelineno-13-113" href="#__codelineno-13-113"></a>secretKeyRef:
<a id="__codelineno-13-114" name="__codelineno-13-114" href="#__codelineno-13-114"></a>
<a id="__codelineno-13-115" name="__codelineno-13-115" href="#__codelineno-13-115"></a>
<a id="__codelineno-13-116" name="__codelineno-13-116" href="#__codelineno-13-116"></a>
<a id="__codelineno-13-117" name="__codelineno-13-117" href="#__codelineno-13-117"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-13-118" name="__codelineno-13-118" href="#__codelineno-13-118"></a>
<a id="__codelineno-13-119" name="__codelineno-13-119" href="#__codelineno-13-119"></a>
<a id="__codelineno-13-120" name="__codelineno-13-120" href="#__codelineno-13-120"></a>
<a id="__codelineno-13-121" name="__codelineno-13-121" href="#__codelineno-13-121"></a>key: DT_ENDPOINT
<a id="__codelineno-13-122" name="__codelineno-13-122" href="#__codelineno-13-122"></a>
<a id="__codelineno-13-123" name="__codelineno-13-123" href="#__codelineno-13-123"></a>
<a id="__codelineno-13-124" name="__codelineno-13-124" href="#__codelineno-13-124"></a>
<a id="__codelineno-13-125" name="__codelineno-13-125" href="#__codelineno-13-125"></a>- name: DT_API_TOKEN
<a id="__codelineno-13-126" name="__codelineno-13-126" href="#__codelineno-13-126"></a>
<a id="__codelineno-13-127" name="__codelineno-13-127" href="#__codelineno-13-127"></a>
<a id="__codelineno-13-128" name="__codelineno-13-128" href="#__codelineno-13-128"></a>
<a id="__codelineno-13-129" name="__codelineno-13-129" href="#__codelineno-13-129"></a>valueFrom:
<a id="__codelineno-13-130" name="__codelineno-13-130" href="#__codelineno-13-130"></a>
<a id="__codelineno-13-131" name="__codelineno-13-131" href="#__codelineno-13-131"></a>
<a id="__codelineno-13-132" name="__codelineno-13-132" href="#__codelineno-13-132"></a>
<a id="__codelineno-13-133" name="__codelineno-13-133" href="#__codelineno-13-133"></a>secretKeyRef:
<a id="__codelineno-13-134" name="__codelineno-13-134" href="#__codelineno-13-134"></a>
<a id="__codelineno-13-135" name="__codelineno-13-135" href="#__codelineno-13-135"></a>
<a id="__codelineno-13-136" name="__codelineno-13-136" href="#__codelineno-13-136"></a>
<a id="__codelineno-13-137" name="__codelineno-13-137" href="#__codelineno-13-137"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-13-138" name="__codelineno-13-138" href="#__codelineno-13-138"></a>
<a id="__codelineno-13-139" name="__codelineno-13-139" href="#__codelineno-13-139"></a>
<a id="__codelineno-13-140" name="__codelineno-13-140" href="#__codelineno-13-140"></a>
<a id="__codelineno-13-141" name="__codelineno-13-141" href="#__codelineno-13-141"></a>key: DT_API_TOKEN
<a id="__codelineno-13-142" name="__codelineno-13-142" href="#__codelineno-13-142"></a>
<a id="__codelineno-13-143" name="__codelineno-13-143" href="#__codelineno-13-143"></a>
<a id="__codelineno-13-144" name="__codelineno-13-144" href="#__codelineno-13-144"></a>
<a id="__codelineno-13-145" name="__codelineno-13-145" href="#__codelineno-13-145"></a>image: ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0
<a id="__codelineno-13-146" name="__codelineno-13-146" href="#__codelineno-13-146"></a>
<a id="__codelineno-13-147" name="__codelineno-13-147" href="#__codelineno-13-147"></a>
<a id="__codelineno-13-148" name="__codelineno-13-148" href="#__codelineno-13-148"></a>
<a id="__codelineno-13-149" name="__codelineno-13-149" href="#__codelineno-13-149"></a>resources:
<a id="__codelineno-13-150" name="__codelineno-13-150" href="#__codelineno-13-150"></a>
<a id="__codelineno-13-151" name="__codelineno-13-151" href="#__codelineno-13-151"></a>
<a id="__codelineno-13-152" name="__codelineno-13-152" href="#__codelineno-13-152"></a>
<a id="__codelineno-13-153" name="__codelineno-13-153" href="#__codelineno-13-153"></a>limits:
<a id="__codelineno-13-154" name="__codelineno-13-154" href="#__codelineno-13-154"></a>
<a id="__codelineno-13-155" name="__codelineno-13-155" href="#__codelineno-13-155"></a>
<a id="__codelineno-13-156" name="__codelineno-13-156" href="#__codelineno-13-156"></a>
<a id="__codelineno-13-157" name="__codelineno-13-157" href="#__codelineno-13-157"></a>memory: 512Mi
<a id="__codelineno-13-158" name="__codelineno-13-158" href="#__codelineno-13-158"></a>
<a id="__codelineno-13-159" name="__codelineno-13-159" href="#__codelineno-13-159"></a>
<a id="__codelineno-13-160" name="__codelineno-13-160" href="#__codelineno-13-160"></a>
<a id="__codelineno-13-161" name="__codelineno-13-161" href="#__codelineno-13-161"></a>ports:
<a id="__codelineno-13-162" name="__codelineno-13-162" href="#__codelineno-13-162"></a>
<a id="__codelineno-13-163" name="__codelineno-13-163" href="#__codelineno-13-163"></a>
<a id="__codelineno-13-164" name="__codelineno-13-164" href="#__codelineno-13-164"></a>
<a id="__codelineno-13-165" name="__codelineno-13-165" href="#__codelineno-13-165"></a>- containerPort: 8888 # Default endpoint for querying metrics of prometheus exporter.
<a id="__codelineno-13-166" name="__codelineno-13-166" href="#__codelineno-13-166"></a>
<a id="__codelineno-13-167" name="__codelineno-13-167" href="#__codelineno-13-167"></a>
<a id="__codelineno-13-168" name="__codelineno-13-168" href="#__codelineno-13-168"></a>
<a id="__codelineno-13-169" name="__codelineno-13-169" href="#__codelineno-13-169"></a>volumeMounts:
<a id="__codelineno-13-170" name="__codelineno-13-170" href="#__codelineno-13-170"></a>
<a id="__codelineno-13-171" name="__codelineno-13-171" href="#__codelineno-13-171"></a>
<a id="__codelineno-13-172" name="__codelineno-13-172" href="#__codelineno-13-172"></a>
<a id="__codelineno-13-173" name="__codelineno-13-173" href="#__codelineno-13-173"></a>- name: dynatrace-otel-collector-config
<a id="__codelineno-13-174" name="__codelineno-13-174" href="#__codelineno-13-174"></a>
<a id="__codelineno-13-175" name="__codelineno-13-175" href="#__codelineno-13-175"></a>
<a id="__codelineno-13-176" name="__codelineno-13-176" href="#__codelineno-13-176"></a>
<a id="__codelineno-13-177" name="__codelineno-13-177" href="#__codelineno-13-177"></a>mountPath: /conf
<a id="__codelineno-13-178" name="__codelineno-13-178" href="#__codelineno-13-178"></a>
<a id="__codelineno-13-179" name="__codelineno-13-179" href="#__codelineno-13-179"></a>
<a id="__codelineno-13-180" name="__codelineno-13-180" href="#__codelineno-13-180"></a>
<a id="__codelineno-13-181" name="__codelineno-13-181" href="#__codelineno-13-181"></a>volumes:
<a id="__codelineno-13-182" name="__codelineno-13-182" href="#__codelineno-13-182"></a>
<a id="__codelineno-13-183" name="__codelineno-13-183" href="#__codelineno-13-183"></a>
<a id="__codelineno-13-184" name="__codelineno-13-184" href="#__codelineno-13-184"></a>
<a id="__codelineno-13-185" name="__codelineno-13-185" href="#__codelineno-13-185"></a>- configMap:
<a id="__codelineno-13-186" name="__codelineno-13-186" href="#__codelineno-13-186"></a>
<a id="__codelineno-13-187" name="__codelineno-13-187" href="#__codelineno-13-187"></a>
<a id="__codelineno-13-188" name="__codelineno-13-188" href="#__codelineno-13-188"></a>
<a id="__codelineno-13-189" name="__codelineno-13-189" href="#__codelineno-13-189"></a>name: dynatrace-otel-collector-config
<a id="__codelineno-13-190" name="__codelineno-13-190" href="#__codelineno-13-190"></a>
<a id="__codelineno-13-191" name="__codelineno-13-191" href="#__codelineno-13-191"></a>
<a id="__codelineno-13-192" name="__codelineno-13-192" href="#__codelineno-13-192"></a>
<a id="__codelineno-13-193" name="__codelineno-13-193" href="#__codelineno-13-193"></a>items:
<a id="__codelineno-13-194" name="__codelineno-13-194" href="#__codelineno-13-194"></a>
<a id="__codelineno-13-195" name="__codelineno-13-195" href="#__codelineno-13-195"></a>
<a id="__codelineno-13-196" name="__codelineno-13-196" href="#__codelineno-13-196"></a>
<a id="__codelineno-13-197" name="__codelineno-13-197" href="#__codelineno-13-197"></a>- key: otel-collector-config
<a id="__codelineno-13-198" name="__codelineno-13-198" href="#__codelineno-13-198"></a>
<a id="__codelineno-13-199" name="__codelineno-13-199" href="#__codelineno-13-199"></a>
<a id="__codelineno-13-200" name="__codelineno-13-200" href="#__codelineno-13-200"></a>
<a id="__codelineno-13-201" name="__codelineno-13-201" href="#__codelineno-13-201"></a>path: otel-collector-config.yaml
<a id="__codelineno-13-202" name="__codelineno-13-202" href="#__codelineno-13-202"></a>
<a id="__codelineno-13-203" name="__codelineno-13-203" href="#__codelineno-13-203"></a>
<a id="__codelineno-13-204" name="__codelineno-13-204" href="#__codelineno-13-204"></a>
<a id="__codelineno-13-205" name="__codelineno-13-205" href="#__codelineno-13-205"></a>name: dynatrace-otel-collector-config
</code></pre></div>
<p>Service account</p>
<p>In Kubernetes, it is common to enrich OpenTelemetry signals using the <a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Kubernetes Attributes processor</a>. This requires a Kubernetes service account, which is automatically configured when using Operator or Helm.</p>
<p>For raw manifests, this needs to be configured manually by adding a <code>spec.serviceAccountName: collector</code> entry to the deployment manifest.</p>
<h3 id="docker">Docker<a class="headerlink" href="#docker" title="Permanent link">&para;</a></h3>
<p>Run the following command to download the image of the Dynatrace Collector:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>docker pull ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0
</code></pre></div>
<p>Next, ensure that the <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector configuration file</a> exists in the current working directory and run the Collector image with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>docker run -v $(pwd)/otel-collector-config.yaml:/etc/otelcol/otel-collector-config.yaml ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0 --config=/etc/otelcol/otel-collector-config.yaml
</code></pre></div>
<p>The <code>-v</code> parameter maps the local configuration file to the given container path, which is subsequently passed to the <code>--config</code> parameter.</p>
<p>Make sure to map all required network ports with the <a href="https://docs.docker.com/reference/cli/docker/container/run/#publish"><code>-p</code> parameter√Ø¬ª¬ø</a>. For example, if you accept OTLP gRPC requests on the default port, you need to specify port 4317. For OTLP over HTTP specify port 4318.</p>
<h4 id="docker-compose">Docker Compose<a class="headerlink" href="#docker-compose" title="Permanent link">&para;</a></h4>
<p>Use the following configuration in your Compose file to deploy and run the Collector image:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>version: &quot;3&quot;
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>services:
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>collector:
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>image: ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>command: [&quot;--config=/etc/otelcol/otel-collector-config.yaml&quot;]
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>volumes:
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>- ./otel-collector-config.yaml:/etc/otelcol/otel-collector-config.yaml
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a>
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a>
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a>
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a>ports:
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a>
<a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a>
<a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a>
<a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a>- &quot;4317:4317&quot;   # OTLP gRPC
<a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a>
<a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a>
<a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a>
<a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a>- &quot;4318:4318&quot;   # OTLP HTTP
</code></pre></div>
<p>In the example above, <code>ports</code> is configured for gRPC and HTTP. Adjust the list of ports according to your specific use case.</p>
<h3 id="windows-macos-and-linux">Windows, macOS, and Linux<a class="headerlink" href="#windows-macos-and-linux" title="Permanent link">&para;</a></h3>
<p>To install the Collector binary manually</p>
<ol>
<li>Download the <a href="https://github.com/Dynatrace/dynatrace-otel-collector/releases/v0.44.0">dynatrace-otel-collector√Ø¬ª¬ø</a> for your operating system from GitHub.</li>
<li>Decompress the archive file.</li>
<li>Set up the desired configuration and save it to <code>otel-collector-config.yaml</code>.</li>
<li>Run the <code>dynatrace-otel-collector</code> binary and pass the path to the configuration file using the <code>--config</code> parameter.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>./dynatrace-otel-collector --config=$(pwd)/otel-collector-config.yaml
</code></pre></div>
<h3 id="linux-installer-packages">Linux installer packages<a class="headerlink" href="#linux-installer-packages" title="Permanent link">&para;</a></h3>
<p>Dynatrace also provides DEB and RPM installer packages for Linux systems on x86-64 and ARM64 architectures.</p>
<p>Required init system</p>
<p>The installer packages require Systemd to be the active init system.</p>
<p>To deploy the Collector using an installer package, download the <a href="https://github.com/Dynatrace/dynatrace-otel-collector/releases/v0.44.0">dynatrace-otel-collector√Ø¬ª¬ø</a> for your operating system from GitHub, and install it using root privileges and the following commands.</p>
<p>Replace the following two placeholders in the commands with their actual content:</p>
<ul>
<li><code>&lt;VERSION&gt;</code> with the version tag of the download</li>
<li><code>&lt;ARCH&gt;</code> with the system architecture tag (that is, <code>x86_64</code> or <code>arm64</code>) of the download</li>
</ul>
<p>Debian (.deb)</p>
<p>Red Hat (.rpm)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>apt-get update
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>dpkg -i dynatrace-otel-collector_&lt;VERSION&gt;_Linux_&lt;ARCH&gt;.deb
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>yum update
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>rpm -ivh dynatrace-otel-collector_&lt;VERSION&gt;_Linux_&lt;ARCH&gt;.rpm
</code></pre></div>
<h4 id="service-configuration">Service configuration<a class="headerlink" href="#service-configuration" title="Permanent link">&para;</a></h4>
<p>When first starting the service, it may fail to start if there is no <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">configuration file</a> in place yet. By default, the Collector attempts to find the file at <code>/etc/dynatrace-otel-collector/config.yaml</code>.</p>
<p>Custom configuration location</p>
<p>If you wish to use a different path, you can override the default path with the <code>--config</code> parameter as part of the <code>OTELCOL_OPTIONS</code> variable in the Systemd environment file at <code>/etc/dynatrace-otel-collector/dynatrace-otel-collector.conf</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>OTELCOL_OPTIONS=&quot;--config=&lt;HERE-PATH-TO-CONFIG-FILE&gt;&quot;
</code></pre></div>
<p>Subsequent package updates will replace this file, so be sure to back up and restore its content during an update of the Collector package. Alternatively, you can override the configuration with the <a href="https://docs.fedoraproject.org/en-US/quick-docs/systemd-understanding-and-administering/#_modifying_existing_systemd_services"><code>systemctl edit</code> command√Ø¬ª¬ø</a>.</p>
<p>To see all available configuration options, run the Collector binary with the <code>--help</code> parameter.</p>
<p>After changing the configuration, make sure to restart the service using the following command and root privileges:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>systemctl restart dynatrace-otel-collector
</code></pre></div>
<h4 id="service-status">Service status<a class="headerlink" href="#service-status" title="Permanent link">&para;</a></h4>
<p>To view the current status of the Collector service, run the following command with root privileges:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>systemctl status dynatrace-otel-collector
</code></pre></div>
<p>To check the output of the Collector service, run the following command with root privileges:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>journalctl -u dynatrace-otel-collector
</code></pre></div>
<h2 id="container-image-registries">Container image registries<a class="headerlink" href="#container-image-registries" title="Permanent link">&para;</a></h2>
<p>Container images for the Dynatrace distribution of the OpenTelemetry Collector are available in</p>
<ul>
<li>
<p><a href="https://github.com/Dynatrace/dynatrace-otel-collector/pkgs/container/dynatrace-otel-collector%2Fdynatrace-otel-collector">GitHub Container Registry (GHCR)√Ø¬ª¬ø</a></p>
</li>
<li>
<p><code>ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0</code></p>
</li>
<li>
<p><a href="https://gallery.ecr.aws/dynatrace/dynatrace-otel-collector">Amazon Elastic Container Registry (Amazon ECR)√Ø¬ª¬ø</a></p>
</li>
<li>
<p><code>public.ecr.aws/dynatrace/dynatrace-otel-collector:0.44.0</code></p>
</li>
<li>
<p><a href="https://hub.docker.com/r/dynatrace/dynatrace-otel-collector">Docker Hub Container Registry√Ø¬ª¬ø</a></p>
</li>
<li>
<p><code>dynatrace/dynatrace-otel-collector:0.44.0</code></p>
</li>
</ul>
<hr />
<h2 id="source-scalingmd">Source: scaling.md<a class="headerlink" href="#source-scalingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: How to scale the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/scaling
scraped: 2026-02-16T21:26:04.100687</p>
<hr />
<h1 id="how-to-scale-the-opentelemetry-collector">How to scale the OpenTelemetry Collector<a class="headerlink" href="#how-to-scale-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="how-to-scale-the-opentelemetry-collector_1">How to scale the OpenTelemetry Collector<a class="headerlink" href="#how-to-scale-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>10-min read</li>
<li>Published Sep 30, 2025</li>
</ul>
<p>When the Collector's CPU or memory usage exceeds a threshold that would put it
at risk of being overloaded if there were a burst of traffic, it is recommended
to find ways to either increase the resources allotted to the Collector, or to
scale processing to multiple Collector instances. We will primarily focus on
solutions available in Kubernetes here. Note that the guidance and examples in
this documentation are generalized and may not give optimal performance for your
specific case; you will need to analyze your systems to determine the best way
to scale them.</p>
<p>For more general information in the OpenTelemetry documentation, please see the
<a href="https://opentelemetry.io/docs/collector/scaling/">Scaling the Collector√Ø¬ª¬ø</a> page
on the OpenTelemetry website.</p>
<h2 id="determining-when-to-scale">Determining when to scale<a class="headerlink" href="#determining-when-to-scale" title="Permanent link">&para;</a></h2>
<p>You will want to consider scaling when you begin to approach the limits of the
resources that have been allotted to your Collector. Self-monitoring metrics
available through the Collector and metrics available from the host environment
(e.g. Kubernetes) will be helpful to track this. See our page on <a href="/docs/ingest-from/opentelemetry/collector/self-monitoring" title="How to monitor OpenTelemetry Collectors with Dynatrace dashboards.">Collector self-monitoring</a>
for more information on collecting this data.
The following are a few metrics worth paying attention to:</p>
<ul>
<li><code>otelcol_processor_refused_spans</code>: If you have the <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/v0.145.0/processor/memorylimiterprocessor">Memory Limiter
  Processor√Ø¬ª¬ø</a>
  enabled, this metric (or the equivalent for other signals) will indicate that
  the Collector needs more memory to continue processing its current load.</li>
<li><code>otelcol_exporter_queue_capacity</code> and <code>otelcol_exporter_queue_size</code>: Once the
  exporter queue size starts to get close to or exceed the queue capacity, that
  indicates the Collector is having trouble sending data to the backend. This is
  either because workers are not becoming available to send the data, or the
  backend itself is overloaded. You may need to increase the processing power
  available to the Collector to continue processing this volume of data.</li>
<li><code>k8s.resource_quota.used</code>: If you are monitoring your Kubernetes cluster with
  the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/k8sclusterreceiver">Kubernetes Cluster
  Receiver√Ø¬ª¬ø</a>,
  this can be used to determine the amount of
  CPU/memory quota your Collector has used.</li>
<li><code>container.cpu.usage</code> and <code>container.memory.usage</code>: If you are monitoring your
  cluster with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/kubeletstatsreceiver">Kubelet Stats
  Receiver√Ø¬ª¬ø</a>,
  these can tell you if a given Collector container is nearing or hitting its
  quota limits.</li>
</ul>
<h2 id="scaling-the-collector">Scaling the Collector<a class="headerlink" href="#scaling-the-collector" title="Permanent link">&para;</a></h2>
<p>Kubernetes comes with multiple object types capable of scaling the Collector
based on the needs of specific scenarios. For simple scaling, Deployments or
ReplicaSets can be used to create a pool of Collectors that can be scheduled by
Kubernetes without too much forethought. For more general information on
Collector deployment architectures, see our guide on <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Deploy Dynatrace OTel Collector</a>.</p>
<p>Most of the advice in this document applies to horizontally scaling the
Collector by creating more Collector instances or spreading instances across
machines. However, if your current deployment uses a single Collector instance
to do all your processing, you should first determine if vertically scaling the
Collector is sufficient for your anticipated load. Vertically scaling the
Collector has a lower cap on the amount of processing power and memory that can
be given to the Collector, but is also simpler. In Kubernetes, you can do this
by raising the CPU and memory limits on the Collector pod.</p>
<h3 id="scaling-stateless-collectors">Scaling stateless Collectors<a class="headerlink" href="#scaling-stateless-collectors" title="Permanent link">&para;</a></h3>
<p>It's comparatively easy to scale stateless Collectors: since it doesn't matter
which data goes to which Collector, the decision about which Collector to send a
payload to can be made regardless of the contents of the data. As a result,
any standard load balancer for a given transmission protocol should work.</p>
<p>The simplest way to balance load is through a Kubernetes Service object that
points to multiple replicas of a Collector pod deployed through any standard
type of Kubernetes workload such as a Deployment, ReplicaSet, StatefulSet, or
DaemonSet. For short-lived connections, this will distribute load among the
Collectors accessible through the service fairly evenly. Note that long-lived
connections, such as those over HTTP/2 or gRPC, will keep a connection open
to a single Collector and therefore may make the load between Collectors uneven.</p>
<p>For more complex cases, such as handling gRPC connections, a Service with type
<code>LoadBalancer</code> can offer more control over how load is balanced. LoadBalancer
Services are able to leverage a separate load balancer to determine which
Collector a connection is routed to. Service meshes such as Istio or Linkerd can
also help with load balancing, as they have detailed control over network
connections inside the cluster.</p>
<p>For cases where your deployment topology matters, for example with gateway
Collectors deployed through a DaemonSet, you can use a Service object with
specialized routing settings to only send data to Collectors running on the same
node as the source of the data. On Kubernetes version 1.26+, this is done by
configuring a service to <a href="https://kubernetes.io/docs/concepts/services-networking/service-traffic-policy/">only accept traffic internal to a
node√Ø¬ª¬ø</a>.</p>
<h3 id="scaling-stateful-processing-using-non-pooled-collectors">Scaling stateful processing using non-pooled Collectors<a class="headerlink" href="#scaling-stateful-processing-using-non-pooled-collectors" title="Permanent link">&para;</a></h3>
<p>When using the Collector to do stateful processing, it's important that the same
data is always sent to the same Collector. You can increase the throughput of
your pipeline while still following this rule by choosing certain Collectors to
handle certain data. This can be done by choosing a particular deployment
pattern for Collectors, or by assigning data sources to Collectors:</p>
<ul>
<li><strong>Sidecar Collectors</strong>: If a Collector is deployed as a sidecar and is coupled
  to an application, then all the data from that application will go through the
  sidecar Collector and can be processed with stateful operations.</li>
<li><strong>DaemonSet Collectors</strong>: An agent Collector deployed to a Kubernetes node
  (such as through a DaemonSet) can be used for stateful processing if a given
  application on the node always sends its data to the Collector. Note that this
  assumes there is only a single Collector per node.</li>
<li><strong>Single Collector</strong>: If you only need to run a
  single Collector for a given set of data sources, this Collector can be used
  for stateful processing since all data will flow through the same Collector.
  You may choose this if you decide to send a particular signal or data from a
  chosen set of applications to a given Collector. Note that for
  high-availability, redundant Collector instances must be kept as backups and
  not receive data unless the first Collector goes down. Additionally,
  processing will be reset if a redundant Collector is activated.</li>
</ul>
<h3 id="scaling-pooled-stateful-collectors-with-the-load-balancing-exporter">Scaling pooled stateful Collectors with the Load Balancing Exporter<a class="headerlink" href="#scaling-pooled-stateful-collectors-with-the-load-balancing-exporter" title="Permanent link">&para;</a></h3>
<p>Scaling a horizontally-scaled pool of stateful Collectors likely necessitates
using the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/exporter/loadbalancingexporter">Load Balancing
Exporter√Ø¬ª¬ø</a>.
The Load Balancing Exporter turns the
Collector into an OTLP-aware load balancer that allows you to route data to a
specific downstream Collector based on information inside an OTLP payload such
as a metric name.</p>
<p>Note that for metrics, the Load Balancing Exporter component has a <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/v0.145.0/docs/component-stability.md">Development
stability
level√Ø¬ª¬ø</a>.
It is not recommended for production use at this time.</p>
<h4 id="stateful-processors">Stateful processors<a class="headerlink" href="#stateful-processors" title="Permanent link">&para;</a></h4>
<p>You will want to consider using the exporter if you are scaling and using any
of the following stateful components. We only cover components
included in the Dynatrace Collector here, you
will need to determine the best default for any other stateful components you
use. You can also configure which part of the data is used for routing. The best
key to use depends on your use-case, but we give recommendations below.</p>
<ul>
<li>The <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor">Cumulative to Delta
  Processor√Ø¬ª¬ø</a>:
  Data points for the same metric are required to be sent to the same Collector
  for the collection period of the metric. The <code>metric_name</code> key is therefore a
  good default for routing.</li>
<li>The <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/tailsamplingprocessor">Tail Sampling
  Processor√Ø¬ª¬ø</a>:
  In order to make a decision about whether to sample a trace, the processor
  must be able to see all spans within the trace. Therefore, all spans must be
  sent to the same Collector, and we recommend routing by the <code>traceID</code> key to
  accomplish this.</li>
<li>The <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/connector/spanmetricsconnector">Span Metrics
  Connector√Ø¬ª¬ø</a>:
  The connector needs to see all spans from a service in order to emit metrics
  about its performance. Therefore we highly recommend routing by the <code>service</code>
  key.</li>
</ul>
<h4 id="configuring-the-load-balancing-exporter">Configuring the Load Balancing Exporter<a class="headerlink" href="#configuring-the-load-balancing-exporter" title="Permanent link">&para;</a></h4>
<p>There are two important elements involved with configuring the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/exporter/loadbalancingexporter">Load Balancing
Exporter√Ø¬ª¬ø</a>:
the key used to route the data, and the method the exporter uses to find
Collectors in the pool.</p>
<p>Configuring the routing key is done by setting the <code>routing_key</code> option. The defaults for each signal are:</p>
<ul>
<li>Traces: <code>traceID</code></li>
<li>Metrics: <code>service</code></li>
<li>Logs: <code>traceID</code> if present, otherwise a random trace ID. The <code>routing_key</code>
  option will not override this behavior and will have no effect on how logs are
  routed.</li>
</ul>
<p>We recommend you leave these as the default or set them based on the
recommendations in the <a href="#stateful-processors">Stateful processors</a> section
above.</p>
<p>The other important configuration option is the <code>resolver</code> key, which is used
by the exporter to determine which Collectors are available to forward data to.
In Kubernetes, we recommend using the <code>k8s</code> resolver since it is
Kubernetes-native. Specifically, it supports dynamically updating the pool based
on which Collector pods are running, and will add or remove Collectors if the
number of replicas changes. It will also remove Collectors that become
unhealthy, ensuring high-availability requirements are met if retries are also
configured through the <code>retry_on_failure</code> option.</p>
<p>Note that configuring the <code>static</code> resolver with a set pool of Collectors can
cause data loss if a Collector goes down and is not replaced before the retry
limit is met. The Collectors configured in the pool are set for the lifetime of
the load-balancing Collector.</p>
<h4 id="resiliency">Resiliency<a class="headerlink" href="#resiliency" title="Permanent link">&para;</a></h4>
<p>The load balancing exporter comes with resiliency options to help mitigate the
risk of data loss. These options are both for dealing with a fluctuating number of downstream
Collectors as well as issues sending data to a particular Collector. The
<a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/exporter/loadbalancingexporter#resilience-and-scaling-considerations">upstream
docs√Ø¬ª¬ø</a>
cover these in detail and explain how and when to use them.</p>
<h4 id="scaling-load-balancer-collectors">Scaling load balancer Collectors<a class="headerlink" href="#scaling-load-balancer-collectors" title="Permanent link">&para;</a></h4>
<p>Since the Load Balancing Exporter uses a deterministic hash to determine which
downstream Collector to send data to, load-balancing Collectors can be
considered stateless and can therefore be scaled using the approaches outlined
in the <a href="#scaling-stateless-collectors">Scaling stateless Collectors</a> section.
Note that if the resolver for the load-balancing Collectors update their
downstream pools at different times, this may result in data meant for a single
Collector momentarily being sent to multiple Collectors.</p>
<h2 id="demo-configuration">Demo configuration<a class="headerlink" href="#demo-configuration" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>extensions:
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>health_check:
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>endpoint: 0.0.0.0:13133
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>receivers:
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a>
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>otlp:
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>protocols:
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a>
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a>
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a>
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a>grpc:
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a>
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a>
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a>
<a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a>
<a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a>
<a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a>
<a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a>http:
<a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a>
<a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a>
<a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a>
<a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a>
<a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a>
<a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a>
<a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a>exporters:
<a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a>
<a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a>
<a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a>
<a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a>loadbalancing/traces:
<a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a>
<a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a>
<a id="__codelineno-24-48" name="__codelineno-24-48" href="#__codelineno-24-48"></a>
<a id="__codelineno-24-49" name="__codelineno-24-49" href="#__codelineno-24-49"></a>protocol:
<a id="__codelineno-24-50" name="__codelineno-24-50" href="#__codelineno-24-50"></a>
<a id="__codelineno-24-51" name="__codelineno-24-51" href="#__codelineno-24-51"></a>
<a id="__codelineno-24-52" name="__codelineno-24-52" href="#__codelineno-24-52"></a>
<a id="__codelineno-24-53" name="__codelineno-24-53" href="#__codelineno-24-53"></a>otlp:
<a id="__codelineno-24-54" name="__codelineno-24-54" href="#__codelineno-24-54"></a>
<a id="__codelineno-24-55" name="__codelineno-24-55" href="#__codelineno-24-55"></a>
<a id="__codelineno-24-56" name="__codelineno-24-56" href="#__codelineno-24-56"></a>
<a id="__codelineno-24-57" name="__codelineno-24-57" href="#__codelineno-24-57"></a>resolver:
<a id="__codelineno-24-58" name="__codelineno-24-58" href="#__codelineno-24-58"></a>
<a id="__codelineno-24-59" name="__codelineno-24-59" href="#__codelineno-24-59"></a>
<a id="__codelineno-24-60" name="__codelineno-24-60" href="#__codelineno-24-60"></a>
<a id="__codelineno-24-61" name="__codelineno-24-61" href="#__codelineno-24-61"></a>k8s:
<a id="__codelineno-24-62" name="__codelineno-24-62" href="#__codelineno-24-62"></a>
<a id="__codelineno-24-63" name="__codelineno-24-63" href="#__codelineno-24-63"></a>
<a id="__codelineno-24-64" name="__codelineno-24-64" href="#__codelineno-24-64"></a>
<a id="__codelineno-24-65" name="__codelineno-24-65" href="#__codelineno-24-65"></a>service: traces-receiver.default
<a id="__codelineno-24-66" name="__codelineno-24-66" href="#__codelineno-24-66"></a>
<a id="__codelineno-24-67" name="__codelineno-24-67" href="#__codelineno-24-67"></a>
<a id="__codelineno-24-68" name="__codelineno-24-68" href="#__codelineno-24-68"></a>
<a id="__codelineno-24-69" name="__codelineno-24-69" href="#__codelineno-24-69"></a>ports:
<a id="__codelineno-24-70" name="__codelineno-24-70" href="#__codelineno-24-70"></a>
<a id="__codelineno-24-71" name="__codelineno-24-71" href="#__codelineno-24-71"></a>
<a id="__codelineno-24-72" name="__codelineno-24-72" href="#__codelineno-24-72"></a>
<a id="__codelineno-24-73" name="__codelineno-24-73" href="#__codelineno-24-73"></a>- 4317
<a id="__codelineno-24-74" name="__codelineno-24-74" href="#__codelineno-24-74"></a>
<a id="__codelineno-24-75" name="__codelineno-24-75" href="#__codelineno-24-75"></a>
<a id="__codelineno-24-76" name="__codelineno-24-76" href="#__codelineno-24-76"></a>
<a id="__codelineno-24-77" name="__codelineno-24-77" href="#__codelineno-24-77"></a>loadbalancing/logs:
<a id="__codelineno-24-78" name="__codelineno-24-78" href="#__codelineno-24-78"></a>
<a id="__codelineno-24-79" name="__codelineno-24-79" href="#__codelineno-24-79"></a>
<a id="__codelineno-24-80" name="__codelineno-24-80" href="#__codelineno-24-80"></a>
<a id="__codelineno-24-81" name="__codelineno-24-81" href="#__codelineno-24-81"></a>protocol:
<a id="__codelineno-24-82" name="__codelineno-24-82" href="#__codelineno-24-82"></a>
<a id="__codelineno-24-83" name="__codelineno-24-83" href="#__codelineno-24-83"></a>
<a id="__codelineno-24-84" name="__codelineno-24-84" href="#__codelineno-24-84"></a>
<a id="__codelineno-24-85" name="__codelineno-24-85" href="#__codelineno-24-85"></a>otlp:
<a id="__codelineno-24-86" name="__codelineno-24-86" href="#__codelineno-24-86"></a>
<a id="__codelineno-24-87" name="__codelineno-24-87" href="#__codelineno-24-87"></a>
<a id="__codelineno-24-88" name="__codelineno-24-88" href="#__codelineno-24-88"></a>
<a id="__codelineno-24-89" name="__codelineno-24-89" href="#__codelineno-24-89"></a>resolver:
<a id="__codelineno-24-90" name="__codelineno-24-90" href="#__codelineno-24-90"></a>
<a id="__codelineno-24-91" name="__codelineno-24-91" href="#__codelineno-24-91"></a>
<a id="__codelineno-24-92" name="__codelineno-24-92" href="#__codelineno-24-92"></a>
<a id="__codelineno-24-93" name="__codelineno-24-93" href="#__codelineno-24-93"></a>k8s:
<a id="__codelineno-24-94" name="__codelineno-24-94" href="#__codelineno-24-94"></a>
<a id="__codelineno-24-95" name="__codelineno-24-95" href="#__codelineno-24-95"></a>
<a id="__codelineno-24-96" name="__codelineno-24-96" href="#__codelineno-24-96"></a>
<a id="__codelineno-24-97" name="__codelineno-24-97" href="#__codelineno-24-97"></a>service: logs-receiver.default
<a id="__codelineno-24-98" name="__codelineno-24-98" href="#__codelineno-24-98"></a>
<a id="__codelineno-24-99" name="__codelineno-24-99" href="#__codelineno-24-99"></a>
<a id="__codelineno-24-100" name="__codelineno-24-100" href="#__codelineno-24-100"></a>
<a id="__codelineno-24-101" name="__codelineno-24-101" href="#__codelineno-24-101"></a>ports:
<a id="__codelineno-24-102" name="__codelineno-24-102" href="#__codelineno-24-102"></a>
<a id="__codelineno-24-103" name="__codelineno-24-103" href="#__codelineno-24-103"></a>
<a id="__codelineno-24-104" name="__codelineno-24-104" href="#__codelineno-24-104"></a>
<a id="__codelineno-24-105" name="__codelineno-24-105" href="#__codelineno-24-105"></a>- 4317
<a id="__codelineno-24-106" name="__codelineno-24-106" href="#__codelineno-24-106"></a>
<a id="__codelineno-24-107" name="__codelineno-24-107" href="#__codelineno-24-107"></a>
<a id="__codelineno-24-108" name="__codelineno-24-108" href="#__codelineno-24-108"></a>
<a id="__codelineno-24-109" name="__codelineno-24-109" href="#__codelineno-24-109"></a>loadbalancing/metrics:
<a id="__codelineno-24-110" name="__codelineno-24-110" href="#__codelineno-24-110"></a>
<a id="__codelineno-24-111" name="__codelineno-24-111" href="#__codelineno-24-111"></a>
<a id="__codelineno-24-112" name="__codelineno-24-112" href="#__codelineno-24-112"></a>
<a id="__codelineno-24-113" name="__codelineno-24-113" href="#__codelineno-24-113"></a>retry_on_failure:
<a id="__codelineno-24-114" name="__codelineno-24-114" href="#__codelineno-24-114"></a>
<a id="__codelineno-24-115" name="__codelineno-24-115" href="#__codelineno-24-115"></a>
<a id="__codelineno-24-116" name="__codelineno-24-116" href="#__codelineno-24-116"></a>
<a id="__codelineno-24-117" name="__codelineno-24-117" href="#__codelineno-24-117"></a>enabled: true
<a id="__codelineno-24-118" name="__codelineno-24-118" href="#__codelineno-24-118"></a>
<a id="__codelineno-24-119" name="__codelineno-24-119" href="#__codelineno-24-119"></a>
<a id="__codelineno-24-120" name="__codelineno-24-120" href="#__codelineno-24-120"></a>
<a id="__codelineno-24-121" name="__codelineno-24-121" href="#__codelineno-24-121"></a>initial_interval: 5s
<a id="__codelineno-24-122" name="__codelineno-24-122" href="#__codelineno-24-122"></a>
<a id="__codelineno-24-123" name="__codelineno-24-123" href="#__codelineno-24-123"></a>
<a id="__codelineno-24-124" name="__codelineno-24-124" href="#__codelineno-24-124"></a>
<a id="__codelineno-24-125" name="__codelineno-24-125" href="#__codelineno-24-125"></a>max_interval: 30s
<a id="__codelineno-24-126" name="__codelineno-24-126" href="#__codelineno-24-126"></a>
<a id="__codelineno-24-127" name="__codelineno-24-127" href="#__codelineno-24-127"></a>
<a id="__codelineno-24-128" name="__codelineno-24-128" href="#__codelineno-24-128"></a>
<a id="__codelineno-24-129" name="__codelineno-24-129" href="#__codelineno-24-129"></a>max_elapsed_time: 300s
<a id="__codelineno-24-130" name="__codelineno-24-130" href="#__codelineno-24-130"></a>
<a id="__codelineno-24-131" name="__codelineno-24-131" href="#__codelineno-24-131"></a>
<a id="__codelineno-24-132" name="__codelineno-24-132" href="#__codelineno-24-132"></a>
<a id="__codelineno-24-133" name="__codelineno-24-133" href="#__codelineno-24-133"></a>sending_queue:
<a id="__codelineno-24-134" name="__codelineno-24-134" href="#__codelineno-24-134"></a>
<a id="__codelineno-24-135" name="__codelineno-24-135" href="#__codelineno-24-135"></a>
<a id="__codelineno-24-136" name="__codelineno-24-136" href="#__codelineno-24-136"></a>
<a id="__codelineno-24-137" name="__codelineno-24-137" href="#__codelineno-24-137"></a>enabled: true
<a id="__codelineno-24-138" name="__codelineno-24-138" href="#__codelineno-24-138"></a>
<a id="__codelineno-24-139" name="__codelineno-24-139" href="#__codelineno-24-139"></a>
<a id="__codelineno-24-140" name="__codelineno-24-140" href="#__codelineno-24-140"></a>
<a id="__codelineno-24-141" name="__codelineno-24-141" href="#__codelineno-24-141"></a>num_consumers: 10
<a id="__codelineno-24-142" name="__codelineno-24-142" href="#__codelineno-24-142"></a>
<a id="__codelineno-24-143" name="__codelineno-24-143" href="#__codelineno-24-143"></a>
<a id="__codelineno-24-144" name="__codelineno-24-144" href="#__codelineno-24-144"></a>
<a id="__codelineno-24-145" name="__codelineno-24-145" href="#__codelineno-24-145"></a>queue_size: 1000
<a id="__codelineno-24-146" name="__codelineno-24-146" href="#__codelineno-24-146"></a>
<a id="__codelineno-24-147" name="__codelineno-24-147" href="#__codelineno-24-147"></a>
<a id="__codelineno-24-148" name="__codelineno-24-148" href="#__codelineno-24-148"></a>
<a id="__codelineno-24-149" name="__codelineno-24-149" href="#__codelineno-24-149"></a>sizer: requests
<a id="__codelineno-24-150" name="__codelineno-24-150" href="#__codelineno-24-150"></a>
<a id="__codelineno-24-151" name="__codelineno-24-151" href="#__codelineno-24-151"></a>
<a id="__codelineno-24-152" name="__codelineno-24-152" href="#__codelineno-24-152"></a>
<a id="__codelineno-24-153" name="__codelineno-24-153" href="#__codelineno-24-153"></a>protocol:
<a id="__codelineno-24-154" name="__codelineno-24-154" href="#__codelineno-24-154"></a>
<a id="__codelineno-24-155" name="__codelineno-24-155" href="#__codelineno-24-155"></a>
<a id="__codelineno-24-156" name="__codelineno-24-156" href="#__codelineno-24-156"></a>
<a id="__codelineno-24-157" name="__codelineno-24-157" href="#__codelineno-24-157"></a>otlp:
<a id="__codelineno-24-158" name="__codelineno-24-158" href="#__codelineno-24-158"></a>
<a id="__codelineno-24-159" name="__codelineno-24-159" href="#__codelineno-24-159"></a>
<a id="__codelineno-24-160" name="__codelineno-24-160" href="#__codelineno-24-160"></a>
<a id="__codelineno-24-161" name="__codelineno-24-161" href="#__codelineno-24-161"></a>resolver:
<a id="__codelineno-24-162" name="__codelineno-24-162" href="#__codelineno-24-162"></a>
<a id="__codelineno-24-163" name="__codelineno-24-163" href="#__codelineno-24-163"></a>
<a id="__codelineno-24-164" name="__codelineno-24-164" href="#__codelineno-24-164"></a>
<a id="__codelineno-24-165" name="__codelineno-24-165" href="#__codelineno-24-165"></a>k8s:
<a id="__codelineno-24-166" name="__codelineno-24-166" href="#__codelineno-24-166"></a>
<a id="__codelineno-24-167" name="__codelineno-24-167" href="#__codelineno-24-167"></a>
<a id="__codelineno-24-168" name="__codelineno-24-168" href="#__codelineno-24-168"></a>
<a id="__codelineno-24-169" name="__codelineno-24-169" href="#__codelineno-24-169"></a>service: metrics-receiver.default
<a id="__codelineno-24-170" name="__codelineno-24-170" href="#__codelineno-24-170"></a>
<a id="__codelineno-24-171" name="__codelineno-24-171" href="#__codelineno-24-171"></a>
<a id="__codelineno-24-172" name="__codelineno-24-172" href="#__codelineno-24-172"></a>
<a id="__codelineno-24-173" name="__codelineno-24-173" href="#__codelineno-24-173"></a>ports:
<a id="__codelineno-24-174" name="__codelineno-24-174" href="#__codelineno-24-174"></a>
<a id="__codelineno-24-175" name="__codelineno-24-175" href="#__codelineno-24-175"></a>
<a id="__codelineno-24-176" name="__codelineno-24-176" href="#__codelineno-24-176"></a>
<a id="__codelineno-24-177" name="__codelineno-24-177" href="#__codelineno-24-177"></a>- 4317
<a id="__codelineno-24-178" name="__codelineno-24-178" href="#__codelineno-24-178"></a>
<a id="__codelineno-24-179" name="__codelineno-24-179" href="#__codelineno-24-179"></a>
<a id="__codelineno-24-180" name="__codelineno-24-180" href="#__codelineno-24-180"></a>
<a id="__codelineno-24-181" name="__codelineno-24-181" href="#__codelineno-24-181"></a>service:
<a id="__codelineno-24-182" name="__codelineno-24-182" href="#__codelineno-24-182"></a>
<a id="__codelineno-24-183" name="__codelineno-24-183" href="#__codelineno-24-183"></a>
<a id="__codelineno-24-184" name="__codelineno-24-184" href="#__codelineno-24-184"></a>
<a id="__codelineno-24-185" name="__codelineno-24-185" href="#__codelineno-24-185"></a>extensions: [health_check]
<a id="__codelineno-24-186" name="__codelineno-24-186" href="#__codelineno-24-186"></a>
<a id="__codelineno-24-187" name="__codelineno-24-187" href="#__codelineno-24-187"></a>
<a id="__codelineno-24-188" name="__codelineno-24-188" href="#__codelineno-24-188"></a>
<a id="__codelineno-24-189" name="__codelineno-24-189" href="#__codelineno-24-189"></a>pipelines:
<a id="__codelineno-24-190" name="__codelineno-24-190" href="#__codelineno-24-190"></a>
<a id="__codelineno-24-191" name="__codelineno-24-191" href="#__codelineno-24-191"></a>
<a id="__codelineno-24-192" name="__codelineno-24-192" href="#__codelineno-24-192"></a>
<a id="__codelineno-24-193" name="__codelineno-24-193" href="#__codelineno-24-193"></a>metrics:
<a id="__codelineno-24-194" name="__codelineno-24-194" href="#__codelineno-24-194"></a>
<a id="__codelineno-24-195" name="__codelineno-24-195" href="#__codelineno-24-195"></a>
<a id="__codelineno-24-196" name="__codelineno-24-196" href="#__codelineno-24-196"></a>
<a id="__codelineno-24-197" name="__codelineno-24-197" href="#__codelineno-24-197"></a>receivers: [otlp]
<a id="__codelineno-24-198" name="__codelineno-24-198" href="#__codelineno-24-198"></a>
<a id="__codelineno-24-199" name="__codelineno-24-199" href="#__codelineno-24-199"></a>
<a id="__codelineno-24-200" name="__codelineno-24-200" href="#__codelineno-24-200"></a>
<a id="__codelineno-24-201" name="__codelineno-24-201" href="#__codelineno-24-201"></a>processors: []
<a id="__codelineno-24-202" name="__codelineno-24-202" href="#__codelineno-24-202"></a>
<a id="__codelineno-24-203" name="__codelineno-24-203" href="#__codelineno-24-203"></a>
<a id="__codelineno-24-204" name="__codelineno-24-204" href="#__codelineno-24-204"></a>
<a id="__codelineno-24-205" name="__codelineno-24-205" href="#__codelineno-24-205"></a>exporters:
<a id="__codelineno-24-206" name="__codelineno-24-206" href="#__codelineno-24-206"></a>
<a id="__codelineno-24-207" name="__codelineno-24-207" href="#__codelineno-24-207"></a>
<a id="__codelineno-24-208" name="__codelineno-24-208" href="#__codelineno-24-208"></a>
<a id="__codelineno-24-209" name="__codelineno-24-209" href="#__codelineno-24-209"></a>- loadbalancing/metrics
<a id="__codelineno-24-210" name="__codelineno-24-210" href="#__codelineno-24-210"></a>
<a id="__codelineno-24-211" name="__codelineno-24-211" href="#__codelineno-24-211"></a>
<a id="__codelineno-24-212" name="__codelineno-24-212" href="#__codelineno-24-212"></a>
<a id="__codelineno-24-213" name="__codelineno-24-213" href="#__codelineno-24-213"></a>traces:
<a id="__codelineno-24-214" name="__codelineno-24-214" href="#__codelineno-24-214"></a>
<a id="__codelineno-24-215" name="__codelineno-24-215" href="#__codelineno-24-215"></a>
<a id="__codelineno-24-216" name="__codelineno-24-216" href="#__codelineno-24-216"></a>
<a id="__codelineno-24-217" name="__codelineno-24-217" href="#__codelineno-24-217"></a>receivers: [otlp]
<a id="__codelineno-24-218" name="__codelineno-24-218" href="#__codelineno-24-218"></a>
<a id="__codelineno-24-219" name="__codelineno-24-219" href="#__codelineno-24-219"></a>
<a id="__codelineno-24-220" name="__codelineno-24-220" href="#__codelineno-24-220"></a>
<a id="__codelineno-24-221" name="__codelineno-24-221" href="#__codelineno-24-221"></a>processors: []
<a id="__codelineno-24-222" name="__codelineno-24-222" href="#__codelineno-24-222"></a>
<a id="__codelineno-24-223" name="__codelineno-24-223" href="#__codelineno-24-223"></a>
<a id="__codelineno-24-224" name="__codelineno-24-224" href="#__codelineno-24-224"></a>
<a id="__codelineno-24-225" name="__codelineno-24-225" href="#__codelineno-24-225"></a>exporters:
<a id="__codelineno-24-226" name="__codelineno-24-226" href="#__codelineno-24-226"></a>
<a id="__codelineno-24-227" name="__codelineno-24-227" href="#__codelineno-24-227"></a>
<a id="__codelineno-24-228" name="__codelineno-24-228" href="#__codelineno-24-228"></a>
<a id="__codelineno-24-229" name="__codelineno-24-229" href="#__codelineno-24-229"></a>- loadbalancing/traces
<a id="__codelineno-24-230" name="__codelineno-24-230" href="#__codelineno-24-230"></a>
<a id="__codelineno-24-231" name="__codelineno-24-231" href="#__codelineno-24-231"></a>
<a id="__codelineno-24-232" name="__codelineno-24-232" href="#__codelineno-24-232"></a>
<a id="__codelineno-24-233" name="__codelineno-24-233" href="#__codelineno-24-233"></a>logs:
<a id="__codelineno-24-234" name="__codelineno-24-234" href="#__codelineno-24-234"></a>
<a id="__codelineno-24-235" name="__codelineno-24-235" href="#__codelineno-24-235"></a>
<a id="__codelineno-24-236" name="__codelineno-24-236" href="#__codelineno-24-236"></a>
<a id="__codelineno-24-237" name="__codelineno-24-237" href="#__codelineno-24-237"></a>receivers: [otlp]
<a id="__codelineno-24-238" name="__codelineno-24-238" href="#__codelineno-24-238"></a>
<a id="__codelineno-24-239" name="__codelineno-24-239" href="#__codelineno-24-239"></a>
<a id="__codelineno-24-240" name="__codelineno-24-240" href="#__codelineno-24-240"></a>
<a id="__codelineno-24-241" name="__codelineno-24-241" href="#__codelineno-24-241"></a>processors: []
<a id="__codelineno-24-242" name="__codelineno-24-242" href="#__codelineno-24-242"></a>
<a id="__codelineno-24-243" name="__codelineno-24-243" href="#__codelineno-24-243"></a>
<a id="__codelineno-24-244" name="__codelineno-24-244" href="#__codelineno-24-244"></a>
<a id="__codelineno-24-245" name="__codelineno-24-245" href="#__codelineno-24-245"></a>exporters:
<a id="__codelineno-24-246" name="__codelineno-24-246" href="#__codelineno-24-246"></a>
<a id="__codelineno-24-247" name="__codelineno-24-247" href="#__codelineno-24-247"></a>
<a id="__codelineno-24-248" name="__codelineno-24-248" href="#__codelineno-24-248"></a>
<a id="__codelineno-24-249" name="__codelineno-24-249" href="#__codelineno-24-249"></a>- loadbalancing/logs
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components">Components<a class="headerlink" href="#components" title="Permanent link">&para;</a></h2>
<p>For our configuration, we use the following components.</p>
<h3 id="receivers">Receivers<a class="headerlink" href="#receivers" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we configure the <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/receiver/otlpreceiver"><code>otlp</code> receiver√Ø¬ª¬ø</a> to receive data over gRPC and HTTP.</p>
<h3 id="exporters">Exporters<a class="headerlink" href="#exporters" title="Permanent link">&para;</a></h3>
<p>In the <code>exporters</code> section, we configure three <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/exporter/loadbalancingexporter"><code>loadbalancing exporters</code>√Ø¬ª¬ø</a>,
one for each signal. The exporters are all configured to use the <code>k8s</code> resolver,
which uses a Kubernetes service to determine the pool of Collectors to send data
to. One reason to split further processing by signal is that each signal likely
receives different amounts of traffic: for example, you may receive a large
amount of logs, some traces, and relatively few metrics. Therefore, you would
want the Collector pool that processes logs to be bigger than the one that processes
metrics; extra Collectors allocated for processing fewer metrics may waste
resources.</p>
<h3 id="service-pipelines">Service pipelines<a class="headerlink" href="#service-pipelines" title="Permanent link">&para;</a></h3>
<p>In our pipelines, we receive data over OTLP and export it through the Load
Balancing Exporter for the particular signal, without doing any additional
processing. Since this Collector is exclusively for load balancing, we want to
do as little processing as possible so it can handle as much data as possible.</p>
<h2 id="related-topics">Related topics<a class="headerlink" href="#related-topics" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/batch" title="Configure the OpenTelemetry Collector to send data in batches to the Dynatrace backend.">Batch OTLP requests with the OpenTelemetry Collector</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/memory" title="Configure the OpenTelemetry Collector to respect memory limits and not use excessive system resources.">Apply memory limits to the OpenTelemetry Collector</a></li>
</ul>
<hr />
<h2 id="source-system-requirementsmd">Source: system-requirements.md<a class="headerlink" href="#source-system-requirementsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Dynatrace OTel Collector system requirements.
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/system-requirements
scraped: 2026-02-16T21:32:49.819658</p>
<hr />
<h1 id="dynatrace-otel-collector-system-requirements">Dynatrace OTel Collector system requirements.<a class="headerlink" href="#dynatrace-otel-collector-system-requirements" title="Permanent link">&para;</a></h1>
<h1 id="dynatrace-otel-collector-system-requirements_1">Dynatrace OTel Collector system requirements.<a class="headerlink" href="#dynatrace-otel-collector-system-requirements_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Reference</li>
<li>2-min read</li>
<li>Updated on Sep 04, 2025</li>
</ul>
<p>This page describes system requirements for the Dynatrace OpenTelemetry Collector distribution for different use cases.</p>
<h3 id="hardware-used">Hardware used<a class="headerlink" href="#hardware-used" title="Permanent link">&para;</a></h3>
<p>The numbers below were gathered using an Azure virtual machine of type Dadsv5-series (AMD EPYC 7763v Genoa CPU) with 4 vCPUs and 16GB RAM.</p>
<h3 id="cpu-and-memory-requirements-for-traces-metrics-and-logs-combined">CPU and memory requirements for traces, metrics and logs (combined)<a class="headerlink" href="#cpu-and-memory-requirements-for-traces-metrics-and-logs-combined" title="Permanent link">&para;</a></h3>
<p>The requirements for the Dynatrace Collector are based on a load scenario with the following numbers per second:</p>
<ul>
<li>1000 traces (~1.2 KB each)</li>
<li>1000 metrics (~1.2 KB each)</li>
<li>1 MB logs</li>
</ul>
<p>The recommended resources for this combined scenario are:</p>
<ul>
<li>500 MiB RAM</li>
<li>500 mCPU</li>
</ul>
<p>If you need additional data processing (for example, filter or transform processors), system requirements will increase.</p>
<p>For specific scaling and infrastructure architecture considerations, see <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Deploy Dynatrace OTel Collector</a> and <a href="/docs/ingest-from/opentelemetry/collector/scaling" title="How to scale the OpenTelemetry Collector.">How to scale the OpenTelemetry Collector</a>.</p>
<h3 id="specific-load-scenarios">Specific load scenarios<a class="headerlink" href="#specific-load-scenarios" title="Permanent link">&para;</a></h3>
<p>The Dynatrace Collector was also tested under heavier scenarios than above but only with single signal types.
The following table shows performance data based on the following base data sizes:</p>
<ul>
<li>Traces: ~1 KiB per trace</li>
<li>Metrics: ~3 KiB per metric</li>
<li>Logs: ~3 KiB per line</li>
</ul>
<p>This table shows throughput scenarios based on the above data sizes with different amounts of load and different used protocols.</p>
<table>
<thead>
<tr>
<th>Scenario (traces, metrics, logs per second)</th>
<th>CPU cores</th>
<th>RAM (MiB)</th>
</tr>
</thead>
<tbody>
<tr>
<td>OTLP-HTTP 10k traces</td>
<td>0.25</td>
<td>100</td>
</tr>
<tr>
<td>OTLP-HTTP 100k traces</td>
<td>1.5</td>
<td>120</td>
</tr>
<tr>
<td>OTLP-HTTP 10k metrics</td>
<td>0.25</td>
<td>110</td>
</tr>
<tr>
<td>OTLP-HTTP 100k metrics</td>
<td>1</td>
<td>100</td>
</tr>
<tr>
<td>Syslog 10k logs 1 per batch</td>
<td>0.2</td>
<td>100</td>
</tr>
<tr>
<td>Syslog 10k logs 100 per batch</td>
<td>0.2</td>
<td>100</td>
</tr>
<tr>
<td>Syslog 70k logs 1 per batch</td>
<td>1</td>
<td>100</td>
</tr>
<tr>
<td>Syslog 70k logs 100 per batch</td>
<td>0.5</td>
<td>110</td>
</tr>
</tbody>
</table>
<h3 id="prometheus-scrape-performance">Prometheus scrape performance<a class="headerlink" href="#prometheus-scrape-performance" title="Permanent link">&para;</a></h3>
<p>Additional metrics based load scenarios were done based on Prometheus scraping with the following base settings:</p>
<ul>
<li>1s scrape interval</li>
<li>Metrics data size: ~3 KiB per metric</li>
</ul>
<p>This table shows the load results with different scenarios.</p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>CPU cores</th>
<th>RAM (MiB)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1 endpoint (10k data points each)</td>
<td>0.5</td>
<td>300</td>
</tr>
<tr>
<td>1 endpoint (1k data points each)</td>
<td>0.1</td>
<td>140</td>
</tr>
<tr>
<td>5 endpoints (1k data points each)</td>
<td>1.5</td>
<td>250</td>
</tr>
<tr>
<td>10 endpoints (1k data points each)</td>
<td>2</td>
<td>500</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="source-batchmd">Source: batch.md<a class="headerlink" href="#source-batchmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Batch OTLP requests with the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/batch
scraped: 2026-02-16T09:39:01.857031</p>
<hr />
<h1 id="batch-otlp-requests-with-the-opentelemetry-collector">Batch OTLP requests with the OpenTelemetry Collector<a class="headerlink" href="#batch-otlp-requests-with-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="batch-otlp-requests-with-the-opentelemetry-collector_1">Batch OTLP requests with the OpenTelemetry Collector<a class="headerlink" href="#batch-otlp-requests-with-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>3-min read</li>
<li>Published Oct 11, 2023</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance and its native batch processor to queue and batch OTLP requests and improve throughput performance.</p>
<p>Recommended configuration</p>
<p>For optimal performance of your Collector instance, we recommend that you apply this configuration with all setups.</p>
<p>If you use other processors, make sure the batch processor is configured last in your pipeline.</p>
<h2 id="prerequisites_1">Prerequisites<a class="headerlink" href="#prerequisites_1" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/processor/batchprocessor">batch processor√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace OTel Collector.">Dynatrace Collector</a></p>
</li>
<li>The OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-core" title="Learn about the Dynatrace OTel Collector.">Core</a> or <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace OTel Collector.">Contrib</a> distribution</li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace OTel Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_1">Demo configuration<a class="headerlink" href="#demo-configuration_1" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>receivers:
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>otlp:
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>protocols:
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>grpc:
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>http:
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a>
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a>
<a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a>
<a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a>
<a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a>processors:
<a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a>
<a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a>
<a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a>
<a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a>batch/traces:
<a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a>
<a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a>
<a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a>
<a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a>send_batch_size: 5000
<a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a>
<a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a>
<a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a>
<a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a>send_batch_max_size: 5000
<a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a>
<a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a>
<a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a>
<a id="__codelineno-25-45" name="__codelineno-25-45" href="#__codelineno-25-45"></a>timeout: 60s
<a id="__codelineno-25-46" name="__codelineno-25-46" href="#__codelineno-25-46"></a>
<a id="__codelineno-25-47" name="__codelineno-25-47" href="#__codelineno-25-47"></a>
<a id="__codelineno-25-48" name="__codelineno-25-48" href="#__codelineno-25-48"></a>
<a id="__codelineno-25-49" name="__codelineno-25-49" href="#__codelineno-25-49"></a>batch/metrics:
<a id="__codelineno-25-50" name="__codelineno-25-50" href="#__codelineno-25-50"></a>
<a id="__codelineno-25-51" name="__codelineno-25-51" href="#__codelineno-25-51"></a>
<a id="__codelineno-25-52" name="__codelineno-25-52" href="#__codelineno-25-52"></a>
<a id="__codelineno-25-53" name="__codelineno-25-53" href="#__codelineno-25-53"></a>send_batch_size: 3000
<a id="__codelineno-25-54" name="__codelineno-25-54" href="#__codelineno-25-54"></a>
<a id="__codelineno-25-55" name="__codelineno-25-55" href="#__codelineno-25-55"></a>
<a id="__codelineno-25-56" name="__codelineno-25-56" href="#__codelineno-25-56"></a>
<a id="__codelineno-25-57" name="__codelineno-25-57" href="#__codelineno-25-57"></a>send_batch_max_size: 3000
<a id="__codelineno-25-58" name="__codelineno-25-58" href="#__codelineno-25-58"></a>
<a id="__codelineno-25-59" name="__codelineno-25-59" href="#__codelineno-25-59"></a>
<a id="__codelineno-25-60" name="__codelineno-25-60" href="#__codelineno-25-60"></a>
<a id="__codelineno-25-61" name="__codelineno-25-61" href="#__codelineno-25-61"></a>timeout: 60s
<a id="__codelineno-25-62" name="__codelineno-25-62" href="#__codelineno-25-62"></a>
<a id="__codelineno-25-63" name="__codelineno-25-63" href="#__codelineno-25-63"></a>
<a id="__codelineno-25-64" name="__codelineno-25-64" href="#__codelineno-25-64"></a>
<a id="__codelineno-25-65" name="__codelineno-25-65" href="#__codelineno-25-65"></a>batch/logs:
<a id="__codelineno-25-66" name="__codelineno-25-66" href="#__codelineno-25-66"></a>
<a id="__codelineno-25-67" name="__codelineno-25-67" href="#__codelineno-25-67"></a>
<a id="__codelineno-25-68" name="__codelineno-25-68" href="#__codelineno-25-68"></a>
<a id="__codelineno-25-69" name="__codelineno-25-69" href="#__codelineno-25-69"></a>send_batch_size: 1800
<a id="__codelineno-25-70" name="__codelineno-25-70" href="#__codelineno-25-70"></a>
<a id="__codelineno-25-71" name="__codelineno-25-71" href="#__codelineno-25-71"></a>
<a id="__codelineno-25-72" name="__codelineno-25-72" href="#__codelineno-25-72"></a>
<a id="__codelineno-25-73" name="__codelineno-25-73" href="#__codelineno-25-73"></a>send_batch_max_size: 2000
<a id="__codelineno-25-74" name="__codelineno-25-74" href="#__codelineno-25-74"></a>
<a id="__codelineno-25-75" name="__codelineno-25-75" href="#__codelineno-25-75"></a>
<a id="__codelineno-25-76" name="__codelineno-25-76" href="#__codelineno-25-76"></a>
<a id="__codelineno-25-77" name="__codelineno-25-77" href="#__codelineno-25-77"></a>timeout: 60s
<a id="__codelineno-25-78" name="__codelineno-25-78" href="#__codelineno-25-78"></a>
<a id="__codelineno-25-79" name="__codelineno-25-79" href="#__codelineno-25-79"></a>
<a id="__codelineno-25-80" name="__codelineno-25-80" href="#__codelineno-25-80"></a>
<a id="__codelineno-25-81" name="__codelineno-25-81" href="#__codelineno-25-81"></a>exporters:
<a id="__codelineno-25-82" name="__codelineno-25-82" href="#__codelineno-25-82"></a>
<a id="__codelineno-25-83" name="__codelineno-25-83" href="#__codelineno-25-83"></a>
<a id="__codelineno-25-84" name="__codelineno-25-84" href="#__codelineno-25-84"></a>
<a id="__codelineno-25-85" name="__codelineno-25-85" href="#__codelineno-25-85"></a>otlp_http:
<a id="__codelineno-25-86" name="__codelineno-25-86" href="#__codelineno-25-86"></a>
<a id="__codelineno-25-87" name="__codelineno-25-87" href="#__codelineno-25-87"></a>
<a id="__codelineno-25-88" name="__codelineno-25-88" href="#__codelineno-25-88"></a>
<a id="__codelineno-25-89" name="__codelineno-25-89" href="#__codelineno-25-89"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-25-90" name="__codelineno-25-90" href="#__codelineno-25-90"></a>
<a id="__codelineno-25-91" name="__codelineno-25-91" href="#__codelineno-25-91"></a>
<a id="__codelineno-25-92" name="__codelineno-25-92" href="#__codelineno-25-92"></a>
<a id="__codelineno-25-93" name="__codelineno-25-93" href="#__codelineno-25-93"></a>headers:
<a id="__codelineno-25-94" name="__codelineno-25-94" href="#__codelineno-25-94"></a>
<a id="__codelineno-25-95" name="__codelineno-25-95" href="#__codelineno-25-95"></a>
<a id="__codelineno-25-96" name="__codelineno-25-96" href="#__codelineno-25-96"></a>
<a id="__codelineno-25-97" name="__codelineno-25-97" href="#__codelineno-25-97"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-25-98" name="__codelineno-25-98" href="#__codelineno-25-98"></a>
<a id="__codelineno-25-99" name="__codelineno-25-99" href="#__codelineno-25-99"></a>
<a id="__codelineno-25-100" name="__codelineno-25-100" href="#__codelineno-25-100"></a>
<a id="__codelineno-25-101" name="__codelineno-25-101" href="#__codelineno-25-101"></a>service:
<a id="__codelineno-25-102" name="__codelineno-25-102" href="#__codelineno-25-102"></a>
<a id="__codelineno-25-103" name="__codelineno-25-103" href="#__codelineno-25-103"></a>
<a id="__codelineno-25-104" name="__codelineno-25-104" href="#__codelineno-25-104"></a>
<a id="__codelineno-25-105" name="__codelineno-25-105" href="#__codelineno-25-105"></a>pipelines:
<a id="__codelineno-25-106" name="__codelineno-25-106" href="#__codelineno-25-106"></a>
<a id="__codelineno-25-107" name="__codelineno-25-107" href="#__codelineno-25-107"></a>
<a id="__codelineno-25-108" name="__codelineno-25-108" href="#__codelineno-25-108"></a>
<a id="__codelineno-25-109" name="__codelineno-25-109" href="#__codelineno-25-109"></a>traces:
<a id="__codelineno-25-110" name="__codelineno-25-110" href="#__codelineno-25-110"></a>
<a id="__codelineno-25-111" name="__codelineno-25-111" href="#__codelineno-25-111"></a>
<a id="__codelineno-25-112" name="__codelineno-25-112" href="#__codelineno-25-112"></a>
<a id="__codelineno-25-113" name="__codelineno-25-113" href="#__codelineno-25-113"></a>receivers: [otlp]
<a id="__codelineno-25-114" name="__codelineno-25-114" href="#__codelineno-25-114"></a>
<a id="__codelineno-25-115" name="__codelineno-25-115" href="#__codelineno-25-115"></a>
<a id="__codelineno-25-116" name="__codelineno-25-116" href="#__codelineno-25-116"></a>
<a id="__codelineno-25-117" name="__codelineno-25-117" href="#__codelineno-25-117"></a>processors: [batch/traces]
<a id="__codelineno-25-118" name="__codelineno-25-118" href="#__codelineno-25-118"></a>
<a id="__codelineno-25-119" name="__codelineno-25-119" href="#__codelineno-25-119"></a>
<a id="__codelineno-25-120" name="__codelineno-25-120" href="#__codelineno-25-120"></a>
<a id="__codelineno-25-121" name="__codelineno-25-121" href="#__codelineno-25-121"></a>exporters: [otlp_http]
<a id="__codelineno-25-122" name="__codelineno-25-122" href="#__codelineno-25-122"></a>
<a id="__codelineno-25-123" name="__codelineno-25-123" href="#__codelineno-25-123"></a>
<a id="__codelineno-25-124" name="__codelineno-25-124" href="#__codelineno-25-124"></a>
<a id="__codelineno-25-125" name="__codelineno-25-125" href="#__codelineno-25-125"></a>metrics:
<a id="__codelineno-25-126" name="__codelineno-25-126" href="#__codelineno-25-126"></a>
<a id="__codelineno-25-127" name="__codelineno-25-127" href="#__codelineno-25-127"></a>
<a id="__codelineno-25-128" name="__codelineno-25-128" href="#__codelineno-25-128"></a>
<a id="__codelineno-25-129" name="__codelineno-25-129" href="#__codelineno-25-129"></a>receivers: [otlp]
<a id="__codelineno-25-130" name="__codelineno-25-130" href="#__codelineno-25-130"></a>
<a id="__codelineno-25-131" name="__codelineno-25-131" href="#__codelineno-25-131"></a>
<a id="__codelineno-25-132" name="__codelineno-25-132" href="#__codelineno-25-132"></a>
<a id="__codelineno-25-133" name="__codelineno-25-133" href="#__codelineno-25-133"></a>processors: [batch/metrics]
<a id="__codelineno-25-134" name="__codelineno-25-134" href="#__codelineno-25-134"></a>
<a id="__codelineno-25-135" name="__codelineno-25-135" href="#__codelineno-25-135"></a>
<a id="__codelineno-25-136" name="__codelineno-25-136" href="#__codelineno-25-136"></a>
<a id="__codelineno-25-137" name="__codelineno-25-137" href="#__codelineno-25-137"></a>exporters: [otlp_http]
<a id="__codelineno-25-138" name="__codelineno-25-138" href="#__codelineno-25-138"></a>
<a id="__codelineno-25-139" name="__codelineno-25-139" href="#__codelineno-25-139"></a>
<a id="__codelineno-25-140" name="__codelineno-25-140" href="#__codelineno-25-140"></a>
<a id="__codelineno-25-141" name="__codelineno-25-141" href="#__codelineno-25-141"></a>logs:
<a id="__codelineno-25-142" name="__codelineno-25-142" href="#__codelineno-25-142"></a>
<a id="__codelineno-25-143" name="__codelineno-25-143" href="#__codelineno-25-143"></a>
<a id="__codelineno-25-144" name="__codelineno-25-144" href="#__codelineno-25-144"></a>
<a id="__codelineno-25-145" name="__codelineno-25-145" href="#__codelineno-25-145"></a>receivers: [otlp]
<a id="__codelineno-25-146" name="__codelineno-25-146" href="#__codelineno-25-146"></a>
<a id="__codelineno-25-147" name="__codelineno-25-147" href="#__codelineno-25-147"></a>
<a id="__codelineno-25-148" name="__codelineno-25-148" href="#__codelineno-25-148"></a>
<a id="__codelineno-25-149" name="__codelineno-25-149" href="#__codelineno-25-149"></a>processors: [batch/logs]
<a id="__codelineno-25-150" name="__codelineno-25-150" href="#__codelineno-25-150"></a>
<a id="__codelineno-25-151" name="__codelineno-25-151" href="#__codelineno-25-151"></a>
<a id="__codelineno-25-152" name="__codelineno-25-152" href="#__codelineno-25-152"></a>
<a id="__codelineno-25-153" name="__codelineno-25-153" href="#__codelineno-25-153"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_1">Components<a class="headerlink" href="#components_1" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_1">Receivers<a class="headerlink" href="#receivers_1" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance.</p>
<p>This is for demonstration purposes. You can specify any other valid receiver here (for example, <code>zipkin</code>).</p>
<h3 id="processors">Processors<a class="headerlink" href="#processors" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we specify a different <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/processor/batchprocessor"><code>batch</code> processor√Ø¬ª¬ø</a>
for each telemetry signal, with the following parameters:</p>
<ul>
<li><code>send_batch_size</code>: sets the minimum number of entries the processor will queue before sending the whole batch.</li>
<li><code>send_batch_max_size</code>: sets the maximum number of entries a batch may contain. More entries will split the batch into smaller ones.</li>
<li><code>timeout</code>: defines the duration after which the batch will be sent. A batch is sent after the <code>timeout</code> only when the <code>send_batch_size</code> condition is not reached.</li>
</ul>
<p>With this configuration, the Collector queues telemetry entries in batches, ensuring a good balance between the size and number of export requests
to the Dynatrace API.</p>
<p>Batch size values</p>
<p>Not only the number of individual telemetry entries will contribute to the eventual size
of a batch, but also the number of associated attributes and their size.</p>
<p>For example, attributes on spans/metrics/logs can make a batch size with the same amount of entries larger,
depending on how many/how large the attributes are.</p>
<p>Use the configuration values above as a starting point, but be sure to adapt them to fit your data volume
and comply with the Dynatrace API limits for each signal type (<a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-traces#ingestion-limits" title="Learn how Dynatrace ingests OpenTelemetry traces and what limitations apply.">traces</a>,
<a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#limits" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">metrics</a>, <a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs#ingestion-limits" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">logs</a>) to avoid request rejections.</p>
<p>You can use the <a href="/docs/ingest-from/dynatrace-activegate/activegate-sfm-metrics#rest" title="Explore ActiveGate self-monitoring  metrics.">ActiveGate self-monitoring metrics</a>
to troubleshoot rejected requests. For example, you can use: <code>dsfm:active_gate.rest.request_count</code> filtering for the <code>operation</code>
dimension (<code>POST /otlp/v1/&lt;...&gt;</code> for OTLP ingest) and split by <code>response_code</code>. Large requests are rejected with HTTP status code <code>413</code>.</p>
<p>Another alternative is checking the Collector logs for error messages such as: <code>HTTP Status Code 413, Message=Max Payload size of</code>.</p>
<h3 id="exporters_1">Exporters<a class="headerlink" href="#exporters_1" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_1">Service pipelines<a class="headerlink" href="#service-pipelines_1" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver and exporter objects into pipelines for traces, metrics, and logs and enable our batch processor by referencing it under <code>processors</code> for each respective pipeline.</p>
<h2 id="limits-and-limitations">Limits and limitations<a class="headerlink" href="#limits-and-limitations" title="Permanent link">&para;</a></h2>
<p>Data is ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP APIs</a> and is subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OpenTelemetry logs</a></li>
</ul>
<h2 id="related-topics_1">Related topics<a class="headerlink" href="#related-topics_1" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich OTLP requests with Kubernetes data</a></li>
</ul>
<hr />
<h2 id="source-enrichmd">Source: enrich.md<a class="headerlink" href="#source-enrichmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Enrich with OneAgent (non-containerized)
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/enrich
scraped: 2026-02-15T21:25:58.996874</p>
<hr />
<h1 id="enrich-with-oneagent-non-containerized">Enrich with OneAgent (non-containerized)<a class="headerlink" href="#enrich-with-oneagent-non-containerized" title="Permanent link">&para;</a></h1>
<h1 id="enrich-with-oneagent-non-containerized_1">Enrich with OneAgent (non-containerized)<a class="headerlink" href="#enrich-with-oneagent-non-containerized_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Dec 17, 2025</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance to enrich OpenTelemetry data with OneAgent host entities.</p>
<p>Enrichment is used for linking OpenTelemetry data to its OneAgent host and properly associating it within the topology model. For example, when ingesting logs from different hosts, tying the host entity to the respective log data allows you to run host-based log analytics tasks.</p>
<p>Container environments</p>
<p>Enrichment is specific to non-container OneAgent environments. Configuring a containerized Collector enrichment setup may lead to incorrect host and topology associations.</p>
<h2 id="prerequisites_2">Prerequisites<a class="headerlink" href="#prerequisites_2" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/resourcedetectionprocessor">Resource Detection processor√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>A OneAgent running on the same host as the Collector, where the OneAgent monitors in either Full-Stack, Infrastructure, or Foundation &amp; Discovery mode.</li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported, configured as system environment variable</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate), configured as system environment variable</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_2">Demo configuration<a class="headerlink" href="#demo-configuration_2" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>receivers:
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>otlp:
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>protocols:
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>grpc:
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>http:
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a>
<a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a>
<a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>
<a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>
<a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a>
<a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a>
<a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a>processors:
<a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a>
<a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a>
<a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a>
<a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a>resourcedetection/dynatrace:
<a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a>
<a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a>
<a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a>
<a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a>detectors: [dynatrace]
<a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a>
<a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a>
<a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a>
<a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a>override: false
<a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a>
<a id="__codelineno-26-43" name="__codelineno-26-43" href="#__codelineno-26-43"></a>
<a id="__codelineno-26-44" name="__codelineno-26-44" href="#__codelineno-26-44"></a>
<a id="__codelineno-26-45" name="__codelineno-26-45" href="#__codelineno-26-45"></a>exporters:
<a id="__codelineno-26-46" name="__codelineno-26-46" href="#__codelineno-26-46"></a>
<a id="__codelineno-26-47" name="__codelineno-26-47" href="#__codelineno-26-47"></a>
<a id="__codelineno-26-48" name="__codelineno-26-48" href="#__codelineno-26-48"></a>
<a id="__codelineno-26-49" name="__codelineno-26-49" href="#__codelineno-26-49"></a>otlp_http:
<a id="__codelineno-26-50" name="__codelineno-26-50" href="#__codelineno-26-50"></a>
<a id="__codelineno-26-51" name="__codelineno-26-51" href="#__codelineno-26-51"></a>
<a id="__codelineno-26-52" name="__codelineno-26-52" href="#__codelineno-26-52"></a>
<a id="__codelineno-26-53" name="__codelineno-26-53" href="#__codelineno-26-53"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-26-54" name="__codelineno-26-54" href="#__codelineno-26-54"></a>
<a id="__codelineno-26-55" name="__codelineno-26-55" href="#__codelineno-26-55"></a>
<a id="__codelineno-26-56" name="__codelineno-26-56" href="#__codelineno-26-56"></a>
<a id="__codelineno-26-57" name="__codelineno-26-57" href="#__codelineno-26-57"></a>headers:
<a id="__codelineno-26-58" name="__codelineno-26-58" href="#__codelineno-26-58"></a>
<a id="__codelineno-26-59" name="__codelineno-26-59" href="#__codelineno-26-59"></a>
<a id="__codelineno-26-60" name="__codelineno-26-60" href="#__codelineno-26-60"></a>
<a id="__codelineno-26-61" name="__codelineno-26-61" href="#__codelineno-26-61"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-26-62" name="__codelineno-26-62" href="#__codelineno-26-62"></a>
<a id="__codelineno-26-63" name="__codelineno-26-63" href="#__codelineno-26-63"></a>
<a id="__codelineno-26-64" name="__codelineno-26-64" href="#__codelineno-26-64"></a>
<a id="__codelineno-26-65" name="__codelineno-26-65" href="#__codelineno-26-65"></a>service:
<a id="__codelineno-26-66" name="__codelineno-26-66" href="#__codelineno-26-66"></a>
<a id="__codelineno-26-67" name="__codelineno-26-67" href="#__codelineno-26-67"></a>
<a id="__codelineno-26-68" name="__codelineno-26-68" href="#__codelineno-26-68"></a>
<a id="__codelineno-26-69" name="__codelineno-26-69" href="#__codelineno-26-69"></a>pipelines:
<a id="__codelineno-26-70" name="__codelineno-26-70" href="#__codelineno-26-70"></a>
<a id="__codelineno-26-71" name="__codelineno-26-71" href="#__codelineno-26-71"></a>
<a id="__codelineno-26-72" name="__codelineno-26-72" href="#__codelineno-26-72"></a>
<a id="__codelineno-26-73" name="__codelineno-26-73" href="#__codelineno-26-73"></a>traces:
<a id="__codelineno-26-74" name="__codelineno-26-74" href="#__codelineno-26-74"></a>
<a id="__codelineno-26-75" name="__codelineno-26-75" href="#__codelineno-26-75"></a>
<a id="__codelineno-26-76" name="__codelineno-26-76" href="#__codelineno-26-76"></a>
<a id="__codelineno-26-77" name="__codelineno-26-77" href="#__codelineno-26-77"></a>receivers: [otlp]
<a id="__codelineno-26-78" name="__codelineno-26-78" href="#__codelineno-26-78"></a>
<a id="__codelineno-26-79" name="__codelineno-26-79" href="#__codelineno-26-79"></a>
<a id="__codelineno-26-80" name="__codelineno-26-80" href="#__codelineno-26-80"></a>
<a id="__codelineno-26-81" name="__codelineno-26-81" href="#__codelineno-26-81"></a>processors: [resourcedetection/dynatrace]
<a id="__codelineno-26-82" name="__codelineno-26-82" href="#__codelineno-26-82"></a>
<a id="__codelineno-26-83" name="__codelineno-26-83" href="#__codelineno-26-83"></a>
<a id="__codelineno-26-84" name="__codelineno-26-84" href="#__codelineno-26-84"></a>
<a id="__codelineno-26-85" name="__codelineno-26-85" href="#__codelineno-26-85"></a>exporters: [otlp_http]
<a id="__codelineno-26-86" name="__codelineno-26-86" href="#__codelineno-26-86"></a>
<a id="__codelineno-26-87" name="__codelineno-26-87" href="#__codelineno-26-87"></a>
<a id="__codelineno-26-88" name="__codelineno-26-88" href="#__codelineno-26-88"></a>
<a id="__codelineno-26-89" name="__codelineno-26-89" href="#__codelineno-26-89"></a>metrics:
<a id="__codelineno-26-90" name="__codelineno-26-90" href="#__codelineno-26-90"></a>
<a id="__codelineno-26-91" name="__codelineno-26-91" href="#__codelineno-26-91"></a>
<a id="__codelineno-26-92" name="__codelineno-26-92" href="#__codelineno-26-92"></a>
<a id="__codelineno-26-93" name="__codelineno-26-93" href="#__codelineno-26-93"></a>receivers: [otlp]
<a id="__codelineno-26-94" name="__codelineno-26-94" href="#__codelineno-26-94"></a>
<a id="__codelineno-26-95" name="__codelineno-26-95" href="#__codelineno-26-95"></a>
<a id="__codelineno-26-96" name="__codelineno-26-96" href="#__codelineno-26-96"></a>
<a id="__codelineno-26-97" name="__codelineno-26-97" href="#__codelineno-26-97"></a>processors: [resourcedetection/dynatrace]
<a id="__codelineno-26-98" name="__codelineno-26-98" href="#__codelineno-26-98"></a>
<a id="__codelineno-26-99" name="__codelineno-26-99" href="#__codelineno-26-99"></a>
<a id="__codelineno-26-100" name="__codelineno-26-100" href="#__codelineno-26-100"></a>
<a id="__codelineno-26-101" name="__codelineno-26-101" href="#__codelineno-26-101"></a>exporters: [otlp_http]
<a id="__codelineno-26-102" name="__codelineno-26-102" href="#__codelineno-26-102"></a>
<a id="__codelineno-26-103" name="__codelineno-26-103" href="#__codelineno-26-103"></a>
<a id="__codelineno-26-104" name="__codelineno-26-104" href="#__codelineno-26-104"></a>
<a id="__codelineno-26-105" name="__codelineno-26-105" href="#__codelineno-26-105"></a>logs:
<a id="__codelineno-26-106" name="__codelineno-26-106" href="#__codelineno-26-106"></a>
<a id="__codelineno-26-107" name="__codelineno-26-107" href="#__codelineno-26-107"></a>
<a id="__codelineno-26-108" name="__codelineno-26-108" href="#__codelineno-26-108"></a>
<a id="__codelineno-26-109" name="__codelineno-26-109" href="#__codelineno-26-109"></a>receivers: [otlp]
<a id="__codelineno-26-110" name="__codelineno-26-110" href="#__codelineno-26-110"></a>
<a id="__codelineno-26-111" name="__codelineno-26-111" href="#__codelineno-26-111"></a>
<a id="__codelineno-26-112" name="__codelineno-26-112" href="#__codelineno-26-112"></a>
<a id="__codelineno-26-113" name="__codelineno-26-113" href="#__codelineno-26-113"></a>processors: [resourcedetection/dynatrace]
<a id="__codelineno-26-114" name="__codelineno-26-114" href="#__codelineno-26-114"></a>
<a id="__codelineno-26-115" name="__codelineno-26-115" href="#__codelineno-26-115"></a>
<a id="__codelineno-26-116" name="__codelineno-26-116" href="#__codelineno-26-116"></a>
<a id="__codelineno-26-117" name="__codelineno-26-117" href="#__codelineno-26-117"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_2">Components<a class="headerlink" href="#components_2" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_2">Receivers<a class="headerlink" href="#receivers_2" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance.</p>
<p>This is mainly for demonstration purposes. You can specify any other valid receiver here (for example, <code>zipkin</code>).</p>
<h3 id="processors_1">Processors<a class="headerlink" href="#processors_1" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we specify the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/resourcedetectionprocessor"><code>resourcedetection</code> processor√Ø¬ª¬ø</a> and configure it with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/resourcedetectionprocessor/README.md#dynatrace">Dynatrace-specific detector <code>dynatrace</code>√Ø¬ª¬ø</a>.</p>
<p>With this configuration, the resource detector processor will attempt to load the following three attributes from the <a href="/docs/ingest-from/extend-dynatrace/extend-data#dynatrace-oneagent" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent enrichment file</a>:</p>
<ul>
<li><code>dt.entity.host</code></li>
<li><code>host.name</code></li>
<li><code>dt.smartscape.host</code></li>
</ul>
<p>If the resource detector could load these values successfully, it will add them as resource attributes to the OTLP request. No additional processor configuration is necessary.</p>
<h3 id="exporters_2">Exporters<a class="headerlink" href="#exporters_2" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>headers</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipeline">Service pipeline<a class="headerlink" href="#service-pipeline" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver, processor, and exporter objects into service pipelines, which will perform these steps:</p>
<ul>
<li>accept OTLP requests on the configured ports</li>
<li>enrich them with the Dynatrace-relevant host data, using the resource detector processor</li>
<li>and export the enriched data to Dynatrace</li>
</ul>
<hr />
<h2 id="source-grpcmd">Source: grpc.md<a class="headerlink" href="#source-grpcmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Transform OTLP gRPC to HTTP with the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/grpc
scraped: 2026-02-16T21:28:04.681933</p>
<hr />
<h1 id="transform-otlp-grpc-to-http-with-the-opentelemetry-collector">Transform OTLP gRPC to HTTP with the OpenTelemetry Collector<a class="headerlink" href="#transform-otlp-grpc-to-http-with-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="transform-otlp-grpc-to-http-with-the-opentelemetry-collector_1">Transform OTLP gRPC to HTTP with the OpenTelemetry Collector<a class="headerlink" href="#transform-otlp-grpc-to-http-with-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Oct 11, 2023</li>
</ul>
<p>The following configuration example shows how you would configure a Collector instance to transform a gRPC OTLP request to its HTTP counterpart.</p>
<h2 id="prerequisites_3">Prerequisites<a class="headerlink" href="#prerequisites_3" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace OTel Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-core" title="Learn about the Dynatrace OTel Collector.">Core</a> or <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace OTel Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace OTel Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_3">Demo configuration<a class="headerlink" href="#demo-configuration_3" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>receivers:
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>otlp:
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>protocols:
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>grpc:
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>exporters:
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a>
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>
<a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>
<a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>otlp_http:
<a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>
<a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a>
<a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>
<a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a>
<a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a>
<a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a>
<a id="__codelineno-27-33" name="__codelineno-27-33" href="#__codelineno-27-33"></a>headers:
<a id="__codelineno-27-34" name="__codelineno-27-34" href="#__codelineno-27-34"></a>
<a id="__codelineno-27-35" name="__codelineno-27-35" href="#__codelineno-27-35"></a>
<a id="__codelineno-27-36" name="__codelineno-27-36" href="#__codelineno-27-36"></a>
<a id="__codelineno-27-37" name="__codelineno-27-37" href="#__codelineno-27-37"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-27-38" name="__codelineno-27-38" href="#__codelineno-27-38"></a>
<a id="__codelineno-27-39" name="__codelineno-27-39" href="#__codelineno-27-39"></a>
<a id="__codelineno-27-40" name="__codelineno-27-40" href="#__codelineno-27-40"></a>
<a id="__codelineno-27-41" name="__codelineno-27-41" href="#__codelineno-27-41"></a>service:
<a id="__codelineno-27-42" name="__codelineno-27-42" href="#__codelineno-27-42"></a>
<a id="__codelineno-27-43" name="__codelineno-27-43" href="#__codelineno-27-43"></a>
<a id="__codelineno-27-44" name="__codelineno-27-44" href="#__codelineno-27-44"></a>
<a id="__codelineno-27-45" name="__codelineno-27-45" href="#__codelineno-27-45"></a>pipelines:
<a id="__codelineno-27-46" name="__codelineno-27-46" href="#__codelineno-27-46"></a>
<a id="__codelineno-27-47" name="__codelineno-27-47" href="#__codelineno-27-47"></a>
<a id="__codelineno-27-48" name="__codelineno-27-48" href="#__codelineno-27-48"></a>
<a id="__codelineno-27-49" name="__codelineno-27-49" href="#__codelineno-27-49"></a>traces:
<a id="__codelineno-27-50" name="__codelineno-27-50" href="#__codelineno-27-50"></a>
<a id="__codelineno-27-51" name="__codelineno-27-51" href="#__codelineno-27-51"></a>
<a id="__codelineno-27-52" name="__codelineno-27-52" href="#__codelineno-27-52"></a>
<a id="__codelineno-27-53" name="__codelineno-27-53" href="#__codelineno-27-53"></a>receivers: [otlp]
<a id="__codelineno-27-54" name="__codelineno-27-54" href="#__codelineno-27-54"></a>
<a id="__codelineno-27-55" name="__codelineno-27-55" href="#__codelineno-27-55"></a>
<a id="__codelineno-27-56" name="__codelineno-27-56" href="#__codelineno-27-56"></a>
<a id="__codelineno-27-57" name="__codelineno-27-57" href="#__codelineno-27-57"></a>processors: []
<a id="__codelineno-27-58" name="__codelineno-27-58" href="#__codelineno-27-58"></a>
<a id="__codelineno-27-59" name="__codelineno-27-59" href="#__codelineno-27-59"></a>
<a id="__codelineno-27-60" name="__codelineno-27-60" href="#__codelineno-27-60"></a>
<a id="__codelineno-27-61" name="__codelineno-27-61" href="#__codelineno-27-61"></a>exporters: [otlp_http]
<a id="__codelineno-27-62" name="__codelineno-27-62" href="#__codelineno-27-62"></a>
<a id="__codelineno-27-63" name="__codelineno-27-63" href="#__codelineno-27-63"></a>
<a id="__codelineno-27-64" name="__codelineno-27-64" href="#__codelineno-27-64"></a>
<a id="__codelineno-27-65" name="__codelineno-27-65" href="#__codelineno-27-65"></a>metrics:
<a id="__codelineno-27-66" name="__codelineno-27-66" href="#__codelineno-27-66"></a>
<a id="__codelineno-27-67" name="__codelineno-27-67" href="#__codelineno-27-67"></a>
<a id="__codelineno-27-68" name="__codelineno-27-68" href="#__codelineno-27-68"></a>
<a id="__codelineno-27-69" name="__codelineno-27-69" href="#__codelineno-27-69"></a>receivers: [otlp]
<a id="__codelineno-27-70" name="__codelineno-27-70" href="#__codelineno-27-70"></a>
<a id="__codelineno-27-71" name="__codelineno-27-71" href="#__codelineno-27-71"></a>
<a id="__codelineno-27-72" name="__codelineno-27-72" href="#__codelineno-27-72"></a>
<a id="__codelineno-27-73" name="__codelineno-27-73" href="#__codelineno-27-73"></a>processors: []
<a id="__codelineno-27-74" name="__codelineno-27-74" href="#__codelineno-27-74"></a>
<a id="__codelineno-27-75" name="__codelineno-27-75" href="#__codelineno-27-75"></a>
<a id="__codelineno-27-76" name="__codelineno-27-76" href="#__codelineno-27-76"></a>
<a id="__codelineno-27-77" name="__codelineno-27-77" href="#__codelineno-27-77"></a>exporters: [otlp_http]
<a id="__codelineno-27-78" name="__codelineno-27-78" href="#__codelineno-27-78"></a>
<a id="__codelineno-27-79" name="__codelineno-27-79" href="#__codelineno-27-79"></a>
<a id="__codelineno-27-80" name="__codelineno-27-80" href="#__codelineno-27-80"></a>
<a id="__codelineno-27-81" name="__codelineno-27-81" href="#__codelineno-27-81"></a>logs:
<a id="__codelineno-27-82" name="__codelineno-27-82" href="#__codelineno-27-82"></a>
<a id="__codelineno-27-83" name="__codelineno-27-83" href="#__codelineno-27-83"></a>
<a id="__codelineno-27-84" name="__codelineno-27-84" href="#__codelineno-27-84"></a>
<a id="__codelineno-27-85" name="__codelineno-27-85" href="#__codelineno-27-85"></a>receivers: [otlp]
<a id="__codelineno-27-86" name="__codelineno-27-86" href="#__codelineno-27-86"></a>
<a id="__codelineno-27-87" name="__codelineno-27-87" href="#__codelineno-27-87"></a>
<a id="__codelineno-27-88" name="__codelineno-27-88" href="#__codelineno-27-88"></a>
<a id="__codelineno-27-89" name="__codelineno-27-89" href="#__codelineno-27-89"></a>processors: []
<a id="__codelineno-27-90" name="__codelineno-27-90" href="#__codelineno-27-90"></a>
<a id="__codelineno-27-91" name="__codelineno-27-91" href="#__codelineno-27-91"></a>
<a id="__codelineno-27-92" name="__codelineno-27-92" href="#__codelineno-27-92"></a>
<a id="__codelineno-27-93" name="__codelineno-27-93" href="#__codelineno-27-93"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_3">Components<a class="headerlink" href="#components_3" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_3">Receivers<a class="headerlink" href="#receivers_3" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the gRPC <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/receiver/otlpreceiver"><code>otlp</code> receiver√Ø¬ª¬ø</a> as active receiver component for our Collector instance.</p>
<h3 id="exporters_3">Exporters<a class="headerlink" href="#exporters_3" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_2">Service pipelines<a class="headerlink" href="#service-pipelines_2" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we eventually assemble our receiver and exporter objects into pipelines, which explictly accept gRPC requests and forward them on HTTP to Dynatrace.</p>
<h2 id="limits-and-limitations_1">Limits and limitations<a class="headerlink" href="#limits-and-limitations_1" title="Permanent link">&para;</a></h2>
<p>Data is ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP APIs</a> and is subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OpenTelemetry logs</a></li>
</ul>
<h2 id="related-topics_2">Related topics<a class="headerlink" href="#related-topics_2" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich OTLP requests with Kubernetes data</a></li>
</ul>
<hr />
<h2 id="source-histogramsmd">Source: histograms.md<a class="headerlink" href="#source-histogramsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Compute histogram summaries with the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/histograms
scraped: 2026-02-16T09:33:35.925773</p>
<hr />
<h1 id="compute-histogram-summaries-with-the-opentelemetry-collector">Compute histogram summaries with the OpenTelemetry Collector<a class="headerlink" href="#compute-histogram-summaries-with-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="compute-histogram-summaries-with-the-opentelemetry-collector_1">Compute histogram summaries with the OpenTelemetry Collector<a class="headerlink" href="#compute-histogram-summaries-with-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>3-min read</li>
<li>Published Apr 08, 2024</li>
</ul>
<p>Ingest histograms directly</p>
<p>Starting with Dynatrace version 1.300, histogram ingestion is supported directly via OTLP ingest API. Consequently, it's not required to use Collector as a workaround. Dynatrace recommends ingesting histograms directly without additional data manipulation.</p>
<p>The following configuration example shows how to use the Collector to compute and ingest summaries of histogram buckets, such as the overall sum of all values in the bucket and their total count.</p>
<h2 id="prerequisites_4">Prerequisites<a class="headerlink" href="#prerequisites_4" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor">transform√Ø¬ª¬ø</a> and <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/filterprocessor">filter√Ø¬ª¬ø</a> processors:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace OTel Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace OTel Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace OTel Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_4">Demo configuration<a class="headerlink" href="#demo-configuration_4" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>receivers:
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>otlp:
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>protocols:
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>grpc:
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a>
<a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>http:
<a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a>
<a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>
<a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a>
<a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a>
<a id="__codelineno-28-27" name="__codelineno-28-27" href="#__codelineno-28-27"></a>
<a id="__codelineno-28-28" name="__codelineno-28-28" href="#__codelineno-28-28"></a>
<a id="__codelineno-28-29" name="__codelineno-28-29" href="#__codelineno-28-29"></a>processors:
<a id="__codelineno-28-30" name="__codelineno-28-30" href="#__codelineno-28-30"></a>
<a id="__codelineno-28-31" name="__codelineno-28-31" href="#__codelineno-28-31"></a>
<a id="__codelineno-28-32" name="__codelineno-28-32" href="#__codelineno-28-32"></a>
<a id="__codelineno-28-33" name="__codelineno-28-33" href="#__codelineno-28-33"></a>transform:
<a id="__codelineno-28-34" name="__codelineno-28-34" href="#__codelineno-28-34"></a>
<a id="__codelineno-28-35" name="__codelineno-28-35" href="#__codelineno-28-35"></a>
<a id="__codelineno-28-36" name="__codelineno-28-36" href="#__codelineno-28-36"></a>
<a id="__codelineno-28-37" name="__codelineno-28-37" href="#__codelineno-28-37"></a>metric_statements:
<a id="__codelineno-28-38" name="__codelineno-28-38" href="#__codelineno-28-38"></a>
<a id="__codelineno-28-39" name="__codelineno-28-39" href="#__codelineno-28-39"></a>
<a id="__codelineno-28-40" name="__codelineno-28-40" href="#__codelineno-28-40"></a>
<a id="__codelineno-28-41" name="__codelineno-28-41" href="#__codelineno-28-41"></a>- context: metric
<a id="__codelineno-28-42" name="__codelineno-28-42" href="#__codelineno-28-42"></a>
<a id="__codelineno-28-43" name="__codelineno-28-43" href="#__codelineno-28-43"></a>
<a id="__codelineno-28-44" name="__codelineno-28-44" href="#__codelineno-28-44"></a>
<a id="__codelineno-28-45" name="__codelineno-28-45" href="#__codelineno-28-45"></a>statements:
<a id="__codelineno-28-46" name="__codelineno-28-46" href="#__codelineno-28-46"></a>
<a id="__codelineno-28-47" name="__codelineno-28-47" href="#__codelineno-28-47"></a>
<a id="__codelineno-28-48" name="__codelineno-28-48" href="#__codelineno-28-48"></a>
<a id="__codelineno-28-49" name="__codelineno-28-49" href="#__codelineno-28-49"></a># Get count from the histogram. The new metric name will be &lt;histogram_name&gt;_count
<a id="__codelineno-28-50" name="__codelineno-28-50" href="#__codelineno-28-50"></a>
<a id="__codelineno-28-51" name="__codelineno-28-51" href="#__codelineno-28-51"></a>
<a id="__codelineno-28-52" name="__codelineno-28-52" href="#__codelineno-28-52"></a>
<a id="__codelineno-28-53" name="__codelineno-28-53" href="#__codelineno-28-53"></a>- extract_count_metric(true) where type == METRIC_DATA_TYPE_HISTOGRAM
<a id="__codelineno-28-54" name="__codelineno-28-54" href="#__codelineno-28-54"></a>
<a id="__codelineno-28-55" name="__codelineno-28-55" href="#__codelineno-28-55"></a>
<a id="__codelineno-28-56" name="__codelineno-28-56" href="#__codelineno-28-56"></a>
<a id="__codelineno-28-57" name="__codelineno-28-57" href="#__codelineno-28-57"></a># Get sum from the histogram. The new metric name will be &lt;histogram_name&gt;_sum
<a id="__codelineno-28-58" name="__codelineno-28-58" href="#__codelineno-28-58"></a>
<a id="__codelineno-28-59" name="__codelineno-28-59" href="#__codelineno-28-59"></a>
<a id="__codelineno-28-60" name="__codelineno-28-60" href="#__codelineno-28-60"></a>
<a id="__codelineno-28-61" name="__codelineno-28-61" href="#__codelineno-28-61"></a>- extract_sum_metric(true) where type == METRIC_DATA_TYPE_HISTOGRAM
<a id="__codelineno-28-62" name="__codelineno-28-62" href="#__codelineno-28-62"></a>
<a id="__codelineno-28-63" name="__codelineno-28-63" href="#__codelineno-28-63"></a>
<a id="__codelineno-28-64" name="__codelineno-28-64" href="#__codelineno-28-64"></a>
<a id="__codelineno-28-65" name="__codelineno-28-65" href="#__codelineno-28-65"></a># convert the &lt;histogram_name&gt;_sum metrics to gauges.
<a id="__codelineno-28-66" name="__codelineno-28-66" href="#__codelineno-28-66"></a>
<a id="__codelineno-28-67" name="__codelineno-28-67" href="#__codelineno-28-67"></a>
<a id="__codelineno-28-68" name="__codelineno-28-68" href="#__codelineno-28-68"></a>
<a id="__codelineno-28-69" name="__codelineno-28-69" href="#__codelineno-28-69"></a>- convert_sum_to_gauge() where IsMatch(name, &quot;.*_sum&quot;)
<a id="__codelineno-28-70" name="__codelineno-28-70" href="#__codelineno-28-70"></a>
<a id="__codelineno-28-71" name="__codelineno-28-71" href="#__codelineno-28-71"></a>
<a id="__codelineno-28-72" name="__codelineno-28-72" href="#__codelineno-28-72"></a>
<a id="__codelineno-28-73" name="__codelineno-28-73" href="#__codelineno-28-73"></a>filter:
<a id="__codelineno-28-74" name="__codelineno-28-74" href="#__codelineno-28-74"></a>
<a id="__codelineno-28-75" name="__codelineno-28-75" href="#__codelineno-28-75"></a>
<a id="__codelineno-28-76" name="__codelineno-28-76" href="#__codelineno-28-76"></a>
<a id="__codelineno-28-77" name="__codelineno-28-77" href="#__codelineno-28-77"></a>metrics:
<a id="__codelineno-28-78" name="__codelineno-28-78" href="#__codelineno-28-78"></a>
<a id="__codelineno-28-79" name="__codelineno-28-79" href="#__codelineno-28-79"></a>
<a id="__codelineno-28-80" name="__codelineno-28-80" href="#__codelineno-28-80"></a>
<a id="__codelineno-28-81" name="__codelineno-28-81" href="#__codelineno-28-81"></a>metric:
<a id="__codelineno-28-82" name="__codelineno-28-82" href="#__codelineno-28-82"></a>
<a id="__codelineno-28-83" name="__codelineno-28-83" href="#__codelineno-28-83"></a>
<a id="__codelineno-28-84" name="__codelineno-28-84" href="#__codelineno-28-84"></a>
<a id="__codelineno-28-85" name="__codelineno-28-85" href="#__codelineno-28-85"></a># Drop metrics of type histogram. The _count and _sum metrics will still be exported.
<a id="__codelineno-28-86" name="__codelineno-28-86" href="#__codelineno-28-86"></a>
<a id="__codelineno-28-87" name="__codelineno-28-87" href="#__codelineno-28-87"></a>
<a id="__codelineno-28-88" name="__codelineno-28-88" href="#__codelineno-28-88"></a>
<a id="__codelineno-28-89" name="__codelineno-28-89" href="#__codelineno-28-89"></a>- type == METRIC_DATA_TYPE_HISTOGRAM
<a id="__codelineno-28-90" name="__codelineno-28-90" href="#__codelineno-28-90"></a>
<a id="__codelineno-28-91" name="__codelineno-28-91" href="#__codelineno-28-91"></a>
<a id="__codelineno-28-92" name="__codelineno-28-92" href="#__codelineno-28-92"></a>
<a id="__codelineno-28-93" name="__codelineno-28-93" href="#__codelineno-28-93"></a>exporters:
<a id="__codelineno-28-94" name="__codelineno-28-94" href="#__codelineno-28-94"></a>
<a id="__codelineno-28-95" name="__codelineno-28-95" href="#__codelineno-28-95"></a>
<a id="__codelineno-28-96" name="__codelineno-28-96" href="#__codelineno-28-96"></a>
<a id="__codelineno-28-97" name="__codelineno-28-97" href="#__codelineno-28-97"></a>otlp_http:
<a id="__codelineno-28-98" name="__codelineno-28-98" href="#__codelineno-28-98"></a>
<a id="__codelineno-28-99" name="__codelineno-28-99" href="#__codelineno-28-99"></a>
<a id="__codelineno-28-100" name="__codelineno-28-100" href="#__codelineno-28-100"></a>
<a id="__codelineno-28-101" name="__codelineno-28-101" href="#__codelineno-28-101"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-28-102" name="__codelineno-28-102" href="#__codelineno-28-102"></a>
<a id="__codelineno-28-103" name="__codelineno-28-103" href="#__codelineno-28-103"></a>
<a id="__codelineno-28-104" name="__codelineno-28-104" href="#__codelineno-28-104"></a>
<a id="__codelineno-28-105" name="__codelineno-28-105" href="#__codelineno-28-105"></a>headers:
<a id="__codelineno-28-106" name="__codelineno-28-106" href="#__codelineno-28-106"></a>
<a id="__codelineno-28-107" name="__codelineno-28-107" href="#__codelineno-28-107"></a>
<a id="__codelineno-28-108" name="__codelineno-28-108" href="#__codelineno-28-108"></a>
<a id="__codelineno-28-109" name="__codelineno-28-109" href="#__codelineno-28-109"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-28-110" name="__codelineno-28-110" href="#__codelineno-28-110"></a>
<a id="__codelineno-28-111" name="__codelineno-28-111" href="#__codelineno-28-111"></a>
<a id="__codelineno-28-112" name="__codelineno-28-112" href="#__codelineno-28-112"></a>
<a id="__codelineno-28-113" name="__codelineno-28-113" href="#__codelineno-28-113"></a>service:
<a id="__codelineno-28-114" name="__codelineno-28-114" href="#__codelineno-28-114"></a>
<a id="__codelineno-28-115" name="__codelineno-28-115" href="#__codelineno-28-115"></a>
<a id="__codelineno-28-116" name="__codelineno-28-116" href="#__codelineno-28-116"></a>
<a id="__codelineno-28-117" name="__codelineno-28-117" href="#__codelineno-28-117"></a>pipelines:
<a id="__codelineno-28-118" name="__codelineno-28-118" href="#__codelineno-28-118"></a>
<a id="__codelineno-28-119" name="__codelineno-28-119" href="#__codelineno-28-119"></a>
<a id="__codelineno-28-120" name="__codelineno-28-120" href="#__codelineno-28-120"></a>
<a id="__codelineno-28-121" name="__codelineno-28-121" href="#__codelineno-28-121"></a>metrics:
<a id="__codelineno-28-122" name="__codelineno-28-122" href="#__codelineno-28-122"></a>
<a id="__codelineno-28-123" name="__codelineno-28-123" href="#__codelineno-28-123"></a>
<a id="__codelineno-28-124" name="__codelineno-28-124" href="#__codelineno-28-124"></a>
<a id="__codelineno-28-125" name="__codelineno-28-125" href="#__codelineno-28-125"></a>receivers: [otlp]
<a id="__codelineno-28-126" name="__codelineno-28-126" href="#__codelineno-28-126"></a>
<a id="__codelineno-28-127" name="__codelineno-28-127" href="#__codelineno-28-127"></a>
<a id="__codelineno-28-128" name="__codelineno-28-128" href="#__codelineno-28-128"></a>
<a id="__codelineno-28-129" name="__codelineno-28-129" href="#__codelineno-28-129"></a>processors: [transform,filter]
<a id="__codelineno-28-130" name="__codelineno-28-130" href="#__codelineno-28-130"></a>
<a id="__codelineno-28-131" name="__codelineno-28-131" href="#__codelineno-28-131"></a>
<a id="__codelineno-28-132" name="__codelineno-28-132" href="#__codelineno-28-132"></a>
<a id="__codelineno-28-133" name="__codelineno-28-133" href="#__codelineno-28-133"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_4">Components<a class="headerlink" href="#components_4" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_4">Receivers<a class="headerlink" href="#receivers_4" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance and configure it to accept OTLP requests on gRPC and HTTP.</p>
<h3 id="processors_2">Processors<a class="headerlink" href="#processors_2" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we configure the following two processor instances:</p>
<ul>
<li>
<p><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor"><code>transform</code>√Ø¬ª¬ø</a>, to compute the desired sum and count values of the histograms:</p>
</li>
<li>
<p>We first use the function <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/transformprocessor/README.md#extract_count_metric"><code>extract_count_metric</code>√Ø¬ª¬ø</a> to compute the number of values in each histogram bucket.</p>
</li>
<li>Then, we use the function <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/transformprocessor/README.md#extract_sum_metric"><code>extract_sum_metric</code>√Ø¬ª¬ø</a> to compute the total sum of all of its values and convert it to a gauge using <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/transformprocessor/README.md#convert_sum_to_gauge"><code>convert_sum_to_gauge</code>√Ø¬ª¬ø</a>.</li>
<li><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/filterprocessor"><code>filter</code>√Ø¬ª¬ø</a>, to drop the existing histogram buckets (based on <code>type</code>) and avoid histogram-related error messages.</li>
</ul>
<p>With this configuration, the Collector drops histogram metrics and creates in their place two new metrics for the sum and item count of each respective histogram.</p>
<h3 id="exporters_4">Exporters<a class="headerlink" href="#exporters_4" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>:</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_3">Service pipelines<a class="headerlink" href="#service-pipelines_3" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver and exporter objects into a metric pipeline and enable the two processors by referencing them under <code>processors</code>.</p>
<h2 id="limits-and-limitations_2">Limits and limitations<a class="headerlink" href="#limits-and-limitations_2" title="Permanent link">&para;</a></h2>
<p>Metrics are ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API</a> and are subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
</ul>
<h2 id="related-topics_3">Related topics<a class="headerlink" href="#related-topics_3" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-jaegermd">Source: jaeger.md<a class="headerlink" href="#source-jaegermd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest data from Jaeger
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/jaeger
scraped: 2026-02-15T21:29:51.433854</p>
<hr />
<h1 id="ingest-data-from-jaeger">Ingest data from Jaeger<a class="headerlink" href="#ingest-data-from-jaeger" title="Permanent link">&para;</a></h1>
<h1 id="ingest-data-from-jaeger_1">Ingest data from Jaeger<a class="headerlink" href="#ingest-data-from-jaeger_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Oct 11, 2023</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance to accept Jaeger data, transform it to OTLP, and send it to the Dynatrace backend.</p>
<h2 id="prerequisites_5">Prerequisites<a class="headerlink" href="#prerequisites_5" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/jaegerreceiver">Jaeger receiver√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li><a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">OpenTelemetry Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_5">Demo configuration<a class="headerlink" href="#demo-configuration_5" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>receivers:
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>jaeger:
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>protocols:
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>grpc:
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>exporters:
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a>
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a>
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a>otlp_http:
<a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a>
<a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a>
<a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a>
<a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a>
<a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a>
<a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a>
<a id="__codelineno-29-29" name="__codelineno-29-29" href="#__codelineno-29-29"></a>headers:
<a id="__codelineno-29-30" name="__codelineno-29-30" href="#__codelineno-29-30"></a>
<a id="__codelineno-29-31" name="__codelineno-29-31" href="#__codelineno-29-31"></a>
<a id="__codelineno-29-32" name="__codelineno-29-32" href="#__codelineno-29-32"></a>
<a id="__codelineno-29-33" name="__codelineno-29-33" href="#__codelineno-29-33"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-29-34" name="__codelineno-29-34" href="#__codelineno-29-34"></a>
<a id="__codelineno-29-35" name="__codelineno-29-35" href="#__codelineno-29-35"></a>
<a id="__codelineno-29-36" name="__codelineno-29-36" href="#__codelineno-29-36"></a>
<a id="__codelineno-29-37" name="__codelineno-29-37" href="#__codelineno-29-37"></a>service:
<a id="__codelineno-29-38" name="__codelineno-29-38" href="#__codelineno-29-38"></a>
<a id="__codelineno-29-39" name="__codelineno-29-39" href="#__codelineno-29-39"></a>
<a id="__codelineno-29-40" name="__codelineno-29-40" href="#__codelineno-29-40"></a>
<a id="__codelineno-29-41" name="__codelineno-29-41" href="#__codelineno-29-41"></a>pipelines:
<a id="__codelineno-29-42" name="__codelineno-29-42" href="#__codelineno-29-42"></a>
<a id="__codelineno-29-43" name="__codelineno-29-43" href="#__codelineno-29-43"></a>
<a id="__codelineno-29-44" name="__codelineno-29-44" href="#__codelineno-29-44"></a>
<a id="__codelineno-29-45" name="__codelineno-29-45" href="#__codelineno-29-45"></a>traces:
<a id="__codelineno-29-46" name="__codelineno-29-46" href="#__codelineno-29-46"></a>
<a id="__codelineno-29-47" name="__codelineno-29-47" href="#__codelineno-29-47"></a>
<a id="__codelineno-29-48" name="__codelineno-29-48" href="#__codelineno-29-48"></a>
<a id="__codelineno-29-49" name="__codelineno-29-49" href="#__codelineno-29-49"></a>receivers: [jaeger]
<a id="__codelineno-29-50" name="__codelineno-29-50" href="#__codelineno-29-50"></a>
<a id="__codelineno-29-51" name="__codelineno-29-51" href="#__codelineno-29-51"></a>
<a id="__codelineno-29-52" name="__codelineno-29-52" href="#__codelineno-29-52"></a>
<a id="__codelineno-29-53" name="__codelineno-29-53" href="#__codelineno-29-53"></a>processors: []
<a id="__codelineno-29-54" name="__codelineno-29-54" href="#__codelineno-29-54"></a>
<a id="__codelineno-29-55" name="__codelineno-29-55" href="#__codelineno-29-55"></a>
<a id="__codelineno-29-56" name="__codelineno-29-56" href="#__codelineno-29-56"></a>
<a id="__codelineno-29-57" name="__codelineno-29-57" href="#__codelineno-29-57"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_5">Components<a class="headerlink" href="#components_5" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_5">Receivers<a class="headerlink" href="#receivers_5" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the <code>jaeger</code> receiver as active receiver component for our Collector instance.</p>
<p>The Jaeger receiver can be customized with <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/jaegerreceiver">a few more attributes√Ø¬ª¬ø</a>, which we leave with their default values in our example.</p>
<h3 id="exporters_5">Exporters<a class="headerlink" href="#exporters_5" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_4">Service pipelines<a class="headerlink" href="#service-pipelines_4" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we eventually assemble our receiver and exporter objects into a traces pipeline, which will handle our Jaeger transformation to OTLP.</p>
<h2 id="related-topics_4">Related topics<a class="headerlink" href="#related-topics_4" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich from Kubernetes</a></li>
</ul>
<hr />
<h2 id="source-memorymd">Source: memory.md<a class="headerlink" href="#source-memorymd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Apply memory limits to the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/memory
scraped: 2026-02-16T09:27:42.908318</p>
<hr />
<h1 id="apply-memory-limits-to-the-opentelemetry-collector">Apply memory limits to the OpenTelemetry Collector<a class="headerlink" href="#apply-memory-limits-to-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="apply-memory-limits-to-the-opentelemetry-collector_1">Apply memory limits to the OpenTelemetry Collector<a class="headerlink" href="#apply-memory-limits-to-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Jan 08, 2026</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance and its native memory limiter processor to guarantee memory allocation keeps within the specified parameters.</p>
<p>Recommended configuration</p>
<p>For optimal memory usage with your Collector instance, we recommend that you
apply this configuration with most containerized setups. See the section on
<a href="#deployment-considerations">deployment considerations</a> for more information.</p>
<h2 id="prerequisites_6">Prerequisites<a class="headerlink" href="#prerequisites_6" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/processor/memorylimiterprocessor">memory limiter processor√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace OTel Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-core" title="Learn about the Dynatrace OTel Collector.">Core</a> or <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace OTel Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace OTel Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_6">Demo configuration<a class="headerlink" href="#demo-configuration_6" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>receivers:
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>otlp:
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>protocols:
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>grpc:
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>
<a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a>http:
<a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a>
<a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a>
<a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a>
<a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a>
<a id="__codelineno-30-27" name="__codelineno-30-27" href="#__codelineno-30-27"></a>
<a id="__codelineno-30-28" name="__codelineno-30-28" href="#__codelineno-30-28"></a>
<a id="__codelineno-30-29" name="__codelineno-30-29" href="#__codelineno-30-29"></a>processors:
<a id="__codelineno-30-30" name="__codelineno-30-30" href="#__codelineno-30-30"></a>
<a id="__codelineno-30-31" name="__codelineno-30-31" href="#__codelineno-30-31"></a>
<a id="__codelineno-30-32" name="__codelineno-30-32" href="#__codelineno-30-32"></a>
<a id="__codelineno-30-33" name="__codelineno-30-33" href="#__codelineno-30-33"></a>memory_limiter:
<a id="__codelineno-30-34" name="__codelineno-30-34" href="#__codelineno-30-34"></a>
<a id="__codelineno-30-35" name="__codelineno-30-35" href="#__codelineno-30-35"></a>
<a id="__codelineno-30-36" name="__codelineno-30-36" href="#__codelineno-30-36"></a>
<a id="__codelineno-30-37" name="__codelineno-30-37" href="#__codelineno-30-37"></a>check_interval: 1s
<a id="__codelineno-30-38" name="__codelineno-30-38" href="#__codelineno-30-38"></a>
<a id="__codelineno-30-39" name="__codelineno-30-39" href="#__codelineno-30-39"></a>
<a id="__codelineno-30-40" name="__codelineno-30-40" href="#__codelineno-30-40"></a>
<a id="__codelineno-30-41" name="__codelineno-30-41" href="#__codelineno-30-41"></a>limit_percentage: 90
<a id="__codelineno-30-42" name="__codelineno-30-42" href="#__codelineno-30-42"></a>
<a id="__codelineno-30-43" name="__codelineno-30-43" href="#__codelineno-30-43"></a>
<a id="__codelineno-30-44" name="__codelineno-30-44" href="#__codelineno-30-44"></a>
<a id="__codelineno-30-45" name="__codelineno-30-45" href="#__codelineno-30-45"></a>spike_limit_percentage: 20
<a id="__codelineno-30-46" name="__codelineno-30-46" href="#__codelineno-30-46"></a>
<a id="__codelineno-30-47" name="__codelineno-30-47" href="#__codelineno-30-47"></a>
<a id="__codelineno-30-48" name="__codelineno-30-48" href="#__codelineno-30-48"></a>
<a id="__codelineno-30-49" name="__codelineno-30-49" href="#__codelineno-30-49"></a>exporters:
<a id="__codelineno-30-50" name="__codelineno-30-50" href="#__codelineno-30-50"></a>
<a id="__codelineno-30-51" name="__codelineno-30-51" href="#__codelineno-30-51"></a>
<a id="__codelineno-30-52" name="__codelineno-30-52" href="#__codelineno-30-52"></a>
<a id="__codelineno-30-53" name="__codelineno-30-53" href="#__codelineno-30-53"></a>otlp_http:
<a id="__codelineno-30-54" name="__codelineno-30-54" href="#__codelineno-30-54"></a>
<a id="__codelineno-30-55" name="__codelineno-30-55" href="#__codelineno-30-55"></a>
<a id="__codelineno-30-56" name="__codelineno-30-56" href="#__codelineno-30-56"></a>
<a id="__codelineno-30-57" name="__codelineno-30-57" href="#__codelineno-30-57"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-30-58" name="__codelineno-30-58" href="#__codelineno-30-58"></a>
<a id="__codelineno-30-59" name="__codelineno-30-59" href="#__codelineno-30-59"></a>
<a id="__codelineno-30-60" name="__codelineno-30-60" href="#__codelineno-30-60"></a>
<a id="__codelineno-30-61" name="__codelineno-30-61" href="#__codelineno-30-61"></a>headers:
<a id="__codelineno-30-62" name="__codelineno-30-62" href="#__codelineno-30-62"></a>
<a id="__codelineno-30-63" name="__codelineno-30-63" href="#__codelineno-30-63"></a>
<a id="__codelineno-30-64" name="__codelineno-30-64" href="#__codelineno-30-64"></a>
<a id="__codelineno-30-65" name="__codelineno-30-65" href="#__codelineno-30-65"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-30-66" name="__codelineno-30-66" href="#__codelineno-30-66"></a>
<a id="__codelineno-30-67" name="__codelineno-30-67" href="#__codelineno-30-67"></a>
<a id="__codelineno-30-68" name="__codelineno-30-68" href="#__codelineno-30-68"></a>
<a id="__codelineno-30-69" name="__codelineno-30-69" href="#__codelineno-30-69"></a>service:
<a id="__codelineno-30-70" name="__codelineno-30-70" href="#__codelineno-30-70"></a>
<a id="__codelineno-30-71" name="__codelineno-30-71" href="#__codelineno-30-71"></a>
<a id="__codelineno-30-72" name="__codelineno-30-72" href="#__codelineno-30-72"></a>
<a id="__codelineno-30-73" name="__codelineno-30-73" href="#__codelineno-30-73"></a>pipelines:
<a id="__codelineno-30-74" name="__codelineno-30-74" href="#__codelineno-30-74"></a>
<a id="__codelineno-30-75" name="__codelineno-30-75" href="#__codelineno-30-75"></a>
<a id="__codelineno-30-76" name="__codelineno-30-76" href="#__codelineno-30-76"></a>
<a id="__codelineno-30-77" name="__codelineno-30-77" href="#__codelineno-30-77"></a>traces:
<a id="__codelineno-30-78" name="__codelineno-30-78" href="#__codelineno-30-78"></a>
<a id="__codelineno-30-79" name="__codelineno-30-79" href="#__codelineno-30-79"></a>
<a id="__codelineno-30-80" name="__codelineno-30-80" href="#__codelineno-30-80"></a>
<a id="__codelineno-30-81" name="__codelineno-30-81" href="#__codelineno-30-81"></a>receivers: [otlp]
<a id="__codelineno-30-82" name="__codelineno-30-82" href="#__codelineno-30-82"></a>
<a id="__codelineno-30-83" name="__codelineno-30-83" href="#__codelineno-30-83"></a>
<a id="__codelineno-30-84" name="__codelineno-30-84" href="#__codelineno-30-84"></a>
<a id="__codelineno-30-85" name="__codelineno-30-85" href="#__codelineno-30-85"></a>processors: [memory_limiter]
<a id="__codelineno-30-86" name="__codelineno-30-86" href="#__codelineno-30-86"></a>
<a id="__codelineno-30-87" name="__codelineno-30-87" href="#__codelineno-30-87"></a>
<a id="__codelineno-30-88" name="__codelineno-30-88" href="#__codelineno-30-88"></a>
<a id="__codelineno-30-89" name="__codelineno-30-89" href="#__codelineno-30-89"></a>exporters: [otlp_http]
<a id="__codelineno-30-90" name="__codelineno-30-90" href="#__codelineno-30-90"></a>
<a id="__codelineno-30-91" name="__codelineno-30-91" href="#__codelineno-30-91"></a>
<a id="__codelineno-30-92" name="__codelineno-30-92" href="#__codelineno-30-92"></a>
<a id="__codelineno-30-93" name="__codelineno-30-93" href="#__codelineno-30-93"></a>metrics:
<a id="__codelineno-30-94" name="__codelineno-30-94" href="#__codelineno-30-94"></a>
<a id="__codelineno-30-95" name="__codelineno-30-95" href="#__codelineno-30-95"></a>
<a id="__codelineno-30-96" name="__codelineno-30-96" href="#__codelineno-30-96"></a>
<a id="__codelineno-30-97" name="__codelineno-30-97" href="#__codelineno-30-97"></a>receivers: [otlp]
<a id="__codelineno-30-98" name="__codelineno-30-98" href="#__codelineno-30-98"></a>
<a id="__codelineno-30-99" name="__codelineno-30-99" href="#__codelineno-30-99"></a>
<a id="__codelineno-30-100" name="__codelineno-30-100" href="#__codelineno-30-100"></a>
<a id="__codelineno-30-101" name="__codelineno-30-101" href="#__codelineno-30-101"></a>processors: [memory_limiter]
<a id="__codelineno-30-102" name="__codelineno-30-102" href="#__codelineno-30-102"></a>
<a id="__codelineno-30-103" name="__codelineno-30-103" href="#__codelineno-30-103"></a>
<a id="__codelineno-30-104" name="__codelineno-30-104" href="#__codelineno-30-104"></a>
<a id="__codelineno-30-105" name="__codelineno-30-105" href="#__codelineno-30-105"></a>exporters: [otlp_http]
<a id="__codelineno-30-106" name="__codelineno-30-106" href="#__codelineno-30-106"></a>
<a id="__codelineno-30-107" name="__codelineno-30-107" href="#__codelineno-30-107"></a>
<a id="__codelineno-30-108" name="__codelineno-30-108" href="#__codelineno-30-108"></a>
<a id="__codelineno-30-109" name="__codelineno-30-109" href="#__codelineno-30-109"></a>logs:
<a id="__codelineno-30-110" name="__codelineno-30-110" href="#__codelineno-30-110"></a>
<a id="__codelineno-30-111" name="__codelineno-30-111" href="#__codelineno-30-111"></a>
<a id="__codelineno-30-112" name="__codelineno-30-112" href="#__codelineno-30-112"></a>
<a id="__codelineno-30-113" name="__codelineno-30-113" href="#__codelineno-30-113"></a>receivers: [otlp]
<a id="__codelineno-30-114" name="__codelineno-30-114" href="#__codelineno-30-114"></a>
<a id="__codelineno-30-115" name="__codelineno-30-115" href="#__codelineno-30-115"></a>
<a id="__codelineno-30-116" name="__codelineno-30-116" href="#__codelineno-30-116"></a>
<a id="__codelineno-30-117" name="__codelineno-30-117" href="#__codelineno-30-117"></a>processors: [memory_limiter]
<a id="__codelineno-30-118" name="__codelineno-30-118" href="#__codelineno-30-118"></a>
<a id="__codelineno-30-119" name="__codelineno-30-119" href="#__codelineno-30-119"></a>
<a id="__codelineno-30-120" name="__codelineno-30-120" href="#__codelineno-30-120"></a>
<a id="__codelineno-30-121" name="__codelineno-30-121" href="#__codelineno-30-121"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_6">Components<a class="headerlink" href="#components_6" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_6">Receivers<a class="headerlink" href="#receivers_6" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance.</p>
<p>This is mainly for demonstration purposes. You can specify any other valid receiver here (for example, <code>zipkin</code>).</p>
<h3 id="processors_3">Processors<a class="headerlink" href="#processors_3" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we specify the <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/processor/memorylimiterprocessor"><code>memory_limiter</code> processor√Ø¬ª¬ø</a> with the following parameters:</p>
<ul>
<li><code>check_interval</code> configured to check the memory status every second</li>
<li><code>limit_percentage</code> configured to allow a maximum memory allocation of 90 percent</li>
<li><code>spike_limit_percentage</code> configured to allow a maximum spike memory usage of 20 percent</li>
</ul>
<p>With this configuration, the Collector checks the memory allocation every second
and starts to apply pressure using separate mechanisms after the following
limits are reached:</p>
<ul>
<li>Soft limit (<code>limit_percentage - spike_limit_percentage</code>): After this limit is
  reached, the processor rejects payloads until memory usage is under the limit.
  It is up to the receiver upstream of the processor to send the proper
  rejection messages.</li>
<li>Hard limit: (<code>limit_percentage</code>): After this limit is reached, the processor
  will force garbage Collection until memory usage is under the limit. Data will
  continue to be rejected until usage is under the soft limit.</li>
</ul>
<p>In addition to the memory limiter processor, we highly recommend you set the
<code>GOMEMLIMIT</code> environment variable to a value 80% of the hard limit. Note that
<code>GOMEMLIMIT</code> requires an absolute value in bytes to be set. For example, you
could set <code>GOMEMLIMIT=1024MiB</code> to start increasing the frequency of garbage
collection cycles once the Collector reaches 1024 MiB of memory used on the Go
VM heap. For more information, see the <a href="https://pkg.go.dev/runtime#hdr-Environment_Variables">Go package
documentation√Ø¬ª¬ø</a> describing
how the environment variable works.</p>
<h4 id="deployment-considerations">Deployment considerations<a class="headerlink" href="#deployment-considerations" title="Permanent link">&para;</a></h4>
<p>In containerized environments, or other places where the host environment sets
the Collector's maximum allowed memory, we recommend you use the
<code>limit_percentage</code> and <code>spike_limit_percentage</code> options.</p>
<p>For deployments on virtual machines or bare metal where the Collector is not
given an explicit memory quota, we instead recommend you use the <code>limit_mib</code> and
<code>spike_limit_mib</code> options.</p>
<h3 id="exporters_6">Exporters<a class="headerlink" href="#exporters_6" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_5">Service pipelines<a class="headerlink" href="#service-pipelines_5" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver and exporter objects into pipelines for traces, metrics, and logs and enable our memory limiter processor by referencing it under <code>processors</code> for each respective pipeline.</p>
<h2 id="limits-and-limitations_3">Limits and limitations<a class="headerlink" href="#limits-and-limitations_3" title="Permanent link">&para;</a></h2>
<p>Data is ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP APIs</a> and is subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OpenTelemetry logs</a></li>
</ul>
<h2 id="related-topics_5">Related topics<a class="headerlink" href="#related-topics_5" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich OTLP requests with Kubernetes data</a></li>
</ul>
<hr />
<h2 id="source-netflowmd">Source: netflow.md<a class="headerlink" href="#source-netflowmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest NetFlow with the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/netflow
scraped: 2026-02-16T09:36:41.035749</p>
<hr />
<h1 id="ingest-netflow-with-the-opentelemetry-collector">Ingest NetFlow with the OpenTelemetry Collector<a class="headerlink" href="#ingest-netflow-with-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="ingest-netflow-with-the-opentelemetry-collector_1">Ingest NetFlow with the OpenTelemetry Collector<a class="headerlink" href="#ingest-netflow-with-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Updated on Jan 27, 2026</li>
</ul>
<p>The following configuration example shows how to configure a Collector instance to accept NetFlow packets and ingest them as OTLP requests into Dynatrace.</p>
<h2 id="prerequisites_7">Prerequisites<a class="headerlink" href="#prerequisites_7" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/netflowreceiver">NetFlow receiver√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p><a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace OTel Collector.">The Dynatrace Collector</a></p>
</li>
<li><a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace OTel Collector.">OpenTelemetry Contrib</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace OTel Collector.">A custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported.</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the Ingest logs (<code>logs.ingest</code>) scope.</li>
<li>A NetFlow- or sFlow-capable device that can send NetFlow packets to the Collector instance.</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="collector-configuration_2">Collector configuration<a class="headerlink" href="#collector-configuration_2" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>receivers:
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>netflow:
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>hostname: &quot;0.0.0.0&quot;
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a>scheme: netflow
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a>port: 2055
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a>
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a>
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a>
<a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a>sockets: 2
<a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a>
<a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a>
<a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a>
<a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a>workers: 4
<a id="__codelineno-31-26" name="__codelineno-31-26" href="#__codelineno-31-26"></a>
<a id="__codelineno-31-27" name="__codelineno-31-27" href="#__codelineno-31-27"></a>
<a id="__codelineno-31-28" name="__codelineno-31-28" href="#__codelineno-31-28"></a>
<a id="__codelineno-31-29" name="__codelineno-31-29" href="#__codelineno-31-29"></a>processors:
<a id="__codelineno-31-30" name="__codelineno-31-30" href="#__codelineno-31-30"></a>
<a id="__codelineno-31-31" name="__codelineno-31-31" href="#__codelineno-31-31"></a>
<a id="__codelineno-31-32" name="__codelineno-31-32" href="#__codelineno-31-32"></a>
<a id="__codelineno-31-33" name="__codelineno-31-33" href="#__codelineno-31-33"></a>batch:
<a id="__codelineno-31-34" name="__codelineno-31-34" href="#__codelineno-31-34"></a>
<a id="__codelineno-31-35" name="__codelineno-31-35" href="#__codelineno-31-35"></a>
<a id="__codelineno-31-36" name="__codelineno-31-36" href="#__codelineno-31-36"></a>
<a id="__codelineno-31-37" name="__codelineno-31-37" href="#__codelineno-31-37"></a>send_batch_size: 30
<a id="__codelineno-31-38" name="__codelineno-31-38" href="#__codelineno-31-38"></a>
<a id="__codelineno-31-39" name="__codelineno-31-39" href="#__codelineno-31-39"></a>
<a id="__codelineno-31-40" name="__codelineno-31-40" href="#__codelineno-31-40"></a>
<a id="__codelineno-31-41" name="__codelineno-31-41" href="#__codelineno-31-41"></a>timeout: 30s
<a id="__codelineno-31-42" name="__codelineno-31-42" href="#__codelineno-31-42"></a>
<a id="__codelineno-31-43" name="__codelineno-31-43" href="#__codelineno-31-43"></a>
<a id="__codelineno-31-44" name="__codelineno-31-44" href="#__codelineno-31-44"></a>
<a id="__codelineno-31-45" name="__codelineno-31-45" href="#__codelineno-31-45"></a>exporters:
<a id="__codelineno-31-46" name="__codelineno-31-46" href="#__codelineno-31-46"></a>
<a id="__codelineno-31-47" name="__codelineno-31-47" href="#__codelineno-31-47"></a>
<a id="__codelineno-31-48" name="__codelineno-31-48" href="#__codelineno-31-48"></a>
<a id="__codelineno-31-49" name="__codelineno-31-49" href="#__codelineno-31-49"></a>otlp_http:
<a id="__codelineno-31-50" name="__codelineno-31-50" href="#__codelineno-31-50"></a>
<a id="__codelineno-31-51" name="__codelineno-31-51" href="#__codelineno-31-51"></a>
<a id="__codelineno-31-52" name="__codelineno-31-52" href="#__codelineno-31-52"></a>
<a id="__codelineno-31-53" name="__codelineno-31-53" href="#__codelineno-31-53"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-31-54" name="__codelineno-31-54" href="#__codelineno-31-54"></a>
<a id="__codelineno-31-55" name="__codelineno-31-55" href="#__codelineno-31-55"></a>
<a id="__codelineno-31-56" name="__codelineno-31-56" href="#__codelineno-31-56"></a>
<a id="__codelineno-31-57" name="__codelineno-31-57" href="#__codelineno-31-57"></a>headers:
<a id="__codelineno-31-58" name="__codelineno-31-58" href="#__codelineno-31-58"></a>
<a id="__codelineno-31-59" name="__codelineno-31-59" href="#__codelineno-31-59"></a>
<a id="__codelineno-31-60" name="__codelineno-31-60" href="#__codelineno-31-60"></a>
<a id="__codelineno-31-61" name="__codelineno-31-61" href="#__codelineno-31-61"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-31-62" name="__codelineno-31-62" href="#__codelineno-31-62"></a>
<a id="__codelineno-31-63" name="__codelineno-31-63" href="#__codelineno-31-63"></a>
<a id="__codelineno-31-64" name="__codelineno-31-64" href="#__codelineno-31-64"></a>
<a id="__codelineno-31-65" name="__codelineno-31-65" href="#__codelineno-31-65"></a>service:
<a id="__codelineno-31-66" name="__codelineno-31-66" href="#__codelineno-31-66"></a>
<a id="__codelineno-31-67" name="__codelineno-31-67" href="#__codelineno-31-67"></a>
<a id="__codelineno-31-68" name="__codelineno-31-68" href="#__codelineno-31-68"></a>
<a id="__codelineno-31-69" name="__codelineno-31-69" href="#__codelineno-31-69"></a>pipelines:
<a id="__codelineno-31-70" name="__codelineno-31-70" href="#__codelineno-31-70"></a>
<a id="__codelineno-31-71" name="__codelineno-31-71" href="#__codelineno-31-71"></a>
<a id="__codelineno-31-72" name="__codelineno-31-72" href="#__codelineno-31-72"></a>
<a id="__codelineno-31-73" name="__codelineno-31-73" href="#__codelineno-31-73"></a>logs:
<a id="__codelineno-31-74" name="__codelineno-31-74" href="#__codelineno-31-74"></a>
<a id="__codelineno-31-75" name="__codelineno-31-75" href="#__codelineno-31-75"></a>
<a id="__codelineno-31-76" name="__codelineno-31-76" href="#__codelineno-31-76"></a>
<a id="__codelineno-31-77" name="__codelineno-31-77" href="#__codelineno-31-77"></a>receivers: [netflow]
<a id="__codelineno-31-78" name="__codelineno-31-78" href="#__codelineno-31-78"></a>
<a id="__codelineno-31-79" name="__codelineno-31-79" href="#__codelineno-31-79"></a>
<a id="__codelineno-31-80" name="__codelineno-31-80" href="#__codelineno-31-80"></a>
<a id="__codelineno-31-81" name="__codelineno-31-81" href="#__codelineno-31-81"></a>processors: [batch]
<a id="__codelineno-31-82" name="__codelineno-31-82" href="#__codelineno-31-82"></a>
<a id="__codelineno-31-83" name="__codelineno-31-83" href="#__codelineno-31-83"></a>
<a id="__codelineno-31-84" name="__codelineno-31-84" href="#__codelineno-31-84"></a>
<a id="__codelineno-31-85" name="__codelineno-31-85" href="#__codelineno-31-85"></a>exporters: [otlp_http]
</code></pre></div>
<p>Check the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/netflowreceiver#netflow-receiver">NetFlow receiver√Ø¬ª¬ø</a> documentation for the available configuration options.</p>
<p>We recommend setting the <code>sockets</code> parameter to match the number of CPU cores available on the Collector instance, and the <code>workers</code> parameter to twice the number of sockets. This configuration allows the Collector to process multiple incoming NetFlow packets concurrently, which improves performance.</p>
<p>For extremely large volumes of data, you should parallelize the configuration among multiple Collector instances.</p>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_7">Components<a class="headerlink" href="#components_7" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_7">Receivers<a class="headerlink" href="#receivers_7" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the <code>netflow</code> receiver as the active receiver component for our Collector instance and configure it to listen on specified ports.</p>
<h3 id="processors_4">Processors<a class="headerlink" href="#processors_4" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we specify the <code>batch</code> processor, which batches the incoming NetFlow packets before sending them to Dynatrace. This is useful for optimizing performance and reducing the number of requests sent.</p>
<h3 id="exporters_7">Exporters<a class="headerlink" href="#exporters_7" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_6">Service pipelines<a class="headerlink" href="#service-pipelines_6" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver and exporter objects into a logs pipeline, which will listen on the configured address for incoming NetFlow packets and forward them to Dynatrace using the exporter.</p>
<h2 id="data-visualization">Data visualization<a class="headerlink" href="#data-visualization" title="Permanent link">&para;</a></h2>
<p>The logs records will be available in Dynatrace with fields documented in the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/netflowreceiver#data-format">receiver documentation√Ø¬ª¬ø</a>.</p>
<h3 id="example-dql-queries">Example DQL queries<a class="headerlink" href="#example-dql-queries" title="Permanent link">&para;</a></h3>
<ul>
<li>Fetch all NetFlow logs and summarize the bytes and packets by source and destination addresses:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>fetch logs
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>| filter otel.scope.name == &quot;otelcol/netflowreceiver&quot;
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>| summarize {bytes=sum(toDouble(flow.io.bytes)), packets=sum(toDouble(flow.io.packets))}, by: {source = source.address, destination = destination.address}
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>| fieldsAdd bytes_relative=bytes
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>| fieldsAdd packets_relative=packets
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>| sort bytes desc
</code></pre></div>
<p><img alt="Sample NetFlow charts showing top sources, destination and conversations" src="https://dt-cdn.net/images/screenshot-2025-06-16-at-12-55-07-pm-1956-d01b596006.png" />
* Fetch the most used ports:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>fetch logs
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>| filter otel.scope.name == &quot;otelcol/netflowreceiver&quot;
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>| summarize {bytes=sum(toDouble(flow.io.bytes))}, by: {port = destination.port}
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>| sort bytes desc
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a>| limit 10
</code></pre></div>
<p><img alt="A NetFlow chart showing the top used ports by bytes" src="https://dt-cdn.net/images/screenshot-2025-06-16-at-1-04-11-pm-734-9a3a884a16.png" /></p>
<h2 id="limits-and-limitations_4">Limits and limitations<a class="headerlink" href="#limits-and-limitations_4" title="Permanent link">&para;</a></h2>
<p>Logs are ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API</a> and are subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OpenTelemetry logs</a></li>
</ul>
<h2 id="related-topics_6">Related topics<a class="headerlink" href="#related-topics_6" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/filelog" title="Configure the OpenTelemetry Collector to ingest log data into Dynatrace.">Ingest logs from files with the OpenTelemetry Collector</a></li>
</ul>
<hr />
<h2 id="source-prometheusmd">Source: prometheus.md<a class="headerlink" href="#source-prometheusmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Scrape Promethus metrics with the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/prometheus
scraped: 2026-02-16T21:28:10.118170</p>
<hr />
<h1 id="scrape-promethus-metrics-with-the-opentelemetry-collector">Scrape Promethus metrics with the OpenTelemetry Collector<a class="headerlink" href="#scrape-promethus-metrics-with-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="scrape-promethus-metrics-with-the-opentelemetry-collector_1">Scrape Promethus metrics with the OpenTelemetry Collector<a class="headerlink" href="#scrape-promethus-metrics-with-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Dec 09, 2025</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance to scrape data from an existing Prometheus setup and import it as OTLP request into Dynatrace.</p>
<h2 id="prerequisites_8">Prerequisites<a class="headerlink" href="#prerequisites_8" title="Permanent link">&para;</a></h2>
<ul>
<li>A Prometheus instance running on port 8888</li>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/prometheusreceiver">Prometheus receiver√Ø¬ª¬ø</a>, the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/metricstarttimeprocessor">metric start time processor√Ø¬ª¬ø</a>, and the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor">cumulative-to-delta processor√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace OTel Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace OTel Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace OTel Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_7">Demo configuration<a class="headerlink" href="#demo-configuration_7" title="Permanent link">&para;</a></h2>
<p>Dynatrace Collector v0.41.0+</p>
<p>The example pipeline below uses the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/metricstarttimeprocessor"><code>metricstarttime</code> processor√Ø¬ª¬ø</a>, which is required to convert the metrics to delta temporality.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>receivers:
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>prometheus:
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>config:
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>scrape_configs:
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>- job_name: &#39;node-exporter&#39;
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a>
<a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>
<a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a>
<a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a>scrape_interval: 60s
<a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a>
<a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a>
<a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a>
<a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a>static_configs:
<a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a>
<a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a>
<a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a>
<a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a>- targets: [&#39;prometheus-prometheus-node-exporter:9100&#39;]
<a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a>
<a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a>
<a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a>
<a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a>- job_name: opentelemetry-collector
<a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a>
<a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a>
<a id="__codelineno-34-36" name="__codelineno-34-36" href="#__codelineno-34-36"></a>
<a id="__codelineno-34-37" name="__codelineno-34-37" href="#__codelineno-34-37"></a>scrape_interval: 60s
<a id="__codelineno-34-38" name="__codelineno-34-38" href="#__codelineno-34-38"></a>
<a id="__codelineno-34-39" name="__codelineno-34-39" href="#__codelineno-34-39"></a>
<a id="__codelineno-34-40" name="__codelineno-34-40" href="#__codelineno-34-40"></a>
<a id="__codelineno-34-41" name="__codelineno-34-41" href="#__codelineno-34-41"></a>static_configs:
<a id="__codelineno-34-42" name="__codelineno-34-42" href="#__codelineno-34-42"></a>
<a id="__codelineno-34-43" name="__codelineno-34-43" href="#__codelineno-34-43"></a>
<a id="__codelineno-34-44" name="__codelineno-34-44" href="#__codelineno-34-44"></a>
<a id="__codelineno-34-45" name="__codelineno-34-45" href="#__codelineno-34-45"></a>- targets:
<a id="__codelineno-34-46" name="__codelineno-34-46" href="#__codelineno-34-46"></a>
<a id="__codelineno-34-47" name="__codelineno-34-47" href="#__codelineno-34-47"></a>
<a id="__codelineno-34-48" name="__codelineno-34-48" href="#__codelineno-34-48"></a>
<a id="__codelineno-34-49" name="__codelineno-34-49" href="#__codelineno-34-49"></a>- 127.0.0.1:8888
<a id="__codelineno-34-50" name="__codelineno-34-50" href="#__codelineno-34-50"></a>
<a id="__codelineno-34-51" name="__codelineno-34-51" href="#__codelineno-34-51"></a>
<a id="__codelineno-34-52" name="__codelineno-34-52" href="#__codelineno-34-52"></a>
<a id="__codelineno-34-53" name="__codelineno-34-53" href="#__codelineno-34-53"></a>processors:
<a id="__codelineno-34-54" name="__codelineno-34-54" href="#__codelineno-34-54"></a>
<a id="__codelineno-34-55" name="__codelineno-34-55" href="#__codelineno-34-55"></a>
<a id="__codelineno-34-56" name="__codelineno-34-56" href="#__codelineno-34-56"></a>
<a id="__codelineno-34-57" name="__codelineno-34-57" href="#__codelineno-34-57"></a>metricstarttime:
<a id="__codelineno-34-58" name="__codelineno-34-58" href="#__codelineno-34-58"></a>
<a id="__codelineno-34-59" name="__codelineno-34-59" href="#__codelineno-34-59"></a>
<a id="__codelineno-34-60" name="__codelineno-34-60" href="#__codelineno-34-60"></a>
<a id="__codelineno-34-61" name="__codelineno-34-61" href="#__codelineno-34-61"></a>cumulativetodelta:
<a id="__codelineno-34-62" name="__codelineno-34-62" href="#__codelineno-34-62"></a>
<a id="__codelineno-34-63" name="__codelineno-34-63" href="#__codelineno-34-63"></a>
<a id="__codelineno-34-64" name="__codelineno-34-64" href="#__codelineno-34-64"></a>
<a id="__codelineno-34-65" name="__codelineno-34-65" href="#__codelineno-34-65"></a>max_staleness: 25h
<a id="__codelineno-34-66" name="__codelineno-34-66" href="#__codelineno-34-66"></a>
<a id="__codelineno-34-67" name="__codelineno-34-67" href="#__codelineno-34-67"></a>
<a id="__codelineno-34-68" name="__codelineno-34-68" href="#__codelineno-34-68"></a>
<a id="__codelineno-34-69" name="__codelineno-34-69" href="#__codelineno-34-69"></a>exporters:
<a id="__codelineno-34-70" name="__codelineno-34-70" href="#__codelineno-34-70"></a>
<a id="__codelineno-34-71" name="__codelineno-34-71" href="#__codelineno-34-71"></a>
<a id="__codelineno-34-72" name="__codelineno-34-72" href="#__codelineno-34-72"></a>
<a id="__codelineno-34-73" name="__codelineno-34-73" href="#__codelineno-34-73"></a>otlp_http:
<a id="__codelineno-34-74" name="__codelineno-34-74" href="#__codelineno-34-74"></a>
<a id="__codelineno-34-75" name="__codelineno-34-75" href="#__codelineno-34-75"></a>
<a id="__codelineno-34-76" name="__codelineno-34-76" href="#__codelineno-34-76"></a>
<a id="__codelineno-34-77" name="__codelineno-34-77" href="#__codelineno-34-77"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-34-78" name="__codelineno-34-78" href="#__codelineno-34-78"></a>
<a id="__codelineno-34-79" name="__codelineno-34-79" href="#__codelineno-34-79"></a>
<a id="__codelineno-34-80" name="__codelineno-34-80" href="#__codelineno-34-80"></a>
<a id="__codelineno-34-81" name="__codelineno-34-81" href="#__codelineno-34-81"></a>headers:
<a id="__codelineno-34-82" name="__codelineno-34-82" href="#__codelineno-34-82"></a>
<a id="__codelineno-34-83" name="__codelineno-34-83" href="#__codelineno-34-83"></a>
<a id="__codelineno-34-84" name="__codelineno-34-84" href="#__codelineno-34-84"></a>
<a id="__codelineno-34-85" name="__codelineno-34-85" href="#__codelineno-34-85"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-34-86" name="__codelineno-34-86" href="#__codelineno-34-86"></a>
<a id="__codelineno-34-87" name="__codelineno-34-87" href="#__codelineno-34-87"></a>
<a id="__codelineno-34-88" name="__codelineno-34-88" href="#__codelineno-34-88"></a>
<a id="__codelineno-34-89" name="__codelineno-34-89" href="#__codelineno-34-89"></a>service:
<a id="__codelineno-34-90" name="__codelineno-34-90" href="#__codelineno-34-90"></a>
<a id="__codelineno-34-91" name="__codelineno-34-91" href="#__codelineno-34-91"></a>
<a id="__codelineno-34-92" name="__codelineno-34-92" href="#__codelineno-34-92"></a>
<a id="__codelineno-34-93" name="__codelineno-34-93" href="#__codelineno-34-93"></a>pipelines:
<a id="__codelineno-34-94" name="__codelineno-34-94" href="#__codelineno-34-94"></a>
<a id="__codelineno-34-95" name="__codelineno-34-95" href="#__codelineno-34-95"></a>
<a id="__codelineno-34-96" name="__codelineno-34-96" href="#__codelineno-34-96"></a>
<a id="__codelineno-34-97" name="__codelineno-34-97" href="#__codelineno-34-97"></a>metrics:
<a id="__codelineno-34-98" name="__codelineno-34-98" href="#__codelineno-34-98"></a>
<a id="__codelineno-34-99" name="__codelineno-34-99" href="#__codelineno-34-99"></a>
<a id="__codelineno-34-100" name="__codelineno-34-100" href="#__codelineno-34-100"></a>
<a id="__codelineno-34-101" name="__codelineno-34-101" href="#__codelineno-34-101"></a>receivers: [prometheus]
<a id="__codelineno-34-102" name="__codelineno-34-102" href="#__codelineno-34-102"></a>
<a id="__codelineno-34-103" name="__codelineno-34-103" href="#__codelineno-34-103"></a>
<a id="__codelineno-34-104" name="__codelineno-34-104" href="#__codelineno-34-104"></a>
<a id="__codelineno-34-105" name="__codelineno-34-105" href="#__codelineno-34-105"></a>processors: [metricstarttime, cumulativetodelta]
<a id="__codelineno-34-106" name="__codelineno-34-106" href="#__codelineno-34-106"></a>
<a id="__codelineno-34-107" name="__codelineno-34-107" href="#__codelineno-34-107"></a>
<a id="__codelineno-34-108" name="__codelineno-34-108" href="#__codelineno-34-108"></a>
<a id="__codelineno-34-109" name="__codelineno-34-109" href="#__codelineno-34-109"></a>exporters: [otlp_http]
</code></pre></div>
<p>Dynatrace Collector v0.40.0 or earlier</p>
<p>In <strong>v0.40.0</strong> of the Dynatrace Collector, you must run the Collector
with the following flag in order to keep adjusting start times in the
Prometheus receiver:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>--feature-gates=-receiver.prometheusreceiver.RemoveStartTimeAdjustment
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>receivers:
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>prometheus:
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>config:
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>scrape_configs:
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a>
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a>- job_name: &#39;node-exporter&#39;
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a>
<a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a>
<a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a>scrape_interval: 60s
<a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a>
<a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a>
<a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a>
<a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a>static_configs:
<a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a>
<a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a>
<a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a>
<a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a>- targets: [&#39;prometheus-prometheus-node-exporter:9100&#39;]
<a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a>
<a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a>
<a id="__codelineno-36-32" name="__codelineno-36-32" href="#__codelineno-36-32"></a>
<a id="__codelineno-36-33" name="__codelineno-36-33" href="#__codelineno-36-33"></a>- job_name: opentelemetry-collector
<a id="__codelineno-36-34" name="__codelineno-36-34" href="#__codelineno-36-34"></a>
<a id="__codelineno-36-35" name="__codelineno-36-35" href="#__codelineno-36-35"></a>
<a id="__codelineno-36-36" name="__codelineno-36-36" href="#__codelineno-36-36"></a>
<a id="__codelineno-36-37" name="__codelineno-36-37" href="#__codelineno-36-37"></a>scrape_interval: 60s
<a id="__codelineno-36-38" name="__codelineno-36-38" href="#__codelineno-36-38"></a>
<a id="__codelineno-36-39" name="__codelineno-36-39" href="#__codelineno-36-39"></a>
<a id="__codelineno-36-40" name="__codelineno-36-40" href="#__codelineno-36-40"></a>
<a id="__codelineno-36-41" name="__codelineno-36-41" href="#__codelineno-36-41"></a>static_configs:
<a id="__codelineno-36-42" name="__codelineno-36-42" href="#__codelineno-36-42"></a>
<a id="__codelineno-36-43" name="__codelineno-36-43" href="#__codelineno-36-43"></a>
<a id="__codelineno-36-44" name="__codelineno-36-44" href="#__codelineno-36-44"></a>
<a id="__codelineno-36-45" name="__codelineno-36-45" href="#__codelineno-36-45"></a>- targets:
<a id="__codelineno-36-46" name="__codelineno-36-46" href="#__codelineno-36-46"></a>
<a id="__codelineno-36-47" name="__codelineno-36-47" href="#__codelineno-36-47"></a>
<a id="__codelineno-36-48" name="__codelineno-36-48" href="#__codelineno-36-48"></a>
<a id="__codelineno-36-49" name="__codelineno-36-49" href="#__codelineno-36-49"></a>- 127.0.0.1:8888
<a id="__codelineno-36-50" name="__codelineno-36-50" href="#__codelineno-36-50"></a>
<a id="__codelineno-36-51" name="__codelineno-36-51" href="#__codelineno-36-51"></a>
<a id="__codelineno-36-52" name="__codelineno-36-52" href="#__codelineno-36-52"></a>
<a id="__codelineno-36-53" name="__codelineno-36-53" href="#__codelineno-36-53"></a>processors:
<a id="__codelineno-36-54" name="__codelineno-36-54" href="#__codelineno-36-54"></a>
<a id="__codelineno-36-55" name="__codelineno-36-55" href="#__codelineno-36-55"></a>
<a id="__codelineno-36-56" name="__codelineno-36-56" href="#__codelineno-36-56"></a>
<a id="__codelineno-36-57" name="__codelineno-36-57" href="#__codelineno-36-57"></a>cumulativetodelta:
<a id="__codelineno-36-58" name="__codelineno-36-58" href="#__codelineno-36-58"></a>
<a id="__codelineno-36-59" name="__codelineno-36-59" href="#__codelineno-36-59"></a>
<a id="__codelineno-36-60" name="__codelineno-36-60" href="#__codelineno-36-60"></a>
<a id="__codelineno-36-61" name="__codelineno-36-61" href="#__codelineno-36-61"></a>max_staleness: 25h
<a id="__codelineno-36-62" name="__codelineno-36-62" href="#__codelineno-36-62"></a>
<a id="__codelineno-36-63" name="__codelineno-36-63" href="#__codelineno-36-63"></a>
<a id="__codelineno-36-64" name="__codelineno-36-64" href="#__codelineno-36-64"></a>
<a id="__codelineno-36-65" name="__codelineno-36-65" href="#__codelineno-36-65"></a>exporters:
<a id="__codelineno-36-66" name="__codelineno-36-66" href="#__codelineno-36-66"></a>
<a id="__codelineno-36-67" name="__codelineno-36-67" href="#__codelineno-36-67"></a>
<a id="__codelineno-36-68" name="__codelineno-36-68" href="#__codelineno-36-68"></a>
<a id="__codelineno-36-69" name="__codelineno-36-69" href="#__codelineno-36-69"></a>otlp_http:
<a id="__codelineno-36-70" name="__codelineno-36-70" href="#__codelineno-36-70"></a>
<a id="__codelineno-36-71" name="__codelineno-36-71" href="#__codelineno-36-71"></a>
<a id="__codelineno-36-72" name="__codelineno-36-72" href="#__codelineno-36-72"></a>
<a id="__codelineno-36-73" name="__codelineno-36-73" href="#__codelineno-36-73"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-36-74" name="__codelineno-36-74" href="#__codelineno-36-74"></a>
<a id="__codelineno-36-75" name="__codelineno-36-75" href="#__codelineno-36-75"></a>
<a id="__codelineno-36-76" name="__codelineno-36-76" href="#__codelineno-36-76"></a>
<a id="__codelineno-36-77" name="__codelineno-36-77" href="#__codelineno-36-77"></a>headers:
<a id="__codelineno-36-78" name="__codelineno-36-78" href="#__codelineno-36-78"></a>
<a id="__codelineno-36-79" name="__codelineno-36-79" href="#__codelineno-36-79"></a>
<a id="__codelineno-36-80" name="__codelineno-36-80" href="#__codelineno-36-80"></a>
<a id="__codelineno-36-81" name="__codelineno-36-81" href="#__codelineno-36-81"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-36-82" name="__codelineno-36-82" href="#__codelineno-36-82"></a>
<a id="__codelineno-36-83" name="__codelineno-36-83" href="#__codelineno-36-83"></a>
<a id="__codelineno-36-84" name="__codelineno-36-84" href="#__codelineno-36-84"></a>
<a id="__codelineno-36-85" name="__codelineno-36-85" href="#__codelineno-36-85"></a>service:
<a id="__codelineno-36-86" name="__codelineno-36-86" href="#__codelineno-36-86"></a>
<a id="__codelineno-36-87" name="__codelineno-36-87" href="#__codelineno-36-87"></a>
<a id="__codelineno-36-88" name="__codelineno-36-88" href="#__codelineno-36-88"></a>
<a id="__codelineno-36-89" name="__codelineno-36-89" href="#__codelineno-36-89"></a>pipelines:
<a id="__codelineno-36-90" name="__codelineno-36-90" href="#__codelineno-36-90"></a>
<a id="__codelineno-36-91" name="__codelineno-36-91" href="#__codelineno-36-91"></a>
<a id="__codelineno-36-92" name="__codelineno-36-92" href="#__codelineno-36-92"></a>
<a id="__codelineno-36-93" name="__codelineno-36-93" href="#__codelineno-36-93"></a>metrics:
<a id="__codelineno-36-94" name="__codelineno-36-94" href="#__codelineno-36-94"></a>
<a id="__codelineno-36-95" name="__codelineno-36-95" href="#__codelineno-36-95"></a>
<a id="__codelineno-36-96" name="__codelineno-36-96" href="#__codelineno-36-96"></a>
<a id="__codelineno-36-97" name="__codelineno-36-97" href="#__codelineno-36-97"></a>receivers: [prometheus]
<a id="__codelineno-36-98" name="__codelineno-36-98" href="#__codelineno-36-98"></a>
<a id="__codelineno-36-99" name="__codelineno-36-99" href="#__codelineno-36-99"></a>
<a id="__codelineno-36-100" name="__codelineno-36-100" href="#__codelineno-36-100"></a>
<a id="__codelineno-36-101" name="__codelineno-36-101" href="#__codelineno-36-101"></a>processors: [cumulativetodelta]
<a id="__codelineno-36-102" name="__codelineno-36-102" href="#__codelineno-36-102"></a>
<a id="__codelineno-36-103" name="__codelineno-36-103" href="#__codelineno-36-103"></a>
<a id="__codelineno-36-104" name="__codelineno-36-104" href="#__codelineno-36-104"></a>
<a id="__codelineno-36-105" name="__codelineno-36-105" href="#__codelineno-36-105"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<p>Cumulativetodelta processor recommendation</p>
<p>It is recommended to set the <code>max_staleness</code> parameter of the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor">cumulativetodelta processor√Ø¬ª¬ø</a> to a value higher than how often the collector receives metrics (e.g., how often metrics via OTLP are received, or how long the Prometheus scrape interval is). This ensures that no references to abandoned metric streams accumulate in memory over time.</p>
<h2 id="components_8">Components<a class="headerlink" href="#components_8" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_8">Receivers<a class="headerlink" href="#receivers_8" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the <code>prometheus</code> receiver as active receiver component for our Collector instance. We configure the receiver with the two jobs <code>node-exporter</code> and <code>opentelemetry-collector</code> under <code>scrape_configs</code>, to fetch data from the specified hosts once a minute (<code>scrape_interval: 60s</code>).</p>
<p>For a full list of configuration parameters, see the <a href="https://github.com/prometheus/prometheus/blob/v2.28.1/docs/configuration/configuration.md">Prometheus documentation√Ø¬ª¬ø</a>.</p>
<h3 id="processors_5">Processors<a class="headerlink" href="#processors_5" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we specify the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor"><code>cumulativetodelta</code> processor√Ø¬ª¬ø</a> to convert the metrics emitted by the Prometheus receiver to their <a href="/docs/ingest-from/opentelemetry/collector/configuration#delta-metrics" title="How to configure the OpenTelemetry Collector.">delta aggregation format</a>.</p>
<p>In Dynatrace Collector v0.41.0+, we specify the
<a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/metricstarttimeprocessor"><code>metricstarttime</code>
processor√Ø¬ª¬ø</a>
to add start timestamps to the metrics. This is required to properly convert the metrics to delta temporality.</p>
<h3 id="exporters_8">Exporters<a class="headerlink" href="#exporters_8" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipeline_1">Service pipeline<a class="headerlink" href="#service-pipeline_1" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver, processor, and exporter objects into a metrics pipeline, which will execute the Prometheus jobs, convert their metrics to delta values, and ingest the data into Dynatrace.</p>
<h2 id="limits-and-limitations_5">Limits and limitations<a class="headerlink" href="#limits-and-limitations_5" title="Permanent link">&para;</a></h2>
<p>Metrics are ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API</a> and are subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
</ul>
<p>To avoid data duplication, make sure that only one OpenTelemetry Collector scrapes a given target (for example, Kafka broker or Prometheus endpoint).</p>
<p>If you run multiple collector replicas, configure each one with a different target. This prevents duplicate metrics and unnecessary ingest costs.</p>
<p>The <a href="https://opentelemetry.io/docs/platforms/kubernetes/operator/target-allocator/">Target Allocator√Ø¬ª¬ø</a> automatically distributes the Prometheus targets among a pool of Collectors.</p>
<h2 id="related-topics_7">Related topics<a class="headerlink" href="#related-topics_7" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich OTLP requests with Kubernetes data</a></li>
</ul>
<hr />
<h2 id="source-redactmd">Source: redact.md<a class="headerlink" href="#source-redactmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Mask sensitive data with the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/redact
scraped: 2026-02-16T09:33:56.399168</p>
<hr />
<h1 id="mask-sensitive-data-with-the-opentelemetry-collector">Mask sensitive data with the OpenTelemetry Collector<a class="headerlink" href="#mask-sensitive-data-with-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="mask-sensitive-data-with-the-opentelemetry-collector_1">Mask sensitive data with the OpenTelemetry Collector<a class="headerlink" href="#mask-sensitive-data-with-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Updated on Jan 12, 2026</li>
</ul>
<p>Telemetry data can often include sensitive data (such as <a href="https://en.wikipedia.org/wiki/Personal_data">PII√Ø¬ª¬ø</a>), which may need to be redacted due to security and regulatory reasons. While this can be implemented on the application side, it typically is best to handle this centrally using gateways such as the Collector. This enables the single-point management of redaction rules across all your applications and services, without the need to update your code each time a new redaction rule is required.</p>
<p>This page shows sample Collector configurations for the redaction of specific sensitive data (for example, credit card numbers or email addresses) which may appear in telemetry data and which should be masked/redacted before leaving your network.</p>
<h2 id="prerequisites_9">Prerequisites<a class="headerlink" href="#prerequisites_9" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor">transform√Ø¬ª¬ø</a> and/or <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/redactionprocessor">redaction√Ø¬ª¬ø</a> processors:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace OTel Collector.">Dynatrace Collector</a></p>
</li>
<li><a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace OTel Collector.">OpenTelemetry Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace OTel Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="redaction-processor-versus-transform-processor">Redaction processor versus transform processor<a class="headerlink" href="#redaction-processor-versus-transform-processor" title="Permanent link">&para;</a></h2>
<p>The following examples make use of these two Collector <a href="https://opentelemetry.io/docs/collector/architecture/#processors">processors√Ø¬ª¬ø</a>:</p>
<ul>
<li>the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/transformprocessor/README.md">transform processor√Ø¬ª¬ø</a></li>
<li>the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/redactionprocessor/README.md">redaction processor√Ø¬ª¬ø</a></li>
</ul>
<p>While the following examples use both processors to mask data, each processor has its own distinct purpose. The redaction processor is straightforward and takes a list of values, based on which matching data will be completely redacted. On the other hand, the purpose of the transform processor is more versatile and goes beyond mere data redaction.</p>
<p>For data redaction, typically either processor can be used and you may want to choose the one best for your use case. For example, for full data redaction, the redaction processor may be easier to use. On the other hand, partial data redaction can only be achieved with the transform processor. In addition, the transform processor can also filter by data in the body of logs, whereas the redaction processor only has access to attributes.</p>
<h2 id="limitations-and-considerations">Limitations and considerations<a class="headerlink" href="#limitations-and-considerations" title="Permanent link">&para;</a></h2>
<p>The examples provided on this page are samples demonstrating common redaction scenarios. Note the following:</p>
<ul>
<li>The examples may not be exhaustive for all use cases. You may need to adapt them to your specific requirements.</li>
<li>The regex patterns and attribute matching only work when the entire attribute value matches the pattern to be redacted. Partial matches within larger strings may require more complex patterns or additional processing.</li>
<li>The span name is stored as a separate field in the OTLP message structure, not as an attribute. Therefore, redaction processors targeting attributes will not affect span names by default. See the <a href="#span-names">Span names</a> example for how to handle this.</li>
<li>Processor order in pipelines matters. Apply transform/redaction before routing or exporting, and keep related processors adjacent so downstream steps see the sanitized data.</li>
</ul>
<h2 id="demo-configuration_8">Demo configuration<a class="headerlink" href="#demo-configuration_8" title="Permanent link">&para;</a></h2>
<p>This YAML document is a basic Collector configuration skeleton, containing basic, general components (that is, receivers, exporters, and the pipeline definition).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>receivers:
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>otlp:
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a>protocols:
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a>grpc:
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a>
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a>
<a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a>
<a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a>
<a id="__codelineno-37-20" name="__codelineno-37-20" href="#__codelineno-37-20"></a>
<a id="__codelineno-37-21" name="__codelineno-37-21" href="#__codelineno-37-21"></a>http:
<a id="__codelineno-37-22" name="__codelineno-37-22" href="#__codelineno-37-22"></a>
<a id="__codelineno-37-23" name="__codelineno-37-23" href="#__codelineno-37-23"></a>
<a id="__codelineno-37-24" name="__codelineno-37-24" href="#__codelineno-37-24"></a>
<a id="__codelineno-37-25" name="__codelineno-37-25" href="#__codelineno-37-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-37-26" name="__codelineno-37-26" href="#__codelineno-37-26"></a>
<a id="__codelineno-37-27" name="__codelineno-37-27" href="#__codelineno-37-27"></a>
<a id="__codelineno-37-28" name="__codelineno-37-28" href="#__codelineno-37-28"></a>
<a id="__codelineno-37-29" name="__codelineno-37-29" href="#__codelineno-37-29"></a>processors:
<a id="__codelineno-37-30" name="__codelineno-37-30" href="#__codelineno-37-30"></a>
<a id="__codelineno-37-31" name="__codelineno-37-31" href="#__codelineno-37-31"></a>
<a id="__codelineno-37-32" name="__codelineno-37-32" href="#__codelineno-37-32"></a>
<a id="__codelineno-37-33" name="__codelineno-37-33" href="#__codelineno-37-33"></a>PLACEHOLDER-FOR-PROCESSOR-CONFIGURATIONS
<a id="__codelineno-37-34" name="__codelineno-37-34" href="#__codelineno-37-34"></a>
<a id="__codelineno-37-35" name="__codelineno-37-35" href="#__codelineno-37-35"></a>
<a id="__codelineno-37-36" name="__codelineno-37-36" href="#__codelineno-37-36"></a>
<a id="__codelineno-37-37" name="__codelineno-37-37" href="#__codelineno-37-37"></a>exporters:
<a id="__codelineno-37-38" name="__codelineno-37-38" href="#__codelineno-37-38"></a>
<a id="__codelineno-37-39" name="__codelineno-37-39" href="#__codelineno-37-39"></a>
<a id="__codelineno-37-40" name="__codelineno-37-40" href="#__codelineno-37-40"></a>
<a id="__codelineno-37-41" name="__codelineno-37-41" href="#__codelineno-37-41"></a>otlp_http:
<a id="__codelineno-37-42" name="__codelineno-37-42" href="#__codelineno-37-42"></a>
<a id="__codelineno-37-43" name="__codelineno-37-43" href="#__codelineno-37-43"></a>
<a id="__codelineno-37-44" name="__codelineno-37-44" href="#__codelineno-37-44"></a>
<a id="__codelineno-37-45" name="__codelineno-37-45" href="#__codelineno-37-45"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-37-46" name="__codelineno-37-46" href="#__codelineno-37-46"></a>
<a id="__codelineno-37-47" name="__codelineno-37-47" href="#__codelineno-37-47"></a>
<a id="__codelineno-37-48" name="__codelineno-37-48" href="#__codelineno-37-48"></a>
<a id="__codelineno-37-49" name="__codelineno-37-49" href="#__codelineno-37-49"></a>headers:
<a id="__codelineno-37-50" name="__codelineno-37-50" href="#__codelineno-37-50"></a>
<a id="__codelineno-37-51" name="__codelineno-37-51" href="#__codelineno-37-51"></a>
<a id="__codelineno-37-52" name="__codelineno-37-52" href="#__codelineno-37-52"></a>
<a id="__codelineno-37-53" name="__codelineno-37-53" href="#__codelineno-37-53"></a>&quot;Authorization&quot;: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-37-54" name="__codelineno-37-54" href="#__codelineno-37-54"></a>
<a id="__codelineno-37-55" name="__codelineno-37-55" href="#__codelineno-37-55"></a>
<a id="__codelineno-37-56" name="__codelineno-37-56" href="#__codelineno-37-56"></a>
<a id="__codelineno-37-57" name="__codelineno-37-57" href="#__codelineno-37-57"></a>service:
<a id="__codelineno-37-58" name="__codelineno-37-58" href="#__codelineno-37-58"></a>
<a id="__codelineno-37-59" name="__codelineno-37-59" href="#__codelineno-37-59"></a>
<a id="__codelineno-37-60" name="__codelineno-37-60" href="#__codelineno-37-60"></a>
<a id="__codelineno-37-61" name="__codelineno-37-61" href="#__codelineno-37-61"></a>pipelines:
<a id="__codelineno-37-62" name="__codelineno-37-62" href="#__codelineno-37-62"></a>
<a id="__codelineno-37-63" name="__codelineno-37-63" href="#__codelineno-37-63"></a>
<a id="__codelineno-37-64" name="__codelineno-37-64" href="#__codelineno-37-64"></a>
<a id="__codelineno-37-65" name="__codelineno-37-65" href="#__codelineno-37-65"></a>traces:
<a id="__codelineno-37-66" name="__codelineno-37-66" href="#__codelineno-37-66"></a>
<a id="__codelineno-37-67" name="__codelineno-37-67" href="#__codelineno-37-67"></a>
<a id="__codelineno-37-68" name="__codelineno-37-68" href="#__codelineno-37-68"></a>
<a id="__codelineno-37-69" name="__codelineno-37-69" href="#__codelineno-37-69"></a>receivers: [otlp]
<a id="__codelineno-37-70" name="__codelineno-37-70" href="#__codelineno-37-70"></a>
<a id="__codelineno-37-71" name="__codelineno-37-71" href="#__codelineno-37-71"></a>
<a id="__codelineno-37-72" name="__codelineno-37-72" href="#__codelineno-37-72"></a>
<a id="__codelineno-37-73" name="__codelineno-37-73" href="#__codelineno-37-73"></a>processors: [PLACEHOLDER-FOR-PROCESSOR-REFERENCES]
<a id="__codelineno-37-74" name="__codelineno-37-74" href="#__codelineno-37-74"></a>
<a id="__codelineno-37-75" name="__codelineno-37-75" href="#__codelineno-37-75"></a>
<a id="__codelineno-37-76" name="__codelineno-37-76" href="#__codelineno-37-76"></a>
<a id="__codelineno-37-77" name="__codelineno-37-77" href="#__codelineno-37-77"></a>exporters: [otlp_http]
<a id="__codelineno-37-78" name="__codelineno-37-78" href="#__codelineno-37-78"></a>
<a id="__codelineno-37-79" name="__codelineno-37-79" href="#__codelineno-37-79"></a>
<a id="__codelineno-37-80" name="__codelineno-37-80" href="#__codelineno-37-80"></a>
<a id="__codelineno-37-81" name="__codelineno-37-81" href="#__codelineno-37-81"></a>metrics:
<a id="__codelineno-37-82" name="__codelineno-37-82" href="#__codelineno-37-82"></a>
<a id="__codelineno-37-83" name="__codelineno-37-83" href="#__codelineno-37-83"></a>
<a id="__codelineno-37-84" name="__codelineno-37-84" href="#__codelineno-37-84"></a>
<a id="__codelineno-37-85" name="__codelineno-37-85" href="#__codelineno-37-85"></a>receivers: [otlp]
<a id="__codelineno-37-86" name="__codelineno-37-86" href="#__codelineno-37-86"></a>
<a id="__codelineno-37-87" name="__codelineno-37-87" href="#__codelineno-37-87"></a>
<a id="__codelineno-37-88" name="__codelineno-37-88" href="#__codelineno-37-88"></a>
<a id="__codelineno-37-89" name="__codelineno-37-89" href="#__codelineno-37-89"></a>processors: [PLACEHOLDER-FOR-PROCESSOR-REFERENCES]
<a id="__codelineno-37-90" name="__codelineno-37-90" href="#__codelineno-37-90"></a>
<a id="__codelineno-37-91" name="__codelineno-37-91" href="#__codelineno-37-91"></a>
<a id="__codelineno-37-92" name="__codelineno-37-92" href="#__codelineno-37-92"></a>
<a id="__codelineno-37-93" name="__codelineno-37-93" href="#__codelineno-37-93"></a>exporters: [otlp_http]
<a id="__codelineno-37-94" name="__codelineno-37-94" href="#__codelineno-37-94"></a>
<a id="__codelineno-37-95" name="__codelineno-37-95" href="#__codelineno-37-95"></a>
<a id="__codelineno-37-96" name="__codelineno-37-96" href="#__codelineno-37-96"></a>
<a id="__codelineno-37-97" name="__codelineno-37-97" href="#__codelineno-37-97"></a>logs:
<a id="__codelineno-37-98" name="__codelineno-37-98" href="#__codelineno-37-98"></a>
<a id="__codelineno-37-99" name="__codelineno-37-99" href="#__codelineno-37-99"></a>
<a id="__codelineno-37-100" name="__codelineno-37-100" href="#__codelineno-37-100"></a>
<a id="__codelineno-37-101" name="__codelineno-37-101" href="#__codelineno-37-101"></a>receivers: [otlp]
<a id="__codelineno-37-102" name="__codelineno-37-102" href="#__codelineno-37-102"></a>
<a id="__codelineno-37-103" name="__codelineno-37-103" href="#__codelineno-37-103"></a>
<a id="__codelineno-37-104" name="__codelineno-37-104" href="#__codelineno-37-104"></a>
<a id="__codelineno-37-105" name="__codelineno-37-105" href="#__codelineno-37-105"></a>processors: [PLACEHOLDER-FOR-PROCESSOR-REFERENCES]
<a id="__codelineno-37-106" name="__codelineno-37-106" href="#__codelineno-37-106"></a>
<a id="__codelineno-37-107" name="__codelineno-37-107" href="#__codelineno-37-107"></a>
<a id="__codelineno-37-108" name="__codelineno-37-108" href="#__codelineno-37-108"></a>
<a id="__codelineno-37-109" name="__codelineno-37-109" href="#__codelineno-37-109"></a>exporters: [otlp_http]
</code></pre></div>
<p>Make sure to replace the placeholder values in the document with the respective configurations:</p>
<ul>
<li><code>PLACEHOLDER-FOR-PROCESSOR-CONFIGURATIONS</code>: the relevant processor configuration</li>
<li><code>PLACEHOLDER-FOR-PROCESSOR-REFERENCES</code>: referencing the applicable processor objects for the individual signal types</li>
</ul>
<h3 id="ip-addresses">IP addresses<a class="headerlink" href="#ip-addresses" title="Permanent link">&para;</a></h3>
<p>Using the transform processor, we mask the attribute <code>client.address</code> with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#set"><code>set</code> statement√Ø¬ª¬ø</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>transform:
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>error_mode: ignore
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>trace_statements:
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a>- context: span
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a>statements: &amp;filter-statements
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a>
<a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a>
<a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a>
<a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a># this will not only mask end user client IP addresses,
<a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a>
<a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a>
<a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a>
<a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a># but also the address of a server acting as a client when establishing a connection to another server
<a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a>
<a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a>
<a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a>
<a id="__codelineno-38-29" name="__codelineno-38-29" href="#__codelineno-38-29"></a>- set(attributes[&quot;client.address&quot;], &quot;&lt;masked-clientip-ot&gt;&quot;)
<a id="__codelineno-38-30" name="__codelineno-38-30" href="#__codelineno-38-30"></a>
<a id="__codelineno-38-31" name="__codelineno-38-31" href="#__codelineno-38-31"></a>
<a id="__codelineno-38-32" name="__codelineno-38-32" href="#__codelineno-38-32"></a>
<a id="__codelineno-38-33" name="__codelineno-38-33" href="#__codelineno-38-33"></a>metric_statements:
<a id="__codelineno-38-34" name="__codelineno-38-34" href="#__codelineno-38-34"></a>
<a id="__codelineno-38-35" name="__codelineno-38-35" href="#__codelineno-38-35"></a>
<a id="__codelineno-38-36" name="__codelineno-38-36" href="#__codelineno-38-36"></a>
<a id="__codelineno-38-37" name="__codelineno-38-37" href="#__codelineno-38-37"></a>- context: datapoint
<a id="__codelineno-38-38" name="__codelineno-38-38" href="#__codelineno-38-38"></a>
<a id="__codelineno-38-39" name="__codelineno-38-39" href="#__codelineno-38-39"></a>
<a id="__codelineno-38-40" name="__codelineno-38-40" href="#__codelineno-38-40"></a>
<a id="__codelineno-38-41" name="__codelineno-38-41" href="#__codelineno-38-41"></a>statements: *filter-statements
<a id="__codelineno-38-42" name="__codelineno-38-42" href="#__codelineno-38-42"></a>
<a id="__codelineno-38-43" name="__codelineno-38-43" href="#__codelineno-38-43"></a>
<a id="__codelineno-38-44" name="__codelineno-38-44" href="#__codelineno-38-44"></a>
<a id="__codelineno-38-45" name="__codelineno-38-45" href="#__codelineno-38-45"></a>log_statements:
<a id="__codelineno-38-46" name="__codelineno-38-46" href="#__codelineno-38-46"></a>
<a id="__codelineno-38-47" name="__codelineno-38-47" href="#__codelineno-38-47"></a>
<a id="__codelineno-38-48" name="__codelineno-38-48" href="#__codelineno-38-48"></a>
<a id="__codelineno-38-49" name="__codelineno-38-49" href="#__codelineno-38-49"></a>- context: log
<a id="__codelineno-38-50" name="__codelineno-38-50" href="#__codelineno-38-50"></a>
<a id="__codelineno-38-51" name="__codelineno-38-51" href="#__codelineno-38-51"></a>
<a id="__codelineno-38-52" name="__codelineno-38-52" href="#__codelineno-38-52"></a>
<a id="__codelineno-38-53" name="__codelineno-38-53" href="#__codelineno-38-53"></a>statements: *filter-statements
</code></pre></div>
<h3 id="email-addresses">Email addresses<a class="headerlink" href="#email-addresses" title="Permanent link">&para;</a></h3>
<p>Using the transform processor, we mask the attribute <code>user.email</code> with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#set"><code>set</code> statement√Ø¬ª¬ø</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>transform:
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>error_mode: ignore
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>trace_statements:
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a>- context: span
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a>statements: &amp;filter-statements
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a>- set(attributes[&quot;user.email&quot;], &quot;&lt;masked-email-ot&gt;&quot;)
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a>
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a>
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a>metric_statements:
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a>
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a>
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a>
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a>- context: datapoint
<a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a>
<a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a>
<a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a>
<a id="__codelineno-39-33" name="__codelineno-39-33" href="#__codelineno-39-33"></a>statements: *filter-statements
<a id="__codelineno-39-34" name="__codelineno-39-34" href="#__codelineno-39-34"></a>
<a id="__codelineno-39-35" name="__codelineno-39-35" href="#__codelineno-39-35"></a>
<a id="__codelineno-39-36" name="__codelineno-39-36" href="#__codelineno-39-36"></a>
<a id="__codelineno-39-37" name="__codelineno-39-37" href="#__codelineno-39-37"></a>log_statements:
<a id="__codelineno-39-38" name="__codelineno-39-38" href="#__codelineno-39-38"></a>
<a id="__codelineno-39-39" name="__codelineno-39-39" href="#__codelineno-39-39"></a>
<a id="__codelineno-39-40" name="__codelineno-39-40" href="#__codelineno-39-40"></a>
<a id="__codelineno-39-41" name="__codelineno-39-41" href="#__codelineno-39-41"></a>- context: log
<a id="__codelineno-39-42" name="__codelineno-39-42" href="#__codelineno-39-42"></a>
<a id="__codelineno-39-43" name="__codelineno-39-43" href="#__codelineno-39-43"></a>
<a id="__codelineno-39-44" name="__codelineno-39-44" href="#__codelineno-39-44"></a>
<a id="__codelineno-39-45" name="__codelineno-39-45" href="#__codelineno-39-45"></a>statements: *filter-statements
</code></pre></div>
<h3 id="dynatrace-api-tokens">Dynatrace API tokens<a class="headerlink" href="#dynatrace-api-tokens" title="Permanent link">&para;</a></h3>
<p>Using the redaction processor, we use the regular expression <code>dt0[a-z]0[1-9]\.[A-Za-z0-9]{24}\.([A-Za-z0-9]{64})</code> to mask all occurrences of <a href="/docs/dynatrace-api/basics/dynatrace-api-authentication" title="Find out how to get authenticated to use the Dynatrace API.">Dynatrace API tokens</a> in our telemetry data.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>redaction:
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>allow_all_keys: true
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a>blocked_values:
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a>
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a>- dt0[a-z]0[1-9]\.[A-Za-z0-9]{24}\.([A-Za-z0-9]{64})
<a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a>
<a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a>
<a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a>
<a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a>summary: info
</code></pre></div>
<h3 id="usernames">Usernames<a class="headerlink" href="#usernames" title="Permanent link">&para;</a></h3>
<p>Using the transform processor, we mask the attributes <code>user.id</code>, <code>user.name</code>, and <code>user.full_name</code> with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#set"><code>set</code> statement√Ø¬ª¬ø</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>transform:
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>error_mode: ignore
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>trace_statements:
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>- context: span
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a>
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a>
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a>
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a>statements: &amp;filter-statements
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a>
<a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a>
<a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a>
<a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a>- set(attributes[&quot;user.id&quot;], &quot;&lt;masked-userid-ot&gt;&quot;)
<a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a>
<a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a>
<a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a>
<a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a>- set(attributes[&quot;user.name&quot;], &quot;&lt;masked-username-ot&gt;&quot;)
<a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a>
<a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a>
<a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a>
<a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a>- set(attributes[&quot;user.full_name&quot;], &quot;&lt;masked-userfullname-ot&gt;&quot;)
<a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a>
<a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a>
<a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a>
<a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a>metric_statements:
<a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a>
<a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a>
<a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a>
<a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a>- context: datapoint
<a id="__codelineno-41-38" name="__codelineno-41-38" href="#__codelineno-41-38"></a>
<a id="__codelineno-41-39" name="__codelineno-41-39" href="#__codelineno-41-39"></a>
<a id="__codelineno-41-40" name="__codelineno-41-40" href="#__codelineno-41-40"></a>
<a id="__codelineno-41-41" name="__codelineno-41-41" href="#__codelineno-41-41"></a>statements: *filter-statements
<a id="__codelineno-41-42" name="__codelineno-41-42" href="#__codelineno-41-42"></a>
<a id="__codelineno-41-43" name="__codelineno-41-43" href="#__codelineno-41-43"></a>
<a id="__codelineno-41-44" name="__codelineno-41-44" href="#__codelineno-41-44"></a>
<a id="__codelineno-41-45" name="__codelineno-41-45" href="#__codelineno-41-45"></a>log_statements:
<a id="__codelineno-41-46" name="__codelineno-41-46" href="#__codelineno-41-46"></a>
<a id="__codelineno-41-47" name="__codelineno-41-47" href="#__codelineno-41-47"></a>
<a id="__codelineno-41-48" name="__codelineno-41-48" href="#__codelineno-41-48"></a>
<a id="__codelineno-41-49" name="__codelineno-41-49" href="#__codelineno-41-49"></a>- context: log
<a id="__codelineno-41-50" name="__codelineno-41-50" href="#__codelineno-41-50"></a>
<a id="__codelineno-41-51" name="__codelineno-41-51" href="#__codelineno-41-51"></a>
<a id="__codelineno-41-52" name="__codelineno-41-52" href="#__codelineno-41-52"></a>
<a id="__codelineno-41-53" name="__codelineno-41-53" href="#__codelineno-41-53"></a>statements: *filter-statements
</code></pre></div>
<h3 id="credit-card-numbers">Credit card numbers<a class="headerlink" href="#credit-card-numbers" title="Permanent link">&para;</a></h3>
<p>Using the transform processor, we configure three <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#replace_all_patterns"><code>replace_all_patterns</code> statements√Ø¬ª¬ø</a> to mask any occurrences of credit card numbers and mask everything but the last four digits.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>transform:
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>error_mode: ignore
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>trace_statements:
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a>
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a>- context: span
<a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a>
<a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a>
<a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a>
<a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a>statements: &amp;filter-statements
<a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a>
<a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a>
<a id="__codelineno-42-20" name="__codelineno-42-20" href="#__codelineno-42-20"></a>
<a id="__codelineno-42-21" name="__codelineno-42-21" href="#__codelineno-42-21"></a>- replace_all_patterns(attributes, &quot;value&quot;, &quot;^3\\s*[47](\\s*[0-9]){9}((\\s*[0-9]){4})$&quot;, &quot;&lt;masked-pcard$$2-ot&gt;&quot;) where IsValidLuhn(attributes[&quot;value&quot;])
<a id="__codelineno-42-22" name="__codelineno-42-22" href="#__codelineno-42-22"></a>
<a id="__codelineno-42-23" name="__codelineno-42-23" href="#__codelineno-42-23"></a>
<a id="__codelineno-42-24" name="__codelineno-42-24" href="#__codelineno-42-24"></a>
<a id="__codelineno-42-25" name="__codelineno-42-25" href="#__codelineno-42-25"></a>- replace_all_patterns(attributes, &quot;value&quot;, &quot;^(5[1-5]([0-9]){2}|222[1-9]|22[3-9]\\d|2[3-6]\\d{2}|27[0-1]\\d|2720)(\\s*[0-9]){8}\\s*([0-9]{4})$&quot;, &quot;&lt;masked-pcard$$4-ot&gt;&quot;) where IsValidLuhn(attributes[&quot;value&quot;])
<a id="__codelineno-42-26" name="__codelineno-42-26" href="#__codelineno-42-26"></a>
<a id="__codelineno-42-27" name="__codelineno-42-27" href="#__codelineno-42-27"></a>
<a id="__codelineno-42-28" name="__codelineno-42-28" href="#__codelineno-42-28"></a>
<a id="__codelineno-42-29" name="__codelineno-42-29" href="#__codelineno-42-29"></a>- replace_all_patterns(attributes, &quot;value&quot;, &quot;^4(\\s*[0-9]){8,14}\\s*(([0-9]\\s*){4})$&quot;, &quot;&lt;masked-pcard$$2-ot&gt;&quot;) where IsValidLuhn(attributes[&quot;value&quot;])
<a id="__codelineno-42-30" name="__codelineno-42-30" href="#__codelineno-42-30"></a>
<a id="__codelineno-42-31" name="__codelineno-42-31" href="#__codelineno-42-31"></a>
<a id="__codelineno-42-32" name="__codelineno-42-32" href="#__codelineno-42-32"></a>
<a id="__codelineno-42-33" name="__codelineno-42-33" href="#__codelineno-42-33"></a>metric_statements:
<a id="__codelineno-42-34" name="__codelineno-42-34" href="#__codelineno-42-34"></a>
<a id="__codelineno-42-35" name="__codelineno-42-35" href="#__codelineno-42-35"></a>
<a id="__codelineno-42-36" name="__codelineno-42-36" href="#__codelineno-42-36"></a>
<a id="__codelineno-42-37" name="__codelineno-42-37" href="#__codelineno-42-37"></a>- context: datapoint
<a id="__codelineno-42-38" name="__codelineno-42-38" href="#__codelineno-42-38"></a>
<a id="__codelineno-42-39" name="__codelineno-42-39" href="#__codelineno-42-39"></a>
<a id="__codelineno-42-40" name="__codelineno-42-40" href="#__codelineno-42-40"></a>
<a id="__codelineno-42-41" name="__codelineno-42-41" href="#__codelineno-42-41"></a>statements: *filter-statements
<a id="__codelineno-42-42" name="__codelineno-42-42" href="#__codelineno-42-42"></a>
<a id="__codelineno-42-43" name="__codelineno-42-43" href="#__codelineno-42-43"></a>
<a id="__codelineno-42-44" name="__codelineno-42-44" href="#__codelineno-42-44"></a>
<a id="__codelineno-42-45" name="__codelineno-42-45" href="#__codelineno-42-45"></a>log_statements:
<a id="__codelineno-42-46" name="__codelineno-42-46" href="#__codelineno-42-46"></a>
<a id="__codelineno-42-47" name="__codelineno-42-47" href="#__codelineno-42-47"></a>
<a id="__codelineno-42-48" name="__codelineno-42-48" href="#__codelineno-42-48"></a>
<a id="__codelineno-42-49" name="__codelineno-42-49" href="#__codelineno-42-49"></a>- context: log
<a id="__codelineno-42-50" name="__codelineno-42-50" href="#__codelineno-42-50"></a>
<a id="__codelineno-42-51" name="__codelineno-42-51" href="#__codelineno-42-51"></a>
<a id="__codelineno-42-52" name="__codelineno-42-52" href="#__codelineno-42-52"></a>
<a id="__codelineno-42-53" name="__codelineno-42-53" href="#__codelineno-42-53"></a>statements: *filter-statements
</code></pre></div>
<p>For credit card numbers, it is also possible to use the built-in, <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/pkg/ottl/ottlfuncs#isvalidluhn">standard OTTL function <code>IsValidLuhn()</code>√Ø¬ª¬ø</a> instead of regular expressions, if you prefer to block values altogether instead of just masking them.</p>
<h3 id="iban-numbers">IBAN numbers<a class="headerlink" href="#iban-numbers" title="Permanent link">&para;</a></h3>
<p>Using the redaction processor, we use the regular expression <code>^[A-Z]{2}[0-9]{2}(\\s*[A-Z0-9]){8,30}$</code> to mask all IBAN occurrences in our telemetry data.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>redaction:
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>allow_all_keys: true
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>blocked_values:
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a>- &quot;^[A-Z]{2}[0-9]{2}(\\s*[A-Z0-9]){8,30}$&quot;
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a>
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a>
<a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a>
<a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a>summary: info
</code></pre></div>
<h3 id="span-names">Span names<a class="headerlink" href="#span-names" title="Permanent link">&para;</a></h3>
<p>Span names are not stored as attributes in the OTLP message structure, so attribute-based redaction does not apply to them.
There are multiple ways of redacting and simplifying span names:</p>
<h4 id="generate-a-new-span-name">Generate a new span name<a class="headerlink" href="#generate-a-new-span-name" title="Permanent link">&para;</a></h4>
<p>Recommended</p>
<p><code>set_semconv_span_name</code> is available from Collector Contrib version 0.142.0 and .</p>
<p>Use the transform processor's <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor#set_semconv_span_name"><code>set_semconv_span_name</code>√Ø¬ª¬ø</a> to derive a low-cardinality name that is compliant with OpenTelemetry semantic conventions. This will use the (low-cardinality) <code>http.request.method</code> and <code>http.route</code> to generate a new span name. It keeps the name consistent with HTTP/RPC/messaging/database conventions and avoids leaking identifiers.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>transform:
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>error_mode: ignore
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>trace_statements:
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a>
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a>- context: span
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a>
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a>
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a>statements:
<a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a>
<a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a>
<a id="__codelineno-44-20" name="__codelineno-44-20" href="#__codelineno-44-20"></a>
<a id="__codelineno-44-21" name="__codelineno-44-21" href="#__codelineno-44-21"></a>- set_semconv_span_name(&quot;1.37.0&quot;)
</code></pre></div>
<h4 id="redact-the-span-name-explicitly">Redact the span name explicitly<a class="headerlink" href="#redact-the-span-name-explicitly" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>transform:
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>error_mode: ignore
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>trace_statements:
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>- context: span
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>
<a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>
<a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a>statements:
<a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a>
<a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a>
<a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a>
<a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a>- replace_pattern(name, &quot;(GET /api/v1/users/)\\d+&quot;, &quot;$$1{id}&quot;)
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_9">Components<a class="headerlink" href="#components_9" title="Permanent link">&para;</a></h2>
<p>For our configuration, we use the following components.</p>
<h3 id="receivers_9">Receivers<a class="headerlink" href="#receivers_9" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance.</p>
<h3 id="processors_6">Processors<a class="headerlink" href="#processors_6" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we place the configuration for the relevant processor instances.</p>
<h3 id="exporters_9">Exporters<a class="headerlink" href="#exporters_9" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_7">Service pipelines<a class="headerlink" href="#service-pipelines_7" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we eventually assemble all the configured objects into pipelines for the individual telemetry signals (traces, etc.) and have the Collector instance run the configured tasks.</p>
<h2 id="related-topics_8">Related topics<a class="headerlink" href="#related-topics_8" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-samplingmd">Source: sampling.md<a class="headerlink" href="#source-samplingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Sampling with the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/sampling
scraped: 2026-02-16T09:28:00.427278</p>
<hr />
<h1 id="sampling-with-the-opentelemetry-collector">Sampling with the OpenTelemetry Collector<a class="headerlink" href="#sampling-with-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="sampling-with-the-opentelemetry-collector_1">Sampling with the OpenTelemetry Collector<a class="headerlink" href="#sampling-with-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Published May 28, 2024</li>
</ul>
<p>A distributed application under heavy load may generate a massive amount of observability data. This data incurs generation, processing, transmission, and storage costs. However, it's often possible to use sampling√¢¬Ä¬îwhere you use only a relatively small portion of the observability data and drop the rest√¢¬Ä¬îto reduce costs and still effectively monitor your application.</p>
<p>In OpenTelemetry, there are two main sampling methods:</p>
<ul>
<li><strong>Head sampling</strong> is done within your application by the OpenTelemetry SDK, and typically involves saving a random sample of transactions.</li>
</ul>
<p>Head sampling is simple and effective, but it has important limitations. For example, because the sampling decision needs to be made at the start of the transaction, it can't be affected by anything that happens after that point.
* <strong>Tail sampling</strong> is used to make sampling decisions based on information unknown at the start of the transaction.</p>
<p>In OpenTelemetry, tail sampling is typically done with the Collector by temporarily storing the full set of monitoring data until a transaction is completed. The Collector then decides to either save or drop the transaction data based on a set of sampling policies.</p>
<p>Because tail sampling typically is not random, it's important to ensure that any calculated metrics are unbiased. This can be done by calculating metrics from the full set of transactions, as shown below, or from a separate, randomly sampled stream.</p>
<p>The following configuration example shows how to configure a Collector instance to sample trace data and import it as an OTLP request into Dynatrace. It uses the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/connector/spanmetricsconnector"><code>spanmetrics</code> connector√Ø¬ª¬ø</a> to compute service metrics from traces before sampling in order to ensure their accuracy.</p>
<h2 id="prerequisites_10">Prerequisites<a class="headerlink" href="#prerequisites_10" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor"><code>transform</code>√Ø¬ª¬ø</a>, <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/filterprocessor"><code>filter</code>√Ø¬ª¬ø</a>, and <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/tailsamplingprocessor"><code>tail_sampling</code>√Ø¬ª¬ø</a> processors, and the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/connector/spanmetricsconnector"><code>spanmetrics</code>√Ø¬ª¬ø</a> connector:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace OTel Collector.">Dynatrace Collector</a></p>
</li>
<li>The OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace OTel Collector.">Contrib</a> distribution</li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace OTel Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_9">Demo configuration<a class="headerlink" href="#demo-configuration_9" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>receivers:
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>otlp:
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a>protocols:
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>grpc:
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a>
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a>
<a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a>
<a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a>http:
<a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a>
<a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a>
<a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a>
<a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a>
<a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a>
<a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a>
<a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a>processors:
<a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a>
<a id="__codelineno-46-31" name="__codelineno-46-31" href="#__codelineno-46-31"></a>
<a id="__codelineno-46-32" name="__codelineno-46-32" href="#__codelineno-46-32"></a>
<a id="__codelineno-46-33" name="__codelineno-46-33" href="#__codelineno-46-33"></a>tail_sampling:
<a id="__codelineno-46-34" name="__codelineno-46-34" href="#__codelineno-46-34"></a>
<a id="__codelineno-46-35" name="__codelineno-46-35" href="#__codelineno-46-35"></a>
<a id="__codelineno-46-36" name="__codelineno-46-36" href="#__codelineno-46-36"></a>
<a id="__codelineno-46-37" name="__codelineno-46-37" href="#__codelineno-46-37"></a># This configuration keeps errors, traces longer than 500ms, and 20% of all remaining traces.
<a id="__codelineno-46-38" name="__codelineno-46-38" href="#__codelineno-46-38"></a>
<a id="__codelineno-46-39" name="__codelineno-46-39" href="#__codelineno-46-39"></a>
<a id="__codelineno-46-40" name="__codelineno-46-40" href="#__codelineno-46-40"></a>
<a id="__codelineno-46-41" name="__codelineno-46-41" href="#__codelineno-46-41"></a># Adjust with policies of your choice.
<a id="__codelineno-46-42" name="__codelineno-46-42" href="#__codelineno-46-42"></a>
<a id="__codelineno-46-43" name="__codelineno-46-43" href="#__codelineno-46-43"></a>
<a id="__codelineno-46-44" name="__codelineno-46-44" href="#__codelineno-46-44"></a>
<a id="__codelineno-46-45" name="__codelineno-46-45" href="#__codelineno-46-45"></a>policies:
<a id="__codelineno-46-46" name="__codelineno-46-46" href="#__codelineno-46-46"></a>
<a id="__codelineno-46-47" name="__codelineno-46-47" href="#__codelineno-46-47"></a>
<a id="__codelineno-46-48" name="__codelineno-46-48" href="#__codelineno-46-48"></a>
<a id="__codelineno-46-49" name="__codelineno-46-49" href="#__codelineno-46-49"></a>- name: policy1-keep-errors
<a id="__codelineno-46-50" name="__codelineno-46-50" href="#__codelineno-46-50"></a>
<a id="__codelineno-46-51" name="__codelineno-46-51" href="#__codelineno-46-51"></a>
<a id="__codelineno-46-52" name="__codelineno-46-52" href="#__codelineno-46-52"></a>
<a id="__codelineno-46-53" name="__codelineno-46-53" href="#__codelineno-46-53"></a>type: status_code
<a id="__codelineno-46-54" name="__codelineno-46-54" href="#__codelineno-46-54"></a>
<a id="__codelineno-46-55" name="__codelineno-46-55" href="#__codelineno-46-55"></a>
<a id="__codelineno-46-56" name="__codelineno-46-56" href="#__codelineno-46-56"></a>
<a id="__codelineno-46-57" name="__codelineno-46-57" href="#__codelineno-46-57"></a>status_code: {status_codes: [ERROR, UNSET]}
<a id="__codelineno-46-58" name="__codelineno-46-58" href="#__codelineno-46-58"></a>
<a id="__codelineno-46-59" name="__codelineno-46-59" href="#__codelineno-46-59"></a>
<a id="__codelineno-46-60" name="__codelineno-46-60" href="#__codelineno-46-60"></a>
<a id="__codelineno-46-61" name="__codelineno-46-61" href="#__codelineno-46-61"></a>- name: policy2-keep-slow-traces
<a id="__codelineno-46-62" name="__codelineno-46-62" href="#__codelineno-46-62"></a>
<a id="__codelineno-46-63" name="__codelineno-46-63" href="#__codelineno-46-63"></a>
<a id="__codelineno-46-64" name="__codelineno-46-64" href="#__codelineno-46-64"></a>
<a id="__codelineno-46-65" name="__codelineno-46-65" href="#__codelineno-46-65"></a>type: latency
<a id="__codelineno-46-66" name="__codelineno-46-66" href="#__codelineno-46-66"></a>
<a id="__codelineno-46-67" name="__codelineno-46-67" href="#__codelineno-46-67"></a>
<a id="__codelineno-46-68" name="__codelineno-46-68" href="#__codelineno-46-68"></a>
<a id="__codelineno-46-69" name="__codelineno-46-69" href="#__codelineno-46-69"></a>latency: {threshold_ms: 500}
<a id="__codelineno-46-70" name="__codelineno-46-70" href="#__codelineno-46-70"></a>
<a id="__codelineno-46-71" name="__codelineno-46-71" href="#__codelineno-46-71"></a>
<a id="__codelineno-46-72" name="__codelineno-46-72" href="#__codelineno-46-72"></a>
<a id="__codelineno-46-73" name="__codelineno-46-73" href="#__codelineno-46-73"></a>- name: policy3-keep-random-sample
<a id="__codelineno-46-74" name="__codelineno-46-74" href="#__codelineno-46-74"></a>
<a id="__codelineno-46-75" name="__codelineno-46-75" href="#__codelineno-46-75"></a>
<a id="__codelineno-46-76" name="__codelineno-46-76" href="#__codelineno-46-76"></a>
<a id="__codelineno-46-77" name="__codelineno-46-77" href="#__codelineno-46-77"></a>type: probabilistic
<a id="__codelineno-46-78" name="__codelineno-46-78" href="#__codelineno-46-78"></a>
<a id="__codelineno-46-79" name="__codelineno-46-79" href="#__codelineno-46-79"></a>
<a id="__codelineno-46-80" name="__codelineno-46-80" href="#__codelineno-46-80"></a>
<a id="__codelineno-46-81" name="__codelineno-46-81" href="#__codelineno-46-81"></a>probabilistic: {sampling_percentage: 20}
<a id="__codelineno-46-82" name="__codelineno-46-82" href="#__codelineno-46-82"></a>
<a id="__codelineno-46-83" name="__codelineno-46-83" href="#__codelineno-46-83"></a>
<a id="__codelineno-46-84" name="__codelineno-46-84" href="#__codelineno-46-84"></a>
<a id="__codelineno-46-85" name="__codelineno-46-85" href="#__codelineno-46-85"></a>decision_wait: 30s
<a id="__codelineno-46-86" name="__codelineno-46-86" href="#__codelineno-46-86"></a>
<a id="__codelineno-46-87" name="__codelineno-46-87" href="#__codelineno-46-87"></a>
<a id="__codelineno-46-88" name="__codelineno-46-88" href="#__codelineno-46-88"></a>
<a id="__codelineno-46-89" name="__codelineno-46-89" href="#__codelineno-46-89"></a>connectors:
<a id="__codelineno-46-90" name="__codelineno-46-90" href="#__codelineno-46-90"></a>
<a id="__codelineno-46-91" name="__codelineno-46-91" href="#__codelineno-46-91"></a>
<a id="__codelineno-46-92" name="__codelineno-46-92" href="#__codelineno-46-92"></a>
<a id="__codelineno-46-93" name="__codelineno-46-93" href="#__codelineno-46-93"></a>spanmetrics:
<a id="__codelineno-46-94" name="__codelineno-46-94" href="#__codelineno-46-94"></a>
<a id="__codelineno-46-95" name="__codelineno-46-95" href="#__codelineno-46-95"></a>
<a id="__codelineno-46-96" name="__codelineno-46-96" href="#__codelineno-46-96"></a>
<a id="__codelineno-46-97" name="__codelineno-46-97" href="#__codelineno-46-97"></a>aggregation_temporality: &quot;AGGREGATION_TEMPORALITY_DELTA&quot;
<a id="__codelineno-46-98" name="__codelineno-46-98" href="#__codelineno-46-98"></a>
<a id="__codelineno-46-99" name="__codelineno-46-99" href="#__codelineno-46-99"></a>
<a id="__codelineno-46-100" name="__codelineno-46-100" href="#__codelineno-46-100"></a>
<a id="__codelineno-46-101" name="__codelineno-46-101" href="#__codelineno-46-101"></a>namespace: &quot;requests&quot;
<a id="__codelineno-46-102" name="__codelineno-46-102" href="#__codelineno-46-102"></a>
<a id="__codelineno-46-103" name="__codelineno-46-103" href="#__codelineno-46-103"></a>
<a id="__codelineno-46-104" name="__codelineno-46-104" href="#__codelineno-46-104"></a>
<a id="__codelineno-46-105" name="__codelineno-46-105" href="#__codelineno-46-105"></a>metrics_flush_interval: 15s
<a id="__codelineno-46-106" name="__codelineno-46-106" href="#__codelineno-46-106"></a>
<a id="__codelineno-46-107" name="__codelineno-46-107" href="#__codelineno-46-107"></a>
<a id="__codelineno-46-108" name="__codelineno-46-108" href="#__codelineno-46-108"></a>
<a id="__codelineno-46-109" name="__codelineno-46-109" href="#__codelineno-46-109"></a>exporters:
<a id="__codelineno-46-110" name="__codelineno-46-110" href="#__codelineno-46-110"></a>
<a id="__codelineno-46-111" name="__codelineno-46-111" href="#__codelineno-46-111"></a>
<a id="__codelineno-46-112" name="__codelineno-46-112" href="#__codelineno-46-112"></a>
<a id="__codelineno-46-113" name="__codelineno-46-113" href="#__codelineno-46-113"></a>otlp_http:
<a id="__codelineno-46-114" name="__codelineno-46-114" href="#__codelineno-46-114"></a>
<a id="__codelineno-46-115" name="__codelineno-46-115" href="#__codelineno-46-115"></a>
<a id="__codelineno-46-116" name="__codelineno-46-116" href="#__codelineno-46-116"></a>
<a id="__codelineno-46-117" name="__codelineno-46-117" href="#__codelineno-46-117"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-46-118" name="__codelineno-46-118" href="#__codelineno-46-118"></a>
<a id="__codelineno-46-119" name="__codelineno-46-119" href="#__codelineno-46-119"></a>
<a id="__codelineno-46-120" name="__codelineno-46-120" href="#__codelineno-46-120"></a>
<a id="__codelineno-46-121" name="__codelineno-46-121" href="#__codelineno-46-121"></a>headers:
<a id="__codelineno-46-122" name="__codelineno-46-122" href="#__codelineno-46-122"></a>
<a id="__codelineno-46-123" name="__codelineno-46-123" href="#__codelineno-46-123"></a>
<a id="__codelineno-46-124" name="__codelineno-46-124" href="#__codelineno-46-124"></a>
<a id="__codelineno-46-125" name="__codelineno-46-125" href="#__codelineno-46-125"></a>Authorization: Api-Token ${env:DT_API_TOKEN}
<a id="__codelineno-46-126" name="__codelineno-46-126" href="#__codelineno-46-126"></a>
<a id="__codelineno-46-127" name="__codelineno-46-127" href="#__codelineno-46-127"></a>
<a id="__codelineno-46-128" name="__codelineno-46-128" href="#__codelineno-46-128"></a>
<a id="__codelineno-46-129" name="__codelineno-46-129" href="#__codelineno-46-129"></a>service:
<a id="__codelineno-46-130" name="__codelineno-46-130" href="#__codelineno-46-130"></a>
<a id="__codelineno-46-131" name="__codelineno-46-131" href="#__codelineno-46-131"></a>
<a id="__codelineno-46-132" name="__codelineno-46-132" href="#__codelineno-46-132"></a>
<a id="__codelineno-46-133" name="__codelineno-46-133" href="#__codelineno-46-133"></a>pipelines:
<a id="__codelineno-46-134" name="__codelineno-46-134" href="#__codelineno-46-134"></a>
<a id="__codelineno-46-135" name="__codelineno-46-135" href="#__codelineno-46-135"></a>
<a id="__codelineno-46-136" name="__codelineno-46-136" href="#__codelineno-46-136"></a>
<a id="__codelineno-46-137" name="__codelineno-46-137" href="#__codelineno-46-137"></a>traces:
<a id="__codelineno-46-138" name="__codelineno-46-138" href="#__codelineno-46-138"></a>
<a id="__codelineno-46-139" name="__codelineno-46-139" href="#__codelineno-46-139"></a>
<a id="__codelineno-46-140" name="__codelineno-46-140" href="#__codelineno-46-140"></a>
<a id="__codelineno-46-141" name="__codelineno-46-141" href="#__codelineno-46-141"></a>receivers: [otlp]
<a id="__codelineno-46-142" name="__codelineno-46-142" href="#__codelineno-46-142"></a>
<a id="__codelineno-46-143" name="__codelineno-46-143" href="#__codelineno-46-143"></a>
<a id="__codelineno-46-144" name="__codelineno-46-144" href="#__codelineno-46-144"></a>
<a id="__codelineno-46-145" name="__codelineno-46-145" href="#__codelineno-46-145"></a>processors: [tail_sampling]
<a id="__codelineno-46-146" name="__codelineno-46-146" href="#__codelineno-46-146"></a>
<a id="__codelineno-46-147" name="__codelineno-46-147" href="#__codelineno-46-147"></a>
<a id="__codelineno-46-148" name="__codelineno-46-148" href="#__codelineno-46-148"></a>
<a id="__codelineno-46-149" name="__codelineno-46-149" href="#__codelineno-46-149"></a>exporters: [otlp_http]
<a id="__codelineno-46-150" name="__codelineno-46-150" href="#__codelineno-46-150"></a>
<a id="__codelineno-46-151" name="__codelineno-46-151" href="#__codelineno-46-151"></a>
<a id="__codelineno-46-152" name="__codelineno-46-152" href="#__codelineno-46-152"></a>
<a id="__codelineno-46-153" name="__codelineno-46-153" href="#__codelineno-46-153"></a>traces/spanmetrics:
<a id="__codelineno-46-154" name="__codelineno-46-154" href="#__codelineno-46-154"></a>
<a id="__codelineno-46-155" name="__codelineno-46-155" href="#__codelineno-46-155"></a>
<a id="__codelineno-46-156" name="__codelineno-46-156" href="#__codelineno-46-156"></a>
<a id="__codelineno-46-157" name="__codelineno-46-157" href="#__codelineno-46-157"></a>receivers: [otlp]
<a id="__codelineno-46-158" name="__codelineno-46-158" href="#__codelineno-46-158"></a>
<a id="__codelineno-46-159" name="__codelineno-46-159" href="#__codelineno-46-159"></a>
<a id="__codelineno-46-160" name="__codelineno-46-160" href="#__codelineno-46-160"></a>
<a id="__codelineno-46-161" name="__codelineno-46-161" href="#__codelineno-46-161"></a>processors: []
<a id="__codelineno-46-162" name="__codelineno-46-162" href="#__codelineno-46-162"></a>
<a id="__codelineno-46-163" name="__codelineno-46-163" href="#__codelineno-46-163"></a>
<a id="__codelineno-46-164" name="__codelineno-46-164" href="#__codelineno-46-164"></a>
<a id="__codelineno-46-165" name="__codelineno-46-165" href="#__codelineno-46-165"></a>exporters: [spanmetrics]
<a id="__codelineno-46-166" name="__codelineno-46-166" href="#__codelineno-46-166"></a>
<a id="__codelineno-46-167" name="__codelineno-46-167" href="#__codelineno-46-167"></a>
<a id="__codelineno-46-168" name="__codelineno-46-168" href="#__codelineno-46-168"></a>
<a id="__codelineno-46-169" name="__codelineno-46-169" href="#__codelineno-46-169"></a>metrics:
<a id="__codelineno-46-170" name="__codelineno-46-170" href="#__codelineno-46-170"></a>
<a id="__codelineno-46-171" name="__codelineno-46-171" href="#__codelineno-46-171"></a>
<a id="__codelineno-46-172" name="__codelineno-46-172" href="#__codelineno-46-172"></a>
<a id="__codelineno-46-173" name="__codelineno-46-173" href="#__codelineno-46-173"></a>receivers: [spanmetrics]
<a id="__codelineno-46-174" name="__codelineno-46-174" href="#__codelineno-46-174"></a>
<a id="__codelineno-46-175" name="__codelineno-46-175" href="#__codelineno-46-175"></a>
<a id="__codelineno-46-176" name="__codelineno-46-176" href="#__codelineno-46-176"></a>
<a id="__codelineno-46-177" name="__codelineno-46-177" href="#__codelineno-46-177"></a>processors: []
<a id="__codelineno-46-178" name="__codelineno-46-178" href="#__codelineno-46-178"></a>
<a id="__codelineno-46-179" name="__codelineno-46-179" href="#__codelineno-46-179"></a>
<a id="__codelineno-46-180" name="__codelineno-46-180" href="#__codelineno-46-180"></a>
<a id="__codelineno-46-181" name="__codelineno-46-181" href="#__codelineno-46-181"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_10">Components<a class="headerlink" href="#components_10" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_10">Receivers<a class="headerlink" href="#receivers_10" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance and configure it to accept OTLP requests on gRPC and HTTP.</p>
<h3 id="processors_7">Processors<a class="headerlink" href="#processors_7" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/tailsamplingprocessor"><code>tail_sampling</code>√Ø¬ª¬ø</a> to sample distributed traces based on properties of the trace.</li>
</ul>
<h3 id="connectors">Connectors<a class="headerlink" href="#connectors" title="Permanent link">&para;</a></h3>
<p>Under <code>connectors</code>, we specify the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/connector/spanmetricsconnector"><code>spanmetrics</code> connector√Ø¬ª¬ø</a> to compute service metrics from spans.</p>
<h3 id="exporters_10">Exporters<a class="headerlink" href="#exporters_10" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_8">Service pipelines<a class="headerlink" href="#service-pipelines_8" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble three pipelines:</p>
<ul>
<li><code>traces</code> assembles the OTLP receiver, tail sampling processor, and <code>otlp_http</code> exporter to send sampled spans to Dynatrace.</li>
<li><code>traces/spanmetrics</code> uses the same OTLP receiver and the <code>spanmetrics</code> connector to compute service metrics from received spans, without sampling, and forwards the computed metrics to <code>metrics</code>.</li>
<li><code>metrics</code> uses the <code>transform</code>, <code>filter</code>, and <code>transform/spanmetrics</code> processors to format metrics for Dynatrace metric ingest before sending metrics to Dynatrace using the <code>otlp_http</code> exporter.</li>
</ul>
<h2 id="opentelemetry-sampling-considerations">OpenTelemetry sampling considerations<a class="headerlink" href="#opentelemetry-sampling-considerations" title="Permanent link">&para;</a></h2>
<h3 id="mixed-mode-sampling">Mixed-mode sampling<a class="headerlink" href="#mixed-mode-sampling" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry and OneAgent use incompatible approaches to sampling that should not be mixed. If a distributed trace, which may include multiple applications and services, only partially utilizes either method, it's likely to result in inconsistent results and incomplete distributed traces. Each distributed trace should be sampled by only one of the methods to ensure it's captured in its entirety.</p>
<h3 id="trace-derived-service-metrics">Trace-derived service metrics<a class="headerlink" href="#trace-derived-service-metrics" title="Permanent link">&para;</a></h3>
<p>Dynatrace trace-derived metrics are calculated from trace data after it's ingested into Dynatrace.</p>
<p>If OpenTelemetry traces are sampled, the trace-derived metrics are calculated only from the sampled subset of trace data. This means that some trace-derived metrics might be biased or incorrect.</p>
<p>For example, a probabilistic sampler that saves 5% of traffic will result in a throughput metric that shows 5% of the actual throughput. If you use OpenTelemetry tail-based sampling to also capture 100% of slow or error traces, your service metrics will not only show incorrect throughput, but will also incorrectly bias error rates and response times.</p>
<p>To mitigate this, if you want to sample OpenTelemetry traces, you should calculate service metrics before sampling and use those metrics rather than the trace-derived metrics calculated by Dynatrace. If you're using the Collector for sampling, trace-derived metrics should be calculated by the Collector before applying sampling, or by the SDK. This can be done with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/connector/spanmetricsconnector"><code>spanmetrics</code> connector√Ø¬ª¬ø</a> as shown in the example above.</p>
<h2 id="limits-and-limitations_6">Limits and limitations<a class="headerlink" href="#limits-and-limitations_6" title="Permanent link">&para;</a></h2>
<p>Data is ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP APIs</a> and is subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OpenTelemetry logs</a></li>
</ul>
<h2 id="related-topics_9">Related topics<a class="headerlink" href="#related-topics_9" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/batch" title="Configure the OpenTelemetry Collector to send data in batches to the Dynatrace backend.">Batch OTLP requests with the OpenTelemetry Collector</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/histograms" title="Configure the OpenTelemetry Collector to compute histogram summaries.">Compute histogram summaries with the OpenTelemetry Collector</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/memory" title="Configure the OpenTelemetry Collector to respect memory limits and not use excessive system resources.">Apply memory limits to the OpenTelemetry Collector</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/multi-export" title="Configure the OpenTelemetry Collector to send data to more than one backend.">Send OpenTelemetry data to multiple backends</a></li>
</ul>
<hr />
<h2 id="source-transformmd">Source: transform.md<a class="headerlink" href="#source-transformmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Transform and filter data with the OpenTelemetry Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/transform
scraped: 2026-02-16T21:31:42.344824</p>
<hr />
<h1 id="transform-and-filter-data-with-the-opentelemetry-collector">Transform and filter data with the OpenTelemetry Collector<a class="headerlink" href="#transform-and-filter-data-with-the-opentelemetry-collector" title="Permanent link">&para;</a></h1>
<h1 id="transform-and-filter-data-with-the-opentelemetry-collector_1">Transform and filter data with the OpenTelemetry Collector<a class="headerlink" href="#transform-and-filter-data-with-the-opentelemetry-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Published Aug 19, 2024</li>
</ul>
<p>The following configuration example shows how to configure a Collector instance to transform and manipulate OTLP requests, before forwarding them to Dynatrace.</p>
<p>Using the processors shown in this example (<code>filter</code> and <code>transform</code>), it is possible to streamline requests before sending them to Dynatrace and omit data possibly irrelevant to your use case, and to reduce billing costs.</p>
<h2 id="prerequisites_11">Prerequisites<a class="headerlink" href="#prerequisites_11" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor">transform√Ø¬ª¬ø</a> and <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/filterprocessor">filter√Ø¬ª¬ø</a> processors</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace OTel Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace OTel Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace OTel Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API URL</a> of your Dynatrace environment</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="How to deploy Dynatrace OTel Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_10">Demo configuration<a class="headerlink" href="#demo-configuration_10" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>receivers:
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>otlp:
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>protocols:
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a>
<a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a>grpc:
<a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a>
<a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a>
<a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a>
<a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a>
<a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a>
<a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a>
<a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a>http:
<a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a>
<a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a>
<a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a>
<a id="__codelineno-47-25" name="__codelineno-47-25" href="#__codelineno-47-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-47-26" name="__codelineno-47-26" href="#__codelineno-47-26"></a>
<a id="__codelineno-47-27" name="__codelineno-47-27" href="#__codelineno-47-27"></a>
<a id="__codelineno-47-28" name="__codelineno-47-28" href="#__codelineno-47-28"></a>
<a id="__codelineno-47-29" name="__codelineno-47-29" href="#__codelineno-47-29"></a>processors:
<a id="__codelineno-47-30" name="__codelineno-47-30" href="#__codelineno-47-30"></a>
<a id="__codelineno-47-31" name="__codelineno-47-31" href="#__codelineno-47-31"></a>
<a id="__codelineno-47-32" name="__codelineno-47-32" href="#__codelineno-47-32"></a>
<a id="__codelineno-47-33" name="__codelineno-47-33" href="#__codelineno-47-33"></a>transform:
<a id="__codelineno-47-34" name="__codelineno-47-34" href="#__codelineno-47-34"></a>
<a id="__codelineno-47-35" name="__codelineno-47-35" href="#__codelineno-47-35"></a>
<a id="__codelineno-47-36" name="__codelineno-47-36" href="#__codelineno-47-36"></a>
<a id="__codelineno-47-37" name="__codelineno-47-37" href="#__codelineno-47-37"></a>trace_statements:
<a id="__codelineno-47-38" name="__codelineno-47-38" href="#__codelineno-47-38"></a>
<a id="__codelineno-47-39" name="__codelineno-47-39" href="#__codelineno-47-39"></a>
<a id="__codelineno-47-40" name="__codelineno-47-40" href="#__codelineno-47-40"></a>
<a id="__codelineno-47-41" name="__codelineno-47-41" href="#__codelineno-47-41"></a>- context: resource
<a id="__codelineno-47-42" name="__codelineno-47-42" href="#__codelineno-47-42"></a>
<a id="__codelineno-47-43" name="__codelineno-47-43" href="#__codelineno-47-43"></a>
<a id="__codelineno-47-44" name="__codelineno-47-44" href="#__codelineno-47-44"></a>
<a id="__codelineno-47-45" name="__codelineno-47-45" href="#__codelineno-47-45"></a>statements:
<a id="__codelineno-47-46" name="__codelineno-47-46" href="#__codelineno-47-46"></a>
<a id="__codelineno-47-47" name="__codelineno-47-47" href="#__codelineno-47-47"></a>
<a id="__codelineno-47-48" name="__codelineno-47-48" href="#__codelineno-47-48"></a>
<a id="__codelineno-47-49" name="__codelineno-47-49" href="#__codelineno-47-49"></a># Only keep a certain set of resource attributes
<a id="__codelineno-47-50" name="__codelineno-47-50" href="#__codelineno-47-50"></a>
<a id="__codelineno-47-51" name="__codelineno-47-51" href="#__codelineno-47-51"></a>
<a id="__codelineno-47-52" name="__codelineno-47-52" href="#__codelineno-47-52"></a>
<a id="__codelineno-47-53" name="__codelineno-47-53" href="#__codelineno-47-53"></a>- keep_matching_keys(attributes, &quot;^(aaa|bbb|ccc).*&quot;)
<a id="__codelineno-47-54" name="__codelineno-47-54" href="#__codelineno-47-54"></a>
<a id="__codelineno-47-55" name="__codelineno-47-55" href="#__codelineno-47-55"></a>
<a id="__codelineno-47-56" name="__codelineno-47-56" href="#__codelineno-47-56"></a>
<a id="__codelineno-47-57" name="__codelineno-47-57" href="#__codelineno-47-57"></a>- context: span
<a id="__codelineno-47-58" name="__codelineno-47-58" href="#__codelineno-47-58"></a>
<a id="__codelineno-47-59" name="__codelineno-47-59" href="#__codelineno-47-59"></a>
<a id="__codelineno-47-60" name="__codelineno-47-60" href="#__codelineno-47-60"></a>
<a id="__codelineno-47-61" name="__codelineno-47-61" href="#__codelineno-47-61"></a>statements:
<a id="__codelineno-47-62" name="__codelineno-47-62" href="#__codelineno-47-62"></a>
<a id="__codelineno-47-63" name="__codelineno-47-63" href="#__codelineno-47-63"></a>
<a id="__codelineno-47-64" name="__codelineno-47-64" href="#__codelineno-47-64"></a>
<a id="__codelineno-47-65" name="__codelineno-47-65" href="#__codelineno-47-65"></a># Only keep a certain set of span attributes
<a id="__codelineno-47-66" name="__codelineno-47-66" href="#__codelineno-47-66"></a>
<a id="__codelineno-47-67" name="__codelineno-47-67" href="#__codelineno-47-67"></a>
<a id="__codelineno-47-68" name="__codelineno-47-68" href="#__codelineno-47-68"></a>
<a id="__codelineno-47-69" name="__codelineno-47-69" href="#__codelineno-47-69"></a>- keep_matching_keys(attributes, &quot;(^xyz.pqr$)|(^(aaa|bbb|ccc).*)&quot;)
<a id="__codelineno-47-70" name="__codelineno-47-70" href="#__codelineno-47-70"></a>
<a id="__codelineno-47-71" name="__codelineno-47-71" href="#__codelineno-47-71"></a>
<a id="__codelineno-47-72" name="__codelineno-47-72" href="#__codelineno-47-72"></a>
<a id="__codelineno-47-73" name="__codelineno-47-73" href="#__codelineno-47-73"></a># Set a static key
<a id="__codelineno-47-74" name="__codelineno-47-74" href="#__codelineno-47-74"></a>
<a id="__codelineno-47-75" name="__codelineno-47-75" href="#__codelineno-47-75"></a>
<a id="__codelineno-47-76" name="__codelineno-47-76" href="#__codelineno-47-76"></a>
<a id="__codelineno-47-77" name="__codelineno-47-77" href="#__codelineno-47-77"></a>- set(attributes[&quot;svc.marker&quot;], &quot;purchasing&quot;)
<a id="__codelineno-47-78" name="__codelineno-47-78" href="#__codelineno-47-78"></a>
<a id="__codelineno-47-79" name="__codelineno-47-79" href="#__codelineno-47-79"></a>
<a id="__codelineno-47-80" name="__codelineno-47-80" href="#__codelineno-47-80"></a>
<a id="__codelineno-47-81" name="__codelineno-47-81" href="#__codelineno-47-81"></a># Delete a specific key
<a id="__codelineno-47-82" name="__codelineno-47-82" href="#__codelineno-47-82"></a>
<a id="__codelineno-47-83" name="__codelineno-47-83" href="#__codelineno-47-83"></a>
<a id="__codelineno-47-84" name="__codelineno-47-84" href="#__codelineno-47-84"></a>
<a id="__codelineno-47-85" name="__codelineno-47-85" href="#__codelineno-47-85"></a>- delete_key(attributes, &quot;message&quot;)
<a id="__codelineno-47-86" name="__codelineno-47-86" href="#__codelineno-47-86"></a>
<a id="__codelineno-47-87" name="__codelineno-47-87" href="#__codelineno-47-87"></a>
<a id="__codelineno-47-88" name="__codelineno-47-88" href="#__codelineno-47-88"></a>
<a id="__codelineno-47-89" name="__codelineno-47-89" href="#__codelineno-47-89"></a># Rewrite a key
<a id="__codelineno-47-90" name="__codelineno-47-90" href="#__codelineno-47-90"></a>
<a id="__codelineno-47-91" name="__codelineno-47-91" href="#__codelineno-47-91"></a>
<a id="__codelineno-47-92" name="__codelineno-47-92" href="#__codelineno-47-92"></a>
<a id="__codelineno-47-93" name="__codelineno-47-93" href="#__codelineno-47-93"></a>- set(attributes[&quot;purchase.id&quot;], ConvertCase(attributes[&quot;purchase.id&quot;], &quot;upper&quot;))
<a id="__codelineno-47-94" name="__codelineno-47-94" href="#__codelineno-47-94"></a>
<a id="__codelineno-47-95" name="__codelineno-47-95" href="#__codelineno-47-95"></a>
<a id="__codelineno-47-96" name="__codelineno-47-96" href="#__codelineno-47-96"></a>
<a id="__codelineno-47-97" name="__codelineno-47-97" href="#__codelineno-47-97"></a># Apply regex replacement
<a id="__codelineno-47-98" name="__codelineno-47-98" href="#__codelineno-47-98"></a>
<a id="__codelineno-47-99" name="__codelineno-47-99" href="#__codelineno-47-99"></a>
<a id="__codelineno-47-100" name="__codelineno-47-100" href="#__codelineno-47-100"></a>
<a id="__codelineno-47-101" name="__codelineno-47-101" href="#__codelineno-47-101"></a>- replace_pattern(name, &quot;^.*(DataSubmission-\d+).*$&quot;, &quot;$$1&quot;)
<a id="__codelineno-47-102" name="__codelineno-47-102" href="#__codelineno-47-102"></a>
<a id="__codelineno-47-103" name="__codelineno-47-103" href="#__codelineno-47-103"></a>
<a id="__codelineno-47-104" name="__codelineno-47-104" href="#__codelineno-47-104"></a>
<a id="__codelineno-47-105" name="__codelineno-47-105" href="#__codelineno-47-105"></a>metric_statements:
<a id="__codelineno-47-106" name="__codelineno-47-106" href="#__codelineno-47-106"></a>
<a id="__codelineno-47-107" name="__codelineno-47-107" href="#__codelineno-47-107"></a>
<a id="__codelineno-47-108" name="__codelineno-47-108" href="#__codelineno-47-108"></a>
<a id="__codelineno-47-109" name="__codelineno-47-109" href="#__codelineno-47-109"></a>- context: metric
<a id="__codelineno-47-110" name="__codelineno-47-110" href="#__codelineno-47-110"></a>
<a id="__codelineno-47-111" name="__codelineno-47-111" href="#__codelineno-47-111"></a>
<a id="__codelineno-47-112" name="__codelineno-47-112" href="#__codelineno-47-112"></a>
<a id="__codelineno-47-113" name="__codelineno-47-113" href="#__codelineno-47-113"></a>statements:
<a id="__codelineno-47-114" name="__codelineno-47-114" href="#__codelineno-47-114"></a>
<a id="__codelineno-47-115" name="__codelineno-47-115" href="#__codelineno-47-115"></a>
<a id="__codelineno-47-116" name="__codelineno-47-116" href="#__codelineno-47-116"></a>
<a id="__codelineno-47-117" name="__codelineno-47-117" href="#__codelineno-47-117"></a># Rename all metrics containing &#39;_bad&#39; suffix in their name with `_invalid`
<a id="__codelineno-47-118" name="__codelineno-47-118" href="#__codelineno-47-118"></a>
<a id="__codelineno-47-119" name="__codelineno-47-119" href="#__codelineno-47-119"></a>
<a id="__codelineno-47-120" name="__codelineno-47-120" href="#__codelineno-47-120"></a>
<a id="__codelineno-47-121" name="__codelineno-47-121" href="#__codelineno-47-121"></a>- replace_pattern(name, &quot;(.*)_bad$&quot;, &quot;$${1}_invalid&quot;)
<a id="__codelineno-47-122" name="__codelineno-47-122" href="#__codelineno-47-122"></a>
<a id="__codelineno-47-123" name="__codelineno-47-123" href="#__codelineno-47-123"></a>
<a id="__codelineno-47-124" name="__codelineno-47-124" href="#__codelineno-47-124"></a>
<a id="__codelineno-47-125" name="__codelineno-47-125" href="#__codelineno-47-125"></a>filter:
<a id="__codelineno-47-126" name="__codelineno-47-126" href="#__codelineno-47-126"></a>
<a id="__codelineno-47-127" name="__codelineno-47-127" href="#__codelineno-47-127"></a>
<a id="__codelineno-47-128" name="__codelineno-47-128" href="#__codelineno-47-128"></a>
<a id="__codelineno-47-129" name="__codelineno-47-129" href="#__codelineno-47-129"></a>error_mode: ignore
<a id="__codelineno-47-130" name="__codelineno-47-130" href="#__codelineno-47-130"></a>
<a id="__codelineno-47-131" name="__codelineno-47-131" href="#__codelineno-47-131"></a>
<a id="__codelineno-47-132" name="__codelineno-47-132" href="#__codelineno-47-132"></a>
<a id="__codelineno-47-133" name="__codelineno-47-133" href="#__codelineno-47-133"></a>traces:
<a id="__codelineno-47-134" name="__codelineno-47-134" href="#__codelineno-47-134"></a>
<a id="__codelineno-47-135" name="__codelineno-47-135" href="#__codelineno-47-135"></a>
<a id="__codelineno-47-136" name="__codelineno-47-136" href="#__codelineno-47-136"></a>
<a id="__codelineno-47-137" name="__codelineno-47-137" href="#__codelineno-47-137"></a>span:
<a id="__codelineno-47-138" name="__codelineno-47-138" href="#__codelineno-47-138"></a>
<a id="__codelineno-47-139" name="__codelineno-47-139" href="#__codelineno-47-139"></a>
<a id="__codelineno-47-140" name="__codelineno-47-140" href="#__codelineno-47-140"></a>
<a id="__codelineno-47-141" name="__codelineno-47-141" href="#__codelineno-47-141"></a># Filter spans with resource attributes matching the provided regular expression
<a id="__codelineno-47-142" name="__codelineno-47-142" href="#__codelineno-47-142"></a>
<a id="__codelineno-47-143" name="__codelineno-47-143" href="#__codelineno-47-143"></a>
<a id="__codelineno-47-144" name="__codelineno-47-144" href="#__codelineno-47-144"></a>
<a id="__codelineno-47-145" name="__codelineno-47-145" href="#__codelineno-47-145"></a>- IsMatch(resource.attributes[&quot;k8s.pod.name&quot;], &quot;^my-pod-name.*&quot;)
<a id="__codelineno-47-146" name="__codelineno-47-146" href="#__codelineno-47-146"></a>
<a id="__codelineno-47-147" name="__codelineno-47-147" href="#__codelineno-47-147"></a>
<a id="__codelineno-47-148" name="__codelineno-47-148" href="#__codelineno-47-148"></a>
<a id="__codelineno-47-149" name="__codelineno-47-149" href="#__codelineno-47-149"></a>metrics:
<a id="__codelineno-47-150" name="__codelineno-47-150" href="#__codelineno-47-150"></a>
<a id="__codelineno-47-151" name="__codelineno-47-151" href="#__codelineno-47-151"></a>
<a id="__codelineno-47-152" name="__codelineno-47-152" href="#__codelineno-47-152"></a>
<a id="__codelineno-47-153" name="__codelineno-47-153" href="#__codelineno-47-153"></a>metric:
<a id="__codelineno-47-154" name="__codelineno-47-154" href="#__codelineno-47-154"></a>
<a id="__codelineno-47-155" name="__codelineno-47-155" href="#__codelineno-47-155"></a>
<a id="__codelineno-47-156" name="__codelineno-47-156" href="#__codelineno-47-156"></a>
<a id="__codelineno-47-157" name="__codelineno-47-157" href="#__codelineno-47-157"></a># Filter metrics which contain at least one data point with a &quot;bad.metric&quot; attribute
<a id="__codelineno-47-158" name="__codelineno-47-158" href="#__codelineno-47-158"></a>
<a id="__codelineno-47-159" name="__codelineno-47-159" href="#__codelineno-47-159"></a>
<a id="__codelineno-47-160" name="__codelineno-47-160" href="#__codelineno-47-160"></a>
<a id="__codelineno-47-161" name="__codelineno-47-161" href="#__codelineno-47-161"></a>- &#39;HasAttrKeyOnDatapoint(&quot;bad.metric&quot;)&#39;
<a id="__codelineno-47-162" name="__codelineno-47-162" href="#__codelineno-47-162"></a>
<a id="__codelineno-47-163" name="__codelineno-47-163" href="#__codelineno-47-163"></a>
<a id="__codelineno-47-164" name="__codelineno-47-164" href="#__codelineno-47-164"></a>
<a id="__codelineno-47-165" name="__codelineno-47-165" href="#__codelineno-47-165"></a>logs:
<a id="__codelineno-47-166" name="__codelineno-47-166" href="#__codelineno-47-166"></a>
<a id="__codelineno-47-167" name="__codelineno-47-167" href="#__codelineno-47-167"></a>
<a id="__codelineno-47-168" name="__codelineno-47-168" href="#__codelineno-47-168"></a>
<a id="__codelineno-47-169" name="__codelineno-47-169" href="#__codelineno-47-169"></a>log_record:
<a id="__codelineno-47-170" name="__codelineno-47-170" href="#__codelineno-47-170"></a>
<a id="__codelineno-47-171" name="__codelineno-47-171" href="#__codelineno-47-171"></a>
<a id="__codelineno-47-172" name="__codelineno-47-172" href="#__codelineno-47-172"></a>
<a id="__codelineno-47-173" name="__codelineno-47-173" href="#__codelineno-47-173"></a># Filter logs with resource attributes matching the configured names
<a id="__codelineno-47-174" name="__codelineno-47-174" href="#__codelineno-47-174"></a>
<a id="__codelineno-47-175" name="__codelineno-47-175" href="#__codelineno-47-175"></a>
<a id="__codelineno-47-176" name="__codelineno-47-176" href="#__codelineno-47-176"></a>
<a id="__codelineno-47-177" name="__codelineno-47-177" href="#__codelineno-47-177"></a>- resource.attributes[&quot;service.name&quot;] == &quot;service1&quot;
<a id="__codelineno-47-178" name="__codelineno-47-178" href="#__codelineno-47-178"></a>
<a id="__codelineno-47-179" name="__codelineno-47-179" href="#__codelineno-47-179"></a>
<a id="__codelineno-47-180" name="__codelineno-47-180" href="#__codelineno-47-180"></a>
<a id="__codelineno-47-181" name="__codelineno-47-181" href="#__codelineno-47-181"></a>- resource.attributes[&quot;service.name&quot;] == &quot;service2&quot;
<a id="__codelineno-47-182" name="__codelineno-47-182" href="#__codelineno-47-182"></a>
<a id="__codelineno-47-183" name="__codelineno-47-183" href="#__codelineno-47-183"></a>
<a id="__codelineno-47-184" name="__codelineno-47-184" href="#__codelineno-47-184"></a>
<a id="__codelineno-47-185" name="__codelineno-47-185" href="#__codelineno-47-185"></a>exporters:
<a id="__codelineno-47-186" name="__codelineno-47-186" href="#__codelineno-47-186"></a>
<a id="__codelineno-47-187" name="__codelineno-47-187" href="#__codelineno-47-187"></a>
<a id="__codelineno-47-188" name="__codelineno-47-188" href="#__codelineno-47-188"></a>
<a id="__codelineno-47-189" name="__codelineno-47-189" href="#__codelineno-47-189"></a>otlp_http:
<a id="__codelineno-47-190" name="__codelineno-47-190" href="#__codelineno-47-190"></a>
<a id="__codelineno-47-191" name="__codelineno-47-191" href="#__codelineno-47-191"></a>
<a id="__codelineno-47-192" name="__codelineno-47-192" href="#__codelineno-47-192"></a>
<a id="__codelineno-47-193" name="__codelineno-47-193" href="#__codelineno-47-193"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-47-194" name="__codelineno-47-194" href="#__codelineno-47-194"></a>
<a id="__codelineno-47-195" name="__codelineno-47-195" href="#__codelineno-47-195"></a>
<a id="__codelineno-47-196" name="__codelineno-47-196" href="#__codelineno-47-196"></a>
<a id="__codelineno-47-197" name="__codelineno-47-197" href="#__codelineno-47-197"></a>headers:
<a id="__codelineno-47-198" name="__codelineno-47-198" href="#__codelineno-47-198"></a>
<a id="__codelineno-47-199" name="__codelineno-47-199" href="#__codelineno-47-199"></a>
<a id="__codelineno-47-200" name="__codelineno-47-200" href="#__codelineno-47-200"></a>
<a id="__codelineno-47-201" name="__codelineno-47-201" href="#__codelineno-47-201"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-47-202" name="__codelineno-47-202" href="#__codelineno-47-202"></a>
<a id="__codelineno-47-203" name="__codelineno-47-203" href="#__codelineno-47-203"></a>
<a id="__codelineno-47-204" name="__codelineno-47-204" href="#__codelineno-47-204"></a>
<a id="__codelineno-47-205" name="__codelineno-47-205" href="#__codelineno-47-205"></a>service:
<a id="__codelineno-47-206" name="__codelineno-47-206" href="#__codelineno-47-206"></a>
<a id="__codelineno-47-207" name="__codelineno-47-207" href="#__codelineno-47-207"></a>
<a id="__codelineno-47-208" name="__codelineno-47-208" href="#__codelineno-47-208"></a>
<a id="__codelineno-47-209" name="__codelineno-47-209" href="#__codelineno-47-209"></a>pipelines:
<a id="__codelineno-47-210" name="__codelineno-47-210" href="#__codelineno-47-210"></a>
<a id="__codelineno-47-211" name="__codelineno-47-211" href="#__codelineno-47-211"></a>
<a id="__codelineno-47-212" name="__codelineno-47-212" href="#__codelineno-47-212"></a>
<a id="__codelineno-47-213" name="__codelineno-47-213" href="#__codelineno-47-213"></a>traces:
<a id="__codelineno-47-214" name="__codelineno-47-214" href="#__codelineno-47-214"></a>
<a id="__codelineno-47-215" name="__codelineno-47-215" href="#__codelineno-47-215"></a>
<a id="__codelineno-47-216" name="__codelineno-47-216" href="#__codelineno-47-216"></a>
<a id="__codelineno-47-217" name="__codelineno-47-217" href="#__codelineno-47-217"></a>receivers: [otlp]
<a id="__codelineno-47-218" name="__codelineno-47-218" href="#__codelineno-47-218"></a>
<a id="__codelineno-47-219" name="__codelineno-47-219" href="#__codelineno-47-219"></a>
<a id="__codelineno-47-220" name="__codelineno-47-220" href="#__codelineno-47-220"></a>
<a id="__codelineno-47-221" name="__codelineno-47-221" href="#__codelineno-47-221"></a>processors: [filter,transform]
<a id="__codelineno-47-222" name="__codelineno-47-222" href="#__codelineno-47-222"></a>
<a id="__codelineno-47-223" name="__codelineno-47-223" href="#__codelineno-47-223"></a>
<a id="__codelineno-47-224" name="__codelineno-47-224" href="#__codelineno-47-224"></a>
<a id="__codelineno-47-225" name="__codelineno-47-225" href="#__codelineno-47-225"></a>exporters: [otlp_http]
<a id="__codelineno-47-226" name="__codelineno-47-226" href="#__codelineno-47-226"></a>
<a id="__codelineno-47-227" name="__codelineno-47-227" href="#__codelineno-47-227"></a>
<a id="__codelineno-47-228" name="__codelineno-47-228" href="#__codelineno-47-228"></a>
<a id="__codelineno-47-229" name="__codelineno-47-229" href="#__codelineno-47-229"></a>metrics:
<a id="__codelineno-47-230" name="__codelineno-47-230" href="#__codelineno-47-230"></a>
<a id="__codelineno-47-231" name="__codelineno-47-231" href="#__codelineno-47-231"></a>
<a id="__codelineno-47-232" name="__codelineno-47-232" href="#__codelineno-47-232"></a>
<a id="__codelineno-47-233" name="__codelineno-47-233" href="#__codelineno-47-233"></a>receivers: [otlp]
<a id="__codelineno-47-234" name="__codelineno-47-234" href="#__codelineno-47-234"></a>
<a id="__codelineno-47-235" name="__codelineno-47-235" href="#__codelineno-47-235"></a>
<a id="__codelineno-47-236" name="__codelineno-47-236" href="#__codelineno-47-236"></a>
<a id="__codelineno-47-237" name="__codelineno-47-237" href="#__codelineno-47-237"></a>processors: [filter]
<a id="__codelineno-47-238" name="__codelineno-47-238" href="#__codelineno-47-238"></a>
<a id="__codelineno-47-239" name="__codelineno-47-239" href="#__codelineno-47-239"></a>
<a id="__codelineno-47-240" name="__codelineno-47-240" href="#__codelineno-47-240"></a>
<a id="__codelineno-47-241" name="__codelineno-47-241" href="#__codelineno-47-241"></a>exporters: [otlp_http]
<a id="__codelineno-47-242" name="__codelineno-47-242" href="#__codelineno-47-242"></a>
<a id="__codelineno-47-243" name="__codelineno-47-243" href="#__codelineno-47-243"></a>
<a id="__codelineno-47-244" name="__codelineno-47-244" href="#__codelineno-47-244"></a>
<a id="__codelineno-47-245" name="__codelineno-47-245" href="#__codelineno-47-245"></a>logs:
<a id="__codelineno-47-246" name="__codelineno-47-246" href="#__codelineno-47-246"></a>
<a id="__codelineno-47-247" name="__codelineno-47-247" href="#__codelineno-47-247"></a>
<a id="__codelineno-47-248" name="__codelineno-47-248" href="#__codelineno-47-248"></a>
<a id="__codelineno-47-249" name="__codelineno-47-249" href="#__codelineno-47-249"></a>receivers: [otlp]
<a id="__codelineno-47-250" name="__codelineno-47-250" href="#__codelineno-47-250"></a>
<a id="__codelineno-47-251" name="__codelineno-47-251" href="#__codelineno-47-251"></a>
<a id="__codelineno-47-252" name="__codelineno-47-252" href="#__codelineno-47-252"></a>
<a id="__codelineno-47-253" name="__codelineno-47-253" href="#__codelineno-47-253"></a>processors: [filter]
<a id="__codelineno-47-254" name="__codelineno-47-254" href="#__codelineno-47-254"></a>
<a id="__codelineno-47-255" name="__codelineno-47-255" href="#__codelineno-47-255"></a>
<a id="__codelineno-47-256" name="__codelineno-47-256" href="#__codelineno-47-256"></a>
<a id="__codelineno-47-257" name="__codelineno-47-257" href="#__codelineno-47-257"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="How to configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_11">Components<a class="headerlink" href="#components_11" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receiver">Receiver<a class="headerlink" href="#receiver" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance.</p>
<p>This is for demonstration purposes. You can specify any other valid receiver here (for example, <code>zipkin</code>).</p>
<h3 id="processor">Processor<a class="headerlink" href="#processor" title="Permanent link">&para;</a></h3>
<h4 id="transform">Transform<a class="headerlink" href="#transform" title="Permanent link">&para;</a></h4>
<p>Under <code>processors</code>, we specify the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor"><code>transform</code> processor√Ø¬ª¬ø</a> with a set of different attribute modification statements. <code>context</code> indicates the scope to which the statements should apply (here, <code>resource</code> for resource attributes, <code>span</code> for span attributes, and <code>metric</code> for metrics).</p>
<p>See the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/transformprocessor/README.md">OpenTelemetry documentation of the transform processor√Ø¬ª¬ø</a> for more details on the individual configuration options.</p>
<p>The sample configuration above uses the following statements:</p>
<p>Statement</p>
<p>Description</p>
<p><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#keep_matching_keys"><code>keep_matching_keys</code>√Ø¬ª¬ø</a></p>
<p>Evaluates the attribute key names and only keeps those, whose names match the given regular expressions of <code>^(aaa|bbb|ccc).*</code> for resource attributes and <code>(^xyz.pqr$)|(^(aaa|bbb|ccc).*)</code> for span attributes.</p>
<p><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#set"><code>set</code>√Ø¬ª¬ø</a></p>
<p>Adds/changes the following two span attributes:</p>
<ul>
<li><code>svc.marker</code>, with the static value <code>purchasing</code></li>
<li><code>purchase.id</code>, coverting its value to uppercase, using <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#convertcase"><code>ConvertCase</code>√Ø¬ª¬ø</a></li>
</ul>
<p><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#delete_key"><code>delete_key</code>√Ø¬ª¬ø</a></p>
<p>Deletes attributes named <code>message</code>.</p>
<p><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#replace_pattern"><code>replace_pattern</code>√Ø¬ª¬ø</a></p>
<p>Matches a string against a given regular expression and perform a string substitution on all matching entries.</p>
<p>In our example, we first use it for traces to match the name against the regular expression <code>^.*(DataSubmission-\d+).*$</code> and replace its content with the first capture group (<code>$$1</code>) of our expression. This essentially means, we search strings for <code>DataSubmission</code> suffixed by a number and √¢¬Ä¬î if found √¢¬Ä¬î only keep the value of the found match.</p>
<p>We also use the function for metrics with the regular expression <code>(.*)_bad$</code>, to change the <code>_bad</code> suffix to <code>_invalid</code>.</p>
<h4 id="filter">Filter<a class="headerlink" href="#filter" title="Permanent link">&para;</a></h4>
<p>In addition, we also configure an instance of the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/filterprocessor"><code>filter</code> processor√Ø¬ª¬ø</a>, to filter signal based on the following criteria:</p>
<p>Signal</p>
<p>Description</p>
<p>Traces</p>
<p>Uses <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/pkg/ottl/ottlfuncs/README.md#ismatch"><code>IsMatch</code>√Ø¬ª¬ø</a> to match the name of resource attributes against the regular expression <code>^my-pod-name.*</code>, dropping spans with attributes whose names start with <code>my-pod-name</code>.</p>
<p>Metrics</p>
<p>Uses <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/filterprocessor/README.md#HasAttrKeyOnDatapoint"><code>HasAttrKeyOnDatapoint</code>√Ø¬ª¬ø</a> to evalute if datapoints have attributes with the name <code>bad.metric</code>.</p>
<p>Logs</p>
<p>Uses a strict string match of the resource attribute <code>service.name</code> against the strings <code>service1</code> and <code>service2</code>.</p>
<p>See the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/filterprocessor/README.md">OpenTelemetry documentation of the filter processor√Ø¬ª¬ø</a> for more details on the individual configuration options.</p>
<h3 id="exporter">Exporter<a class="headerlink" href="#exporter" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipeline_2">Service pipeline<a class="headerlink" href="#service-pipeline_2" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver, processor, and exporter objects into a traces pipeline, which accepts OTLP traces on the configured endpoints and transforms trace attributes according to the configured rules, before forwarding everything to Dynatrace using the exporter.</p>
<h2 id="limits-and-limitations_7">Limits and limitations<a class="headerlink" href="#limits-and-limitations_7" title="Permanent link">&para;</a></h2>
<p>Data is ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP APIs</a> and is subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OpenTelemetry logs</a></li>
</ul>
<h2 id="related-topics_10">Related topics<a class="headerlink" href="#related-topics_10" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-zipkinmd">Source: zipkin.md<a class="headerlink" href="#source-zipkinmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest data from Zipkin
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/zipkin
scraped: 2026-02-15T09:12:58.667496</p>
<hr />
<h1 id="ingest-data-from-zipkin">Ingest data from Zipkin<a class="headerlink" href="#ingest-data-from-zipkin" title="Permanent link">&para;</a></h1>
<h1 id="ingest-data-from-zipkin_1">Ingest data from Zipkin<a class="headerlink" href="#ingest-data-from-zipkin_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Published Oct 11, 2023</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance to accept Zipkin data, transform it to OTLP, and send it to the Dynatrace backend.</p>
<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h2>
<h3 id="b3-requirements">B3 requirements<a class="headerlink" href="#b3-requirements" title="Permanent link">&para;</a></h3>
<p>Pay attention to the B3 requirements, to avoid having spans being dropped because of shared and duplicated span identifiers. See the <a href="https://opentelemetry.io/docs/specs/otel/context/api-propagators/#b3-requirements">propagator specification√Ø¬ª¬ø</a> for more details.</p>
<p>For example, if you are using <a href="https://cloud.spring.io/spring-cloud-sleuth/2.1.x/multi/multi__propagation.html#_extracting_a_propagated_context">Spring Code Sleuth√Ø¬ª¬ø</a>, you can use the following configuration setting to disable span sharing:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>spring:
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>sleuth:
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>supports-join: false
</code></pre></div>
<h3 id="single-collector-routing">Single Collector routing<a class="headerlink" href="#single-collector-routing" title="Permanent link">&para;</a></h3>
<p>Make sure to route all related Zipkin/B3 spans via the same Collector instance, to guarantee full ingestion. If you ingest some spans using OneAgent alone, they may not be properly linked and not show up as connected to your Zipkin spans.</p>
<h2 id="prerequisites_12">Prerequisites<a class="headerlink" href="#prerequisites_12" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/zipkinreceiver">Zipkin receiver√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_11">Demo configuration<a class="headerlink" href="#demo-configuration_11" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>receivers:
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>zipkin:
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a>
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>exporters:
<a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a>
<a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a>
<a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a>
<a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a>otlp_http:
<a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a>
<a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a>
<a id="__codelineno-49-16" name="__codelineno-49-16" href="#__codelineno-49-16"></a>
<a id="__codelineno-49-17" name="__codelineno-49-17" href="#__codelineno-49-17"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-49-18" name="__codelineno-49-18" href="#__codelineno-49-18"></a>
<a id="__codelineno-49-19" name="__codelineno-49-19" href="#__codelineno-49-19"></a>
<a id="__codelineno-49-20" name="__codelineno-49-20" href="#__codelineno-49-20"></a>
<a id="__codelineno-49-21" name="__codelineno-49-21" href="#__codelineno-49-21"></a>headers:
<a id="__codelineno-49-22" name="__codelineno-49-22" href="#__codelineno-49-22"></a>
<a id="__codelineno-49-23" name="__codelineno-49-23" href="#__codelineno-49-23"></a>
<a id="__codelineno-49-24" name="__codelineno-49-24" href="#__codelineno-49-24"></a>
<a id="__codelineno-49-25" name="__codelineno-49-25" href="#__codelineno-49-25"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-49-26" name="__codelineno-49-26" href="#__codelineno-49-26"></a>
<a id="__codelineno-49-27" name="__codelineno-49-27" href="#__codelineno-49-27"></a>
<a id="__codelineno-49-28" name="__codelineno-49-28" href="#__codelineno-49-28"></a>
<a id="__codelineno-49-29" name="__codelineno-49-29" href="#__codelineno-49-29"></a>service:
<a id="__codelineno-49-30" name="__codelineno-49-30" href="#__codelineno-49-30"></a>
<a id="__codelineno-49-31" name="__codelineno-49-31" href="#__codelineno-49-31"></a>
<a id="__codelineno-49-32" name="__codelineno-49-32" href="#__codelineno-49-32"></a>
<a id="__codelineno-49-33" name="__codelineno-49-33" href="#__codelineno-49-33"></a>pipelines:
<a id="__codelineno-49-34" name="__codelineno-49-34" href="#__codelineno-49-34"></a>
<a id="__codelineno-49-35" name="__codelineno-49-35" href="#__codelineno-49-35"></a>
<a id="__codelineno-49-36" name="__codelineno-49-36" href="#__codelineno-49-36"></a>
<a id="__codelineno-49-37" name="__codelineno-49-37" href="#__codelineno-49-37"></a>traces:
<a id="__codelineno-49-38" name="__codelineno-49-38" href="#__codelineno-49-38"></a>
<a id="__codelineno-49-39" name="__codelineno-49-39" href="#__codelineno-49-39"></a>
<a id="__codelineno-49-40" name="__codelineno-49-40" href="#__codelineno-49-40"></a>
<a id="__codelineno-49-41" name="__codelineno-49-41" href="#__codelineno-49-41"></a>receivers: [zipkin]
<a id="__codelineno-49-42" name="__codelineno-49-42" href="#__codelineno-49-42"></a>
<a id="__codelineno-49-43" name="__codelineno-49-43" href="#__codelineno-49-43"></a>
<a id="__codelineno-49-44" name="__codelineno-49-44" href="#__codelineno-49-44"></a>
<a id="__codelineno-49-45" name="__codelineno-49-45" href="#__codelineno-49-45"></a>processors: []
<a id="__codelineno-49-46" name="__codelineno-49-46" href="#__codelineno-49-46"></a>
<a id="__codelineno-49-47" name="__codelineno-49-47" href="#__codelineno-49-47"></a>
<a id="__codelineno-49-48" name="__codelineno-49-48" href="#__codelineno-49-48"></a>
<a id="__codelineno-49-49" name="__codelineno-49-49" href="#__codelineno-49-49"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_12">Components<a class="headerlink" href="#components_12" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_11">Receivers<a class="headerlink" href="#receivers_11" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the <code>zipkin</code> receiver as active receiver component for our Collector instance.</p>
<p>The Zipkin receiver can be customized with <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/zipkinreceiver">a few more attributes√Ø¬ª¬ø</a>, which we leave with their default values in our example.</p>
<h3 id="exporters_11">Exporters<a class="headerlink" href="#exporters_11" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_9">Service pipelines<a class="headerlink" href="#service-pipelines_9" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we eventually assemble our receiver and exporter objects into a traces pipeline, which will handle our Zipkin transformation to OTLP.</p>
<h2 id="related-topics_11">Related topics<a class="headerlink" href="#related-topics_11" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich from Kubernetes</a></li>
</ul>
<hr />
<h2 id="source-use-casesmd">Source: use-cases.md<a class="headerlink" href="#source-use-casesmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: OpenTelemetry Collector use cases
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases
scraped: 2026-02-16T21:32:26.503593</p>
<hr />
<h1 id="opentelemetry-collector-use-cases">OpenTelemetry Collector use cases<a class="headerlink" href="#opentelemetry-collector-use-cases" title="Permanent link">&para;</a></h1>
<h1 id="opentelemetry-collector-use-cases_1">OpenTelemetry Collector use cases<a class="headerlink" href="#opentelemetry-collector-use-cases_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Dec 09, 2025</li>
</ul>
<h2 id="recommended-configurations">Recommended configurations<a class="headerlink" href="#recommended-configurations" title="Permanent link">&para;</a></h2>
<p>When using the Collector, we recommend using the following features in the basic configuration, in addition to components specific to your use case.</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/batch" title="Configure the OpenTelemetry Collector to send data in batches to the Dynatrace backend.">Batching</a>√¢¬Ä¬îto improve network performance and throughput</li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/memory" title="Configure the OpenTelemetry Collector to respect memory limits and not use excessive system resources.">Memory Limitation</a>√¢¬Ä¬îto avoid memory allocation related issues</li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Kubernetes Enrichment</a>√¢¬Ä¬îto include Kubernetes-specific information in your requests and support data correlation in the Dynatrace backend</li>
</ul>
<h2 id="use-cases">Use cases<a class="headerlink" href="#use-cases" title="Permanent link">&para;</a></h2>
<p>[### Batching</p>
<p>Configure the OpenTelemetry Collector to send data in batches to the Dynatrace backend.](/docs/ingest-from/opentelemetry/collector/use-cases/batch "Configure the OpenTelemetry Collector to send data in batches to the Dynatrace backend.")[### Enrich with OneAgent</p>
<p>Configure the OpenTelemetry Collector to enrich data with OneAgent.](/docs/ingest-from/opentelemetry/collector/use-cases/enrich "Configure the OpenTelemetry Collector to enrich OTLP requests with OneAgent host data.")[<img alt="FluentD" src="https://dt-cdn.net/images/untitled-300-c72685245e.png" title="FluentD" /></p>
<h3 id="fluentd">FluentD<a class="headerlink" href="#fluentd" title="Permanent link">&para;</a></h3>
<p>Configure the OpenTelemetry Collector to ingest data from FluentD.](/docs/ingest-from/opentelemetry/collector/use-cases/fluentd "Configure the OpenTelemetry Collector to ingest FluentD data.")[### gRPC to HTTP</p>
<p>Configure the OpenTelemetry Collector to transform a gRPC OTLP request to HTTP.](/docs/ingest-from/opentelemetry/collector/use-cases/grpc "Configure the OpenTelemetry Collector to transform a gRPC OTLP request to HTTP.")[### Histogram summaries</p>
<p>Configure the OpenTelemetry Collector to compute bucket summaries for histogram metrics.](/docs/ingest-from/opentelemetry/collector/use-cases/histograms "Configure the OpenTelemetry Collector to compute histogram summaries.")[<img alt="Jaeger" src="https://dt-cdn.net/images/jaeger-300-3d21c8cbd4-300-2d7104a994.png" title="Jaeger" /></p>
<h3 id="jaeger">Jaeger<a class="headerlink" href="#jaeger" title="Permanent link">&para;</a></h3>
<p>Configure the OpenTelemetry Collector to ingest and transform Jaeger data into Dynatrace.](/docs/ingest-from/opentelemetry/collector/use-cases/jaeger "Configure the OpenTelemetry Collector to ingest and convert Jaeger data into Dynatrace.")[### Kafka</p>
<p>Configure the OpenTelemetry Collector to integrate with Apache Kafka.](/docs/ingest-from/opentelemetry/collector/use-cases/kafka "How to configure the OpenTelemetry Collector to buffer data via Kafka.")[### Kubernetes Enrichment</p>
<p>Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.](/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes "Configure the OpenTelemetry Collector to ingest Kubernetes data into Dynatrace.")[### Log files</p>
<p>Configure the OpenTelemetry Collector to ingest log files.](/docs/ingest-from/opentelemetry/collector/use-cases/filelog "Configure the OpenTelemetry Collector to ingest log data into Dynatrace.")[### Mask sensitive data</p>
<p>Configure the OpenTelemetry Collector to mask sensitive data before forwarding to Dynatrace.](/docs/ingest-from/opentelemetry/collector/use-cases/redact "Configure the OpenTelemetry Collector to mask sensitive data before forwarding to Dynatrace.")[### Memory Limitation</p>
<p>Configure the OpenTelemetry Collector to respect memory limits and not use excessive system resources.](/docs/ingest-from/opentelemetry/collector/use-cases/memory "Configure the OpenTelemetry Collector to respect memory limits and not use excessive system resources.")[### Multiple backends</p>
<p>Configure the OpenTelemetry Collector to export to multiple backends.](/docs/ingest-from/opentelemetry/collector/use-cases/multi-export "Configure the OpenTelemetry Collector to send data to more than one backend.")[### NetFlow</p>
<p>Configure the OpenTelemetry Collector to ingest NetFlow packets.](/docs/ingest-from/opentelemetry/collector/use-cases/netflow "Configure the OpenTelemetry Collector to ingest NetFlow data.")[<img alt="Prometheus" src="https://dt-cdn.net/images/prometheus-logo-grey-e85840f462-8e7b2967a6.svg" title="Prometheus" /></p>
<h3 id="prometheus">Prometheus<a class="headerlink" href="#prometheus" title="Permanent link">&para;</a></h3>
<p>Configure the OpenTelemetry Collector to scrape your Prometheus data.](/docs/ingest-from/opentelemetry/collector/use-cases/prometheus "Configure the OpenTelemetry Collector to scrape your Prometheus data.")[### Sampling</p>
<p>Configure the OpenTelemetry Collector to sample distributed traces.](/docs/ingest-from/opentelemetry/collector/use-cases/sampling "Configure the OpenTelemetry Collector to sample data using the <code>tail_sampling</code> processor.")[### StatsD</p>
<p>Configure the OpenTelemetry Collector to ingest StatsD data.](/docs/ingest-from/opentelemetry/collector/use-cases/statsd "Configure the OpenTelemetry Collector to ingest StatsD data.")[### Syslog</p>
<p>Configure the OpenTelemetry Collector to ingest syslog data.](/docs/ingest-from/opentelemetry/collector/use-cases/syslog "Configure the OpenTelemetry Collector to ingest syslog data into Dynatrace.")[### Transforming and filtering</p>
<p>Configure the OpenTelemetry Collector to add, transform, and drop OpenTelemetry data.](/docs/ingest-from/opentelemetry/collector/use-cases/transform "Configure the OpenTelemetry Collector to add, transform, and drop OpenTelemetry data.")[<img alt="Zipkin" src="https://dt-cdn.net/images/zipkin-gray-300-7e572e6589.png" title="Zipkin" /></p>
<h3 id="zipkin">Zipkin<a class="headerlink" href="#zipkin" title="Permanent link">&para;</a></h3>
<p>Configure the OpenTelemetry Collector to ingest and transform Zipkin data into Dynatrace.](/docs/ingest-from/opentelemetry/collector/use-cases/zipkin "Configure the OpenTelemetry Collector to ingest and convert Zipkin data into Dynatrace.")</p>
<hr />
<h2 id="source-collectormd">Source: collector.md<a class="headerlink" href="#source-collectormd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Dynatrace OTel Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector
scraped: 2026-02-16T21:12:57.376408</p>
<hr />
<h1 id="dynatrace-otel-collector">Dynatrace OTel Collector<a class="headerlink" href="#dynatrace-otel-collector" title="Permanent link">&para;</a></h1>
<h1 id="dynatrace-otel-collector_1">Dynatrace OTel Collector<a class="headerlink" href="#dynatrace-otel-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>5-min read</li>
<li>Updated on Nov 17, 2025</li>
</ul>
<p>The Collector is a network service application that you can use to batch and transform telemetry data. It acts as a proxy and can receive OTLP requests as well as data from other sources, transform these requests according to defined rules, and forward them to the backend.</p>
<p><img alt="OpenTelemetry Collector Overview" src="https://dt-cdn.net/images/collector-1062-e6ec25a6ee.png" /></p>
<h2 id="advantages-of-using-the-collector">Advantages of using the Collector<a class="headerlink" href="#advantages-of-using-the-collector" title="Permanent link">&para;</a></h2>
<p>In general, using the Collector alongside your service can be an advantage, since it allows your service to offload data quickly and takes care of additional handling such as retries, batching, encryption, or sensitive data filtering. It centralizes common processing tasks instead of duplicating them in each application.</p>
<p>You should use the Collector if:</p>
<ul>
<li>You need to collect data from different data sources in different formats and you need an easy way to make them all deliver their data to a backend that would otherwise be incompatible.</li>
<li>You need to have common processing of attributes on your telemetry data.</li>
</ul>
<p>The Collector is a relatively lightweight component, so teams can deploy their own to avoid sharing the same configuration.</p>
<p>The Collector is configured in a single YAML file. This eliminates the need to browse through multiple files and reduces maintenance. You can find more information on the configuration at <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="How to configure the OpenTelemetry Collector.">Configure the OpenTelemetry Collector</a>.</p>
<h2 id="distributions">Distributions<a class="headerlink" href="#distributions" title="Permanent link">&para;</a></h2>
<p>The Collector comes in different distribution flavors and with different setup and deployment options.</p>
<h3 id="dynatrace-collector">Dynatrace Collector<a class="headerlink" href="#dynatrace-collector" title="Permanent link">&para;</a></h3>
<p>The Dynatrace distribution of the OpenTelemetry Collector is a customized Collector build provided by Dynatrace and tailored for typical use cases in a Dynatrace context. It ships with an optimized and verified set of Collector components.</p>
<p>Advantages of Dynatrace Collector</p>
<p>The Dynatrace Collector offers the following advantages compared to the OpenTelemetry Collector distributions:</p>
<ul>
<li>Covered by Dynatrace support (x86-64 and ARM64)</li>
<li>Collector components verified by Dynatrace</li>
<li>Security patches independent of OpenTelemetry Collector releases</li>
</ul>
<p>You can download the Dynatrace Collector release from <a href="https://github.com/Dynatrace/dynatrace-otel-collector/releases/v0.44.0">our repository√Ø¬ª¬ø</a>.</p>
<p>It is also available as a container image at <a href="https://github.com/Dynatrace/dynatrace-otel-collector/pkgs/container/dynatrace-otel-collector%2Fdynatrace-otel-collector">Github Packages√Ø¬ª¬ø</a> and can be pulled using the following Docker command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>docker pull ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0
</code></pre></div>
<p>More information about further available container repositories can be found under <a href="/docs/ingest-from/opentelemetry/collector/deployment#container-image-registries" title="How to deploy Dynatrace OTel Collector.">Deploy Dynatrace OTel Collector</a>.</p>
<p>Dynatrace Collector ships with specific components as described in the Dynatrace Collector's GitHub repo.
For the full list, see <a href="https://github.com/Dynatrace/dynatrace-otel-collector#components">Components√Ø¬ª¬ø</a>.</p>
<p>Take a look at <a href="/docs/ingest-from/opentelemetry/collector/use-cases" title="Configure your Collector instance for different use cases.">OpenTelemetry Collector use cases</a> for concrete use-case and configuration examples for the individual components.</p>
<h3 id="opentelemetry-distributions">OpenTelemetry Distributions<a class="headerlink" href="#opentelemetry-distributions" title="Permanent link">&para;</a></h3>
<p>There are two principal OpenTelemetry distributions of the Collector:</p>
<ul>
<li><strong>Collector Core</strong></li>
<li><strong>Collector Contrib</strong></li>
</ul>
<p>Additionally, OpenTelemetry also provides the <strong>Collector Builder</strong>, which allows you to build your own, customized Collector binary.</p>
<p>Dynatrace support</p>
<p>Dynatrace only provides limited support for Core, Contrib, and Builder setups, covering only the components and their versions included in the Dynatrace Collector.</p>
<p>For a fully supported Collector distribution, see <a href="#dt-collector-dist">Dynatrace Collector</a>.</p>
<h4 id="collector-core">Collector Core<a class="headerlink" href="#collector-core" title="Permanent link">&para;</a></h4>
<p>The <a href="https://github.com/open-telemetry/opentelemetry-collector">Core distribution√Ø¬ª¬ø</a> contains the basic proxy service and a few fundamental service components:</p>
<ul>
<li>A receiver for OTLP over HTTP and gRPC</li>
<li>Processors for batching requests and ensuring memory usage constraints</li>
<li>Exporters for console logging and OTLP over HTTP and gRPC</li>
</ul>
<h4 id="collector-contrib">Collector Contrib<a class="headerlink" href="#collector-contrib" title="Permanent link">&para;</a></h4>
<p>The <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib">Contrib distribution√Ø¬ª¬ø</a> builds on top of Core and enhances its functionality by shipping with a large number of additional receivers, processors, and exporters, contributed by third parties.</p>
<p>Given that the Contrib distribution is an all-in-one package and comes with all service components pre-compiled, it may use more system resources (storage and memory) than an optimized Collector build. Generally, we recommend using the Contrib distribution for testing purposes and a custom build of the Collector (see <a href="#collector-builder">Builder</a>) in production.</p>
<h4 id="collector-builder-ocb">Collector Builder (ocb)<a class="headerlink" href="#collector-builder-ocb" title="Permanent link">&para;</a></h4>
<p>In addition to the two distributions, OpenTelemetry also offers the <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/cmd/builder">Collector Builder√Ø¬ª¬ø</a>, a command line tool that allows you to build your own customized version of the Collector.</p>
<h3 id="which-distribution-should-i-use">Which distribution should I use?<a class="headerlink" href="#which-distribution-should-i-use" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>When should I use it?</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dynatrace Collector Recommended</td>
<td>The preferred choice for most use cases. It ships with a set of verified and stable Collector components, typically used with Dynatrace setups.</td>
</tr>
<tr>
<td>Custom Builder version</td>
<td>When you need to fully customize the Collector instance and only run the components required for your use case.</td>
</tr>
<tr>
<td>Core</td>
<td>When you primarily want to convert between OTLP protocols (HTTP √¢¬Ü¬î gRPC), ensure memory usage constraints, or apply request batching.</td>
</tr>
<tr>
<td>Contrib</td>
<td>Ideal for test setups, as it contains all third-party components and doesn't require a custom build. It's generally not recommended for use in production systems, as it typically uses more resources and may be less stable than an optimized Builder instance.</td>
</tr>
</tbody>
</table>
<h2 id="components_13">Components<a class="headerlink" href="#components_13" title="Permanent link">&para;</a></h2>
<h3 id="receiver_1">Receiver<a class="headerlink" href="#receiver_1" title="Permanent link">&para;</a></h3>
<p>A receiver is a component that enables data to come into the Collector. It can receive data from multiple sources. Many receivers come with default settings and do not need much configuration.</p>
<p>For a list of available receivers and their basic configuration, see the official <a href="https://opentelemetry.io/docs/collector/configuration/#receivers">OpenTelemetry documentation on receivers√Ø¬ª¬ø</a>.</p>
<h3 id="processor-optional">Processor Optional<a class="headerlink" href="#processor-optional" title="Permanent link">&para;</a></h3>
<p>A processor is an optional component that decides what to do with the data.</p>
<p>For a list of available processors and their basic configuration, see the official <a href="https://opentelemetry.io/docs/collector/configuration/#processors">OpenTelemetry documentation on processors√Ø¬ª¬ø</a>. OpenTelemetry has a list of <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/processor#recommended-processors">recommended processors√Ø¬ª¬ø</a>, but these are optional.</p>
<h3 id="exporter_1">Exporter<a class="headerlink" href="#exporter_1" title="Permanent link">&para;</a></h3>
<p>An exporter is a component that sends processed data to one or more backends. Exporters can support more than one data source.</p>
<p>Because many exporters require additional configuration (for example, an endpoint), be sure to check the official <a href="https://opentelemetry.io/docs/collector/configuration/#exporters">OpenTelemetry documentation on exporters√Ø¬ª¬ø</a> for a list of available exporters and their configurations.</p>
<h3 id="services">Services<a class="headerlink" href="#services" title="Permanent link">&para;</a></h3>
<p>Services are used to define pipelines that channel data through the Collector. They define which components work together to process OpenTelemetry data.</p>
<hr />
<h2 id="source-getting-startedmd">Source: getting-started.md<a class="headerlink" href="#source-getting-startedmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Get started with OpenTelemetry and Dynatrace
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/getting-started
scraped: 2026-02-16T21:10:06.854716</p>
<hr />
<h1 id="get-started-with-opentelemetry-and-dynatrace">Get started with OpenTelemetry and Dynatrace<a class="headerlink" href="#get-started-with-opentelemetry-and-dynatrace" title="Permanent link">&para;</a></h1>
<h1 id="get-started-with-opentelemetry-and-dynatrace_1">Get started with OpenTelemetry and Dynatrace<a class="headerlink" href="#get-started-with-opentelemetry-and-dynatrace_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>3-min read</li>
<li>Updated on Oct 15, 2025</li>
</ul>
<p>Find the information that you need to get started with ingesting OpenTelemetry logs, metrics, and traces into Dynatrace.</p>
<p>[### OTLP APIs</p>
<p>The Dynatrace OTLP API endpoints and token scopes needed to configure telemetry exports to Dynatrace.](/docs/ingest-from/opentelemetry/otlp-api "Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.")[### Instrument your apps</p>
<p>Instrument your apps to send OpenTelemetry data to Dynatrace API endpoints.](/docs/ingest-from/opentelemetry/walkthroughs "Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.")[### Dynatrace Collector</p>
<p>The customized Collector build, provided by Dynatrace and tailored for typical use cases in a Dynatrace context.](/docs/ingest-from/opentelemetry/collector "Learn about the Dynatrace OTel Collector.")[### Istio and Envoy</p>
<p>Configure Istio and Envoy for OpenTelemetry exports to Dynatrace.](/docs/ingest-from/opentelemetry/integrations "Learn how to integrate OpenTelemetry and Dynatrace with Istio and Envoy.")[### Ensuring success</p>
<p>Make sure you get the OpenTelemetry data that you need in Dynatrace.](/docs/ingest-from/opentelemetry/troubleshooting "Troubleshoot common issues in the context of OpenTelemetry and data ingestion.")[### Licensing</p>
<p>How to calculate DPS consumption related to OpenTelemetry.](/docs/ingest-from/opentelemetry/opentelemetry-licensing "Learn how Dynatrace calculates licensing for data ingested via OpenTelemetry, using the Dynatrace Platform Subscription (DPS) model.")</p>
<hr />
<h2 id="source-envoymd">Source: envoy.md<a class="headerlink" href="#source-envoymd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Configure OpenTelemetry tracing with Envoy
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/integrations/envoy
scraped: 2026-02-16T21:13:50.509458</p>
<hr />
<h1 id="configure-opentelemetry-tracing-with-envoy">Configure OpenTelemetry tracing with Envoy<a class="headerlink" href="#configure-opentelemetry-tracing-with-envoy" title="Permanent link">&para;</a></h1>
<h1 id="configure-opentelemetry-tracing-with-envoy_1">Configure OpenTelemetry tracing with Envoy<a class="headerlink" href="#configure-opentelemetry-tracing-with-envoy_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Updated on Oct 15, 2025</li>
</ul>
<p>Support statement</p>
<p>This integration is based on open source code governed by the respective communities and is not covered under the Dynatrace support policy. While we strive to assist, issues and feature requests should be reported directly to the respective project. Dynatrace cannot ensure fixes/features due to the independent nature of OSS projects.</p>
<p>Always use the most recent release version to ensure you have the latest patches and fixes deployed.</p>
<p>This page describes how to configure your Envoy version 1.29+ instance to export traces to Dynatrace.</p>
<p>If you're using Envoy versions 1.28 and earlier, you can still export traces to Dynatrace via the OneAgent Envoy code module.</p>
<h3 id="prerequisites_13">Prerequisites<a class="headerlink" href="#prerequisites_13" title="Permanent link">&para;</a></h3>
<ul>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">OTLP traces URL</a> for the export.</li>
<li>
<p>The OneAgent Envoy code module is disabled.
  To do this:</p>
</li>
<li>
<p>Go to the applicable configuration page:</p>
<ul>
<li>For the entire environment, go to <strong>Settings</strong> &gt; <strong>Monitoring</strong> &gt; <strong>Monitored technologies</strong>.</li>
<li>For a particular host, go to <strong>Your host</strong> &gt; <strong>Host settings</strong> &gt; <strong>General</strong>.</li>
<li>Find <strong>Envoy</strong> in the list of monitored technologies and select  <strong>Edit</strong>.</li>
<li>Select the <strong>Monitor Envoy</strong> toggle, as appropriate, to disable the OneAgent Envoy code module.</li>
</ul>
</li>
</ul>
<h3 id="steps">Steps<a class="headerlink" href="#steps" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Get configuration entries</p>
</li>
<li>
<p>In Dynatrace Hub, search for <code>Envoy</code>.</p>
</li>
<li>Select the Hub entry for Envoy.</li>
<li>Select <strong>Set up</strong>.</li>
<li>Configure the API token.</li>
<li>
<p>Proceed with the following steps and use (and adjust) the two provided configuration snippets where applicable.</p>
</li>
<li>
<p>Add Dynatrace cluster entry for OpenTelemetry export</p>
</li>
</ol>
<p>For Envoy to send traces to Dynatrace, you first need to configure a <a href="https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/intro/terminology">cluster√Ø¬ª¬ø</a> entry for Dynatrace in the Envoy configuration file. For that, add the <a href="#snippets">cluster configuration entry as obtained in step 2</a> under the top-level <code>clusters</code> key.</p>
<ol>
<li>Dynatrace-specific configuration for the OpenTelemetry tracer</li>
</ol>
<p>Next, you need to add the tracing provider to the <a href="https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/http/http_connection_management#http-connection-management">HTTP connection manager filter√Ø¬ª¬ø</a> in the <a href="https://www.envoyproxy.io/docs/envoy/latest/start/quick-start/configuration-static#listeners">Envoy configuration file√Ø¬ª¬ø</a>.</p>
<p>Envoy 1.30+</p>
<p>Envoy 1.29</p>
<p>Use the <a href="#snippets">tracer configuration entry you obtained in step 2</a>, configure the <a href="#prerequisites">API token</a> under <code>tracing</code> - <code>provider</code> - <code>typed_config</code> - <code>http_service</code> - <code>request_headers_to_add</code> - <code>header</code> - <code>value</code> (the correct syntax is <code>value: "Api-Token YOUR_API_TOKEN_HERE"</code>), and add the tracer configuration under aforementioned <code>filters</code> entry.</p>
<p>Configure the following snippet under <code>filters</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>tracing:
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>provider:
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>
<a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a>
<a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a>name: envoy.tracers.opentelemetry
<a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a>
<a id="__codelineno-51-11" name="__codelineno-51-11" href="#__codelineno-51-11"></a>
<a id="__codelineno-51-12" name="__codelineno-51-12" href="#__codelineno-51-12"></a>
<a id="__codelineno-51-13" name="__codelineno-51-13" href="#__codelineno-51-13"></a>typed_config:
<a id="__codelineno-51-14" name="__codelineno-51-14" href="#__codelineno-51-14"></a>
<a id="__codelineno-51-15" name="__codelineno-51-15" href="#__codelineno-51-15"></a>
<a id="__codelineno-51-16" name="__codelineno-51-16" href="#__codelineno-51-16"></a>
<a id="__codelineno-51-17" name="__codelineno-51-17" href="#__codelineno-51-17"></a>&quot;@type&quot;: type.googleapis.com/envoy.config.trace.v3.OpenTelemetryConfig
<a id="__codelineno-51-18" name="__codelineno-51-18" href="#__codelineno-51-18"></a>
<a id="__codelineno-51-19" name="__codelineno-51-19" href="#__codelineno-51-19"></a>
<a id="__codelineno-51-20" name="__codelineno-51-20" href="#__codelineno-51-20"></a>
<a id="__codelineno-51-21" name="__codelineno-51-21" href="#__codelineno-51-21"></a>service_name: your-service-name
<a id="__codelineno-51-22" name="__codelineno-51-22" href="#__codelineno-51-22"></a>
<a id="__codelineno-51-23" name="__codelineno-51-23" href="#__codelineno-51-23"></a>
<a id="__codelineno-51-24" name="__codelineno-51-24" href="#__codelineno-51-24"></a>
<a id="__codelineno-51-25" name="__codelineno-51-25" href="#__codelineno-51-25"></a>http_service:
<a id="__codelineno-51-26" name="__codelineno-51-26" href="#__codelineno-51-26"></a>
<a id="__codelineno-51-27" name="__codelineno-51-27" href="#__codelineno-51-27"></a>
<a id="__codelineno-51-28" name="__codelineno-51-28" href="#__codelineno-51-28"></a>
<a id="__codelineno-51-29" name="__codelineno-51-29" href="#__codelineno-51-29"></a>http_uri:
<a id="__codelineno-51-30" name="__codelineno-51-30" href="#__codelineno-51-30"></a>
<a id="__codelineno-51-31" name="__codelineno-51-31" href="#__codelineno-51-31"></a>
<a id="__codelineno-51-32" name="__codelineno-51-32" href="#__codelineno-51-32"></a>
<a id="__codelineno-51-33" name="__codelineno-51-33" href="#__codelineno-51-33"></a>uri: &quot;{your-environment-id}.live.dynatrace.com/api/v2/otlp/v1/traces&quot;
<a id="__codelineno-51-34" name="__codelineno-51-34" href="#__codelineno-51-34"></a>
<a id="__codelineno-51-35" name="__codelineno-51-35" href="#__codelineno-51-35"></a>
<a id="__codelineno-51-36" name="__codelineno-51-36" href="#__codelineno-51-36"></a>
<a id="__codelineno-51-37" name="__codelineno-51-37" href="#__codelineno-51-37"></a>cluster: dynatrace
<a id="__codelineno-51-38" name="__codelineno-51-38" href="#__codelineno-51-38"></a>
<a id="__codelineno-51-39" name="__codelineno-51-39" href="#__codelineno-51-39"></a>
<a id="__codelineno-51-40" name="__codelineno-51-40" href="#__codelineno-51-40"></a>
<a id="__codelineno-51-41" name="__codelineno-51-41" href="#__codelineno-51-41"></a>timeout: 10s
<a id="__codelineno-51-42" name="__codelineno-51-42" href="#__codelineno-51-42"></a>
<a id="__codelineno-51-43" name="__codelineno-51-43" href="#__codelineno-51-43"></a>
<a id="__codelineno-51-44" name="__codelineno-51-44" href="#__codelineno-51-44"></a>
<a id="__codelineno-51-45" name="__codelineno-51-45" href="#__codelineno-51-45"></a>request_headers_to_add:
<a id="__codelineno-51-46" name="__codelineno-51-46" href="#__codelineno-51-46"></a>
<a id="__codelineno-51-47" name="__codelineno-51-47" href="#__codelineno-51-47"></a>
<a id="__codelineno-51-48" name="__codelineno-51-48" href="#__codelineno-51-48"></a>
<a id="__codelineno-51-49" name="__codelineno-51-49" href="#__codelineno-51-49"></a>- header:
<a id="__codelineno-51-50" name="__codelineno-51-50" href="#__codelineno-51-50"></a>
<a id="__codelineno-51-51" name="__codelineno-51-51" href="#__codelineno-51-51"></a>
<a id="__codelineno-51-52" name="__codelineno-51-52" href="#__codelineno-51-52"></a>
<a id="__codelineno-51-53" name="__codelineno-51-53" href="#__codelineno-51-53"></a>key: &quot;Authorization&quot;
<a id="__codelineno-51-54" name="__codelineno-51-54" href="#__codelineno-51-54"></a>
<a id="__codelineno-51-55" name="__codelineno-51-55" href="#__codelineno-51-55"></a>
<a id="__codelineno-51-56" name="__codelineno-51-56" href="#__codelineno-51-56"></a>
<a id="__codelineno-51-57" name="__codelineno-51-57" href="#__codelineno-51-57"></a>value: &quot;Api-Token {API_TOKEN_HERE}&quot;
<a id="__codelineno-51-58" name="__codelineno-51-58" href="#__codelineno-51-58"></a>
<a id="__codelineno-51-59" name="__codelineno-51-59" href="#__codelineno-51-59"></a>
<a id="__codelineno-51-60" name="__codelineno-51-60" href="#__codelineno-51-60"></a>
<a id="__codelineno-51-61" name="__codelineno-51-61" href="#__codelineno-51-61"></a>resource_detectors:
<a id="__codelineno-51-62" name="__codelineno-51-62" href="#__codelineno-51-62"></a>
<a id="__codelineno-51-63" name="__codelineno-51-63" href="#__codelineno-51-63"></a>
<a id="__codelineno-51-64" name="__codelineno-51-64" href="#__codelineno-51-64"></a>
<a id="__codelineno-51-65" name="__codelineno-51-65" href="#__codelineno-51-65"></a>- name: envoy.tracers.opentelemetry.resource_detectors.dynatrace
<a id="__codelineno-51-66" name="__codelineno-51-66" href="#__codelineno-51-66"></a>
<a id="__codelineno-51-67" name="__codelineno-51-67" href="#__codelineno-51-67"></a>
<a id="__codelineno-51-68" name="__codelineno-51-68" href="#__codelineno-51-68"></a>
<a id="__codelineno-51-69" name="__codelineno-51-69" href="#__codelineno-51-69"></a>typed_config:
<a id="__codelineno-51-70" name="__codelineno-51-70" href="#__codelineno-51-70"></a>
<a id="__codelineno-51-71" name="__codelineno-51-71" href="#__codelineno-51-71"></a>
<a id="__codelineno-51-72" name="__codelineno-51-72" href="#__codelineno-51-72"></a>
<a id="__codelineno-51-73" name="__codelineno-51-73" href="#__codelineno-51-73"></a>&quot;@type&quot;: type.googleapis.com/envoy.extensions.tracers.opentelemetry.resource_detectors.v3.DynatraceResourceDetectorConfig
</code></pre></div>
<p>These values need to be adjusted to reflect your Dynatrace environment and the export configuration:</p>
<ul>
<li><code>uri</code>√¢¬Ä¬ìSpecifies the desired <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">export URL with the trace path</a>. The value must not include the protocol scheme but start with hostname instead.</li>
<li><code>cluster</code>√¢¬Ä¬ìSpecifies the cluster name and has to match the value of <code>cluster_name</code> of the previous cluster definition.</li>
<li>
<p><code>request_headers_to_add</code>√¢¬Ä¬ìContains the HTTP headers to be included in the request. Necessary when exporting to ActiveGate (configured for the <a href="#prerequisites">API token</a>).</p>
</li>
<li>
<p>Verify the setup</p>
</li>
</ul>
<p>Once the setup is complete and you have ingested your first data, you can verify if the traces show up in Dynatrace.</p>
<p><img alt="trace" src="https://dt-cdn.net/images/screenshot-1863-979a8a5284.png" /></p>
<h2 id="related-topics_12">Related topics<a class="headerlink" href="#related-topics_12" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-metrics/ingestion-methods/prometheus" title="Learn how to extend observability in Dynatrace with Prometheus metrics.">Prometheus</a></li>
<li><a href="/docs/observe/infrastructure-observability/container-platform-monitoring/kubernetes-monitoring/monitor-istio-metrics" title="Istio metric ingestion and topology detection">Istio/Envoy proxy metrics</a></li>
</ul>
<hr />
<h2 id="source-istiomd">Source: istio.md<a class="headerlink" href="#source-istiomd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Configure OpenTelemetry tracing with Istio
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/integrations/istio
scraped: 2026-02-16T21:31:10.478249</p>
<hr />
<h1 id="configure-opentelemetry-tracing-with-istio">Configure OpenTelemetry tracing with Istio<a class="headerlink" href="#configure-opentelemetry-tracing-with-istio" title="Permanent link">&para;</a></h1>
<h1 id="configure-opentelemetry-tracing-with-istio_1">Configure OpenTelemetry tracing with Istio<a class="headerlink" href="#configure-opentelemetry-tracing-with-istio_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>3-min read</li>
<li>Updated on Oct 22, 2025</li>
</ul>
<p>Support statement</p>
<p>This integration is based on open source code governed by the respective communities and is not covered under the Dynatrace support policy. While we strive to assist, issues and feature requests should be reported directly to the respective project. Dynatrace cannot ensure fixes/features due to the independent nature of OSS projects.</p>
<p>Always use the most recent release version to ensure you have the latest patches and fixes deployed.</p>
<p>This page describes how to use Istio version 1.22+ with the <a href="https://istio.io/latest/docs/reference/config/istio.mesh.v1alpha1/#MeshConfig-ExtensionProvider-OpenTelemetryTracingProvider">Istio OpenTelemetry extension provider√Ø¬ª¬ø</a>, and how to configure it to export OpenTelemetry traces to Dynatrace.</p>
<h3 id="system-requirements">System requirements<a class="headerlink" href="#system-requirements" title="Permanent link">&para;</a></h3>
<p>The following prerequisites are necessary to configure Istio OpenTelemetry trace configuration, including Dynatrace resource detection and sampling:</p>
<ul>
<li>Istio version 1.22+ (i.e., Istio releases that ship with Envoy 1.30+)</li>
</ul>
<p>Istio version 1.21 and earlier</p>
<p>Istio versions 1.21 and earlier ship with Envoy versions 1.29 and earlier, which is based on OpenTracing.
To use these Isito releases, enable the Dynatrace Envoy code module as described in <a href="/docs/ingest-from/opentelemetry/integrations/envoy#envoy-code-module" title="Learn how to configure Envoy to send OpenTelemetry traces to Dynatrace.">Configure OpenTelemetry tracing with Envoy</a>.</p>
<h2 id="licensing-impact">Licensing impact<a class="headerlink" href="#licensing-impact" title="Permanent link">&para;</a></h2>
<p>In certain deployment setups, tracing with Istio version 1.22+ results in consumption of the following <a href="https://www.dynatrace.com/pricing/">rate card√Ø¬ª¬ø</a> capabilities:</p>
<ul>
<li>
<p>When using the Dynatrace resource detector and sampler:</p>
</li>
<li>
<p>Classic Full-Stack or cloud-native Full-Stack deployments: Usage is included in <a href="/docs/license/capabilities/app-infra-observability/full-stack-monitoring" title="Learn how your consumption of the Dynatrace Full-Stack Monitoring DPS capability is billed and charged.">Full-Stack Monitoring (DPS)</a> and <a href="/docs/license/monitoring-consumption-classic/application-and-infrastructure-monitoring" title="Understand how Dynatrace application and infrastructure monitoring consumption is calculated based on host units.">Host Units (Dynatrace Classic License)</a>.</p>
</li>
<li>For Application-Observability-only deployments: Usage incurs consumption of <a href="/docs/license/capabilities/platform-extensions" title="Learn how consumption of Dynatrace platform extensions is calculated using the Dynatrace Platform Subscription model.">Custom Traces Classic (DPS)</a> or <a href="/docs/license/monitoring-consumption-classic/davis-data-units/custom-traces" title="Understand how DDU consumption is calculated for spans ingested via the Trace API.">DDUs for custom traces (Dynatrace Classic License)</a>.</li>
<li>Without the Dynatrace resource detector and sampler: Usage incurs consumption of <a href="/docs/license/capabilities/platform-extensions" title="Learn how consumption of Dynatrace platform extensions is calculated using the Dynatrace Platform Subscription model.">Custom Traces Classic (DPS)</a> or <a href="/docs/license/monitoring-consumption-classic/davis-data-units/custom-traces" title="Understand how DDU consumption is calculated for spans ingested via the Trace API.">DDUs for custom traces (Dynatrace Classic License)</a>.</li>
</ul>
<h2 id="deployment-considerations_1">Deployment considerations<a class="headerlink" href="#deployment-considerations_1" title="Permanent link">&para;</a></h2>
<p>It's possible to configure Istio OpenTelemetry tracing in a standalone deployment or in combination with Dynatrace Operator.</p>
<h3 id="deployment-in-combination-with-dynatrace-operator-recommended">Deployment in combination with Dynatrace Operator Recommended<a class="headerlink" href="#deployment-in-combination-with-dynatrace-operator-recommended" title="Permanent link">&para;</a></h3>
<p>We recommend using the Istio OpenTelemetry integration in combination with a Dynatrace Operator deployment with <a href="/docs/ingest-from/setup-on-k8s/guides/metadata-automation/metadata-enrichment" title="Metadata enrichment in the Dynatrace Operator adds context to Kubernetes pods by attaching relevant metadata to entities like pods, hosts, and processes for better observability.">metadata enrichment</a> and <a href="/docs/ingest-from/setup-on-k8s/extend-observability-k8s/telemetry-ingest" title="Enable Dynatrace telemetry ingest endpoints in Kubernetes for cluster-local data ingest.">telemetry ingest endpoints</a> enabled. Other features like OneAgent or ActiveGate are not required.</p>
<p>This provides the following benefits compared to standalone usage:</p>
<ul>
<li>Resilient and more efficient delivery of traces by providing retry and batching capabilities.</li>
<li>Optional routing through ActiveGate.</li>
<li>No additional access token required.</li>
<li>No additional <code>ServiceEntries</code> required.</li>
<li>Compatibility with Dynatrace Operator <code>enableIstio</code>.</li>
</ul>
<h3 id="standalone-deployment">Standalone deployment<a class="headerlink" href="#standalone-deployment" title="Permanent link">&para;</a></h3>
<p>It's possible to ingest Istio traces without a Dynatrace Operator instance deployed, but this comes with major downsides and should only be used if it's not possible to deploy Dynatrace Operator.</p>
<p>Caveats when using standalone deployment:</p>
<ul>
<li>No Kubernetes metadata will be available for traces. This means traces will not be automatically correlated with Kubernetes workloads or services in Dynatrace.</li>
<li>Potentially unreliable delivery of traces. The current implementation of the OTLP HTTP exporter in Envoy doesn't provide any means of retry or error handling in case of connectivity or other issues when sending traces to Dynatrace, which can lead to loss of traces.</li>
<li>The required <code>ServiceEntry</code> is not compatible with the <code>enableIstio</code> option of Dynatrace Operator.</li>
</ul>
<h3 id="other-deployment-considerations">Other deployment considerations<a class="headerlink" href="#other-deployment-considerations" title="Permanent link">&para;</a></h3>
<p>Istio ambient mode</p>
<h4 id="istio-ambient-mode-support">Istio ambient mode support<a class="headerlink" href="#istio-ambient-mode-support" title="Permanent link">&para;</a></h4>
<p>Istio in ambient mode doesn't rely on Envoy proxies to route traffic, so tracing Istio traffic using the OpenTelemetry integration is not possible. If waypoint proxies are used, those would still emit traces, but the metadata would be misleading or wrong. Currently, there is no solution for end-to-end tracing in Istio ambient mode.</p>
<h2 id="steps_1">Steps<a class="headerlink" href="#steps_1" title="Permanent link">&para;</a></h2>
<h3 id="1-requirements">1. Requirements<a class="headerlink" href="#1-requirements" title="Permanent link">&para;</a></h3>
<p>Check the following requirements before starting to deploy tracing for Istio.</p>
<p>Dynatrace Operator</p>
<p>Standalone</p>
<ol>
<li>
<p>Dynatrace Operator is <a href="/docs/ingest-from/setup-on-k8s/deployment" title="Deploy Dynatrace Operator on Kubernetes">deployed</a>.</p>
</li>
<li>
<p>For optimal configuration, follow the guide for <a href="/docs/ingest-from/setup-on-k8s/guides/deployment-and-configuration/istio-deployment" title="Deployment of Dynatrace Operator alongside Istio in various scenarios">deployment alongside Istio</a>.</p>
</li>
<li><a href="/docs/ingest-from/setup-on-k8s/extend-observability-k8s/telemetry-ingest" title="Enable Dynatrace telemetry ingest endpoints in Kubernetes for cluster-local data ingest.">Telemetry ingest</a> endpoints are enabled.</li>
</ol>
<p>Either Dynatrace Operator is not deployed, or <code>enableIstio</code> is set to <code>false</code> in the DynaKube.</p>
<h3 id="2-get-configuration-entries">2. Get configuration entries<a class="headerlink" href="#2-get-configuration-entries" title="Permanent link">&para;</a></h3>
<p>Dynatrace Operator</p>
<p>Standalone</p>
<ol>
<li>In Dynatrace Hub, search for <code>Istio</code>.</li>
<li>Filter by the category <strong>Technology</strong>.</li>
<li>Select the Hub entry <strong>Istio Service Mesh</strong>.</li>
<li>Select <strong>Set up</strong>.</li>
<li>
<p>Use the provided and pre-configured snippets to deploy the following items in the next steps:</p>
</li>
<li>
<p>Mesh configuration</p>
</li>
<li>
<p>Telemetry API</p>
</li>
<li>
<p>In Dynatrace Hub, search for <code>Istio</code>.</p>
</li>
<li>Filter by the category <strong>Technology</strong>.</li>
<li>Select the Hub entry <strong>Istio Service Mesh</strong>.</li>
<li>Select <strong>Set up</strong>.</li>
<li>Configure the API token.</li>
<li>
<p>Use the provided and pre-configured snippets to deploy the following items in the next steps:</p>
</li>
<li>
<p>Mesh configuration</p>
</li>
<li>Service entry</li>
<li>Telemetry API</li>
</ol>
<h3 id="3-apply-the-mesh-configuration-to-your-istio-installation">3. Apply the mesh configuration to your Istio installation<a class="headerlink" href="#3-apply-the-mesh-configuration-to-your-istio-installation" title="Permanent link">&para;</a></h3>
<p>Dynatrace Operator</p>
<p>Standalone</p>
<p>To use the telemetry ingest endpoints provided by the Dynatrace OpenTelemetry collector, we need to change the snippet obtained in step 2 by removing the API token header and changing the target service.</p>
<p>The resulting configuration should look like this, assuming the default ingest service name:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>apiVersion: install.istio.io/v1alpha1
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>kind: IstioOperator
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a>
<a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a>
<a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a>
<a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a>spec:
<a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a>
<a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a>
<a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a>
<a id="__codelineno-52-13" name="__codelineno-52-13" href="#__codelineno-52-13"></a>meshConfig:
<a id="__codelineno-52-14" name="__codelineno-52-14" href="#__codelineno-52-14"></a>
<a id="__codelineno-52-15" name="__codelineno-52-15" href="#__codelineno-52-15"></a>
<a id="__codelineno-52-16" name="__codelineno-52-16" href="#__codelineno-52-16"></a>
<a id="__codelineno-52-17" name="__codelineno-52-17" href="#__codelineno-52-17"></a>extensionProviders:
<a id="__codelineno-52-18" name="__codelineno-52-18" href="#__codelineno-52-18"></a>
<a id="__codelineno-52-19" name="__codelineno-52-19" href="#__codelineno-52-19"></a>
<a id="__codelineno-52-20" name="__codelineno-52-20" href="#__codelineno-52-20"></a>
<a id="__codelineno-52-21" name="__codelineno-52-21" href="#__codelineno-52-21"></a>- name: dynatrace-otel
<a id="__codelineno-52-22" name="__codelineno-52-22" href="#__codelineno-52-22"></a>
<a id="__codelineno-52-23" name="__codelineno-52-23" href="#__codelineno-52-23"></a>
<a id="__codelineno-52-24" name="__codelineno-52-24" href="#__codelineno-52-24"></a>
<a id="__codelineno-52-25" name="__codelineno-52-25" href="#__codelineno-52-25"></a>opentelemetry:
<a id="__codelineno-52-26" name="__codelineno-52-26" href="#__codelineno-52-26"></a>
<a id="__codelineno-52-27" name="__codelineno-52-27" href="#__codelineno-52-27"></a>
<a id="__codelineno-52-28" name="__codelineno-52-28" href="#__codelineno-52-28"></a>
<a id="__codelineno-52-29" name="__codelineno-52-29" href="#__codelineno-52-29"></a>port: 4318
<a id="__codelineno-52-30" name="__codelineno-52-30" href="#__codelineno-52-30"></a>
<a id="__codelineno-52-31" name="__codelineno-52-31" href="#__codelineno-52-31"></a>
<a id="__codelineno-52-32" name="__codelineno-52-32" href="#__codelineno-52-32"></a>
<a id="__codelineno-52-33" name="__codelineno-52-33" href="#__codelineno-52-33"></a>service: &quot;&lt;dynakube-name&gt;-telemetry-ingest.&lt;dynatrace-operator-namespace&gt;.svc.cluster.local&quot; # &lt;-- Please fill in your ingest endpoint service
<a id="__codelineno-52-34" name="__codelineno-52-34" href="#__codelineno-52-34"></a>
<a id="__codelineno-52-35" name="__codelineno-52-35" href="#__codelineno-52-35"></a>
<a id="__codelineno-52-36" name="__codelineno-52-36" href="#__codelineno-52-36"></a>
<a id="__codelineno-52-37" name="__codelineno-52-37" href="#__codelineno-52-37"></a>http:
<a id="__codelineno-52-38" name="__codelineno-52-38" href="#__codelineno-52-38"></a>
<a id="__codelineno-52-39" name="__codelineno-52-39" href="#__codelineno-52-39"></a>
<a id="__codelineno-52-40" name="__codelineno-52-40" href="#__codelineno-52-40"></a>
<a id="__codelineno-52-41" name="__codelineno-52-41" href="#__codelineno-52-41"></a>path: &quot;/v1/traces&quot;
<a id="__codelineno-52-42" name="__codelineno-52-42" href="#__codelineno-52-42"></a>
<a id="__codelineno-52-43" name="__codelineno-52-43" href="#__codelineno-52-43"></a>
<a id="__codelineno-52-44" name="__codelineno-52-44" href="#__codelineno-52-44"></a>
<a id="__codelineno-52-45" name="__codelineno-52-45" href="#__codelineno-52-45"></a>timeout: 10s
<a id="__codelineno-52-46" name="__codelineno-52-46" href="#__codelineno-52-46"></a>
<a id="__codelineno-52-47" name="__codelineno-52-47" href="#__codelineno-52-47"></a>
<a id="__codelineno-52-48" name="__codelineno-52-48" href="#__codelineno-52-48"></a>
<a id="__codelineno-52-49" name="__codelineno-52-49" href="#__codelineno-52-49"></a>resource_detectors:
<a id="__codelineno-52-50" name="__codelineno-52-50" href="#__codelineno-52-50"></a>
<a id="__codelineno-52-51" name="__codelineno-52-51" href="#__codelineno-52-51"></a>
<a id="__codelineno-52-52" name="__codelineno-52-52" href="#__codelineno-52-52"></a>
<a id="__codelineno-52-53" name="__codelineno-52-53" href="#__codelineno-52-53"></a>dynatrace: {}
<a id="__codelineno-52-54" name="__codelineno-52-54" href="#__codelineno-52-54"></a>
<a id="__codelineno-52-55" name="__codelineno-52-55" href="#__codelineno-52-55"></a>
<a id="__codelineno-52-56" name="__codelineno-52-56" href="#__codelineno-52-56"></a>
<a id="__codelineno-52-57" name="__codelineno-52-57" href="#__codelineno-52-57"></a>dynatrace_sampler:
<a id="__codelineno-52-58" name="__codelineno-52-58" href="#__codelineno-52-58"></a>
<a id="__codelineno-52-59" name="__codelineno-52-59" href="#__codelineno-52-59"></a>
<a id="__codelineno-52-60" name="__codelineno-52-60" href="#__codelineno-52-60"></a>
<a id="__codelineno-52-61" name="__codelineno-52-61" href="#__codelineno-52-61"></a>tenant: &quot;&lt;your-tenant-id&gt;&quot;  # &lt;-- This must not be changed from step 2
<a id="__codelineno-52-62" name="__codelineno-52-62" href="#__codelineno-52-62"></a>
<a id="__codelineno-52-63" name="__codelineno-52-63" href="#__codelineno-52-63"></a>
<a id="__codelineno-52-64" name="__codelineno-52-64" href="#__codelineno-52-64"></a>
<a id="__codelineno-52-65" name="__codelineno-52-65" href="#__codelineno-52-65"></a>cluster_id: &lt;cluster-id&gt;    # &lt;-- This must not be changed from step 2
</code></pre></div>
<p>Save the file as <code>meshconfig.yaml</code> and apply the configuration using the following command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>istioctl install -f meshconfig.yaml
</code></pre></div>
<p>Save the mesh configuration snippet you obtained in step 2 under <code>meshconfig.yaml</code> and configure Istio with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>istioctl install -f meshconfig.yaml
</code></pre></div>
<p>Existing Mesh configuration</p>
<p>If you already use your own, custom Mesh configuration, you need to merge its content with the provided snippet. Otherwise, you can use the snippet as-is.</p>
<h3 id="4-deploy-the-service-entry">4. Deploy the service entry<a class="headerlink" href="#4-deploy-the-service-entry" title="Permanent link">&para;</a></h3>
<p>Dynatrace Operator</p>
<p>Standalone</p>
<p>This step is only required for standalone deployment.
No action required when using Dynatrace Operator.</p>
<p>Next, you need to deploy the <a href="https://istio.io/latest/docs/reference/config/networking/service-entry/">Istio service entry√Ø¬ª¬ø</a> manifest you obtained in step 1 using <code>kubectl</code>. Save it to <code>dt-serviceentry.yaml</code> and run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>kubectl apply -n istio-system -f dt-serviceentry.yaml
</code></pre></div>
<h3 id="5-enable-tracing-provider">5. Enable tracing provider<a class="headerlink" href="#5-enable-tracing-provider" title="Permanent link">&para;</a></h3>
<p>As last configuration step, use the Istio telemetry API to enable the tracing provider.</p>
<p>Save the telemetry API manifest you obtained in step 2 to <code>dt-telemetry.yaml</code> and use <code>kubectl</code> to apply the configuration to the desired namespace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>kubectl apply -n istio-system -f dt-telemetry.yaml
</code></pre></div>
<p>Multiple telemetry resources</p>
<p>Do not deploy more than one telemetry resource within a given namespace, as doing so may lead to configuration conflicts and incomplete tracing information.</p>
<p>If you require different telemetry resources, deploy them to different namespaces or using different selectors.</p>
<p>Pod restart</p>
<p>Make sure to restart all applicable Kubernetes pods, to let the changes to the mesh configuration take effect.</p>
<h3 id="6-verify-the-setup">6. Verify the setup<a class="headerlink" href="#6-verify-the-setup" title="Permanent link">&para;</a></h3>
<p>Once the setup is complete and you have ingested your first data, you can verify if the traces show up in Dynatrace.</p>
<p><img alt="trace" src="https://dt-cdn.net/images/istio-otel-tracing-2513-5da62a325b.png" /></p>
<hr />
<h2 id="source-integrationsmd">Source: integrations.md<a class="headerlink" href="#source-integrationsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Integrate with Istio and Envoy
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/integrations
scraped: 2026-02-16T21:12:56.181797</p>
<hr />
<h1 id="integrate-with-istio-and-envoy">Integrate with Istio and Envoy<a class="headerlink" href="#integrate-with-istio-and-envoy" title="Permanent link">&para;</a></h1>
<h1 id="integrate-with-istio-and-envoy_1">Integrate with Istio and Envoy<a class="headerlink" href="#integrate-with-istio-and-envoy_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>1-min read</li>
<li>Updated on Oct 15, 2025</li>
</ul>
<p>This page provides information on how to configure Istio and Envoy to export OpenTelemetry data to Dynatrace.</p>
<p><a href="/docs/ingest-from/opentelemetry/integrations/istio" title="Learn how to configure Istio on Kubernetes to deploy pre-configured proxy services for OpenTelemetry tracing.">### Istio</a><a href="/docs/ingest-from/opentelemetry/integrations/envoy" title="Learn how to configure Envoy to send OpenTelemetry traces to Dynatrace.">### Envoy</a></p>
<hr />
<h2 id="source-opentelemetry-licensingmd">Source: opentelemetry-licensing.md<a class="headerlink" href="#source-opentelemetry-licensingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: OpenTelemetry licensing
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/opentelemetry-licensing
scraped: 2026-02-16T21:12:53.554036</p>
<hr />
<h1 id="opentelemetry-licensing">OpenTelemetry licensing<a class="headerlink" href="#opentelemetry-licensing" title="Permanent link">&para;</a></h1>
<h1 id="opentelemetry-licensing_1">OpenTelemetry licensing<a class="headerlink" href="#opentelemetry-licensing_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>2-min read</li>
<li>Published Aug 25, 2025</li>
</ul>
<p>Latest Dynatrace</p>
<p>Learn how OpenTelemetry data ingest is calculated with the Dynatrace Platform Subscription (DPS) license model.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides seamless support for OpenTelemetry data ingestion and processing.
This lets you leverage the power of observability across your distributed systems.</p>
<p>Licensing for OpenTelemetry data is fully integrated into the Dynatrace Platform Subscription model, ensuring that all telemetry types (traces and spans, metrics, and logs) are billed transparently and consistently.</p>
<p>With Dynatrace, OpenTelemetry data is treated like any other ingested data.
Flexible pricing is based on the volume of data ingested, stored, and queried.
Pricing calculations use the same <a href="https://www.dynatrace.com/pricing/">rate card items√Ø¬ª¬ø</a> as for all telemetry data that is ingested into the platform.</p>
<h2 id="traces-powered-by-grail-dps">Traces powered by Grail (DPS)<a class="headerlink" href="#traces-powered-by-grail-dps" title="Permanent link">&para;</a></h2>
<p>Dynatrace allows you to ingest and analyze OpenTelemetry trace data seamlessly.</p>
<p>For complete information, see <a href="/docs/license/capabilities/traces" title="Learn how Dynatrace Traces powered by Grail consumption is calculated using the Dynatrace Platform Subscription (DPS) model.">Traces powered by Grail overview (DPS)</a>.</p>
<h3 id="ingestion">Ingestion<a class="headerlink" href="#ingestion" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry trace data is billed by the ingested volume.
It is charged as <a href="/docs/license/capabilities/traces/dps-traces-ingest" title="Learn how your consumption of the Traces - Ingest &amp; Process DPS capability is billed and charged.">Traces √¢¬Ä¬ì Ingest &amp; Process</a>.</p>
<p>Full-Stack Monitoring includes a <a href="/docs/license/capabilities/app-infra-observability/full-stack-monitoring#full-stack-traces" title="Learn how your consumption of the Dynatrace Full-Stack Monitoring DPS capability is billed and charged.">defined amount of trace data volume</a> for traces that are sent via the OneAgent Trace API or from a Full-Stack monitored host.
You are only charged for trace data (from these sources) that exceeds the included volume.</p>
<h3 id="retention">Retention<a class="headerlink" href="#retention" title="Permanent link">&para;</a></h3>
<p>Retention of OpenTelemetry trace data is billed based on the volume of trace data stored.
It is measured in gibibytes per day (GiB-day) and charged as <a href="/docs/license/capabilities/traces/dps-traces-retain" title="Learn how your consumption of the Traces - Retain DPS capability is billed and charged.">Traces √¢¬Ä¬ì Retain</a>.</p>
<p>The default <a href="/docs/manage/data-privacy-and-security/data-privacy/data-retention-periods#purepath" title="Check retention times for various data types.">trace data retention period of 10 days</a> is included.
Any trace data retained longer than 10 days is charged on a per-gibibyte basis as <a href="/docs/license/capabilities/traces#trace-retain-usage" title="Learn how Dynatrace Traces powered by Grail consumption is calculated using the Dynatrace Platform Subscription (DPS) model.">Traces - Retain</a>.</p>
<h3 id="query">Query<a class="headerlink" href="#query" title="Permanent link">&para;</a></h3>
<p>Querying of OpenTelmetry traces is billed based on gibibytes scanned (GiB-scanned) and charged as <a href="/docs/license/capabilities/traces/dps-traces-query" title="Learn how your consumption of the Traces - Query DPS capability is billed and charged.">Traces √¢¬Ä¬ì Query</a>.</p>
<p>The use of <a href="/docs/observe/application-observability/distributed-tracing" title="Trace and analyze in real time highly distributed systems with Grail."><img alt="Distributed Tracing" src="https://dt-cdn.net/images/distributed-tracing-4ed13d1274.svg" title="Distributed Tracing" /> <strong>Distributed Tracing</strong></a> and <a href="/docs/observe/application-observability/services/services-app" title="Maintain centralized control over service health, performance, and resources with the Services app."><img alt="Services" src="https://dt-cdn.net/hub/logos/services.png" title="Services" /> <strong>Services</strong></a> is included with Dynatrace.
No query consumption is generated by these apps.</p>
<h2 id="metrics-powered-by-grail-dps">Metrics powered by Grail (DPS)<a class="headerlink" href="#metrics-powered-by-grail-dps" title="Permanent link">&para;</a></h2>
<p>Dynatrace supports OpenTelemetry metrics, allowing you to seamlessly ingest and analyze OpenTelemetry data alongside metrics from Dynatrace-monitored environments.
OpenTelemetry metrics are billed as Metrics powered by Grail, just like other ingested metrics.</p>
<p>For complete information, see <a href="/docs/license/capabilities/metrics" title="Learn how Dynatrace Metrics powered by Grail consumption is calculated using the Dynatrace Platform Subscription model.">Metrics powered by Grail overview (DPS)</a>.</p>
<h3 id="ingestion_1">Ingestion<a class="headerlink" href="#ingestion_1" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry metrics are billed by the number of metric data points ingested, measured as groups of 100,000 data points.
This ingest is charged as <a href="/docs/license/capabilities/metrics/dps-metrics-ingest" title="Learn how your consumption of the Metrics - Ingest &amp; Process DPS capability is billed and charged.">Metrics √¢¬Ä¬ì Ingest &amp; Process</a>.</p>
<p>Metrics originating from Full-Stack-monitored hosts or containers <a href="/docs/license/capabilities/app-infra-observability/full-stack-monitoring#dps-included-metrics" title="Learn how your consumption of the Dynatrace Full-Stack Monitoring DPS capability is billed and charged.">include a defined amount of metric data points</a>.
Each contributing GiB of host or application memory adds 900 data points in each 15-minute interval.</p>
<p>In an environment with Full-Stack Monitoring, you are only charged for metric data points that exceed this limit.</p>
<h3 id="retention_1">Retention<a class="headerlink" href="#retention_1" title="Permanent link">&para;</a></h3>
<p>Retention of OpenTelemetry metrics is billed based on the volume of metric data stored.
It is measured in gibibytes per day (GiB-day) and charged as <a href="/docs/license/capabilities/metrics/dps-metrics-retain" title="Learn how your consumption of the Metrics - Retain DPS capability is billed and charged.">Metrics √¢¬Ä¬ì Retain</a>.</p>
<p>Metrics powered by Grail includes <a href="/docs/manage/data-privacy-and-security/data-privacy/data-retention-periods" title="Check retention times for various data types.">15 months (462 days) of one-minute granularity</a>.
Metrics that you choose to retain beyond that period are charged.</p>
<h3 id="query_1">Query<a class="headerlink" href="#query_1" title="Permanent link">&para;</a></h3>
<p>Querying metric data is included in <a href="/docs/license/capabilities/metrics/dps-metrics-ingest" title="Learn how your consumption of the Metrics - Ingest &amp; Process DPS capability is billed and charged.">Metrics √¢¬Ä¬ì Ingest &amp; Process</a>.</p>
<h2 id="logs-powered-by-grail-dps">Logs powered by Grail (DPS)<a class="headerlink" href="#logs-powered-by-grail-dps" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides full support for OpenTelemetry logs.
This enables you to centralize log data from OpenTelemetry sources alongside logs from Dynatrace-monitored environments. OpenTelemetry logs are billed as Logs powered by Grail.</p>
<p>For complete information, see <a href="/docs/license/capabilities/log-analytics" title="Learn how Dynatrace Log Analytics consumption is calculated using the Dynatrace Platform Subscription model.">Log Analytics (DPS)</a>.</p>
<h3 id="ingestion_2">Ingestion<a class="headerlink" href="#ingestion_2" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry log data is billed by the volume ingested.
It is measured in gibibytes (GiB) and charged as <a href="/docs/license/capabilities/log-analytics/dps-log-ingest" title="Learn how your consumption of the Log Management &amp; Analytics - Ingest &amp; Process DPS capability is billed and charged.">Log Management &amp; Analytics √¢¬Ä¬ì Ingest &amp; Process</a>.</p>
<h3 id="retention_2">Retention<a class="headerlink" href="#retention_2" title="Permanent link">&para;</a></h3>
<p>Retention of log data is billed based on the volume of log data stored.
It is measured in gibibytes per day (GiB-day) and charged as <a href="/docs/license/capabilities/log-analytics/dps-log-retain" title="Learn how your consumption of the Log Management &amp; Analytics - Retain DPS capability is billed and charged.">Log Management &amp; Analytics √¢¬Ä¬ì Retain</a>.</p>
<h3 id="query_2">Query<a class="headerlink" href="#query_2" title="Permanent link">&para;</a></h3>
<p>Querying log data is billed based on the volume of log data queried.
It is measured in gibibytes scanned (GiB-scanned) and charged as <a href="/docs/license/capabilities/log-analytics/dps-log-query" title="Learn how your consumption of the Log Management &amp; Analytics - Query DPS capability is billed and charged.">Log Management &amp; Analytics - Query</a>.</p>
<h2 id="track-your-consumption">Track your consumption<a class="headerlink" href="#track-your-consumption" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides different ways to track your OpenTelmetry ingest.
These are described on the respective DPS capability page:</p>
<ul>
<li><a href="/docs/license/capabilities/traces/dps-traces-ingest#consumption-trace-ingest" title="Learn how your consumption of the Traces - Ingest &amp; Process DPS capability is billed and charged.">Pre-made notebooks to track your trace ingest</a></li>
<li><a href="/docs/license/capabilities/log-analytics/dps-log-ingest#track-your-consumption" title="Learn how your consumption of the Log Management &amp; Analytics - Ingest &amp; Process DPS capability is billed and charged.">Built-in metrics to track your log ingest</a></li>
<li><a href="/docs/license/capabilities/metrics/dps-metrics-ingest#calculate-your-consumption" title="Learn how your consumption of the Metrics - Ingest &amp; Process DPS capability is billed and charged.">Calculations to track your metrics ingest</a></li>
</ul>
<h2 id="related-topics_13">Related topics<a class="headerlink" href="#related-topics_13" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/opentelemetry" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">OpenTelemetry and Dynatrace</a></li>
<li><a href="/docs/license/capabilities/log-analytics" title="Learn how Dynatrace Log Analytics consumption is calculated using the Dynatrace Platform Subscription model.">Log Analytics (DPS)</a></li>
<li><a href="/docs/license/capabilities/traces" title="Learn how Dynatrace Traces powered by Grail consumption is calculated using the Dynatrace Platform Subscription (DPS) model.">Traces powered by Grail overview (DPS)</a></li>
<li><a href="/docs/license/capabilities/metrics" title="Learn how Dynatrace Metrics powered by Grail consumption is calculated using the Dynatrace Platform Subscription model.">Metrics powered by Grail overview (DPS)</a></li>
</ul>
<hr />
<h2 id="source-opentelemetry-security-contextmd">Source: opentelemetry-security-context.md<a class="headerlink" href="#source-opentelemetry-security-contextmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Set up Grail permissions for OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/opentelemetry-security-context
scraped: 2026-02-16T21:13:02.782266</p>
<hr />
<h1 id="set-up-grail-permissions-for-opentelemetry">Set up Grail permissions for OpenTelemetry<a class="headerlink" href="#set-up-grail-permissions-for-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="set-up-grail-permissions-for-opentelemetry_1">Set up Grail permissions for OpenTelemetry<a class="headerlink" href="#set-up-grail-permissions-for-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Nov 20, 2025</li>
</ul>
<p>Dynatrace has a <a href="/docs/platform/grail/organize-data/assign-permissions-in-grail" title="Find out how to assign permissions to buckets and tables in Grail.">permission model for Grail</a>. This applies to all telemetry data, such as metrics, events, spans, and logs.</p>
<p>We recommend setting up permissions along organizational lines and deployment scopes. Suitable concepts include host groups, Kubernetes clusters, and Kubernetes namespaces. These attributes are typically available for all telemetry data ingested via Dynatrace collection methods like OneAgent, OpenTelemetry, or Kubernetes operator. Hence, you can use these attributes to enable <a href="/docs/platform/grail/organize-data/assign-permissions-in-grail#grail-permissions-table-record" title="Find out how to assign permissions to buckets and tables in Grail.">record-level permissions</a>.</p>
<p>For Kubernetes-based deployments, make sure Dynatrace Operator has <a href="/docs/ingest-from/setup-on-k8s/guides/metadata-automation/metadata-enrichment" title="Metadata enrichment in the Dynatrace Operator adds context to Kubernetes pods by attaching relevant metadata to entities like pods, hosts, and processes for better observability.">metadata enrichment</a> enabled.</p>
<p>If you only require a basic permission concept, setting up bucket-level permissions is the best option. You can then route your data to the correct bucket in OpenPipeline by matching one of the mentioned deployment-relevant primary Grail fields.</p>
<p>For more control in Dynatrace, you can set up policy boundaries with more granular restrictions on a data level. By default, you can use the following attributes:</p>
<ul>
<li><code>dt.host_group.id</code></li>
<li><code>k8s.cluster.name</code></li>
<li><code>k8s.namespace.name</code></li>
<li>Any other attribute listed in the <a href="/docs/platform/grail/organize-data/assign-permissions-in-grail#grail-permissions-table-record" title="Find out how to assign permissions to buckets and tables in Grail.">permission model</a></li>
</ul>
<p>Dynatrace provides a comprehensive permission model for Grail that applies to all telemetry data-including metrics, logs, spans, and events.</p>
<h2 id="set-up-security-context">Set up security context<a class="headerlink" href="#set-up-security-context" title="Permanent link">&para;</a></h2>
<p>If the permissions on deployment-level attributes or the bucket level are insufficient, Dynatrace allows you to set up fine-grained permissions by adding a <code>dt.security_context</code> attribute to your data. This context can represent your security architecture and could even be hierarchical by encoding this into a string such as <code>department-A/department-AB/team-C</code>.</p>
<p>To use <code>dt.security_context</code> and other attributes for permissions, make sure these attributes are present in your telemetry data.</p>
<p>To add the security context to your OpenTelemetry data, enrich your signals with the <code>dt.security_context</code> attribute. Dynatrace automatically propagates the <code>dt.security_context</code> value from spans to the service entity for span data.</p>
<p>You can use your existing labels and tags to facilitate permissions in Dynatrace.</p>
<h3 id="security-context-via-kubernetes-labels-or-annotations">Security context via Kubernetes labels or annotations<a class="headerlink" href="#security-context-via-kubernetes-labels-or-annotations" title="Permanent link">&para;</a></h3>
<p>You can use <a href="/docs/ingest-from/setup-on-k8s/guides/metadata-automation/k8s-metadata-telemetry-enrichment" title="Guides for telemetry enrichment on Kubernetes">Kubernetes labels or annotations</a> as a source for your <code>dt.security_context</code>. This is one of the most convenient ways of doing this.</p>
<p>Alternatively, you can <a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">configure the OpenTelemetry Collector to enrich data in transit</a>. If you do this, you might have to map your Kubernetes metadata to <code>dt.security_context</code> in OpenPipeline.</p>
<h3 id="security-context-via-opentelemetry-resource-attributes">Security context via OpenTelemetry resource attributes<a class="headerlink" href="#security-context-via-opentelemetry-resource-attributes" title="Permanent link">&para;</a></h3>
<p>To use the <a href="/docs/deliver/release-monitoring/version-detection-strategies#otel_resource_attributes" title="Metadata for version detection in different technologies"><code>OTEL_RESOURCE_ATTRIBUTES</code></a> environment variable, just directly set the <code>dt.security_context</code> as a resource attribute. You can also use any resource attribute in OpenPipeline as a source for your <code>dt.security_context</code>.</p>
<h3 id="security-context-via-oneagent-metadata-file">Security context via OneAgent metadata file<a class="headerlink" href="#security-context-via-oneagent-metadata-file" title="Permanent link">&para;</a></h3>
<p>Dynatrace OneAgent provides enrichment files or environment variables to <a href="/docs/ingest-from/extend-dynatrace/extend-data#operator-enrichment-directory" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">add attributes directly in your application code</a>.</p>
<p>To read more about enrichment options and setup, see how to <a href="/docs/ingest-from/setup-on-k8s/guides/metadata-automation/k8s-metadata-telemetry-enrichment#expand--enrich-via-environment-variable--4" title="Guides for telemetry enrichment on Kubernetes">enrich via environment variable</a>.</p>
<hr />
<h2 id="source-ingest-logsmd">Source: ingest-logs.md<a class="headerlink" href="#source-ingest-logsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest OTLP logs
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api/ingest-logs
scraped: 2026-02-16T21:30:49.394236</p>
<hr />
<h1 id="ingest-otlp-logs">Ingest OTLP logs<a class="headerlink" href="#ingest-otlp-logs" title="Permanent link">&para;</a></h1>
<h1 id="ingest-otlp-logs_1">Ingest OTLP logs<a class="headerlink" href="#ingest-otlp-logs_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Reference</li>
<li>3-min read</li>
<li>Updated on Feb 10, 2026</li>
</ul>
<p>OpenTelemetry supports attributes at different levels in an OpenTelemetry log request, such as the resource level, scope level, and record level.</p>
<p>The Log ingestion API collects and attempts to automatically transform log data.</p>
<h2 id="data-transformation">Data transformation<a class="headerlink" href="#data-transformation" title="Permanent link">&para;</a></h2>
<p>Each log record from the ingested batch is mapped to a single Dynatrace log record, which contains three special attributes: <code>timestamp</code>, <code>loglevel</code>, <code>content</code>, and a set of other key-value attributes. These properties are set based on keys present in the input object as follows.</p>
<h3 id="timestamp">Timestamp<a class="headerlink" href="#timestamp" title="Permanent link">&para;</a></h3>
<ul>
<li>Set based on the <strong>Timestamp</strong> field of the input log record. See the differences between data models in the <a href="#otlp-structured-logs">Log ingestion API processing</a> section below for more details.</li>
<li>Log events older than the <strong>Log Age</strong> limit are discarded. Timestamps more than 10 minutes ahead of the current time are replaced with the current time. See the <a href="#ingestion-limits">Ingestion limits</a> section for details.</li>
<li>The default value is the current timestamp.</li>
</ul>
<h3 id="log-level">Log level<a class="headerlink" href="#log-level" title="Permanent link">&para;</a></h3>
<ul>
<li>Set based on the <strong>SeverityText</strong> field (first priority) or <strong>SeverityNumber</strong> field (secondnd priority) of the input log record. See the differences between data models in the section <a href="#otlp-structured-logs">Log ingestion API processing</a> below for more details.</li>
<li>The default value is <code>NONE</code>.</li>
</ul>
<h3 id="content">Content<a class="headerlink" href="#content" title="Permanent link">&para;</a></h3>
<ul>
<li>The content is set based on the <strong>Body</strong> field of the input log record.</li>
<li>If the <strong>Body</strong> field is not a string type, the value is stringified. In case of complex types, it is stringified as a JSON string. For kvlist_value type, see the differences between data models in the <a href="#otlp-structured-logs">Log ingestion API processing</a> section below for more details.</li>
</ul>
<h3 id="attributes">Attributes<a class="headerlink" href="#attributes" title="Permanent link">&para;</a></h3>
<ul>
<li>Contains all other attributes from the input record's attributes contained in the sections: <strong>Resource</strong>, <strong>InstrumentationScope</strong>, and <strong>Attributes</strong>.</li>
<li>The <code>TraceID</code> and <code>SpanID</code> attributes are mapped to the <code>trace_id</code> and <code>span_id</code> fields, and their values are converted to hexadecimal representation (e.g., <code>0xCAFEBABE</code>).</li>
<li>Automatic attribute. The <code>dt.auth.origin</code> attribute is automatically added to every log record ingested via API. This attribute is the public part of the API key that the log source authorizes to connect to the generic log ingest API.</li>
</ul>
<p>All attributes should preferably map to <strong>semantic attributes</strong> for Dynatrace to interpret them correctly.</p>
<ul>
<li>Logs on Grail: All attributes can be used in queries, though Semantic Dictionary helps Davis AI in the interpretation of the logs. Refer to the <a href="/docs/semantic-dictionary" title="The Semantic Dictionary defines standardized field names used across monitoring data types like logs, events, spans, metrics, and entities.">Semantic Dictionary</a> for more details.</li>
<li>Log Monitoring Classic: Refer to the <a href="/docs/analyze-explore-automate/log-monitoring/acquire-log-data/logs-classic-ingestion-api/log-classic-semantic-attributes" title="Supported semantic attributes that are indexed in Log Monitoring Classic.">Semantic attributes (Logs Classic)</a> for more details.</li>
</ul>
<h2 id="data-types">Data types<a class="headerlink" href="#data-types" title="Permanent link">&para;</a></h2>
<p>Dynatrace supports OpenTelemetry data types as described in the sections below.</p>
<h3 id="scalar-value">Scalar value<a class="headerlink" href="#scalar-value" title="Permanent link">&para;</a></h3>
<p>Scalar values are transformed as follows:</p>
<ul>
<li>Logs on Grail with OpenPipeline custom processing (Dynatrace SaaS version 1.295+, Environment ActiveGate version 1.295+): All JSON data types (string, number, boolean, null) are supported. All attributes can be used in queries. Keys are case-sensitive.</li>
<li>Logs on Grail with OpenPipeline routed to Classic Pipeline: All attribute keys are lowercased and all attribute values are stringified. All attributes can be used in queries.</li>
<li>Log Monitoring Classic: All attribute keys are lowercased and all attribute values are stringified. Custom attributes and semantic attributes can generally be used in queries.</li>
</ul>
<h3 id="byte-array">Byte array<a class="headerlink" href="#byte-array" title="Permanent link">&para;</a></h3>
<p>Byte arrays are converted to base64-encoded strings. For example, the following array</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>[0x68, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x77, 0x6f, 0x72, 0x6c, 0x64]
</code></pre></div>
<p>is transformed and ingested as <code>aGVsbG8gd29yZA==</code>.</p>
<h3 id="array">Array<a class="headerlink" href="#array" title="Permanent link">&para;</a></h3>
<p>Array attribute values are converted to arrays of a uniform type. The target type is chosen according to the following rules:</p>
<ul>
<li>Complex values, such as arrays, or objects are mapped to JSON string values.</li>
<li>If any value in the array is a string, or if any value must be converted to a string (e.g., an object or array), the target type of the entire array is string.</li>
<li>If all values in the source array are numeric, the target array type is numeric.</li>
<li>Null values are considered compatible with any type.</li>
</ul>
<h3 id="map">Map<a class="headerlink" href="#map" title="Permanent link">&para;</a></h3>
<p>Map processing depends on the data model used. See <a href="#otlp-structured-logs">Log ingestion API processing</a> below for more details.</p>
<p>For example, this attribute map <code>planet</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>{
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>&quot;name&quot;: &quot;earth&quot;
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a>
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a>
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a>&quot;system&quot; : {
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a>
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a>
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a>
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a>&quot;name&quot;: &quot;solar&quot;,
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a>
<a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a>
<a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a>
<a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a>&quot;galaxy&quot;: {
<a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a>
<a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a>
<a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a>
<a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a>&quot;name&quot;: &quot;milky way&quot;,
<a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a>
<a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a>
<a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a>
<a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a>&quot;group&quot;: {
<a id="__codelineno-58-26" name="__codelineno-58-26" href="#__codelineno-58-26"></a>
<a id="__codelineno-58-27" name="__codelineno-58-27" href="#__codelineno-58-27"></a>
<a id="__codelineno-58-28" name="__codelineno-58-28" href="#__codelineno-58-28"></a>
<a id="__codelineno-58-29" name="__codelineno-58-29" href="#__codelineno-58-29"></a>&quot;name&quot;: &quot;local&quot;
<a id="__codelineno-58-30" name="__codelineno-58-30" href="#__codelineno-58-30"></a>
<a id="__codelineno-58-31" name="__codelineno-58-31" href="#__codelineno-58-31"></a>
<a id="__codelineno-58-32" name="__codelineno-58-32" href="#__codelineno-58-32"></a>
<a id="__codelineno-58-33" name="__codelineno-58-33" href="#__codelineno-58-33"></a>}
<a id="__codelineno-58-34" name="__codelineno-58-34" href="#__codelineno-58-34"></a>
<a id="__codelineno-58-35" name="__codelineno-58-35" href="#__codelineno-58-35"></a>
<a id="__codelineno-58-36" name="__codelineno-58-36" href="#__codelineno-58-36"></a>
<a id="__codelineno-58-37" name="__codelineno-58-37" href="#__codelineno-58-37"></a>}
<a id="__codelineno-58-38" name="__codelineno-58-38" href="#__codelineno-58-38"></a>
<a id="__codelineno-58-39" name="__codelineno-58-39" href="#__codelineno-58-39"></a>
<a id="__codelineno-58-40" name="__codelineno-58-40" href="#__codelineno-58-40"></a>
<a id="__codelineno-58-41" name="__codelineno-58-41" href="#__codelineno-58-41"></a>}
<a id="__codelineno-58-42" name="__codelineno-58-42" href="#__codelineno-58-42"></a>
<a id="__codelineno-58-43" name="__codelineno-58-43" href="#__codelineno-58-43"></a>
<a id="__codelineno-58-44" name="__codelineno-58-44" href="#__codelineno-58-44"></a>
<a id="__codelineno-58-45" name="__codelineno-58-45" href="#__codelineno-58-45"></a>}
</code></pre></div>
<p>would be flattened into four attributes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>&quot;planet.name&quot;: &quot;earth&quot;
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>&quot;planet.system.name&quot;: &quot;solar&quot;
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a>
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a>
<a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a>&quot;planet.system.galaxy.name&quot;: &quot;milky way&quot;
<a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a>
<a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a>
<a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a>
<a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a>&quot;planet.system.galaxy.group.name&quot;: &quot;local&quot;
</code></pre></div>
<ul>
<li>Scalar values are ingested in their string representation (see <a href="#scalar-value">scalar value</a>).</li>
<li>Byte arrays are ingested as Base64 strings (see <a href="#byte-array">byte array</a>).</li>
<li><code>Any</code> arrays are ingested as lists, with values being transformed as <a href="#array">arrays</a>.</li>
<li>Maps are flattened as outlined above (<a href="#ingestion-limits">up to five levels</a>).</li>
</ul>
<h2 id="attribute-ingestion">Attribute ingestion<a class="headerlink" href="#attribute-ingestion" title="Permanent link">&para;</a></h2>
<p>OpenTelemetry supports attributes at different levels in an OpenTelemetry log request, such as the resource level, scope level, and record level.</p>
<p>When Dynatrace ingests OpenTelemetry logs, it resolves duplicate attributes and automatically recognizes certain attributes names.</p>
<h3 id="duplicate-attributes">Duplicate attributes<a class="headerlink" href="#duplicate-attributes" title="Permanent link">&para;</a></h3>
<p>Dynatrace resolves duplicate attribute names automatically.
The exact method depends on the data model.</p>
<h4 id="flattened-data-model">Flattened data model<a class="headerlink" href="#flattened-data-model" title="Permanent link">&para;</a></h4>
<p>When attributes are saved in a flattened fashion on the Dynatrace side, there may be name collisions if attributes on different levels share the same name. Dynatrace resolves this by prefixing duplicate attributes with <code>overwritten[COUNTER].</code>. The counter value indicates how many times the attribute name has been already encountered as a duplicate.</p>
<p>For example, if you have three attributes all named <code>my.attribute</code> on the resource, scope, and log levels:</p>
<ul>
<li>The resource attribute is ingested as <code>my.attribute</code>.</li>
<li>The scope attribute is ingested as <code>overwritten1.my.attribute</code>.</li>
<li>The log attribute is ingested as <code>overwritten2.my.attribute</code>.</li>
</ul>
<h4 id="raw-data-model">Raw data model<a class="headerlink" href="#raw-data-model" title="Permanent link">&para;</a></h4>
<p>In the raw data model, OTLP resource attributes and OTLP attributes are parsed into Dynatrace top-level attributes, and the OTLP body is parsed into the content.</p>
<p>OTLP resource attributes and OTLP attributes are parsed into Dynatrace top-level attributes, and the OTLP body is parsed into the content.</p>
<p>Dynatrace prefixes duplicate attributes with an incrementing counter, for example <code>overwritten1.myattribute</code>. The counter value indicates how many times the attribute has been encountered as a duplicate. This avoids name collisions when attributes at different OTLP levels share the same name.</p>
<h3 id="data-transformation-and-automatic-parsing">Data transformation and automatic parsing<a class="headerlink" href="#data-transformation-and-automatic-parsing" title="Permanent link">&para;</a></h3>
<p>A number of attribute names are automatically recognized by Dynatrace and mapped to the respective Dynatrace log field.
These fields are defined in the Semantic Dictionary, see <a href="/docs/semantic-dictionary/model/log" title="Get to know the Semantic Dictionary models related to Log Analytics.">Log Management and Analytics</a>.</p>
<p>The timestamp, severity, and log message are set based on keys present in the input JSON object, as described in the following sections.</p>
<p>For a full list of attributes and their names, see <a href="/docs/dynatrace-api/environment-api/log-monitoring-v2/post-ingest-logs#request-body-objects" title="Push custom logs to Dynatrace via the Log Monitoring API v2.">Log Monitoring API v2 - POST ingest logs</a>.</p>
<h4 id="timestamp_1">Timestamp<a class="headerlink" href="#timestamp_1" title="Permanent link">&para;</a></h4>
<p>The timestamp (<code>timestamp</code>) is determined based on one of the following, evaluated in order.</p>
<ol>
<li>The <code>OTLP message timestamp</code> field.</li>
<li>The content of the body (if the body is a map).</li>
<li>The content of the OTLP log record.</li>
</ol>
<p>If the timestamp is taken from the body or OTLP log record, the value is the first found attribute in the following list, evaluated in order:</p>
<ol>
<li><code>timestamp</code></li>
<li><code>@timestamp</code></li>
<li><code>_timestamp</code></li>
<li><code>eventtime</code></li>
<li><code>date</code></li>
<li><code>published_date</code></li>
<li><code>syslog.timestamp</code></li>
<li><code>syslog.timestamp</code></li>
<li><code>epochSecond</code></li>
<li><code>startTime</code></li>
<li><code>datetime</code></li>
<li><code>ts</code></li>
<li><code>timeMillis</code></li>
<li><code>@t</code></li>
</ol>
<p>Supported timestamp formats are: <code>UTC milliseconds</code>, <code>RFC3339</code>, and <code>RFC3164</code>.
For unsupported timestamp formats, the current timestamp is used, and the value of the unsupported format is stored in the <code>unparsed_timestamp</code> attribute.</p>
<p>Log records older than the <a href="/docs/analyze-explore-automate/logs/lma-limits#log-ingestion-limits" title="Default limits for the latest version of Dynatrace Log Management and Analytics.">log age limit</a> are discarded. Timestamps more than 10 minutes ahead of the current time are replaced with the current time.</p>
<p>If there is no supported timestamp key in the log record, the default value is the current timestamp.</p>
<p>If there is no timezone in the timestamp, the default timezone is UTC.</p>
<h4 id="severity">Severity<a class="headerlink" href="#severity" title="Permanent link">&para;</a></h4>
<p>The severity (<code>loglevel</code>), is determined based on one of the following, evaluated in order.</p>
<ol>
<li>The <code>OTLP message severity</code> field.</li>
<li>The <code>severityText</code> field.</li>
<li>The content of the body (if the body is a map).</li>
<li>The content of the OTLP log record.</li>
</ol>
<p>If the severity is taken from the body or OTLP log record, the value is the first found attribute in the following list, evaluated in order:</p>
<ol>
<li><code>loglevel</code></li>
<li><code>status</code></li>
<li><code>severity</code></li>
<li><code>level</code></li>
<li><code>syslog.severity</code></li>
</ol>
<p>The default value is <code>NONE</code>.</p>
<h4 id="log-message">Log message<a class="headerlink" href="#log-message" title="Permanent link">&para;</a></h4>
<p>The log message (<code>content</code>), is determined based on the <code>OTLP log record body</code> field.</p>
<ul>
<li>
<p>If body is a scalar value, log content is set to the string representation of that value.</p>
</li>
<li>
<p>If not, further processing depends on the data model:</p>
</li>
<li>
<p>Flattened model:</p>
<ul>
<li>When the body is a map, content is set based on one of the following body attributes: content, message, payload, body, log (or left empty when no such key is present).</li>
<li>When the body is an array, the content is set to the string representation of the array.</li>
<li>Raw model: The content is set to the string representation of the array or map in the body.</li>
</ul>
</li>
</ul>
<h2 id="ingestion-limits">Ingestion limits<a class="headerlink" href="#ingestion-limits" title="Permanent link">&para;</a></h2>
<p>See <a href="/docs/analyze-explore-automate/logs/lma-limits" title="Default limits for the latest version of Dynatrace Log Management and Analytics.">Log Management and Analytics default limits</a> and <a href="/docs/analyze-explore-automate/log-monitoring/log-monitoring-limits" title="Default limits for the latest version of Dynatrace Log Monitoring.">Log Monitoring default limits (Logs Classic)</a> for the limits applied to ingested log requests, their attributes, and their attribute values.</p>
<h2 id="log-ingestion-api-processing">Log ingestion API processing<a class="headerlink" href="#log-ingestion-api-processing" title="Permanent link">&para;</a></h2>
<p>There are two data models that identify how structured logs are processed by log ingestion endpoints: <strong>raw</strong> and <strong>flattened</strong>. The difference between the two is in how attributes with object/dictionary values are transformed.</p>
<p>If this configuration option is not specified, the default behavior depends on when your environment was created.</p>
<ul>
<li>For Dynatrace version 1.331+: Raw.</li>
<li>For Dynatrace versions 1.330 and earlier: Flattened.</li>
</ul>
<p>Escaping in output examples is for visualization purposes only. <code>\"</code> is billed as one character.</p>
<h3 id="raw-data-model_1">Raw data model<a class="headerlink" href="#raw-data-model_1" title="Permanent link">&para;</a></h3>
<p>The raw data model transforms the content of structured logs as described in the sections below. All the following examples apply to Log ingestion API endpoints available on Environment ActiveGateand SaaS.</p>
<p>When using log shippers such as <a href="/docs/analyze-explore-automate/logs/lma-log-ingestion/lma-stream-logs-with-fluent-bit" title="Integrate Fluent Bit to stream logs to Dynatrace.">Fluentbit</a>, <a href="/docs/analyze-explore-automate/logs/lma-log-ingestion/lma-stream-logs-fluentd-k8s" title="Integrate Fluentd with Dynatrace to stream logs from nodes and pods to Dynatrace.">Fluentd</a> or <a href="/docs/analyze-explore-automate/logs/lma-log-ingestion/lma-stream-logs-with-logstash" title="Integrate Logstash to stream logs from nodes and pods to Dynatrace.">Logstash</a>, avoid using JSON parsers on the shipper side and let Dynatrace handle the JSON parsing instead. This approach reduces processing overhead on your log shipper and ensures consistent parsing behavior.</p>
<h4 id="maps-and-arrays-in-attributes">Maps and arrays in attributes<a class="headerlink" href="#maps-and-arrays-in-attributes" title="Permanent link">&para;</a></h4>
<p>For the raw data model, the map attribute values are turned into a JSON string, and the array attribute values are turned into an array of the uniform type.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>body: &quot;Hello world!&quot;
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>Resource:
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a>- &quot;any-attr-type-3&quot;: {&quot;3&quot; = &quot;c&quot;}
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a>
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a>
<a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a>
<a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a>Scope:
<a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a>
<a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a>
<a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a>
<a id="__codelineno-60-17" name="__codelineno-60-17" href="#__codelineno-60-17"></a>- &quot;any-attr-type-2&quot;: {&quot;2&quot; = &quot;b&quot;}
<a id="__codelineno-60-18" name="__codelineno-60-18" href="#__codelineno-60-18"></a>
<a id="__codelineno-60-19" name="__codelineno-60-19" href="#__codelineno-60-19"></a>
<a id="__codelineno-60-20" name="__codelineno-60-20" href="#__codelineno-60-20"></a>
<a id="__codelineno-60-21" name="__codelineno-60-21" href="#__codelineno-60-21"></a>Attributes:
<a id="__codelineno-60-22" name="__codelineno-60-22" href="#__codelineno-60-22"></a>
<a id="__codelineno-60-23" name="__codelineno-60-23" href="#__codelineno-60-23"></a>
<a id="__codelineno-60-24" name="__codelineno-60-24" href="#__codelineno-60-24"></a>
<a id="__codelineno-60-25" name="__codelineno-60-25" href="#__codelineno-60-25"></a>- &quot;any-attr-type-1&quot;: {&quot;1&quot; = &quot;a&quot;}
<a id="__codelineno-60-26" name="__codelineno-60-26" href="#__codelineno-60-26"></a>
<a id="__codelineno-60-27" name="__codelineno-60-27" href="#__codelineno-60-27"></a>
<a id="__codelineno-60-28" name="__codelineno-60-28" href="#__codelineno-60-28"></a>
<a id="__codelineno-60-29" name="__codelineno-60-29" href="#__codelineno-60-29"></a>- &quot;any-attr-type-4&quot;:
<a id="__codelineno-60-30" name="__codelineno-60-30" href="#__codelineno-60-30"></a>
<a id="__codelineno-60-31" name="__codelineno-60-31" href="#__codelineno-60-31"></a>
<a id="__codelineno-60-32" name="__codelineno-60-32" href="#__codelineno-60-32"></a>
<a id="__codelineno-60-33" name="__codelineno-60-33" href="#__codelineno-60-33"></a>[ &quot;val1&quot;, 10, -123.456, false, 0x01020304 ]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>√¢¬Ä¬úcontent√¢¬Ä¬ù: &quot;Hello world!&quot;
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>&quot;any-attr-type-1&quot;: &quot;{\&quot;1\&quot;: \&quot;a\&quot;}&quot;
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a>
<a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a>
<a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a>&quot;any-attr-type-2&quot;: &quot;{\&quot;2\&quot;: \&quot;b\&quot;}&quot;
<a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a>
<a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a>
<a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a>
<a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a>&quot;any-attr-type-3&quot;: &quot;{\&quot;3\&quot;: \&quot;c\&quot;}&quot;
<a id="__codelineno-61-14" name="__codelineno-61-14" href="#__codelineno-61-14"></a>
<a id="__codelineno-61-15" name="__codelineno-61-15" href="#__codelineno-61-15"></a>
<a id="__codelineno-61-16" name="__codelineno-61-16" href="#__codelineno-61-16"></a>
<a id="__codelineno-61-17" name="__codelineno-61-17" href="#__codelineno-61-17"></a>&quot;any-attr-type-4&quot;:
<a id="__codelineno-61-18" name="__codelineno-61-18" href="#__codelineno-61-18"></a>
<a id="__codelineno-61-19" name="__codelineno-61-19" href="#__codelineno-61-19"></a>
<a id="__codelineno-61-20" name="__codelineno-61-20" href="#__codelineno-61-20"></a>
<a id="__codelineno-61-21" name="__codelineno-61-21" href="#__codelineno-61-21"></a>[&quot;val1&quot;, &quot;10&quot;, &quot;-123.456&quot;, &quot;false&quot;, &quot;AQIDBA==&quot;]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>KeyValue {
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a>
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a>key: &quot;test&quot;
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a>
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a>
<a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a>
<a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a>value: {
<a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a>
<a id="__codelineno-62-11" name="__codelineno-62-11" href="#__codelineno-62-11"></a>
<a id="__codelineno-62-12" name="__codelineno-62-12" href="#__codelineno-62-12"></a>
<a id="__codelineno-62-13" name="__codelineno-62-13" href="#__codelineno-62-13"></a>kvlist_value: {
<a id="__codelineno-62-14" name="__codelineno-62-14" href="#__codelineno-62-14"></a>
<a id="__codelineno-62-15" name="__codelineno-62-15" href="#__codelineno-62-15"></a>
<a id="__codelineno-62-16" name="__codelineno-62-16" href="#__codelineno-62-16"></a>
<a id="__codelineno-62-17" name="__codelineno-62-17" href="#__codelineno-62-17"></a>values: [
<a id="__codelineno-62-18" name="__codelineno-62-18" href="#__codelineno-62-18"></a>
<a id="__codelineno-62-19" name="__codelineno-62-19" href="#__codelineno-62-19"></a>
<a id="__codelineno-62-20" name="__codelineno-62-20" href="#__codelineno-62-20"></a>
<a id="__codelineno-62-21" name="__codelineno-62-21" href="#__codelineno-62-21"></a>{
<a id="__codelineno-62-22" name="__codelineno-62-22" href="#__codelineno-62-22"></a>
<a id="__codelineno-62-23" name="__codelineno-62-23" href="#__codelineno-62-23"></a>
<a id="__codelineno-62-24" name="__codelineno-62-24" href="#__codelineno-62-24"></a>
<a id="__codelineno-62-25" name="__codelineno-62-25" href="#__codelineno-62-25"></a>key: &quot;attribute&quot;
<a id="__codelineno-62-26" name="__codelineno-62-26" href="#__codelineno-62-26"></a>
<a id="__codelineno-62-27" name="__codelineno-62-27" href="#__codelineno-62-27"></a>
<a id="__codelineno-62-28" name="__codelineno-62-28" href="#__codelineno-62-28"></a>
<a id="__codelineno-62-29" name="__codelineno-62-29" href="#__codelineno-62-29"></a>value: {
<a id="__codelineno-62-30" name="__codelineno-62-30" href="#__codelineno-62-30"></a>
<a id="__codelineno-62-31" name="__codelineno-62-31" href="#__codelineno-62-31"></a>
<a id="__codelineno-62-32" name="__codelineno-62-32" href="#__codelineno-62-32"></a>
<a id="__codelineno-62-33" name="__codelineno-62-33" href="#__codelineno-62-33"></a>kvlist_value: {
<a id="__codelineno-62-34" name="__codelineno-62-34" href="#__codelineno-62-34"></a>
<a id="__codelineno-62-35" name="__codelineno-62-35" href="#__codelineno-62-35"></a>
<a id="__codelineno-62-36" name="__codelineno-62-36" href="#__codelineno-62-36"></a>
<a id="__codelineno-62-37" name="__codelineno-62-37" href="#__codelineno-62-37"></a>values: [
<a id="__codelineno-62-38" name="__codelineno-62-38" href="#__codelineno-62-38"></a>
<a id="__codelineno-62-39" name="__codelineno-62-39" href="#__codelineno-62-39"></a>
<a id="__codelineno-62-40" name="__codelineno-62-40" href="#__codelineno-62-40"></a>
<a id="__codelineno-62-41" name="__codelineno-62-41" href="#__codelineno-62-41"></a>{ key: &quot;one&quot;, value: { string_value: &quot;value 1&quot; } },
<a id="__codelineno-62-42" name="__codelineno-62-42" href="#__codelineno-62-42"></a>
<a id="__codelineno-62-43" name="__codelineno-62-43" href="#__codelineno-62-43"></a>
<a id="__codelineno-62-44" name="__codelineno-62-44" href="#__codelineno-62-44"></a>
<a id="__codelineno-62-45" name="__codelineno-62-45" href="#__codelineno-62-45"></a>{ key: &quot;two&quot;, value: { string_value: &quot;value 2&quot; } }
<a id="__codelineno-62-46" name="__codelineno-62-46" href="#__codelineno-62-46"></a>
<a id="__codelineno-62-47" name="__codelineno-62-47" href="#__codelineno-62-47"></a>
<a id="__codelineno-62-48" name="__codelineno-62-48" href="#__codelineno-62-48"></a>
<a id="__codelineno-62-49" name="__codelineno-62-49" href="#__codelineno-62-49"></a>]
<a id="__codelineno-62-50" name="__codelineno-62-50" href="#__codelineno-62-50"></a>
<a id="__codelineno-62-51" name="__codelineno-62-51" href="#__codelineno-62-51"></a>
<a id="__codelineno-62-52" name="__codelineno-62-52" href="#__codelineno-62-52"></a>
<a id="__codelineno-62-53" name="__codelineno-62-53" href="#__codelineno-62-53"></a>}
<a id="__codelineno-62-54" name="__codelineno-62-54" href="#__codelineno-62-54"></a>
<a id="__codelineno-62-55" name="__codelineno-62-55" href="#__codelineno-62-55"></a>
<a id="__codelineno-62-56" name="__codelineno-62-56" href="#__codelineno-62-56"></a>
<a id="__codelineno-62-57" name="__codelineno-62-57" href="#__codelineno-62-57"></a>}
<a id="__codelineno-62-58" name="__codelineno-62-58" href="#__codelineno-62-58"></a>
<a id="__codelineno-62-59" name="__codelineno-62-59" href="#__codelineno-62-59"></a>
<a id="__codelineno-62-60" name="__codelineno-62-60" href="#__codelineno-62-60"></a>
<a id="__codelineno-62-61" name="__codelineno-62-61" href="#__codelineno-62-61"></a>}
<a id="__codelineno-62-62" name="__codelineno-62-62" href="#__codelineno-62-62"></a>
<a id="__codelineno-62-63" name="__codelineno-62-63" href="#__codelineno-62-63"></a>
<a id="__codelineno-62-64" name="__codelineno-62-64" href="#__codelineno-62-64"></a>
<a id="__codelineno-62-65" name="__codelineno-62-65" href="#__codelineno-62-65"></a>]
<a id="__codelineno-62-66" name="__codelineno-62-66" href="#__codelineno-62-66"></a>
<a id="__codelineno-62-67" name="__codelineno-62-67" href="#__codelineno-62-67"></a>
<a id="__codelineno-62-68" name="__codelineno-62-68" href="#__codelineno-62-68"></a>
<a id="__codelineno-62-69" name="__codelineno-62-69" href="#__codelineno-62-69"></a>}
<a id="__codelineno-62-70" name="__codelineno-62-70" href="#__codelineno-62-70"></a>
<a id="__codelineno-62-71" name="__codelineno-62-71" href="#__codelineno-62-71"></a>
<a id="__codelineno-62-72" name="__codelineno-62-72" href="#__codelineno-62-72"></a>
<a id="__codelineno-62-73" name="__codelineno-62-73" href="#__codelineno-62-73"></a>}
<a id="__codelineno-62-74" name="__codelineno-62-74" href="#__codelineno-62-74"></a>
<a id="__codelineno-62-75" name="__codelineno-62-75" href="#__codelineno-62-75"></a>
<a id="__codelineno-62-76" name="__codelineno-62-76" href="#__codelineno-62-76"></a>
<a id="__codelineno-62-77" name="__codelineno-62-77" href="#__codelineno-62-77"></a>}
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>&quot;test&quot;: &quot;{ \&quot;attribute\&quot;: {\&quot;one\&quot;: \&quot;value 1\&quot;, \&quot;two\&quot;: \&quot;value 2\&quot; } }&quot;
</code></pre></div>
<h4 id="map-in-body">Map in body<a class="headerlink" href="#map-in-body" title="Permanent link">&para;</a></h4>
<p>In this case, the <strong>Body</strong> field of the input log record is converted to a JSON string.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>Body:
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a>{
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a>&quot;content&quot; = &quot;Hello World!&quot;,
<a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a>
<a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a>
<a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a>
<a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a>&quot;my-body-attr-1&quot;: &quot;abc&quot;,
<a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a>
<a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a>
<a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a>
<a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a>&quot;my-body-nested-1&quot;: {
<a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a>
<a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a>
<a id="__codelineno-64-20" name="__codelineno-64-20" href="#__codelineno-64-20"></a>
<a id="__codelineno-64-21" name="__codelineno-64-21" href="#__codelineno-64-21"></a>&quot;subkey&quot;: &quot;val&quot;
<a id="__codelineno-64-22" name="__codelineno-64-22" href="#__codelineno-64-22"></a>
<a id="__codelineno-64-23" name="__codelineno-64-23" href="#__codelineno-64-23"></a>
<a id="__codelineno-64-24" name="__codelineno-64-24" href="#__codelineno-64-24"></a>
<a id="__codelineno-64-25" name="__codelineno-64-25" href="#__codelineno-64-25"></a>},
<a id="__codelineno-64-26" name="__codelineno-64-26" href="#__codelineno-64-26"></a>
<a id="__codelineno-64-27" name="__codelineno-64-27" href="#__codelineno-64-27"></a>
<a id="__codelineno-64-28" name="__codelineno-64-28" href="#__codelineno-64-28"></a>
<a id="__codelineno-64-29" name="__codelineno-64-29" href="#__codelineno-64-29"></a>&quot;@timestamp&quot;: &quot;2025-06-01 13:01:02.123&quot;,
<a id="__codelineno-64-30" name="__codelineno-64-30" href="#__codelineno-64-30"></a>
<a id="__codelineno-64-31" name="__codelineno-64-31" href="#__codelineno-64-31"></a>
<a id="__codelineno-64-32" name="__codelineno-64-32" href="#__codelineno-64-32"></a>
<a id="__codelineno-64-33" name="__codelineno-64-33" href="#__codelineno-64-33"></a>&quot;loglevel&quot;: &quot;INFO&quot;
<a id="__codelineno-64-34" name="__codelineno-64-34" href="#__codelineno-64-34"></a>
<a id="__codelineno-64-35" name="__codelineno-64-35" href="#__codelineno-64-35"></a>
<a id="__codelineno-64-36" name="__codelineno-64-36" href="#__codelineno-64-36"></a>
<a id="__codelineno-64-37" name="__codelineno-64-37" href="#__codelineno-64-37"></a>}
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>&quot;content&quot;: &quot;{ \&quot;content\&quot; = \&quot;Hello World!\&quot;,
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a>\&quot;my-body-attr-1\&quot;: \&quot;abc\&quot;,
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a>\&quot;my-body-nested-1\&quot;: {
<a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a>
<a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a>
<a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a>
<a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a>\&quot;subkey\&quot;: \&quot;val\&quot;
<a id="__codelineno-65-14" name="__codelineno-65-14" href="#__codelineno-65-14"></a>
<a id="__codelineno-65-15" name="__codelineno-65-15" href="#__codelineno-65-15"></a>
<a id="__codelineno-65-16" name="__codelineno-65-16" href="#__codelineno-65-16"></a>
<a id="__codelineno-65-17" name="__codelineno-65-17" href="#__codelineno-65-17"></a>},
<a id="__codelineno-65-18" name="__codelineno-65-18" href="#__codelineno-65-18"></a>
<a id="__codelineno-65-19" name="__codelineno-65-19" href="#__codelineno-65-19"></a>
<a id="__codelineno-65-20" name="__codelineno-65-20" href="#__codelineno-65-20"></a>
<a id="__codelineno-65-21" name="__codelineno-65-21" href="#__codelineno-65-21"></a>\&quot;@timestamp\&quot;: \&quot;2025-06-01 13:01:02.123\&quot;,
<a id="__codelineno-65-22" name="__codelineno-65-22" href="#__codelineno-65-22"></a>
<a id="__codelineno-65-23" name="__codelineno-65-23" href="#__codelineno-65-23"></a>
<a id="__codelineno-65-24" name="__codelineno-65-24" href="#__codelineno-65-24"></a>
<a id="__codelineno-65-25" name="__codelineno-65-25" href="#__codelineno-65-25"></a>\&quot;loglevel\&quot;: \&quot;INFO\&quot;
<a id="__codelineno-65-26" name="__codelineno-65-26" href="#__codelineno-65-26"></a>
<a id="__codelineno-65-27" name="__codelineno-65-27" href="#__codelineno-65-27"></a>
<a id="__codelineno-65-28" name="__codelineno-65-28" href="#__codelineno-65-28"></a>
<a id="__codelineno-65-29" name="__codelineno-65-29" href="#__codelineno-65-29"></a>}&quot;
</code></pre></div>
<h4 id="body-as-array">Body as array<a class="headerlink" href="#body-as-array" title="Permanent link">&para;</a></h4>
<p>In this case, the array in the body is stringified.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>Body:
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>[ &quot;string-val&quot;, true, 12, 12.34, 0x6279746573 ]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>&quot;content&quot;: &quot;[\&quot;string-val\&quot;,true,12,12.34,\&quot;Ynl0ZXM=\&quot;]&quot;
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>...
</code></pre></div>
<h4 id="name-conflicts">Name conflicts<a class="headerlink" href="#name-conflicts" title="Permanent link">&para;</a></h4>
<p>In the raw data model, OTLP resource attributes and OTLP attributes are copied into Dynatrace top-level attributes, and the OTLP body is copied into the content.</p>
<p>Dynatrace prefixes duplicate attributes with an incrementing counter, for example <code>overwritten1.myattribute</code>. The counter value indicates how many times the attribute has been encountered as a duplicate. This avoids name collisions when attributes at different OTLP levels share the same name.</p>
<h3 id="flattened-data-model_1">Flattened data model<a class="headerlink" href="#flattened-data-model_1" title="Permanent link">&para;</a></h3>
<p>With the flattened data model, the content of structured logs is transformed as described in the sections below. All the following examples apply to Log ingestion API endpoints available on Environment ActiveGateand SaaS.</p>
<h4 id="maps-and-arrays-in-attributes_1">Maps and arrays in attributes<a class="headerlink" href="#maps-and-arrays-in-attributes_1" title="Permanent link">&para;</a></h4>
<p>In this case, the map attribute values are flattened, i.e. replaced with keys concatenated using a dot (.) until a simple value is reached in the hierarchy, and the array attribute values are turned into a custom string.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>body: &quot;Hello world!&quot;
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a>
<a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a>
<a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a>Resource:
<a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a>
<a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a>
<a id="__codelineno-68-8" name="__codelineno-68-8" href="#__codelineno-68-8"></a>
<a id="__codelineno-68-9" name="__codelineno-68-9" href="#__codelineno-68-9"></a>- &quot;any-attr-type-3&quot;: {&quot;3&quot; = &quot;c&quot;}
<a id="__codelineno-68-10" name="__codelineno-68-10" href="#__codelineno-68-10"></a>
<a id="__codelineno-68-11" name="__codelineno-68-11" href="#__codelineno-68-11"></a>
<a id="__codelineno-68-12" name="__codelineno-68-12" href="#__codelineno-68-12"></a>
<a id="__codelineno-68-13" name="__codelineno-68-13" href="#__codelineno-68-13"></a>Scope:
<a id="__codelineno-68-14" name="__codelineno-68-14" href="#__codelineno-68-14"></a>
<a id="__codelineno-68-15" name="__codelineno-68-15" href="#__codelineno-68-15"></a>
<a id="__codelineno-68-16" name="__codelineno-68-16" href="#__codelineno-68-16"></a>
<a id="__codelineno-68-17" name="__codelineno-68-17" href="#__codelineno-68-17"></a>- &quot;any-attr-type-2&quot; : {&quot;2&quot; = &quot;b&quot;}
<a id="__codelineno-68-18" name="__codelineno-68-18" href="#__codelineno-68-18"></a>
<a id="__codelineno-68-19" name="__codelineno-68-19" href="#__codelineno-68-19"></a>
<a id="__codelineno-68-20" name="__codelineno-68-20" href="#__codelineno-68-20"></a>
<a id="__codelineno-68-21" name="__codelineno-68-21" href="#__codelineno-68-21"></a>Attributes:
<a id="__codelineno-68-22" name="__codelineno-68-22" href="#__codelineno-68-22"></a>
<a id="__codelineno-68-23" name="__codelineno-68-23" href="#__codelineno-68-23"></a>
<a id="__codelineno-68-24" name="__codelineno-68-24" href="#__codelineno-68-24"></a>
<a id="__codelineno-68-25" name="__codelineno-68-25" href="#__codelineno-68-25"></a>- &quot;any-attr-type-1&quot; : {&quot;1&quot; = &quot;a&quot;}
<a id="__codelineno-68-26" name="__codelineno-68-26" href="#__codelineno-68-26"></a>
<a id="__codelineno-68-27" name="__codelineno-68-27" href="#__codelineno-68-27"></a>
<a id="__codelineno-68-28" name="__codelineno-68-28" href="#__codelineno-68-28"></a>
<a id="__codelineno-68-29" name="__codelineno-68-29" href="#__codelineno-68-29"></a>- &quot;any-attr-type-4&quot; :
<a id="__codelineno-68-30" name="__codelineno-68-30" href="#__codelineno-68-30"></a>
<a id="__codelineno-68-31" name="__codelineno-68-31" href="#__codelineno-68-31"></a>
<a id="__codelineno-68-32" name="__codelineno-68-32" href="#__codelineno-68-32"></a>
<a id="__codelineno-68-33" name="__codelineno-68-33" href="#__codelineno-68-33"></a>[ &quot;val1&quot;, 10, -123.456, false, 0x01020304 ]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>√¢¬Ä¬úcontent√¢¬Ä¬ù: &quot;Hello world!&quot;
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>&quot;any-attr-type-1.1&quot;: &quot;a&quot;
<a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>
<a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a>
<a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a>
<a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a>&quot;any-attr-type-2.2&quot;: &quot;b&quot;
<a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a>
<a id="__codelineno-69-11" name="__codelineno-69-11" href="#__codelineno-69-11"></a>
<a id="__codelineno-69-12" name="__codelineno-69-12" href="#__codelineno-69-12"></a>
<a id="__codelineno-69-13" name="__codelineno-69-13" href="#__codelineno-69-13"></a>&quot;any-attr-type-3.3&quot;: &quot;c&quot;
<a id="__codelineno-69-14" name="__codelineno-69-14" href="#__codelineno-69-14"></a>
<a id="__codelineno-69-15" name="__codelineno-69-15" href="#__codelineno-69-15"></a>
<a id="__codelineno-69-16" name="__codelineno-69-16" href="#__codelineno-69-16"></a>
<a id="__codelineno-69-17" name="__codelineno-69-17" href="#__codelineno-69-17"></a>&quot;any-attr-type-4&quot;:
<a id="__codelineno-69-18" name="__codelineno-69-18" href="#__codelineno-69-18"></a>
<a id="__codelineno-69-19" name="__codelineno-69-19" href="#__codelineno-69-19"></a>
<a id="__codelineno-69-20" name="__codelineno-69-20" href="#__codelineno-69-20"></a>
<a id="__codelineno-69-21" name="__codelineno-69-21" href="#__codelineno-69-21"></a>[&quot;val1&quot;, 10, -123.456, false, &quot;AQIDBA==&quot;]
</code></pre></div>
<p>Flattening proceeds up to the maximum nesting level specified by the <strong>Nested objects</strong> limit. Structures nested deeper than this are replaced with the string value <code>&lt;truncated due to nesting limit&gt;</code>. See the <a href="#ingestion-limits">Ingestion limits</a> section for details.</p>
<h4 id="map-in-body_1">Map in body<a class="headerlink" href="#map-in-body_1" title="Permanent link">&para;</a></h4>
<p>In this case, the map attributes are merged with the log record.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>Body:
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a>
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a>{
<a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>
<a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a>
<a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a>
<a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a>&quot;content&quot; = &quot;Hello World!&quot;,
<a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a>
<a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a>
<a id="__codelineno-70-12" name="__codelineno-70-12" href="#__codelineno-70-12"></a>
<a id="__codelineno-70-13" name="__codelineno-70-13" href="#__codelineno-70-13"></a>&quot;my-body-attr-1&quot;: &quot;abc&quot;,
<a id="__codelineno-70-14" name="__codelineno-70-14" href="#__codelineno-70-14"></a>
<a id="__codelineno-70-15" name="__codelineno-70-15" href="#__codelineno-70-15"></a>
<a id="__codelineno-70-16" name="__codelineno-70-16" href="#__codelineno-70-16"></a>
<a id="__codelineno-70-17" name="__codelineno-70-17" href="#__codelineno-70-17"></a>&quot;my-body-nested-1&quot;: {
<a id="__codelineno-70-18" name="__codelineno-70-18" href="#__codelineno-70-18"></a>
<a id="__codelineno-70-19" name="__codelineno-70-19" href="#__codelineno-70-19"></a>
<a id="__codelineno-70-20" name="__codelineno-70-20" href="#__codelineno-70-20"></a>
<a id="__codelineno-70-21" name="__codelineno-70-21" href="#__codelineno-70-21"></a>&quot;subkey&quot;: &quot;val&quot;
<a id="__codelineno-70-22" name="__codelineno-70-22" href="#__codelineno-70-22"></a>
<a id="__codelineno-70-23" name="__codelineno-70-23" href="#__codelineno-70-23"></a>
<a id="__codelineno-70-24" name="__codelineno-70-24" href="#__codelineno-70-24"></a>
<a id="__codelineno-70-25" name="__codelineno-70-25" href="#__codelineno-70-25"></a>},
<a id="__codelineno-70-26" name="__codelineno-70-26" href="#__codelineno-70-26"></a>
<a id="__codelineno-70-27" name="__codelineno-70-27" href="#__codelineno-70-27"></a>
<a id="__codelineno-70-28" name="__codelineno-70-28" href="#__codelineno-70-28"></a>
<a id="__codelineno-70-29" name="__codelineno-70-29" href="#__codelineno-70-29"></a>&quot;@timestamp&quot;: &quot;2025-06-01 13:01:02.123&quot;,
<a id="__codelineno-70-30" name="__codelineno-70-30" href="#__codelineno-70-30"></a>
<a id="__codelineno-70-31" name="__codelineno-70-31" href="#__codelineno-70-31"></a>
<a id="__codelineno-70-32" name="__codelineno-70-32" href="#__codelineno-70-32"></a>
<a id="__codelineno-70-33" name="__codelineno-70-33" href="#__codelineno-70-33"></a>&quot;loglevel&quot;: &quot;INFO&quot;
<a id="__codelineno-70-34" name="__codelineno-70-34" href="#__codelineno-70-34"></a>
<a id="__codelineno-70-35" name="__codelineno-70-35" href="#__codelineno-70-35"></a>
<a id="__codelineno-70-36" name="__codelineno-70-36" href="#__codelineno-70-36"></a>
<a id="__codelineno-70-37" name="__codelineno-70-37" href="#__codelineno-70-37"></a>}
<a id="__codelineno-70-38" name="__codelineno-70-38" href="#__codelineno-70-38"></a>
<a id="__codelineno-70-39" name="__codelineno-70-39" href="#__codelineno-70-39"></a>
<a id="__codelineno-70-40" name="__codelineno-70-40" href="#__codelineno-70-40"></a>
<a id="__codelineno-70-41" name="__codelineno-70-41" href="#__codelineno-70-41"></a>Attributes:
<a id="__codelineno-70-42" name="__codelineno-70-42" href="#__codelineno-70-42"></a>
<a id="__codelineno-70-43" name="__codelineno-70-43" href="#__codelineno-70-43"></a>
<a id="__codelineno-70-44" name="__codelineno-70-44" href="#__codelineno-70-44"></a>
<a id="__codelineno-70-45" name="__codelineno-70-45" href="#__codelineno-70-45"></a>- &quot;any-attr-type-1&quot; : &quot;my-attr&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>&quot;content&quot;: &quot;Hello world!&quot;
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a>
<a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a>&quot;timestamp&quot;: &quot;2025-06-01 13:01:02.123&quot;
<a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>
<a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a>
<a id="__codelineno-71-8" name="__codelineno-71-8" href="#__codelineno-71-8"></a>
<a id="__codelineno-71-9" name="__codelineno-71-9" href="#__codelineno-71-9"></a>&quot;loglevel&quot;: &quot;INFO&quot;
<a id="__codelineno-71-10" name="__codelineno-71-10" href="#__codelineno-71-10"></a>
<a id="__codelineno-71-11" name="__codelineno-71-11" href="#__codelineno-71-11"></a>
<a id="__codelineno-71-12" name="__codelineno-71-12" href="#__codelineno-71-12"></a>
<a id="__codelineno-71-13" name="__codelineno-71-13" href="#__codelineno-71-13"></a>&quot;any-attr-type-1&quot;: &quot;my-attr&quot;
<a id="__codelineno-71-14" name="__codelineno-71-14" href="#__codelineno-71-14"></a>
<a id="__codelineno-71-15" name="__codelineno-71-15" href="#__codelineno-71-15"></a>
<a id="__codelineno-71-16" name="__codelineno-71-16" href="#__codelineno-71-16"></a>
<a id="__codelineno-71-17" name="__codelineno-71-17" href="#__codelineno-71-17"></a>&quot;my-body-attr-1&quot;: &quot;abc&quot;
<a id="__codelineno-71-18" name="__codelineno-71-18" href="#__codelineno-71-18"></a>
<a id="__codelineno-71-19" name="__codelineno-71-19" href="#__codelineno-71-19"></a>
<a id="__codelineno-71-20" name="__codelineno-71-20" href="#__codelineno-71-20"></a>
<a id="__codelineno-71-21" name="__codelineno-71-21" href="#__codelineno-71-21"></a>&quot;my-body-nested-1.subkey&quot;: &quot;val&quot;
</code></pre></div>
<h4 id="body-as-array_1">Body as array<a class="headerlink" href="#body-as-array_1" title="Permanent link">&para;</a></h4>
<p>In this case, the array in the body is stringified.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>Body:
<a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>
<a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a>
<a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a>
<a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a>[ &quot;string-val&quot;, true, 12, 12.34, 0x6279746573 ]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>&quot;content&quot;: &quot;[\&quot;string-val\&quot;,true,12,12.34,\&quot;Ynl0ZXM=\&quot;]&quot;
<a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a>
<a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a>
<a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a>
<a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a>...
</code></pre></div>
<h4 id="content-related-behavior">Content-related behavior:<a class="headerlink" href="#content-related-behavior" title="Permanent link">&para;</a></h4>
<p>If the Body field is of <strong>kvlist_value</strong> type (a list of key-value pairs), the structure is processed in the same way as log record attributes, including flattening and conflict resolution.</p>
<p>Attributes found in <strong>Body</strong> may also be used for setting the <code>timestamp</code>, <code>loglevel</code>, and <code>content</code> attributes of the log record, as described below.</p>
<h5 id="timestamp_2">Timestamp<a class="headerlink" href="#timestamp_2" title="Permanent link">&para;</a></h5>
<ul>
<li>If the <code>timestamp</code> cannot be set based on the <strong>Timestamp</strong> field, the first of the following keys found in <strong>Body</strong> is used: <code>timestamp</code>, <code>@timestamp</code>, <code>_timestamp</code>, <code>eventtime</code>, <code>date</code>, <code>published_date</code>, <code>syslog.timestamp</code>, <code>time</code>, <code>epochSecond</code>, <code>startTime</code>, <code>datetime</code>, <code>ts</code>, <code>timeMillis</code>, <code>@t</code>.</li>
<li>Supported timestamp formats: <code>UTC milliseconds</code>, <code>RFC3339</code>, and <code>RFC3164</code>.</li>
<li>The default value is the current timestamp and the default timezone is UTC if it's missing in timestamp.</li>
</ul>
<h5 id="log-level_1">Log level<a class="headerlink" href="#log-level_1" title="Permanent link">&para;</a></h5>
<ul>
<li>If the <code>loglevel</code> cannot be set based on the <strong>Severity</strong> field, the first of the following keys found in <strong>Body</strong> is used: <code>loglevel</code>, <code>status</code>, <code>severity</code>, <code>level</code>, <code>syslog.severity</code>.</li>
<li>The default value is <code>NONE</code>.</li>
</ul>
<h5 id="content_1">Content<a class="headerlink" href="#content_1" title="Permanent link">&para;</a></h5>
<ul>
<li><code>content</code> is set based on the first of the following keys found in <strong>Body</strong>: <code>content</code>, <code>message</code>, <code>payload</code>, <code>body</code>, <code>log</code>, <code>_raw</code> (<code>_raw</code> is supported only in the raw data model).</li>
<li>If no content attribute is found among supported content keys, the <code>content</code> is set to an empty string.</li>
</ul>
<h4 id="name-conflicts_1">Name conflicts<a class="headerlink" href="#name-conflicts_1" title="Permanent link">&para;</a></h4>
<p>When attributes are saved in a flattened fashion on the Dynatrace side, there may be name collisions if attributes on different levels share the same name. Dynatrace resolves this by prefixing duplicate attributes with <code>overwritten[COUNTER].</code>. The counter value indicates how many times the attribute name has been already encountered as a duplicate.</p>
<p>For example, if you have three attributes all named <code>my.attribute</code> on the resource, scope, and log levels:</p>
<ul>
<li>the resource attribute is ingested as <code>my.attribute</code></li>
<li>the scope attribute is ingested as <code>overwritten1.my.attribute</code></li>
<li>the log attribute is ingested as <code>overwritten2.my.attribute</code></li>
</ul>
<h2 id="additional-attributers-handling">Additional attributers handling<a class="headerlink" href="#additional-attributers-handling" title="Permanent link">&para;</a></h2>
<p>The Log ingestion API additionally accepts log attributes through:</p>
<ul>
<li>Query parameters</li>
<li>Special header: <code>X-Dynatrace-Attr</code></li>
</ul>
<p>These attributes are merged with those provided in the OpenTelemetry log request according to the rules described below.</p>
<h3 id="query-parameter-attributes">Query parameter attributes<a class="headerlink" href="#query-parameter-attributes" title="Permanent link">&para;</a></h3>
<ul>
<li>All query parameters passed to the Log ingestion API endpoint are added to the log record attributes.</li>
<li>If a parameter key appears multiple times, all values are captured as an array attribute.</li>
<li>Keys and values follow the same attribute parsing rules as log request attributes.</li>
<li>Certain parameters are processed by the API for internal purposes and never appear as log record attributes, even if explicitly provided (such as those used in the <strong>X√¢¬Ä¬ëDynatrace√¢¬Ä¬ëOptions</strong> header). For the complete list of reserved parameter names and their processing behavior, see the <a href="/docs/dynatrace-api/environment-api/opentelemetry/post-logs#parameters" title="Send OpenTelemetry logs to Dynatrace via API.">API documentation</a>.</li>
</ul>
<h4 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<p>Request URL</p>
<p>Resulting output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>otlphttp:
<a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>
<a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a>
<a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a>
<a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a>logs_endpoint: /api/v2/otlp/v1/logs?env=prod&amp;env=blue&amp;team=payments
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>Body: &quot;Hello World!&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>{
<a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a>
<a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a>
<a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a>
<a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a>&quot;content&quot;: &quot;Hello World!&quot;,
<a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a>
<a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a>
<a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a>
<a id="__codelineno-76-9" name="__codelineno-76-9" href="#__codelineno-76-9"></a>&quot;env&quot;: [&quot;prod&quot;, &quot;blue&quot;],
<a id="__codelineno-76-10" name="__codelineno-76-10" href="#__codelineno-76-10"></a>
<a id="__codelineno-76-11" name="__codelineno-76-11" href="#__codelineno-76-11"></a>
<a id="__codelineno-76-12" name="__codelineno-76-12" href="#__codelineno-76-12"></a>
<a id="__codelineno-76-13" name="__codelineno-76-13" href="#__codelineno-76-13"></a>&quot;team&quot;: &quot;payments&quot;
<a id="__codelineno-76-14" name="__codelineno-76-14" href="#__codelineno-76-14"></a>
<a id="__codelineno-76-15" name="__codelineno-76-15" href="#__codelineno-76-15"></a>
<a id="__codelineno-76-16" name="__codelineno-76-16" href="#__codelineno-76-16"></a>
<a id="__codelineno-76-17" name="__codelineno-76-17" href="#__codelineno-76-17"></a>}
</code></pre></div>
<h3 id="header-based-attributes-x-dynatrace-attr">Header-based attributes (X-Dynatrace-Attr)<a class="headerlink" href="#header-based-attributes-x-dynatrace-attr" title="Permanent link">&para;</a></h3>
<p>The API supports a special header for passing additional attributes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>otlphttp:
<a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>
<a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a>
<a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a>
<a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a>endpoint: /api/v2/otlp
<a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a>
<a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a>
<a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a>
<a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a>headers:
<a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a>
<a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a>
<a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a>
<a id="__codelineno-77-13" name="__codelineno-77-13" href="#__codelineno-77-13"></a>X-Dynatrace-Attr: region=eu-central-1&amp;team=core
</code></pre></div>
<p>Rules:</p>
<ul>
<li>Keys and values follow the same attribute parsing rules as query parameters.</li>
<li>Multi-value behavior is also supported inside the header attributes.</li>
<li>Same reserved parameter names restrictions apply.</li>
</ul>
<h3 id="attributes-precedence-rules">Attributes precedence rules<a class="headerlink" href="#attributes-precedence-rules" title="Permanent link">&para;</a></h3>
<p>When attributes appear in multiple places, the Log ingestion API applies attribute precedence while still preserving body values for auditability. The attributes are applied in the following order:</p>
<ul>
<li>Query Parameters (highest precedence)</li>
<li>X-Dynatrace-Attr header</li>
<li>OpenTelemetry log request (lowest precedence; existing ingestion path)</li>
</ul>
<h4 id="override-behavior">Override behavior<a class="headerlink" href="#override-behavior" title="Permanent link">&para;</a></h4>
<p>When attributes from query parameters or the header override log request attributes:</p>
<ul>
<li>The final attribute value is set according to the attribute source precedence rules.</li>
<li>The values already present in the log request are preserved and mirrored under <code>overwrittenN.&lt;attribute_key&gt;</code>.
  Where N is an incrementing integer (1, 2, √¢¬Ä¬¶) depending on how many log request-originating values had to be preserved. This ensures uniqueness, even when multiple conflicts occur.</li>
<li>Only values originating from the log request are preserved under the <code>overwrittenN.*</code> keys. Attributes overridden by higher-precedence sources do not generate overwritten copies.</li>
</ul>
<h4 id="example_1">Example<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h4>
<p>Request</p>
<p>Resulting output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>otlphttp:
<a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a>
<a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a>
<a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a>
<a id="__codelineno-78-5" name="__codelineno-78-5" href="#__codelineno-78-5"></a>logs_endpoint: /api/v2/otlp/v1/logs?team=frontend
</code></pre></div>
<p>Log Request:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>Body: &quot;Hello World!&quot;
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a>
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a>
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a>Attributes:
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>
<a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a>
<a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a>
<a id="__codelineno-79-9" name="__codelineno-79-9" href="#__codelineno-79-9"></a>- &quot;team&quot;: &quot;backend&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a>{
<a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a>
<a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a>
<a id="__codelineno-80-4" name="__codelineno-80-4" href="#__codelineno-80-4"></a>
<a id="__codelineno-80-5" name="__codelineno-80-5" href="#__codelineno-80-5"></a>&quot;content&quot;: &quot;Hello World!&quot;,
<a id="__codelineno-80-6" name="__codelineno-80-6" href="#__codelineno-80-6"></a>
<a id="__codelineno-80-7" name="__codelineno-80-7" href="#__codelineno-80-7"></a>
<a id="__codelineno-80-8" name="__codelineno-80-8" href="#__codelineno-80-8"></a>
<a id="__codelineno-80-9" name="__codelineno-80-9" href="#__codelineno-80-9"></a>&quot;team&quot;: &quot;frontend&quot;,
<a id="__codelineno-80-10" name="__codelineno-80-10" href="#__codelineno-80-10"></a>
<a id="__codelineno-80-11" name="__codelineno-80-11" href="#__codelineno-80-11"></a>
<a id="__codelineno-80-12" name="__codelineno-80-12" href="#__codelineno-80-12"></a>
<a id="__codelineno-80-13" name="__codelineno-80-13" href="#__codelineno-80-13"></a>&quot;overwritten1.team&quot;: &quot;backend&quot;
<a id="__codelineno-80-14" name="__codelineno-80-14" href="#__codelineno-80-14"></a>
<a id="__codelineno-80-15" name="__codelineno-80-15" href="#__codelineno-80-15"></a>
<a id="__codelineno-80-16" name="__codelineno-80-16" href="#__codelineno-80-16"></a>
<a id="__codelineno-80-17" name="__codelineno-80-17" href="#__codelineno-80-17"></a>}
</code></pre></div>
<h3 id="billing-behavior">Billing behavior<a class="headerlink" href="#billing-behavior" title="Permanent link">&para;</a></h3>
<p>Attributes provided through query parameters or headers are included in billing calculations.</p>
<p>For multi-value attributes, the attribute key contributes to billing only once, regardless of how many values are present.</p>
<h2 id="related-topics_14">Related topics<a class="headerlink" href="#related-topics_14" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/dynatrace-api/environment-api/opentelemetry/post-logs" title="Send OpenTelemetry logs to Dynatrace via API.">OpenTelemetry logs ingest API</a></li>
</ul>
<hr />
<h2 id="source-about-metrics-ingestmd">Source: about-metrics-ingest.md<a class="headerlink" href="#source-about-metrics-ingestmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: About OTLP metrics ingest
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest
scraped: 2026-02-16T21:30:34.062520</p>
<hr />
<h1 id="about-otlp-metrics-ingest">About OTLP metrics ingest<a class="headerlink" href="#about-otlp-metrics-ingest" title="Permanent link">&para;</a></h1>
<h1 id="about-otlp-metrics-ingest_1">About OTLP metrics ingest<a class="headerlink" href="#about-otlp-metrics-ingest_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Explanation</li>
<li>2-min read</li>
<li>Updated on Nov 04, 2025</li>
</ul>
<p>Dynatrace version 1.254+</p>
<p>This page provides information about how Dynatrace ingests and enriches OpenTelemetry metrics.</p>
<p>Migrate from the Dynatrace OpenTelemetry metrics exporter</p>
<p>If you're still using the Dynatrace OpenTelemetry metrics exporter, we recommend that you migrate to the OTLP metrics exporter.
For more information, see <a href="https://community.dynatrace.com/t5/Open-Q-A/Migrating-from-the-Dynatrace-OTel-metrics-exporter-to-standard/m-p/286986/thread-id/37689#M37690">Migrating from the Dynatrace OTel metrics exporter to standard OTLP metrics exporter√Ø¬ª¬ø</a>.</p>
<h2 id="dynatrace-specific-mapping">Dynatrace-specific mapping<a class="headerlink" href="#dynatrace-specific-mapping" title="Permanent link">&para;</a></h2>
<p>Dynatrace maps the individual OpenTelemetry instruments to the following Dynatrace metric types:</p>
<table>
<thead>
<tr>
<th>Instrument</th>
<th>with temporality</th>
<th>maps to Dynatrace</th>
</tr>
</thead>
<tbody>
<tr>
<td>Counter</td>
<td>Delta</td>
<td>Counter</td>
</tr>
<tr>
<td>Counter</td>
<td>Cumulative</td>
<td>N/A</td>
</tr>
<tr>
<td>Gauge</td>
<td>N/A</td>
<td>Gauge</td>
</tr>
<tr>
<td>Explicit bucket histogram <a href="#fn-1-1-def">1</a></td>
<td>Delta</td>
<td>Histogram</td>
</tr>
<tr>
<td>Exponential histogram <a href="#fn-1-2-def">2</a></td>
<td>Delta</td>
<td>Exponential histogram</td>
</tr>
<tr>
<td>UpDownCounter</td>
<td>Delta</td>
<td>Counter</td>
</tr>
<tr>
<td>UpDownCounter</td>
<td>Cumulative</td>
<td>Gauge</td>
</tr>
<tr>
<td>Summary</td>
<td>N/A</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<p>1</p>
<p>Explicit bucket histograms are supported starting with Dynatrace version 1.300.</p>
<p>2</p>
<p>For exponential histograms, Dynatrace ingests the histogram's <code>min|max|sum|count</code> but doesn't ingest the buckets.</p>
<h2 id="api-limits-and-validations">API limits and validations<a class="headerlink" href="#api-limits-and-validations" title="Permanent link">&para;</a></h2>
<p>When ingesting OpenTelemetry metrics, the following limits and validations apply.</p>
<table>
<thead>
<tr>
<th>Entity</th>
<th>Limit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Metric key length, characters</td>
<td>Min: 2, Max: 255</td>
<td>The length of a metric key.</td>
</tr>
<tr>
<td>Dimension key length, characters</td>
<td>Min: 1, Max: 100</td>
<td>The length of a dimension key. If the maximum length is exceeded, the key is truncated to 100 characters.</td>
</tr>
<tr>
<td>Dimension value length, characters</td>
<td>Min: 1, Max: 255</td>
<td>The length of a dimension value. If the maximum length is exceeded, the dimension value is truncated to 255 characters.</td>
</tr>
<tr>
<td>Number of dimensions per metric data point</td>
<td>50</td>
<td>The maximum total number of dimensions in a single metric data point. If the number of dimensions is exceeded, the whole data point is dropped.</td>
</tr>
<tr>
<td>Total number of possible metric keys per environment</td>
<td>100,000</td>
<td>The maximum number of metric keys that can be active at the same time.</td>
</tr>
<tr>
<td>Number of tuples per month per metric</td>
<td>1,000,000</td>
<td>The maximum number of tuples (unique metric-dimension key-value type combinations) for each metric key for the last 30 days.</td>
</tr>
<tr>
<td>Number of tuples per month for all custom metrics</td>
<td>50,000,000</td>
<td>The maximum number of tuples (unique metric-dimension key-value type combinations) for all custom metrics for the last 30 days.</td>
</tr>
<tr>
<td>Instrument unit, characters</td>
<td>63</td>
<td>The maximum total length of the instrument unit. If the maximum length is exceeded, the unit is dropped.</td>
</tr>
<tr>
<td>Instrument description, characters</td>
<td>1,023</td>
<td>The maximum total length of the instrument description. If the maximum length is exceeded, the instrument description is truncated to 1,023 characters.</td>
</tr>
<tr>
<td>Request size</td>
<td>4 MB</td>
<td>The maximum uncompressed size of an OTLP request with a metrics payload. If the limit is exceeded, the entire request is dropped.</td>
</tr>
<tr>
<td>Metric data points</td>
<td>15,000</td>
<td>The maximum number of metric data points in an OTLP request with a metrics payload. If the limit is exceeded, the entire request is dropped.</td>
</tr>
</tbody>
</table>
<h3 id="attribute-ingestion_1">Attribute ingestion<a class="headerlink" href="#attribute-ingestion_1" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry supports attributes on different levels in an OpenTelemetry metric request (that is, data points, scopes, and resources).
Because attributes are saved in a flattened fashion on the Dynatrace side, there may be name collisions if attributes on different levels share the same name.</p>
<p>To handle such name conflicts, Dynatrace applies the following order of priority to choose which attribute will be ingested:</p>
<ol>
<li>Data point attributes</li>
<li>Scope attributes</li>
<li>Resource attributes</li>
</ol>
<p>For example, if there is a data point and a scope attribute have the same name, the value of the data point will take precedence.
Similarly, if a scope and resource attribute share the same name, Dynatrace will ingest the value of the scope attribute.</p>
<h3 id="aggregation-temporality">Aggregation temporality<a class="headerlink" href="#aggregation-temporality" title="Permanent link">&para;</a></h3>
<p>The Dynatrace backend exclusively works with delta values and requires the respective aggregation temporality.
Please ensure your metrics exporter is accordingly configured or set the <a href="https://opentelemetry.io/docs/specs/otel/metrics/sdk_exporters/otlp/"><code>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</code>√Ø¬ª¬ø</a> environment variable to <code>DELTA</code>.</p>
<p>For examples on how to set the temporality under each individual language, see the <a href="/docs/ingest-from/opentelemetry/walkthroughs" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">integration walkthroughs</a>.</p>
<h3 id="metric-keys">Metric keys<a class="headerlink" href="#metric-keys" title="Permanent link">&para;</a></h3>
<ul>
<li>A metric key consists of sections separated by dots (for example, <code>dt.metrics</code>).</li>
<li>A metric key can contain lowercase and uppercase letters, numbers, hyphens (<code>-</code>), and underscores (<code>_</code>).</li>
<li>A metric key must start with a letter character.</li>
<li>A metric key must not contain non-Latin characters (such as <code>√É¬§</code>, <code>√É¬∂</code>, and <code>√É¬º</code>).</li>
<li>A metric key may be suffixed automatically depending on the payload (for example, <code>.count</code> for counters and <code>.gauge</code> for gauges).</li>
</ul>
<p>If you use characters that are invalid according to the rules above, they will be replaced with underscores.
If your metric key does not have at least one valid character, the data point will be dropped.</p>
<h3 id="dimension-keys">Dimension keys<a class="headerlink" href="#dimension-keys" title="Permanent link">&para;</a></h3>
<ul>
<li>Dimensions are comparable to span or resources attributes.</li>
<li>A dimension key can contain only lowercase letters (not uppercase letters), numbers, hyphens (<code>-</code>), periods (<code>.</code>), and underscores (<code>_</code>).</li>
<li>A dimension key must start with a letter character.</li>
<li>A dimension key must not contain non-Latin characters (such as <code>√É¬§</code>, <code>√É¬∂</code>, and <code>√É¬º</code>).</li>
<li>A dimension key can be in the <code>key.key-section</code> format.</li>
<li>You can specify up to 50 dimensions.</li>
<li>If the same dimension key is specified multiple times in a single payload, only the value that occurs first is accepted.</li>
</ul>
<p>If you use characters that are invalid according to the rules above, they will be replaced with underscores.
If your dimension key does not have at least one valid character, the key will be dropped.</p>
<p>Dimension values must be passed as a string, Boolean, or integer.</p>
<p>Dynatrace does not support non-string dimensions and will convert Booleans and integers to strings upon ingest.</p>
<p>If any other type is used, the entire dimension will be dropped.</p>
<h3 id="histograms">Histograms<a class="headerlink" href="#histograms" title="Permanent link">&para;</a></h3>
<p>For exponential histograms, Dynatrace ingests the histogram's <code>min|max|sum|count</code> but doesn't ingest the buckets.</p>
<p>If any of below happens, the OpenTelemetry ingest API returns the <code>400</code> or <code>200 with partial success</code> responses.</p>
<ul>
<li>Cumulative histograms aren't ingested (similarly to cumulative counters).</li>
<li>Histogram data points without sum aren't ingested. This happens when negative values are recorded.</li>
<li>Histogram buckets are not sorted.</li>
<li>Histogram bucket boundary values of <code>NaN</code> or <code>Infinite</code> are invalid.</li>
</ul>
<p>The Dynatrace OpenTelemetry ingest API only returns an HTTP <code>400</code> when all metrics in the OTLP request are invalid.</p>
<h3 id="summaries">Summaries<a class="headerlink" href="#summaries" title="Permanent link">&para;</a></h3>
<p>Dynatrace does not support summary metrics.</p>
<p>Summary metrics only exist in the OpenTelemetry protocol (OTLP) for compatibility with other formats.
Applications using official OpenTelemetry SDKs cannot produce summary metrics.</p>
<hr />
<h2 id="source-ingest-tracesmd">Source: ingest-traces.md<a class="headerlink" href="#source-ingest-tracesmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest OTLP traces
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api/ingest-traces
scraped: 2026-02-15T21:29:05.798631</p>
<hr />
<h1 id="ingest-otlp-traces">Ingest OTLP traces<a class="headerlink" href="#ingest-otlp-traces" title="Permanent link">&para;</a></h1>
<h1 id="ingest-otlp-traces_1">Ingest OTLP traces<a class="headerlink" href="#ingest-otlp-traces_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Reference</li>
<li>1-min read</li>
<li>Updated on Jul 15, 2024</li>
</ul>
<p>The following limitations apply to OpenTelemetry trace ingest requests and ingested spans.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Limit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Span end time</td>
<td>60 minutes in the past</td>
<td>The minimum value of the span end timestamp at time of ingestion</td>
</tr>
<tr>
<td>Span end time</td>
<td>10 minutes in the future</td>
<td>The maximum value of the span end timestamp at time of ingestion</td>
</tr>
<tr>
<td>Number of span attributes</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of span attributes per span</td>
</tr>
<tr>
<td>Number of span events</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of events per span</td>
</tr>
<tr>
<td>Number of event attributes</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of attributes per span event</td>
</tr>
<tr>
<td>Number of span links</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of links per span</td>
</tr>
<tr>
<td>Number of link attributes</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of attributes per span link</td>
</tr>
<tr>
<td>Request size</td>
<td>8 MB</td>
<td>The maximum size of an OTLP request for trace ingest to an ActiveGate (uncompressed data)</td>
</tr>
<tr>
<td>Request size (gzip)</td>
<td>8 MB</td>
<td>The maximum size of an OTLP request for trace ingest to an ActiveGate (compressed data)</td>
</tr>
</tbody>
</table>
<p>1</p>
<p>Typical limit of the OpenTelemetry SDK. Not limited by Dynatrace.</p>
<hr />
<h2 id="source-otel-semantic-mappingmd">Source: otel-semantic-mapping.md<a class="headerlink" href="#source-otel-semantic-mappingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: OpenTelemetry to Dynatrace semantic mapping
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api/otel-semantic-mapping
scraped: 2026-02-16T21:26:22.729828</p>
<hr />
<h1 id="opentelemetry-to-dynatrace-semantic-mapping">OpenTelemetry to Dynatrace semantic mapping<a class="headerlink" href="#opentelemetry-to-dynatrace-semantic-mapping" title="Permanent link">&para;</a></h1>
<h1 id="opentelemetry-to-dynatrace-semantic-mapping_1">OpenTelemetry to Dynatrace semantic mapping<a class="headerlink" href="#opentelemetry-to-dynatrace-semantic-mapping_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Reference</li>
<li>2-min read</li>
<li>Published Jan 08, 2026</li>
</ul>
<p>Dynatrace automatically maps OpenTelemetry semantic conventions to the <a href="/docs/semantic-dictionary" title="The Semantic Dictionary defines standardized field names used across monitoring data types like logs, events, spans, metrics, and entities.">Dynatrace Semantic Dictionary</a>.</p>
<p>This mapping ensures consistent data interpretation across your observability stack and enables Dynatrace apps, analytics, and visualization features to work with OpenTelemetry instrumentation.</p>
<h2 id="messaging-operations">Messaging operations<a class="headerlink" href="#messaging-operations" title="Permanent link">&para;</a></h2>
<p>Dynatrace maps OpenTelemetry messaging attributes to the Dynatrace semantic model.</p>
<table>
<thead>
<tr>
<th>OpenTelemetry attribute</th>
<th>Dynatrace attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>messaging.operation</code></td>
<td><code>messaging.operation.type</code></td>
</tr>
</tbody>
</table>
<p>For <a href="/docs/semantic-dictionary/fields#messaging" title="Get to know the list of global fields that have a well defined semantic meaning in Dynatrace and can be used across different monitoring types."><code>messaging.operation.type</code></a>, the value <code>send</code> is normalized to <code>publish</code>.</p>
<h2 id="url-parsing">URL parsing<a class="headerlink" href="#url-parsing" title="Permanent link">&para;</a></h2>
<p>Dynatrace automatically parses <a href="/docs/semantic-dictionary/fields#url" title="Get to know the list of global fields that have a well defined semantic meaning in Dynatrace and can be used across different monitoring types."><code>url.full</code></a> into its constituent components:</p>
<table>
<thead>
<tr>
<th>Derived attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url.path</code></td>
<td>The path component of the URL</td>
</tr>
<tr>
<td><code>url.scheme</code></td>
<td>The protocol scheme (for example, <code>https</code>)</td>
</tr>
<tr>
<td><code>url.fragment</code></td>
<td>The fragment identifier</td>
</tr>
<tr>
<td><code>url.query</code></td>
<td>The query string</td>
</tr>
<tr>
<td><code>server.address</code></td>
<td>The host address</td>
</tr>
<tr>
<td><code>server.port</code></td>
<td>The port number</td>
</tr>
</tbody>
</table>
<h3 id="deprecated-attributes">Deprecated attributes<a class="headerlink" href="#deprecated-attributes" title="Permanent link">&para;</a></h3>
<p>Dynatrace maps deprecated OpenTelemetry HTTP attributes to their current equivalents:</p>
<table>
<thead>
<tr>
<th>Deprecated attribute</th>
<th>Current attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>http.url</code></td>
<td><code>url.full</code></td>
</tr>
<tr>
<td><code>http.method</code></td>
<td><code>http.request.method</code></td>
</tr>
<tr>
<td><code>http.status_code</code></td>
<td><code>http.response.status_code</code></td>
</tr>
</tbody>
</table>
<h2 id="cloud-provider-attributes">Cloud provider attributes<a class="headerlink" href="#cloud-provider-attributes" title="Permanent link">&para;</a></h2>
<p>Dynatrace creates provider-specific attributes from standard OpenTelemetry cloud attributes.</p>
<h3 id="account-and-project-identifiers">Account and project identifiers<a class="headerlink" href="#account-and-project-identifiers" title="Permanent link">&para;</a></h3>
<p>Dynatrace creates provider-specific account attributes from the standard <a href="/docs/semantic-dictionary/fields#cloud" title="Get to know the list of global fields that have a well defined semantic meaning in Dynatrace and can be used across different monitoring types."><code>cloud.account.id</code></a> attribute:</p>
<table>
<thead>
<tr>
<th>Cloud provider</th>
<th>OpenTelemetry attribute</th>
<th>Created attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS</td>
<td><code>cloud.account.id</code></td>
<td><code>aws.account.id</code></td>
</tr>
<tr>
<td>Azure</td>
<td><code>cloud.account.id</code></td>
<td><code>azure.subscription</code></td>
</tr>
<tr>
<td>Google Cloud</td>
<td><code>cloud.account.id</code></td>
<td><code>gcp.project.id</code></td>
</tr>
</tbody>
</table>
<h3 id="regional-attributes">Regional attributes<a class="headerlink" href="#regional-attributes" title="Permanent link">&para;</a></h3>
<p>Dynatrace creates provider-specific region attributes from standard <a href="/docs/semantic-dictionary/fields#cloud" title="Get to know the list of global fields that have a well defined semantic meaning in Dynatrace and can be used across different monitoring types."><code>cloud.region</code></a> and related attributes:</p>
<table>
<thead>
<tr>
<th>Cloud provider</th>
<th>OpenTelemetry attributes</th>
<th>Created attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS</td>
<td><code>cloud.region</code></td>
<td><code>aws.region</code></td>
</tr>
<tr>
<td>Azure</td>
<td><code>cloud.region</code></td>
<td><code>azure.location</code></td>
</tr>
<tr>
<td>Google Cloud</td>
<td><code>gcp.location</code> <code>gcp.zone</code> <code>cloud.region</code> <code>cloud.availability_zone</code></td>
<td><code>gcp.region</code></td>
</tr>
</tbody>
</table>
<p>For Google Cloud, if multiple source attributes are present, they are evaluated in the order listed above.</p>
<h2 id="use-standard-opentelemetry-conventions">Use standard OpenTelemetry conventions<a class="headerlink" href="#use-standard-opentelemetry-conventions" title="Permanent link">&para;</a></h2>
<p>Standard <a href="https://opentelemetry.io/docs/specs/semconv/">OpenTelemetry semantic conventions√Ø¬ª¬ø</a> are supported in your instrumentation. Dynatrace handles the translation automatically. This allows standard OpenTelemetry semantic conventions to work with Dynatrace semantic analysis.</p>
<hr />
<h2 id="source-otlp-apimd">Source: otlp-api.md<a class="headerlink" href="#source-otlp-apimd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Dynatrace OTLP API endpoints
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api
scraped: 2026-02-16T21:12:52.231607</p>
<hr />
<h1 id="dynatrace-otlp-api-endpoints">Dynatrace OTLP API endpoints<a class="headerlink" href="#dynatrace-otlp-api-endpoints" title="Permanent link">&para;</a></h1>
<h1 id="dynatrace-otlp-api-endpoints_1">Dynatrace OTLP API endpoints<a class="headerlink" href="#dynatrace-otlp-api-endpoints_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Explanation</li>
<li>8-min read</li>
<li>Updated on Jan 09, 2026</li>
</ul>
<p>The <a href="https://opentelemetry.io/docs/specs/otlp/">OpenTelemetry Protocol (OTLP)√Ø¬ª¬ø</a> is the principal network protocol for the exchange of telemetry data between OpenTelemetry-backed services and applications.</p>
<p>Dynatrace provides native OTLP endpoints with the following services:</p>
<ul>
<li>The Dynatrace SaaS platform</li>
<li>ActiveGate instances</li>
</ul>
<p>Alternatively, you can deploy the <a href="/docs/ingest-from/opentelemetry/collector" title="Learn about the Dynatrace OTel Collector.">Dynatrace Collector</a> as an intermediary service application to batch requests and improve network performance, or to transform requests before forwarding them to Dynatrace (for example, <a href="/docs/ingest-from/opentelemetry/collector/use-cases/redact" title="Configure the OpenTelemetry Collector to mask sensitive data before forwarding to Dynatrace.">mask sensitive data</a>).</p>
<h2 id="default-ingest-paths">Default ingest paths<a class="headerlink" href="#default-ingest-paths" title="Permanent link">&para;</a></h2>
<p>The ingest paths used by Dynatrace for the individual signal types follow the <a href="https://opentelemetry.io/docs/specs/otel/protocol/exporter/#endpoint-urls-for-otlphttp">standard OpenTelemetry paths√Ø¬ª¬ø</a>.</p>
<table>
<thead>
<tr>
<th>Signal Type</th>
<th>Path</th>
</tr>
</thead>
<tbody>
<tr>
<td>Traces</td>
<td><code>/v1/traces</code></td>
</tr>
<tr>
<td>Metrics</td>
<td><code>/v1/metrics</code></td>
</tr>
<tr>
<td>Logs</td>
<td><code>/v1/logs</code></td>
</tr>
</tbody>
</table>
<p>Depending on the configuration, you may need to append these paths individually to the base URLs of the following service endpoints when specifying the export URLs. This can happen either in-code, when using <a href="/docs/ingest-from/opentelemetry/walkthroughs" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">manual instrumentation</a>, or using the standard <a href="https://opentelemetry.io/docs/languages/sdk-configuration/otlp-exporter/#endpoint-configuration">environment variables√Ø¬ª¬ø</a>.</p>
<h2 id="export-to-dynatrace">Export to Dynatrace<a class="headerlink" href="#export-to-dynatrace" title="Permanent link">&para;</a></h2>
<h3 id="base-urls">Base URLs<a class="headerlink" href="#base-urls" title="Permanent link">&para;</a></h3>
<p>The following addresses provide the base URLs for your OTLP ingest configuration. Use the URL applicable to your type of environment and replace the relevant part with your <a href="/docs/discover-dynatrace/get-started/monitoring-environment" title="Understand and learn how to work with monitoring environments.">environment ID</a>.
You will also use the base URL if you define the <code>OTEL_EXPORTER_OTLP_ENDPOINT</code> environment variable, see <a href="#environment-variables">Environment variables</a>.</p>
<table>
<thead>
<tr>
<th>API Type</th>
<th>Base URL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dynatrace SaaS</td>
<td><code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code></td>
</tr>
<tr>
<td>Environment ActiveGate<a href="#fn-1-1-def">1</a></td>
<td><code>https://{your-activegate-domain}:9999/e/{your-environment-id}/api/v2/otlp</code></td>
</tr>
<tr>
<td>Containerized Environment ActiveGate<a href="#fn-1-2-def">2</a></td>
<td><code>https://{your-activegate-domain}/e/{your-environment-id}/api/v2/otlp</code></td>
</tr>
</tbody>
</table>
<p>1</p>
<p>Environment ActiveGates listen by default on port <code>9999</code>. If you changed that port, adjust the port in the URL accordingly.</p>
<p>2</p>
<p>A <a href="/docs/ingest-from/setup-on-k8s/guides/deployment-and-configuration/activegate-pvc" title="Set up a persistent storage for containerized ActiveGate to be used as temporary storage for ingested data.">PVC</a> is required for this setup.</p>
<p>If you copy your environment ID from the browser's address bar, make sure to remove <code>.apps</code>.</p>
<ul>
<li>Incorrect base URL: <code>https://{your-environment-id}.live.apps.dynatrace.com/api/v2/otlp</code></li>
<li>Correct base URL: <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code></li>
</ul>
<p>Otherwise, the API calls will return an error that looks like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a>not retryable error: Permanent error: rpc error: code = Unimplemented desc = error exporting items, request to https://&lt;environment&gt;.live.apps.dynatracelabs.com/api/v2/otlp/v1/logs responded with HTTP Status Code 404
</code></pre></div>
<h3 id="url-examples">URL examples<a class="headerlink" href="#url-examples" title="Permanent link">&para;</a></h3>
<p>The following example URLs illustrate combinations of base URLs and paths for signal types.</p>
<h4 id="dynatrace-saas">Dynatrace SaaS<a class="headerlink" href="#dynatrace-saas" title="Permanent link">&para;</a></h4>
<p>Signal type</p>
<p>URL</p>
<p>Traces</p>
<p><code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp/v1/traces</code></p>
<p>Metrics</p>
<p><code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp/v1/metrics</code></p>
<p>Logs</p>
<p><code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp/v1/logs</code></p>
<h4 id="environment-activegate">Environment ActiveGate<a class="headerlink" href="#environment-activegate" title="Permanent link">&para;</a></h4>
<p>Signal type</p>
<p>URL</p>
<p>Traces</p>
<p><code>https://{your-activegate-domain}:9999/e/{your-environment-id}/api/v2/otlp/v1/traces</code></p>
<p>Metrics</p>
<p><code>https://{your-activegate-domain}:9999/e/{your-environment-id}/api/v2/otlp/v1/metrics</code></p>
<p>Logs</p>
<p><code>https://{your-activegate-domain}:9999/e/{your-environment-id}/api/v2/otlp/v1/logs</code></p>
<p>Information enrichment</p>
<p>Vanilla OTLP exports to ActiveGate require manual enrichment of Dynatrace host information to have the proper topology information.</p>
<p>To do so, make sure your traces have the correct mapping resource attributes set. The list of applicable attributes can be found in (or imported from) the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">enrichment files</a>.</p>
<h3 id="api-limitations">API limitations<a class="headerlink" href="#api-limitations" title="Permanent link">&para;</a></h3>
<p>Calls to Dynatrace API endpoints have the following limitations.</p>
<ul>
<li>gRPC is not supported.
  API calls need to use HTTP.</li>
<li>JSON is not supported for Protocol Buffers.
  Binary format must be used.</li>
</ul>
<h3 id="environment-variables">Environment variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h3>
<p>When you configure your application to export to Dynatrace, one way is to configure certain environment variables as described below.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a>OTEL_EXPORTER_OTLP_ENDPOINT=[YOUR_BASE_URL]
<a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a>
<a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a>
<a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a>
<a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a>OTEL_EXPORTER_OTLP_HEADERS=&quot;Authorization=Api-Token [YOUR_TOKEN]&quot;
<a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a>
<a id="__codelineno-82-7" name="__codelineno-82-7" href="#__codelineno-82-7"></a>
<a id="__codelineno-82-8" name="__codelineno-82-8" href="#__codelineno-82-8"></a>
<a id="__codelineno-82-9" name="__codelineno-82-9" href="#__codelineno-82-9"></a>OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf
</code></pre></div>
<p>For more information about language-specific configuration, see <a href="/docs/ingest-from/opentelemetry/walkthroughs" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">Instrument your application</a>.</p>
<h3 id="authentication-and-access-tokens">Authentication and access tokens<a class="headerlink" href="#authentication-and-access-tokens" title="Permanent link">&para;</a></h3>
<p>For exports to SaaS and ActiveGate, authentication is handled using an API access token and the <code>Authorization</code> HTTP header.
For more information on access tokens, see <a href="/docs/dynatrace-api/basics/dynatrace-api-authentication" title="Find out how to get authenticated to use the Dynatrace API.">Dynatrace API - Tokens and authentication</a>.</p>
<p>To create an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.
Use the appropriate access scopes for the signals that you want to export.
You can combine scopes in a single token, and also add scopes to an existing token.</p>
<ul>
<li>Traces: <code>openTelemetryTrace.ingest</code></li>
<li>Metrics: <code>metrics.ingest</code></li>
<li>Logs: <code>logs.ingest</code></li>
</ul>
<h3 id="network-requirements">Network requirements<a class="headerlink" href="#network-requirements" title="Permanent link">&para;</a></h3>
<p>Verify that the following are true:</p>
<ul>
<li>TCP port is not blocked</li>
</ul>
<p>Because OTLP communication with ActiveGate takes place over the ports 443 (for SaaS and Managed) or 9999 (for Environment ActiveGates), make sure that the TCP port in question is not blocked by a firewall or any other network management solution you might be using.
* Your system's certificate trust store is up to date</p>
<p>To avoid possible SSL certificate issues with expired or missing default root certificates, make sure that your system's certificate trust store is up to date.</p>
<h2 id="export-to-the-collector">Export to the Collector<a class="headerlink" href="#export-to-the-collector" title="Permanent link">&para;</a></h2>
<p>Using the Collector as an intermediate gateway allows you to streamline and optimize your telemetry data and requests centrally. See <a href="/docs/ingest-from/opentelemetry/collector/use-cases" title="Configure your Collector instance for different use cases.">OpenTelemetry Collector use cases</a> for more information and sample configurations for popular Collector use cases.</p>
<p>See <a href="/docs/ingest-from/opentelemetry/collector" title="Learn about the Dynatrace OTel Collector.">Dynatrace OTel Collector</a> for more details on how to configure a Collector instance.</p>
<p>gRPC conversion</p>
<p>As Dynatrace currently requires OTLP exports with HTTP, you can use the Collector to convert gRPC exports to HTTP.</p>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/use-cases/grpc" title="Configure the OpenTelemetry Collector to transform a gRPC OTLP request to HTTP.">Transform OTLP gRPC to HTTP with the OpenTelemetry Collector</a> for more details.</p>
<h3 id="authentication-and-tls">Authentication and TLS<a class="headerlink" href="#authentication-and-tls" title="Permanent link">&para;</a></h3>
<p>Whether you need to use TLS and authenticate your requests against the Collector depends on your particular Collector setup/configuration. By default, the <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/v0.145.0/receiver/otlpreceiver/README.md">OTLP receiver√Ø¬ª¬ø</a> is configured for plain-text HTTP and does not require authentication.</p>
<p>The eventual outbound connection from the Collector to Dynatrace always requires authentication and TLS.</p>
<h3 id="network-requirements_1">Network requirements<a class="headerlink" href="#network-requirements_1" title="Permanent link">&para;</a></h3>
<p>Verify that the following are true:</p>
<ul>
<li>Network ports not blocked</li>
</ul>
<p>Make sure the network ports required by the configured receiver instances are not blocked by a firewall or any other network management solution used as part of your infrastructure.</p>
<h2 id="related-topics_15">Related topics<a class="headerlink" href="#related-topics_15" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/dynatrace-api/environment-api/opentelemetry" title="Use Dynatrace API as a target for OpenTelemetry exporters to ingest OpenTelemetry metrics, logs, and traces.">OpenTelemetry Protocol (OTLP) ingest API</a></li>
</ul>
<hr />
<h2 id="source-troubleshootingmd">Source: troubleshooting.md<a class="headerlink" href="#source-troubleshootingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ensure success with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/troubleshooting
scraped: 2026-02-16T21:12:50.906797</p>
<hr />
<h1 id="ensure-success-with-opentelemetry">Ensure success with OpenTelemetry<a class="headerlink" href="#ensure-success-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="ensure-success-with-opentelemetry_1">Ensure success with OpenTelemetry<a class="headerlink" href="#ensure-success-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Troubleshooting</li>
<li>1-min read</li>
<li>Updated on Dec 03, 2025</li>
</ul>
<p>Successfully implementing OpenTelemetry requires both reliable data export and proper visualization in Dynatrace.
This page offers guidance for properly configuring and troubleshooting your OpenTelemetry implementation with Dynatrace.</p>
<h2 id="metrics-for-ingest-monitoring">Metrics for ingest monitoring<a class="headerlink" href="#metrics-for-ingest-monitoring" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides the following built-in metrics for the ingestion of OpenTelemetry signals.
In case of missing data, these can be useful in further analyzing possible ingestion issues.</p>
<p>In Dynatrace Classic, ingest monitoring metrics are prefixed with <code>dsfm:</code> instead of <code>dt.sfm.</code></p>
<h3 id="metrics-for-logs-ingest">Metrics for logs ingest<a class="headerlink" href="#metrics-for-logs-ingest" title="Permanent link">&para;</a></h3>
<p>Latest Dynatrace</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dt.sfm.active_gate.event_ingest.event_incoming_count</code></td>
<td>Number of ingested log records</td>
</tr>
<tr>
<td><code>dt.sfm.active_gate.event_ingest.drop_count</code></td>
<td>Number of dropped log records</td>
</tr>
<tr>
<td><code>dt.sfm.active_gate.event_ingest.event_otlp_size</code></td>
<td>Payload size of received log requests</td>
</tr>
</tbody>
</table>
<h3 id="metrics-for-metrics-ingest">Metrics for metrics ingest<a class="headerlink" href="#metrics-for-metrics-ingest" title="Permanent link">&para;</a></h3>
<p>Latest Dynatrace</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dt.sfm.active_gate.metrics.ingest.otlp.datapoints.accepted</code></td>
<td>Number of accepted data points</td>
</tr>
<tr>
<td><code>dt.sfm.active_gate.metrics.ingest.otlp.datapoints.rejected</code></td>
<td>Number of rejected data points</td>
</tr>
</tbody>
</table>
<p>Rejected metrics come with a <code>reason</code> dimension, which provides additional details on why a data point was rejected.
In Dynatrace, you can filter, sort, and split by that dimension.</p>
<p>A typical reason is when metrics are sent with cumulative aggregation temporality (Dynatrace <a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#aggregation-temporality" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">requires delta temporality</a>), in which case <code>reason</code> indicates <code>UNSUPPORTED_METRIC_TYPE_MONOTONIC_CUMULATIVE_SUM</code>.</p>
<h3 id="metrics-for-traces-ingest">Metrics for traces ingest<a class="headerlink" href="#metrics-for-traces-ingest" title="Permanent link">&para;</a></h3>
<p>Latest Dynatrace</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dt.sfm.server.spans.received</code></td>
<td>Number of OpenTelemetry spans ingested via the OLTP trace endpoint (ActiveGate or OneAgent) that were successfully received by Dynatrace</td>
</tr>
<tr>
<td><code>dt.sfm.server.spans.persisted</code></td>
<td>Number of OpenTelemetry spans preserved by Dynatrace; only preserved spans are available for distributed traces analysis</td>
</tr>
<tr>
<td><code>dt.sfm.server.spans.dropped</code></td>
<td>Number of OpenTelemetry spans that were not preserved by Dynatrace because of the indicated reason (for example, span end time out of range)</td>
</tr>
</tbody>
</table>
<h2 id="common-issues-and-solutions">Common issues and solutions<a class="headerlink" href="#common-issues-and-solutions" title="Permanent link">&para;</a></h2>
<h3 id="setup-issues">Setup issues<a class="headerlink" href="#setup-issues" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/dm038xt">I'm having setup issues with OpenTelemetry. What should I check?√Ø¬ª¬ø</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Fixing-SSL-Errors-in-OpenTelemetry-SDKs-when-exporting-to/ta-p/269404">Fixing SSL Errors in OpenTelemetry SDKs when exporting to Dynatrace ActiveGate√Ø¬ª¬ø</a></li>
</ul>
<h3 id="connection-issues">Connection issues<a class="headerlink" href="#connection-issues" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/x0238hc">Why do I get a connection error when exporting with OTLP to ActiveGate?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/tk4384x">Why do I get a connection error when exporting OpenTelemetry traces to OneAgent?√Ø¬ª¬ø</a></li>
</ul>
<h3 id="authentication-issues">Authentication issues<a class="headerlink" href="#authentication-issues" title="Permanent link">&para;</a></h3>
<ul>
<li>Problem: HTTP 401/403 errors in ingestion metrics.</li>
<li>Solution: Verify API permissions and endpoint configurations.</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://dt-url.net/lg638i3">Why does ActiveGate return a 401 Unauthorized error?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/2n838im">Why does ActiveGate return a 403 Forbidden error?√Ø¬ª¬ø</a></li>
</ul>
<h3 id="data-format-issues">Data format issues<a class="headerlink" href="#data-format-issues" title="Permanent link">&para;</a></h3>
<ul>
<li>Problem: High drop rates with format errors.</li>
<li>Solution: Validate OpenTelemetry data format compliance and attribute limits.</li>
</ul>
<h3 id="configuration-issues">Configuration issues<a class="headerlink" href="#configuration-issues" title="Permanent link">&para;</a></h3>
<ul>
<li>Problem: No data appears despite successful exports.</li>
<li>Solution: Verify endpoint URLs, headers, and protocol configuration.</li>
</ul>
<h3 id="ingestion-issues">Ingestion issues<a class="headerlink" href="#ingestion-issues" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/sb238k5">Why does my OTLP export not work?√Ø¬ª¬ø</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a></li>
</ul>
<h3 id="vertical-topology">Vertical topology<a class="headerlink" href="#vertical-topology" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/48038un">Why is my vertical topology missing?√Ø¬ª¬ø</a></li>
</ul>
<h2 id="signal-specific-questions">Signal-specific questions<a class="headerlink" href="#signal-specific-questions" title="Permanent link">&para;</a></h2>
<p>Specific information about ingesting each signal type is available at</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OTLP logs</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">About OTLP metrics ingest</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-traces" title="Learn how Dynatrace ingests OpenTelemetry traces and what limitations apply.">Ingest OTLP traces</a></li>
</ul>
<h3 id="traces">Traces<a class="headerlink" href="#traces" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/ae038vj">Why are my spans not linked? Why are my spans orphaned?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/z402yxq">Why are my OpenTelemetry span attributes missing?√Ø¬ª¬ø</a></li>
</ul>
<h3 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Why-are-my-OpenTelemetry-metrics-not-ingested/ta-p/269428">Why are my metrics not ingested?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/s60382e">Why are my cumulative metrics not ingested?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/0u238ec">Why do I receive a "Partial Success" response?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/jj03800">Why are my metric attributes missing?√Ø¬ª¬ø</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/How-to-set-up-OpenTelemetry-metrics-with-delta-temporality/ta-p/269292">How to set up OpenTelemetry metrics with delta temporality√Ø¬ª¬ø</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Delay-in-displaying-OpenTelemetry-metric-dimensions-in-Dynatrace/ta-p/269732">Delay in displaying OpenTelemetry metric dimensions in Dynatrace√Ø¬ª¬ø</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Why-are-my-OpenTelemetry-metrics-not-ingested/ta-p/269428">Why are my OpenTelemetry metrics not ingested√Ø¬ª¬ø</a></li>
</ul>
<h2 id="best-practices">Best practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h2>
<h3 id="use-metric-dimensions">Use metric dimensions<a class="headerlink" href="#use-metric-dimensions" title="Permanent link">&para;</a></h3>
<p>Dimensions are used in Dynatrace to help distinguish what is being measured in a specific data point.</p>
<p>In OpenTelemetry, dimensions are called attributes.</p>
<p>For example, if you're measuring the number of requests an endpoint has received, you can use dimensions to split that metric into requests that went through (status code 200) and requests that failed (status code 500).</p>
<p>Your dimensions should be well-annotated (recognizable, readable, understandable), have descriptive names, and provide good information.</p>
<h3 id="compression">Compression<a class="headerlink" href="#compression" title="Permanent link">&para;</a></h3>
<p>Dynatrace recommends that you enable <code>gzip</code> compression on your OTLP exporters.</p>
<p>The default compression on the OTLP exporter <a href="https://opentelemetry.io/docs/specs/otel/protocol/exporter/">is not set√Ø¬ª¬ø</a>, but it can be configured through the following environment variables:</p>
<ul>
<li><code>OTEL_EXPORTER_OTLP_COMPRESSION</code></li>
<li><code>OTEL_EXPORTER_OTLP_TRACES_COMPRESSION</code></li>
<li><code>OTEL_EXPORTER_OTLP_METRICS_COMPRESSION</code></li>
<li><code>OTEL_EXPORTER_OTLP_LOGS_COMPRESSION</code></li>
</ul>
<p>Acceptable values are <code>none</code> or <code>gzip</code>.</p>
<h3 id="batching">Batching<a class="headerlink" href="#batching" title="Permanent link">&para;</a></h3>
<p>If you use the OpenTelemetry Collector, we highly recommend that you use a <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/v0.145.0/processor/batchprocessor/README.md">batch processor√Ø¬ª¬ø</a>.</p>
<p>Batching helps better compress the data and reduce the number of outgoing connections required to transmit data to Dynatrace.</p>
<p>See this <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/v0.145.0/processor/batchprocessor/README.md">GitHub readme√Ø¬ª¬ø</a> for more information.</p>
<hr />
<h2 id="source-cppmd">Source: cpp.md<a class="headerlink" href="#source-cppmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your C++ application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/cpp
scraped: 2026-02-16T21:18:19.921884</p>
<hr />
<h1 id="instrument-your-c-application-with-opentelemetry">Instrument your C++ application with OpenTelemetry<a class="headerlink" href="#instrument-your-c-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-c-application-with-opentelemetry_1">Instrument your C++ application with OpenTelemetry<a class="headerlink" href="#instrument-your-c-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Updated on Nov 12, 2025</li>
</ul>
<p>This walkthrough shows how to add observability to your C++ application using the OpenTelemetry C++ libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>No</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_14">Prerequisites<a class="headerlink" href="#prerequisites_14" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>A <a href="https://github.com/open-telemetry/opentelemetry-cpp/blob/main/README.md#supported-development-platforms">supported√Ø¬ª¬ø</a> C++ compiler (C++ 11 and later)</li>
<li>The <a href="https://github.com/protocolbuffers/protobuf/blob/master/src/README.md">Protocol Buffers library√Ø¬ª¬ø</a></li>
<li>The <a href="https://github.com/open-telemetry/opentelemetry-cpp/blob/main/INSTALL.md">OpenTelemetry library√Ø¬ª¬ø</a></li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token">Get API access token<a class="headerlink" href="#get-api-access-token" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-set-up-opentelemetry">Step 2 Set up OpenTelemetry<a class="headerlink" href="#step-2-set-up-opentelemetry" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the following directives to your CMake build configuration in <code>CMakeLists.txt</code>:</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a>find_package(CURL REQUIRED)
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a>
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a>find_package(Protobuf REQUIRED)
<a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>
<a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a>
<a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a>
<a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a>find_package(opentelemetry-cpp CONFIG REQUIRED)
<a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a>
<a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a>
<a id="__codelineno-83-12" name="__codelineno-83-12" href="#__codelineno-83-12"></a>
<a id="__codelineno-83-13" name="__codelineno-83-13" href="#__codelineno-83-13"></a>include_directories(&quot;${OPENTELEMETRY_CPP_INCLUDE_DIRS}&quot;)
<a id="__codelineno-83-14" name="__codelineno-83-14" href="#__codelineno-83-14"></a>
<a id="__codelineno-83-15" name="__codelineno-83-15" href="#__codelineno-83-15"></a>
<a id="__codelineno-83-16" name="__codelineno-83-16" href="#__codelineno-83-16"></a>
<a id="__codelineno-83-17" name="__codelineno-83-17" href="#__codelineno-83-17"></a>target_link_libraries(
<a id="__codelineno-83-18" name="__codelineno-83-18" href="#__codelineno-83-18"></a>
<a id="__codelineno-83-19" name="__codelineno-83-19" href="#__codelineno-83-19"></a>
<a id="__codelineno-83-20" name="__codelineno-83-20" href="#__codelineno-83-20"></a>
<a id="__codelineno-83-21" name="__codelineno-83-21" href="#__codelineno-83-21"></a>&lt;YOUR_EXE_NAME&gt; ${OPENTELEMETRY_CPP_LIBRARIES}
<a id="__codelineno-83-22" name="__codelineno-83-22" href="#__codelineno-83-22"></a>
<a id="__codelineno-83-23" name="__codelineno-83-23" href="#__codelineno-83-23"></a>
<a id="__codelineno-83-24" name="__codelineno-83-24" href="#__codelineno-83-24"></a>
<a id="__codelineno-83-25" name="__codelineno-83-25" href="#__codelineno-83-25"></a>opentelemetry_trace
<a id="__codelineno-83-26" name="__codelineno-83-26" href="#__codelineno-83-26"></a>
<a id="__codelineno-83-27" name="__codelineno-83-27" href="#__codelineno-83-27"></a>
<a id="__codelineno-83-28" name="__codelineno-83-28" href="#__codelineno-83-28"></a>
<a id="__codelineno-83-29" name="__codelineno-83-29" href="#__codelineno-83-29"></a>opentelemetry_common
<a id="__codelineno-83-30" name="__codelineno-83-30" href="#__codelineno-83-30"></a>
<a id="__codelineno-83-31" name="__codelineno-83-31" href="#__codelineno-83-31"></a>
<a id="__codelineno-83-32" name="__codelineno-83-32" href="#__codelineno-83-32"></a>
<a id="__codelineno-83-33" name="__codelineno-83-33" href="#__codelineno-83-33"></a>opentelemetry_http_client_curl
<a id="__codelineno-83-34" name="__codelineno-83-34" href="#__codelineno-83-34"></a>
<a id="__codelineno-83-35" name="__codelineno-83-35" href="#__codelineno-83-35"></a>
<a id="__codelineno-83-36" name="__codelineno-83-36" href="#__codelineno-83-36"></a>
<a id="__codelineno-83-37" name="__codelineno-83-37" href="#__codelineno-83-37"></a>opentelemetry_exporter_otlp_http
<a id="__codelineno-83-38" name="__codelineno-83-38" href="#__codelineno-83-38"></a>
<a id="__codelineno-83-39" name="__codelineno-83-39" href="#__codelineno-83-39"></a>
<a id="__codelineno-83-40" name="__codelineno-83-40" href="#__codelineno-83-40"></a>
<a id="__codelineno-83-41" name="__codelineno-83-41" href="#__codelineno-83-41"></a>opentelemetry_exporter_otlp_http_client
<a id="__codelineno-83-42" name="__codelineno-83-42" href="#__codelineno-83-42"></a>
<a id="__codelineno-83-43" name="__codelineno-83-43" href="#__codelineno-83-43"></a>
<a id="__codelineno-83-44" name="__codelineno-83-44" href="#__codelineno-83-44"></a>
<a id="__codelineno-83-45" name="__codelineno-83-45" href="#__codelineno-83-45"></a>opentelemetry_otlp_recordable
<a id="__codelineno-83-46" name="__codelineno-83-46" href="#__codelineno-83-46"></a>
<a id="__codelineno-83-47" name="__codelineno-83-47" href="#__codelineno-83-47"></a>
<a id="__codelineno-83-48" name="__codelineno-83-48" href="#__codelineno-83-48"></a>
<a id="__codelineno-83-49" name="__codelineno-83-49" href="#__codelineno-83-49"></a>opentelemetry_resources
<a id="__codelineno-83-50" name="__codelineno-83-50" href="#__codelineno-83-50"></a>
<a id="__codelineno-83-51" name="__codelineno-83-51" href="#__codelineno-83-51"></a>
<a id="__codelineno-83-52" name="__codelineno-83-52" href="#__codelineno-83-52"></a>
<a id="__codelineno-83-53" name="__codelineno-83-53" href="#__codelineno-83-53"></a>opentelemetry_metrics
<a id="__codelineno-83-54" name="__codelineno-83-54" href="#__codelineno-83-54"></a>
<a id="__codelineno-83-55" name="__codelineno-83-55" href="#__codelineno-83-55"></a>
<a id="__codelineno-83-56" name="__codelineno-83-56" href="#__codelineno-83-56"></a>
<a id="__codelineno-83-57" name="__codelineno-83-57" href="#__codelineno-83-57"></a>opentelemetry_exporter_otlp_http_metric
<a id="__codelineno-83-58" name="__codelineno-83-58" href="#__codelineno-83-58"></a>
<a id="__codelineno-83-59" name="__codelineno-83-59" href="#__codelineno-83-59"></a>
<a id="__codelineno-83-60" name="__codelineno-83-60" href="#__codelineno-83-60"></a>
<a id="__codelineno-83-61" name="__codelineno-83-61" href="#__codelineno-83-61"></a>)
</code></pre></div>
2. Create a file named <code>otel.h</code> in your application directory and save the following content:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>#include &quot;opentelemetry/trace/provider.h&quot;
<a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>
<a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a>
<a id="__codelineno-84-4" name="__codelineno-84-4" href="#__codelineno-84-4"></a>
<a id="__codelineno-84-5" name="__codelineno-84-5" href="#__codelineno-84-5"></a>#include &quot;opentelemetry/trace/propagation/http_trace_context.h&quot;
<a id="__codelineno-84-6" name="__codelineno-84-6" href="#__codelineno-84-6"></a>
<a id="__codelineno-84-7" name="__codelineno-84-7" href="#__codelineno-84-7"></a>
<a id="__codelineno-84-8" name="__codelineno-84-8" href="#__codelineno-84-8"></a>
<a id="__codelineno-84-9" name="__codelineno-84-9" href="#__codelineno-84-9"></a>#include &quot;opentelemetry/context/propagation/global_propagator.h&quot;
<a id="__codelineno-84-10" name="__codelineno-84-10" href="#__codelineno-84-10"></a>
<a id="__codelineno-84-11" name="__codelineno-84-11" href="#__codelineno-84-11"></a>
<a id="__codelineno-84-12" name="__codelineno-84-12" href="#__codelineno-84-12"></a>
<a id="__codelineno-84-13" name="__codelineno-84-13" href="#__codelineno-84-13"></a>#include &quot;opentelemetry/sdk/trace/simple_processor_factory.h&quot;
<a id="__codelineno-84-14" name="__codelineno-84-14" href="#__codelineno-84-14"></a>
<a id="__codelineno-84-15" name="__codelineno-84-15" href="#__codelineno-84-15"></a>
<a id="__codelineno-84-16" name="__codelineno-84-16" href="#__codelineno-84-16"></a>
<a id="__codelineno-84-17" name="__codelineno-84-17" href="#__codelineno-84-17"></a>#include &quot;opentelemetry/sdk/trace/tracer_context.h&quot;
<a id="__codelineno-84-18" name="__codelineno-84-18" href="#__codelineno-84-18"></a>
<a id="__codelineno-84-19" name="__codelineno-84-19" href="#__codelineno-84-19"></a>
<a id="__codelineno-84-20" name="__codelineno-84-20" href="#__codelineno-84-20"></a>
<a id="__codelineno-84-21" name="__codelineno-84-21" href="#__codelineno-84-21"></a>#include &quot;opentelemetry/sdk/trace/tracer_context_factory.h&quot;
<a id="__codelineno-84-22" name="__codelineno-84-22" href="#__codelineno-84-22"></a>
<a id="__codelineno-84-23" name="__codelineno-84-23" href="#__codelineno-84-23"></a>
<a id="__codelineno-84-24" name="__codelineno-84-24" href="#__codelineno-84-24"></a>
<a id="__codelineno-84-25" name="__codelineno-84-25" href="#__codelineno-84-25"></a>#include &quot;opentelemetry/sdk/trace/tracer_provider_factory.h&quot;
<a id="__codelineno-84-26" name="__codelineno-84-26" href="#__codelineno-84-26"></a>
<a id="__codelineno-84-27" name="__codelineno-84-27" href="#__codelineno-84-27"></a>
<a id="__codelineno-84-28" name="__codelineno-84-28" href="#__codelineno-84-28"></a>
<a id="__codelineno-84-29" name="__codelineno-84-29" href="#__codelineno-84-29"></a>#include &quot;opentelemetry/exporters/ostream/span_exporter_factory.h&quot;
<a id="__codelineno-84-30" name="__codelineno-84-30" href="#__codelineno-84-30"></a>
<a id="__codelineno-84-31" name="__codelineno-84-31" href="#__codelineno-84-31"></a>
<a id="__codelineno-84-32" name="__codelineno-84-32" href="#__codelineno-84-32"></a>
<a id="__codelineno-84-33" name="__codelineno-84-33" href="#__codelineno-84-33"></a>#include &quot;opentelemetry/exporters/otlp/otlp_http_exporter_factory.h&quot;
<a id="__codelineno-84-34" name="__codelineno-84-34" href="#__codelineno-84-34"></a>
<a id="__codelineno-84-35" name="__codelineno-84-35" href="#__codelineno-84-35"></a>
<a id="__codelineno-84-36" name="__codelineno-84-36" href="#__codelineno-84-36"></a>
<a id="__codelineno-84-37" name="__codelineno-84-37" href="#__codelineno-84-37"></a>#include &quot;opentelemetry/metrics/provider.h&quot;
<a id="__codelineno-84-38" name="__codelineno-84-38" href="#__codelineno-84-38"></a>
<a id="__codelineno-84-39" name="__codelineno-84-39" href="#__codelineno-84-39"></a>
<a id="__codelineno-84-40" name="__codelineno-84-40" href="#__codelineno-84-40"></a>
<a id="__codelineno-84-41" name="__codelineno-84-41" href="#__codelineno-84-41"></a>#include &quot;opentelemetry/sdk/metrics/export/periodic_exporting_metric_reader.h&quot;
<a id="__codelineno-84-42" name="__codelineno-84-42" href="#__codelineno-84-42"></a>
<a id="__codelineno-84-43" name="__codelineno-84-43" href="#__codelineno-84-43"></a>
<a id="__codelineno-84-44" name="__codelineno-84-44" href="#__codelineno-84-44"></a>
<a id="__codelineno-84-45" name="__codelineno-84-45" href="#__codelineno-84-45"></a>#include &quot;opentelemetry/sdk/metrics/view/view_registry_factory.h&quot;
<a id="__codelineno-84-46" name="__codelineno-84-46" href="#__codelineno-84-46"></a>
<a id="__codelineno-84-47" name="__codelineno-84-47" href="#__codelineno-84-47"></a>
<a id="__codelineno-84-48" name="__codelineno-84-48" href="#__codelineno-84-48"></a>
<a id="__codelineno-84-49" name="__codelineno-84-49" href="#__codelineno-84-49"></a>#include &quot;opentelemetry/sdk/metrics/meter_context_factory.h&quot;
<a id="__codelineno-84-50" name="__codelineno-84-50" href="#__codelineno-84-50"></a>
<a id="__codelineno-84-51" name="__codelineno-84-51" href="#__codelineno-84-51"></a>
<a id="__codelineno-84-52" name="__codelineno-84-52" href="#__codelineno-84-52"></a>
<a id="__codelineno-84-53" name="__codelineno-84-53" href="#__codelineno-84-53"></a>#include &quot;opentelemetry/sdk/metrics/meter_provider_factory.h&quot;
<a id="__codelineno-84-54" name="__codelineno-84-54" href="#__codelineno-84-54"></a>
<a id="__codelineno-84-55" name="__codelineno-84-55" href="#__codelineno-84-55"></a>
<a id="__codelineno-84-56" name="__codelineno-84-56" href="#__codelineno-84-56"></a>
<a id="__codelineno-84-57" name="__codelineno-84-57" href="#__codelineno-84-57"></a>#include &quot;opentelemetry/exporters/ostream/metric_exporter_factory.h&quot;
<a id="__codelineno-84-58" name="__codelineno-84-58" href="#__codelineno-84-58"></a>
<a id="__codelineno-84-59" name="__codelineno-84-59" href="#__codelineno-84-59"></a>
<a id="__codelineno-84-60" name="__codelineno-84-60" href="#__codelineno-84-60"></a>
<a id="__codelineno-84-61" name="__codelineno-84-61" href="#__codelineno-84-61"></a>#include &quot;opentelemetry/exporters/otlp/otlp_http_metric_exporter_factory.h&quot;
<a id="__codelineno-84-62" name="__codelineno-84-62" href="#__codelineno-84-62"></a>
<a id="__codelineno-84-63" name="__codelineno-84-63" href="#__codelineno-84-63"></a>
<a id="__codelineno-84-64" name="__codelineno-84-64" href="#__codelineno-84-64"></a>
<a id="__codelineno-84-65" name="__codelineno-84-65" href="#__codelineno-84-65"></a>#include &quot;opentelemetry/logs/provider.h&quot;
<a id="__codelineno-84-66" name="__codelineno-84-66" href="#__codelineno-84-66"></a>
<a id="__codelineno-84-67" name="__codelineno-84-67" href="#__codelineno-84-67"></a>
<a id="__codelineno-84-68" name="__codelineno-84-68" href="#__codelineno-84-68"></a>
<a id="__codelineno-84-69" name="__codelineno-84-69" href="#__codelineno-84-69"></a>#include &quot;opentelemetry/sdk/logs/logger.h&quot;
<a id="__codelineno-84-70" name="__codelineno-84-70" href="#__codelineno-84-70"></a>
<a id="__codelineno-84-71" name="__codelineno-84-71" href="#__codelineno-84-71"></a>
<a id="__codelineno-84-72" name="__codelineno-84-72" href="#__codelineno-84-72"></a>
<a id="__codelineno-84-73" name="__codelineno-84-73" href="#__codelineno-84-73"></a>#include &quot;opentelemetry/sdk/logs/logger_provider_factory.h&quot;
<a id="__codelineno-84-74" name="__codelineno-84-74" href="#__codelineno-84-74"></a>
<a id="__codelineno-84-75" name="__codelineno-84-75" href="#__codelineno-84-75"></a>
<a id="__codelineno-84-76" name="__codelineno-84-76" href="#__codelineno-84-76"></a>
<a id="__codelineno-84-77" name="__codelineno-84-77" href="#__codelineno-84-77"></a>#include &quot;opentelemetry/sdk/logs/simple_log_record_processor_factory.h&quot;
<a id="__codelineno-84-78" name="__codelineno-84-78" href="#__codelineno-84-78"></a>
<a id="__codelineno-84-79" name="__codelineno-84-79" href="#__codelineno-84-79"></a>
<a id="__codelineno-84-80" name="__codelineno-84-80" href="#__codelineno-84-80"></a>
<a id="__codelineno-84-81" name="__codelineno-84-81" href="#__codelineno-84-81"></a>#include &quot;opentelemetry/sdk/logs/logger_context_factory.h&quot;
<a id="__codelineno-84-82" name="__codelineno-84-82" href="#__codelineno-84-82"></a>
<a id="__codelineno-84-83" name="__codelineno-84-83" href="#__codelineno-84-83"></a>
<a id="__codelineno-84-84" name="__codelineno-84-84" href="#__codelineno-84-84"></a>
<a id="__codelineno-84-85" name="__codelineno-84-85" href="#__codelineno-84-85"></a>#include &quot;opentelemetry/exporters/ostream/log_record_exporter.h&quot;
<a id="__codelineno-84-86" name="__codelineno-84-86" href="#__codelineno-84-86"></a>
<a id="__codelineno-84-87" name="__codelineno-84-87" href="#__codelineno-84-87"></a>
<a id="__codelineno-84-88" name="__codelineno-84-88" href="#__codelineno-84-88"></a>
<a id="__codelineno-84-89" name="__codelineno-84-89" href="#__codelineno-84-89"></a>#include &quot;opentelemetry/exporters/otlp/otlp_http_log_record_exporter_factory.h&quot;
<a id="__codelineno-84-90" name="__codelineno-84-90" href="#__codelineno-84-90"></a>
<a id="__codelineno-84-91" name="__codelineno-84-91" href="#__codelineno-84-91"></a>
<a id="__codelineno-84-92" name="__codelineno-84-92" href="#__codelineno-84-92"></a>
<a id="__codelineno-84-93" name="__codelineno-84-93" href="#__codelineno-84-93"></a>#include &lt;cstring&gt;
<a id="__codelineno-84-94" name="__codelineno-84-94" href="#__codelineno-84-94"></a>
<a id="__codelineno-84-95" name="__codelineno-84-95" href="#__codelineno-84-95"></a>
<a id="__codelineno-84-96" name="__codelineno-84-96" href="#__codelineno-84-96"></a>
<a id="__codelineno-84-97" name="__codelineno-84-97" href="#__codelineno-84-97"></a>#include &lt;iostream&gt;
<a id="__codelineno-84-98" name="__codelineno-84-98" href="#__codelineno-84-98"></a>
<a id="__codelineno-84-99" name="__codelineno-84-99" href="#__codelineno-84-99"></a>
<a id="__codelineno-84-100" name="__codelineno-84-100" href="#__codelineno-84-100"></a>
<a id="__codelineno-84-101" name="__codelineno-84-101" href="#__codelineno-84-101"></a>#include &lt;vector&gt;
<a id="__codelineno-84-102" name="__codelineno-84-102" href="#__codelineno-84-102"></a>
<a id="__codelineno-84-103" name="__codelineno-84-103" href="#__codelineno-84-103"></a>
<a id="__codelineno-84-104" name="__codelineno-84-104" href="#__codelineno-84-104"></a>
<a id="__codelineno-84-105" name="__codelineno-84-105" href="#__codelineno-84-105"></a>#include &lt;fstream&gt;
<a id="__codelineno-84-106" name="__codelineno-84-106" href="#__codelineno-84-106"></a>
<a id="__codelineno-84-107" name="__codelineno-84-107" href="#__codelineno-84-107"></a>
<a id="__codelineno-84-108" name="__codelineno-84-108" href="#__codelineno-84-108"></a>
<a id="__codelineno-84-109" name="__codelineno-84-109" href="#__codelineno-84-109"></a>#include &lt;list&gt;
<a id="__codelineno-84-110" name="__codelineno-84-110" href="#__codelineno-84-110"></a>
<a id="__codelineno-84-111" name="__codelineno-84-111" href="#__codelineno-84-111"></a>
<a id="__codelineno-84-112" name="__codelineno-84-112" href="#__codelineno-84-112"></a>
<a id="__codelineno-84-113" name="__codelineno-84-113" href="#__codelineno-84-113"></a>#include &lt;memory&gt;
<a id="__codelineno-84-114" name="__codelineno-84-114" href="#__codelineno-84-114"></a>
<a id="__codelineno-84-115" name="__codelineno-84-115" href="#__codelineno-84-115"></a>
<a id="__codelineno-84-116" name="__codelineno-84-116" href="#__codelineno-84-116"></a>
<a id="__codelineno-84-117" name="__codelineno-84-117" href="#__codelineno-84-117"></a>#include &lt;thread&gt;
<a id="__codelineno-84-118" name="__codelineno-84-118" href="#__codelineno-84-118"></a>
<a id="__codelineno-84-119" name="__codelineno-84-119" href="#__codelineno-84-119"></a>
<a id="__codelineno-84-120" name="__codelineno-84-120" href="#__codelineno-84-120"></a>
<a id="__codelineno-84-121" name="__codelineno-84-121" href="#__codelineno-84-121"></a>#include &lt;iostream&gt;
<a id="__codelineno-84-122" name="__codelineno-84-122" href="#__codelineno-84-122"></a>
<a id="__codelineno-84-123" name="__codelineno-84-123" href="#__codelineno-84-123"></a>
<a id="__codelineno-84-124" name="__codelineno-84-124" href="#__codelineno-84-124"></a>
<a id="__codelineno-84-125" name="__codelineno-84-125" href="#__codelineno-84-125"></a>#include &lt;string&gt;
<a id="__codelineno-84-126" name="__codelineno-84-126" href="#__codelineno-84-126"></a>
<a id="__codelineno-84-127" name="__codelineno-84-127" href="#__codelineno-84-127"></a>
<a id="__codelineno-84-128" name="__codelineno-84-128" href="#__codelineno-84-128"></a>
<a id="__codelineno-84-129" name="__codelineno-84-129" href="#__codelineno-84-129"></a>using namespace std;
<a id="__codelineno-84-130" name="__codelineno-84-130" href="#__codelineno-84-130"></a>
<a id="__codelineno-84-131" name="__codelineno-84-131" href="#__codelineno-84-131"></a>
<a id="__codelineno-84-132" name="__codelineno-84-132" href="#__codelineno-84-132"></a>
<a id="__codelineno-84-133" name="__codelineno-84-133" href="#__codelineno-84-133"></a>namespace nostd    = opentelemetry::nostd;
<a id="__codelineno-84-134" name="__codelineno-84-134" href="#__codelineno-84-134"></a>
<a id="__codelineno-84-135" name="__codelineno-84-135" href="#__codelineno-84-135"></a>
<a id="__codelineno-84-136" name="__codelineno-84-136" href="#__codelineno-84-136"></a>
<a id="__codelineno-84-137" name="__codelineno-84-137" href="#__codelineno-84-137"></a>namespace otlp     = opentelemetry::exporter::otlp;
<a id="__codelineno-84-138" name="__codelineno-84-138" href="#__codelineno-84-138"></a>
<a id="__codelineno-84-139" name="__codelineno-84-139" href="#__codelineno-84-139"></a>
<a id="__codelineno-84-140" name="__codelineno-84-140" href="#__codelineno-84-140"></a>
<a id="__codelineno-84-141" name="__codelineno-84-141" href="#__codelineno-84-141"></a>namespace resource = opentelemetry::sdk::resource;
<a id="__codelineno-84-142" name="__codelineno-84-142" href="#__codelineno-84-142"></a>
<a id="__codelineno-84-143" name="__codelineno-84-143" href="#__codelineno-84-143"></a>
<a id="__codelineno-84-144" name="__codelineno-84-144" href="#__codelineno-84-144"></a>
<a id="__codelineno-84-145" name="__codelineno-84-145" href="#__codelineno-84-145"></a>namespace trace_api      = opentelemetry::trace;
<a id="__codelineno-84-146" name="__codelineno-84-146" href="#__codelineno-84-146"></a>
<a id="__codelineno-84-147" name="__codelineno-84-147" href="#__codelineno-84-147"></a>
<a id="__codelineno-84-148" name="__codelineno-84-148" href="#__codelineno-84-148"></a>
<a id="__codelineno-84-149" name="__codelineno-84-149" href="#__codelineno-84-149"></a>namespace trace_sdk      = opentelemetry::sdk::trace;
<a id="__codelineno-84-150" name="__codelineno-84-150" href="#__codelineno-84-150"></a>
<a id="__codelineno-84-151" name="__codelineno-84-151" href="#__codelineno-84-151"></a>
<a id="__codelineno-84-152" name="__codelineno-84-152" href="#__codelineno-84-152"></a>
<a id="__codelineno-84-153" name="__codelineno-84-153" href="#__codelineno-84-153"></a>namespace metrics_api   = opentelemetry::metrics;
<a id="__codelineno-84-154" name="__codelineno-84-154" href="#__codelineno-84-154"></a>
<a id="__codelineno-84-155" name="__codelineno-84-155" href="#__codelineno-84-155"></a>
<a id="__codelineno-84-156" name="__codelineno-84-156" href="#__codelineno-84-156"></a>
<a id="__codelineno-84-157" name="__codelineno-84-157" href="#__codelineno-84-157"></a>namespace metrics_sdk    = opentelemetry::sdk::metrics;
<a id="__codelineno-84-158" name="__codelineno-84-158" href="#__codelineno-84-158"></a>
<a id="__codelineno-84-159" name="__codelineno-84-159" href="#__codelineno-84-159"></a>
<a id="__codelineno-84-160" name="__codelineno-84-160" href="#__codelineno-84-160"></a>
<a id="__codelineno-84-161" name="__codelineno-84-161" href="#__codelineno-84-161"></a>namespace logs_api      = opentelemetry::logs;
<a id="__codelineno-84-162" name="__codelineno-84-162" href="#__codelineno-84-162"></a>
<a id="__codelineno-84-163" name="__codelineno-84-163" href="#__codelineno-84-163"></a>
<a id="__codelineno-84-164" name="__codelineno-84-164" href="#__codelineno-84-164"></a>
<a id="__codelineno-84-165" name="__codelineno-84-165" href="#__codelineno-84-165"></a>namespace logs_sdk      = opentelemetry::sdk::logs;
<a id="__codelineno-84-166" name="__codelineno-84-166" href="#__codelineno-84-166"></a>
<a id="__codelineno-84-167" name="__codelineno-84-167" href="#__codelineno-84-167"></a>
<a id="__codelineno-84-168" name="__codelineno-84-168" href="#__codelineno-84-168"></a>
<a id="__codelineno-84-169" name="__codelineno-84-169" href="#__codelineno-84-169"></a>namespace
<a id="__codelineno-84-170" name="__codelineno-84-170" href="#__codelineno-84-170"></a>
<a id="__codelineno-84-171" name="__codelineno-84-171" href="#__codelineno-84-171"></a>
<a id="__codelineno-84-172" name="__codelineno-84-172" href="#__codelineno-84-172"></a>
<a id="__codelineno-84-173" name="__codelineno-84-173" href="#__codelineno-84-173"></a>{
<a id="__codelineno-84-174" name="__codelineno-84-174" href="#__codelineno-84-174"></a>
<a id="__codelineno-84-175" name="__codelineno-84-175" href="#__codelineno-84-175"></a>
<a id="__codelineno-84-176" name="__codelineno-84-176" href="#__codelineno-84-176"></a>
<a id="__codelineno-84-177" name="__codelineno-84-177" href="#__codelineno-84-177"></a>// Class definition for context propagation
<a id="__codelineno-84-178" name="__codelineno-84-178" href="#__codelineno-84-178"></a>
<a id="__codelineno-84-179" name="__codelineno-84-179" href="#__codelineno-84-179"></a>
<a id="__codelineno-84-180" name="__codelineno-84-180" href="#__codelineno-84-180"></a>
<a id="__codelineno-84-181" name="__codelineno-84-181" href="#__codelineno-84-181"></a>otlp::OtlpHttpMetricExporterOptions options;
<a id="__codelineno-84-182" name="__codelineno-84-182" href="#__codelineno-84-182"></a>
<a id="__codelineno-84-183" name="__codelineno-84-183" href="#__codelineno-84-183"></a>
<a id="__codelineno-84-184" name="__codelineno-84-184" href="#__codelineno-84-184"></a>
<a id="__codelineno-84-185" name="__codelineno-84-185" href="#__codelineno-84-185"></a>std::string version{ &quot;1.0.1&quot; };
<a id="__codelineno-84-186" name="__codelineno-84-186" href="#__codelineno-84-186"></a>
<a id="__codelineno-84-187" name="__codelineno-84-187" href="#__codelineno-84-187"></a>
<a id="__codelineno-84-188" name="__codelineno-84-188" href="#__codelineno-84-188"></a>
<a id="__codelineno-84-189" name="__codelineno-84-189" href="#__codelineno-84-189"></a>std::string name{ &quot;app_cpp&quot; };
<a id="__codelineno-84-190" name="__codelineno-84-190" href="#__codelineno-84-190"></a>
<a id="__codelineno-84-191" name="__codelineno-84-191" href="#__codelineno-84-191"></a>
<a id="__codelineno-84-192" name="__codelineno-84-192" href="#__codelineno-84-192"></a>
<a id="__codelineno-84-193" name="__codelineno-84-193" href="#__codelineno-84-193"></a>std::string schema{ &quot;https://opentelemetry.io/schemas/1.2.0&quot; };
<a id="__codelineno-84-194" name="__codelineno-84-194" href="#__codelineno-84-194"></a>
<a id="__codelineno-84-195" name="__codelineno-84-195" href="#__codelineno-84-195"></a>
<a id="__codelineno-84-196" name="__codelineno-84-196" href="#__codelineno-84-196"></a>
<a id="__codelineno-84-197" name="__codelineno-84-197" href="#__codelineno-84-197"></a>template &lt;typename T&gt;
<a id="__codelineno-84-198" name="__codelineno-84-198" href="#__codelineno-84-198"></a>
<a id="__codelineno-84-199" name="__codelineno-84-199" href="#__codelineno-84-199"></a>
<a id="__codelineno-84-200" name="__codelineno-84-200" href="#__codelineno-84-200"></a>
<a id="__codelineno-84-201" name="__codelineno-84-201" href="#__codelineno-84-201"></a>class HttpTextMapCarrier : public opentelemetry::context::propagation::TextMapCarrier
<a id="__codelineno-84-202" name="__codelineno-84-202" href="#__codelineno-84-202"></a>
<a id="__codelineno-84-203" name="__codelineno-84-203" href="#__codelineno-84-203"></a>
<a id="__codelineno-84-204" name="__codelineno-84-204" href="#__codelineno-84-204"></a>
<a id="__codelineno-84-205" name="__codelineno-84-205" href="#__codelineno-84-205"></a>{
<a id="__codelineno-84-206" name="__codelineno-84-206" href="#__codelineno-84-206"></a>
<a id="__codelineno-84-207" name="__codelineno-84-207" href="#__codelineno-84-207"></a>
<a id="__codelineno-84-208" name="__codelineno-84-208" href="#__codelineno-84-208"></a>
<a id="__codelineno-84-209" name="__codelineno-84-209" href="#__codelineno-84-209"></a>public:
<a id="__codelineno-84-210" name="__codelineno-84-210" href="#__codelineno-84-210"></a>
<a id="__codelineno-84-211" name="__codelineno-84-211" href="#__codelineno-84-211"></a>
<a id="__codelineno-84-212" name="__codelineno-84-212" href="#__codelineno-84-212"></a>
<a id="__codelineno-84-213" name="__codelineno-84-213" href="#__codelineno-84-213"></a>HttpTextMapCarrier&lt;T&gt;(T &amp;headers) : headers_(headers) {}
<a id="__codelineno-84-214" name="__codelineno-84-214" href="#__codelineno-84-214"></a>
<a id="__codelineno-84-215" name="__codelineno-84-215" href="#__codelineno-84-215"></a>
<a id="__codelineno-84-216" name="__codelineno-84-216" href="#__codelineno-84-216"></a>
<a id="__codelineno-84-217" name="__codelineno-84-217" href="#__codelineno-84-217"></a>HttpTextMapCarrier() = default;
<a id="__codelineno-84-218" name="__codelineno-84-218" href="#__codelineno-84-218"></a>
<a id="__codelineno-84-219" name="__codelineno-84-219" href="#__codelineno-84-219"></a>
<a id="__codelineno-84-220" name="__codelineno-84-220" href="#__codelineno-84-220"></a>
<a id="__codelineno-84-221" name="__codelineno-84-221" href="#__codelineno-84-221"></a>virtual nostd::string_view Get(nostd::string_view key) const noexcept override
<a id="__codelineno-84-222" name="__codelineno-84-222" href="#__codelineno-84-222"></a>
<a id="__codelineno-84-223" name="__codelineno-84-223" href="#__codelineno-84-223"></a>
<a id="__codelineno-84-224" name="__codelineno-84-224" href="#__codelineno-84-224"></a>
<a id="__codelineno-84-225" name="__codelineno-84-225" href="#__codelineno-84-225"></a>{
<a id="__codelineno-84-226" name="__codelineno-84-226" href="#__codelineno-84-226"></a>
<a id="__codelineno-84-227" name="__codelineno-84-227" href="#__codelineno-84-227"></a>
<a id="__codelineno-84-228" name="__codelineno-84-228" href="#__codelineno-84-228"></a>
<a id="__codelineno-84-229" name="__codelineno-84-229" href="#__codelineno-84-229"></a>std::string key_to_compare = key.data();
<a id="__codelineno-84-230" name="__codelineno-84-230" href="#__codelineno-84-230"></a>
<a id="__codelineno-84-231" name="__codelineno-84-231" href="#__codelineno-84-231"></a>
<a id="__codelineno-84-232" name="__codelineno-84-232" href="#__codelineno-84-232"></a>
<a id="__codelineno-84-233" name="__codelineno-84-233" href="#__codelineno-84-233"></a>// Header&#39;s first letter seems to be  automatically capitaliazed by our test http-server, so
<a id="__codelineno-84-234" name="__codelineno-84-234" href="#__codelineno-84-234"></a>
<a id="__codelineno-84-235" name="__codelineno-84-235" href="#__codelineno-84-235"></a>
<a id="__codelineno-84-236" name="__codelineno-84-236" href="#__codelineno-84-236"></a>
<a id="__codelineno-84-237" name="__codelineno-84-237" href="#__codelineno-84-237"></a>// compare accordingly.
<a id="__codelineno-84-238" name="__codelineno-84-238" href="#__codelineno-84-238"></a>
<a id="__codelineno-84-239" name="__codelineno-84-239" href="#__codelineno-84-239"></a>
<a id="__codelineno-84-240" name="__codelineno-84-240" href="#__codelineno-84-240"></a>
<a id="__codelineno-84-241" name="__codelineno-84-241" href="#__codelineno-84-241"></a>if (key == opentelemetry::trace::propagation::kTraceParent)
<a id="__codelineno-84-242" name="__codelineno-84-242" href="#__codelineno-84-242"></a>
<a id="__codelineno-84-243" name="__codelineno-84-243" href="#__codelineno-84-243"></a>
<a id="__codelineno-84-244" name="__codelineno-84-244" href="#__codelineno-84-244"></a>
<a id="__codelineno-84-245" name="__codelineno-84-245" href="#__codelineno-84-245"></a>{
<a id="__codelineno-84-246" name="__codelineno-84-246" href="#__codelineno-84-246"></a>
<a id="__codelineno-84-247" name="__codelineno-84-247" href="#__codelineno-84-247"></a>
<a id="__codelineno-84-248" name="__codelineno-84-248" href="#__codelineno-84-248"></a>
<a id="__codelineno-84-249" name="__codelineno-84-249" href="#__codelineno-84-249"></a>key_to_compare = &quot;Traceparent&quot;;
<a id="__codelineno-84-250" name="__codelineno-84-250" href="#__codelineno-84-250"></a>
<a id="__codelineno-84-251" name="__codelineno-84-251" href="#__codelineno-84-251"></a>
<a id="__codelineno-84-252" name="__codelineno-84-252" href="#__codelineno-84-252"></a>
<a id="__codelineno-84-253" name="__codelineno-84-253" href="#__codelineno-84-253"></a>}
<a id="__codelineno-84-254" name="__codelineno-84-254" href="#__codelineno-84-254"></a>
<a id="__codelineno-84-255" name="__codelineno-84-255" href="#__codelineno-84-255"></a>
<a id="__codelineno-84-256" name="__codelineno-84-256" href="#__codelineno-84-256"></a>
<a id="__codelineno-84-257" name="__codelineno-84-257" href="#__codelineno-84-257"></a>else if (key == opentelemetry::trace::propagation::kTraceState)
<a id="__codelineno-84-258" name="__codelineno-84-258" href="#__codelineno-84-258"></a>
<a id="__codelineno-84-259" name="__codelineno-84-259" href="#__codelineno-84-259"></a>
<a id="__codelineno-84-260" name="__codelineno-84-260" href="#__codelineno-84-260"></a>
<a id="__codelineno-84-261" name="__codelineno-84-261" href="#__codelineno-84-261"></a>{
<a id="__codelineno-84-262" name="__codelineno-84-262" href="#__codelineno-84-262"></a>
<a id="__codelineno-84-263" name="__codelineno-84-263" href="#__codelineno-84-263"></a>
<a id="__codelineno-84-264" name="__codelineno-84-264" href="#__codelineno-84-264"></a>
<a id="__codelineno-84-265" name="__codelineno-84-265" href="#__codelineno-84-265"></a>key_to_compare = &quot;Tracestate&quot;;
<a id="__codelineno-84-266" name="__codelineno-84-266" href="#__codelineno-84-266"></a>
<a id="__codelineno-84-267" name="__codelineno-84-267" href="#__codelineno-84-267"></a>
<a id="__codelineno-84-268" name="__codelineno-84-268" href="#__codelineno-84-268"></a>
<a id="__codelineno-84-269" name="__codelineno-84-269" href="#__codelineno-84-269"></a>}
<a id="__codelineno-84-270" name="__codelineno-84-270" href="#__codelineno-84-270"></a>
<a id="__codelineno-84-271" name="__codelineno-84-271" href="#__codelineno-84-271"></a>
<a id="__codelineno-84-272" name="__codelineno-84-272" href="#__codelineno-84-272"></a>
<a id="__codelineno-84-273" name="__codelineno-84-273" href="#__codelineno-84-273"></a>auto it = headers_.find(key_to_compare);
<a id="__codelineno-84-274" name="__codelineno-84-274" href="#__codelineno-84-274"></a>
<a id="__codelineno-84-275" name="__codelineno-84-275" href="#__codelineno-84-275"></a>
<a id="__codelineno-84-276" name="__codelineno-84-276" href="#__codelineno-84-276"></a>
<a id="__codelineno-84-277" name="__codelineno-84-277" href="#__codelineno-84-277"></a>if (it != headers_.end())
<a id="__codelineno-84-278" name="__codelineno-84-278" href="#__codelineno-84-278"></a>
<a id="__codelineno-84-279" name="__codelineno-84-279" href="#__codelineno-84-279"></a>
<a id="__codelineno-84-280" name="__codelineno-84-280" href="#__codelineno-84-280"></a>
<a id="__codelineno-84-281" name="__codelineno-84-281" href="#__codelineno-84-281"></a>{
<a id="__codelineno-84-282" name="__codelineno-84-282" href="#__codelineno-84-282"></a>
<a id="__codelineno-84-283" name="__codelineno-84-283" href="#__codelineno-84-283"></a>
<a id="__codelineno-84-284" name="__codelineno-84-284" href="#__codelineno-84-284"></a>
<a id="__codelineno-84-285" name="__codelineno-84-285" href="#__codelineno-84-285"></a>return it-&gt;second;
<a id="__codelineno-84-286" name="__codelineno-84-286" href="#__codelineno-84-286"></a>
<a id="__codelineno-84-287" name="__codelineno-84-287" href="#__codelineno-84-287"></a>
<a id="__codelineno-84-288" name="__codelineno-84-288" href="#__codelineno-84-288"></a>
<a id="__codelineno-84-289" name="__codelineno-84-289" href="#__codelineno-84-289"></a>}
<a id="__codelineno-84-290" name="__codelineno-84-290" href="#__codelineno-84-290"></a>
<a id="__codelineno-84-291" name="__codelineno-84-291" href="#__codelineno-84-291"></a>
<a id="__codelineno-84-292" name="__codelineno-84-292" href="#__codelineno-84-292"></a>
<a id="__codelineno-84-293" name="__codelineno-84-293" href="#__codelineno-84-293"></a>return &quot;&quot;;
<a id="__codelineno-84-294" name="__codelineno-84-294" href="#__codelineno-84-294"></a>
<a id="__codelineno-84-295" name="__codelineno-84-295" href="#__codelineno-84-295"></a>
<a id="__codelineno-84-296" name="__codelineno-84-296" href="#__codelineno-84-296"></a>
<a id="__codelineno-84-297" name="__codelineno-84-297" href="#__codelineno-84-297"></a>}
<a id="__codelineno-84-298" name="__codelineno-84-298" href="#__codelineno-84-298"></a>
<a id="__codelineno-84-299" name="__codelineno-84-299" href="#__codelineno-84-299"></a>
<a id="__codelineno-84-300" name="__codelineno-84-300" href="#__codelineno-84-300"></a>
<a id="__codelineno-84-301" name="__codelineno-84-301" href="#__codelineno-84-301"></a>virtual void Set(nostd::string_view key, nostd::string_view value) noexcept override
<a id="__codelineno-84-302" name="__codelineno-84-302" href="#__codelineno-84-302"></a>
<a id="__codelineno-84-303" name="__codelineno-84-303" href="#__codelineno-84-303"></a>
<a id="__codelineno-84-304" name="__codelineno-84-304" href="#__codelineno-84-304"></a>
<a id="__codelineno-84-305" name="__codelineno-84-305" href="#__codelineno-84-305"></a>{
<a id="__codelineno-84-306" name="__codelineno-84-306" href="#__codelineno-84-306"></a>
<a id="__codelineno-84-307" name="__codelineno-84-307" href="#__codelineno-84-307"></a>
<a id="__codelineno-84-308" name="__codelineno-84-308" href="#__codelineno-84-308"></a>
<a id="__codelineno-84-309" name="__codelineno-84-309" href="#__codelineno-84-309"></a>headers_.insert(std::pair&lt;std::string, std::string&gt;(std::string(key), std::string(value)));
<a id="__codelineno-84-310" name="__codelineno-84-310" href="#__codelineno-84-310"></a>
<a id="__codelineno-84-311" name="__codelineno-84-311" href="#__codelineno-84-311"></a>
<a id="__codelineno-84-312" name="__codelineno-84-312" href="#__codelineno-84-312"></a>
<a id="__codelineno-84-313" name="__codelineno-84-313" href="#__codelineno-84-313"></a>}
<a id="__codelineno-84-314" name="__codelineno-84-314" href="#__codelineno-84-314"></a>
<a id="__codelineno-84-315" name="__codelineno-84-315" href="#__codelineno-84-315"></a>
<a id="__codelineno-84-316" name="__codelineno-84-316" href="#__codelineno-84-316"></a>
<a id="__codelineno-84-317" name="__codelineno-84-317" href="#__codelineno-84-317"></a>T headers_;
<a id="__codelineno-84-318" name="__codelineno-84-318" href="#__codelineno-84-318"></a>
<a id="__codelineno-84-319" name="__codelineno-84-319" href="#__codelineno-84-319"></a>
<a id="__codelineno-84-320" name="__codelineno-84-320" href="#__codelineno-84-320"></a>
<a id="__codelineno-84-321" name="__codelineno-84-321" href="#__codelineno-84-321"></a>};
<a id="__codelineno-84-322" name="__codelineno-84-322" href="#__codelineno-84-322"></a>
<a id="__codelineno-84-323" name="__codelineno-84-323" href="#__codelineno-84-323"></a>
<a id="__codelineno-84-324" name="__codelineno-84-324" href="#__codelineno-84-324"></a>
<a id="__codelineno-84-325" name="__codelineno-84-325" href="#__codelineno-84-325"></a>// ===== GENERAL SETUP =====
<a id="__codelineno-84-326" name="__codelineno-84-326" href="#__codelineno-84-326"></a>
<a id="__codelineno-84-327" name="__codelineno-84-327" href="#__codelineno-84-327"></a>
<a id="__codelineno-84-328" name="__codelineno-84-328" href="#__codelineno-84-328"></a>
<a id="__codelineno-84-329" name="__codelineno-84-329" href="#__codelineno-84-329"></a>void initTracer()
<a id="__codelineno-84-330" name="__codelineno-84-330" href="#__codelineno-84-330"></a>
<a id="__codelineno-84-331" name="__codelineno-84-331" href="#__codelineno-84-331"></a>
<a id="__codelineno-84-332" name="__codelineno-84-332" href="#__codelineno-84-332"></a>
<a id="__codelineno-84-333" name="__codelineno-84-333" href="#__codelineno-84-333"></a>{
<a id="__codelineno-84-334" name="__codelineno-84-334" href="#__codelineno-84-334"></a>
<a id="__codelineno-84-335" name="__codelineno-84-335" href="#__codelineno-84-335"></a>
<a id="__codelineno-84-336" name="__codelineno-84-336" href="#__codelineno-84-336"></a>
<a id="__codelineno-84-337" name="__codelineno-84-337" href="#__codelineno-84-337"></a>otlp::OtlpHttpExporterOptions traceOptions;
<a id="__codelineno-84-338" name="__codelineno-84-338" href="#__codelineno-84-338"></a>
<a id="__codelineno-84-339" name="__codelineno-84-339" href="#__codelineno-84-339"></a>
<a id="__codelineno-84-340" name="__codelineno-84-340" href="#__codelineno-84-340"></a>
<a id="__codelineno-84-341" name="__codelineno-84-341" href="#__codelineno-84-341"></a>traceOptions.url = std::string(std::getenv(&quot;DT_API_URL&quot;)) + &quot;/v1/traces&quot;;
<a id="__codelineno-84-342" name="__codelineno-84-342" href="#__codelineno-84-342"></a>
<a id="__codelineno-84-343" name="__codelineno-84-343" href="#__codelineno-84-343"></a>
<a id="__codelineno-84-344" name="__codelineno-84-344" href="#__codelineno-84-344"></a>
<a id="__codelineno-84-345" name="__codelineno-84-345" href="#__codelineno-84-345"></a>traceOptions.content_type  = otlp::HttpRequestContentType::kBinary;
<a id="__codelineno-84-346" name="__codelineno-84-346" href="#__codelineno-84-346"></a>
<a id="__codelineno-84-347" name="__codelineno-84-347" href="#__codelineno-84-347"></a>
<a id="__codelineno-84-348" name="__codelineno-84-348" href="#__codelineno-84-348"></a>
<a id="__codelineno-84-349" name="__codelineno-84-349" href="#__codelineno-84-349"></a>traceOptions.http_headers.insert(
<a id="__codelineno-84-350" name="__codelineno-84-350" href="#__codelineno-84-350"></a>
<a id="__codelineno-84-351" name="__codelineno-84-351" href="#__codelineno-84-351"></a>
<a id="__codelineno-84-352" name="__codelineno-84-352" href="#__codelineno-84-352"></a>
<a id="__codelineno-84-353" name="__codelineno-84-353" href="#__codelineno-84-353"></a>std::make_pair&lt;const std::string, std::string&gt;(&quot;Authorization&quot;, std::getenv(&quot;DT_API_TOKEN&quot;)));
<a id="__codelineno-84-354" name="__codelineno-84-354" href="#__codelineno-84-354"></a>
<a id="__codelineno-84-355" name="__codelineno-84-355" href="#__codelineno-84-355"></a>
<a id="__codelineno-84-356" name="__codelineno-84-356" href="#__codelineno-84-356"></a>
<a id="__codelineno-84-357" name="__codelineno-84-357" href="#__codelineno-84-357"></a>resource::ResourceAttributes resource_attributes = {{&quot;service.name&quot;, name},
<a id="__codelineno-84-358" name="__codelineno-84-358" href="#__codelineno-84-358"></a>
<a id="__codelineno-84-359" name="__codelineno-84-359" href="#__codelineno-84-359"></a>
<a id="__codelineno-84-360" name="__codelineno-84-360" href="#__codelineno-84-360"></a>
<a id="__codelineno-84-361" name="__codelineno-84-361" href="#__codelineno-84-361"></a>{&quot;service.version&quot;, version}};
<a id="__codelineno-84-362" name="__codelineno-84-362" href="#__codelineno-84-362"></a>
<a id="__codelineno-84-363" name="__codelineno-84-363" href="#__codelineno-84-363"></a>
<a id="__codelineno-84-364" name="__codelineno-84-364" href="#__codelineno-84-364"></a>
<a id="__codelineno-84-365" name="__codelineno-84-365" href="#__codelineno-84-365"></a>resource::ResourceAttributes dt_resource_attributes;
<a id="__codelineno-84-366" name="__codelineno-84-366" href="#__codelineno-84-366"></a>
<a id="__codelineno-84-367" name="__codelineno-84-367" href="#__codelineno-84-367"></a>
<a id="__codelineno-84-368" name="__codelineno-84-368" href="#__codelineno-84-368"></a>
<a id="__codelineno-84-369" name="__codelineno-84-369" href="#__codelineno-84-369"></a>try
<a id="__codelineno-84-370" name="__codelineno-84-370" href="#__codelineno-84-370"></a>
<a id="__codelineno-84-371" name="__codelineno-84-371" href="#__codelineno-84-371"></a>
<a id="__codelineno-84-372" name="__codelineno-84-372" href="#__codelineno-84-372"></a>
<a id="__codelineno-84-373" name="__codelineno-84-373" href="#__codelineno-84-373"></a>{
<a id="__codelineno-84-374" name="__codelineno-84-374" href="#__codelineno-84-374"></a>
<a id="__codelineno-84-375" name="__codelineno-84-375" href="#__codelineno-84-375"></a>
<a id="__codelineno-84-376" name="__codelineno-84-376" href="#__codelineno-84-376"></a>
<a id="__codelineno-84-377" name="__codelineno-84-377" href="#__codelineno-84-377"></a>for (string name : {&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;,
<a id="__codelineno-84-378" name="__codelineno-84-378" href="#__codelineno-84-378"></a>
<a id="__codelineno-84-379" name="__codelineno-84-379" href="#__codelineno-84-379"></a>
<a id="__codelineno-84-380" name="__codelineno-84-380" href="#__codelineno-84-380"></a>
<a id="__codelineno-84-381" name="__codelineno-84-381" href="#__codelineno-84-381"></a>&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;,
<a id="__codelineno-84-382" name="__codelineno-84-382" href="#__codelineno-84-382"></a>
<a id="__codelineno-84-383" name="__codelineno-84-383" href="#__codelineno-84-383"></a>
<a id="__codelineno-84-384" name="__codelineno-84-384" href="#__codelineno-84-384"></a>
<a id="__codelineno-84-385" name="__codelineno-84-385" href="#__codelineno-84-385"></a>&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;})
<a id="__codelineno-84-386" name="__codelineno-84-386" href="#__codelineno-84-386"></a>
<a id="__codelineno-84-387" name="__codelineno-84-387" href="#__codelineno-84-387"></a>
<a id="__codelineno-84-388" name="__codelineno-84-388" href="#__codelineno-84-388"></a>
<a id="__codelineno-84-389" name="__codelineno-84-389" href="#__codelineno-84-389"></a>{
<a id="__codelineno-84-390" name="__codelineno-84-390" href="#__codelineno-84-390"></a>
<a id="__codelineno-84-391" name="__codelineno-84-391" href="#__codelineno-84-391"></a>
<a id="__codelineno-84-392" name="__codelineno-84-392" href="#__codelineno-84-392"></a>
<a id="__codelineno-84-393" name="__codelineno-84-393" href="#__codelineno-84-393"></a>string file_path;
<a id="__codelineno-84-394" name="__codelineno-84-394" href="#__codelineno-84-394"></a>
<a id="__codelineno-84-395" name="__codelineno-84-395" href="#__codelineno-84-395"></a>
<a id="__codelineno-84-396" name="__codelineno-84-396" href="#__codelineno-84-396"></a>
<a id="__codelineno-84-397" name="__codelineno-84-397" href="#__codelineno-84-397"></a>ifstream dt_file;
<a id="__codelineno-84-398" name="__codelineno-84-398" href="#__codelineno-84-398"></a>
<a id="__codelineno-84-399" name="__codelineno-84-399" href="#__codelineno-84-399"></a>
<a id="__codelineno-84-400" name="__codelineno-84-400" href="#__codelineno-84-400"></a>
<a id="__codelineno-84-401" name="__codelineno-84-401" href="#__codelineno-84-401"></a>dt_file.open(name);
<a id="__codelineno-84-402" name="__codelineno-84-402" href="#__codelineno-84-402"></a>
<a id="__codelineno-84-403" name="__codelineno-84-403" href="#__codelineno-84-403"></a>
<a id="__codelineno-84-404" name="__codelineno-84-404" href="#__codelineno-84-404"></a>
<a id="__codelineno-84-405" name="__codelineno-84-405" href="#__codelineno-84-405"></a>if (dt_file.is_open())
<a id="__codelineno-84-406" name="__codelineno-84-406" href="#__codelineno-84-406"></a>
<a id="__codelineno-84-407" name="__codelineno-84-407" href="#__codelineno-84-407"></a>
<a id="__codelineno-84-408" name="__codelineno-84-408" href="#__codelineno-84-408"></a>
<a id="__codelineno-84-409" name="__codelineno-84-409" href="#__codelineno-84-409"></a>{
<a id="__codelineno-84-410" name="__codelineno-84-410" href="#__codelineno-84-410"></a>
<a id="__codelineno-84-411" name="__codelineno-84-411" href="#__codelineno-84-411"></a>
<a id="__codelineno-84-412" name="__codelineno-84-412" href="#__codelineno-84-412"></a>
<a id="__codelineno-84-413" name="__codelineno-84-413" href="#__codelineno-84-413"></a>string dt_metadata;
<a id="__codelineno-84-414" name="__codelineno-84-414" href="#__codelineno-84-414"></a>
<a id="__codelineno-84-415" name="__codelineno-84-415" href="#__codelineno-84-415"></a>
<a id="__codelineno-84-416" name="__codelineno-84-416" href="#__codelineno-84-416"></a>
<a id="__codelineno-84-417" name="__codelineno-84-417" href="#__codelineno-84-417"></a>ifstream dt_properties;
<a id="__codelineno-84-418" name="__codelineno-84-418" href="#__codelineno-84-418"></a>
<a id="__codelineno-84-419" name="__codelineno-84-419" href="#__codelineno-84-419"></a>
<a id="__codelineno-84-420" name="__codelineno-84-420" href="#__codelineno-84-420"></a>
<a id="__codelineno-84-421" name="__codelineno-84-421" href="#__codelineno-84-421"></a>while (getline(dt_file, file_path))
<a id="__codelineno-84-422" name="__codelineno-84-422" href="#__codelineno-84-422"></a>
<a id="__codelineno-84-423" name="__codelineno-84-423" href="#__codelineno-84-423"></a>
<a id="__codelineno-84-424" name="__codelineno-84-424" href="#__codelineno-84-424"></a>
<a id="__codelineno-84-425" name="__codelineno-84-425" href="#__codelineno-84-425"></a>{
<a id="__codelineno-84-426" name="__codelineno-84-426" href="#__codelineno-84-426"></a>
<a id="__codelineno-84-427" name="__codelineno-84-427" href="#__codelineno-84-427"></a>
<a id="__codelineno-84-428" name="__codelineno-84-428" href="#__codelineno-84-428"></a>
<a id="__codelineno-84-429" name="__codelineno-84-429" href="#__codelineno-84-429"></a>dt_properties.open(file_path);
<a id="__codelineno-84-430" name="__codelineno-84-430" href="#__codelineno-84-430"></a>
<a id="__codelineno-84-431" name="__codelineno-84-431" href="#__codelineno-84-431"></a>
<a id="__codelineno-84-432" name="__codelineno-84-432" href="#__codelineno-84-432"></a>
<a id="__codelineno-84-433" name="__codelineno-84-433" href="#__codelineno-84-433"></a>if (dt_properties.is_open())
<a id="__codelineno-84-434" name="__codelineno-84-434" href="#__codelineno-84-434"></a>
<a id="__codelineno-84-435" name="__codelineno-84-435" href="#__codelineno-84-435"></a>
<a id="__codelineno-84-436" name="__codelineno-84-436" href="#__codelineno-84-436"></a>
<a id="__codelineno-84-437" name="__codelineno-84-437" href="#__codelineno-84-437"></a>{
<a id="__codelineno-84-438" name="__codelineno-84-438" href="#__codelineno-84-438"></a>
<a id="__codelineno-84-439" name="__codelineno-84-439" href="#__codelineno-84-439"></a>
<a id="__codelineno-84-440" name="__codelineno-84-440" href="#__codelineno-84-440"></a>
<a id="__codelineno-84-441" name="__codelineno-84-441" href="#__codelineno-84-441"></a>while (getline(dt_properties, dt_metadata))
<a id="__codelineno-84-442" name="__codelineno-84-442" href="#__codelineno-84-442"></a>
<a id="__codelineno-84-443" name="__codelineno-84-443" href="#__codelineno-84-443"></a>
<a id="__codelineno-84-444" name="__codelineno-84-444" href="#__codelineno-84-444"></a>
<a id="__codelineno-84-445" name="__codelineno-84-445" href="#__codelineno-84-445"></a>{
<a id="__codelineno-84-446" name="__codelineno-84-446" href="#__codelineno-84-446"></a>
<a id="__codelineno-84-447" name="__codelineno-84-447" href="#__codelineno-84-447"></a>
<a id="__codelineno-84-448" name="__codelineno-84-448" href="#__codelineno-84-448"></a>
<a id="__codelineno-84-449" name="__codelineno-84-449" href="#__codelineno-84-449"></a>dt_resource_attributes.SetAttribute(
<a id="__codelineno-84-450" name="__codelineno-84-450" href="#__codelineno-84-450"></a>
<a id="__codelineno-84-451" name="__codelineno-84-451" href="#__codelineno-84-451"></a>
<a id="__codelineno-84-452" name="__codelineno-84-452" href="#__codelineno-84-452"></a>
<a id="__codelineno-84-453" name="__codelineno-84-453" href="#__codelineno-84-453"></a>dt_metadata.substr(0, dt_metadata.find(&quot;=&quot;)),
<a id="__codelineno-84-454" name="__codelineno-84-454" href="#__codelineno-84-454"></a>
<a id="__codelineno-84-455" name="__codelineno-84-455" href="#__codelineno-84-455"></a>
<a id="__codelineno-84-456" name="__codelineno-84-456" href="#__codelineno-84-456"></a>
<a id="__codelineno-84-457" name="__codelineno-84-457" href="#__codelineno-84-457"></a>dt_metadata.substr(dt_metadata.find(&quot;=&quot;) + 1)
<a id="__codelineno-84-458" name="__codelineno-84-458" href="#__codelineno-84-458"></a>
<a id="__codelineno-84-459" name="__codelineno-84-459" href="#__codelineno-84-459"></a>
<a id="__codelineno-84-460" name="__codelineno-84-460" href="#__codelineno-84-460"></a>
<a id="__codelineno-84-461" name="__codelineno-84-461" href="#__codelineno-84-461"></a>);
<a id="__codelineno-84-462" name="__codelineno-84-462" href="#__codelineno-84-462"></a>
<a id="__codelineno-84-463" name="__codelineno-84-463" href="#__codelineno-84-463"></a>
<a id="__codelineno-84-464" name="__codelineno-84-464" href="#__codelineno-84-464"></a>
<a id="__codelineno-84-465" name="__codelineno-84-465" href="#__codelineno-84-465"></a>}
<a id="__codelineno-84-466" name="__codelineno-84-466" href="#__codelineno-84-466"></a>
<a id="__codelineno-84-467" name="__codelineno-84-467" href="#__codelineno-84-467"></a>
<a id="__codelineno-84-468" name="__codelineno-84-468" href="#__codelineno-84-468"></a>
<a id="__codelineno-84-469" name="__codelineno-84-469" href="#__codelineno-84-469"></a>dt_properties.close();
<a id="__codelineno-84-470" name="__codelineno-84-470" href="#__codelineno-84-470"></a>
<a id="__codelineno-84-471" name="__codelineno-84-471" href="#__codelineno-84-471"></a>
<a id="__codelineno-84-472" name="__codelineno-84-472" href="#__codelineno-84-472"></a>
<a id="__codelineno-84-473" name="__codelineno-84-473" href="#__codelineno-84-473"></a>}
<a id="__codelineno-84-474" name="__codelineno-84-474" href="#__codelineno-84-474"></a>
<a id="__codelineno-84-475" name="__codelineno-84-475" href="#__codelineno-84-475"></a>
<a id="__codelineno-84-476" name="__codelineno-84-476" href="#__codelineno-84-476"></a>
<a id="__codelineno-84-477" name="__codelineno-84-477" href="#__codelineno-84-477"></a>}
<a id="__codelineno-84-478" name="__codelineno-84-478" href="#__codelineno-84-478"></a>
<a id="__codelineno-84-479" name="__codelineno-84-479" href="#__codelineno-84-479"></a>
<a id="__codelineno-84-480" name="__codelineno-84-480" href="#__codelineno-84-480"></a>
<a id="__codelineno-84-481" name="__codelineno-84-481" href="#__codelineno-84-481"></a>dt_file.close();
<a id="__codelineno-84-482" name="__codelineno-84-482" href="#__codelineno-84-482"></a>
<a id="__codelineno-84-483" name="__codelineno-84-483" href="#__codelineno-84-483"></a>
<a id="__codelineno-84-484" name="__codelineno-84-484" href="#__codelineno-84-484"></a>
<a id="__codelineno-84-485" name="__codelineno-84-485" href="#__codelineno-84-485"></a>}
<a id="__codelineno-84-486" name="__codelineno-84-486" href="#__codelineno-84-486"></a>
<a id="__codelineno-84-487" name="__codelineno-84-487" href="#__codelineno-84-487"></a>
<a id="__codelineno-84-488" name="__codelineno-84-488" href="#__codelineno-84-488"></a>
<a id="__codelineno-84-489" name="__codelineno-84-489" href="#__codelineno-84-489"></a>}
<a id="__codelineno-84-490" name="__codelineno-84-490" href="#__codelineno-84-490"></a>
<a id="__codelineno-84-491" name="__codelineno-84-491" href="#__codelineno-84-491"></a>
<a id="__codelineno-84-492" name="__codelineno-84-492" href="#__codelineno-84-492"></a>
<a id="__codelineno-84-493" name="__codelineno-84-493" href="#__codelineno-84-493"></a>}
<a id="__codelineno-84-494" name="__codelineno-84-494" href="#__codelineno-84-494"></a>
<a id="__codelineno-84-495" name="__codelineno-84-495" href="#__codelineno-84-495"></a>
<a id="__codelineno-84-496" name="__codelineno-84-496" href="#__codelineno-84-496"></a>
<a id="__codelineno-84-497" name="__codelineno-84-497" href="#__codelineno-84-497"></a>catch (...) {}
<a id="__codelineno-84-498" name="__codelineno-84-498" href="#__codelineno-84-498"></a>
<a id="__codelineno-84-499" name="__codelineno-84-499" href="#__codelineno-84-499"></a>
<a id="__codelineno-84-500" name="__codelineno-84-500" href="#__codelineno-84-500"></a>
<a id="__codelineno-84-501" name="__codelineno-84-501" href="#__codelineno-84-501"></a>auto dt_resource = resource::Resource::Create(dt_resource_attributes);
<a id="__codelineno-84-502" name="__codelineno-84-502" href="#__codelineno-84-502"></a>
<a id="__codelineno-84-503" name="__codelineno-84-503" href="#__codelineno-84-503"></a>
<a id="__codelineno-84-504" name="__codelineno-84-504" href="#__codelineno-84-504"></a>
<a id="__codelineno-84-505" name="__codelineno-84-505" href="#__codelineno-84-505"></a>auto resource = resource::Resource::Create(resource_attributes);
<a id="__codelineno-84-506" name="__codelineno-84-506" href="#__codelineno-84-506"></a>
<a id="__codelineno-84-507" name="__codelineno-84-507" href="#__codelineno-84-507"></a>
<a id="__codelineno-84-508" name="__codelineno-84-508" href="#__codelineno-84-508"></a>
<a id="__codelineno-84-509" name="__codelineno-84-509" href="#__codelineno-84-509"></a>auto merged_resource = dt_resource.Merge(resource);
<a id="__codelineno-84-510" name="__codelineno-84-510" href="#__codelineno-84-510"></a>
<a id="__codelineno-84-511" name="__codelineno-84-511" href="#__codelineno-84-511"></a>
<a id="__codelineno-84-512" name="__codelineno-84-512" href="#__codelineno-84-512"></a>
<a id="__codelineno-84-513" name="__codelineno-84-513" href="#__codelineno-84-513"></a>auto exporter = otlp::OtlpHttpExporterFactory::Create(traceOptions);
<a id="__codelineno-84-514" name="__codelineno-84-514" href="#__codelineno-84-514"></a>
<a id="__codelineno-84-515" name="__codelineno-84-515" href="#__codelineno-84-515"></a>
<a id="__codelineno-84-516" name="__codelineno-84-516" href="#__codelineno-84-516"></a>
<a id="__codelineno-84-517" name="__codelineno-84-517" href="#__codelineno-84-517"></a>auto processor = trace_sdk::SimpleSpanProcessorFactory::Create(std::move(exporter));
<a id="__codelineno-84-518" name="__codelineno-84-518" href="#__codelineno-84-518"></a>
<a id="__codelineno-84-519" name="__codelineno-84-519" href="#__codelineno-84-519"></a>
<a id="__codelineno-84-520" name="__codelineno-84-520" href="#__codelineno-84-520"></a>
<a id="__codelineno-84-521" name="__codelineno-84-521" href="#__codelineno-84-521"></a>std::vector&lt;std::unique_ptr&lt;trace_sdk::SpanProcessor&gt;&gt; processors;
<a id="__codelineno-84-522" name="__codelineno-84-522" href="#__codelineno-84-522"></a>
<a id="__codelineno-84-523" name="__codelineno-84-523" href="#__codelineno-84-523"></a>
<a id="__codelineno-84-524" name="__codelineno-84-524" href="#__codelineno-84-524"></a>
<a id="__codelineno-84-525" name="__codelineno-84-525" href="#__codelineno-84-525"></a>processors.push_back(std::move(processor));
<a id="__codelineno-84-526" name="__codelineno-84-526" href="#__codelineno-84-526"></a>
<a id="__codelineno-84-527" name="__codelineno-84-527" href="#__codelineno-84-527"></a>
<a id="__codelineno-84-528" name="__codelineno-84-528" href="#__codelineno-84-528"></a>
<a id="__codelineno-84-529" name="__codelineno-84-529" href="#__codelineno-84-529"></a>auto context = trace_sdk::TracerContextFactory::Create(std::move(processors), merged_resource);
<a id="__codelineno-84-530" name="__codelineno-84-530" href="#__codelineno-84-530"></a>
<a id="__codelineno-84-531" name="__codelineno-84-531" href="#__codelineno-84-531"></a>
<a id="__codelineno-84-532" name="__codelineno-84-532" href="#__codelineno-84-532"></a>
<a id="__codelineno-84-533" name="__codelineno-84-533" href="#__codelineno-84-533"></a>std::shared_ptr&lt;opentelemetry::trace::TracerProvider&gt; provider = opentelemetry::sdk::trace::TracerProviderFactory::Create(std::move(context));
<a id="__codelineno-84-534" name="__codelineno-84-534" href="#__codelineno-84-534"></a>
<a id="__codelineno-84-535" name="__codelineno-84-535" href="#__codelineno-84-535"></a>
<a id="__codelineno-84-536" name="__codelineno-84-536" href="#__codelineno-84-536"></a>
<a id="__codelineno-84-537" name="__codelineno-84-537" href="#__codelineno-84-537"></a>// Set the global trace provider
<a id="__codelineno-84-538" name="__codelineno-84-538" href="#__codelineno-84-538"></a>
<a id="__codelineno-84-539" name="__codelineno-84-539" href="#__codelineno-84-539"></a>
<a id="__codelineno-84-540" name="__codelineno-84-540" href="#__codelineno-84-540"></a>
<a id="__codelineno-84-541" name="__codelineno-84-541" href="#__codelineno-84-541"></a>opentelemetry::trace::Provider::SetTracerProvider(provider);
<a id="__codelineno-84-542" name="__codelineno-84-542" href="#__codelineno-84-542"></a>
<a id="__codelineno-84-543" name="__codelineno-84-543" href="#__codelineno-84-543"></a>
<a id="__codelineno-84-544" name="__codelineno-84-544" href="#__codelineno-84-544"></a>
<a id="__codelineno-84-545" name="__codelineno-84-545" href="#__codelineno-84-545"></a>// set global propagator
<a id="__codelineno-84-546" name="__codelineno-84-546" href="#__codelineno-84-546"></a>
<a id="__codelineno-84-547" name="__codelineno-84-547" href="#__codelineno-84-547"></a>
<a id="__codelineno-84-548" name="__codelineno-84-548" href="#__codelineno-84-548"></a>
<a id="__codelineno-84-549" name="__codelineno-84-549" href="#__codelineno-84-549"></a>opentelemetry::context::propagation::GlobalTextMapPropagator::SetGlobalPropagator(
<a id="__codelineno-84-550" name="__codelineno-84-550" href="#__codelineno-84-550"></a>
<a id="__codelineno-84-551" name="__codelineno-84-551" href="#__codelineno-84-551"></a>
<a id="__codelineno-84-552" name="__codelineno-84-552" href="#__codelineno-84-552"></a>
<a id="__codelineno-84-553" name="__codelineno-84-553" href="#__codelineno-84-553"></a>opentelemetry::nostd::shared_ptr&lt;opentelemetry::context::propagation::TextMapPropagator&gt;(
<a id="__codelineno-84-554" name="__codelineno-84-554" href="#__codelineno-84-554"></a>
<a id="__codelineno-84-555" name="__codelineno-84-555" href="#__codelineno-84-555"></a>
<a id="__codelineno-84-556" name="__codelineno-84-556" href="#__codelineno-84-556"></a>
<a id="__codelineno-84-557" name="__codelineno-84-557" href="#__codelineno-84-557"></a>new opentelemetry::trace::propagation::HttpTraceContext()));
<a id="__codelineno-84-558" name="__codelineno-84-558" href="#__codelineno-84-558"></a>
<a id="__codelineno-84-559" name="__codelineno-84-559" href="#__codelineno-84-559"></a>
<a id="__codelineno-84-560" name="__codelineno-84-560" href="#__codelineno-84-560"></a>
<a id="__codelineno-84-561" name="__codelineno-84-561" href="#__codelineno-84-561"></a>}
<a id="__codelineno-84-562" name="__codelineno-84-562" href="#__codelineno-84-562"></a>
<a id="__codelineno-84-563" name="__codelineno-84-563" href="#__codelineno-84-563"></a>
<a id="__codelineno-84-564" name="__codelineno-84-564" href="#__codelineno-84-564"></a>
<a id="__codelineno-84-565" name="__codelineno-84-565" href="#__codelineno-84-565"></a>// ===== METRIC SETUP =====
<a id="__codelineno-84-566" name="__codelineno-84-566" href="#__codelineno-84-566"></a>
<a id="__codelineno-84-567" name="__codelineno-84-567" href="#__codelineno-84-567"></a>
<a id="__codelineno-84-568" name="__codelineno-84-568" href="#__codelineno-84-568"></a>
<a id="__codelineno-84-569" name="__codelineno-84-569" href="#__codelineno-84-569"></a>void initMeter() {
<a id="__codelineno-84-570" name="__codelineno-84-570" href="#__codelineno-84-570"></a>
<a id="__codelineno-84-571" name="__codelineno-84-571" href="#__codelineno-84-571"></a>
<a id="__codelineno-84-572" name="__codelineno-84-572" href="#__codelineno-84-572"></a>
<a id="__codelineno-84-573" name="__codelineno-84-573" href="#__codelineno-84-573"></a>resource::ResourceAttributes resource_attributes = {{&quot;service.name&quot;, name},
<a id="__codelineno-84-574" name="__codelineno-84-574" href="#__codelineno-84-574"></a>
<a id="__codelineno-84-575" name="__codelineno-84-575" href="#__codelineno-84-575"></a>
<a id="__codelineno-84-576" name="__codelineno-84-576" href="#__codelineno-84-576"></a>
<a id="__codelineno-84-577" name="__codelineno-84-577" href="#__codelineno-84-577"></a>{&quot;service.version&quot;, version}};
<a id="__codelineno-84-578" name="__codelineno-84-578" href="#__codelineno-84-578"></a>
<a id="__codelineno-84-579" name="__codelineno-84-579" href="#__codelineno-84-579"></a>
<a id="__codelineno-84-580" name="__codelineno-84-580" href="#__codelineno-84-580"></a>
<a id="__codelineno-84-581" name="__codelineno-84-581" href="#__codelineno-84-581"></a>otlp::OtlpHttpMetricExporterOptions otlpOptions;
<a id="__codelineno-84-582" name="__codelineno-84-582" href="#__codelineno-84-582"></a>
<a id="__codelineno-84-583" name="__codelineno-84-583" href="#__codelineno-84-583"></a>
<a id="__codelineno-84-584" name="__codelineno-84-584" href="#__codelineno-84-584"></a>
<a id="__codelineno-84-585" name="__codelineno-84-585" href="#__codelineno-84-585"></a>auto resource = resource::Resource::Create(resource_attributes);
<a id="__codelineno-84-586" name="__codelineno-84-586" href="#__codelineno-84-586"></a>
<a id="__codelineno-84-587" name="__codelineno-84-587" href="#__codelineno-84-587"></a>
<a id="__codelineno-84-588" name="__codelineno-84-588" href="#__codelineno-84-588"></a>
<a id="__codelineno-84-589" name="__codelineno-84-589" href="#__codelineno-84-589"></a>otlpOptions.url = std::string(std::getenv(&quot;DT_API_URL&quot;)) + &quot;/v1/metrics&quot;;
<a id="__codelineno-84-590" name="__codelineno-84-590" href="#__codelineno-84-590"></a>
<a id="__codelineno-84-591" name="__codelineno-84-591" href="#__codelineno-84-591"></a>
<a id="__codelineno-84-592" name="__codelineno-84-592" href="#__codelineno-84-592"></a>
<a id="__codelineno-84-593" name="__codelineno-84-593" href="#__codelineno-84-593"></a>otlpOptions.aggregation_temporality = otlp::PreferredAggregationTemporality::kDelta;
<a id="__codelineno-84-594" name="__codelineno-84-594" href="#__codelineno-84-594"></a>
<a id="__codelineno-84-595" name="__codelineno-84-595" href="#__codelineno-84-595"></a>
<a id="__codelineno-84-596" name="__codelineno-84-596" href="#__codelineno-84-596"></a>
<a id="__codelineno-84-597" name="__codelineno-84-597" href="#__codelineno-84-597"></a>otlpOptions.content_type = otlp::HttpRequestContentType::kBinary;
<a id="__codelineno-84-598" name="__codelineno-84-598" href="#__codelineno-84-598"></a>
<a id="__codelineno-84-599" name="__codelineno-84-599" href="#__codelineno-84-599"></a>
<a id="__codelineno-84-600" name="__codelineno-84-600" href="#__codelineno-84-600"></a>
<a id="__codelineno-84-601" name="__codelineno-84-601" href="#__codelineno-84-601"></a>otlpOptions.http_headers.insert(std::make_pair&lt;const std::string, std::string&gt;(&quot;Authorization&quot;, std::getenv(&quot;DT_API_TOKEN&quot;)));
<a id="__codelineno-84-602" name="__codelineno-84-602" href="#__codelineno-84-602"></a>
<a id="__codelineno-84-603" name="__codelineno-84-603" href="#__codelineno-84-603"></a>
<a id="__codelineno-84-604" name="__codelineno-84-604" href="#__codelineno-84-604"></a>
<a id="__codelineno-84-605" name="__codelineno-84-605" href="#__codelineno-84-605"></a>//This creates the exporter with the options we have defined above.
<a id="__codelineno-84-606" name="__codelineno-84-606" href="#__codelineno-84-606"></a>
<a id="__codelineno-84-607" name="__codelineno-84-607" href="#__codelineno-84-607"></a>
<a id="__codelineno-84-608" name="__codelineno-84-608" href="#__codelineno-84-608"></a>
<a id="__codelineno-84-609" name="__codelineno-84-609" href="#__codelineno-84-609"></a>auto exporter = otlp::OtlpHttpMetricExporterFactory::Create(otlpOptions);
<a id="__codelineno-84-610" name="__codelineno-84-610" href="#__codelineno-84-610"></a>
<a id="__codelineno-84-611" name="__codelineno-84-611" href="#__codelineno-84-611"></a>
<a id="__codelineno-84-612" name="__codelineno-84-612" href="#__codelineno-84-612"></a>
<a id="__codelineno-84-613" name="__codelineno-84-613" href="#__codelineno-84-613"></a>metrics_sdk::PeriodicExportingMetricReaderOptions options;
<a id="__codelineno-84-614" name="__codelineno-84-614" href="#__codelineno-84-614"></a>
<a id="__codelineno-84-615" name="__codelineno-84-615" href="#__codelineno-84-615"></a>
<a id="__codelineno-84-616" name="__codelineno-84-616" href="#__codelineno-84-616"></a>
<a id="__codelineno-84-617" name="__codelineno-84-617" href="#__codelineno-84-617"></a>options.export_interval_millis = std::chrono::milliseconds(1000);
<a id="__codelineno-84-618" name="__codelineno-84-618" href="#__codelineno-84-618"></a>
<a id="__codelineno-84-619" name="__codelineno-84-619" href="#__codelineno-84-619"></a>
<a id="__codelineno-84-620" name="__codelineno-84-620" href="#__codelineno-84-620"></a>
<a id="__codelineno-84-621" name="__codelineno-84-621" href="#__codelineno-84-621"></a>options.export_timeout_millis  = std::chrono::milliseconds(500);
<a id="__codelineno-84-622" name="__codelineno-84-622" href="#__codelineno-84-622"></a>
<a id="__codelineno-84-623" name="__codelineno-84-623" href="#__codelineno-84-623"></a>
<a id="__codelineno-84-624" name="__codelineno-84-624" href="#__codelineno-84-624"></a>
<a id="__codelineno-84-625" name="__codelineno-84-625" href="#__codelineno-84-625"></a>std::unique_ptr&lt;metrics_sdk::MetricReader&gt; reader{new metrics_sdk::PeriodicExportingMetricReader(std::move(exporter), options) };
<a id="__codelineno-84-626" name="__codelineno-84-626" href="#__codelineno-84-626"></a>
<a id="__codelineno-84-627" name="__codelineno-84-627" href="#__codelineno-84-627"></a>
<a id="__codelineno-84-628" name="__codelineno-84-628" href="#__codelineno-84-628"></a>
<a id="__codelineno-84-629" name="__codelineno-84-629" href="#__codelineno-84-629"></a>auto context = metrics_sdk::MeterContextFactory::Create(opentelemetry::sdk::metrics::ViewRegistryFactory::Create(), resource);
<a id="__codelineno-84-630" name="__codelineno-84-630" href="#__codelineno-84-630"></a>
<a id="__codelineno-84-631" name="__codelineno-84-631" href="#__codelineno-84-631"></a>
<a id="__codelineno-84-632" name="__codelineno-84-632" href="#__codelineno-84-632"></a>
<a id="__codelineno-84-633" name="__codelineno-84-633" href="#__codelineno-84-633"></a>context-&gt;AddMetricReader(std::move(reader));
<a id="__codelineno-84-634" name="__codelineno-84-634" href="#__codelineno-84-634"></a>
<a id="__codelineno-84-635" name="__codelineno-84-635" href="#__codelineno-84-635"></a>
<a id="__codelineno-84-636" name="__codelineno-84-636" href="#__codelineno-84-636"></a>
<a id="__codelineno-84-637" name="__codelineno-84-637" href="#__codelineno-84-637"></a>auto u_provider = metrics_sdk::MeterProviderFactory::Create(std::move(context));
<a id="__codelineno-84-638" name="__codelineno-84-638" href="#__codelineno-84-638"></a>
<a id="__codelineno-84-639" name="__codelineno-84-639" href="#__codelineno-84-639"></a>
<a id="__codelineno-84-640" name="__codelineno-84-640" href="#__codelineno-84-640"></a>
<a id="__codelineno-84-641" name="__codelineno-84-641" href="#__codelineno-84-641"></a>std::shared_ptr&lt;opentelemetry::metrics::MeterProvider&gt; provider(std::move(u_provider));
<a id="__codelineno-84-642" name="__codelineno-84-642" href="#__codelineno-84-642"></a>
<a id="__codelineno-84-643" name="__codelineno-84-643" href="#__codelineno-84-643"></a>
<a id="__codelineno-84-644" name="__codelineno-84-644" href="#__codelineno-84-644"></a>
<a id="__codelineno-84-645" name="__codelineno-84-645" href="#__codelineno-84-645"></a>metrics_api::Provider::SetMeterProvider(provider);
<a id="__codelineno-84-646" name="__codelineno-84-646" href="#__codelineno-84-646"></a>
<a id="__codelineno-84-647" name="__codelineno-84-647" href="#__codelineno-84-647"></a>
<a id="__codelineno-84-648" name="__codelineno-84-648" href="#__codelineno-84-648"></a>
<a id="__codelineno-84-649" name="__codelineno-84-649" href="#__codelineno-84-649"></a>}
<a id="__codelineno-84-650" name="__codelineno-84-650" href="#__codelineno-84-650"></a>
<a id="__codelineno-84-651" name="__codelineno-84-651" href="#__codelineno-84-651"></a>
<a id="__codelineno-84-652" name="__codelineno-84-652" href="#__codelineno-84-652"></a>
<a id="__codelineno-84-653" name="__codelineno-84-653" href="#__codelineno-84-653"></a>// ===== LOG SETUP =====
<a id="__codelineno-84-654" name="__codelineno-84-654" href="#__codelineno-84-654"></a>
<a id="__codelineno-84-655" name="__codelineno-84-655" href="#__codelineno-84-655"></a>
<a id="__codelineno-84-656" name="__codelineno-84-656" href="#__codelineno-84-656"></a>
<a id="__codelineno-84-657" name="__codelineno-84-657" href="#__codelineno-84-657"></a>void initLogger() {
<a id="__codelineno-84-658" name="__codelineno-84-658" href="#__codelineno-84-658"></a>
<a id="__codelineno-84-659" name="__codelineno-84-659" href="#__codelineno-84-659"></a>
<a id="__codelineno-84-660" name="__codelineno-84-660" href="#__codelineno-84-660"></a>
<a id="__codelineno-84-661" name="__codelineno-84-661" href="#__codelineno-84-661"></a>resource::ResourceAttributes resource_attributes = {{&quot;service.name&quot;, name},
<a id="__codelineno-84-662" name="__codelineno-84-662" href="#__codelineno-84-662"></a>
<a id="__codelineno-84-663" name="__codelineno-84-663" href="#__codelineno-84-663"></a>
<a id="__codelineno-84-664" name="__codelineno-84-664" href="#__codelineno-84-664"></a>
<a id="__codelineno-84-665" name="__codelineno-84-665" href="#__codelineno-84-665"></a>{&quot;service.version&quot;, version}};
<a id="__codelineno-84-666" name="__codelineno-84-666" href="#__codelineno-84-666"></a>
<a id="__codelineno-84-667" name="__codelineno-84-667" href="#__codelineno-84-667"></a>
<a id="__codelineno-84-668" name="__codelineno-84-668" href="#__codelineno-84-668"></a>
<a id="__codelineno-84-669" name="__codelineno-84-669" href="#__codelineno-84-669"></a>auto resource = resource::Resource::Create(resource_attributes);
<a id="__codelineno-84-670" name="__codelineno-84-670" href="#__codelineno-84-670"></a>
<a id="__codelineno-84-671" name="__codelineno-84-671" href="#__codelineno-84-671"></a>
<a id="__codelineno-84-672" name="__codelineno-84-672" href="#__codelineno-84-672"></a>
<a id="__codelineno-84-673" name="__codelineno-84-673" href="#__codelineno-84-673"></a>otlp::OtlpHttpLogRecordExporterOptions loggerOptions;
<a id="__codelineno-84-674" name="__codelineno-84-674" href="#__codelineno-84-674"></a>
<a id="__codelineno-84-675" name="__codelineno-84-675" href="#__codelineno-84-675"></a>
<a id="__codelineno-84-676" name="__codelineno-84-676" href="#__codelineno-84-676"></a>
<a id="__codelineno-84-677" name="__codelineno-84-677" href="#__codelineno-84-677"></a>loggerOptions.url = std::string(std::getenv(&quot;DT_API_URL&quot;)) + &quot;/v1/logs&quot;;
<a id="__codelineno-84-678" name="__codelineno-84-678" href="#__codelineno-84-678"></a>
<a id="__codelineno-84-679" name="__codelineno-84-679" href="#__codelineno-84-679"></a>
<a id="__codelineno-84-680" name="__codelineno-84-680" href="#__codelineno-84-680"></a>
<a id="__codelineno-84-681" name="__codelineno-84-681" href="#__codelineno-84-681"></a>loggerOptions.http_headers.insert(std::make_pair&lt;const std::string, std::string&gt;(&quot;Authorization&quot;, std::getenv(&quot;DT_API_TOKEN&quot;)));
<a id="__codelineno-84-682" name="__codelineno-84-682" href="#__codelineno-84-682"></a>
<a id="__codelineno-84-683" name="__codelineno-84-683" href="#__codelineno-84-683"></a>
<a id="__codelineno-84-684" name="__codelineno-84-684" href="#__codelineno-84-684"></a>
<a id="__codelineno-84-685" name="__codelineno-84-685" href="#__codelineno-84-685"></a>loggerOptions.content_type = opentelemetry::exporter::otlp::HttpRequestContentType::kBinary;
<a id="__codelineno-84-686" name="__codelineno-84-686" href="#__codelineno-84-686"></a>
<a id="__codelineno-84-687" name="__codelineno-84-687" href="#__codelineno-84-687"></a>
<a id="__codelineno-84-688" name="__codelineno-84-688" href="#__codelineno-84-688"></a>
<a id="__codelineno-84-689" name="__codelineno-84-689" href="#__codelineno-84-689"></a>auto exporter  = otlp::OtlpHttpLogRecordExporterFactory::Create(loggerOptions);
<a id="__codelineno-84-690" name="__codelineno-84-690" href="#__codelineno-84-690"></a>
<a id="__codelineno-84-691" name="__codelineno-84-691" href="#__codelineno-84-691"></a>
<a id="__codelineno-84-692" name="__codelineno-84-692" href="#__codelineno-84-692"></a>
<a id="__codelineno-84-693" name="__codelineno-84-693" href="#__codelineno-84-693"></a>auto processor = logs_sdk::SimpleLogRecordProcessorFactory::Create(std::move(exporter));
<a id="__codelineno-84-694" name="__codelineno-84-694" href="#__codelineno-84-694"></a>
<a id="__codelineno-84-695" name="__codelineno-84-695" href="#__codelineno-84-695"></a>
<a id="__codelineno-84-696" name="__codelineno-84-696" href="#__codelineno-84-696"></a>
<a id="__codelineno-84-697" name="__codelineno-84-697" href="#__codelineno-84-697"></a>std::vector&lt;std::unique_ptr&lt;logs_sdk::LogRecordProcessor&gt;&gt; processors;
<a id="__codelineno-84-698" name="__codelineno-84-698" href="#__codelineno-84-698"></a>
<a id="__codelineno-84-699" name="__codelineno-84-699" href="#__codelineno-84-699"></a>
<a id="__codelineno-84-700" name="__codelineno-84-700" href="#__codelineno-84-700"></a>
<a id="__codelineno-84-701" name="__codelineno-84-701" href="#__codelineno-84-701"></a>processors.push_back(std::move(processor));
<a id="__codelineno-84-702" name="__codelineno-84-702" href="#__codelineno-84-702"></a>
<a id="__codelineno-84-703" name="__codelineno-84-703" href="#__codelineno-84-703"></a>
<a id="__codelineno-84-704" name="__codelineno-84-704" href="#__codelineno-84-704"></a>
<a id="__codelineno-84-705" name="__codelineno-84-705" href="#__codelineno-84-705"></a>auto context = logs_sdk::LoggerContextFactory::Create(std::move(processors), resource);
<a id="__codelineno-84-706" name="__codelineno-84-706" href="#__codelineno-84-706"></a>
<a id="__codelineno-84-707" name="__codelineno-84-707" href="#__codelineno-84-707"></a>
<a id="__codelineno-84-708" name="__codelineno-84-708" href="#__codelineno-84-708"></a>
<a id="__codelineno-84-709" name="__codelineno-84-709" href="#__codelineno-84-709"></a>std::shared_ptr&lt;logs_api::LoggerProvider&gt; provider = logs_sdk::LoggerProviderFactory::Create(std::move(context));
<a id="__codelineno-84-710" name="__codelineno-84-710" href="#__codelineno-84-710"></a>
<a id="__codelineno-84-711" name="__codelineno-84-711" href="#__codelineno-84-711"></a>
<a id="__codelineno-84-712" name="__codelineno-84-712" href="#__codelineno-84-712"></a>
<a id="__codelineno-84-713" name="__codelineno-84-713" href="#__codelineno-84-713"></a>opentelemetry::logs::Provider::SetLoggerProvider(provider);
<a id="__codelineno-84-714" name="__codelineno-84-714" href="#__codelineno-84-714"></a>
<a id="__codelineno-84-715" name="__codelineno-84-715" href="#__codelineno-84-715"></a>
<a id="__codelineno-84-716" name="__codelineno-84-716" href="#__codelineno-84-716"></a>
<a id="__codelineno-84-717" name="__codelineno-84-717" href="#__codelineno-84-717"></a>}
<a id="__codelineno-84-718" name="__codelineno-84-718" href="#__codelineno-84-718"></a>
<a id="__codelineno-84-719" name="__codelineno-84-719" href="#__codelineno-84-719"></a>
<a id="__codelineno-84-720" name="__codelineno-84-720" href="#__codelineno-84-720"></a>
<a id="__codelineno-84-721" name="__codelineno-84-721" href="#__codelineno-84-721"></a>nostd::shared_ptr&lt;opentelemetry::logs::Logger&gt; get_logger(std::string scope){
<a id="__codelineno-84-722" name="__codelineno-84-722" href="#__codelineno-84-722"></a>
<a id="__codelineno-84-723" name="__codelineno-84-723" href="#__codelineno-84-723"></a>
<a id="__codelineno-84-724" name="__codelineno-84-724" href="#__codelineno-84-724"></a>
<a id="__codelineno-84-725" name="__codelineno-84-725" href="#__codelineno-84-725"></a>// TODO: add your log provider here
<a id="__codelineno-84-726" name="__codelineno-84-726" href="#__codelineno-84-726"></a>
<a id="__codelineno-84-727" name="__codelineno-84-727" href="#__codelineno-84-727"></a>
<a id="__codelineno-84-728" name="__codelineno-84-728" href="#__codelineno-84-728"></a>
<a id="__codelineno-84-729" name="__codelineno-84-729" href="#__codelineno-84-729"></a>return logger;
<a id="__codelineno-84-730" name="__codelineno-84-730" href="#__codelineno-84-730"></a>
<a id="__codelineno-84-731" name="__codelineno-84-731" href="#__codelineno-84-731"></a>
<a id="__codelineno-84-732" name="__codelineno-84-732" href="#__codelineno-84-732"></a>
<a id="__codelineno-84-733" name="__codelineno-84-733" href="#__codelineno-84-733"></a>}
<a id="__codelineno-84-734" name="__codelineno-84-734" href="#__codelineno-84-734"></a>
<a id="__codelineno-84-735" name="__codelineno-84-735" href="#__codelineno-84-735"></a>
<a id="__codelineno-84-736" name="__codelineno-84-736" href="#__codelineno-84-736"></a>
<a id="__codelineno-84-737" name="__codelineno-84-737" href="#__codelineno-84-737"></a>opentelemetry::nostd::shared_ptr&lt;opentelemetry::trace::Tracer&gt; get_tracer(std::string tracer_name)
<a id="__codelineno-84-738" name="__codelineno-84-738" href="#__codelineno-84-738"></a>
<a id="__codelineno-84-739" name="__codelineno-84-739" href="#__codelineno-84-739"></a>
<a id="__codelineno-84-740" name="__codelineno-84-740" href="#__codelineno-84-740"></a>
<a id="__codelineno-84-741" name="__codelineno-84-741" href="#__codelineno-84-741"></a>{
<a id="__codelineno-84-742" name="__codelineno-84-742" href="#__codelineno-84-742"></a>
<a id="__codelineno-84-743" name="__codelineno-84-743" href="#__codelineno-84-743"></a>
<a id="__codelineno-84-744" name="__codelineno-84-744" href="#__codelineno-84-744"></a>
<a id="__codelineno-84-745" name="__codelineno-84-745" href="#__codelineno-84-745"></a>// TODO: add your trace provider here
<a id="__codelineno-84-746" name="__codelineno-84-746" href="#__codelineno-84-746"></a>
<a id="__codelineno-84-747" name="__codelineno-84-747" href="#__codelineno-84-747"></a>
<a id="__codelineno-84-748" name="__codelineno-84-748" href="#__codelineno-84-748"></a>
<a id="__codelineno-84-749" name="__codelineno-84-749" href="#__codelineno-84-749"></a>return tracer;
<a id="__codelineno-84-750" name="__codelineno-84-750" href="#__codelineno-84-750"></a>
<a id="__codelineno-84-751" name="__codelineno-84-751" href="#__codelineno-84-751"></a>
<a id="__codelineno-84-752" name="__codelineno-84-752" href="#__codelineno-84-752"></a>
<a id="__codelineno-84-753" name="__codelineno-84-753" href="#__codelineno-84-753"></a>}
<a id="__codelineno-84-754" name="__codelineno-84-754" href="#__codelineno-84-754"></a>
<a id="__codelineno-84-755" name="__codelineno-84-755" href="#__codelineno-84-755"></a>
<a id="__codelineno-84-756" name="__codelineno-84-756" href="#__codelineno-84-756"></a>
<a id="__codelineno-84-757" name="__codelineno-84-757" href="#__codelineno-84-757"></a>nostd::unique_ptr&lt;opentelemetry::metrics::Counter&lt;uint64_t&gt;&gt; initIntCounter()
<a id="__codelineno-84-758" name="__codelineno-84-758" href="#__codelineno-84-758"></a>
<a id="__codelineno-84-759" name="__codelineno-84-759" href="#__codelineno-84-759"></a>
<a id="__codelineno-84-760" name="__codelineno-84-760" href="#__codelineno-84-760"></a>
<a id="__codelineno-84-761" name="__codelineno-84-761" href="#__codelineno-84-761"></a>{
<a id="__codelineno-84-762" name="__codelineno-84-762" href="#__codelineno-84-762"></a>
<a id="__codelineno-84-763" name="__codelineno-84-763" href="#__codelineno-84-763"></a>
<a id="__codelineno-84-764" name="__codelineno-84-764" href="#__codelineno-84-764"></a>
<a id="__codelineno-84-765" name="__codelineno-84-765" href="#__codelineno-84-765"></a>// TODO: add your custom metrics here
<a id="__codelineno-84-766" name="__codelineno-84-766" href="#__codelineno-84-766"></a>
<a id="__codelineno-84-767" name="__codelineno-84-767" href="#__codelineno-84-767"></a>
<a id="__codelineno-84-768" name="__codelineno-84-768" href="#__codelineno-84-768"></a>
<a id="__codelineno-84-769" name="__codelineno-84-769" href="#__codelineno-84-769"></a>return request_counter;
<a id="__codelineno-84-770" name="__codelineno-84-770" href="#__codelineno-84-770"></a>
<a id="__codelineno-84-771" name="__codelineno-84-771" href="#__codelineno-84-771"></a>
<a id="__codelineno-84-772" name="__codelineno-84-772" href="#__codelineno-84-772"></a>
<a id="__codelineno-84-773" name="__codelineno-84-773" href="#__codelineno-84-773"></a>}
<a id="__codelineno-84-774" name="__codelineno-84-774" href="#__codelineno-84-774"></a>
<a id="__codelineno-84-775" name="__codelineno-84-775" href="#__codelineno-84-775"></a>
<a id="__codelineno-84-776" name="__codelineno-84-776" href="#__codelineno-84-776"></a>
<a id="__codelineno-84-777" name="__codelineno-84-777" href="#__codelineno-84-777"></a>void initOpenTelemetry() {
<a id="__codelineno-84-778" name="__codelineno-84-778" href="#__codelineno-84-778"></a>
<a id="__codelineno-84-779" name="__codelineno-84-779" href="#__codelineno-84-779"></a>
<a id="__codelineno-84-780" name="__codelineno-84-780" href="#__codelineno-84-780"></a>
<a id="__codelineno-84-781" name="__codelineno-84-781" href="#__codelineno-84-781"></a>// You can import only the required method
<a id="__codelineno-84-782" name="__codelineno-84-782" href="#__codelineno-84-782"></a>
<a id="__codelineno-84-783" name="__codelineno-84-783" href="#__codelineno-84-783"></a>
<a id="__codelineno-84-784" name="__codelineno-84-784" href="#__codelineno-84-784"></a>
<a id="__codelineno-84-785" name="__codelineno-84-785" href="#__codelineno-84-785"></a>initLogger();
<a id="__codelineno-84-786" name="__codelineno-84-786" href="#__codelineno-84-786"></a>
<a id="__codelineno-84-787" name="__codelineno-84-787" href="#__codelineno-84-787"></a>
<a id="__codelineno-84-788" name="__codelineno-84-788" href="#__codelineno-84-788"></a>
<a id="__codelineno-84-789" name="__codelineno-84-789" href="#__codelineno-84-789"></a>initTracer();
<a id="__codelineno-84-790" name="__codelineno-84-790" href="#__codelineno-84-790"></a>
<a id="__codelineno-84-791" name="__codelineno-84-791" href="#__codelineno-84-791"></a>
<a id="__codelineno-84-792" name="__codelineno-84-792" href="#__codelineno-84-792"></a>
<a id="__codelineno-84-793" name="__codelineno-84-793" href="#__codelineno-84-793"></a>initMeter();
<a id="__codelineno-84-794" name="__codelineno-84-794" href="#__codelineno-84-794"></a>
<a id="__codelineno-84-795" name="__codelineno-84-795" href="#__codelineno-84-795"></a>
<a id="__codelineno-84-796" name="__codelineno-84-796" href="#__codelineno-84-796"></a>
<a id="__codelineno-84-797" name="__codelineno-84-797" href="#__codelineno-84-797"></a>}
<a id="__codelineno-84-798" name="__codelineno-84-798" href="#__codelineno-84-798"></a>
<a id="__codelineno-84-799" name="__codelineno-84-799" href="#__codelineno-84-799"></a>
<a id="__codelineno-84-800" name="__codelineno-84-800" href="#__codelineno-84-800"></a>
<a id="__codelineno-84-801" name="__codelineno-84-801" href="#__codelineno-84-801"></a>}
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.
3. Configure <code>DT_API_URL</code> and <code>DT_API_TOKEN</code> for the <a href="#base-url">Dynatrace URL</a> and <a href="#access-token">access token</a> in <code>otel.h</code>.</p>
<h2 id="step-3-instrument-your-application">Step 3 Instrument your application<a class="headerlink" href="#step-3-instrument-your-application" title="Permanent link">&para;</a></h2>
<p>To use OpenTelemetry, you first need to complete these two steps:</p>
<ol>
<li>Add the necessary header files to your code.</li>
</ol>
<p>To add the header files, include <code>otel.h</code> wherever you want to make use of OpenTelemetry.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>#include &quot;otel.h&quot;
</code></pre></div>
2. Initialize OpenTelemetry.</p>
<p>For the initialization, use the <code>initOpenTelemetry</code> function in <code>otel.h</code> and call it early on in the startup code of your application.</p>
<h3 id="add-tracing">Add tracing<a class="headerlink" href="#add-tracing" title="Permanent link">&para;</a></h3>
<ol>
<li>Get a reference to the tracer provider.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>auto provider = opentelemetry::trace::Provider::GetTracerProvider();
</code></pre></div>
2. Obtain a tracer object.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>// In our case the GetTraces method takes the tracer name and returns the tracer provider
<a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a>
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a>
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a>auto tracer = provider-&gt;GetTracer(tracer_name);
</code></pre></div>
3. With <code>tracer</code>, we can now start new spans and set them for the current execution scope.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>StartSpanOptions options;
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>
<a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a>options.kind = SpanKind::kServer;
<a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>
<a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a>
<a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a>
<a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a>auto span = tracer-&gt;StartSpan(&quot;Call to /myendpoint&quot;, {
<a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a>
<a id="__codelineno-88-11" name="__codelineno-88-11" href="#__codelineno-88-11"></a>
<a id="__codelineno-88-12" name="__codelineno-88-12" href="#__codelineno-88-12"></a>
<a id="__codelineno-88-13" name="__codelineno-88-13" href="#__codelineno-88-13"></a>{ &quot;http.method&quot;, &quot;GET&quot; },
<a id="__codelineno-88-14" name="__codelineno-88-14" href="#__codelineno-88-14"></a>
<a id="__codelineno-88-15" name="__codelineno-88-15" href="#__codelineno-88-15"></a>
<a id="__codelineno-88-16" name="__codelineno-88-16" href="#__codelineno-88-16"></a>
<a id="__codelineno-88-17" name="__codelineno-88-17" href="#__codelineno-88-17"></a>{ &quot;net.protocol.version&quot;, &quot;1.1&quot; }
<a id="__codelineno-88-18" name="__codelineno-88-18" href="#__codelineno-88-18"></a>
<a id="__codelineno-88-19" name="__codelineno-88-19" href="#__codelineno-88-19"></a>
<a id="__codelineno-88-20" name="__codelineno-88-20" href="#__codelineno-88-20"></a>
<a id="__codelineno-88-21" name="__codelineno-88-21" href="#__codelineno-88-21"></a>}, options);
<a id="__codelineno-88-22" name="__codelineno-88-22" href="#__codelineno-88-22"></a>
<a id="__codelineno-88-23" name="__codelineno-88-23" href="#__codelineno-88-23"></a>
<a id="__codelineno-88-24" name="__codelineno-88-24" href="#__codelineno-88-24"></a>
<a id="__codelineno-88-25" name="__codelineno-88-25" href="#__codelineno-88-25"></a>auto scope = tracer-&gt;WithActiveSpan(span);
<a id="__codelineno-88-26" name="__codelineno-88-26" href="#__codelineno-88-26"></a>
<a id="__codelineno-88-27" name="__codelineno-88-27" href="#__codelineno-88-27"></a>
<a id="__codelineno-88-28" name="__codelineno-88-28" href="#__codelineno-88-28"></a>
<a id="__codelineno-88-29" name="__codelineno-88-29" href="#__codelineno-88-29"></a>// TODO: Your code goes here
<a id="__codelineno-88-30" name="__codelineno-88-30" href="#__codelineno-88-30"></a>
<a id="__codelineno-88-31" name="__codelineno-88-31" href="#__codelineno-88-31"></a>
<a id="__codelineno-88-32" name="__codelineno-88-32" href="#__codelineno-88-32"></a>
<a id="__codelineno-88-33" name="__codelineno-88-33" href="#__codelineno-88-33"></a>span-&gt;End();
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new span and name it "Call to /myendpoint"</li>
<li>Add two attributes, following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
<li>Add a <code>TODO</code> in place of the eventual business logic</li>
<li>Call the span's <code>End()</code> method to complete the span</li>
</ul>
<h3 id="collect-metrics">Collect metrics<a class="headerlink" href="#collect-metrics" title="Permanent link">&para;</a></h3>
<ol>
<li>Get a reference to the meter provider.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>auto provider = metrics_api::Provider::GetMeterProvider();
</code></pre></div>
2. Obtain a meter object.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a>nostd::shared_ptr&lt;metrics_api::Meter&gt; meter = provider-&gt;GetMeter(&quot;my-meter&quot;, &quot;1.0.1&quot;);
</code></pre></div>
3. With <code>meter</code>, we can now create individual instruments, such as a counter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>auto request_counter = meter-&gt;CreateUInt64Counter(&quot;request_counter&quot;);
</code></pre></div>
4. We can now invoke the <code>Add()</code> method of <code>request_counter</code> to record new values with the counter and save additional attributes (for example, <code>action.type</code>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a>std::map&lt;std::string, std::string&gt; labels = { {&quot;action.type&quot;, &quot;create&quot;} };
<a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a>
<a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a>
<a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a>
<a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a>auto labelkv = opentelemetry::common::KeyValueIterableView&lt;decltype(labels)&gt;{ labels };
<a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>
<a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a>
<a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a>
<a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a>request_counter-&gt;Add(1, labelkv);
</code></pre></div>
<h3 id="connect-logs">Connect logs<a class="headerlink" href="#connect-logs" title="Permanent link">&para;</a></h3>
<ol>
<li>Get a reference to the logger provider.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>auto provider = logs_api::Provider::GetLoggerProvider();
</code></pre></div>
2. Call the provider's <code>GetLogger()</code> method to obtain a logger instance.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a>auto logger = provider-&gt;GetLogger(&quot;scope_name&quot;, &quot;&quot;, OPENTELEMETRY_SDK_VERSION);
</code></pre></div>
3. Call any of the available logging methods to record a log statement. The following example logs a debug statement.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a>logger-&gt;Debug(&quot;My debug statement here&quot;);
</code></pre></div>
<h3 id="ensure-context-propagation-optional">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<p>In the following examples, we assume that we are handling context propagation using the standard <a href="https://www.w3.org/TR/trace-context/">W3C trace context√Ø¬ª¬ø</a> headers, and we receive and set HTTP headers with the OpenTelemetry <code>http_client::Headers</code> object.</p>
<p>For that purpose, we use an instance of the class <code>HttpTextMapCarrier</code>, which we defined during the setup, and which is based on the OpenTelemetry class <a href="https://opentelemetry-cpp.readthedocs.io/en/latest/otel_docs/classopentelemetry_1_1context_1_1propagation_1_1TextMapCarrier.html#exhale-class-classopentelemetry-1-1context-1-1propagation-1-1textmapcarrier"><code>TextMapCarrier</code>√Ø¬ª¬ø</a>.</p>
<h4 id="extracting-the-context-when-receiving-a-request">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request" title="Permanent link">&para;</a></h4>
<p>To extract information on an existing context, we call the <code>Extract</code> method of the global propagator singleton and pass it the <code>HttpTextMapCarrier</code> instance, as well as the current context. This returns a new context object (<code>new_context</code>), which we allows us to continue the previous trace with our spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a>StartSpanOptions options;
<a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a>
<a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>
<a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a>
<a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a>options.kind          = SpanKind::kServer;
<a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a>
<a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a>
<a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a>
<a id="__codelineno-96-9" name="__codelineno-96-9" href="#__codelineno-96-9"></a>std::string span_name = request.uri;
<a id="__codelineno-96-10" name="__codelineno-96-10" href="#__codelineno-96-10"></a>
<a id="__codelineno-96-11" name="__codelineno-96-11" href="#__codelineno-96-11"></a>
<a id="__codelineno-96-12" name="__codelineno-96-12" href="#__codelineno-96-12"></a>
<a id="__codelineno-96-13" name="__codelineno-96-13" href="#__codelineno-96-13"></a>// extract context from http header
<a id="__codelineno-96-14" name="__codelineno-96-14" href="#__codelineno-96-14"></a>
<a id="__codelineno-96-15" name="__codelineno-96-15" href="#__codelineno-96-15"></a>
<a id="__codelineno-96-16" name="__codelineno-96-16" href="#__codelineno-96-16"></a>
<a id="__codelineno-96-17" name="__codelineno-96-17" href="#__codelineno-96-17"></a>std::map&lt;std::string, std::string&gt; &amp;request_headers =
<a id="__codelineno-96-18" name="__codelineno-96-18" href="#__codelineno-96-18"></a>
<a id="__codelineno-96-19" name="__codelineno-96-19" href="#__codelineno-96-19"></a>
<a id="__codelineno-96-20" name="__codelineno-96-20" href="#__codelineno-96-20"></a>
<a id="__codelineno-96-21" name="__codelineno-96-21" href="#__codelineno-96-21"></a>const_cast&lt;std::map&lt;std::string, std::string&gt; &amp;&gt;(request.headers);
<a id="__codelineno-96-22" name="__codelineno-96-22" href="#__codelineno-96-22"></a>
<a id="__codelineno-96-23" name="__codelineno-96-23" href="#__codelineno-96-23"></a>
<a id="__codelineno-96-24" name="__codelineno-96-24" href="#__codelineno-96-24"></a>
<a id="__codelineno-96-25" name="__codelineno-96-25" href="#__codelineno-96-25"></a>const HttpTextMapCarrier&lt;std::map&lt;std::string, std::string&gt;&gt; carrier(request_headers);
<a id="__codelineno-96-26" name="__codelineno-96-26" href="#__codelineno-96-26"></a>
<a id="__codelineno-96-27" name="__codelineno-96-27" href="#__codelineno-96-27"></a>
<a id="__codelineno-96-28" name="__codelineno-96-28" href="#__codelineno-96-28"></a>
<a id="__codelineno-96-29" name="__codelineno-96-29" href="#__codelineno-96-29"></a>auto prop        = context::propagation::GlobalTextMapPropagator::GetGlobalPropagator();
<a id="__codelineno-96-30" name="__codelineno-96-30" href="#__codelineno-96-30"></a>
<a id="__codelineno-96-31" name="__codelineno-96-31" href="#__codelineno-96-31"></a>
<a id="__codelineno-96-32" name="__codelineno-96-32" href="#__codelineno-96-32"></a>
<a id="__codelineno-96-33" name="__codelineno-96-33" href="#__codelineno-96-33"></a>auto current_ctx = context::RuntimeContext::GetCurrent();
<a id="__codelineno-96-34" name="__codelineno-96-34" href="#__codelineno-96-34"></a>
<a id="__codelineno-96-35" name="__codelineno-96-35" href="#__codelineno-96-35"></a>
<a id="__codelineno-96-36" name="__codelineno-96-36" href="#__codelineno-96-36"></a>
<a id="__codelineno-96-37" name="__codelineno-96-37" href="#__codelineno-96-37"></a>auto new_context = prop-&gt;Extract(carrier, current_ctx);
<a id="__codelineno-96-38" name="__codelineno-96-38" href="#__codelineno-96-38"></a>
<a id="__codelineno-96-39" name="__codelineno-96-39" href="#__codelineno-96-39"></a>
<a id="__codelineno-96-40" name="__codelineno-96-40" href="#__codelineno-96-40"></a>
<a id="__codelineno-96-41" name="__codelineno-96-41" href="#__codelineno-96-41"></a>options.parent   = GetSpan(new_context)-&gt;GetContext();
<a id="__codelineno-96-42" name="__codelineno-96-42" href="#__codelineno-96-42"></a>
<a id="__codelineno-96-43" name="__codelineno-96-43" href="#__codelineno-96-43"></a>
<a id="__codelineno-96-44" name="__codelineno-96-44" href="#__codelineno-96-44"></a>
<a id="__codelineno-96-45" name="__codelineno-96-45" href="#__codelineno-96-45"></a>auto span = get_tracer(&quot;manual-server&quot;)
<a id="__codelineno-96-46" name="__codelineno-96-46" href="#__codelineno-96-46"></a>
<a id="__codelineno-96-47" name="__codelineno-96-47" href="#__codelineno-96-47"></a>
<a id="__codelineno-96-48" name="__codelineno-96-48" href="#__codelineno-96-48"></a>
<a id="__codelineno-96-49" name="__codelineno-96-49" href="#__codelineno-96-49"></a>-&gt;StartSpan(&quot;my-server-span&quot;, { //TODO Replace with the name of your span
<a id="__codelineno-96-50" name="__codelineno-96-50" href="#__codelineno-96-50"></a>
<a id="__codelineno-96-51" name="__codelineno-96-51" href="#__codelineno-96-51"></a>
<a id="__codelineno-96-52" name="__codelineno-96-52" href="#__codelineno-96-52"></a>
<a id="__codelineno-96-53" name="__codelineno-96-53" href="#__codelineno-96-53"></a>{&quot;my-server-key-1&quot;, &quot;my-server-value-1&quot;} //TODO Add attributes
<a id="__codelineno-96-54" name="__codelineno-96-54" href="#__codelineno-96-54"></a>
<a id="__codelineno-96-55" name="__codelineno-96-55" href="#__codelineno-96-55"></a>
<a id="__codelineno-96-56" name="__codelineno-96-56" href="#__codelineno-96-56"></a>
<a id="__codelineno-96-57" name="__codelineno-96-57" href="#__codelineno-96-57"></a>}, options);
<a id="__codelineno-96-58" name="__codelineno-96-58" href="#__codelineno-96-58"></a>
<a id="__codelineno-96-59" name="__codelineno-96-59" href="#__codelineno-96-59"></a>
<a id="__codelineno-96-60" name="__codelineno-96-60" href="#__codelineno-96-60"></a>
<a id="__codelineno-96-61" name="__codelineno-96-61" href="#__codelineno-96-61"></a>auto scope = get_tracer(&quot;http_server&quot;)-&gt;WithActiveSpan(span);
<a id="__codelineno-96-62" name="__codelineno-96-62" href="#__codelineno-96-62"></a>
<a id="__codelineno-96-63" name="__codelineno-96-63" href="#__codelineno-96-63"></a>
<a id="__codelineno-96-64" name="__codelineno-96-64" href="#__codelineno-96-64"></a>
<a id="__codelineno-96-65" name="__codelineno-96-65" href="#__codelineno-96-65"></a>for (auto &amp;kv : request.headers)
<a id="__codelineno-96-66" name="__codelineno-96-66" href="#__codelineno-96-66"></a>
<a id="__codelineno-96-67" name="__codelineno-96-67" href="#__codelineno-96-67"></a>
<a id="__codelineno-96-68" name="__codelineno-96-68" href="#__codelineno-96-68"></a>
<a id="__codelineno-96-69" name="__codelineno-96-69" href="#__codelineno-96-69"></a>{
<a id="__codelineno-96-70" name="__codelineno-96-70" href="#__codelineno-96-70"></a>
<a id="__codelineno-96-71" name="__codelineno-96-71" href="#__codelineno-96-71"></a>
<a id="__codelineno-96-72" name="__codelineno-96-72" href="#__codelineno-96-72"></a>
<a id="__codelineno-96-73" name="__codelineno-96-73" href="#__codelineno-96-73"></a>span-&gt;SetAttribute(&quot;http.header.&quot; + std::string(kv.first.data()), kv.second);
<a id="__codelineno-96-74" name="__codelineno-96-74" href="#__codelineno-96-74"></a>
<a id="__codelineno-96-75" name="__codelineno-96-75" href="#__codelineno-96-75"></a>
<a id="__codelineno-96-76" name="__codelineno-96-76" href="#__codelineno-96-76"></a>
<a id="__codelineno-96-77" name="__codelineno-96-77" href="#__codelineno-96-77"></a>}
<a id="__codelineno-96-78" name="__codelineno-96-78" href="#__codelineno-96-78"></a>
<a id="__codelineno-96-79" name="__codelineno-96-79" href="#__codelineno-96-79"></a>
<a id="__codelineno-96-80" name="__codelineno-96-80" href="#__codelineno-96-80"></a>
<a id="__codelineno-96-81" name="__codelineno-96-81" href="#__codelineno-96-81"></a>span-&gt;AddEvent(&quot;Processing request&quot;);
<a id="__codelineno-96-82" name="__codelineno-96-82" href="#__codelineno-96-82"></a>
<a id="__codelineno-96-83" name="__codelineno-96-83" href="#__codelineno-96-83"></a>
<a id="__codelineno-96-84" name="__codelineno-96-84" href="#__codelineno-96-84"></a>
<a id="__codelineno-96-85" name="__codelineno-96-85" href="#__codelineno-96-85"></a>response.headers[HTTP_SERVER_NS::CONTENT_TYPE] = HTTP_SERVER_NS::CONTENT_TYPE_TEXT;
<a id="__codelineno-96-86" name="__codelineno-96-86" href="#__codelineno-96-86"></a>
<a id="__codelineno-96-87" name="__codelineno-96-87" href="#__codelineno-96-87"></a>
<a id="__codelineno-96-88" name="__codelineno-96-88" href="#__codelineno-96-88"></a>
<a id="__codelineno-96-89" name="__codelineno-96-89" href="#__codelineno-96-89"></a>response.body = doCall();
<a id="__codelineno-96-90" name="__codelineno-96-90" href="#__codelineno-96-90"></a>
<a id="__codelineno-96-91" name="__codelineno-96-91" href="#__codelineno-96-91"></a>
<a id="__codelineno-96-92" name="__codelineno-96-92" href="#__codelineno-96-92"></a>
<a id="__codelineno-96-93" name="__codelineno-96-93" href="#__codelineno-96-93"></a>span-&gt;End();
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests" title="Permanent link">&para;</a></h4>
<p>For injecting current context information into an outbound request, we call the <code>Inject</code> method of the global propagator singleton and pass it the <code>HttpTextMapCarrier</code> instance, as well as the current context. This adds the applicable headers to the <code>carrier</code> instance, which we then use in the text step with our HTTP request.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a>auto http_client = http_client::HttpClientFactory::CreateSync();
<a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>
<a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a>
<a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a>
<a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a>std::string url  = std::getenv(&quot;URL&quot;); // TODO set URL you want to call
<a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a>
<a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a>
<a id="__codelineno-97-8" name="__codelineno-97-8" href="#__codelineno-97-8"></a>
<a id="__codelineno-97-9" name="__codelineno-97-9" href="#__codelineno-97-9"></a>CustomCounter(); // remove
<a id="__codelineno-97-10" name="__codelineno-97-10" href="#__codelineno-97-10"></a>
<a id="__codelineno-97-11" name="__codelineno-97-11" href="#__codelineno-97-11"></a>
<a id="__codelineno-97-12" name="__codelineno-97-12" href="#__codelineno-97-12"></a>
<a id="__codelineno-97-13" name="__codelineno-97-13" href="#__codelineno-97-13"></a>// start active span
<a id="__codelineno-97-14" name="__codelineno-97-14" href="#__codelineno-97-14"></a>
<a id="__codelineno-97-15" name="__codelineno-97-15" href="#__codelineno-97-15"></a>
<a id="__codelineno-97-16" name="__codelineno-97-16" href="#__codelineno-97-16"></a>
<a id="__codelineno-97-17" name="__codelineno-97-17" href="#__codelineno-97-17"></a>StartSpanOptions options;
<a id="__codelineno-97-18" name="__codelineno-97-18" href="#__codelineno-97-18"></a>
<a id="__codelineno-97-19" name="__codelineno-97-19" href="#__codelineno-97-19"></a>
<a id="__codelineno-97-20" name="__codelineno-97-20" href="#__codelineno-97-20"></a>
<a id="__codelineno-97-21" name="__codelineno-97-21" href="#__codelineno-97-21"></a>options.kind = SpanKind::kClient;
<a id="__codelineno-97-22" name="__codelineno-97-22" href="#__codelineno-97-22"></a>
<a id="__codelineno-97-23" name="__codelineno-97-23" href="#__codelineno-97-23"></a>
<a id="__codelineno-97-24" name="__codelineno-97-24" href="#__codelineno-97-24"></a>
<a id="__codelineno-97-25" name="__codelineno-97-25" href="#__codelineno-97-25"></a>opentelemetry::ext::http::common::UrlParser url_parser(url);
<a id="__codelineno-97-26" name="__codelineno-97-26" href="#__codelineno-97-26"></a>
<a id="__codelineno-97-27" name="__codelineno-97-27" href="#__codelineno-97-27"></a>
<a id="__codelineno-97-28" name="__codelineno-97-28" href="#__codelineno-97-28"></a>
<a id="__codelineno-97-29" name="__codelineno-97-29" href="#__codelineno-97-29"></a>std::string span_name = url_parser.path_;
<a id="__codelineno-97-30" name="__codelineno-97-30" href="#__codelineno-97-30"></a>
<a id="__codelineno-97-31" name="__codelineno-97-31" href="#__codelineno-97-31"></a>
<a id="__codelineno-97-32" name="__codelineno-97-32" href="#__codelineno-97-32"></a>
<a id="__codelineno-97-33" name="__codelineno-97-33" href="#__codelineno-97-33"></a>auto span = get_tracer(&quot;http-client&quot;)-&gt;StartSpan(span_name,
<a id="__codelineno-97-34" name="__codelineno-97-34" href="#__codelineno-97-34"></a>
<a id="__codelineno-97-35" name="__codelineno-97-35" href="#__codelineno-97-35"></a>
<a id="__codelineno-97-36" name="__codelineno-97-36" href="#__codelineno-97-36"></a>
<a id="__codelineno-97-37" name="__codelineno-97-37" href="#__codelineno-97-37"></a>{{opentelemetry::semconv::url::kUrlFull, url_parser.url_},
<a id="__codelineno-97-38" name="__codelineno-97-38" href="#__codelineno-97-38"></a>
<a id="__codelineno-97-39" name="__codelineno-97-39" href="#__codelineno-97-39"></a>
<a id="__codelineno-97-40" name="__codelineno-97-40" href="#__codelineno-97-40"></a>
<a id="__codelineno-97-41" name="__codelineno-97-41" href="#__codelineno-97-41"></a>{opentelemetry::semconv::url::kUrlScheme, url_parser.scheme_},
<a id="__codelineno-97-42" name="__codelineno-97-42" href="#__codelineno-97-42"></a>
<a id="__codelineno-97-43" name="__codelineno-97-43" href="#__codelineno-97-43"></a>
<a id="__codelineno-97-44" name="__codelineno-97-44" href="#__codelineno-97-44"></a>
<a id="__codelineno-97-45" name="__codelineno-97-45" href="#__codelineno-97-45"></a>{opentelemetry::semconv::http::kHttpRequestMethod, &quot;GET&quot;}},
<a id="__codelineno-97-46" name="__codelineno-97-46" href="#__codelineno-97-46"></a>
<a id="__codelineno-97-47" name="__codelineno-97-47" href="#__codelineno-97-47"></a>
<a id="__codelineno-97-48" name="__codelineno-97-48" href="#__codelineno-97-48"></a>
<a id="__codelineno-97-49" name="__codelineno-97-49" href="#__codelineno-97-49"></a>options);
<a id="__codelineno-97-50" name="__codelineno-97-50" href="#__codelineno-97-50"></a>
<a id="__codelineno-97-51" name="__codelineno-97-51" href="#__codelineno-97-51"></a>
<a id="__codelineno-97-52" name="__codelineno-97-52" href="#__codelineno-97-52"></a>
<a id="__codelineno-97-53" name="__codelineno-97-53" href="#__codelineno-97-53"></a>auto scope = get_tracer(&quot;http-client&quot;)-&gt;WithActiveSpan(span);
<a id="__codelineno-97-54" name="__codelineno-97-54" href="#__codelineno-97-54"></a>
<a id="__codelineno-97-55" name="__codelineno-97-55" href="#__codelineno-97-55"></a>
<a id="__codelineno-97-56" name="__codelineno-97-56" href="#__codelineno-97-56"></a>
<a id="__codelineno-97-57" name="__codelineno-97-57" href="#__codelineno-97-57"></a>// inject current context into http header
<a id="__codelineno-97-58" name="__codelineno-97-58" href="#__codelineno-97-58"></a>
<a id="__codelineno-97-59" name="__codelineno-97-59" href="#__codelineno-97-59"></a>
<a id="__codelineno-97-60" name="__codelineno-97-60" href="#__codelineno-97-60"></a>
<a id="__codelineno-97-61" name="__codelineno-97-61" href="#__codelineno-97-61"></a>auto current_ctx = context::RuntimeContext::GetCurrent();
<a id="__codelineno-97-62" name="__codelineno-97-62" href="#__codelineno-97-62"></a>
<a id="__codelineno-97-63" name="__codelineno-97-63" href="#__codelineno-97-63"></a>
<a id="__codelineno-97-64" name="__codelineno-97-64" href="#__codelineno-97-64"></a>
<a id="__codelineno-97-65" name="__codelineno-97-65" href="#__codelineno-97-65"></a>HttpTextMapCarrier&lt;http_client::Headers&gt; carrier;
<a id="__codelineno-97-66" name="__codelineno-97-66" href="#__codelineno-97-66"></a>
<a id="__codelineno-97-67" name="__codelineno-97-67" href="#__codelineno-97-67"></a>
<a id="__codelineno-97-68" name="__codelineno-97-68" href="#__codelineno-97-68"></a>
<a id="__codelineno-97-69" name="__codelineno-97-69" href="#__codelineno-97-69"></a>auto prop = context::propagation::GlobalTextMapPropagator::GetGlobalPropagator();
<a id="__codelineno-97-70" name="__codelineno-97-70" href="#__codelineno-97-70"></a>
<a id="__codelineno-97-71" name="__codelineno-97-71" href="#__codelineno-97-71"></a>
<a id="__codelineno-97-72" name="__codelineno-97-72" href="#__codelineno-97-72"></a>
<a id="__codelineno-97-73" name="__codelineno-97-73" href="#__codelineno-97-73"></a>prop-&gt;Inject(carrier, current_ctx);
<a id="__codelineno-97-74" name="__codelineno-97-74" href="#__codelineno-97-74"></a>
<a id="__codelineno-97-75" name="__codelineno-97-75" href="#__codelineno-97-75"></a>
<a id="__codelineno-97-76" name="__codelineno-97-76" href="#__codelineno-97-76"></a>
<a id="__codelineno-97-77" name="__codelineno-97-77" href="#__codelineno-97-77"></a>// send http request
<a id="__codelineno-97-78" name="__codelineno-97-78" href="#__codelineno-97-78"></a>
<a id="__codelineno-97-79" name="__codelineno-97-79" href="#__codelineno-97-79"></a>
<a id="__codelineno-97-80" name="__codelineno-97-80" href="#__codelineno-97-80"></a>
<a id="__codelineno-97-81" name="__codelineno-97-81" href="#__codelineno-97-81"></a>http_client::Result result = http_client-&gt;GetNoSsl(url, carrier.headers_);
<a id="__codelineno-97-82" name="__codelineno-97-82" href="#__codelineno-97-82"></a>
<a id="__codelineno-97-83" name="__codelineno-97-83" href="#__codelineno-97-83"></a>
<a id="__codelineno-97-84" name="__codelineno-97-84" href="#__codelineno-97-84"></a>
<a id="__codelineno-97-85" name="__codelineno-97-85" href="#__codelineno-97-85"></a>//your code goes here
<a id="__codelineno-97-86" name="__codelineno-97-86" href="#__codelineno-97-86"></a>
<a id="__codelineno-97-87" name="__codelineno-97-87" href="#__codelineno-97-87"></a>
<a id="__codelineno-97-88" name="__codelineno-97-88" href="#__codelineno-97-88"></a>
<a id="__codelineno-97-89" name="__codelineno-97-89" href="#__codelineno-97-89"></a>//then end span
</code></pre></div>
<h2 id="step-4-configure-data-capture-to-meet-privacy-requirements-optional">Step 4 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-4-configure-data-capture-to-meet-privacy-requirements-optional" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-5-verify-data-ingestion-into-dynatrace">Step 5 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-5-verify-data-ingestion-into-dynatrace" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_16">Related topics<a class="headerlink" href="#related-topics_16" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-dotnetmd">Source: dotnet.md<a class="headerlink" href="#source-dotnetmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your .NET application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/dotnet
scraped: 2026-02-15T21:25:49.684876</p>
<hr />
<h1 id="instrument-your-net-application-with-opentelemetry">Instrument your .NET application with OpenTelemetry<a class="headerlink" href="#instrument-your-net-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-net-application-with-opentelemetry_1">Instrument your .NET application with OpenTelemetry<a class="headerlink" href="#instrument-your-net-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>7-min read</li>
<li>Updated on Nov 14, 2023</li>
</ul>
<p>This walkthrough shows how to add observability to your .NET application using the OpenTelemetry .NET libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_15">Prerequisites<a class="headerlink" href="#prerequisites_15" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.254+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_1">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_1" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_1">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_1" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_1">Get API access token<a class="headerlink" href="#get-api-access-token_1" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-choose-how-you-want-to-instrument-your-application">Step 2 Choose how you want to instrument your application<a class="headerlink" href="#step-2-choose-how-you-want-to-instrument-your-application" title="Permanent link">&para;</a></h2>
<p>For .NET, OpenTelemetry supports automatic and manual instrumentation (or a combination of both).</p>
<p>Which instrumentation should I choose?</p>
<p>It's a good idea to start with automatic instrumentation and add manual instrumentation if the automatic approach doesn't work or doesn't provide enough information.</p>
<h2 id="step-3-optional-automatically-instrument-your-application-optional">Step 3 optional Automatically instrument your application Optional<a class="headerlink" href="#step-3-optional-automatically-instrument-your-application-optional" title="Permanent link">&para;</a></h2>
<p>.NET automatic instrumentation can be configured either during development or later after deployment.</p>
<p>Enrichment with OneAgent</p>
<p>It is currently not possible to <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">enrich</a> automatically instrumented services with host-relevant information. To achieve this, you'd need to switch to manual instrumentation.</p>
<p>During development</p>
<p>After deployment</p>
<ol>
<li>Install <a href="https://www.nuget.org/packages/OpenTelemetry.Extensions.Hosting"><code>OpenTelemetry.Extensions.Hosting</code>√Ø¬ª¬ø</a>.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a>dotnet add package OpenTelemetry.Extensions.Hosting
</code></pre></div>
2. Install the appropriate instrumentation library for your .NET framework (full list available <a href="https://www.nuget.org/packages?q=OpenTelemetry.Instrumentation">here√Ø¬ª¬ø</a>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>dotnet add package OpenTelemetry.Instrumentation.[FRAMEWORK_NAME]
</code></pre></div>
<ol>
<li>Download the <a href="https://github.com/open-telemetry/opentelemetry-dotnet-instrumentation/releases/latest">latest auto installer√Ø¬ª¬ø</a> for the target operating system.</li>
<li><a href="https://github.com/open-telemetry/opentelemetry-dotnet-instrumentation#shell-scripts">Run (on Unix)√Ø¬ª¬ø</a> or <a href="https://github.com/open-telemetry/opentelemetry-dotnet-instrumentation#powershell-module-windows">import (on Windows)√Ø¬ª¬ø</a> the auto installer, to install and set up all necessary auto instrumentation libraries.</li>
<li>Run your application.</li>
</ol>
<p>In addition to the instrumentation setup above, you also need to configure the relevant export parameters with environment variables. This includes the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">endpoint URL</a>, the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">authentication token</a>, and the <a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#aggregation-temporality" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">temporality preference for metrics</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a>OTEL_EXPORTER_OTLP_ENDPOINT=[URL]
<a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>
<a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>
<a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a>
<a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a>OTEL_EXPORTER_OTLP_HEADERS=&quot;Authorization=Api-Token [TOKEN]&quot;
<a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a>
<a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a>
<a id="__codelineno-100-8" name="__codelineno-100-8" href="#__codelineno-100-8"></a>
<a id="__codelineno-100-9" name="__codelineno-100-9" href="#__codelineno-100-9"></a>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE=delta
</code></pre></div>
<h2 id="step-4-optional-manually-instrument-your-application-optional">Step 4 optional Manually instrument your application Optional<a class="headerlink" href="#step-4-optional-manually-instrument-your-application-optional" title="Permanent link">&para;</a></h2>
<h3 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h3>
<p>The setup steps slightly differ depending on whether you instrument a plain .NET application or an ASP.NET application.</p>
<p>.NET</p>
<p>ASP.NET</p>
<ol>
<li>Install the following packages.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a>dotnet add package Microsoft.Extensions.Logging
<a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>
<a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a>
<a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a>
<a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a>dotnet add package OpenTelemetry.Extensions.Hosting
<a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a>
<a id="__codelineno-101-7" name="__codelineno-101-7" href="#__codelineno-101-7"></a>
<a id="__codelineno-101-8" name="__codelineno-101-8" href="#__codelineno-101-8"></a>
<a id="__codelineno-101-9" name="__codelineno-101-9" href="#__codelineno-101-9"></a>dotnet add package OpenTelemetry
<a id="__codelineno-101-10" name="__codelineno-101-10" href="#__codelineno-101-10"></a>
<a id="__codelineno-101-11" name="__codelineno-101-11" href="#__codelineno-101-11"></a>
<a id="__codelineno-101-12" name="__codelineno-101-12" href="#__codelineno-101-12"></a>
<a id="__codelineno-101-13" name="__codelineno-101-13" href="#__codelineno-101-13"></a>dotnet add package OpenTelemetry.Api
<a id="__codelineno-101-14" name="__codelineno-101-14" href="#__codelineno-101-14"></a>
<a id="__codelineno-101-15" name="__codelineno-101-15" href="#__codelineno-101-15"></a>
<a id="__codelineno-101-16" name="__codelineno-101-16" href="#__codelineno-101-16"></a>
<a id="__codelineno-101-17" name="__codelineno-101-17" href="#__codelineno-101-17"></a>dotnet add package OpenTelemetry.Exporter.OpenTelemetryProtocol
</code></pre></div>
2. Add the following <code>using</code> statements to the startup class, which bootstraps your application.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>using OpenTelemetry;
<a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>
<a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a>
<a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a>
<a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a>using OpenTelemetry.Trace;
<a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a>
<a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a>
<a id="__codelineno-102-8" name="__codelineno-102-8" href="#__codelineno-102-8"></a>
<a id="__codelineno-102-9" name="__codelineno-102-9" href="#__codelineno-102-9"></a>using OpenTelemetry.Exporter;
<a id="__codelineno-102-10" name="__codelineno-102-10" href="#__codelineno-102-10"></a>
<a id="__codelineno-102-11" name="__codelineno-102-11" href="#__codelineno-102-11"></a>
<a id="__codelineno-102-12" name="__codelineno-102-12" href="#__codelineno-102-12"></a>
<a id="__codelineno-102-13" name="__codelineno-102-13" href="#__codelineno-102-13"></a>using OpenTelemetry.Metrics;
<a id="__codelineno-102-14" name="__codelineno-102-14" href="#__codelineno-102-14"></a>
<a id="__codelineno-102-15" name="__codelineno-102-15" href="#__codelineno-102-15"></a>
<a id="__codelineno-102-16" name="__codelineno-102-16" href="#__codelineno-102-16"></a>
<a id="__codelineno-102-17" name="__codelineno-102-17" href="#__codelineno-102-17"></a>using OpenTelemetry.Logs;
<a id="__codelineno-102-18" name="__codelineno-102-18" href="#__codelineno-102-18"></a>
<a id="__codelineno-102-19" name="__codelineno-102-19" href="#__codelineno-102-19"></a>
<a id="__codelineno-102-20" name="__codelineno-102-20" href="#__codelineno-102-20"></a>
<a id="__codelineno-102-21" name="__codelineno-102-21" href="#__codelineno-102-21"></a>using OpenTelemetry.Resources;
<a id="__codelineno-102-22" name="__codelineno-102-22" href="#__codelineno-102-22"></a>
<a id="__codelineno-102-23" name="__codelineno-102-23" href="#__codelineno-102-23"></a>
<a id="__codelineno-102-24" name="__codelineno-102-24" href="#__codelineno-102-24"></a>
<a id="__codelineno-102-25" name="__codelineno-102-25" href="#__codelineno-102-25"></a>using OpenTelemetry.Context.Propagation;
<a id="__codelineno-102-26" name="__codelineno-102-26" href="#__codelineno-102-26"></a>
<a id="__codelineno-102-27" name="__codelineno-102-27" href="#__codelineno-102-27"></a>
<a id="__codelineno-102-28" name="__codelineno-102-28" href="#__codelineno-102-28"></a>
<a id="__codelineno-102-29" name="__codelineno-102-29" href="#__codelineno-102-29"></a>using System.Diagnostics;
<a id="__codelineno-102-30" name="__codelineno-102-30" href="#__codelineno-102-30"></a>
<a id="__codelineno-102-31" name="__codelineno-102-31" href="#__codelineno-102-31"></a>
<a id="__codelineno-102-32" name="__codelineno-102-32" href="#__codelineno-102-32"></a>
<a id="__codelineno-102-33" name="__codelineno-102-33" href="#__codelineno-102-33"></a>using System.Diagnostics.Metrics;
<a id="__codelineno-102-34" name="__codelineno-102-34" href="#__codelineno-102-34"></a>
<a id="__codelineno-102-35" name="__codelineno-102-35" href="#__codelineno-102-35"></a>
<a id="__codelineno-102-36" name="__codelineno-102-36" href="#__codelineno-102-36"></a>
<a id="__codelineno-102-37" name="__codelineno-102-37" href="#__codelineno-102-37"></a>using Microsoft.Extensions.Logging;
</code></pre></div>
3. Add these fields to your startup class, with the first two containing the <a href="#dynatrace-docs--otlp-export">access details</a>, if you are using the OTLP export.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a>private static string DT_API_URL = &quot;&quot;; // TODO: Provide your SaaS/Managed URL here
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>
<a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a>
<a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a>private static string DT_API_TOKEN = &quot;&quot;; // TODO: Provide the OpenTelemetry-scoped access token here
<a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a>
<a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a>
<a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a>
<a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a>private const string activitySource = &quot;Dynatrace.DotNetApp.Sample&quot;; // TODO: Provide a descriptive name for your application here
<a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a>
<a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a>
<a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a>
<a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a>public static readonly ActivitySource MyActivitySource = new ActivitySource(activitySource);
<a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a>
<a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a>
<a id="__codelineno-103-16" name="__codelineno-103-16" href="#__codelineno-103-16"></a>
<a id="__codelineno-103-17" name="__codelineno-103-17" href="#__codelineno-103-17"></a>private static ILoggerFactory loggerFactoryOT;
</code></pre></div>
<p>Value injection</p>
<p>Instead of hardcoding the URL and token, you might also consider reading them from storage specific to your application framework (for example, environment variables or framework secrets).
4. Add the <code>initOpenTelemetry</code> method to your startup class and invoke it as early as possible during your application startup. This initializes OpenTelemetry for the Dynatrace backend and creates default tracer and meter providers.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a>private static void initOpenTelemetry(IServiceCollection services)
<a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a>
<a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>
<a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a>
<a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a>{
<a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a>
<a id="__codelineno-104-7" name="__codelineno-104-7" href="#__codelineno-104-7"></a>
<a id="__codelineno-104-8" name="__codelineno-104-8" href="#__codelineno-104-8"></a>
<a id="__codelineno-104-9" name="__codelineno-104-9" href="#__codelineno-104-9"></a>List&lt;KeyValuePair&lt;string, object&gt;&gt; dt_metadata = new List&lt;KeyValuePair&lt;string, object&gt;&gt;();
<a id="__codelineno-104-10" name="__codelineno-104-10" href="#__codelineno-104-10"></a>
<a id="__codelineno-104-11" name="__codelineno-104-11" href="#__codelineno-104-11"></a>
<a id="__codelineno-104-12" name="__codelineno-104-12" href="#__codelineno-104-12"></a>
<a id="__codelineno-104-13" name="__codelineno-104-13" href="#__codelineno-104-13"></a>foreach (string name in new string[] {&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;,
<a id="__codelineno-104-14" name="__codelineno-104-14" href="#__codelineno-104-14"></a>
<a id="__codelineno-104-15" name="__codelineno-104-15" href="#__codelineno-104-15"></a>
<a id="__codelineno-104-16" name="__codelineno-104-16" href="#__codelineno-104-16"></a>
<a id="__codelineno-104-17" name="__codelineno-104-17" href="#__codelineno-104-17"></a>&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;,
<a id="__codelineno-104-18" name="__codelineno-104-18" href="#__codelineno-104-18"></a>
<a id="__codelineno-104-19" name="__codelineno-104-19" href="#__codelineno-104-19"></a>
<a id="__codelineno-104-20" name="__codelineno-104-20" href="#__codelineno-104-20"></a>
<a id="__codelineno-104-21" name="__codelineno-104-21" href="#__codelineno-104-21"></a>&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;}) {
<a id="__codelineno-104-22" name="__codelineno-104-22" href="#__codelineno-104-22"></a>
<a id="__codelineno-104-23" name="__codelineno-104-23" href="#__codelineno-104-23"></a>
<a id="__codelineno-104-24" name="__codelineno-104-24" href="#__codelineno-104-24"></a>
<a id="__codelineno-104-25" name="__codelineno-104-25" href="#__codelineno-104-25"></a>try {
<a id="__codelineno-104-26" name="__codelineno-104-26" href="#__codelineno-104-26"></a>
<a id="__codelineno-104-27" name="__codelineno-104-27" href="#__codelineno-104-27"></a>
<a id="__codelineno-104-28" name="__codelineno-104-28" href="#__codelineno-104-28"></a>
<a id="__codelineno-104-29" name="__codelineno-104-29" href="#__codelineno-104-29"></a>foreach (string line in System.IO.File.ReadAllLines(name.StartsWith(&quot;/var&quot;) ? name : System.IO.File.ReadAllText(name))) {
<a id="__codelineno-104-30" name="__codelineno-104-30" href="#__codelineno-104-30"></a>
<a id="__codelineno-104-31" name="__codelineno-104-31" href="#__codelineno-104-31"></a>
<a id="__codelineno-104-32" name="__codelineno-104-32" href="#__codelineno-104-32"></a>
<a id="__codelineno-104-33" name="__codelineno-104-33" href="#__codelineno-104-33"></a>var keyvalue = line.Split(&quot;=&quot;);
<a id="__codelineno-104-34" name="__codelineno-104-34" href="#__codelineno-104-34"></a>
<a id="__codelineno-104-35" name="__codelineno-104-35" href="#__codelineno-104-35"></a>
<a id="__codelineno-104-36" name="__codelineno-104-36" href="#__codelineno-104-36"></a>
<a id="__codelineno-104-37" name="__codelineno-104-37" href="#__codelineno-104-37"></a>dt_metadata.Add( new KeyValuePair&lt;string, object&gt;(keyvalue[0], keyvalue[1]));
<a id="__codelineno-104-38" name="__codelineno-104-38" href="#__codelineno-104-38"></a>
<a id="__codelineno-104-39" name="__codelineno-104-39" href="#__codelineno-104-39"></a>
<a id="__codelineno-104-40" name="__codelineno-104-40" href="#__codelineno-104-40"></a>
<a id="__codelineno-104-41" name="__codelineno-104-41" href="#__codelineno-104-41"></a>}
<a id="__codelineno-104-42" name="__codelineno-104-42" href="#__codelineno-104-42"></a>
<a id="__codelineno-104-43" name="__codelineno-104-43" href="#__codelineno-104-43"></a>
<a id="__codelineno-104-44" name="__codelineno-104-44" href="#__codelineno-104-44"></a>
<a id="__codelineno-104-45" name="__codelineno-104-45" href="#__codelineno-104-45"></a>}
<a id="__codelineno-104-46" name="__codelineno-104-46" href="#__codelineno-104-46"></a>
<a id="__codelineno-104-47" name="__codelineno-104-47" href="#__codelineno-104-47"></a>
<a id="__codelineno-104-48" name="__codelineno-104-48" href="#__codelineno-104-48"></a>
<a id="__codelineno-104-49" name="__codelineno-104-49" href="#__codelineno-104-49"></a>catch { }
<a id="__codelineno-104-50" name="__codelineno-104-50" href="#__codelineno-104-50"></a>
<a id="__codelineno-104-51" name="__codelineno-104-51" href="#__codelineno-104-51"></a>
<a id="__codelineno-104-52" name="__codelineno-104-52" href="#__codelineno-104-52"></a>
<a id="__codelineno-104-53" name="__codelineno-104-53" href="#__codelineno-104-53"></a>}
<a id="__codelineno-104-54" name="__codelineno-104-54" href="#__codelineno-104-54"></a>
<a id="__codelineno-104-55" name="__codelineno-104-55" href="#__codelineno-104-55"></a>
<a id="__codelineno-104-56" name="__codelineno-104-56" href="#__codelineno-104-56"></a>
<a id="__codelineno-104-57" name="__codelineno-104-57" href="#__codelineno-104-57"></a>Action&lt;ResourceBuilder&gt; configureResource = r =&gt; r
<a id="__codelineno-104-58" name="__codelineno-104-58" href="#__codelineno-104-58"></a>
<a id="__codelineno-104-59" name="__codelineno-104-59" href="#__codelineno-104-59"></a>
<a id="__codelineno-104-60" name="__codelineno-104-60" href="#__codelineno-104-60"></a>
<a id="__codelineno-104-61" name="__codelineno-104-61" href="#__codelineno-104-61"></a>.AddService(serviceName: &quot;dotnet-quickstart&quot;) //TODO Replace with the name of your application
<a id="__codelineno-104-62" name="__codelineno-104-62" href="#__codelineno-104-62"></a>
<a id="__codelineno-104-63" name="__codelineno-104-63" href="#__codelineno-104-63"></a>
<a id="__codelineno-104-64" name="__codelineno-104-64" href="#__codelineno-104-64"></a>
<a id="__codelineno-104-65" name="__codelineno-104-65" href="#__codelineno-104-65"></a>.AddAttributes(dt_metadata);
<a id="__codelineno-104-66" name="__codelineno-104-66" href="#__codelineno-104-66"></a>
<a id="__codelineno-104-67" name="__codelineno-104-67" href="#__codelineno-104-67"></a>
<a id="__codelineno-104-68" name="__codelineno-104-68" href="#__codelineno-104-68"></a>
<a id="__codelineno-104-69" name="__codelineno-104-69" href="#__codelineno-104-69"></a>services.AddOpenTelemetry()
<a id="__codelineno-104-70" name="__codelineno-104-70" href="#__codelineno-104-70"></a>
<a id="__codelineno-104-71" name="__codelineno-104-71" href="#__codelineno-104-71"></a>
<a id="__codelineno-104-72" name="__codelineno-104-72" href="#__codelineno-104-72"></a>
<a id="__codelineno-104-73" name="__codelineno-104-73" href="#__codelineno-104-73"></a>.ConfigureResource(configureResource)
<a id="__codelineno-104-74" name="__codelineno-104-74" href="#__codelineno-104-74"></a>
<a id="__codelineno-104-75" name="__codelineno-104-75" href="#__codelineno-104-75"></a>
<a id="__codelineno-104-76" name="__codelineno-104-76" href="#__codelineno-104-76"></a>
<a id="__codelineno-104-77" name="__codelineno-104-77" href="#__codelineno-104-77"></a>.WithTracing(builder =&gt; {
<a id="__codelineno-104-78" name="__codelineno-104-78" href="#__codelineno-104-78"></a>
<a id="__codelineno-104-79" name="__codelineno-104-79" href="#__codelineno-104-79"></a>
<a id="__codelineno-104-80" name="__codelineno-104-80" href="#__codelineno-104-80"></a>
<a id="__codelineno-104-81" name="__codelineno-104-81" href="#__codelineno-104-81"></a>builder
<a id="__codelineno-104-82" name="__codelineno-104-82" href="#__codelineno-104-82"></a>
<a id="__codelineno-104-83" name="__codelineno-104-83" href="#__codelineno-104-83"></a>
<a id="__codelineno-104-84" name="__codelineno-104-84" href="#__codelineno-104-84"></a>
<a id="__codelineno-104-85" name="__codelineno-104-85" href="#__codelineno-104-85"></a>.SetSampler(new AlwaysOnSampler())
<a id="__codelineno-104-86" name="__codelineno-104-86" href="#__codelineno-104-86"></a>
<a id="__codelineno-104-87" name="__codelineno-104-87" href="#__codelineno-104-87"></a>
<a id="__codelineno-104-88" name="__codelineno-104-88" href="#__codelineno-104-88"></a>
<a id="__codelineno-104-89" name="__codelineno-104-89" href="#__codelineno-104-89"></a>.AddSource(MyActivitySource.Name)
<a id="__codelineno-104-90" name="__codelineno-104-90" href="#__codelineno-104-90"></a>
<a id="__codelineno-104-91" name="__codelineno-104-91" href="#__codelineno-104-91"></a>
<a id="__codelineno-104-92" name="__codelineno-104-92" href="#__codelineno-104-92"></a>
<a id="__codelineno-104-93" name="__codelineno-104-93" href="#__codelineno-104-93"></a>.AddOtlpExporter(options =&gt;
<a id="__codelineno-104-94" name="__codelineno-104-94" href="#__codelineno-104-94"></a>
<a id="__codelineno-104-95" name="__codelineno-104-95" href="#__codelineno-104-95"></a>
<a id="__codelineno-104-96" name="__codelineno-104-96" href="#__codelineno-104-96"></a>
<a id="__codelineno-104-97" name="__codelineno-104-97" href="#__codelineno-104-97"></a>{
<a id="__codelineno-104-98" name="__codelineno-104-98" href="#__codelineno-104-98"></a>
<a id="__codelineno-104-99" name="__codelineno-104-99" href="#__codelineno-104-99"></a>
<a id="__codelineno-104-100" name="__codelineno-104-100" href="#__codelineno-104-100"></a>
<a id="__codelineno-104-101" name="__codelineno-104-101" href="#__codelineno-104-101"></a>options.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/traces&quot;);
<a id="__codelineno-104-102" name="__codelineno-104-102" href="#__codelineno-104-102"></a>
<a id="__codelineno-104-103" name="__codelineno-104-103" href="#__codelineno-104-103"></a>
<a id="__codelineno-104-104" name="__codelineno-104-104" href="#__codelineno-104-104"></a>
<a id="__codelineno-104-105" name="__codelineno-104-105" href="#__codelineno-104-105"></a>options.Protocol = OpenTelemetry.Exporter.OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-104-106" name="__codelineno-104-106" href="#__codelineno-104-106"></a>
<a id="__codelineno-104-107" name="__codelineno-104-107" href="#__codelineno-104-107"></a>
<a id="__codelineno-104-108" name="__codelineno-104-108" href="#__codelineno-104-108"></a>
<a id="__codelineno-104-109" name="__codelineno-104-109" href="#__codelineno-104-109"></a>options.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-104-110" name="__codelineno-104-110" href="#__codelineno-104-110"></a>
<a id="__codelineno-104-111" name="__codelineno-104-111" href="#__codelineno-104-111"></a>
<a id="__codelineno-104-112" name="__codelineno-104-112" href="#__codelineno-104-112"></a>
<a id="__codelineno-104-113" name="__codelineno-104-113" href="#__codelineno-104-113"></a>});
<a id="__codelineno-104-114" name="__codelineno-104-114" href="#__codelineno-104-114"></a>
<a id="__codelineno-104-115" name="__codelineno-104-115" href="#__codelineno-104-115"></a>
<a id="__codelineno-104-116" name="__codelineno-104-116" href="#__codelineno-104-116"></a>
<a id="__codelineno-104-117" name="__codelineno-104-117" href="#__codelineno-104-117"></a>})
<a id="__codelineno-104-118" name="__codelineno-104-118" href="#__codelineno-104-118"></a>
<a id="__codelineno-104-119" name="__codelineno-104-119" href="#__codelineno-104-119"></a>
<a id="__codelineno-104-120" name="__codelineno-104-120" href="#__codelineno-104-120"></a>
<a id="__codelineno-104-121" name="__codelineno-104-121" href="#__codelineno-104-121"></a>.WithMetrics(builder =&gt; {
<a id="__codelineno-104-122" name="__codelineno-104-122" href="#__codelineno-104-122"></a>
<a id="__codelineno-104-123" name="__codelineno-104-123" href="#__codelineno-104-123"></a>
<a id="__codelineno-104-124" name="__codelineno-104-124" href="#__codelineno-104-124"></a>
<a id="__codelineno-104-125" name="__codelineno-104-125" href="#__codelineno-104-125"></a>builder
<a id="__codelineno-104-126" name="__codelineno-104-126" href="#__codelineno-104-126"></a>
<a id="__codelineno-104-127" name="__codelineno-104-127" href="#__codelineno-104-127"></a>
<a id="__codelineno-104-128" name="__codelineno-104-128" href="#__codelineno-104-128"></a>
<a id="__codelineno-104-129" name="__codelineno-104-129" href="#__codelineno-104-129"></a>.AddMeter(&quot;my-meter&quot;)
<a id="__codelineno-104-130" name="__codelineno-104-130" href="#__codelineno-104-130"></a>
<a id="__codelineno-104-131" name="__codelineno-104-131" href="#__codelineno-104-131"></a>
<a id="__codelineno-104-132" name="__codelineno-104-132" href="#__codelineno-104-132"></a>
<a id="__codelineno-104-133" name="__codelineno-104-133" href="#__codelineno-104-133"></a>.AddOtlpExporter((OtlpExporterOptions exporterOptions, MetricReaderOptions readerOptions) =&gt;
<a id="__codelineno-104-134" name="__codelineno-104-134" href="#__codelineno-104-134"></a>
<a id="__codelineno-104-135" name="__codelineno-104-135" href="#__codelineno-104-135"></a>
<a id="__codelineno-104-136" name="__codelineno-104-136" href="#__codelineno-104-136"></a>
<a id="__codelineno-104-137" name="__codelineno-104-137" href="#__codelineno-104-137"></a>{
<a id="__codelineno-104-138" name="__codelineno-104-138" href="#__codelineno-104-138"></a>
<a id="__codelineno-104-139" name="__codelineno-104-139" href="#__codelineno-104-139"></a>
<a id="__codelineno-104-140" name="__codelineno-104-140" href="#__codelineno-104-140"></a>
<a id="__codelineno-104-141" name="__codelineno-104-141" href="#__codelineno-104-141"></a>exporterOptions.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/metrics&quot;);
<a id="__codelineno-104-142" name="__codelineno-104-142" href="#__codelineno-104-142"></a>
<a id="__codelineno-104-143" name="__codelineno-104-143" href="#__codelineno-104-143"></a>
<a id="__codelineno-104-144" name="__codelineno-104-144" href="#__codelineno-104-144"></a>
<a id="__codelineno-104-145" name="__codelineno-104-145" href="#__codelineno-104-145"></a>exporterOptions.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-104-146" name="__codelineno-104-146" href="#__codelineno-104-146"></a>
<a id="__codelineno-104-147" name="__codelineno-104-147" href="#__codelineno-104-147"></a>
<a id="__codelineno-104-148" name="__codelineno-104-148" href="#__codelineno-104-148"></a>
<a id="__codelineno-104-149" name="__codelineno-104-149" href="#__codelineno-104-149"></a>exporterOptions.Protocol = OpenTelemetry.Exporter.OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-104-150" name="__codelineno-104-150" href="#__codelineno-104-150"></a>
<a id="__codelineno-104-151" name="__codelineno-104-151" href="#__codelineno-104-151"></a>
<a id="__codelineno-104-152" name="__codelineno-104-152" href="#__codelineno-104-152"></a>
<a id="__codelineno-104-153" name="__codelineno-104-153" href="#__codelineno-104-153"></a>readerOptions.TemporalityPreference = MetricReaderTemporalityPreference.Delta;
<a id="__codelineno-104-154" name="__codelineno-104-154" href="#__codelineno-104-154"></a>
<a id="__codelineno-104-155" name="__codelineno-104-155" href="#__codelineno-104-155"></a>
<a id="__codelineno-104-156" name="__codelineno-104-156" href="#__codelineno-104-156"></a>
<a id="__codelineno-104-157" name="__codelineno-104-157" href="#__codelineno-104-157"></a>});
<a id="__codelineno-104-158" name="__codelineno-104-158" href="#__codelineno-104-158"></a>
<a id="__codelineno-104-159" name="__codelineno-104-159" href="#__codelineno-104-159"></a>
<a id="__codelineno-104-160" name="__codelineno-104-160" href="#__codelineno-104-160"></a>
<a id="__codelineno-104-161" name="__codelineno-104-161" href="#__codelineno-104-161"></a>});
<a id="__codelineno-104-162" name="__codelineno-104-162" href="#__codelineno-104-162"></a>
<a id="__codelineno-104-163" name="__codelineno-104-163" href="#__codelineno-104-163"></a>
<a id="__codelineno-104-164" name="__codelineno-104-164" href="#__codelineno-104-164"></a>
<a id="__codelineno-104-165" name="__codelineno-104-165" href="#__codelineno-104-165"></a>var resourceBuilder = ResourceBuilder.CreateDefault();
<a id="__codelineno-104-166" name="__codelineno-104-166" href="#__codelineno-104-166"></a>
<a id="__codelineno-104-167" name="__codelineno-104-167" href="#__codelineno-104-167"></a>
<a id="__codelineno-104-168" name="__codelineno-104-168" href="#__codelineno-104-168"></a>
<a id="__codelineno-104-169" name="__codelineno-104-169" href="#__codelineno-104-169"></a>configureResource!(resourceBuilder);
<a id="__codelineno-104-170" name="__codelineno-104-170" href="#__codelineno-104-170"></a>
<a id="__codelineno-104-171" name="__codelineno-104-171" href="#__codelineno-104-171"></a>
<a id="__codelineno-104-172" name="__codelineno-104-172" href="#__codelineno-104-172"></a>
<a id="__codelineno-104-173" name="__codelineno-104-173" href="#__codelineno-104-173"></a>loggerFactoryOT = LoggerFactory.Create(builder =&gt; {
<a id="__codelineno-104-174" name="__codelineno-104-174" href="#__codelineno-104-174"></a>
<a id="__codelineno-104-175" name="__codelineno-104-175" href="#__codelineno-104-175"></a>
<a id="__codelineno-104-176" name="__codelineno-104-176" href="#__codelineno-104-176"></a>
<a id="__codelineno-104-177" name="__codelineno-104-177" href="#__codelineno-104-177"></a>builder
<a id="__codelineno-104-178" name="__codelineno-104-178" href="#__codelineno-104-178"></a>
<a id="__codelineno-104-179" name="__codelineno-104-179" href="#__codelineno-104-179"></a>
<a id="__codelineno-104-180" name="__codelineno-104-180" href="#__codelineno-104-180"></a>
<a id="__codelineno-104-181" name="__codelineno-104-181" href="#__codelineno-104-181"></a>.AddOpenTelemetry(options =&gt; {
<a id="__codelineno-104-182" name="__codelineno-104-182" href="#__codelineno-104-182"></a>
<a id="__codelineno-104-183" name="__codelineno-104-183" href="#__codelineno-104-183"></a>
<a id="__codelineno-104-184" name="__codelineno-104-184" href="#__codelineno-104-184"></a>
<a id="__codelineno-104-185" name="__codelineno-104-185" href="#__codelineno-104-185"></a>options.SetResourceBuilder(resourceBuilder).AddOtlpExporter(options =&gt; {
<a id="__codelineno-104-186" name="__codelineno-104-186" href="#__codelineno-104-186"></a>
<a id="__codelineno-104-187" name="__codelineno-104-187" href="#__codelineno-104-187"></a>
<a id="__codelineno-104-188" name="__codelineno-104-188" href="#__codelineno-104-188"></a>
<a id="__codelineno-104-189" name="__codelineno-104-189" href="#__codelineno-104-189"></a>options.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/logs&quot;);
<a id="__codelineno-104-190" name="__codelineno-104-190" href="#__codelineno-104-190"></a>
<a id="__codelineno-104-191" name="__codelineno-104-191" href="#__codelineno-104-191"></a>
<a id="__codelineno-104-192" name="__codelineno-104-192" href="#__codelineno-104-192"></a>
<a id="__codelineno-104-193" name="__codelineno-104-193" href="#__codelineno-104-193"></a>options.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-104-194" name="__codelineno-104-194" href="#__codelineno-104-194"></a>
<a id="__codelineno-104-195" name="__codelineno-104-195" href="#__codelineno-104-195"></a>
<a id="__codelineno-104-196" name="__codelineno-104-196" href="#__codelineno-104-196"></a>
<a id="__codelineno-104-197" name="__codelineno-104-197" href="#__codelineno-104-197"></a>options.ExportProcessorType = OpenTelemetry.ExportProcessorType.Batch;
<a id="__codelineno-104-198" name="__codelineno-104-198" href="#__codelineno-104-198"></a>
<a id="__codelineno-104-199" name="__codelineno-104-199" href="#__codelineno-104-199"></a>
<a id="__codelineno-104-200" name="__codelineno-104-200" href="#__codelineno-104-200"></a>
<a id="__codelineno-104-201" name="__codelineno-104-201" href="#__codelineno-104-201"></a>options.Protocol = OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-104-202" name="__codelineno-104-202" href="#__codelineno-104-202"></a>
<a id="__codelineno-104-203" name="__codelineno-104-203" href="#__codelineno-104-203"></a>
<a id="__codelineno-104-204" name="__codelineno-104-204" href="#__codelineno-104-204"></a>
<a id="__codelineno-104-205" name="__codelineno-104-205" href="#__codelineno-104-205"></a>});
<a id="__codelineno-104-206" name="__codelineno-104-206" href="#__codelineno-104-206"></a>
<a id="__codelineno-104-207" name="__codelineno-104-207" href="#__codelineno-104-207"></a>
<a id="__codelineno-104-208" name="__codelineno-104-208" href="#__codelineno-104-208"></a>
<a id="__codelineno-104-209" name="__codelineno-104-209" href="#__codelineno-104-209"></a>})
<a id="__codelineno-104-210" name="__codelineno-104-210" href="#__codelineno-104-210"></a>
<a id="__codelineno-104-211" name="__codelineno-104-211" href="#__codelineno-104-211"></a>
<a id="__codelineno-104-212" name="__codelineno-104-212" href="#__codelineno-104-212"></a>
<a id="__codelineno-104-213" name="__codelineno-104-213" href="#__codelineno-104-213"></a>.AddConsole();
<a id="__codelineno-104-214" name="__codelineno-104-214" href="#__codelineno-104-214"></a>
<a id="__codelineno-104-215" name="__codelineno-104-215" href="#__codelineno-104-215"></a>
<a id="__codelineno-104-216" name="__codelineno-104-216" href="#__codelineno-104-216"></a>
<a id="__codelineno-104-217" name="__codelineno-104-217" href="#__codelineno-104-217"></a>});
<a id="__codelineno-104-218" name="__codelineno-104-218" href="#__codelineno-104-218"></a>
<a id="__codelineno-104-219" name="__codelineno-104-219" href="#__codelineno-104-219"></a>
<a id="__codelineno-104-220" name="__codelineno-104-220" href="#__codelineno-104-220"></a>
<a id="__codelineno-104-221" name="__codelineno-104-221" href="#__codelineno-104-221"></a>Sdk.CreateTracerProviderBuilder()
<a id="__codelineno-104-222" name="__codelineno-104-222" href="#__codelineno-104-222"></a>
<a id="__codelineno-104-223" name="__codelineno-104-223" href="#__codelineno-104-223"></a>
<a id="__codelineno-104-224" name="__codelineno-104-224" href="#__codelineno-104-224"></a>
<a id="__codelineno-104-225" name="__codelineno-104-225" href="#__codelineno-104-225"></a>.SetSampler(new AlwaysOnSampler())
<a id="__codelineno-104-226" name="__codelineno-104-226" href="#__codelineno-104-226"></a>
<a id="__codelineno-104-227" name="__codelineno-104-227" href="#__codelineno-104-227"></a>
<a id="__codelineno-104-228" name="__codelineno-104-228" href="#__codelineno-104-228"></a>
<a id="__codelineno-104-229" name="__codelineno-104-229" href="#__codelineno-104-229"></a>.AddSource(MyActivitySource.Name)
<a id="__codelineno-104-230" name="__codelineno-104-230" href="#__codelineno-104-230"></a>
<a id="__codelineno-104-231" name="__codelineno-104-231" href="#__codelineno-104-231"></a>
<a id="__codelineno-104-232" name="__codelineno-104-232" href="#__codelineno-104-232"></a>
<a id="__codelineno-104-233" name="__codelineno-104-233" href="#__codelineno-104-233"></a>.ConfigureResource(configureResource);
<a id="__codelineno-104-234" name="__codelineno-104-234" href="#__codelineno-104-234"></a>
<a id="__codelineno-104-235" name="__codelineno-104-235" href="#__codelineno-104-235"></a>
<a id="__codelineno-104-236" name="__codelineno-104-236" href="#__codelineno-104-236"></a>
<a id="__codelineno-104-237" name="__codelineno-104-237" href="#__codelineno-104-237"></a>// add-logging
<a id="__codelineno-104-238" name="__codelineno-104-238" href="#__codelineno-104-238"></a>
<a id="__codelineno-104-239" name="__codelineno-104-239" href="#__codelineno-104-239"></a>
<a id="__codelineno-104-240" name="__codelineno-104-240" href="#__codelineno-104-240"></a>
<a id="__codelineno-104-241" name="__codelineno-104-241" href="#__codelineno-104-241"></a>}
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.</p>
<ol>
<li>Install the following packages.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a>dotnet add package Microsoft.Extensions.Logging
<a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>
<a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>
<a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a>
<a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a>dotnet add package OpenTelemetry.Extensions.Hosting
<a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a>
<a id="__codelineno-105-7" name="__codelineno-105-7" href="#__codelineno-105-7"></a>
<a id="__codelineno-105-8" name="__codelineno-105-8" href="#__codelineno-105-8"></a>
<a id="__codelineno-105-9" name="__codelineno-105-9" href="#__codelineno-105-9"></a>dotnet add package OpenTelemetry
<a id="__codelineno-105-10" name="__codelineno-105-10" href="#__codelineno-105-10"></a>
<a id="__codelineno-105-11" name="__codelineno-105-11" href="#__codelineno-105-11"></a>
<a id="__codelineno-105-12" name="__codelineno-105-12" href="#__codelineno-105-12"></a>
<a id="__codelineno-105-13" name="__codelineno-105-13" href="#__codelineno-105-13"></a>dotnet add package OpenTelemetry.Api
<a id="__codelineno-105-14" name="__codelineno-105-14" href="#__codelineno-105-14"></a>
<a id="__codelineno-105-15" name="__codelineno-105-15" href="#__codelineno-105-15"></a>
<a id="__codelineno-105-16" name="__codelineno-105-16" href="#__codelineno-105-16"></a>
<a id="__codelineno-105-17" name="__codelineno-105-17" href="#__codelineno-105-17"></a>dotnet add package OpenTelemetry.Exporter.OpenTelemetryProtocol
<a id="__codelineno-105-18" name="__codelineno-105-18" href="#__codelineno-105-18"></a>
<a id="__codelineno-105-19" name="__codelineno-105-19" href="#__codelineno-105-19"></a>
<a id="__codelineno-105-20" name="__codelineno-105-20" href="#__codelineno-105-20"></a>
<a id="__codelineno-105-21" name="__codelineno-105-21" href="#__codelineno-105-21"></a>dotnet add package OpenTelemetry.Instrumentation.AspNetCore
<a id="__codelineno-105-22" name="__codelineno-105-22" href="#__codelineno-105-22"></a>
<a id="__codelineno-105-23" name="__codelineno-105-23" href="#__codelineno-105-23"></a>
<a id="__codelineno-105-24" name="__codelineno-105-24" href="#__codelineno-105-24"></a>
<a id="__codelineno-105-25" name="__codelineno-105-25" href="#__codelineno-105-25"></a>dotnet add package OpenTelemetry.Instrumentation.Http
<a id="__codelineno-105-26" name="__codelineno-105-26" href="#__codelineno-105-26"></a>
<a id="__codelineno-105-27" name="__codelineno-105-27" href="#__codelineno-105-27"></a>
<a id="__codelineno-105-28" name="__codelineno-105-28" href="#__codelineno-105-28"></a>
<a id="__codelineno-105-29" name="__codelineno-105-29" href="#__codelineno-105-29"></a>dotnet add package OpenTelemetry.Instrumentation.Runtime
</code></pre></div>
2. Add the following <code>using</code> statements to the startup class, which bootstraps your application.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a>using OpenTelemetry;
<a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>
<a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>
<a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a>
<a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>using OpenTelemetry.Trace;
<a id="__codelineno-106-6" name="__codelineno-106-6" href="#__codelineno-106-6"></a>
<a id="__codelineno-106-7" name="__codelineno-106-7" href="#__codelineno-106-7"></a>
<a id="__codelineno-106-8" name="__codelineno-106-8" href="#__codelineno-106-8"></a>
<a id="__codelineno-106-9" name="__codelineno-106-9" href="#__codelineno-106-9"></a>using OpenTelemetry.Exporter;
<a id="__codelineno-106-10" name="__codelineno-106-10" href="#__codelineno-106-10"></a>
<a id="__codelineno-106-11" name="__codelineno-106-11" href="#__codelineno-106-11"></a>
<a id="__codelineno-106-12" name="__codelineno-106-12" href="#__codelineno-106-12"></a>
<a id="__codelineno-106-13" name="__codelineno-106-13" href="#__codelineno-106-13"></a>using OpenTelemetry.Metrics;
<a id="__codelineno-106-14" name="__codelineno-106-14" href="#__codelineno-106-14"></a>
<a id="__codelineno-106-15" name="__codelineno-106-15" href="#__codelineno-106-15"></a>
<a id="__codelineno-106-16" name="__codelineno-106-16" href="#__codelineno-106-16"></a>
<a id="__codelineno-106-17" name="__codelineno-106-17" href="#__codelineno-106-17"></a>using OpenTelemetry.Logs;
<a id="__codelineno-106-18" name="__codelineno-106-18" href="#__codelineno-106-18"></a>
<a id="__codelineno-106-19" name="__codelineno-106-19" href="#__codelineno-106-19"></a>
<a id="__codelineno-106-20" name="__codelineno-106-20" href="#__codelineno-106-20"></a>
<a id="__codelineno-106-21" name="__codelineno-106-21" href="#__codelineno-106-21"></a>using OpenTelemetry.Resources;
<a id="__codelineno-106-22" name="__codelineno-106-22" href="#__codelineno-106-22"></a>
<a id="__codelineno-106-23" name="__codelineno-106-23" href="#__codelineno-106-23"></a>
<a id="__codelineno-106-24" name="__codelineno-106-24" href="#__codelineno-106-24"></a>
<a id="__codelineno-106-25" name="__codelineno-106-25" href="#__codelineno-106-25"></a>using OpenTelemetry.Context.Propagation;
<a id="__codelineno-106-26" name="__codelineno-106-26" href="#__codelineno-106-26"></a>
<a id="__codelineno-106-27" name="__codelineno-106-27" href="#__codelineno-106-27"></a>
<a id="__codelineno-106-28" name="__codelineno-106-28" href="#__codelineno-106-28"></a>
<a id="__codelineno-106-29" name="__codelineno-106-29" href="#__codelineno-106-29"></a>using System.Diagnostics;
<a id="__codelineno-106-30" name="__codelineno-106-30" href="#__codelineno-106-30"></a>
<a id="__codelineno-106-31" name="__codelineno-106-31" href="#__codelineno-106-31"></a>
<a id="__codelineno-106-32" name="__codelineno-106-32" href="#__codelineno-106-32"></a>
<a id="__codelineno-106-33" name="__codelineno-106-33" href="#__codelineno-106-33"></a>using System.Diagnostics.Metrics;
<a id="__codelineno-106-34" name="__codelineno-106-34" href="#__codelineno-106-34"></a>
<a id="__codelineno-106-35" name="__codelineno-106-35" href="#__codelineno-106-35"></a>
<a id="__codelineno-106-36" name="__codelineno-106-36" href="#__codelineno-106-36"></a>
<a id="__codelineno-106-37" name="__codelineno-106-37" href="#__codelineno-106-37"></a>using Microsoft.Extensions.Logging;
<a id="__codelineno-106-38" name="__codelineno-106-38" href="#__codelineno-106-38"></a>
<a id="__codelineno-106-39" name="__codelineno-106-39" href="#__codelineno-106-39"></a>
<a id="__codelineno-106-40" name="__codelineno-106-40" href="#__codelineno-106-40"></a>
<a id="__codelineno-106-41" name="__codelineno-106-41" href="#__codelineno-106-41"></a>using OpenTelemetry.Instrumentation.AspNetCore;
</code></pre></div>
3. Add these fields to your startup class, with the first two containing the <a href="#dynatrace-docs--otlp-export">access details</a>, if you are using the OTLP export.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a>private static string DT_API_URL = &quot;&quot;; // TODO: Provide your SaaS/Managed URL here
<a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>
<a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a>
<a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a>
<a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a>private static string DT_API_TOKEN = &quot;&quot;; // TODO: Provide the OpenTelemetry-scoped access token here
<a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a>
<a id="__codelineno-107-7" name="__codelineno-107-7" href="#__codelineno-107-7"></a>
<a id="__codelineno-107-8" name="__codelineno-107-8" href="#__codelineno-107-8"></a>
<a id="__codelineno-107-9" name="__codelineno-107-9" href="#__codelineno-107-9"></a>private const string activitySource = &quot;Dynatrace.DotNetApp.Sample&quot;; // TODO: Provide a descriptive name for your application here
<a id="__codelineno-107-10" name="__codelineno-107-10" href="#__codelineno-107-10"></a>
<a id="__codelineno-107-11" name="__codelineno-107-11" href="#__codelineno-107-11"></a>
<a id="__codelineno-107-12" name="__codelineno-107-12" href="#__codelineno-107-12"></a>
<a id="__codelineno-107-13" name="__codelineno-107-13" href="#__codelineno-107-13"></a>public static readonly ActivitySource MyActivitySource = new ActivitySource(activitySource);
<a id="__codelineno-107-14" name="__codelineno-107-14" href="#__codelineno-107-14"></a>
<a id="__codelineno-107-15" name="__codelineno-107-15" href="#__codelineno-107-15"></a>
<a id="__codelineno-107-16" name="__codelineno-107-16" href="#__codelineno-107-16"></a>
<a id="__codelineno-107-17" name="__codelineno-107-17" href="#__codelineno-107-17"></a>private static ILoggerFactory loggerFactoryOT;
</code></pre></div>
<p>Value injection</p>
<p>Instead of hardcoding the URL and token, you might also consider reading them from storage specific to your application framework (for example, environment variables or framework secrets).
4. Add the <code>initOpenTelemetry</code> method to your startup class and invoke it as early as possible during your application startup. This initializes OpenTelemetry for the Dynatrace backend and creates default tracer and meter providers.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a>private static void initOpenTelemetry(){
<a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a>
<a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a>
<a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a>
<a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a>var port = System.Environment.GetEnvironmentVariable(&quot;PORT&quot;) ?? &quot;8080&quot;;
<a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a>
<a id="__codelineno-108-7" name="__codelineno-108-7" href="#__codelineno-108-7"></a>
<a id="__codelineno-108-8" name="__codelineno-108-8" href="#__codelineno-108-8"></a>
<a id="__codelineno-108-9" name="__codelineno-108-9" href="#__codelineno-108-9"></a>var appBuilder = WebApplication.CreateBuilder();
<a id="__codelineno-108-10" name="__codelineno-108-10" href="#__codelineno-108-10"></a>
<a id="__codelineno-108-11" name="__codelineno-108-11" href="#__codelineno-108-11"></a>
<a id="__codelineno-108-12" name="__codelineno-108-12" href="#__codelineno-108-12"></a>
<a id="__codelineno-108-13" name="__codelineno-108-13" href="#__codelineno-108-13"></a>appBuilder.WebHost.ConfigureKestrel(options =&gt;{
<a id="__codelineno-108-14" name="__codelineno-108-14" href="#__codelineno-108-14"></a>
<a id="__codelineno-108-15" name="__codelineno-108-15" href="#__codelineno-108-15"></a>
<a id="__codelineno-108-16" name="__codelineno-108-16" href="#__codelineno-108-16"></a>
<a id="__codelineno-108-17" name="__codelineno-108-17" href="#__codelineno-108-17"></a>options.ListenAnyIP(Convert.ToInt32(port)); // hardcoding the port
<a id="__codelineno-108-18" name="__codelineno-108-18" href="#__codelineno-108-18"></a>
<a id="__codelineno-108-19" name="__codelineno-108-19" href="#__codelineno-108-19"></a>
<a id="__codelineno-108-20" name="__codelineno-108-20" href="#__codelineno-108-20"></a>
<a id="__codelineno-108-21" name="__codelineno-108-21" href="#__codelineno-108-21"></a>});
<a id="__codelineno-108-22" name="__codelineno-108-22" href="#__codelineno-108-22"></a>
<a id="__codelineno-108-23" name="__codelineno-108-23" href="#__codelineno-108-23"></a>
<a id="__codelineno-108-24" name="__codelineno-108-24" href="#__codelineno-108-24"></a>
<a id="__codelineno-108-25" name="__codelineno-108-25" href="#__codelineno-108-25"></a>List&lt;KeyValuePair&lt;string, object&gt;&gt; dt_metadata = new List&lt;KeyValuePair&lt;string, object&gt;&gt;();
<a id="__codelineno-108-26" name="__codelineno-108-26" href="#__codelineno-108-26"></a>
<a id="__codelineno-108-27" name="__codelineno-108-27" href="#__codelineno-108-27"></a>
<a id="__codelineno-108-28" name="__codelineno-108-28" href="#__codelineno-108-28"></a>
<a id="__codelineno-108-29" name="__codelineno-108-29" href="#__codelineno-108-29"></a>foreach (string name in new string[] {&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;,
<a id="__codelineno-108-30" name="__codelineno-108-30" href="#__codelineno-108-30"></a>
<a id="__codelineno-108-31" name="__codelineno-108-31" href="#__codelineno-108-31"></a>
<a id="__codelineno-108-32" name="__codelineno-108-32" href="#__codelineno-108-32"></a>
<a id="__codelineno-108-33" name="__codelineno-108-33" href="#__codelineno-108-33"></a>&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;,
<a id="__codelineno-108-34" name="__codelineno-108-34" href="#__codelineno-108-34"></a>
<a id="__codelineno-108-35" name="__codelineno-108-35" href="#__codelineno-108-35"></a>
<a id="__codelineno-108-36" name="__codelineno-108-36" href="#__codelineno-108-36"></a>
<a id="__codelineno-108-37" name="__codelineno-108-37" href="#__codelineno-108-37"></a>&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;}) {
<a id="__codelineno-108-38" name="__codelineno-108-38" href="#__codelineno-108-38"></a>
<a id="__codelineno-108-39" name="__codelineno-108-39" href="#__codelineno-108-39"></a>
<a id="__codelineno-108-40" name="__codelineno-108-40" href="#__codelineno-108-40"></a>
<a id="__codelineno-108-41" name="__codelineno-108-41" href="#__codelineno-108-41"></a>try {
<a id="__codelineno-108-42" name="__codelineno-108-42" href="#__codelineno-108-42"></a>
<a id="__codelineno-108-43" name="__codelineno-108-43" href="#__codelineno-108-43"></a>
<a id="__codelineno-108-44" name="__codelineno-108-44" href="#__codelineno-108-44"></a>
<a id="__codelineno-108-45" name="__codelineno-108-45" href="#__codelineno-108-45"></a>foreach (string line in System.IO.File.ReadAllLines(name.StartsWith(&quot;/var&quot;) ? name : System.IO.File.ReadAllText(name))) {
<a id="__codelineno-108-46" name="__codelineno-108-46" href="#__codelineno-108-46"></a>
<a id="__codelineno-108-47" name="__codelineno-108-47" href="#__codelineno-108-47"></a>
<a id="__codelineno-108-48" name="__codelineno-108-48" href="#__codelineno-108-48"></a>
<a id="__codelineno-108-49" name="__codelineno-108-49" href="#__codelineno-108-49"></a>var keyvalue = line.Split(&quot;=&quot;);
<a id="__codelineno-108-50" name="__codelineno-108-50" href="#__codelineno-108-50"></a>
<a id="__codelineno-108-51" name="__codelineno-108-51" href="#__codelineno-108-51"></a>
<a id="__codelineno-108-52" name="__codelineno-108-52" href="#__codelineno-108-52"></a>
<a id="__codelineno-108-53" name="__codelineno-108-53" href="#__codelineno-108-53"></a>dt_metadata.Add( new KeyValuePair&lt;string, object&gt;(keyvalue[0], keyvalue[1]));
<a id="__codelineno-108-54" name="__codelineno-108-54" href="#__codelineno-108-54"></a>
<a id="__codelineno-108-55" name="__codelineno-108-55" href="#__codelineno-108-55"></a>
<a id="__codelineno-108-56" name="__codelineno-108-56" href="#__codelineno-108-56"></a>
<a id="__codelineno-108-57" name="__codelineno-108-57" href="#__codelineno-108-57"></a>}
<a id="__codelineno-108-58" name="__codelineno-108-58" href="#__codelineno-108-58"></a>
<a id="__codelineno-108-59" name="__codelineno-108-59" href="#__codelineno-108-59"></a>
<a id="__codelineno-108-60" name="__codelineno-108-60" href="#__codelineno-108-60"></a>
<a id="__codelineno-108-61" name="__codelineno-108-61" href="#__codelineno-108-61"></a>}
<a id="__codelineno-108-62" name="__codelineno-108-62" href="#__codelineno-108-62"></a>
<a id="__codelineno-108-63" name="__codelineno-108-63" href="#__codelineno-108-63"></a>
<a id="__codelineno-108-64" name="__codelineno-108-64" href="#__codelineno-108-64"></a>
<a id="__codelineno-108-65" name="__codelineno-108-65" href="#__codelineno-108-65"></a>catch { }
<a id="__codelineno-108-66" name="__codelineno-108-66" href="#__codelineno-108-66"></a>
<a id="__codelineno-108-67" name="__codelineno-108-67" href="#__codelineno-108-67"></a>
<a id="__codelineno-108-68" name="__codelineno-108-68" href="#__codelineno-108-68"></a>
<a id="__codelineno-108-69" name="__codelineno-108-69" href="#__codelineno-108-69"></a>}
<a id="__codelineno-108-70" name="__codelineno-108-70" href="#__codelineno-108-70"></a>
<a id="__codelineno-108-71" name="__codelineno-108-71" href="#__codelineno-108-71"></a>
<a id="__codelineno-108-72" name="__codelineno-108-72" href="#__codelineno-108-72"></a>
<a id="__codelineno-108-73" name="__codelineno-108-73" href="#__codelineno-108-73"></a>Action&lt;ResourceBuilder&gt; configureResource = r =&gt; r
<a id="__codelineno-108-74" name="__codelineno-108-74" href="#__codelineno-108-74"></a>
<a id="__codelineno-108-75" name="__codelineno-108-75" href="#__codelineno-108-75"></a>
<a id="__codelineno-108-76" name="__codelineno-108-76" href="#__codelineno-108-76"></a>
<a id="__codelineno-108-77" name="__codelineno-108-77" href="#__codelineno-108-77"></a>.AddService(serviceName: &quot;dotnetManual&quot;) //TODO Replace with the name of your application
<a id="__codelineno-108-78" name="__codelineno-108-78" href="#__codelineno-108-78"></a>
<a id="__codelineno-108-79" name="__codelineno-108-79" href="#__codelineno-108-79"></a>
<a id="__codelineno-108-80" name="__codelineno-108-80" href="#__codelineno-108-80"></a>
<a id="__codelineno-108-81" name="__codelineno-108-81" href="#__codelineno-108-81"></a>.AddAttributes(dt_metadata);
<a id="__codelineno-108-82" name="__codelineno-108-82" href="#__codelineno-108-82"></a>
<a id="__codelineno-108-83" name="__codelineno-108-83" href="#__codelineno-108-83"></a>
<a id="__codelineno-108-84" name="__codelineno-108-84" href="#__codelineno-108-84"></a>
<a id="__codelineno-108-85" name="__codelineno-108-85" href="#__codelineno-108-85"></a>appBuilder.Services.AddOpenTelemetry()
<a id="__codelineno-108-86" name="__codelineno-108-86" href="#__codelineno-108-86"></a>
<a id="__codelineno-108-87" name="__codelineno-108-87" href="#__codelineno-108-87"></a>
<a id="__codelineno-108-88" name="__codelineno-108-88" href="#__codelineno-108-88"></a>
<a id="__codelineno-108-89" name="__codelineno-108-89" href="#__codelineno-108-89"></a>.ConfigureResource(configureResource)
<a id="__codelineno-108-90" name="__codelineno-108-90" href="#__codelineno-108-90"></a>
<a id="__codelineno-108-91" name="__codelineno-108-91" href="#__codelineno-108-91"></a>
<a id="__codelineno-108-92" name="__codelineno-108-92" href="#__codelineno-108-92"></a>
<a id="__codelineno-108-93" name="__codelineno-108-93" href="#__codelineno-108-93"></a>.WithTracing(builder =&gt;{
<a id="__codelineno-108-94" name="__codelineno-108-94" href="#__codelineno-108-94"></a>
<a id="__codelineno-108-95" name="__codelineno-108-95" href="#__codelineno-108-95"></a>
<a id="__codelineno-108-96" name="__codelineno-108-96" href="#__codelineno-108-96"></a>
<a id="__codelineno-108-97" name="__codelineno-108-97" href="#__codelineno-108-97"></a>appBuilder.Services.Configure&lt;AspNetCoreTraceInstrumentationOptions&gt;(appBuilder.Configuration.GetSection(&quot;AspNetCoreInstrumentation&quot;));
<a id="__codelineno-108-98" name="__codelineno-108-98" href="#__codelineno-108-98"></a>
<a id="__codelineno-108-99" name="__codelineno-108-99" href="#__codelineno-108-99"></a>
<a id="__codelineno-108-100" name="__codelineno-108-100" href="#__codelineno-108-100"></a>
<a id="__codelineno-108-101" name="__codelineno-108-101" href="#__codelineno-108-101"></a>builder
<a id="__codelineno-108-102" name="__codelineno-108-102" href="#__codelineno-108-102"></a>
<a id="__codelineno-108-103" name="__codelineno-108-103" href="#__codelineno-108-103"></a>
<a id="__codelineno-108-104" name="__codelineno-108-104" href="#__codelineno-108-104"></a>
<a id="__codelineno-108-105" name="__codelineno-108-105" href="#__codelineno-108-105"></a>.AddSource(MyActivitySource.Name)
<a id="__codelineno-108-106" name="__codelineno-108-106" href="#__codelineno-108-106"></a>
<a id="__codelineno-108-107" name="__codelineno-108-107" href="#__codelineno-108-107"></a>
<a id="__codelineno-108-108" name="__codelineno-108-108" href="#__codelineno-108-108"></a>
<a id="__codelineno-108-109" name="__codelineno-108-109" href="#__codelineno-108-109"></a>.SetSampler(new AlwaysOnSampler())
<a id="__codelineno-108-110" name="__codelineno-108-110" href="#__codelineno-108-110"></a>
<a id="__codelineno-108-111" name="__codelineno-108-111" href="#__codelineno-108-111"></a>
<a id="__codelineno-108-112" name="__codelineno-108-112" href="#__codelineno-108-112"></a>
<a id="__codelineno-108-113" name="__codelineno-108-113" href="#__codelineno-108-113"></a>.AddHttpClientInstrumentation()
<a id="__codelineno-108-114" name="__codelineno-108-114" href="#__codelineno-108-114"></a>
<a id="__codelineno-108-115" name="__codelineno-108-115" href="#__codelineno-108-115"></a>
<a id="__codelineno-108-116" name="__codelineno-108-116" href="#__codelineno-108-116"></a>
<a id="__codelineno-108-117" name="__codelineno-108-117" href="#__codelineno-108-117"></a>.AddAspNetCoreInstrumentation()
<a id="__codelineno-108-118" name="__codelineno-108-118" href="#__codelineno-108-118"></a>
<a id="__codelineno-108-119" name="__codelineno-108-119" href="#__codelineno-108-119"></a>
<a id="__codelineno-108-120" name="__codelineno-108-120" href="#__codelineno-108-120"></a>
<a id="__codelineno-108-121" name="__codelineno-108-121" href="#__codelineno-108-121"></a>.AddOtlpExporter(otlpOptions =&gt;{
<a id="__codelineno-108-122" name="__codelineno-108-122" href="#__codelineno-108-122"></a>
<a id="__codelineno-108-123" name="__codelineno-108-123" href="#__codelineno-108-123"></a>
<a id="__codelineno-108-124" name="__codelineno-108-124" href="#__codelineno-108-124"></a>
<a id="__codelineno-108-125" name="__codelineno-108-125" href="#__codelineno-108-125"></a>otlpOptions.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/traces&quot;);
<a id="__codelineno-108-126" name="__codelineno-108-126" href="#__codelineno-108-126"></a>
<a id="__codelineno-108-127" name="__codelineno-108-127" href="#__codelineno-108-127"></a>
<a id="__codelineno-108-128" name="__codelineno-108-128" href="#__codelineno-108-128"></a>
<a id="__codelineno-108-129" name="__codelineno-108-129" href="#__codelineno-108-129"></a>otlpOptions.Protocol = OpenTelemetry.Exporter.OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-108-130" name="__codelineno-108-130" href="#__codelineno-108-130"></a>
<a id="__codelineno-108-131" name="__codelineno-108-131" href="#__codelineno-108-131"></a>
<a id="__codelineno-108-132" name="__codelineno-108-132" href="#__codelineno-108-132"></a>
<a id="__codelineno-108-133" name="__codelineno-108-133" href="#__codelineno-108-133"></a>otlpOptions.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-108-134" name="__codelineno-108-134" href="#__codelineno-108-134"></a>
<a id="__codelineno-108-135" name="__codelineno-108-135" href="#__codelineno-108-135"></a>
<a id="__codelineno-108-136" name="__codelineno-108-136" href="#__codelineno-108-136"></a>
<a id="__codelineno-108-137" name="__codelineno-108-137" href="#__codelineno-108-137"></a>});
<a id="__codelineno-108-138" name="__codelineno-108-138" href="#__codelineno-108-138"></a>
<a id="__codelineno-108-139" name="__codelineno-108-139" href="#__codelineno-108-139"></a>
<a id="__codelineno-108-140" name="__codelineno-108-140" href="#__codelineno-108-140"></a>
<a id="__codelineno-108-141" name="__codelineno-108-141" href="#__codelineno-108-141"></a>})
<a id="__codelineno-108-142" name="__codelineno-108-142" href="#__codelineno-108-142"></a>
<a id="__codelineno-108-143" name="__codelineno-108-143" href="#__codelineno-108-143"></a>
<a id="__codelineno-108-144" name="__codelineno-108-144" href="#__codelineno-108-144"></a>
<a id="__codelineno-108-145" name="__codelineno-108-145" href="#__codelineno-108-145"></a>.WithMetrics(builder =&gt;{
<a id="__codelineno-108-146" name="__codelineno-108-146" href="#__codelineno-108-146"></a>
<a id="__codelineno-108-147" name="__codelineno-108-147" href="#__codelineno-108-147"></a>
<a id="__codelineno-108-148" name="__codelineno-108-148" href="#__codelineno-108-148"></a>
<a id="__codelineno-108-149" name="__codelineno-108-149" href="#__codelineno-108-149"></a>builder
<a id="__codelineno-108-150" name="__codelineno-108-150" href="#__codelineno-108-150"></a>
<a id="__codelineno-108-151" name="__codelineno-108-151" href="#__codelineno-108-151"></a>
<a id="__codelineno-108-152" name="__codelineno-108-152" href="#__codelineno-108-152"></a>
<a id="__codelineno-108-153" name="__codelineno-108-153" href="#__codelineno-108-153"></a>.AddMeter(&quot;my-meter&quot;)
<a id="__codelineno-108-154" name="__codelineno-108-154" href="#__codelineno-108-154"></a>
<a id="__codelineno-108-155" name="__codelineno-108-155" href="#__codelineno-108-155"></a>
<a id="__codelineno-108-156" name="__codelineno-108-156" href="#__codelineno-108-156"></a>
<a id="__codelineno-108-157" name="__codelineno-108-157" href="#__codelineno-108-157"></a>// .AddMeter(Instrumentation.MeterName)
<a id="__codelineno-108-158" name="__codelineno-108-158" href="#__codelineno-108-158"></a>
<a id="__codelineno-108-159" name="__codelineno-108-159" href="#__codelineno-108-159"></a>
<a id="__codelineno-108-160" name="__codelineno-108-160" href="#__codelineno-108-160"></a>
<a id="__codelineno-108-161" name="__codelineno-108-161" href="#__codelineno-108-161"></a>.AddRuntimeInstrumentation()
<a id="__codelineno-108-162" name="__codelineno-108-162" href="#__codelineno-108-162"></a>
<a id="__codelineno-108-163" name="__codelineno-108-163" href="#__codelineno-108-163"></a>
<a id="__codelineno-108-164" name="__codelineno-108-164" href="#__codelineno-108-164"></a>
<a id="__codelineno-108-165" name="__codelineno-108-165" href="#__codelineno-108-165"></a>.AddHttpClientInstrumentation()
<a id="__codelineno-108-166" name="__codelineno-108-166" href="#__codelineno-108-166"></a>
<a id="__codelineno-108-167" name="__codelineno-108-167" href="#__codelineno-108-167"></a>
<a id="__codelineno-108-168" name="__codelineno-108-168" href="#__codelineno-108-168"></a>
<a id="__codelineno-108-169" name="__codelineno-108-169" href="#__codelineno-108-169"></a>.AddAspNetCoreInstrumentation()
<a id="__codelineno-108-170" name="__codelineno-108-170" href="#__codelineno-108-170"></a>
<a id="__codelineno-108-171" name="__codelineno-108-171" href="#__codelineno-108-171"></a>
<a id="__codelineno-108-172" name="__codelineno-108-172" href="#__codelineno-108-172"></a>
<a id="__codelineno-108-173" name="__codelineno-108-173" href="#__codelineno-108-173"></a>.AddOtlpExporter((OtlpExporterOptions exporterOptions, MetricReaderOptions readerOptions) =&gt; {
<a id="__codelineno-108-174" name="__codelineno-108-174" href="#__codelineno-108-174"></a>
<a id="__codelineno-108-175" name="__codelineno-108-175" href="#__codelineno-108-175"></a>
<a id="__codelineno-108-176" name="__codelineno-108-176" href="#__codelineno-108-176"></a>
<a id="__codelineno-108-177" name="__codelineno-108-177" href="#__codelineno-108-177"></a>exporterOptions.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/metrics&quot;);
<a id="__codelineno-108-178" name="__codelineno-108-178" href="#__codelineno-108-178"></a>
<a id="__codelineno-108-179" name="__codelineno-108-179" href="#__codelineno-108-179"></a>
<a id="__codelineno-108-180" name="__codelineno-108-180" href="#__codelineno-108-180"></a>
<a id="__codelineno-108-181" name="__codelineno-108-181" href="#__codelineno-108-181"></a>exporterOptions.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-108-182" name="__codelineno-108-182" href="#__codelineno-108-182"></a>
<a id="__codelineno-108-183" name="__codelineno-108-183" href="#__codelineno-108-183"></a>
<a id="__codelineno-108-184" name="__codelineno-108-184" href="#__codelineno-108-184"></a>
<a id="__codelineno-108-185" name="__codelineno-108-185" href="#__codelineno-108-185"></a>exporterOptions.Protocol = OpenTelemetry.Exporter.OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-108-186" name="__codelineno-108-186" href="#__codelineno-108-186"></a>
<a id="__codelineno-108-187" name="__codelineno-108-187" href="#__codelineno-108-187"></a>
<a id="__codelineno-108-188" name="__codelineno-108-188" href="#__codelineno-108-188"></a>
<a id="__codelineno-108-189" name="__codelineno-108-189" href="#__codelineno-108-189"></a>readerOptions.TemporalityPreference = MetricReaderTemporalityPreference.Delta;
<a id="__codelineno-108-190" name="__codelineno-108-190" href="#__codelineno-108-190"></a>
<a id="__codelineno-108-191" name="__codelineno-108-191" href="#__codelineno-108-191"></a>
<a id="__codelineno-108-192" name="__codelineno-108-192" href="#__codelineno-108-192"></a>
<a id="__codelineno-108-193" name="__codelineno-108-193" href="#__codelineno-108-193"></a>});
<a id="__codelineno-108-194" name="__codelineno-108-194" href="#__codelineno-108-194"></a>
<a id="__codelineno-108-195" name="__codelineno-108-195" href="#__codelineno-108-195"></a>
<a id="__codelineno-108-196" name="__codelineno-108-196" href="#__codelineno-108-196"></a>
<a id="__codelineno-108-197" name="__codelineno-108-197" href="#__codelineno-108-197"></a>appBuilder.Logging.ClearProviders();
<a id="__codelineno-108-198" name="__codelineno-108-198" href="#__codelineno-108-198"></a>
<a id="__codelineno-108-199" name="__codelineno-108-199" href="#__codelineno-108-199"></a>
<a id="__codelineno-108-200" name="__codelineno-108-200" href="#__codelineno-108-200"></a>
<a id="__codelineno-108-201" name="__codelineno-108-201" href="#__codelineno-108-201"></a>appBuilder.Logging.AddOpenTelemetry(options =&gt;
<a id="__codelineno-108-202" name="__codelineno-108-202" href="#__codelineno-108-202"></a>
<a id="__codelineno-108-203" name="__codelineno-108-203" href="#__codelineno-108-203"></a>
<a id="__codelineno-108-204" name="__codelineno-108-204" href="#__codelineno-108-204"></a>
<a id="__codelineno-108-205" name="__codelineno-108-205" href="#__codelineno-108-205"></a>{
<a id="__codelineno-108-206" name="__codelineno-108-206" href="#__codelineno-108-206"></a>
<a id="__codelineno-108-207" name="__codelineno-108-207" href="#__codelineno-108-207"></a>
<a id="__codelineno-108-208" name="__codelineno-108-208" href="#__codelineno-108-208"></a>
<a id="__codelineno-108-209" name="__codelineno-108-209" href="#__codelineno-108-209"></a>var resourceBuilder = ResourceBuilder.CreateDefault();
<a id="__codelineno-108-210" name="__codelineno-108-210" href="#__codelineno-108-210"></a>
<a id="__codelineno-108-211" name="__codelineno-108-211" href="#__codelineno-108-211"></a>
<a id="__codelineno-108-212" name="__codelineno-108-212" href="#__codelineno-108-212"></a>
<a id="__codelineno-108-213" name="__codelineno-108-213" href="#__codelineno-108-213"></a>configureResource(resourceBuilder);
<a id="__codelineno-108-214" name="__codelineno-108-214" href="#__codelineno-108-214"></a>
<a id="__codelineno-108-215" name="__codelineno-108-215" href="#__codelineno-108-215"></a>
<a id="__codelineno-108-216" name="__codelineno-108-216" href="#__codelineno-108-216"></a>
<a id="__codelineno-108-217" name="__codelineno-108-217" href="#__codelineno-108-217"></a>options.SetResourceBuilder(resourceBuilder);
<a id="__codelineno-108-218" name="__codelineno-108-218" href="#__codelineno-108-218"></a>
<a id="__codelineno-108-219" name="__codelineno-108-219" href="#__codelineno-108-219"></a>
<a id="__codelineno-108-220" name="__codelineno-108-220" href="#__codelineno-108-220"></a>
<a id="__codelineno-108-221" name="__codelineno-108-221" href="#__codelineno-108-221"></a>options.AddOtlpExporter(otlpOptions =&gt; {
<a id="__codelineno-108-222" name="__codelineno-108-222" href="#__codelineno-108-222"></a>
<a id="__codelineno-108-223" name="__codelineno-108-223" href="#__codelineno-108-223"></a>
<a id="__codelineno-108-224" name="__codelineno-108-224" href="#__codelineno-108-224"></a>
<a id="__codelineno-108-225" name="__codelineno-108-225" href="#__codelineno-108-225"></a>otlpOptions.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/logs&quot;);
<a id="__codelineno-108-226" name="__codelineno-108-226" href="#__codelineno-108-226"></a>
<a id="__codelineno-108-227" name="__codelineno-108-227" href="#__codelineno-108-227"></a>
<a id="__codelineno-108-228" name="__codelineno-108-228" href="#__codelineno-108-228"></a>
<a id="__codelineno-108-229" name="__codelineno-108-229" href="#__codelineno-108-229"></a>otlpOptions.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-108-230" name="__codelineno-108-230" href="#__codelineno-108-230"></a>
<a id="__codelineno-108-231" name="__codelineno-108-231" href="#__codelineno-108-231"></a>
<a id="__codelineno-108-232" name="__codelineno-108-232" href="#__codelineno-108-232"></a>
<a id="__codelineno-108-233" name="__codelineno-108-233" href="#__codelineno-108-233"></a>otlpOptions.ExportProcessorType = OpenTelemetry.ExportProcessorType.Batch;
<a id="__codelineno-108-234" name="__codelineno-108-234" href="#__codelineno-108-234"></a>
<a id="__codelineno-108-235" name="__codelineno-108-235" href="#__codelineno-108-235"></a>
<a id="__codelineno-108-236" name="__codelineno-108-236" href="#__codelineno-108-236"></a>
<a id="__codelineno-108-237" name="__codelineno-108-237" href="#__codelineno-108-237"></a>otlpOptions.Protocol = OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-108-238" name="__codelineno-108-238" href="#__codelineno-108-238"></a>
<a id="__codelineno-108-239" name="__codelineno-108-239" href="#__codelineno-108-239"></a>
<a id="__codelineno-108-240" name="__codelineno-108-240" href="#__codelineno-108-240"></a>
<a id="__codelineno-108-241" name="__codelineno-108-241" href="#__codelineno-108-241"></a>});
<a id="__codelineno-108-242" name="__codelineno-108-242" href="#__codelineno-108-242"></a>
<a id="__codelineno-108-243" name="__codelineno-108-243" href="#__codelineno-108-243"></a>
<a id="__codelineno-108-244" name="__codelineno-108-244" href="#__codelineno-108-244"></a>
<a id="__codelineno-108-245" name="__codelineno-108-245" href="#__codelineno-108-245"></a>});
<a id="__codelineno-108-246" name="__codelineno-108-246" href="#__codelineno-108-246"></a>
<a id="__codelineno-108-247" name="__codelineno-108-247" href="#__codelineno-108-247"></a>
<a id="__codelineno-108-248" name="__codelineno-108-248" href="#__codelineno-108-248"></a>
<a id="__codelineno-108-249" name="__codelineno-108-249" href="#__codelineno-108-249"></a>appBuilder.Services.AddControllers();
<a id="__codelineno-108-250" name="__codelineno-108-250" href="#__codelineno-108-250"></a>
<a id="__codelineno-108-251" name="__codelineno-108-251" href="#__codelineno-108-251"></a>
<a id="__codelineno-108-252" name="__codelineno-108-252" href="#__codelineno-108-252"></a>
<a id="__codelineno-108-253" name="__codelineno-108-253" href="#__codelineno-108-253"></a>appBuilder.Services.AddEndpointsApiExplorer();
<a id="__codelineno-108-254" name="__codelineno-108-254" href="#__codelineno-108-254"></a>
<a id="__codelineno-108-255" name="__codelineno-108-255" href="#__codelineno-108-255"></a>
<a id="__codelineno-108-256" name="__codelineno-108-256" href="#__codelineno-108-256"></a>
<a id="__codelineno-108-257" name="__codelineno-108-257" href="#__codelineno-108-257"></a>var app = appBuilder.Build();
<a id="__codelineno-108-258" name="__codelineno-108-258" href="#__codelineno-108-258"></a>
<a id="__codelineno-108-259" name="__codelineno-108-259" href="#__codelineno-108-259"></a>
<a id="__codelineno-108-260" name="__codelineno-108-260" href="#__codelineno-108-260"></a>
<a id="__codelineno-108-261" name="__codelineno-108-261" href="#__codelineno-108-261"></a>app.MapControllers();
<a id="__codelineno-108-262" name="__codelineno-108-262" href="#__codelineno-108-262"></a>
<a id="__codelineno-108-263" name="__codelineno-108-263" href="#__codelineno-108-263"></a>
<a id="__codelineno-108-264" name="__codelineno-108-264" href="#__codelineno-108-264"></a>
<a id="__codelineno-108-265" name="__codelineno-108-265" href="#__codelineno-108-265"></a>app.Run();
<a id="__codelineno-108-266" name="__codelineno-108-266" href="#__codelineno-108-266"></a>
<a id="__codelineno-108-267" name="__codelineno-108-267" href="#__codelineno-108-267"></a>
<a id="__codelineno-108-268" name="__codelineno-108-268" href="#__codelineno-108-268"></a>
<a id="__codelineno-108-269" name="__codelineno-108-269" href="#__codelineno-108-269"></a>});
<a id="__codelineno-108-270" name="__codelineno-108-270" href="#__codelineno-108-270"></a>
<a id="__codelineno-108-271" name="__codelineno-108-271" href="#__codelineno-108-271"></a>
<a id="__codelineno-108-272" name="__codelineno-108-272" href="#__codelineno-108-272"></a>
<a id="__codelineno-108-273" name="__codelineno-108-273" href="#__codelineno-108-273"></a>}
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.</p>
<h3 id="add-tracing_1">Add tracing<a class="headerlink" href="#add-tracing_1" title="Permanent link">&para;</a></h3>
<p>Using <code>MyActivitySource</code> from the <a href="#setup">setup step</a>, we can now start new activities (traces):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a>using var activity = Startup.MyActivitySource.StartActivity(&quot;Call to /myendpoint&quot;, ActivityKind.Consumer, parentContext.ActivityContext);
<a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>
<a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a>
<a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a>
<a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a>activity?.SetTag(&quot;http.method&quot;, &quot;GET&quot;);
<a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a>
<a id="__codelineno-109-7" name="__codelineno-109-7" href="#__codelineno-109-7"></a>
<a id="__codelineno-109-8" name="__codelineno-109-8" href="#__codelineno-109-8"></a>
<a id="__codelineno-109-9" name="__codelineno-109-9" href="#__codelineno-109-9"></a>activity?.SetTag(&quot;net.protocol.version&quot;, &quot;1.1&quot;);
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new activity (span) and name it "Call to /myendpoint"</li>
<li>Add two tags (attributes), following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
</ul>
<p>The activity will be automatically set as the current and active span until the execution flow leaves the current method scope. Subsequent activities will automatically become child spans.</p>
<h3 id="collect-metrics_1">Collect metrics<a class="headerlink" href="#collect-metrics_1" title="Permanent link">&para;</a></h3>
<ol>
<li>To instantiate new metric instruments, we first need a meter object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a>private static readonly Meter meter = new Meter(&quot;my-meter&quot;, &quot;1.0.0&quot;);  //TODO Replace with the name of your meter
</code></pre></div>
2. With <code>meter</code>, we can now create individual instruments, such as a counter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a>private static readonly Counter&lt;long&gt; counter = meter.CreateCounter&lt;long&gt;(&quot;request_counter&quot;);
</code></pre></div>
3. We can now invoke the <code>Add()</code> method of <code>counter</code> to record new values with our counter and save additional attributes (for example, <code>action.type</code>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a>counter.Add(1, new(&quot;ip&quot;, &quot;an ip address here&quot;), new(&quot;some other key&quot;, &quot;some other value&quot;));
</code></pre></div>
<h3 id="connect-logs_1">Connect logs<a class="headerlink" href="#connect-logs_1" title="Permanent link">&para;</a></h3>
<p>With the <code>loggerFactoryOT</code> variable, we initialized under <a href="#setup">Setup</a>, we can now create individual logger instances, which will pass logged information straight to the configured OpenTelemetry endpoint at Dynatrace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a>var logger = loggerFactoryOT.CreateLogger&lt;Startup&gt;();
<a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a>
<a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a>
<a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a>
<a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a>services.AddSingleton&lt;ILoggerFactory&gt;(loggerFactoryOT);
<a id="__codelineno-113-6" name="__codelineno-113-6" href="#__codelineno-113-6"></a>
<a id="__codelineno-113-7" name="__codelineno-113-7" href="#__codelineno-113-7"></a>
<a id="__codelineno-113-8" name="__codelineno-113-8" href="#__codelineno-113-8"></a>
<a id="__codelineno-113-9" name="__codelineno-113-9" href="#__codelineno-113-9"></a>services.AddSingleton(logger);
<a id="__codelineno-113-10" name="__codelineno-113-10" href="#__codelineno-113-10"></a>
<a id="__codelineno-113-11" name="__codelineno-113-11" href="#__codelineno-113-11"></a>
<a id="__codelineno-113-12" name="__codelineno-113-12" href="#__codelineno-113-12"></a>
<a id="__codelineno-113-13" name="__codelineno-113-13" href="#__codelineno-113-13"></a>logger.LogInformation(eventId: 123, &quot;Log line&quot;);
</code></pre></div>
<h3 id="ensure-context-propagation-optional_1">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_1" title="Permanent link">&para;</a></h3>
<p><a href="/docs/ingest-from/opentelemetry#context-propagation" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">Context propagation</a> is particularly important when network calls (for example, REST) are involved.</p>
<p>If you are using automatic instrumentation and your networking libraries are covered by automatic instrumentation, this will be automatically taken care of by the instrumentation libraries. Otherwise, your code needs to take this into account.</p>
<h4 id="extracting-the-context-when-receiving-a-request_1">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_1" title="Permanent link">&para;</a></h4>
<p>In the following example, we assume that we have received a network call via <code>System.Web.HttpRequest</code> and we define a <code>CompositeTextMapPropagator</code> instance to fetch the context information from the HTTP headers. We then pass that instance to <code>Extract()</code>, returning the context object, which allows us to continue the previous trace with our spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a>private CompositeTextMapPropagator propagator = new CompositeTextMapPropagator(new TextMapPropagator[] {
<a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a>
<a id="__codelineno-114-3" name="__codelineno-114-3" href="#__codelineno-114-3"></a>
<a id="__codelineno-114-4" name="__codelineno-114-4" href="#__codelineno-114-4"></a>
<a id="__codelineno-114-5" name="__codelineno-114-5" href="#__codelineno-114-5"></a>new TraceContextPropagator(),
<a id="__codelineno-114-6" name="__codelineno-114-6" href="#__codelineno-114-6"></a>
<a id="__codelineno-114-7" name="__codelineno-114-7" href="#__codelineno-114-7"></a>
<a id="__codelineno-114-8" name="__codelineno-114-8" href="#__codelineno-114-8"></a>
<a id="__codelineno-114-9" name="__codelineno-114-9" href="#__codelineno-114-9"></a>new BaggagePropagator(),
<a id="__codelineno-114-10" name="__codelineno-114-10" href="#__codelineno-114-10"></a>
<a id="__codelineno-114-11" name="__codelineno-114-11" href="#__codelineno-114-11"></a>
<a id="__codelineno-114-12" name="__codelineno-114-12" href="#__codelineno-114-12"></a>
<a id="__codelineno-114-13" name="__codelineno-114-13" href="#__codelineno-114-13"></a>});
<a id="__codelineno-114-14" name="__codelineno-114-14" href="#__codelineno-114-14"></a>
<a id="__codelineno-114-15" name="__codelineno-114-15" href="#__codelineno-114-15"></a>
<a id="__codelineno-114-16" name="__codelineno-114-16" href="#__codelineno-114-16"></a>
<a id="__codelineno-114-17" name="__codelineno-114-17" href="#__codelineno-114-17"></a>private static readonly Func&lt;HttpRequest, string, IEnumerable&lt;string&gt;&gt; valueGetter = (request, name) =&gt; request.Headers[name];
<a id="__codelineno-114-18" name="__codelineno-114-18" href="#__codelineno-114-18"></a>
<a id="__codelineno-114-19" name="__codelineno-114-19" href="#__codelineno-114-19"></a>
<a id="__codelineno-114-20" name="__codelineno-114-20" href="#__codelineno-114-20"></a>
<a id="__codelineno-114-21" name="__codelineno-114-21" href="#__codelineno-114-21"></a>var parentContext = propagator.Extract(default, HttpContext.Request, valueGetter);
<a id="__codelineno-114-22" name="__codelineno-114-22" href="#__codelineno-114-22"></a>
<a id="__codelineno-114-23" name="__codelineno-114-23" href="#__codelineno-114-23"></a>
<a id="__codelineno-114-24" name="__codelineno-114-24" href="#__codelineno-114-24"></a>
<a id="__codelineno-114-25" name="__codelineno-114-25" href="#__codelineno-114-25"></a>using var activity = MyActivitySource.StartActivity(&quot;my-span&quot;, ActivityKind.Consumer, parentContext.ActivityContext);
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_1">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_1" title="Permanent link">&para;</a></h4>
<p>In the following example, we send a REST request to another service and provide our existing context as part of the HTTP headers of our request.</p>
<p>To do so, we define a <code>TextMapPropagator</code> instance, which adds the respective information. Once we have instantiated our REST object, we pass it, along with the context and the setter instance, to <code>Inject()</code>, which will add the necessary headers to the request.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a>private CompositeTextMapPropagator propagator = new CompositeTextMapPropagator(new TextMapPropagator[] {
<a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a>
<a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a>
<a id="__codelineno-115-4" name="__codelineno-115-4" href="#__codelineno-115-4"></a>
<a id="__codelineno-115-5" name="__codelineno-115-5" href="#__codelineno-115-5"></a>new TraceContextPropagator(),
<a id="__codelineno-115-6" name="__codelineno-115-6" href="#__codelineno-115-6"></a>
<a id="__codelineno-115-7" name="__codelineno-115-7" href="#__codelineno-115-7"></a>
<a id="__codelineno-115-8" name="__codelineno-115-8" href="#__codelineno-115-8"></a>
<a id="__codelineno-115-9" name="__codelineno-115-9" href="#__codelineno-115-9"></a>new BaggagePropagator()
<a id="__codelineno-115-10" name="__codelineno-115-10" href="#__codelineno-115-10"></a>
<a id="__codelineno-115-11" name="__codelineno-115-11" href="#__codelineno-115-11"></a>
<a id="__codelineno-115-12" name="__codelineno-115-12" href="#__codelineno-115-12"></a>
<a id="__codelineno-115-13" name="__codelineno-115-13" href="#__codelineno-115-13"></a>});
<a id="__codelineno-115-14" name="__codelineno-115-14" href="#__codelineno-115-14"></a>
<a id="__codelineno-115-15" name="__codelineno-115-15" href="#__codelineno-115-15"></a>
<a id="__codelineno-115-16" name="__codelineno-115-16" href="#__codelineno-115-16"></a>
<a id="__codelineno-115-17" name="__codelineno-115-17" href="#__codelineno-115-17"></a>private static Action&lt;HttpRequestMessage, string, string&gt; _headerValueSetter =&gt; (request, name, value) =&gt; {
<a id="__codelineno-115-18" name="__codelineno-115-18" href="#__codelineno-115-18"></a>
<a id="__codelineno-115-19" name="__codelineno-115-19" href="#__codelineno-115-19"></a>
<a id="__codelineno-115-20" name="__codelineno-115-20" href="#__codelineno-115-20"></a>
<a id="__codelineno-115-21" name="__codelineno-115-21" href="#__codelineno-115-21"></a>request.Headers.Remove(name);
<a id="__codelineno-115-22" name="__codelineno-115-22" href="#__codelineno-115-22"></a>
<a id="__codelineno-115-23" name="__codelineno-115-23" href="#__codelineno-115-23"></a>
<a id="__codelineno-115-24" name="__codelineno-115-24" href="#__codelineno-115-24"></a>
<a id="__codelineno-115-25" name="__codelineno-115-25" href="#__codelineno-115-25"></a>request.Headers.Add(name, value);
<a id="__codelineno-115-26" name="__codelineno-115-26" href="#__codelineno-115-26"></a>
<a id="__codelineno-115-27" name="__codelineno-115-27" href="#__codelineno-115-27"></a>
<a id="__codelineno-115-28" name="__codelineno-115-28" href="#__codelineno-115-28"></a>
<a id="__codelineno-115-29" name="__codelineno-115-29" href="#__codelineno-115-29"></a>};
<a id="__codelineno-115-30" name="__codelineno-115-30" href="#__codelineno-115-30"></a>
<a id="__codelineno-115-31" name="__codelineno-115-31" href="#__codelineno-115-31"></a>
<a id="__codelineno-115-32" name="__codelineno-115-32" href="#__codelineno-115-32"></a>
<a id="__codelineno-115-33" name="__codelineno-115-33" href="#__codelineno-115-33"></a>propagator.Inject(new PropagationContext(activity!.Context, Baggage.Current), request, _headerValueSetter);
</code></pre></div>
<h2 id="step-5-optional-configure-data-capture-to-meet-privacy-requirements-optional">Step 5 optional Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-5-optional-configure-data-capture-to-meet-privacy-requirements-optional" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-6-verify-data-ingestion-into-dynatrace">Step 6 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-6-verify-data-ingestion-into-dynatrace" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_17">Related topics<a class="headerlink" href="#related-topics_17" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-erlangmd">Source: erlang.md<a class="headerlink" href="#source-erlangmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Erlang application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/erlang
scraped: 2026-02-16T21:18:08.755746</p>
<hr />
<h1 id="instrument-your-erlang-application-with-opentelemetry">Instrument your Erlang application with OpenTelemetry<a class="headerlink" href="#instrument-your-erlang-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-erlang-application-with-opentelemetry_1">Instrument your Erlang application with OpenTelemetry<a class="headerlink" href="#instrument-your-erlang-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Published Apr 20, 2023</li>
</ul>
<p>This walkthrough shows how to add observability to your Erlang application using the OpenTelemetry Erlang libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>No</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>No</td>
</tr>
<tr>
<td>Logs</td>
<td>No</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_16">Prerequisites<a class="headerlink" href="#prerequisites_16" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_2">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_2" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_2">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_2" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>.</p>
<p>The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_2">Get API access token<a class="headerlink" href="#get-api-access-token_2" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-set-up-opentelemetry_1">Step 2 Set up OpenTelemetry<a class="headerlink" href="#step-2-set-up-opentelemetry_1" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the current versions of the <a href="https://hex.pm/packages?search=opentelemetry&amp;sort=recent_downloads">following dependencies√Ø¬ª¬ø</a> to <code>rebar.config</code>.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a>{deps, [
<a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a>
<a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a>
<a id="__codelineno-116-4" name="__codelineno-116-4" href="#__codelineno-116-4"></a>
<a id="__codelineno-116-5" name="__codelineno-116-5" href="#__codelineno-116-5"></a>%TODO add any additional dependancies here
<a id="__codelineno-116-6" name="__codelineno-116-6" href="#__codelineno-116-6"></a>
<a id="__codelineno-116-7" name="__codelineno-116-7" href="#__codelineno-116-7"></a>
<a id="__codelineno-116-8" name="__codelineno-116-8" href="#__codelineno-116-8"></a>
<a id="__codelineno-116-9" name="__codelineno-116-9" href="#__codelineno-116-9"></a>opentelemetry_api,
<a id="__codelineno-116-10" name="__codelineno-116-10" href="#__codelineno-116-10"></a>
<a id="__codelineno-116-11" name="__codelineno-116-11" href="#__codelineno-116-11"></a>
<a id="__codelineno-116-12" name="__codelineno-116-12" href="#__codelineno-116-12"></a>
<a id="__codelineno-116-13" name="__codelineno-116-13" href="#__codelineno-116-13"></a>opentelemetry,
<a id="__codelineno-116-14" name="__codelineno-116-14" href="#__codelineno-116-14"></a>
<a id="__codelineno-116-15" name="__codelineno-116-15" href="#__codelineno-116-15"></a>
<a id="__codelineno-116-16" name="__codelineno-116-16" href="#__codelineno-116-16"></a>
<a id="__codelineno-116-17" name="__codelineno-116-17" href="#__codelineno-116-17"></a>opentelemetry_exporter
<a id="__codelineno-116-18" name="__codelineno-116-18" href="#__codelineno-116-18"></a>
<a id="__codelineno-116-19" name="__codelineno-116-19" href="#__codelineno-116-19"></a>
<a id="__codelineno-116-20" name="__codelineno-116-20" href="#__codelineno-116-20"></a>
<a id="__codelineno-116-21" name="__codelineno-116-21" href="#__codelineno-116-21"></a>]}.
</code></pre></div>
2. Add the following dependencies to your <code>.app.src</code> file in the <code>src</code> directory.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a>{applications, [kernel,
<a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a>
<a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a>
<a id="__codelineno-117-4" name="__codelineno-117-4" href="#__codelineno-117-4"></a>
<a id="__codelineno-117-5" name="__codelineno-117-5" href="#__codelineno-117-5"></a>stdlib,
<a id="__codelineno-117-6" name="__codelineno-117-6" href="#__codelineno-117-6"></a>
<a id="__codelineno-117-7" name="__codelineno-117-7" href="#__codelineno-117-7"></a>
<a id="__codelineno-117-8" name="__codelineno-117-8" href="#__codelineno-117-8"></a>
<a id="__codelineno-117-9" name="__codelineno-117-9" href="#__codelineno-117-9"></a>opentelemetry_api,
<a id="__codelineno-117-10" name="__codelineno-117-10" href="#__codelineno-117-10"></a>
<a id="__codelineno-117-11" name="__codelineno-117-11" href="#__codelineno-117-11"></a>
<a id="__codelineno-117-12" name="__codelineno-117-12" href="#__codelineno-117-12"></a>
<a id="__codelineno-117-13" name="__codelineno-117-13" href="#__codelineno-117-13"></a>opentelemetry,
<a id="__codelineno-117-14" name="__codelineno-117-14" href="#__codelineno-117-14"></a>
<a id="__codelineno-117-15" name="__codelineno-117-15" href="#__codelineno-117-15"></a>
<a id="__codelineno-117-16" name="__codelineno-117-16" href="#__codelineno-117-16"></a>
<a id="__codelineno-117-17" name="__codelineno-117-17" href="#__codelineno-117-17"></a>opentelemetry_exporter]}
</code></pre></div>
3. Add the following configuration to <code>config/sys.config</code> and replace <code>[URL]</code> and <code>[TOKEN]</code> with the respective values for the <a href="#base-url">Dynatrace URL</a> and <a href="#access-token">access token</a>.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a>[
<a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a>
<a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a>
<a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a>
<a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a>{otel_getting_started, []},
<a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a>
<a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a>
<a id="__codelineno-118-8" name="__codelineno-118-8" href="#__codelineno-118-8"></a>
<a id="__codelineno-118-9" name="__codelineno-118-9" href="#__codelineno-118-9"></a>{opentelemetry,
<a id="__codelineno-118-10" name="__codelineno-118-10" href="#__codelineno-118-10"></a>
<a id="__codelineno-118-11" name="__codelineno-118-11" href="#__codelineno-118-11"></a>
<a id="__codelineno-118-12" name="__codelineno-118-12" href="#__codelineno-118-12"></a>
<a id="__codelineno-118-13" name="__codelineno-118-13" href="#__codelineno-118-13"></a>[{span_processor, batch},
<a id="__codelineno-118-14" name="__codelineno-118-14" href="#__codelineno-118-14"></a>
<a id="__codelineno-118-15" name="__codelineno-118-15" href="#__codelineno-118-15"></a>
<a id="__codelineno-118-16" name="__codelineno-118-16" href="#__codelineno-118-16"></a>
<a id="__codelineno-118-17" name="__codelineno-118-17" href="#__codelineno-118-17"></a>{traces_exporter, otlp},
<a id="__codelineno-118-18" name="__codelineno-118-18" href="#__codelineno-118-18"></a>
<a id="__codelineno-118-19" name="__codelineno-118-19" href="#__codelineno-118-19"></a>
<a id="__codelineno-118-20" name="__codelineno-118-20" href="#__codelineno-118-20"></a>
<a id="__codelineno-118-21" name="__codelineno-118-21" href="#__codelineno-118-21"></a>{resource,
<a id="__codelineno-118-22" name="__codelineno-118-22" href="#__codelineno-118-22"></a>
<a id="__codelineno-118-23" name="__codelineno-118-23" href="#__codelineno-118-23"></a>
<a id="__codelineno-118-24" name="__codelineno-118-24" href="#__codelineno-118-24"></a>
<a id="__codelineno-118-25" name="__codelineno-118-25" href="#__codelineno-118-25"></a>[{service,
<a id="__codelineno-118-26" name="__codelineno-118-26" href="#__codelineno-118-26"></a>
<a id="__codelineno-118-27" name="__codelineno-118-27" href="#__codelineno-118-27"></a>
<a id="__codelineno-118-28" name="__codelineno-118-28" href="#__codelineno-118-28"></a>
<a id="__codelineno-118-29" name="__codelineno-118-29" href="#__codelineno-118-29"></a>#{name =&gt; &quot;erlang-quickstart&quot;, version =&gt; &quot;1.0.1&quot;} %%TODO Replace with the name and version of your application
<a id="__codelineno-118-30" name="__codelineno-118-30" href="#__codelineno-118-30"></a>
<a id="__codelineno-118-31" name="__codelineno-118-31" href="#__codelineno-118-31"></a>
<a id="__codelineno-118-32" name="__codelineno-118-32" href="#__codelineno-118-32"></a>
<a id="__codelineno-118-33" name="__codelineno-118-33" href="#__codelineno-118-33"></a>}]
<a id="__codelineno-118-34" name="__codelineno-118-34" href="#__codelineno-118-34"></a>
<a id="__codelineno-118-35" name="__codelineno-118-35" href="#__codelineno-118-35"></a>
<a id="__codelineno-118-36" name="__codelineno-118-36" href="#__codelineno-118-36"></a>
<a id="__codelineno-118-37" name="__codelineno-118-37" href="#__codelineno-118-37"></a>},
<a id="__codelineno-118-38" name="__codelineno-118-38" href="#__codelineno-118-38"></a>
<a id="__codelineno-118-39" name="__codelineno-118-39" href="#__codelineno-118-39"></a>
<a id="__codelineno-118-40" name="__codelineno-118-40" href="#__codelineno-118-40"></a>
<a id="__codelineno-118-41" name="__codelineno-118-41" href="#__codelineno-118-41"></a>{resource_detectors, [
<a id="__codelineno-118-42" name="__codelineno-118-42" href="#__codelineno-118-42"></a>
<a id="__codelineno-118-43" name="__codelineno-118-43" href="#__codelineno-118-43"></a>
<a id="__codelineno-118-44" name="__codelineno-118-44" href="#__codelineno-118-44"></a>
<a id="__codelineno-118-45" name="__codelineno-118-45" href="#__codelineno-118-45"></a>otel_resource_env_var,
<a id="__codelineno-118-46" name="__codelineno-118-46" href="#__codelineno-118-46"></a>
<a id="__codelineno-118-47" name="__codelineno-118-47" href="#__codelineno-118-47"></a>
<a id="__codelineno-118-48" name="__codelineno-118-48" href="#__codelineno-118-48"></a>
<a id="__codelineno-118-49" name="__codelineno-118-49" href="#__codelineno-118-49"></a>otel_resource_app_env,
<a id="__codelineno-118-50" name="__codelineno-118-50" href="#__codelineno-118-50"></a>
<a id="__codelineno-118-51" name="__codelineno-118-51" href="#__codelineno-118-51"></a>
<a id="__codelineno-118-52" name="__codelineno-118-52" href="#__codelineno-118-52"></a>
<a id="__codelineno-118-53" name="__codelineno-118-53" href="#__codelineno-118-53"></a>extra_metadata
<a id="__codelineno-118-54" name="__codelineno-118-54" href="#__codelineno-118-54"></a>
<a id="__codelineno-118-55" name="__codelineno-118-55" href="#__codelineno-118-55"></a>
<a id="__codelineno-118-56" name="__codelineno-118-56" href="#__codelineno-118-56"></a>
<a id="__codelineno-118-57" name="__codelineno-118-57" href="#__codelineno-118-57"></a>]}
<a id="__codelineno-118-58" name="__codelineno-118-58" href="#__codelineno-118-58"></a>
<a id="__codelineno-118-59" name="__codelineno-118-59" href="#__codelineno-118-59"></a>
<a id="__codelineno-118-60" name="__codelineno-118-60" href="#__codelineno-118-60"></a>
<a id="__codelineno-118-61" name="__codelineno-118-61" href="#__codelineno-118-61"></a>]
<a id="__codelineno-118-62" name="__codelineno-118-62" href="#__codelineno-118-62"></a>
<a id="__codelineno-118-63" name="__codelineno-118-63" href="#__codelineno-118-63"></a>
<a id="__codelineno-118-64" name="__codelineno-118-64" href="#__codelineno-118-64"></a>
<a id="__codelineno-118-65" name="__codelineno-118-65" href="#__codelineno-118-65"></a>},
<a id="__codelineno-118-66" name="__codelineno-118-66" href="#__codelineno-118-66"></a>
<a id="__codelineno-118-67" name="__codelineno-118-67" href="#__codelineno-118-67"></a>
<a id="__codelineno-118-68" name="__codelineno-118-68" href="#__codelineno-118-68"></a>
<a id="__codelineno-118-69" name="__codelineno-118-69" href="#__codelineno-118-69"></a>{opentelemetry_exporter,
<a id="__codelineno-118-70" name="__codelineno-118-70" href="#__codelineno-118-70"></a>
<a id="__codelineno-118-71" name="__codelineno-118-71" href="#__codelineno-118-71"></a>
<a id="__codelineno-118-72" name="__codelineno-118-72" href="#__codelineno-118-72"></a>
<a id="__codelineno-118-73" name="__codelineno-118-73" href="#__codelineno-118-73"></a>[{otlp_protocol, http_protobuf},
<a id="__codelineno-118-74" name="__codelineno-118-74" href="#__codelineno-118-74"></a>
<a id="__codelineno-118-75" name="__codelineno-118-75" href="#__codelineno-118-75"></a>
<a id="__codelineno-118-76" name="__codelineno-118-76" href="#__codelineno-118-76"></a>
<a id="__codelineno-118-77" name="__codelineno-118-77" href="#__codelineno-118-77"></a>{otlp_traces_endpoint, &quot;[URL]&quot;}, %%TODO Replace [URL] to your SaaS/Managed URL as mentioned in the next step
<a id="__codelineno-118-78" name="__codelineno-118-78" href="#__codelineno-118-78"></a>
<a id="__codelineno-118-79" name="__codelineno-118-79" href="#__codelineno-118-79"></a>
<a id="__codelineno-118-80" name="__codelineno-118-80" href="#__codelineno-118-80"></a>
<a id="__codelineno-118-81" name="__codelineno-118-81" href="#__codelineno-118-81"></a>{otlp_headers, [{&quot;Authorization&quot;, &quot;Api-Token [TOKEN]&quot;}]} %%TODO Replace [TOKEN] with your API Token as mentioned in the next step
<a id="__codelineno-118-82" name="__codelineno-118-82" href="#__codelineno-118-82"></a>
<a id="__codelineno-118-83" name="__codelineno-118-83" href="#__codelineno-118-83"></a>
<a id="__codelineno-118-84" name="__codelineno-118-84" href="#__codelineno-118-84"></a>
<a id="__codelineno-118-85" name="__codelineno-118-85" href="#__codelineno-118-85"></a>]}
<a id="__codelineno-118-86" name="__codelineno-118-86" href="#__codelineno-118-86"></a>
<a id="__codelineno-118-87" name="__codelineno-118-87" href="#__codelineno-118-87"></a>
<a id="__codelineno-118-88" name="__codelineno-118-88" href="#__codelineno-118-88"></a>
<a id="__codelineno-118-89" name="__codelineno-118-89" href="#__codelineno-118-89"></a>].
</code></pre></div>
4. Save the following code to <code>src/extra_metadata.erl</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a>-module(extra_metadata).
<a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a>
<a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a>
<a id="__codelineno-119-4" name="__codelineno-119-4" href="#__codelineno-119-4"></a>
<a id="__codelineno-119-5" name="__codelineno-119-5" href="#__codelineno-119-5"></a>-behaviour(otel_resource_detector).
<a id="__codelineno-119-6" name="__codelineno-119-6" href="#__codelineno-119-6"></a>
<a id="__codelineno-119-7" name="__codelineno-119-7" href="#__codelineno-119-7"></a>
<a id="__codelineno-119-8" name="__codelineno-119-8" href="#__codelineno-119-8"></a>
<a id="__codelineno-119-9" name="__codelineno-119-9" href="#__codelineno-119-9"></a>-export([get_resource/1]).
<a id="__codelineno-119-10" name="__codelineno-119-10" href="#__codelineno-119-10"></a>
<a id="__codelineno-119-11" name="__codelineno-119-11" href="#__codelineno-119-11"></a>
<a id="__codelineno-119-12" name="__codelineno-119-12" href="#__codelineno-119-12"></a>
<a id="__codelineno-119-13" name="__codelineno-119-13" href="#__codelineno-119-13"></a>get_resource(_) -&gt;
<a id="__codelineno-119-14" name="__codelineno-119-14" href="#__codelineno-119-14"></a>
<a id="__codelineno-119-15" name="__codelineno-119-15" href="#__codelineno-119-15"></a>
<a id="__codelineno-119-16" name="__codelineno-119-16" href="#__codelineno-119-16"></a>
<a id="__codelineno-119-17" name="__codelineno-119-17" href="#__codelineno-119-17"></a>Metadata = otel_resource:create(otel_resource_app_env:parse(get_metadata(&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;)), []),
<a id="__codelineno-119-18" name="__codelineno-119-18" href="#__codelineno-119-18"></a>
<a id="__codelineno-119-19" name="__codelineno-119-19" href="#__codelineno-119-19"></a>
<a id="__codelineno-119-20" name="__codelineno-119-20" href="#__codelineno-119-20"></a>
<a id="__codelineno-119-21" name="__codelineno-119-21" href="#__codelineno-119-21"></a>{ok, MetadataFilePath} = file:read_file(&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;),
<a id="__codelineno-119-22" name="__codelineno-119-22" href="#__codelineno-119-22"></a>
<a id="__codelineno-119-23" name="__codelineno-119-23" href="#__codelineno-119-23"></a>
<a id="__codelineno-119-24" name="__codelineno-119-24" href="#__codelineno-119-24"></a>
<a id="__codelineno-119-25" name="__codelineno-119-25" href="#__codelineno-119-25"></a>Metadata2 = otel_resource:create(otel_resource_app_env:parse(get_metadata(MetadataFilePath)), []),
<a id="__codelineno-119-26" name="__codelineno-119-26" href="#__codelineno-119-26"></a>
<a id="__codelineno-119-27" name="__codelineno-119-27" href="#__codelineno-119-27"></a>
<a id="__codelineno-119-28" name="__codelineno-119-28" href="#__codelineno-119-28"></a>
<a id="__codelineno-119-29" name="__codelineno-119-29" href="#__codelineno-119-29"></a>Metadata3 = otel_resource:create(otel_resource_app_env:parse(get_metadata(&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;)), []),
<a id="__codelineno-119-30" name="__codelineno-119-30" href="#__codelineno-119-30"></a>
<a id="__codelineno-119-31" name="__codelineno-119-31" href="#__codelineno-119-31"></a>
<a id="__codelineno-119-32" name="__codelineno-119-32" href="#__codelineno-119-32"></a>
<a id="__codelineno-119-33" name="__codelineno-119-33" href="#__codelineno-119-33"></a>otel_resource:merge(otel_resource:merge(Metadata, Metadata2), Metadata3),
<a id="__codelineno-119-34" name="__codelineno-119-34" href="#__codelineno-119-34"></a>
<a id="__codelineno-119-35" name="__codelineno-119-35" href="#__codelineno-119-35"></a>
<a id="__codelineno-119-36" name="__codelineno-119-36" href="#__codelineno-119-36"></a>
<a id="__codelineno-119-37" name="__codelineno-119-37" href="#__codelineno-119-37"></a>otel_resource:merge(Metadata, Metadata2).
<a id="__codelineno-119-38" name="__codelineno-119-38" href="#__codelineno-119-38"></a>
<a id="__codelineno-119-39" name="__codelineno-119-39" href="#__codelineno-119-39"></a>
<a id="__codelineno-119-40" name="__codelineno-119-40" href="#__codelineno-119-40"></a>
<a id="__codelineno-119-41" name="__codelineno-119-41" href="#__codelineno-119-41"></a>get_metadata(FileName) -&gt;
<a id="__codelineno-119-42" name="__codelineno-119-42" href="#__codelineno-119-42"></a>
<a id="__codelineno-119-43" name="__codelineno-119-43" href="#__codelineno-119-43"></a>
<a id="__codelineno-119-44" name="__codelineno-119-44" href="#__codelineno-119-44"></a>
<a id="__codelineno-119-45" name="__codelineno-119-45" href="#__codelineno-119-45"></a>try
<a id="__codelineno-119-46" name="__codelineno-119-46" href="#__codelineno-119-46"></a>
<a id="__codelineno-119-47" name="__codelineno-119-47" href="#__codelineno-119-47"></a>
<a id="__codelineno-119-48" name="__codelineno-119-48" href="#__codelineno-119-48"></a>
<a id="__codelineno-119-49" name="__codelineno-119-49" href="#__codelineno-119-49"></a>{ok, MetadataFile} = file:read_file(FileName),
<a id="__codelineno-119-50" name="__codelineno-119-50" href="#__codelineno-119-50"></a>
<a id="__codelineno-119-51" name="__codelineno-119-51" href="#__codelineno-119-51"></a>
<a id="__codelineno-119-52" name="__codelineno-119-52" href="#__codelineno-119-52"></a>
<a id="__codelineno-119-53" name="__codelineno-119-53" href="#__codelineno-119-53"></a>Lines = binary:split(MetadataFile, &lt;&lt;&quot;\n&quot;&gt;&gt;, [trim, global]),
<a id="__codelineno-119-54" name="__codelineno-119-54" href="#__codelineno-119-54"></a>
<a id="__codelineno-119-55" name="__codelineno-119-55" href="#__codelineno-119-55"></a>
<a id="__codelineno-119-56" name="__codelineno-119-56" href="#__codelineno-119-56"></a>
<a id="__codelineno-119-57" name="__codelineno-119-57" href="#__codelineno-119-57"></a>make_tuples(Lines, [])
<a id="__codelineno-119-58" name="__codelineno-119-58" href="#__codelineno-119-58"></a>
<a id="__codelineno-119-59" name="__codelineno-119-59" href="#__codelineno-119-59"></a>
<a id="__codelineno-119-60" name="__codelineno-119-60" href="#__codelineno-119-60"></a>
<a id="__codelineno-119-61" name="__codelineno-119-61" href="#__codelineno-119-61"></a>catch _:_ -&gt; &quot;Metadata not found, safe to continue&quot;
<a id="__codelineno-119-62" name="__codelineno-119-62" href="#__codelineno-119-62"></a>
<a id="__codelineno-119-63" name="__codelineno-119-63" href="#__codelineno-119-63"></a>
<a id="__codelineno-119-64" name="__codelineno-119-64" href="#__codelineno-119-64"></a>
<a id="__codelineno-119-65" name="__codelineno-119-65" href="#__codelineno-119-65"></a>end.
<a id="__codelineno-119-66" name="__codelineno-119-66" href="#__codelineno-119-66"></a>
<a id="__codelineno-119-67" name="__codelineno-119-67" href="#__codelineno-119-67"></a>
<a id="__codelineno-119-68" name="__codelineno-119-68" href="#__codelineno-119-68"></a>
<a id="__codelineno-119-69" name="__codelineno-119-69" href="#__codelineno-119-69"></a>make_tuples([Line|Lines], Acc) -&gt;
<a id="__codelineno-119-70" name="__codelineno-119-70" href="#__codelineno-119-70"></a>
<a id="__codelineno-119-71" name="__codelineno-119-71" href="#__codelineno-119-71"></a>
<a id="__codelineno-119-72" name="__codelineno-119-72" href="#__codelineno-119-72"></a>
<a id="__codelineno-119-73" name="__codelineno-119-73" href="#__codelineno-119-73"></a>[Key, Value] = binary:split(Line, &lt;&lt;&quot;=&quot;&gt;&gt;),
<a id="__codelineno-119-74" name="__codelineno-119-74" href="#__codelineno-119-74"></a>
<a id="__codelineno-119-75" name="__codelineno-119-75" href="#__codelineno-119-75"></a>
<a id="__codelineno-119-76" name="__codelineno-119-76" href="#__codelineno-119-76"></a>
<a id="__codelineno-119-77" name="__codelineno-119-77" href="#__codelineno-119-77"></a>make_tuples(Lines, [{Key, Value}|Acc]);
<a id="__codelineno-119-78" name="__codelineno-119-78" href="#__codelineno-119-78"></a>
<a id="__codelineno-119-79" name="__codelineno-119-79" href="#__codelineno-119-79"></a>
<a id="__codelineno-119-80" name="__codelineno-119-80" href="#__codelineno-119-80"></a>
<a id="__codelineno-119-81" name="__codelineno-119-81" href="#__codelineno-119-81"></a>make_tuples([], Acc) -&gt; Acc.
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.</p>
<h2 id="step-3-instrument-your-application_1">Step 3 Instrument your application<a class="headerlink" href="#step-3-instrument-your-application_1" title="Permanent link">&para;</a></h2>
<h3 id="add-tracing_2">Add tracing<a class="headerlink" href="#add-tracing_2" title="Permanent link">&para;</a></h3>
<p>Spans are started with the macro <a href="https://hexdocs.pm/opentelemetry_api/OpenTelemetry.Tracer.html#with_span/3"><code>with_span</code>√Ø¬ª¬ø</a> and accept an optional list of span attributes, as well as the code block for this span. The span will automatically finish when the code block returns.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a>-export([init/2]).
<a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>
<a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>
<a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a>
<a id="__codelineno-120-5" name="__codelineno-120-5" href="#__codelineno-120-5"></a>-include_lib(&quot;opentelemetry_api/include/otel_tracer.hrl&quot;).
<a id="__codelineno-120-6" name="__codelineno-120-6" href="#__codelineno-120-6"></a>
<a id="__codelineno-120-7" name="__codelineno-120-7" href="#__codelineno-120-7"></a>
<a id="__codelineno-120-8" name="__codelineno-120-8" href="#__codelineno-120-8"></a>
<a id="__codelineno-120-9" name="__codelineno-120-9" href="#__codelineno-120-9"></a>-include_lib(&quot;opentelemetry/include/otel_resource.hrl&quot;).
<a id="__codelineno-120-10" name="__codelineno-120-10" href="#__codelineno-120-10"></a>
<a id="__codelineno-120-11" name="__codelineno-120-11" href="#__codelineno-120-11"></a>
<a id="__codelineno-120-12" name="__codelineno-120-12" href="#__codelineno-120-12"></a>
<a id="__codelineno-120-13" name="__codelineno-120-13" href="#__codelineno-120-13"></a>init( Req, State ) -&gt;
<a id="__codelineno-120-14" name="__codelineno-120-14" href="#__codelineno-120-14"></a>
<a id="__codelineno-120-15" name="__codelineno-120-15" href="#__codelineno-120-15"></a>
<a id="__codelineno-120-16" name="__codelineno-120-16" href="#__codelineno-120-16"></a>
<a id="__codelineno-120-17" name="__codelineno-120-17" href="#__codelineno-120-17"></a>?with_span(&lt;&lt;&quot;parent_span&quot;&gt;&gt;, #{attributes =&gt; [ %%TODO Add span name
<a id="__codelineno-120-18" name="__codelineno-120-18" href="#__codelineno-120-18"></a>
<a id="__codelineno-120-19" name="__codelineno-120-19" href="#__codelineno-120-19"></a>
<a id="__codelineno-120-20" name="__codelineno-120-20" href="#__codelineno-120-20"></a>
<a id="__codelineno-120-21" name="__codelineno-120-21" href="#__codelineno-120-21"></a>{&lt;&lt;&quot;my-key-1&quot;&gt;&gt;, &lt;&lt;&quot;my-value-1&quot;&gt;&gt;}] %%TODO Add attributes at span creation
<a id="__codelineno-120-22" name="__codelineno-120-22" href="#__codelineno-120-22"></a>
<a id="__codelineno-120-23" name="__codelineno-120-23" href="#__codelineno-120-23"></a>
<a id="__codelineno-120-24" name="__codelineno-120-24" href="#__codelineno-120-24"></a>
<a id="__codelineno-120-25" name="__codelineno-120-25" href="#__codelineno-120-25"></a>}, fun child_function/1),
<a id="__codelineno-120-26" name="__codelineno-120-26" href="#__codelineno-120-26"></a>
<a id="__codelineno-120-27" name="__codelineno-120-27" href="#__codelineno-120-27"></a>
<a id="__codelineno-120-28" name="__codelineno-120-28" href="#__codelineno-120-28"></a>
<a id="__codelineno-120-29" name="__codelineno-120-29" href="#__codelineno-120-29"></a>%% Your code goes here
<a id="__codelineno-120-30" name="__codelineno-120-30" href="#__codelineno-120-30"></a>
<a id="__codelineno-120-31" name="__codelineno-120-31" href="#__codelineno-120-31"></a>
<a id="__codelineno-120-32" name="__codelineno-120-32" href="#__codelineno-120-32"></a>
<a id="__codelineno-120-33" name="__codelineno-120-33" href="#__codelineno-120-33"></a>child_function(_SpanCtx) -&gt;
<a id="__codelineno-120-34" name="__codelineno-120-34" href="#__codelineno-120-34"></a>
<a id="__codelineno-120-35" name="__codelineno-120-35" href="#__codelineno-120-35"></a>
<a id="__codelineno-120-36" name="__codelineno-120-36" href="#__codelineno-120-36"></a>
<a id="__codelineno-120-37" name="__codelineno-120-37" href="#__codelineno-120-37"></a>?with_span(&lt;&lt;&quot;child_span&quot;&gt;&gt;, #{},
<a id="__codelineno-120-38" name="__codelineno-120-38" href="#__codelineno-120-38"></a>
<a id="__codelineno-120-39" name="__codelineno-120-39" href="#__codelineno-120-39"></a>
<a id="__codelineno-120-40" name="__codelineno-120-40" href="#__codelineno-120-40"></a>
<a id="__codelineno-120-41" name="__codelineno-120-41" href="#__codelineno-120-41"></a>fun(_ChildSpanCtx) -&gt;
<a id="__codelineno-120-42" name="__codelineno-120-42" href="#__codelineno-120-42"></a>
<a id="__codelineno-120-43" name="__codelineno-120-43" href="#__codelineno-120-43"></a>
<a id="__codelineno-120-44" name="__codelineno-120-44" href="#__codelineno-120-44"></a>
<a id="__codelineno-120-45" name="__codelineno-120-45" href="#__codelineno-120-45"></a>?set_attributes([{&lt;&lt;&quot;child-key-1&quot;&gt;&gt;, &lt;&lt;&quot;child-value-1&quot;&gt;&gt;}]) %%TODO Add attributes after span creation
<a id="__codelineno-120-46" name="__codelineno-120-46" href="#__codelineno-120-46"></a>
<a id="__codelineno-120-47" name="__codelineno-120-47" href="#__codelineno-120-47"></a>
<a id="__codelineno-120-48" name="__codelineno-120-48" href="#__codelineno-120-48"></a>
<a id="__codelineno-120-49" name="__codelineno-120-49" href="#__codelineno-120-49"></a>end).
</code></pre></div>
<h3 id="collect-metrics_2">Collect metrics<a class="headerlink" href="#collect-metrics_2" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Erlang does not have stable support for metrics yet.</p>
<h3 id="connect-logs_2">Connect logs<a class="headerlink" href="#connect-logs_2" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Erlang does not have stable support for logs yet.</p>
<p>Depending on the status of the OpenTelemetry SDK, the pre-release version may nonetheless already allow the ingestion of your logs.</p>
<h3 id="ensure-context-propagation-optional_2">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_2" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<h4 id="extracting-the-context-when-receiving-a-request_2">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_2" title="Permanent link">&para;</a></h4>
<p>For extracting information on an existing context, we pass the headers to the <code>otel_propagator_text_map.extract</code> function, which parses the context information provided by the headers and sets the current context based on that.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a>%% Get Headers from incoming request
<a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a>
<a id="__codelineno-121-3" name="__codelineno-121-3" href="#__codelineno-121-3"></a>
<a id="__codelineno-121-4" name="__codelineno-121-4" href="#__codelineno-121-4"></a>
<a id="__codelineno-121-5" name="__codelineno-121-5" href="#__codelineno-121-5"></a>Headers = maps:get(headers, Req),
<a id="__codelineno-121-6" name="__codelineno-121-6" href="#__codelineno-121-6"></a>
<a id="__codelineno-121-7" name="__codelineno-121-7" href="#__codelineno-121-7"></a>
<a id="__codelineno-121-8" name="__codelineno-121-8" href="#__codelineno-121-8"></a>
<a id="__codelineno-121-9" name="__codelineno-121-9" href="#__codelineno-121-9"></a>otel_propagator_text_map:extract(maps:to_list(Headers)),
<a id="__codelineno-121-10" name="__codelineno-121-10" href="#__codelineno-121-10"></a>
<a id="__codelineno-121-11" name="__codelineno-121-11" href="#__codelineno-121-11"></a>
<a id="__codelineno-121-12" name="__codelineno-121-12" href="#__codelineno-121-12"></a>
<a id="__codelineno-121-13" name="__codelineno-121-13" href="#__codelineno-121-13"></a>SpanCtx = ?start_span(&lt;&lt;&quot;span-name&quot;&gt;&gt;),
<a id="__codelineno-121-14" name="__codelineno-121-14" href="#__codelineno-121-14"></a>
<a id="__codelineno-121-15" name="__codelineno-121-15" href="#__codelineno-121-15"></a>
<a id="__codelineno-121-16" name="__codelineno-121-16" href="#__codelineno-121-16"></a>
<a id="__codelineno-121-17" name="__codelineno-121-17" href="#__codelineno-121-17"></a>%% As we used `otel_propagator_text_map` the current context is from the parent span
<a id="__codelineno-121-18" name="__codelineno-121-18" href="#__codelineno-121-18"></a>
<a id="__codelineno-121-19" name="__codelineno-121-19" href="#__codelineno-121-19"></a>
<a id="__codelineno-121-20" name="__codelineno-121-20" href="#__codelineno-121-20"></a>
<a id="__codelineno-121-21" name="__codelineno-121-21" href="#__codelineno-121-21"></a>Ctx = otel_ctx:get_current(),
<a id="__codelineno-121-22" name="__codelineno-121-22" href="#__codelineno-121-22"></a>
<a id="__codelineno-121-23" name="__codelineno-121-23" href="#__codelineno-121-23"></a>
<a id="__codelineno-121-24" name="__codelineno-121-24" href="#__codelineno-121-24"></a>
<a id="__codelineno-121-25" name="__codelineno-121-25" href="#__codelineno-121-25"></a>proc_lib:spawn_link(fun() -&gt;
<a id="__codelineno-121-26" name="__codelineno-121-26" href="#__codelineno-121-26"></a>
<a id="__codelineno-121-27" name="__codelineno-121-27" href="#__codelineno-121-27"></a>
<a id="__codelineno-121-28" name="__codelineno-121-28" href="#__codelineno-121-28"></a>
<a id="__codelineno-121-29" name="__codelineno-121-29" href="#__codelineno-121-29"></a>%% Start span and set as current
<a id="__codelineno-121-30" name="__codelineno-121-30" href="#__codelineno-121-30"></a>
<a id="__codelineno-121-31" name="__codelineno-121-31" href="#__codelineno-121-31"></a>
<a id="__codelineno-121-32" name="__codelineno-121-32" href="#__codelineno-121-32"></a>
<a id="__codelineno-121-33" name="__codelineno-121-33" href="#__codelineno-121-33"></a>otel_ctx:attach(Ctx),
<a id="__codelineno-121-34" name="__codelineno-121-34" href="#__codelineno-121-34"></a>
<a id="__codelineno-121-35" name="__codelineno-121-35" href="#__codelineno-121-35"></a>
<a id="__codelineno-121-36" name="__codelineno-121-36" href="#__codelineno-121-36"></a>
<a id="__codelineno-121-37" name="__codelineno-121-37" href="#__codelineno-121-37"></a>?set_current_span(SpanCtx),
<a id="__codelineno-121-38" name="__codelineno-121-38" href="#__codelineno-121-38"></a>
<a id="__codelineno-121-39" name="__codelineno-121-39" href="#__codelineno-121-39"></a>
<a id="__codelineno-121-40" name="__codelineno-121-40" href="#__codelineno-121-40"></a>
<a id="__codelineno-121-41" name="__codelineno-121-41" href="#__codelineno-121-41"></a>%% Create response
<a id="__codelineno-121-42" name="__codelineno-121-42" href="#__codelineno-121-42"></a>
<a id="__codelineno-121-43" name="__codelineno-121-43" href="#__codelineno-121-43"></a>
<a id="__codelineno-121-44" name="__codelineno-121-44" href="#__codelineno-121-44"></a>
<a id="__codelineno-121-45" name="__codelineno-121-45" href="#__codelineno-121-45"></a>Resp = cowboy_req:reply(
<a id="__codelineno-121-46" name="__codelineno-121-46" href="#__codelineno-121-46"></a>
<a id="__codelineno-121-47" name="__codelineno-121-47" href="#__codelineno-121-47"></a>
<a id="__codelineno-121-48" name="__codelineno-121-48" href="#__codelineno-121-48"></a>
<a id="__codelineno-121-49" name="__codelineno-121-49" href="#__codelineno-121-49"></a>200,
<a id="__codelineno-121-50" name="__codelineno-121-50" href="#__codelineno-121-50"></a>
<a id="__codelineno-121-51" name="__codelineno-121-51" href="#__codelineno-121-51"></a>
<a id="__codelineno-121-52" name="__codelineno-121-52" href="#__codelineno-121-52"></a>
<a id="__codelineno-121-53" name="__codelineno-121-53" href="#__codelineno-121-53"></a>#{&lt;&lt;&quot;content-type&quot;&gt;&gt; =&gt; &lt;&lt;&quot;application/json&quot;&gt;&gt;},
<a id="__codelineno-121-54" name="__codelineno-121-54" href="#__codelineno-121-54"></a>
<a id="__codelineno-121-55" name="__codelineno-121-55" href="#__codelineno-121-55"></a>
<a id="__codelineno-121-56" name="__codelineno-121-56" href="#__codelineno-121-56"></a>
<a id="__codelineno-121-57" name="__codelineno-121-57" href="#__codelineno-121-57"></a>&lt;&lt;&quot;{\&quot;message\&quot;: \&quot;hello world\&quot;}&quot;&gt;&gt;,
<a id="__codelineno-121-58" name="__codelineno-121-58" href="#__codelineno-121-58"></a>
<a id="__codelineno-121-59" name="__codelineno-121-59" href="#__codelineno-121-59"></a>
<a id="__codelineno-121-60" name="__codelineno-121-60" href="#__codelineno-121-60"></a>
<a id="__codelineno-121-61" name="__codelineno-121-61" href="#__codelineno-121-61"></a>Req
<a id="__codelineno-121-62" name="__codelineno-121-62" href="#__codelineno-121-62"></a>
<a id="__codelineno-121-63" name="__codelineno-121-63" href="#__codelineno-121-63"></a>
<a id="__codelineno-121-64" name="__codelineno-121-64" href="#__codelineno-121-64"></a>
<a id="__codelineno-121-65" name="__codelineno-121-65" href="#__codelineno-121-65"></a>),
<a id="__codelineno-121-66" name="__codelineno-121-66" href="#__codelineno-121-66"></a>
<a id="__codelineno-121-67" name="__codelineno-121-67" href="#__codelineno-121-67"></a>
<a id="__codelineno-121-68" name="__codelineno-121-68" href="#__codelineno-121-68"></a>
<a id="__codelineno-121-69" name="__codelineno-121-69" href="#__codelineno-121-69"></a>{ok, Resp, State},
<a id="__codelineno-121-70" name="__codelineno-121-70" href="#__codelineno-121-70"></a>
<a id="__codelineno-121-71" name="__codelineno-121-71" href="#__codelineno-121-71"></a>
<a id="__codelineno-121-72" name="__codelineno-121-72" href="#__codelineno-121-72"></a>
<a id="__codelineno-121-73" name="__codelineno-121-73" href="#__codelineno-121-73"></a>?end_span(SpanCtx)
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_2">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_2" title="Permanent link">&para;</a></h4>
<p>The following example uses <code>otel_propagator_text_map:inject</code> to provide the HTTP headers (necessary for context propagation) in <code>NewHeaders</code>, which we eventually merge with the existing header object <code>Headers</code> and pass to the <code>httpc:request</code> call, which allows the receiving endpoint to continue the trace with the provided information.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a>?with_span(&lt;&lt;&quot;span-name&quot;&gt;&gt;, #{},
<a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a>
<a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a>
<a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a>
<a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a>fun(_ChildSpanCtx) -&gt;
<a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a>
<a id="__codelineno-122-7" name="__codelineno-122-7" href="#__codelineno-122-7"></a>
<a id="__codelineno-122-8" name="__codelineno-122-8" href="#__codelineno-122-8"></a>
<a id="__codelineno-122-9" name="__codelineno-122-9" href="#__codelineno-122-9"></a>%% A custom header example
<a id="__codelineno-122-10" name="__codelineno-122-10" href="#__codelineno-122-10"></a>
<a id="__codelineno-122-11" name="__codelineno-122-11" href="#__codelineno-122-11"></a>
<a id="__codelineno-122-12" name="__codelineno-122-12" href="#__codelineno-122-12"></a>
<a id="__codelineno-122-13" name="__codelineno-122-13" href="#__codelineno-122-13"></a>Headers = [{&quot;content-type&quot;, &quot;application/json&quot;}, {&quot;X-Custom-Header&quot;, &quot;some-value&quot;}],
<a id="__codelineno-122-14" name="__codelineno-122-14" href="#__codelineno-122-14"></a>
<a id="__codelineno-122-15" name="__codelineno-122-15" href="#__codelineno-122-15"></a>
<a id="__codelineno-122-16" name="__codelineno-122-16" href="#__codelineno-122-16"></a>
<a id="__codelineno-122-17" name="__codelineno-122-17" href="#__codelineno-122-17"></a>%% We convert the traceparent information and merge the 2 headers as
<a id="__codelineno-122-18" name="__codelineno-122-18" href="#__codelineno-122-18"></a>
<a id="__codelineno-122-19" name="__codelineno-122-19" href="#__codelineno-122-19"></a>
<a id="__codelineno-122-20" name="__codelineno-122-20" href="#__codelineno-122-20"></a>
<a id="__codelineno-122-21" name="__codelineno-122-21" href="#__codelineno-122-21"></a>%% Httpc:request requires tuples of strings
<a id="__codelineno-122-22" name="__codelineno-122-22" href="#__codelineno-122-22"></a>
<a id="__codelineno-122-23" name="__codelineno-122-23" href="#__codelineno-122-23"></a>
<a id="__codelineno-122-24" name="__codelineno-122-24" href="#__codelineno-122-24"></a>
<a id="__codelineno-122-25" name="__codelineno-122-25" href="#__codelineno-122-25"></a>Tmp = [],
<a id="__codelineno-122-26" name="__codelineno-122-26" href="#__codelineno-122-26"></a>
<a id="__codelineno-122-27" name="__codelineno-122-27" href="#__codelineno-122-27"></a>
<a id="__codelineno-122-28" name="__codelineno-122-28" href="#__codelineno-122-28"></a>
<a id="__codelineno-122-29" name="__codelineno-122-29" href="#__codelineno-122-29"></a>NewHeaders = headers_list(otel_propagator_text_map:inject(opentelemetry:get_text_map_injector(), Tmp)),
<a id="__codelineno-122-30" name="__codelineno-122-30" href="#__codelineno-122-30"></a>
<a id="__codelineno-122-31" name="__codelineno-122-31" href="#__codelineno-122-31"></a>
<a id="__codelineno-122-32" name="__codelineno-122-32" href="#__codelineno-122-32"></a>
<a id="__codelineno-122-33" name="__codelineno-122-33" href="#__codelineno-122-33"></a>MergedHeaders = lists:append(Headers, NewHeaders),
<a id="__codelineno-122-34" name="__codelineno-122-34" href="#__codelineno-122-34"></a>
<a id="__codelineno-122-35" name="__codelineno-122-35" href="#__codelineno-122-35"></a>
<a id="__codelineno-122-36" name="__codelineno-122-36" href="#__codelineno-122-36"></a>
<a id="__codelineno-122-37" name="__codelineno-122-37" href="#__codelineno-122-37"></a>{ok, Res} = httpc:request(get, {URL, MergedHeaders}, [], []),
<a id="__codelineno-122-38" name="__codelineno-122-38" href="#__codelineno-122-38"></a>
<a id="__codelineno-122-39" name="__codelineno-122-39" href="#__codelineno-122-39"></a>
<a id="__codelineno-122-40" name="__codelineno-122-40" href="#__codelineno-122-40"></a>
<a id="__codelineno-122-41" name="__codelineno-122-41" href="#__codelineno-122-41"></a>io:format(&quot;Response: ~p~n&quot;, [Res])
<a id="__codelineno-122-42" name="__codelineno-122-42" href="#__codelineno-122-42"></a>
<a id="__codelineno-122-43" name="__codelineno-122-43" href="#__codelineno-122-43"></a>
<a id="__codelineno-122-44" name="__codelineno-122-44" href="#__codelineno-122-44"></a>
<a id="__codelineno-122-45" name="__codelineno-122-45" href="#__codelineno-122-45"></a>end).
<a id="__codelineno-122-46" name="__codelineno-122-46" href="#__codelineno-122-46"></a>
<a id="__codelineno-122-47" name="__codelineno-122-47" href="#__codelineno-122-47"></a>
<a id="__codelineno-122-48" name="__codelineno-122-48" href="#__codelineno-122-48"></a>
<a id="__codelineno-122-49" name="__codelineno-122-49" href="#__codelineno-122-49"></a>headers_list(Headers) -&gt;
<a id="__codelineno-122-50" name="__codelineno-122-50" href="#__codelineno-122-50"></a>
<a id="__codelineno-122-51" name="__codelineno-122-51" href="#__codelineno-122-51"></a>
<a id="__codelineno-122-52" name="__codelineno-122-52" href="#__codelineno-122-52"></a>
<a id="__codelineno-122-53" name="__codelineno-122-53" href="#__codelineno-122-53"></a>[{binary_to_list(Name), binary_to_list(Value)} || {Name, Value} &lt;- Headers].
</code></pre></div>
<h2 id="step-4-configure-data-capture-to-meet-privacy-requirements-optional_1">Step 4 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-4-configure-data-capture-to-meet-privacy-requirements-optional_1" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-5-verify-data-ingestion-into-dynatrace_1">Step 5 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-5-verify-data-ingestion-into-dynatrace_1" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_18">Related topics<a class="headerlink" href="#related-topics_18" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-gomd">Source: go.md<a class="headerlink" href="#source-gomd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Go application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/go
scraped: 2026-02-16T21:24:14.547867</p>
<hr />
<h1 id="instrument-your-go-application-with-opentelemetry">Instrument your Go application with OpenTelemetry<a class="headerlink" href="#instrument-your-go-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-go-application-with-opentelemetry_1">Instrument your Go application with OpenTelemetry<a class="headerlink" href="#instrument-your-go-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Published Apr 20, 2023</li>
</ul>
<p>This walkthrough shows how to add observability to your Go application using the OpenTelemetry Go libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>No</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_17">Prerequisites<a class="headerlink" href="#prerequisites_17" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_3">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_3" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_3">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_3" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_3">Get API access token<a class="headerlink" href="#get-api-access-token_3" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-choose-how-you-want-to-instrument-your-application_1">Step 2 Choose how you want to instrument your application<a class="headerlink" href="#step-2-choose-how-you-want-to-instrument-your-application_1" title="Permanent link">&para;</a></h2>
<p>OpenTelemetry supports on Go automatic and manual instrumentation, or a combination of both.</p>
<p>Which instrumentation should I choose?</p>
<p>It's a good idea to start with automatic instrumentation and add manual instrumentation if the automatic approach doesn't work or doesn't provide enough information.</p>
<h2 id="step-3-initialize-opentelemetry">Step 3 Initialize OpenTelemetry<a class="headerlink" href="#step-3-initialize-opentelemetry" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the following import statements.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a>import (
<a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a>
<a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a>
<a id="__codelineno-123-4" name="__codelineno-123-4" href="#__codelineno-123-4"></a>
<a id="__codelineno-123-5" name="__codelineno-123-5" href="#__codelineno-123-5"></a>&quot;context&quot;
<a id="__codelineno-123-6" name="__codelineno-123-6" href="#__codelineno-123-6"></a>
<a id="__codelineno-123-7" name="__codelineno-123-7" href="#__codelineno-123-7"></a>
<a id="__codelineno-123-8" name="__codelineno-123-8" href="#__codelineno-123-8"></a>
<a id="__codelineno-123-9" name="__codelineno-123-9" href="#__codelineno-123-9"></a>&quot;github.com/Dynatrace/OneAgent-SDK-for-Go/sdk&quot;
<a id="__codelineno-123-10" name="__codelineno-123-10" href="#__codelineno-123-10"></a>
<a id="__codelineno-123-11" name="__codelineno-123-11" href="#__codelineno-123-11"></a>
<a id="__codelineno-123-12" name="__codelineno-123-12" href="#__codelineno-123-12"></a>
<a id="__codelineno-123-13" name="__codelineno-123-13" href="#__codelineno-123-13"></a>&quot;go.opentelemetry.io/otel&quot;
<a id="__codelineno-123-14" name="__codelineno-123-14" href="#__codelineno-123-14"></a>
<a id="__codelineno-123-15" name="__codelineno-123-15" href="#__codelineno-123-15"></a>
<a id="__codelineno-123-16" name="__codelineno-123-16" href="#__codelineno-123-16"></a>
<a id="__codelineno-123-17" name="__codelineno-123-17" href="#__codelineno-123-17"></a>&quot;go.opentelemetry.io/otel/attribute&quot;
<a id="__codelineno-123-18" name="__codelineno-123-18" href="#__codelineno-123-18"></a>
<a id="__codelineno-123-19" name="__codelineno-123-19" href="#__codelineno-123-19"></a>
<a id="__codelineno-123-20" name="__codelineno-123-20" href="#__codelineno-123-20"></a>
<a id="__codelineno-123-21" name="__codelineno-123-21" href="#__codelineno-123-21"></a>&quot;go.opentelemetry.io/otel/exporters/otlp/otlpmetric/otlpmetrichttp&quot;
<a id="__codelineno-123-22" name="__codelineno-123-22" href="#__codelineno-123-22"></a>
<a id="__codelineno-123-23" name="__codelineno-123-23" href="#__codelineno-123-23"></a>
<a id="__codelineno-123-24" name="__codelineno-123-24" href="#__codelineno-123-24"></a>
<a id="__codelineno-123-25" name="__codelineno-123-25" href="#__codelineno-123-25"></a>&quot;go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracehttp&quot;
<a id="__codelineno-123-26" name="__codelineno-123-26" href="#__codelineno-123-26"></a>
<a id="__codelineno-123-27" name="__codelineno-123-27" href="#__codelineno-123-27"></a>
<a id="__codelineno-123-28" name="__codelineno-123-28" href="#__codelineno-123-28"></a>
<a id="__codelineno-123-29" name="__codelineno-123-29" href="#__codelineno-123-29"></a>&quot;go.opentelemetry.io/otel/exporters/otlp/otlplog/otlploghttp&quot;
<a id="__codelineno-123-30" name="__codelineno-123-30" href="#__codelineno-123-30"></a>
<a id="__codelineno-123-31" name="__codelineno-123-31" href="#__codelineno-123-31"></a>
<a id="__codelineno-123-32" name="__codelineno-123-32" href="#__codelineno-123-32"></a>
<a id="__codelineno-123-33" name="__codelineno-123-33" href="#__codelineno-123-33"></a>&quot;go.opentelemetry.io/otel/propagation&quot;
<a id="__codelineno-123-34" name="__codelineno-123-34" href="#__codelineno-123-34"></a>
<a id="__codelineno-123-35" name="__codelineno-123-35" href="#__codelineno-123-35"></a>
<a id="__codelineno-123-36" name="__codelineno-123-36" href="#__codelineno-123-36"></a>
<a id="__codelineno-123-37" name="__codelineno-123-37" href="#__codelineno-123-37"></a>&quot;go.opentelemetry.io/otel/trace&quot;
<a id="__codelineno-123-38" name="__codelineno-123-38" href="#__codelineno-123-38"></a>
<a id="__codelineno-123-39" name="__codelineno-123-39" href="#__codelineno-123-39"></a>
<a id="__codelineno-123-40" name="__codelineno-123-40" href="#__codelineno-123-40"></a>
<a id="__codelineno-123-41" name="__codelineno-123-41" href="#__codelineno-123-41"></a>sdkmetric &quot;go.opentelemetry.io/otel/sdk/metric&quot;
<a id="__codelineno-123-42" name="__codelineno-123-42" href="#__codelineno-123-42"></a>
<a id="__codelineno-123-43" name="__codelineno-123-43" href="#__codelineno-123-43"></a>
<a id="__codelineno-123-44" name="__codelineno-123-44" href="#__codelineno-123-44"></a>
<a id="__codelineno-123-45" name="__codelineno-123-45" href="#__codelineno-123-45"></a>&quot;go.opentelemetry.io/otel/sdk/metric/metricdata&quot;
<a id="__codelineno-123-46" name="__codelineno-123-46" href="#__codelineno-123-46"></a>
<a id="__codelineno-123-47" name="__codelineno-123-47" href="#__codelineno-123-47"></a>
<a id="__codelineno-123-48" name="__codelineno-123-48" href="#__codelineno-123-48"></a>
<a id="__codelineno-123-49" name="__codelineno-123-49" href="#__codelineno-123-49"></a>&quot;go.opentelemetry.io/otel/sdk/resource&quot;
<a id="__codelineno-123-50" name="__codelineno-123-50" href="#__codelineno-123-50"></a>
<a id="__codelineno-123-51" name="__codelineno-123-51" href="#__codelineno-123-51"></a>
<a id="__codelineno-123-52" name="__codelineno-123-52" href="#__codelineno-123-52"></a>
<a id="__codelineno-123-53" name="__codelineno-123-53" href="#__codelineno-123-53"></a>sdktrace &quot;go.opentelemetry.io/otel/sdk/trace&quot;
<a id="__codelineno-123-54" name="__codelineno-123-54" href="#__codelineno-123-54"></a>
<a id="__codelineno-123-55" name="__codelineno-123-55" href="#__codelineno-123-55"></a>
<a id="__codelineno-123-56" name="__codelineno-123-56" href="#__codelineno-123-56"></a>
<a id="__codelineno-123-57" name="__codelineno-123-57" href="#__codelineno-123-57"></a>semconv &quot;go.opentelemetry.io/otel/semconv/v1.20.0&quot;
<a id="__codelineno-123-58" name="__codelineno-123-58" href="#__codelineno-123-58"></a>
<a id="__codelineno-123-59" name="__codelineno-123-59" href="#__codelineno-123-59"></a>
<a id="__codelineno-123-60" name="__codelineno-123-60" href="#__codelineno-123-60"></a>
<a id="__codelineno-123-61" name="__codelineno-123-61" href="#__codelineno-123-61"></a>&quot;log&quot;
<a id="__codelineno-123-62" name="__codelineno-123-62" href="#__codelineno-123-62"></a>
<a id="__codelineno-123-63" name="__codelineno-123-63" href="#__codelineno-123-63"></a>
<a id="__codelineno-123-64" name="__codelineno-123-64" href="#__codelineno-123-64"></a>
<a id="__codelineno-123-65" name="__codelineno-123-65" href="#__codelineno-123-65"></a>&quot;time&quot;
<a id="__codelineno-123-66" name="__codelineno-123-66" href="#__codelineno-123-66"></a>
<a id="__codelineno-123-67" name="__codelineno-123-67" href="#__codelineno-123-67"></a>
<a id="__codelineno-123-68" name="__codelineno-123-68" href="#__codelineno-123-68"></a>
<a id="__codelineno-123-69" name="__codelineno-123-69" href="#__codelineno-123-69"></a>&quot;log/slog&quot;
<a id="__codelineno-123-70" name="__codelineno-123-70" href="#__codelineno-123-70"></a>
<a id="__codelineno-123-71" name="__codelineno-123-71" href="#__codelineno-123-71"></a>
<a id="__codelineno-123-72" name="__codelineno-123-72" href="#__codelineno-123-72"></a>
<a id="__codelineno-123-73" name="__codelineno-123-73" href="#__codelineno-123-73"></a>&quot;go.opentelemetry.io/contrib/bridges/otelslog&quot;
<a id="__codelineno-123-74" name="__codelineno-123-74" href="#__codelineno-123-74"></a>
<a id="__codelineno-123-75" name="__codelineno-123-75" href="#__codelineno-123-75"></a>
<a id="__codelineno-123-76" name="__codelineno-123-76" href="#__codelineno-123-76"></a>
<a id="__codelineno-123-77" name="__codelineno-123-77" href="#__codelineno-123-77"></a>&quot;go.opentelemetry.io/otel/log/global&quot;
<a id="__codelineno-123-78" name="__codelineno-123-78" href="#__codelineno-123-78"></a>
<a id="__codelineno-123-79" name="__codelineno-123-79" href="#__codelineno-123-79"></a>
<a id="__codelineno-123-80" name="__codelineno-123-80" href="#__codelineno-123-80"></a>
<a id="__codelineno-123-81" name="__codelineno-123-81" href="#__codelineno-123-81"></a>sdklog &quot;go.opentelemetry.io/otel/sdk/log&quot;
<a id="__codelineno-123-82" name="__codelineno-123-82" href="#__codelineno-123-82"></a>
<a id="__codelineno-123-83" name="__codelineno-123-83" href="#__codelineno-123-83"></a>
<a id="__codelineno-123-84" name="__codelineno-123-84" href="#__codelineno-123-84"></a>
<a id="__codelineno-123-85" name="__codelineno-123-85" href="#__codelineno-123-85"></a>)
</code></pre></div>
2. Run Go's <a href="https://go.dev/ref/mod#go-mod-tidy"><code>mod tidy</code> command√Ø¬ª¬ø</a> to install the dependencies.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a>go mod tidy
</code></pre></div>
3. Add the following code to your startup file and provide the <a href="#get-the-dynatrace-access-details">respective values</a> for <code>DT_API_HOST</code> and <code>DT_API_TOKEN</code>.</p>
<ul>
<li><code>DT_API_HOST</code> should contain only the hostname of your Dynatrace URL (for example, <code>XXXXX.live.dynatrace.com</code>); it is not a URL and must not contain any schemas or paths</li>
<li><code>DT_API_TOKEN</code> should contain the access token</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a>func InitOpenTelemetry() {
<a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a>
<a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a>
<a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a>
<a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a>// ===== GENERAL SETUP =====
<a id="__codelineno-125-6" name="__codelineno-125-6" href="#__codelineno-125-6"></a>
<a id="__codelineno-125-7" name="__codelineno-125-7" href="#__codelineno-125-7"></a>
<a id="__codelineno-125-8" name="__codelineno-125-8" href="#__codelineno-125-8"></a>
<a id="__codelineno-125-9" name="__codelineno-125-9" href="#__codelineno-125-9"></a>DT_API_HOST := &quot;&quot; // Only the host part of your Dynatrace URL
<a id="__codelineno-125-10" name="__codelineno-125-10" href="#__codelineno-125-10"></a>
<a id="__codelineno-125-11" name="__codelineno-125-11" href="#__codelineno-125-11"></a>
<a id="__codelineno-125-12" name="__codelineno-125-12" href="#__codelineno-125-12"></a>
<a id="__codelineno-125-13" name="__codelineno-125-13" href="#__codelineno-125-13"></a>DT_API_BASE_PATH := &quot;/api/v2/otlp&quot;
<a id="__codelineno-125-14" name="__codelineno-125-14" href="#__codelineno-125-14"></a>
<a id="__codelineno-125-15" name="__codelineno-125-15" href="#__codelineno-125-15"></a>
<a id="__codelineno-125-16" name="__codelineno-125-16" href="#__codelineno-125-16"></a>
<a id="__codelineno-125-17" name="__codelineno-125-17" href="#__codelineno-125-17"></a>DT_API_TOKEN := &quot;&quot;
<a id="__codelineno-125-18" name="__codelineno-125-18" href="#__codelineno-125-18"></a>
<a id="__codelineno-125-19" name="__codelineno-125-19" href="#__codelineno-125-19"></a>
<a id="__codelineno-125-20" name="__codelineno-125-20" href="#__codelineno-125-20"></a>
<a id="__codelineno-125-21" name="__codelineno-125-21" href="#__codelineno-125-21"></a>authHeader := map[string]string{&quot;Authorization&quot;: &quot;Api-Token &quot; + DT_API_TOKEN}
<a id="__codelineno-125-22" name="__codelineno-125-22" href="#__codelineno-125-22"></a>
<a id="__codelineno-125-23" name="__codelineno-125-23" href="#__codelineno-125-23"></a>
<a id="__codelineno-125-24" name="__codelineno-125-24" href="#__codelineno-125-24"></a>
<a id="__codelineno-125-25" name="__codelineno-125-25" href="#__codelineno-125-25"></a>ctx := context.Background()
<a id="__codelineno-125-26" name="__codelineno-125-26" href="#__codelineno-125-26"></a>
<a id="__codelineno-125-27" name="__codelineno-125-27" href="#__codelineno-125-27"></a>
<a id="__codelineno-125-28" name="__codelineno-125-28" href="#__codelineno-125-28"></a>
<a id="__codelineno-125-29" name="__codelineno-125-29" href="#__codelineno-125-29"></a>oneagentsdk := sdk.CreateInstance()
<a id="__codelineno-125-30" name="__codelineno-125-30" href="#__codelineno-125-30"></a>
<a id="__codelineno-125-31" name="__codelineno-125-31" href="#__codelineno-125-31"></a>
<a id="__codelineno-125-32" name="__codelineno-125-32" href="#__codelineno-125-32"></a>
<a id="__codelineno-125-33" name="__codelineno-125-33" href="#__codelineno-125-33"></a>dtMetadata := oneagentsdk.GetEnrichmentMetadata()
<a id="__codelineno-125-34" name="__codelineno-125-34" href="#__codelineno-125-34"></a>
<a id="__codelineno-125-35" name="__codelineno-125-35" href="#__codelineno-125-35"></a>
<a id="__codelineno-125-36" name="__codelineno-125-36" href="#__codelineno-125-36"></a>
<a id="__codelineno-125-37" name="__codelineno-125-37" href="#__codelineno-125-37"></a>var attributes []attribute.KeyValue
<a id="__codelineno-125-38" name="__codelineno-125-38" href="#__codelineno-125-38"></a>
<a id="__codelineno-125-39" name="__codelineno-125-39" href="#__codelineno-125-39"></a>
<a id="__codelineno-125-40" name="__codelineno-125-40" href="#__codelineno-125-40"></a>
<a id="__codelineno-125-41" name="__codelineno-125-41" href="#__codelineno-125-41"></a>for k, v := range dtMetadata {
<a id="__codelineno-125-42" name="__codelineno-125-42" href="#__codelineno-125-42"></a>
<a id="__codelineno-125-43" name="__codelineno-125-43" href="#__codelineno-125-43"></a>
<a id="__codelineno-125-44" name="__codelineno-125-44" href="#__codelineno-125-44"></a>
<a id="__codelineno-125-45" name="__codelineno-125-45" href="#__codelineno-125-45"></a>attributes = append(attributes, attribute.KeyValue{Key: attribute.Key(k), Value: attribute.StringValue(v)})
<a id="__codelineno-125-46" name="__codelineno-125-46" href="#__codelineno-125-46"></a>
<a id="__codelineno-125-47" name="__codelineno-125-47" href="#__codelineno-125-47"></a>
<a id="__codelineno-125-48" name="__codelineno-125-48" href="#__codelineno-125-48"></a>
<a id="__codelineno-125-49" name="__codelineno-125-49" href="#__codelineno-125-49"></a>}
<a id="__codelineno-125-50" name="__codelineno-125-50" href="#__codelineno-125-50"></a>
<a id="__codelineno-125-51" name="__codelineno-125-51" href="#__codelineno-125-51"></a>
<a id="__codelineno-125-52" name="__codelineno-125-52" href="#__codelineno-125-52"></a>
<a id="__codelineno-125-53" name="__codelineno-125-53" href="#__codelineno-125-53"></a>attributes = append(attributes,
<a id="__codelineno-125-54" name="__codelineno-125-54" href="#__codelineno-125-54"></a>
<a id="__codelineno-125-55" name="__codelineno-125-55" href="#__codelineno-125-55"></a>
<a id="__codelineno-125-56" name="__codelineno-125-56" href="#__codelineno-125-56"></a>
<a id="__codelineno-125-57" name="__codelineno-125-57" href="#__codelineno-125-57"></a>semconv.ServiceNameKey.String(&quot;go-quickstart&quot;), //TODO Replace with the name of your application
<a id="__codelineno-125-58" name="__codelineno-125-58" href="#__codelineno-125-58"></a>
<a id="__codelineno-125-59" name="__codelineno-125-59" href="#__codelineno-125-59"></a>
<a id="__codelineno-125-60" name="__codelineno-125-60" href="#__codelineno-125-60"></a>
<a id="__codelineno-125-61" name="__codelineno-125-61" href="#__codelineno-125-61"></a>semconv.ServiceVersionKey.String(&quot;1.0.1&quot;),      //TODO Replace with the version of your application
<a id="__codelineno-125-62" name="__codelineno-125-62" href="#__codelineno-125-62"></a>
<a id="__codelineno-125-63" name="__codelineno-125-63" href="#__codelineno-125-63"></a>
<a id="__codelineno-125-64" name="__codelineno-125-64" href="#__codelineno-125-64"></a>
<a id="__codelineno-125-65" name="__codelineno-125-65" href="#__codelineno-125-65"></a>)
<a id="__codelineno-125-66" name="__codelineno-125-66" href="#__codelineno-125-66"></a>
<a id="__codelineno-125-67" name="__codelineno-125-67" href="#__codelineno-125-67"></a>
<a id="__codelineno-125-68" name="__codelineno-125-68" href="#__codelineno-125-68"></a>
<a id="__codelineno-125-69" name="__codelineno-125-69" href="#__codelineno-125-69"></a>res, err := resource.New(ctx, resource.WithAttributes(attributes...))
<a id="__codelineno-125-70" name="__codelineno-125-70" href="#__codelineno-125-70"></a>
<a id="__codelineno-125-71" name="__codelineno-125-71" href="#__codelineno-125-71"></a>
<a id="__codelineno-125-72" name="__codelineno-125-72" href="#__codelineno-125-72"></a>
<a id="__codelineno-125-73" name="__codelineno-125-73" href="#__codelineno-125-73"></a>if err != nil {
<a id="__codelineno-125-74" name="__codelineno-125-74" href="#__codelineno-125-74"></a>
<a id="__codelineno-125-75" name="__codelineno-125-75" href="#__codelineno-125-75"></a>
<a id="__codelineno-125-76" name="__codelineno-125-76" href="#__codelineno-125-76"></a>
<a id="__codelineno-125-77" name="__codelineno-125-77" href="#__codelineno-125-77"></a>log.Fatalf(&quot;Failed to create resource: %v&quot;, err)
<a id="__codelineno-125-78" name="__codelineno-125-78" href="#__codelineno-125-78"></a>
<a id="__codelineno-125-79" name="__codelineno-125-79" href="#__codelineno-125-79"></a>
<a id="__codelineno-125-80" name="__codelineno-125-80" href="#__codelineno-125-80"></a>
<a id="__codelineno-125-81" name="__codelineno-125-81" href="#__codelineno-125-81"></a>}
<a id="__codelineno-125-82" name="__codelineno-125-82" href="#__codelineno-125-82"></a>
<a id="__codelineno-125-83" name="__codelineno-125-83" href="#__codelineno-125-83"></a>
<a id="__codelineno-125-84" name="__codelineno-125-84" href="#__codelineno-125-84"></a>
<a id="__codelineno-125-85" name="__codelineno-125-85" href="#__codelineno-125-85"></a>// ===== TRACING SETUP =====
<a id="__codelineno-125-86" name="__codelineno-125-86" href="#__codelineno-125-86"></a>
<a id="__codelineno-125-87" name="__codelineno-125-87" href="#__codelineno-125-87"></a>
<a id="__codelineno-125-88" name="__codelineno-125-88" href="#__codelineno-125-88"></a>
<a id="__codelineno-125-89" name="__codelineno-125-89" href="#__codelineno-125-89"></a>exporter, err := otlptracehttp.New(
<a id="__codelineno-125-90" name="__codelineno-125-90" href="#__codelineno-125-90"></a>
<a id="__codelineno-125-91" name="__codelineno-125-91" href="#__codelineno-125-91"></a>
<a id="__codelineno-125-92" name="__codelineno-125-92" href="#__codelineno-125-92"></a>
<a id="__codelineno-125-93" name="__codelineno-125-93" href="#__codelineno-125-93"></a>ctx,
<a id="__codelineno-125-94" name="__codelineno-125-94" href="#__codelineno-125-94"></a>
<a id="__codelineno-125-95" name="__codelineno-125-95" href="#__codelineno-125-95"></a>
<a id="__codelineno-125-96" name="__codelineno-125-96" href="#__codelineno-125-96"></a>
<a id="__codelineno-125-97" name="__codelineno-125-97" href="#__codelineno-125-97"></a>otlptracehttp.WithEndpoint(DT_API_HOST),
<a id="__codelineno-125-98" name="__codelineno-125-98" href="#__codelineno-125-98"></a>
<a id="__codelineno-125-99" name="__codelineno-125-99" href="#__codelineno-125-99"></a>
<a id="__codelineno-125-100" name="__codelineno-125-100" href="#__codelineno-125-100"></a>
<a id="__codelineno-125-101" name="__codelineno-125-101" href="#__codelineno-125-101"></a>otlptracehttp.WithURLPath(DT_API_BASE_PATH+&quot;/v1/traces&quot;),
<a id="__codelineno-125-102" name="__codelineno-125-102" href="#__codelineno-125-102"></a>
<a id="__codelineno-125-103" name="__codelineno-125-103" href="#__codelineno-125-103"></a>
<a id="__codelineno-125-104" name="__codelineno-125-104" href="#__codelineno-125-104"></a>
<a id="__codelineno-125-105" name="__codelineno-125-105" href="#__codelineno-125-105"></a>otlptracehttp.WithHeaders(authHeader),
<a id="__codelineno-125-106" name="__codelineno-125-106" href="#__codelineno-125-106"></a>
<a id="__codelineno-125-107" name="__codelineno-125-107" href="#__codelineno-125-107"></a>
<a id="__codelineno-125-108" name="__codelineno-125-108" href="#__codelineno-125-108"></a>
<a id="__codelineno-125-109" name="__codelineno-125-109" href="#__codelineno-125-109"></a>)
<a id="__codelineno-125-110" name="__codelineno-125-110" href="#__codelineno-125-110"></a>
<a id="__codelineno-125-111" name="__codelineno-125-111" href="#__codelineno-125-111"></a>
<a id="__codelineno-125-112" name="__codelineno-125-112" href="#__codelineno-125-112"></a>
<a id="__codelineno-125-113" name="__codelineno-125-113" href="#__codelineno-125-113"></a>if err != nil {
<a id="__codelineno-125-114" name="__codelineno-125-114" href="#__codelineno-125-114"></a>
<a id="__codelineno-125-115" name="__codelineno-125-115" href="#__codelineno-125-115"></a>
<a id="__codelineno-125-116" name="__codelineno-125-116" href="#__codelineno-125-116"></a>
<a id="__codelineno-125-117" name="__codelineno-125-117" href="#__codelineno-125-117"></a>log.Fatalf(&quot;Failed to create OTLP exporter: %v&quot;, err)
<a id="__codelineno-125-118" name="__codelineno-125-118" href="#__codelineno-125-118"></a>
<a id="__codelineno-125-119" name="__codelineno-125-119" href="#__codelineno-125-119"></a>
<a id="__codelineno-125-120" name="__codelineno-125-120" href="#__codelineno-125-120"></a>
<a id="__codelineno-125-121" name="__codelineno-125-121" href="#__codelineno-125-121"></a>}
<a id="__codelineno-125-122" name="__codelineno-125-122" href="#__codelineno-125-122"></a>
<a id="__codelineno-125-123" name="__codelineno-125-123" href="#__codelineno-125-123"></a>
<a id="__codelineno-125-124" name="__codelineno-125-124" href="#__codelineno-125-124"></a>
<a id="__codelineno-125-125" name="__codelineno-125-125" href="#__codelineno-125-125"></a>tp := sdktrace.NewTracerProvider(
<a id="__codelineno-125-126" name="__codelineno-125-126" href="#__codelineno-125-126"></a>
<a id="__codelineno-125-127" name="__codelineno-125-127" href="#__codelineno-125-127"></a>
<a id="__codelineno-125-128" name="__codelineno-125-128" href="#__codelineno-125-128"></a>
<a id="__codelineno-125-129" name="__codelineno-125-129" href="#__codelineno-125-129"></a>sdktrace.WithResource(res),
<a id="__codelineno-125-130" name="__codelineno-125-130" href="#__codelineno-125-130"></a>
<a id="__codelineno-125-131" name="__codelineno-125-131" href="#__codelineno-125-131"></a>
<a id="__codelineno-125-132" name="__codelineno-125-132" href="#__codelineno-125-132"></a>
<a id="__codelineno-125-133" name="__codelineno-125-133" href="#__codelineno-125-133"></a>sdktrace.WithSampler(sdktrace.AlwaysSample()),
<a id="__codelineno-125-134" name="__codelineno-125-134" href="#__codelineno-125-134"></a>
<a id="__codelineno-125-135" name="__codelineno-125-135" href="#__codelineno-125-135"></a>
<a id="__codelineno-125-136" name="__codelineno-125-136" href="#__codelineno-125-136"></a>
<a id="__codelineno-125-137" name="__codelineno-125-137" href="#__codelineno-125-137"></a>sdktrace.WithBatcher(exporter),
<a id="__codelineno-125-138" name="__codelineno-125-138" href="#__codelineno-125-138"></a>
<a id="__codelineno-125-139" name="__codelineno-125-139" href="#__codelineno-125-139"></a>
<a id="__codelineno-125-140" name="__codelineno-125-140" href="#__codelineno-125-140"></a>
<a id="__codelineno-125-141" name="__codelineno-125-141" href="#__codelineno-125-141"></a>)
<a id="__codelineno-125-142" name="__codelineno-125-142" href="#__codelineno-125-142"></a>
<a id="__codelineno-125-143" name="__codelineno-125-143" href="#__codelineno-125-143"></a>
<a id="__codelineno-125-144" name="__codelineno-125-144" href="#__codelineno-125-144"></a>
<a id="__codelineno-125-145" name="__codelineno-125-145" href="#__codelineno-125-145"></a>otel.SetTracerProvider(tp)
<a id="__codelineno-125-146" name="__codelineno-125-146" href="#__codelineno-125-146"></a>
<a id="__codelineno-125-147" name="__codelineno-125-147" href="#__codelineno-125-147"></a>
<a id="__codelineno-125-148" name="__codelineno-125-148" href="#__codelineno-125-148"></a>
<a id="__codelineno-125-149" name="__codelineno-125-149" href="#__codelineno-125-149"></a>otel.SetTextMapPropagator(propagation.NewCompositeTextMapPropagator(propagation.TraceContext{}, propagation.Baggage{}))
<a id="__codelineno-125-150" name="__codelineno-125-150" href="#__codelineno-125-150"></a>
<a id="__codelineno-125-151" name="__codelineno-125-151" href="#__codelineno-125-151"></a>
<a id="__codelineno-125-152" name="__codelineno-125-152" href="#__codelineno-125-152"></a>
<a id="__codelineno-125-153" name="__codelineno-125-153" href="#__codelineno-125-153"></a>// ===== METRIC SETUP =====
<a id="__codelineno-125-154" name="__codelineno-125-154" href="#__codelineno-125-154"></a>
<a id="__codelineno-125-155" name="__codelineno-125-155" href="#__codelineno-125-155"></a>
<a id="__codelineno-125-156" name="__codelineno-125-156" href="#__codelineno-125-156"></a>
<a id="__codelineno-125-157" name="__codelineno-125-157" href="#__codelineno-125-157"></a>var deltaTemporalitySelector = func(sdkmetric.InstrumentKind) metricdata.Temporality { return metricdata.DeltaTemporality }
<a id="__codelineno-125-158" name="__codelineno-125-158" href="#__codelineno-125-158"></a>
<a id="__codelineno-125-159" name="__codelineno-125-159" href="#__codelineno-125-159"></a>
<a id="__codelineno-125-160" name="__codelineno-125-160" href="#__codelineno-125-160"></a>
<a id="__codelineno-125-161" name="__codelineno-125-161" href="#__codelineno-125-161"></a>metricsExporter, err := otlpmetrichttp.New(
<a id="__codelineno-125-162" name="__codelineno-125-162" href="#__codelineno-125-162"></a>
<a id="__codelineno-125-163" name="__codelineno-125-163" href="#__codelineno-125-163"></a>
<a id="__codelineno-125-164" name="__codelineno-125-164" href="#__codelineno-125-164"></a>
<a id="__codelineno-125-165" name="__codelineno-125-165" href="#__codelineno-125-165"></a>ctx,
<a id="__codelineno-125-166" name="__codelineno-125-166" href="#__codelineno-125-166"></a>
<a id="__codelineno-125-167" name="__codelineno-125-167" href="#__codelineno-125-167"></a>
<a id="__codelineno-125-168" name="__codelineno-125-168" href="#__codelineno-125-168"></a>
<a id="__codelineno-125-169" name="__codelineno-125-169" href="#__codelineno-125-169"></a>otlpmetrichttp.WithEndpoint(DT_API_HOST),
<a id="__codelineno-125-170" name="__codelineno-125-170" href="#__codelineno-125-170"></a>
<a id="__codelineno-125-171" name="__codelineno-125-171" href="#__codelineno-125-171"></a>
<a id="__codelineno-125-172" name="__codelineno-125-172" href="#__codelineno-125-172"></a>
<a id="__codelineno-125-173" name="__codelineno-125-173" href="#__codelineno-125-173"></a>otlpmetrichttp.WithURLPath(DT_API_BASE_PATH+&quot;/v1/metrics&quot;),
<a id="__codelineno-125-174" name="__codelineno-125-174" href="#__codelineno-125-174"></a>
<a id="__codelineno-125-175" name="__codelineno-125-175" href="#__codelineno-125-175"></a>
<a id="__codelineno-125-176" name="__codelineno-125-176" href="#__codelineno-125-176"></a>
<a id="__codelineno-125-177" name="__codelineno-125-177" href="#__codelineno-125-177"></a>otlpmetrichttp.WithHeaders(authHeader),
<a id="__codelineno-125-178" name="__codelineno-125-178" href="#__codelineno-125-178"></a>
<a id="__codelineno-125-179" name="__codelineno-125-179" href="#__codelineno-125-179"></a>
<a id="__codelineno-125-180" name="__codelineno-125-180" href="#__codelineno-125-180"></a>
<a id="__codelineno-125-181" name="__codelineno-125-181" href="#__codelineno-125-181"></a>otlpmetrichttp.WithTemporalitySelector(deltaTemporalitySelector),
<a id="__codelineno-125-182" name="__codelineno-125-182" href="#__codelineno-125-182"></a>
<a id="__codelineno-125-183" name="__codelineno-125-183" href="#__codelineno-125-183"></a>
<a id="__codelineno-125-184" name="__codelineno-125-184" href="#__codelineno-125-184"></a>
<a id="__codelineno-125-185" name="__codelineno-125-185" href="#__codelineno-125-185"></a>)
<a id="__codelineno-125-186" name="__codelineno-125-186" href="#__codelineno-125-186"></a>
<a id="__codelineno-125-187" name="__codelineno-125-187" href="#__codelineno-125-187"></a>
<a id="__codelineno-125-188" name="__codelineno-125-188" href="#__codelineno-125-188"></a>
<a id="__codelineno-125-189" name="__codelineno-125-189" href="#__codelineno-125-189"></a>if err != nil {
<a id="__codelineno-125-190" name="__codelineno-125-190" href="#__codelineno-125-190"></a>
<a id="__codelineno-125-191" name="__codelineno-125-191" href="#__codelineno-125-191"></a>
<a id="__codelineno-125-192" name="__codelineno-125-192" href="#__codelineno-125-192"></a>
<a id="__codelineno-125-193" name="__codelineno-125-193" href="#__codelineno-125-193"></a>log.Fatalf(&quot;Failed to create OTLP exporter: %v&quot;, err)
<a id="__codelineno-125-194" name="__codelineno-125-194" href="#__codelineno-125-194"></a>
<a id="__codelineno-125-195" name="__codelineno-125-195" href="#__codelineno-125-195"></a>
<a id="__codelineno-125-196" name="__codelineno-125-196" href="#__codelineno-125-196"></a>
<a id="__codelineno-125-197" name="__codelineno-125-197" href="#__codelineno-125-197"></a>}
<a id="__codelineno-125-198" name="__codelineno-125-198" href="#__codelineno-125-198"></a>
<a id="__codelineno-125-199" name="__codelineno-125-199" href="#__codelineno-125-199"></a>
<a id="__codelineno-125-200" name="__codelineno-125-200" href="#__codelineno-125-200"></a>
<a id="__codelineno-125-201" name="__codelineno-125-201" href="#__codelineno-125-201"></a>mp := sdkmetric.NewMeterProvider(
<a id="__codelineno-125-202" name="__codelineno-125-202" href="#__codelineno-125-202"></a>
<a id="__codelineno-125-203" name="__codelineno-125-203" href="#__codelineno-125-203"></a>
<a id="__codelineno-125-204" name="__codelineno-125-204" href="#__codelineno-125-204"></a>
<a id="__codelineno-125-205" name="__codelineno-125-205" href="#__codelineno-125-205"></a>sdkmetric.WithResource(res),
<a id="__codelineno-125-206" name="__codelineno-125-206" href="#__codelineno-125-206"></a>
<a id="__codelineno-125-207" name="__codelineno-125-207" href="#__codelineno-125-207"></a>
<a id="__codelineno-125-208" name="__codelineno-125-208" href="#__codelineno-125-208"></a>
<a id="__codelineno-125-209" name="__codelineno-125-209" href="#__codelineno-125-209"></a>sdkmetric.WithReader(sdkmetric.NewPeriodicReader(metricsExporter, sdkmetric.WithInterval(2*time.Second))),
<a id="__codelineno-125-210" name="__codelineno-125-210" href="#__codelineno-125-210"></a>
<a id="__codelineno-125-211" name="__codelineno-125-211" href="#__codelineno-125-211"></a>
<a id="__codelineno-125-212" name="__codelineno-125-212" href="#__codelineno-125-212"></a>
<a id="__codelineno-125-213" name="__codelineno-125-213" href="#__codelineno-125-213"></a>)
<a id="__codelineno-125-214" name="__codelineno-125-214" href="#__codelineno-125-214"></a>
<a id="__codelineno-125-215" name="__codelineno-125-215" href="#__codelineno-125-215"></a>
<a id="__codelineno-125-216" name="__codelineno-125-216" href="#__codelineno-125-216"></a>
<a id="__codelineno-125-217" name="__codelineno-125-217" href="#__codelineno-125-217"></a>otel.SetMeterProvider(mp)
<a id="__codelineno-125-218" name="__codelineno-125-218" href="#__codelineno-125-218"></a>
<a id="__codelineno-125-219" name="__codelineno-125-219" href="#__codelineno-125-219"></a>
<a id="__codelineno-125-220" name="__codelineno-125-220" href="#__codelineno-125-220"></a>
<a id="__codelineno-125-221" name="__codelineno-125-221" href="#__codelineno-125-221"></a>// ===== LOG SETUP =====
<a id="__codelineno-125-222" name="__codelineno-125-222" href="#__codelineno-125-222"></a>
<a id="__codelineno-125-223" name="__codelineno-125-223" href="#__codelineno-125-223"></a>
<a id="__codelineno-125-224" name="__codelineno-125-224" href="#__codelineno-125-224"></a>
<a id="__codelineno-125-225" name="__codelineno-125-225" href="#__codelineno-125-225"></a>logExporter, err := otlploghttp.New(
<a id="__codelineno-125-226" name="__codelineno-125-226" href="#__codelineno-125-226"></a>
<a id="__codelineno-125-227" name="__codelineno-125-227" href="#__codelineno-125-227"></a>
<a id="__codelineno-125-228" name="__codelineno-125-228" href="#__codelineno-125-228"></a>
<a id="__codelineno-125-229" name="__codelineno-125-229" href="#__codelineno-125-229"></a>ctx,
<a id="__codelineno-125-230" name="__codelineno-125-230" href="#__codelineno-125-230"></a>
<a id="__codelineno-125-231" name="__codelineno-125-231" href="#__codelineno-125-231"></a>
<a id="__codelineno-125-232" name="__codelineno-125-232" href="#__codelineno-125-232"></a>
<a id="__codelineno-125-233" name="__codelineno-125-233" href="#__codelineno-125-233"></a>otlploghttp.WithEndpoint(DT_API_HOST),
<a id="__codelineno-125-234" name="__codelineno-125-234" href="#__codelineno-125-234"></a>
<a id="__codelineno-125-235" name="__codelineno-125-235" href="#__codelineno-125-235"></a>
<a id="__codelineno-125-236" name="__codelineno-125-236" href="#__codelineno-125-236"></a>
<a id="__codelineno-125-237" name="__codelineno-125-237" href="#__codelineno-125-237"></a>otlploghttp.WithURLPath(DT_API_BASE_PATH+&quot;/v1/logs&quot;),
<a id="__codelineno-125-238" name="__codelineno-125-238" href="#__codelineno-125-238"></a>
<a id="__codelineno-125-239" name="__codelineno-125-239" href="#__codelineno-125-239"></a>
<a id="__codelineno-125-240" name="__codelineno-125-240" href="#__codelineno-125-240"></a>
<a id="__codelineno-125-241" name="__codelineno-125-241" href="#__codelineno-125-241"></a>otlploghttp.WithHeaders(authHeader),
<a id="__codelineno-125-242" name="__codelineno-125-242" href="#__codelineno-125-242"></a>
<a id="__codelineno-125-243" name="__codelineno-125-243" href="#__codelineno-125-243"></a>
<a id="__codelineno-125-244" name="__codelineno-125-244" href="#__codelineno-125-244"></a>
<a id="__codelineno-125-245" name="__codelineno-125-245" href="#__codelineno-125-245"></a>)
<a id="__codelineno-125-246" name="__codelineno-125-246" href="#__codelineno-125-246"></a>
<a id="__codelineno-125-247" name="__codelineno-125-247" href="#__codelineno-125-247"></a>
<a id="__codelineno-125-248" name="__codelineno-125-248" href="#__codelineno-125-248"></a>
<a id="__codelineno-125-249" name="__codelineno-125-249" href="#__codelineno-125-249"></a>if err != nil {
<a id="__codelineno-125-250" name="__codelineno-125-250" href="#__codelineno-125-250"></a>
<a id="__codelineno-125-251" name="__codelineno-125-251" href="#__codelineno-125-251"></a>
<a id="__codelineno-125-252" name="__codelineno-125-252" href="#__codelineno-125-252"></a>
<a id="__codelineno-125-253" name="__codelineno-125-253" href="#__codelineno-125-253"></a>log.Fatalf(&quot;Failed to create OTLP exporter: %v&quot;, err)
<a id="__codelineno-125-254" name="__codelineno-125-254" href="#__codelineno-125-254"></a>
<a id="__codelineno-125-255" name="__codelineno-125-255" href="#__codelineno-125-255"></a>
<a id="__codelineno-125-256" name="__codelineno-125-256" href="#__codelineno-125-256"></a>
<a id="__codelineno-125-257" name="__codelineno-125-257" href="#__codelineno-125-257"></a>}
<a id="__codelineno-125-258" name="__codelineno-125-258" href="#__codelineno-125-258"></a>
<a id="__codelineno-125-259" name="__codelineno-125-259" href="#__codelineno-125-259"></a>
<a id="__codelineno-125-260" name="__codelineno-125-260" href="#__codelineno-125-260"></a>
<a id="__codelineno-125-261" name="__codelineno-125-261" href="#__codelineno-125-261"></a>lp := sdklog.NewLoggerProvider(
<a id="__codelineno-125-262" name="__codelineno-125-262" href="#__codelineno-125-262"></a>
<a id="__codelineno-125-263" name="__codelineno-125-263" href="#__codelineno-125-263"></a>
<a id="__codelineno-125-264" name="__codelineno-125-264" href="#__codelineno-125-264"></a>
<a id="__codelineno-125-265" name="__codelineno-125-265" href="#__codelineno-125-265"></a>sdklog.WithProcessor(sdklog.NewBatchProcessor(logExporter)),
<a id="__codelineno-125-266" name="__codelineno-125-266" href="#__codelineno-125-266"></a>
<a id="__codelineno-125-267" name="__codelineno-125-267" href="#__codelineno-125-267"></a>
<a id="__codelineno-125-268" name="__codelineno-125-268" href="#__codelineno-125-268"></a>
<a id="__codelineno-125-269" name="__codelineno-125-269" href="#__codelineno-125-269"></a>sdklog.WithResource(res),
<a id="__codelineno-125-270" name="__codelineno-125-270" href="#__codelineno-125-270"></a>
<a id="__codelineno-125-271" name="__codelineno-125-271" href="#__codelineno-125-271"></a>
<a id="__codelineno-125-272" name="__codelineno-125-272" href="#__codelineno-125-272"></a>
<a id="__codelineno-125-273" name="__codelineno-125-273" href="#__codelineno-125-273"></a>)
<a id="__codelineno-125-274" name="__codelineno-125-274" href="#__codelineno-125-274"></a>
<a id="__codelineno-125-275" name="__codelineno-125-275" href="#__codelineno-125-275"></a>
<a id="__codelineno-125-276" name="__codelineno-125-276" href="#__codelineno-125-276"></a>
<a id="__codelineno-125-277" name="__codelineno-125-277" href="#__codelineno-125-277"></a>global.SetLoggerProvider(lp)
<a id="__codelineno-125-278" name="__codelineno-125-278" href="#__codelineno-125-278"></a>
<a id="__codelineno-125-279" name="__codelineno-125-279" href="#__codelineno-125-279"></a>
<a id="__codelineno-125-280" name="__codelineno-125-280" href="#__codelineno-125-280"></a>
<a id="__codelineno-125-281" name="__codelineno-125-281" href="#__codelineno-125-281"></a>logger := otelslog.NewLogger(&quot;my-logger-scope&quot;, otelslog.WithLoggerProvider(lp))
<a id="__codelineno-125-282" name="__codelineno-125-282" href="#__codelineno-125-282"></a>
<a id="__codelineno-125-283" name="__codelineno-125-283" href="#__codelineno-125-283"></a>
<a id="__codelineno-125-284" name="__codelineno-125-284" href="#__codelineno-125-284"></a>
<a id="__codelineno-125-285" name="__codelineno-125-285" href="#__codelineno-125-285"></a>slog.SetDefault(logger) // here we are overwriting the sdtout to http logger exporter
<a id="__codelineno-125-286" name="__codelineno-125-286" href="#__codelineno-125-286"></a>
<a id="__codelineno-125-287" name="__codelineno-125-287" href="#__codelineno-125-287"></a>
<a id="__codelineno-125-288" name="__codelineno-125-288" href="#__codelineno-125-288"></a>
<a id="__codelineno-125-289" name="__codelineno-125-289" href="#__codelineno-125-289"></a>}
</code></pre></div>
4. Make sure to call <code>InitOpenTelemetry</code> as early as possible in your startup code to initialize OpenTelemetry.</p>
<h2 id="step-4-optional-automatically-instrument-your-application-optional">Step 4 optional Automatically instrument your application Optional<a class="headerlink" href="#step-4-optional-automatically-instrument-your-application-optional" title="Permanent link">&para;</a></h2>
<ol>
<li>Browse the <a href="https://opentelemetry.io/ecosystem/registry/?language=go&amp;component=instrumentation">OpenTelemetry registry√Ø¬ª¬ø</a> and pick the instrumentation libraries matching your application libraries.</li>
<li>Add the relevant packages to your import statements.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a>import (
<a id="__codelineno-126-2" name="__codelineno-126-2" href="#__codelineno-126-2"></a>
<a id="__codelineno-126-3" name="__codelineno-126-3" href="#__codelineno-126-3"></a>
<a id="__codelineno-126-4" name="__codelineno-126-4" href="#__codelineno-126-4"></a>
<a id="__codelineno-126-5" name="__codelineno-126-5" href="#__codelineno-126-5"></a>&quot;go.opentelemetry.io/[PACKAGE]&quot;
<a id="__codelineno-126-6" name="__codelineno-126-6" href="#__codelineno-126-6"></a>
<a id="__codelineno-126-7" name="__codelineno-126-7" href="#__codelineno-126-7"></a>
<a id="__codelineno-126-8" name="__codelineno-126-8" href="#__codelineno-126-8"></a>
<a id="__codelineno-126-9" name="__codelineno-126-9" href="#__codelineno-126-9"></a>)
</code></pre></div>
3. Run Go's <a href="https://go.dev/ref/mod#go-mod-tidy"><code>mod tiny</code> command√Ø¬ª¬ø</a> to install the dependencies.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a>go mod tidy
</code></pre></div>
4. Wrap your existing code with calls to the support libraries.</p>
<h3 id="example-for-nethttp">Example for <code>net/http</code><a class="headerlink" href="#example-for-nethttp" title="Permanent link">&para;</a></h3>
<ol>
<li>Install the <a href="https://pkg.go.dev/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp">instrumentation library for <code>net/http</code>√Ø¬ª¬ø</a>.</li>
<li>Add the package to your import statements.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>import (
<a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>
<a id="__codelineno-128-3" name="__codelineno-128-3" href="#__codelineno-128-3"></a>
<a id="__codelineno-128-4" name="__codelineno-128-4" href="#__codelineno-128-4"></a>
<a id="__codelineno-128-5" name="__codelineno-128-5" href="#__codelineno-128-5"></a>// other packages
<a id="__codelineno-128-6" name="__codelineno-128-6" href="#__codelineno-128-6"></a>
<a id="__codelineno-128-7" name="__codelineno-128-7" href="#__codelineno-128-7"></a>
<a id="__codelineno-128-8" name="__codelineno-128-8" href="#__codelineno-128-8"></a>
<a id="__codelineno-128-9" name="__codelineno-128-9" href="#__codelineno-128-9"></a>&quot;go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp&quot;
<a id="__codelineno-128-10" name="__codelineno-128-10" href="#__codelineno-128-10"></a>
<a id="__codelineno-128-11" name="__codelineno-128-11" href="#__codelineno-128-11"></a>
<a id="__codelineno-128-12" name="__codelineno-128-12" href="#__codelineno-128-12"></a>
<a id="__codelineno-128-13" name="__codelineno-128-13" href="#__codelineno-128-13"></a>)
</code></pre></div>
3. Wrap your HTTP handler function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a>handler := http.HandlerFunc(httpHandler)
<a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a>
<a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a>
<a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a>
<a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a>wrappedHandler := otelhttp.NewHandler(handler, &quot;my-span&quot;) //TODO Replace with the name of your span
<a id="__codelineno-129-6" name="__codelineno-129-6" href="#__codelineno-129-6"></a>
<a id="__codelineno-129-7" name="__codelineno-129-7" href="#__codelineno-129-7"></a>
<a id="__codelineno-129-8" name="__codelineno-129-8" href="#__codelineno-129-8"></a>
<a id="__codelineno-129-9" name="__codelineno-129-9" href="#__codelineno-129-9"></a>//Use the wrappedHandler with your handle
<a id="__codelineno-129-10" name="__codelineno-129-10" href="#__codelineno-129-10"></a>
<a id="__codelineno-129-11" name="__codelineno-129-11" href="#__codelineno-129-11"></a>
<a id="__codelineno-129-12" name="__codelineno-129-12" href="#__codelineno-129-12"></a>
<a id="__codelineno-129-13" name="__codelineno-129-13" href="#__codelineno-129-13"></a>http.Handle(&quot;/&quot;, wrappedHandler)
</code></pre></div>
<h2 id="step-5-manually-instrument-your-application">Step 5 Manually instrument your application<a class="headerlink" href="#step-5-manually-instrument-your-application" title="Permanent link">&para;</a></h2>
<h3 id="add-tracing_3">Add tracing<a class="headerlink" href="#add-tracing_3" title="Permanent link">&para;</a></h3>
<ol>
<li>You first need to get a tracer object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a>tracer := otel.Tracer(&quot;my-tracer&quot;)
</code></pre></div>
2. With <code>tracer</code>, you can now use a span builder to create and start new spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a>_, span := tracer.Start(r.Context(), &quot;Call to /myendpoint&quot;)
<a id="__codelineno-131-2" name="__codelineno-131-2" href="#__codelineno-131-2"></a>
<a id="__codelineno-131-3" name="__codelineno-131-3" href="#__codelineno-131-3"></a>
<a id="__codelineno-131-4" name="__codelineno-131-4" href="#__codelineno-131-4"></a>
<a id="__codelineno-131-5" name="__codelineno-131-5" href="#__codelineno-131-5"></a>defer span.End()
<a id="__codelineno-131-6" name="__codelineno-131-6" href="#__codelineno-131-6"></a>
<a id="__codelineno-131-7" name="__codelineno-131-7" href="#__codelineno-131-7"></a>
<a id="__codelineno-131-8" name="__codelineno-131-8" href="#__codelineno-131-8"></a>
<a id="__codelineno-131-9" name="__codelineno-131-9" href="#__codelineno-131-9"></a>span.SetAttributes(attribute.String(&quot;http.method&quot;, &quot;GET&quot;), attribute.String(&quot;net.protocol.version&quot;, &quot;1.1&quot;))
<a id="__codelineno-131-10" name="__codelineno-131-10" href="#__codelineno-131-10"></a>
<a id="__codelineno-131-11" name="__codelineno-131-11" href="#__codelineno-131-11"></a>
<a id="__codelineno-131-12" name="__codelineno-131-12" href="#__codelineno-131-12"></a>
<a id="__codelineno-131-13" name="__codelineno-131-13" href="#__codelineno-131-13"></a>// TODO your code goes here
</code></pre></div>
<p>In the code above, we:</p>
<ul>
<li>Create a new span and name it "Call to /myendpoint"</li>
<li>Schedule a deferred call to <code>End()</code>, to ensure the span is properly closed when the function returns</li>
<li>Add two attributes, following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
<li>Add a <code>TODO</code> in place of the eventual business logic</li>
</ul>
<h3 id="collect-metrics_3">Collect metrics<a class="headerlink" href="#collect-metrics_3" title="Permanent link">&para;</a></h3>
<ol>
<li>Obtain a meter object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>meter := otel.Meter(&quot;my-meter&quot;)
</code></pre></div>
2. With <code>meter</code>, we can now create individual instruments, such as a counter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>requestCounter, _ := meter.Int64Counter(&quot;request_counter&quot;)
</code></pre></div>
3. Now we can invoke the <code>Add()</code> method of <code>requestCounter</code> to record new values with the counter.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a>requestCounter.Add(context.Background(), 1)
</code></pre></div>
<h3 id="connect-logs_3">Connect logs<a class="headerlink" href="#connect-logs_3" title="Permanent link">&para;</a></h3>
<p>With OpenTelemetry logging initialized in <code>InitOpenTelemetry()</code> and set as default logger for <a href="https://pkg.go.dev/log/slog">slog√Ø¬ª¬ø</a>, we can now call any of slog's log functions (for example, <a href="https://pkg.go.dev/log/slog#Info"><code>Info()</code>√Ø¬ª¬ø</a>) to send our log information to Dynatrace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a>slog.Info(&quot;an info message&quot;)
<a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a>
<a id="__codelineno-135-3" name="__codelineno-135-3" href="#__codelineno-135-3"></a>
<a id="__codelineno-135-4" name="__codelineno-135-4" href="#__codelineno-135-4"></a>
<a id="__codelineno-135-5" name="__codelineno-135-5" href="#__codelineno-135-5"></a>slog.Debug(&quot;a debug message&quot;)
<a id="__codelineno-135-6" name="__codelineno-135-6" href="#__codelineno-135-6"></a>
<a id="__codelineno-135-7" name="__codelineno-135-7" href="#__codelineno-135-7"></a>
<a id="__codelineno-135-8" name="__codelineno-135-8" href="#__codelineno-135-8"></a>
<a id="__codelineno-135-9" name="__codelineno-135-9" href="#__codelineno-135-9"></a>slog.Error(&quot;an error&quot;)
</code></pre></div>
<h3 id="ensure-context-propagation-optional_3">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_3" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<h4 id="extracting-the-context-when-receiving-a-request_3">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_3" title="Permanent link">&para;</a></h4>
<p>In the following example, we assume that we have received a network call via the <a href="https://pkg.go.dev/net/http"><code>net/http</code>√Ø¬ª¬ø</a> library and its <a href="https://pkg.go.dev/net/http#Request"><code>Request</code>√Ø¬ª¬ø</a> type.</p>
<p>To obtain a handle to the original context (which was provided by the calling service), we pass the HTTP header object (<code>r.Header</code>) to the <code>Extract</code> function of the global propagator singleton, which instantiates that context and returns in <code>parentCtx</code>. This allows us to continue the previous trace with our own spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a>func httpHandler(w http.ResponseWriter, r *http.Request) {
<a id="__codelineno-136-2" name="__codelineno-136-2" href="#__codelineno-136-2"></a>
<a id="__codelineno-136-3" name="__codelineno-136-3" href="#__codelineno-136-3"></a>
<a id="__codelineno-136-4" name="__codelineno-136-4" href="#__codelineno-136-4"></a>
<a id="__codelineno-136-5" name="__codelineno-136-5" href="#__codelineno-136-5"></a>parentCtx := otel.GetTextMapPropagator().Extract(r.Context(), propagation.HeaderCarrier(r.Header))
<a id="__codelineno-136-6" name="__codelineno-136-6" href="#__codelineno-136-6"></a>
<a id="__codelineno-136-7" name="__codelineno-136-7" href="#__codelineno-136-7"></a>
<a id="__codelineno-136-8" name="__codelineno-136-8" href="#__codelineno-136-8"></a>
<a id="__codelineno-136-9" name="__codelineno-136-9" href="#__codelineno-136-9"></a>tracer := otel.Tracer(&quot;my-tracer&quot;)
<a id="__codelineno-136-10" name="__codelineno-136-10" href="#__codelineno-136-10"></a>
<a id="__codelineno-136-11" name="__codelineno-136-11" href="#__codelineno-136-11"></a>
<a id="__codelineno-136-12" name="__codelineno-136-12" href="#__codelineno-136-12"></a>
<a id="__codelineno-136-13" name="__codelineno-136-13" href="#__codelineno-136-13"></a>ctx, span := tracer.Start(
<a id="__codelineno-136-14" name="__codelineno-136-14" href="#__codelineno-136-14"></a>
<a id="__codelineno-136-15" name="__codelineno-136-15" href="#__codelineno-136-15"></a>
<a id="__codelineno-136-16" name="__codelineno-136-16" href="#__codelineno-136-16"></a>
<a id="__codelineno-136-17" name="__codelineno-136-17" href="#__codelineno-136-17"></a>parentCtx,
<a id="__codelineno-136-18" name="__codelineno-136-18" href="#__codelineno-136-18"></a>
<a id="__codelineno-136-19" name="__codelineno-136-19" href="#__codelineno-136-19"></a>
<a id="__codelineno-136-20" name="__codelineno-136-20" href="#__codelineno-136-20"></a>
<a id="__codelineno-136-21" name="__codelineno-136-21" href="#__codelineno-136-21"></a>&quot;manual-server&quot;, //TODO Replace with the name of your span
<a id="__codelineno-136-22" name="__codelineno-136-22" href="#__codelineno-136-22"></a>
<a id="__codelineno-136-23" name="__codelineno-136-23" href="#__codelineno-136-23"></a>
<a id="__codelineno-136-24" name="__codelineno-136-24" href="#__codelineno-136-24"></a>
<a id="__codelineno-136-25" name="__codelineno-136-25" href="#__codelineno-136-25"></a>trace.WithAttributes(
<a id="__codelineno-136-26" name="__codelineno-136-26" href="#__codelineno-136-26"></a>
<a id="__codelineno-136-27" name="__codelineno-136-27" href="#__codelineno-136-27"></a>
<a id="__codelineno-136-28" name="__codelineno-136-28" href="#__codelineno-136-28"></a>
<a id="__codelineno-136-29" name="__codelineno-136-29" href="#__codelineno-136-29"></a>attribute.String(&quot;my-key-1&quot;, &quot;my-value-1&quot;), //TODO Add attributes
<a id="__codelineno-136-30" name="__codelineno-136-30" href="#__codelineno-136-30"></a>
<a id="__codelineno-136-31" name="__codelineno-136-31" href="#__codelineno-136-31"></a>
<a id="__codelineno-136-32" name="__codelineno-136-32" href="#__codelineno-136-32"></a>
<a id="__codelineno-136-33" name="__codelineno-136-33" href="#__codelineno-136-33"></a>),
<a id="__codelineno-136-34" name="__codelineno-136-34" href="#__codelineno-136-34"></a>
<a id="__codelineno-136-35" name="__codelineno-136-35" href="#__codelineno-136-35"></a>
<a id="__codelineno-136-36" name="__codelineno-136-36" href="#__codelineno-136-36"></a>
<a id="__codelineno-136-37" name="__codelineno-136-37" href="#__codelineno-136-37"></a>)
<a id="__codelineno-136-38" name="__codelineno-136-38" href="#__codelineno-136-38"></a>
<a id="__codelineno-136-39" name="__codelineno-136-39" href="#__codelineno-136-39"></a>
<a id="__codelineno-136-40" name="__codelineno-136-40" href="#__codelineno-136-40"></a>
<a id="__codelineno-136-41" name="__codelineno-136-41" href="#__codelineno-136-41"></a>defer span.End()
<a id="__codelineno-136-42" name="__codelineno-136-42" href="#__codelineno-136-42"></a>
<a id="__codelineno-136-43" name="__codelineno-136-43" href="#__codelineno-136-43"></a>
<a id="__codelineno-136-44" name="__codelineno-136-44" href="#__codelineno-136-44"></a>
<a id="__codelineno-136-45" name="__codelineno-136-45" href="#__codelineno-136-45"></a>//TODO your code goes here
<a id="__codelineno-136-46" name="__codelineno-136-46" href="#__codelineno-136-46"></a>
<a id="__codelineno-136-47" name="__codelineno-136-47" href="#__codelineno-136-47"></a>
<a id="__codelineno-136-48" name="__codelineno-136-48" href="#__codelineno-136-48"></a>
<a id="__codelineno-136-49" name="__codelineno-136-49" href="#__codelineno-136-49"></a>}
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_3">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_3" title="Permanent link">&para;</a></h4>
<p>In the following example, we set up a new instance of <a href="https://pkg.go.dev/net/http#Request"><code>Request</code>√Ø¬ª¬ø</a> and pass the object to the <code>Inject</code> call of the global propagator singleton. This adds the necessary HTTP headers to the request object, which we eventually pass to <code>Do</code> to execute the network request.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-137-1" name="__codelineno-137-1" href="#__codelineno-137-1"></a>client := http.Client{}
<a id="__codelineno-137-2" name="__codelineno-137-2" href="#__codelineno-137-2"></a>
<a id="__codelineno-137-3" name="__codelineno-137-3" href="#__codelineno-137-3"></a>
<a id="__codelineno-137-4" name="__codelineno-137-4" href="#__codelineno-137-4"></a>
<a id="__codelineno-137-5" name="__codelineno-137-5" href="#__codelineno-137-5"></a>req, err := http.NewRequest(&quot;&lt;method&gt;&quot;, &quot;&lt;url&gt;&quot;, &lt;body&gt;)
<a id="__codelineno-137-6" name="__codelineno-137-6" href="#__codelineno-137-6"></a>
<a id="__codelineno-137-7" name="__codelineno-137-7" href="#__codelineno-137-7"></a>
<a id="__codelineno-137-8" name="__codelineno-137-8" href="#__codelineno-137-8"></a>
<a id="__codelineno-137-9" name="__codelineno-137-9" href="#__codelineno-137-9"></a>if err != nil {
<a id="__codelineno-137-10" name="__codelineno-137-10" href="#__codelineno-137-10"></a>
<a id="__codelineno-137-11" name="__codelineno-137-11" href="#__codelineno-137-11"></a>
<a id="__codelineno-137-12" name="__codelineno-137-12" href="#__codelineno-137-12"></a>
<a id="__codelineno-137-13" name="__codelineno-137-13" href="#__codelineno-137-13"></a>// TODO handle error
<a id="__codelineno-137-14" name="__codelineno-137-14" href="#__codelineno-137-14"></a>
<a id="__codelineno-137-15" name="__codelineno-137-15" href="#__codelineno-137-15"></a>
<a id="__codelineno-137-16" name="__codelineno-137-16" href="#__codelineno-137-16"></a>
<a id="__codelineno-137-17" name="__codelineno-137-17" href="#__codelineno-137-17"></a>}
<a id="__codelineno-137-18" name="__codelineno-137-18" href="#__codelineno-137-18"></a>
<a id="__codelineno-137-19" name="__codelineno-137-19" href="#__codelineno-137-19"></a>
<a id="__codelineno-137-20" name="__codelineno-137-20" href="#__codelineno-137-20"></a>
<a id="__codelineno-137-21" name="__codelineno-137-21" href="#__codelineno-137-21"></a>//Method to inject the current context in the request headers
<a id="__codelineno-137-22" name="__codelineno-137-22" href="#__codelineno-137-22"></a>
<a id="__codelineno-137-23" name="__codelineno-137-23" href="#__codelineno-137-23"></a>
<a id="__codelineno-137-24" name="__codelineno-137-24" href="#__codelineno-137-24"></a>
<a id="__codelineno-137-25" name="__codelineno-137-25" href="#__codelineno-137-25"></a>otel.GetTextMapPropagator().Inject(ctx, propagation.HeaderCarrier(req.Header))
<a id="__codelineno-137-26" name="__codelineno-137-26" href="#__codelineno-137-26"></a>
<a id="__codelineno-137-27" name="__codelineno-137-27" href="#__codelineno-137-27"></a>
<a id="__codelineno-137-28" name="__codelineno-137-28" href="#__codelineno-137-28"></a>
<a id="__codelineno-137-29" name="__codelineno-137-29" href="#__codelineno-137-29"></a>client.Do(req) // Your call goes here
</code></pre></div>
<h2 id="step-6-configure-data-capture-to-meet-privacy-requirements-optional">Step 6 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-6-configure-data-capture-to-meet-privacy-requirements-optional" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-7-verify-data-ingestion-into-dynatrace">Step 7 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-7-verify-data-ingestion-into-dynatrace" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_19">Related topics<a class="headerlink" href="#related-topics_19" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-javamd">Source: java.md<a class="headerlink" href="#source-javamd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Java application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/java
scraped: 2026-02-15T09:06:32.098195</p>
<hr />
<h1 id="instrument-your-java-application-with-opentelemetry">Instrument your Java application with OpenTelemetry<a class="headerlink" href="#instrument-your-java-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-java-application-with-opentelemetry_1">Instrument your Java application with OpenTelemetry<a class="headerlink" href="#instrument-your-java-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Apr 18, 2023</li>
</ul>
<p>These walkthroughs show how to add observability to your Java application using the OpenTelemetry Java libraries and tools.</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/walkthroughs/java/java-auto" title="Learn how to instrument your Java application using OpenTelemetry and Dynatrace.">Automatically instrument your Java application with OpenTelemetry</a></li>
<li><a href="/docs/ingest-from/opentelemetry/walkthroughs/java/java-manual" title="Learn how to instrument your Java application using OpenTelemetry and Dynatrace.">Manually instrument your Java application with OpenTelemetry</a></li>
</ul>
<p>The following features are currently supported by OpenTelemetry Java.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_20">Related topics<a class="headerlink" href="#related-topics_20" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-nodejsmd">Source: nodejs.md<a class="headerlink" href="#source-nodejsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your JavaScript application on Node.js with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/nodejs
scraped: 2026-02-16T21:25:31.878751</p>
<hr />
<h1 id="instrument-your-javascript-application-on-nodejs-with-opentelemetry">Instrument your JavaScript application on Node.js with OpenTelemetry<a class="headerlink" href="#instrument-your-javascript-application-on-nodejs-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-javascript-application-on-nodejs-with-opentelemetry_1">Instrument your JavaScript application on Node.js with OpenTelemetry<a class="headerlink" href="#instrument-your-javascript-application-on-nodejs-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Updated on Nov 14, 2023</li>
</ul>
<p>This walkthrough shows how to add observability to your JavaScript application using the OpenTelemetry JavaScript libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>No</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_18">Prerequisites<a class="headerlink" href="#prerequisites_18" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_4">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_4" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_4">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_4" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_4">Get API access token<a class="headerlink" href="#get-api-access-token_4" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-initialize-opentelemetry">Step 2 Initialize OpenTelemetry<a class="headerlink" href="#step-2-initialize-opentelemetry" title="Permanent link">&para;</a></h2>
<ol>
<li>Run the following <code>npm</code> command to install the necessary libraries and dependencies.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-138-1" name="__codelineno-138-1" href="#__codelineno-138-1"></a>npm install \
<a id="__codelineno-138-2" name="__codelineno-138-2" href="#__codelineno-138-2"></a>
<a id="__codelineno-138-3" name="__codelineno-138-3" href="#__codelineno-138-3"></a>
<a id="__codelineno-138-4" name="__codelineno-138-4" href="#__codelineno-138-4"></a>
<a id="__codelineno-138-5" name="__codelineno-138-5" href="#__codelineno-138-5"></a>@opentelemetry/api \
<a id="__codelineno-138-6" name="__codelineno-138-6" href="#__codelineno-138-6"></a>
<a id="__codelineno-138-7" name="__codelineno-138-7" href="#__codelineno-138-7"></a>
<a id="__codelineno-138-8" name="__codelineno-138-8" href="#__codelineno-138-8"></a>
<a id="__codelineno-138-9" name="__codelineno-138-9" href="#__codelineno-138-9"></a>@opentelemetry/exporter-metrics-otlp-proto \
<a id="__codelineno-138-10" name="__codelineno-138-10" href="#__codelineno-138-10"></a>
<a id="__codelineno-138-11" name="__codelineno-138-11" href="#__codelineno-138-11"></a>
<a id="__codelineno-138-12" name="__codelineno-138-12" href="#__codelineno-138-12"></a>
<a id="__codelineno-138-13" name="__codelineno-138-13" href="#__codelineno-138-13"></a>@opentelemetry/exporter-trace-otlp-proto \
<a id="__codelineno-138-14" name="__codelineno-138-14" href="#__codelineno-138-14"></a>
<a id="__codelineno-138-15" name="__codelineno-138-15" href="#__codelineno-138-15"></a>
<a id="__codelineno-138-16" name="__codelineno-138-16" href="#__codelineno-138-16"></a>
<a id="__codelineno-138-17" name="__codelineno-138-17" href="#__codelineno-138-17"></a>@opentelemetry/instrumentation \
<a id="__codelineno-138-18" name="__codelineno-138-18" href="#__codelineno-138-18"></a>
<a id="__codelineno-138-19" name="__codelineno-138-19" href="#__codelineno-138-19"></a>
<a id="__codelineno-138-20" name="__codelineno-138-20" href="#__codelineno-138-20"></a>
<a id="__codelineno-138-21" name="__codelineno-138-21" href="#__codelineno-138-21"></a>@opentelemetry/resources \
<a id="__codelineno-138-22" name="__codelineno-138-22" href="#__codelineno-138-22"></a>
<a id="__codelineno-138-23" name="__codelineno-138-23" href="#__codelineno-138-23"></a>
<a id="__codelineno-138-24" name="__codelineno-138-24" href="#__codelineno-138-24"></a>
<a id="__codelineno-138-25" name="__codelineno-138-25" href="#__codelineno-138-25"></a>@opentelemetry/sdk-metrics \
<a id="__codelineno-138-26" name="__codelineno-138-26" href="#__codelineno-138-26"></a>
<a id="__codelineno-138-27" name="__codelineno-138-27" href="#__codelineno-138-27"></a>
<a id="__codelineno-138-28" name="__codelineno-138-28" href="#__codelineno-138-28"></a>
<a id="__codelineno-138-29" name="__codelineno-138-29" href="#__codelineno-138-29"></a>@opentelemetry/sdk-trace-node \
<a id="__codelineno-138-30" name="__codelineno-138-30" href="#__codelineno-138-30"></a>
<a id="__codelineno-138-31" name="__codelineno-138-31" href="#__codelineno-138-31"></a>
<a id="__codelineno-138-32" name="__codelineno-138-32" href="#__codelineno-138-32"></a>
<a id="__codelineno-138-33" name="__codelineno-138-33" href="#__codelineno-138-33"></a>@opentelemetry/semantic-conventions
</code></pre></div>
<p>Depending on the libraries your application is using, there may be also additional instrumentation support libraries that you want to add to the dependencies. A list of support libraries can be found <a href="https://www.npmjs.com/search?q=%40opentelemetry%2Finstrumentation">here√Ø¬ª¬ø</a>. Common examples would be <a href="https://www.npmjs.com/package/@opentelemetry/instrumentation-http">@opentelemetry/instrumentation-http√Ø¬ª¬ø</a> and <a href="https://www.npmjs.com/package/@opentelemetry/instrumentation-net">@opentelemetry/instrumentation-net√Ø¬ª¬ø</a> for the HTTP and network libraries.
2. Create a file named <code>otel.js</code> in your application directory and save the following content.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-139-1" name="__codelineno-139-1" href="#__codelineno-139-1"></a>const opentelemetry = require(&quot;@opentelemetry/api&quot;);
<a id="__codelineno-139-2" name="__codelineno-139-2" href="#__codelineno-139-2"></a>
<a id="__codelineno-139-3" name="__codelineno-139-3" href="#__codelineno-139-3"></a>
<a id="__codelineno-139-4" name="__codelineno-139-4" href="#__codelineno-139-4"></a>
<a id="__codelineno-139-5" name="__codelineno-139-5" href="#__codelineno-139-5"></a>const { resourceFromAttributes, emptyResource, defaultResource } = require(&quot;@opentelemetry/resources&quot;);
<a id="__codelineno-139-6" name="__codelineno-139-6" href="#__codelineno-139-6"></a>
<a id="__codelineno-139-7" name="__codelineno-139-7" href="#__codelineno-139-7"></a>
<a id="__codelineno-139-8" name="__codelineno-139-8" href="#__codelineno-139-8"></a>
<a id="__codelineno-139-9" name="__codelineno-139-9" href="#__codelineno-139-9"></a>const { ATTR_SERVICE_NAME, ATTR_SERVICE_VERSION } = require(&quot;@opentelemetry/semantic-conventions&quot;);
<a id="__codelineno-139-10" name="__codelineno-139-10" href="#__codelineno-139-10"></a>
<a id="__codelineno-139-11" name="__codelineno-139-11" href="#__codelineno-139-11"></a>
<a id="__codelineno-139-12" name="__codelineno-139-12" href="#__codelineno-139-12"></a>
<a id="__codelineno-139-13" name="__codelineno-139-13" href="#__codelineno-139-13"></a>const { NodeTracerProvider } = require(&quot;@opentelemetry/sdk-trace-node&quot;);
<a id="__codelineno-139-14" name="__codelineno-139-14" href="#__codelineno-139-14"></a>
<a id="__codelineno-139-15" name="__codelineno-139-15" href="#__codelineno-139-15"></a>
<a id="__codelineno-139-16" name="__codelineno-139-16" href="#__codelineno-139-16"></a>
<a id="__codelineno-139-17" name="__codelineno-139-17" href="#__codelineno-139-17"></a>const { registerInstrumentations } = require(&quot;@opentelemetry/instrumentation&quot;);
<a id="__codelineno-139-18" name="__codelineno-139-18" href="#__codelineno-139-18"></a>
<a id="__codelineno-139-19" name="__codelineno-139-19" href="#__codelineno-139-19"></a>
<a id="__codelineno-139-20" name="__codelineno-139-20" href="#__codelineno-139-20"></a>
<a id="__codelineno-139-21" name="__codelineno-139-21" href="#__codelineno-139-21"></a>const { BatchSpanProcessor } = require(&quot;@opentelemetry/sdk-trace-base&quot;);
<a id="__codelineno-139-22" name="__codelineno-139-22" href="#__codelineno-139-22"></a>
<a id="__codelineno-139-23" name="__codelineno-139-23" href="#__codelineno-139-23"></a>
<a id="__codelineno-139-24" name="__codelineno-139-24" href="#__codelineno-139-24"></a>
<a id="__codelineno-139-25" name="__codelineno-139-25" href="#__codelineno-139-25"></a>const { OTLPTraceExporter } = require(&quot;@opentelemetry/exporter-trace-otlp-proto&quot;);
<a id="__codelineno-139-26" name="__codelineno-139-26" href="#__codelineno-139-26"></a>
<a id="__codelineno-139-27" name="__codelineno-139-27" href="#__codelineno-139-27"></a>
<a id="__codelineno-139-28" name="__codelineno-139-28" href="#__codelineno-139-28"></a>
<a id="__codelineno-139-29" name="__codelineno-139-29" href="#__codelineno-139-29"></a>const { OTLPMetricExporter } = require(&quot;@opentelemetry/exporter-metrics-otlp-proto&quot;);
<a id="__codelineno-139-30" name="__codelineno-139-30" href="#__codelineno-139-30"></a>
<a id="__codelineno-139-31" name="__codelineno-139-31" href="#__codelineno-139-31"></a>
<a id="__codelineno-139-32" name="__codelineno-139-32" href="#__codelineno-139-32"></a>
<a id="__codelineno-139-33" name="__codelineno-139-33" href="#__codelineno-139-33"></a>const { MeterProvider, PeriodicExportingMetricReader, AggregationTemporality } = require(&#39;@opentelemetry/sdk-metrics&#39;);
<a id="__codelineno-139-34" name="__codelineno-139-34" href="#__codelineno-139-34"></a>
<a id="__codelineno-139-35" name="__codelineno-139-35" href="#__codelineno-139-35"></a>
<a id="__codelineno-139-36" name="__codelineno-139-36" href="#__codelineno-139-36"></a>
<a id="__codelineno-139-37" name="__codelineno-139-37" href="#__codelineno-139-37"></a>const DT_API_URL = &#39;&#39;; // TODO: Provide your SaaS/Managed URL here
<a id="__codelineno-139-38" name="__codelineno-139-38" href="#__codelineno-139-38"></a>
<a id="__codelineno-139-39" name="__codelineno-139-39" href="#__codelineno-139-39"></a>
<a id="__codelineno-139-40" name="__codelineno-139-40" href="#__codelineno-139-40"></a>
<a id="__codelineno-139-41" name="__codelineno-139-41" href="#__codelineno-139-41"></a>const DT_API_TOKEN = &#39;&#39;; // TODO: Provide the OpenTelemetry-scoped access token here
<a id="__codelineno-139-42" name="__codelineno-139-42" href="#__codelineno-139-42"></a>
<a id="__codelineno-139-43" name="__codelineno-139-43" href="#__codelineno-139-43"></a>
<a id="__codelineno-139-44" name="__codelineno-139-44" href="#__codelineno-139-44"></a>
<a id="__codelineno-139-45" name="__codelineno-139-45" href="#__codelineno-139-45"></a>// ===== GENERAL SETUP =====
<a id="__codelineno-139-46" name="__codelineno-139-46" href="#__codelineno-139-46"></a>
<a id="__codelineno-139-47" name="__codelineno-139-47" href="#__codelineno-139-47"></a>
<a id="__codelineno-139-48" name="__codelineno-139-48" href="#__codelineno-139-48"></a>
<a id="__codelineno-139-49" name="__codelineno-139-49" href="#__codelineno-139-49"></a>registerInstrumentations({
<a id="__codelineno-139-50" name="__codelineno-139-50" href="#__codelineno-139-50"></a>
<a id="__codelineno-139-51" name="__codelineno-139-51" href="#__codelineno-139-51"></a>
<a id="__codelineno-139-52" name="__codelineno-139-52" href="#__codelineno-139-52"></a>
<a id="__codelineno-139-53" name="__codelineno-139-53" href="#__codelineno-139-53"></a>instrumentations: [ /* TODO Register your auto-instrumentation libraries here */ ],
<a id="__codelineno-139-54" name="__codelineno-139-54" href="#__codelineno-139-54"></a>
<a id="__codelineno-139-55" name="__codelineno-139-55" href="#__codelineno-139-55"></a>
<a id="__codelineno-139-56" name="__codelineno-139-56" href="#__codelineno-139-56"></a>
<a id="__codelineno-139-57" name="__codelineno-139-57" href="#__codelineno-139-57"></a>});
<a id="__codelineno-139-58" name="__codelineno-139-58" href="#__codelineno-139-58"></a>
<a id="__codelineno-139-59" name="__codelineno-139-59" href="#__codelineno-139-59"></a>
<a id="__codelineno-139-60" name="__codelineno-139-60" href="#__codelineno-139-60"></a>
<a id="__codelineno-139-61" name="__codelineno-139-61" href="#__codelineno-139-61"></a>const fs = require(&quot;fs&quot;);
<a id="__codelineno-139-62" name="__codelineno-139-62" href="#__codelineno-139-62"></a>
<a id="__codelineno-139-63" name="__codelineno-139-63" href="#__codelineno-139-63"></a>
<a id="__codelineno-139-64" name="__codelineno-139-64" href="#__codelineno-139-64"></a>
<a id="__codelineno-139-65" name="__codelineno-139-65" href="#__codelineno-139-65"></a>let dtmetadata = emptyResource();
<a id="__codelineno-139-66" name="__codelineno-139-66" href="#__codelineno-139-66"></a>
<a id="__codelineno-139-67" name="__codelineno-139-67" href="#__codelineno-139-67"></a>
<a id="__codelineno-139-68" name="__codelineno-139-68" href="#__codelineno-139-68"></a>
<a id="__codelineno-139-69" name="__codelineno-139-69" href="#__codelineno-139-69"></a>for (let name of [&#39;dt_metadata_e617c525669e072eebe3d0f08212e8f2.json&#39;, &#39;/var/lib/dynatrace/enrichment/dt_metadata.json&#39;, &#39;/var/lib/dynatrace/enrichment/dt_host_metadata.json&#39;]) {
<a id="__codelineno-139-70" name="__codelineno-139-70" href="#__codelineno-139-70"></a>
<a id="__codelineno-139-71" name="__codelineno-139-71" href="#__codelineno-139-71"></a>
<a id="__codelineno-139-72" name="__codelineno-139-72" href="#__codelineno-139-72"></a>
<a id="__codelineno-139-73" name="__codelineno-139-73" href="#__codelineno-139-73"></a>try {
<a id="__codelineno-139-74" name="__codelineno-139-74" href="#__codelineno-139-74"></a>
<a id="__codelineno-139-75" name="__codelineno-139-75" href="#__codelineno-139-75"></a>
<a id="__codelineno-139-76" name="__codelineno-139-76" href="#__codelineno-139-76"></a>
<a id="__codelineno-139-77" name="__codelineno-139-77" href="#__codelineno-139-77"></a>dtmetadata = dtmetadata.merge(
<a id="__codelineno-139-78" name="__codelineno-139-78" href="#__codelineno-139-78"></a>
<a id="__codelineno-139-79" name="__codelineno-139-79" href="#__codelineno-139-79"></a>
<a id="__codelineno-139-80" name="__codelineno-139-80" href="#__codelineno-139-80"></a>
<a id="__codelineno-139-81" name="__codelineno-139-81" href="#__codelineno-139-81"></a>resourceFromAttributes(JSON.parse(fs.readFileSync(name.startsWith(&quot;/var&quot;) ?
<a id="__codelineno-139-82" name="__codelineno-139-82" href="#__codelineno-139-82"></a>
<a id="__codelineno-139-83" name="__codelineno-139-83" href="#__codelineno-139-83"></a>
<a id="__codelineno-139-84" name="__codelineno-139-84" href="#__codelineno-139-84"></a>
<a id="__codelineno-139-85" name="__codelineno-139-85" href="#__codelineno-139-85"></a>name : fs.readFileSync(name).toString(&#39;utf-8&#39;).trim()).toString(&#39;utf-8&#39;))));
<a id="__codelineno-139-86" name="__codelineno-139-86" href="#__codelineno-139-86"></a>
<a id="__codelineno-139-87" name="__codelineno-139-87" href="#__codelineno-139-87"></a>
<a id="__codelineno-139-88" name="__codelineno-139-88" href="#__codelineno-139-88"></a>
<a id="__codelineno-139-89" name="__codelineno-139-89" href="#__codelineno-139-89"></a>break
<a id="__codelineno-139-90" name="__codelineno-139-90" href="#__codelineno-139-90"></a>
<a id="__codelineno-139-91" name="__codelineno-139-91" href="#__codelineno-139-91"></a>
<a id="__codelineno-139-92" name="__codelineno-139-92" href="#__codelineno-139-92"></a>
<a id="__codelineno-139-93" name="__codelineno-139-93" href="#__codelineno-139-93"></a>} catch { }
<a id="__codelineno-139-94" name="__codelineno-139-94" href="#__codelineno-139-94"></a>
<a id="__codelineno-139-95" name="__codelineno-139-95" href="#__codelineno-139-95"></a>
<a id="__codelineno-139-96" name="__codelineno-139-96" href="#__codelineno-139-96"></a>
<a id="__codelineno-139-97" name="__codelineno-139-97" href="#__codelineno-139-97"></a>}
<a id="__codelineno-139-98" name="__codelineno-139-98" href="#__codelineno-139-98"></a>
<a id="__codelineno-139-99" name="__codelineno-139-99" href="#__codelineno-139-99"></a>
<a id="__codelineno-139-100" name="__codelineno-139-100" href="#__codelineno-139-100"></a>
<a id="__codelineno-139-101" name="__codelineno-139-101" href="#__codelineno-139-101"></a>const resource =
<a id="__codelineno-139-102" name="__codelineno-139-102" href="#__codelineno-139-102"></a>
<a id="__codelineno-139-103" name="__codelineno-139-103" href="#__codelineno-139-103"></a>
<a id="__codelineno-139-104" name="__codelineno-139-104" href="#__codelineno-139-104"></a>
<a id="__codelineno-139-105" name="__codelineno-139-105" href="#__codelineno-139-105"></a>defaultResource().merge(
<a id="__codelineno-139-106" name="__codelineno-139-106" href="#__codelineno-139-106"></a>
<a id="__codelineno-139-107" name="__codelineno-139-107" href="#__codelineno-139-107"></a>
<a id="__codelineno-139-108" name="__codelineno-139-108" href="#__codelineno-139-108"></a>
<a id="__codelineno-139-109" name="__codelineno-139-109" href="#__codelineno-139-109"></a>resourceFromAttributes({
<a id="__codelineno-139-110" name="__codelineno-139-110" href="#__codelineno-139-110"></a>
<a id="__codelineno-139-111" name="__codelineno-139-111" href="#__codelineno-139-111"></a>
<a id="__codelineno-139-112" name="__codelineno-139-112" href="#__codelineno-139-112"></a>
<a id="__codelineno-139-113" name="__codelineno-139-113" href="#__codelineno-139-113"></a>[ATTR_SERVICE_NAME]: &quot;js-agent&quot;,
<a id="__codelineno-139-114" name="__codelineno-139-114" href="#__codelineno-139-114"></a>
<a id="__codelineno-139-115" name="__codelineno-139-115" href="#__codelineno-139-115"></a>
<a id="__codelineno-139-116" name="__codelineno-139-116" href="#__codelineno-139-116"></a>
<a id="__codelineno-139-117" name="__codelineno-139-117" href="#__codelineno-139-117"></a>[ATTR_SERVICE_VERSION]: &quot;0.1.0&quot;,
<a id="__codelineno-139-118" name="__codelineno-139-118" href="#__codelineno-139-118"></a>
<a id="__codelineno-139-119" name="__codelineno-139-119" href="#__codelineno-139-119"></a>
<a id="__codelineno-139-120" name="__codelineno-139-120" href="#__codelineno-139-120"></a>
<a id="__codelineno-139-121" name="__codelineno-139-121" href="#__codelineno-139-121"></a>})
<a id="__codelineno-139-122" name="__codelineno-139-122" href="#__codelineno-139-122"></a>
<a id="__codelineno-139-123" name="__codelineno-139-123" href="#__codelineno-139-123"></a>
<a id="__codelineno-139-124" name="__codelineno-139-124" href="#__codelineno-139-124"></a>
<a id="__codelineno-139-125" name="__codelineno-139-125" href="#__codelineno-139-125"></a>).merge(dtmetadata);
<a id="__codelineno-139-126" name="__codelineno-139-126" href="#__codelineno-139-126"></a>
<a id="__codelineno-139-127" name="__codelineno-139-127" href="#__codelineno-139-127"></a>
<a id="__codelineno-139-128" name="__codelineno-139-128" href="#__codelineno-139-128"></a>
<a id="__codelineno-139-129" name="__codelineno-139-129" href="#__codelineno-139-129"></a>// ===== TRACING SETUP =====
<a id="__codelineno-139-130" name="__codelineno-139-130" href="#__codelineno-139-130"></a>
<a id="__codelineno-139-131" name="__codelineno-139-131" href="#__codelineno-139-131"></a>
<a id="__codelineno-139-132" name="__codelineno-139-132" href="#__codelineno-139-132"></a>
<a id="__codelineno-139-133" name="__codelineno-139-133" href="#__codelineno-139-133"></a>const exporter = new OTLPTraceExporter({
<a id="__codelineno-139-134" name="__codelineno-139-134" href="#__codelineno-139-134"></a>
<a id="__codelineno-139-135" name="__codelineno-139-135" href="#__codelineno-139-135"></a>
<a id="__codelineno-139-136" name="__codelineno-139-136" href="#__codelineno-139-136"></a>
<a id="__codelineno-139-137" name="__codelineno-139-137" href="#__codelineno-139-137"></a>url: DT_API_URL + &#39;/v1/traces&#39;,
<a id="__codelineno-139-138" name="__codelineno-139-138" href="#__codelineno-139-138"></a>
<a id="__codelineno-139-139" name="__codelineno-139-139" href="#__codelineno-139-139"></a>
<a id="__codelineno-139-140" name="__codelineno-139-140" href="#__codelineno-139-140"></a>
<a id="__codelineno-139-141" name="__codelineno-139-141" href="#__codelineno-139-141"></a>headers: { Authorization: &#39;Api-Token &#39; + DT_API_TOKEN }
<a id="__codelineno-139-142" name="__codelineno-139-142" href="#__codelineno-139-142"></a>
<a id="__codelineno-139-143" name="__codelineno-139-143" href="#__codelineno-139-143"></a>
<a id="__codelineno-139-144" name="__codelineno-139-144" href="#__codelineno-139-144"></a>
<a id="__codelineno-139-145" name="__codelineno-139-145" href="#__codelineno-139-145"></a>});
<a id="__codelineno-139-146" name="__codelineno-139-146" href="#__codelineno-139-146"></a>
<a id="__codelineno-139-147" name="__codelineno-139-147" href="#__codelineno-139-147"></a>
<a id="__codelineno-139-148" name="__codelineno-139-148" href="#__codelineno-139-148"></a>
<a id="__codelineno-139-149" name="__codelineno-139-149" href="#__codelineno-139-149"></a>const processor = new BatchSpanProcessor(exporter);
<a id="__codelineno-139-150" name="__codelineno-139-150" href="#__codelineno-139-150"></a>
<a id="__codelineno-139-151" name="__codelineno-139-151" href="#__codelineno-139-151"></a>
<a id="__codelineno-139-152" name="__codelineno-139-152" href="#__codelineno-139-152"></a>
<a id="__codelineno-139-153" name="__codelineno-139-153" href="#__codelineno-139-153"></a>const provider = new NodeTracerProvider({
<a id="__codelineno-139-154" name="__codelineno-139-154" href="#__codelineno-139-154"></a>
<a id="__codelineno-139-155" name="__codelineno-139-155" href="#__codelineno-139-155"></a>
<a id="__codelineno-139-156" name="__codelineno-139-156" href="#__codelineno-139-156"></a>
<a id="__codelineno-139-157" name="__codelineno-139-157" href="#__codelineno-139-157"></a>resource: resource,
<a id="__codelineno-139-158" name="__codelineno-139-158" href="#__codelineno-139-158"></a>
<a id="__codelineno-139-159" name="__codelineno-139-159" href="#__codelineno-139-159"></a>
<a id="__codelineno-139-160" name="__codelineno-139-160" href="#__codelineno-139-160"></a>
<a id="__codelineno-139-161" name="__codelineno-139-161" href="#__codelineno-139-161"></a>spanProcessors: [ processor ]
<a id="__codelineno-139-162" name="__codelineno-139-162" href="#__codelineno-139-162"></a>
<a id="__codelineno-139-163" name="__codelineno-139-163" href="#__codelineno-139-163"></a>
<a id="__codelineno-139-164" name="__codelineno-139-164" href="#__codelineno-139-164"></a>
<a id="__codelineno-139-165" name="__codelineno-139-165" href="#__codelineno-139-165"></a>});
<a id="__codelineno-139-166" name="__codelineno-139-166" href="#__codelineno-139-166"></a>
<a id="__codelineno-139-167" name="__codelineno-139-167" href="#__codelineno-139-167"></a>
<a id="__codelineno-139-168" name="__codelineno-139-168" href="#__codelineno-139-168"></a>
<a id="__codelineno-139-169" name="__codelineno-139-169" href="#__codelineno-139-169"></a>provider.register();
<a id="__codelineno-139-170" name="__codelineno-139-170" href="#__codelineno-139-170"></a>
<a id="__codelineno-139-171" name="__codelineno-139-171" href="#__codelineno-139-171"></a>
<a id="__codelineno-139-172" name="__codelineno-139-172" href="#__codelineno-139-172"></a>
<a id="__codelineno-139-173" name="__codelineno-139-173" href="#__codelineno-139-173"></a>// ===== METRIC SETUP =====
<a id="__codelineno-139-174" name="__codelineno-139-174" href="#__codelineno-139-174"></a>
<a id="__codelineno-139-175" name="__codelineno-139-175" href="#__codelineno-139-175"></a>
<a id="__codelineno-139-176" name="__codelineno-139-176" href="#__codelineno-139-176"></a>
<a id="__codelineno-139-177" name="__codelineno-139-177" href="#__codelineno-139-177"></a>const metricExporter = new OTLPMetricExporter({
<a id="__codelineno-139-178" name="__codelineno-139-178" href="#__codelineno-139-178"></a>
<a id="__codelineno-139-179" name="__codelineno-139-179" href="#__codelineno-139-179"></a>
<a id="__codelineno-139-180" name="__codelineno-139-180" href="#__codelineno-139-180"></a>
<a id="__codelineno-139-181" name="__codelineno-139-181" href="#__codelineno-139-181"></a>url: DT_API_URL + &#39;/v1/metrics&#39;,
<a id="__codelineno-139-182" name="__codelineno-139-182" href="#__codelineno-139-182"></a>
<a id="__codelineno-139-183" name="__codelineno-139-183" href="#__codelineno-139-183"></a>
<a id="__codelineno-139-184" name="__codelineno-139-184" href="#__codelineno-139-184"></a>
<a id="__codelineno-139-185" name="__codelineno-139-185" href="#__codelineno-139-185"></a>headers: { Authorization: &#39;Api-Token &#39; + DT_API_TOKEN },
<a id="__codelineno-139-186" name="__codelineno-139-186" href="#__codelineno-139-186"></a>
<a id="__codelineno-139-187" name="__codelineno-139-187" href="#__codelineno-139-187"></a>
<a id="__codelineno-139-188" name="__codelineno-139-188" href="#__codelineno-139-188"></a>
<a id="__codelineno-139-189" name="__codelineno-139-189" href="#__codelineno-139-189"></a>temporalityPreference: AggregationTemporality.DELTA
<a id="__codelineno-139-190" name="__codelineno-139-190" href="#__codelineno-139-190"></a>
<a id="__codelineno-139-191" name="__codelineno-139-191" href="#__codelineno-139-191"></a>
<a id="__codelineno-139-192" name="__codelineno-139-192" href="#__codelineno-139-192"></a>
<a id="__codelineno-139-193" name="__codelineno-139-193" href="#__codelineno-139-193"></a>});
<a id="__codelineno-139-194" name="__codelineno-139-194" href="#__codelineno-139-194"></a>
<a id="__codelineno-139-195" name="__codelineno-139-195" href="#__codelineno-139-195"></a>
<a id="__codelineno-139-196" name="__codelineno-139-196" href="#__codelineno-139-196"></a>
<a id="__codelineno-139-197" name="__codelineno-139-197" href="#__codelineno-139-197"></a>const metricReader = new PeriodicExportingMetricReader({
<a id="__codelineno-139-198" name="__codelineno-139-198" href="#__codelineno-139-198"></a>
<a id="__codelineno-139-199" name="__codelineno-139-199" href="#__codelineno-139-199"></a>
<a id="__codelineno-139-200" name="__codelineno-139-200" href="#__codelineno-139-200"></a>
<a id="__codelineno-139-201" name="__codelineno-139-201" href="#__codelineno-139-201"></a>exporter: metricExporter,
<a id="__codelineno-139-202" name="__codelineno-139-202" href="#__codelineno-139-202"></a>
<a id="__codelineno-139-203" name="__codelineno-139-203" href="#__codelineno-139-203"></a>
<a id="__codelineno-139-204" name="__codelineno-139-204" href="#__codelineno-139-204"></a>
<a id="__codelineno-139-205" name="__codelineno-139-205" href="#__codelineno-139-205"></a>exportIntervalMillis: 3000
<a id="__codelineno-139-206" name="__codelineno-139-206" href="#__codelineno-139-206"></a>
<a id="__codelineno-139-207" name="__codelineno-139-207" href="#__codelineno-139-207"></a>
<a id="__codelineno-139-208" name="__codelineno-139-208" href="#__codelineno-139-208"></a>
<a id="__codelineno-139-209" name="__codelineno-139-209" href="#__codelineno-139-209"></a>});
<a id="__codelineno-139-210" name="__codelineno-139-210" href="#__codelineno-139-210"></a>
<a id="__codelineno-139-211" name="__codelineno-139-211" href="#__codelineno-139-211"></a>
<a id="__codelineno-139-212" name="__codelineno-139-212" href="#__codelineno-139-212"></a>
<a id="__codelineno-139-213" name="__codelineno-139-213" href="#__codelineno-139-213"></a>const meterProvider = new MeterProvider({
<a id="__codelineno-139-214" name="__codelineno-139-214" href="#__codelineno-139-214"></a>
<a id="__codelineno-139-215" name="__codelineno-139-215" href="#__codelineno-139-215"></a>
<a id="__codelineno-139-216" name="__codelineno-139-216" href="#__codelineno-139-216"></a>
<a id="__codelineno-139-217" name="__codelineno-139-217" href="#__codelineno-139-217"></a>resource: resource,
<a id="__codelineno-139-218" name="__codelineno-139-218" href="#__codelineno-139-218"></a>
<a id="__codelineno-139-219" name="__codelineno-139-219" href="#__codelineno-139-219"></a>
<a id="__codelineno-139-220" name="__codelineno-139-220" href="#__codelineno-139-220"></a>
<a id="__codelineno-139-221" name="__codelineno-139-221" href="#__codelineno-139-221"></a>readers: [ metricReader ]
<a id="__codelineno-139-222" name="__codelineno-139-222" href="#__codelineno-139-222"></a>
<a id="__codelineno-139-223" name="__codelineno-139-223" href="#__codelineno-139-223"></a>
<a id="__codelineno-139-224" name="__codelineno-139-224" href="#__codelineno-139-224"></a>
<a id="__codelineno-139-225" name="__codelineno-139-225" href="#__codelineno-139-225"></a>});
<a id="__codelineno-139-226" name="__codelineno-139-226" href="#__codelineno-139-226"></a>
<a id="__codelineno-139-227" name="__codelineno-139-227" href="#__codelineno-139-227"></a>
<a id="__codelineno-139-228" name="__codelineno-139-228" href="#__codelineno-139-228"></a>
<a id="__codelineno-139-229" name="__codelineno-139-229" href="#__codelineno-139-229"></a>// Set this MeterProvider to be global to the app being instrumented.
<a id="__codelineno-139-230" name="__codelineno-139-230" href="#__codelineno-139-230"></a>
<a id="__codelineno-139-231" name="__codelineno-139-231" href="#__codelineno-139-231"></a>
<a id="__codelineno-139-232" name="__codelineno-139-232" href="#__codelineno-139-232"></a>
<a id="__codelineno-139-233" name="__codelineno-139-233" href="#__codelineno-139-233"></a>opentelemetry.metrics.setGlobalMeterProvider(meterProvider);
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.
3. If you export using OTLP, configure the two variables <code>DT_API_URL</code> and <code>DT_API_TOKEN</code> in <code>otel.js</code> with their <a href="#dynatrace-docs--otlp-export">respective values</a>.</p>
<p>Value injection</p>
<p>Instead of hardcoding the URL and token, you might also consider reading them from storage specific to your application framework (for example, environment variables or framework secrets).
4. Adjust the Node.js call for your application to include the <a href="https://nodejs.org/api/cli.html#-r---require-module">√¢¬Ä¬ìrequire√Ø¬ª¬ø</a> command line parameter and point it towards <code>otel.js</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-140-1" name="__codelineno-140-1" href="#__codelineno-140-1"></a>node --require ./otel.js ./myapplication.js
</code></pre></div>
<h2 id="step-3-manually-instrument-your-application">Step 3 Manually instrument your application<a class="headerlink" href="#step-3-manually-instrument-your-application" title="Permanent link">&para;</a></h2>
<h3 id="add-tracing_4">Add tracing<a class="headerlink" href="#add-tracing_4" title="Permanent link">&para;</a></h3>
<ol>
<li>Obtain a reference to the OpenTelemetry API.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-141-1" name="__codelineno-141-1" href="#__codelineno-141-1"></a>const opentelemetry = require(&quot;@opentelemetry/api&quot;);
</code></pre></div>
2. Now we can get a tracer object.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-142-1" name="__codelineno-142-1" href="#__codelineno-142-1"></a>const tracer = opentelemetry.trace.getTracer(&#39;my-tracer&#39;);
</code></pre></div>
3. With <code>tracer</code>, we can use a span builder to create and start new spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-143-1" name="__codelineno-143-1" href="#__codelineno-143-1"></a>const span = tracer.startSpan(&#39;Call to /myendpoint&#39;);
<a id="__codelineno-143-2" name="__codelineno-143-2" href="#__codelineno-143-2"></a>
<a id="__codelineno-143-3" name="__codelineno-143-3" href="#__codelineno-143-3"></a>
<a id="__codelineno-143-4" name="__codelineno-143-4" href="#__codelineno-143-4"></a>
<a id="__codelineno-143-5" name="__codelineno-143-5" href="#__codelineno-143-5"></a>span.setAttribute(&#39;http.method&#39;, &#39;GET&#39;);
<a id="__codelineno-143-6" name="__codelineno-143-6" href="#__codelineno-143-6"></a>
<a id="__codelineno-143-7" name="__codelineno-143-7" href="#__codelineno-143-7"></a>
<a id="__codelineno-143-8" name="__codelineno-143-8" href="#__codelineno-143-8"></a>
<a id="__codelineno-143-9" name="__codelineno-143-9" href="#__codelineno-143-9"></a>span.setAttribute(&#39;net.protocol.version&#39;,&#39;1.1&#39;);
<a id="__codelineno-143-10" name="__codelineno-143-10" href="#__codelineno-143-10"></a>
<a id="__codelineno-143-11" name="__codelineno-143-11" href="#__codelineno-143-11"></a>
<a id="__codelineno-143-12" name="__codelineno-143-12" href="#__codelineno-143-12"></a>
<a id="__codelineno-143-13" name="__codelineno-143-13" href="#__codelineno-143-13"></a>// TODO your code goes here
<a id="__codelineno-143-14" name="__codelineno-143-14" href="#__codelineno-143-14"></a>
<a id="__codelineno-143-15" name="__codelineno-143-15" href="#__codelineno-143-15"></a>
<a id="__codelineno-143-16" name="__codelineno-143-16" href="#__codelineno-143-16"></a>
<a id="__codelineno-143-17" name="__codelineno-143-17" href="#__codelineno-143-17"></a>span.end();
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new span and name it "Call to /myendpoint"</li>
<li>Add two attributes, following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
<li>Add a <code>TODO</code> in place of the eventual business logic</li>
<li>Call the span's <code>end()</code> method to complete the span</li>
</ul>
<h3 id="collect-metrics_4">Collect metrics<a class="headerlink" href="#collect-metrics_4" title="Permanent link">&para;</a></h3>
<ol>
<li>As with tracing, we first need to get a reference to the OpenTelemetry API.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-144-1" name="__codelineno-144-1" href="#__codelineno-144-1"></a>const opentelemetry = require(&quot;@opentelemetry/api&quot;);
</code></pre></div>
2. Next, we need to obtain a meter object.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-145-1" name="__codelineno-145-1" href="#__codelineno-145-1"></a>const meter = opentelemetry.metrics.getMeter(&#39;my-meter&#39;);
</code></pre></div>
3. With <code>meter</code>, we can now create individual instruments, such as a counter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-146-1" name="__codelineno-146-1" href="#__codelineno-146-1"></a>const requestCounter = meter.createCounter(&#39;request_counter&#39;, {
<a id="__codelineno-146-2" name="__codelineno-146-2" href="#__codelineno-146-2"></a>
<a id="__codelineno-146-3" name="__codelineno-146-3" href="#__codelineno-146-3"></a>
<a id="__codelineno-146-4" name="__codelineno-146-4" href="#__codelineno-146-4"></a>
<a id="__codelineno-146-5" name="__codelineno-146-5" href="#__codelineno-146-5"></a>description: &#39;The number of requests we received&#39;
<a id="__codelineno-146-6" name="__codelineno-146-6" href="#__codelineno-146-6"></a>
<a id="__codelineno-146-7" name="__codelineno-146-7" href="#__codelineno-146-7"></a>
<a id="__codelineno-146-8" name="__codelineno-146-8" href="#__codelineno-146-8"></a>
<a id="__codelineno-146-9" name="__codelineno-146-9" href="#__codelineno-146-9"></a>});
</code></pre></div>
4. We can now invoke the <code>add()</code> method of <code>requestCounter</code> to record new values with the counter and save additional attributes (for example, <code>action.type</code>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-147-1" name="__codelineno-147-1" href="#__codelineno-147-1"></a>requestCounter.add(1, { &#39;action.type&#39;: &#39;create&#39; });
</code></pre></div>
<p>You can also create an asynchronous gauge, which requires a callback function that will be invoked by OpenTelemetry upon data collection.</p>
<p>The following example records on each invocation the available memory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-148-1" name="__codelineno-148-1" href="#__codelineno-148-1"></a>const gauge = meter.createObservableGauge(&#39;free_memory&#39;);
<a id="__codelineno-148-2" name="__codelineno-148-2" href="#__codelineno-148-2"></a>
<a id="__codelineno-148-3" name="__codelineno-148-3" href="#__codelineno-148-3"></a>
<a id="__codelineno-148-4" name="__codelineno-148-4" href="#__codelineno-148-4"></a>
<a id="__codelineno-148-5" name="__codelineno-148-5" href="#__codelineno-148-5"></a>gauge.addCallback(r =&gt; {
<a id="__codelineno-148-6" name="__codelineno-148-6" href="#__codelineno-148-6"></a>
<a id="__codelineno-148-7" name="__codelineno-148-7" href="#__codelineno-148-7"></a>
<a id="__codelineno-148-8" name="__codelineno-148-8" href="#__codelineno-148-8"></a>
<a id="__codelineno-148-9" name="__codelineno-148-9" href="#__codelineno-148-9"></a>r.observe(require(&#39;os&#39;).freemem());
<a id="__codelineno-148-10" name="__codelineno-148-10" href="#__codelineno-148-10"></a>
<a id="__codelineno-148-11" name="__codelineno-148-11" href="#__codelineno-148-11"></a>
<a id="__codelineno-148-12" name="__codelineno-148-12" href="#__codelineno-148-12"></a>
<a id="__codelineno-148-13" name="__codelineno-148-13" href="#__codelineno-148-13"></a>});
</code></pre></div>
<h3 id="connect-logs_4">Connect logs<a class="headerlink" href="#connect-logs_4" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Node.js does not have stable support for logs yet.</p>
<p>Depending on the status of the OpenTelemetry SDK, the pre-release version may nonetheless already allow the ingestion of your logs.</p>
<h3 id="ensure-context-propagation-optional_4">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_4" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<p>If you are using automatic instrumentation and your networking libraries are covered by automatic instrumentation, this will be automatically taken care of by the instrumentation libraries. Otherwise, your code needs to take this into account.</p>
<h4 id="extracting-the-context-when-receiving-a-request_4">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_4" title="Permanent link">&para;</a></h4>
<p>The following examples assume that we received a network call via <a href="https://nodejs.org/api/http.html#class-httpclientrequest"><code>ClientRequest</code>√Ø¬ª¬ø</a> and uses <code>extract()</code> to create the context object <code>remoteCtx</code>, based on the context information received from the HTTP headers. This allows us to continue the previous trace with our spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-149-1" name="__codelineno-149-1" href="#__codelineno-149-1"></a>//Extract context from incoming headers
<a id="__codelineno-149-2" name="__codelineno-149-2" href="#__codelineno-149-2"></a>
<a id="__codelineno-149-3" name="__codelineno-149-3" href="#__codelineno-149-3"></a>
<a id="__codelineno-149-4" name="__codelineno-149-4" href="#__codelineno-149-4"></a>
<a id="__codelineno-149-5" name="__codelineno-149-5" href="#__codelineno-149-5"></a>const { SpanKind, ROOT_CONTEXT } = require(&quot;@opentelemetry/api&quot;);
<a id="__codelineno-149-6" name="__codelineno-149-6" href="#__codelineno-149-6"></a>
<a id="__codelineno-149-7" name="__codelineno-149-7" href="#__codelineno-149-7"></a>
<a id="__codelineno-149-8" name="__codelineno-149-8" href="#__codelineno-149-8"></a>
<a id="__codelineno-149-9" name="__codelineno-149-9" href="#__codelineno-149-9"></a>const remoteCtx = opentelemetry.propagation.extract(ROOT_CONTEXT, req.headers);
<a id="__codelineno-149-10" name="__codelineno-149-10" href="#__codelineno-149-10"></a>
<a id="__codelineno-149-11" name="__codelineno-149-11" href="#__codelineno-149-11"></a>
<a id="__codelineno-149-12" name="__codelineno-149-12" href="#__codelineno-149-12"></a>
<a id="__codelineno-149-13" name="__codelineno-149-13" href="#__codelineno-149-13"></a>const serverSpan = opentelemetry.trace.getTracer(&#39;my-server-tracer&#39;)
<a id="__codelineno-149-14" name="__codelineno-149-14" href="#__codelineno-149-14"></a>
<a id="__codelineno-149-15" name="__codelineno-149-15" href="#__codelineno-149-15"></a>
<a id="__codelineno-149-16" name="__codelineno-149-16" href="#__codelineno-149-16"></a>
<a id="__codelineno-149-17" name="__codelineno-149-17" href="#__codelineno-149-17"></a>.startSpan(&#39;my-server-span&#39;, {
<a id="__codelineno-149-18" name="__codelineno-149-18" href="#__codelineno-149-18"></a>
<a id="__codelineno-149-19" name="__codelineno-149-19" href="#__codelineno-149-19"></a>
<a id="__codelineno-149-20" name="__codelineno-149-20" href="#__codelineno-149-20"></a>
<a id="__codelineno-149-21" name="__codelineno-149-21" href="#__codelineno-149-21"></a>kind: SpanKind.SERVER,
<a id="__codelineno-149-22" name="__codelineno-149-22" href="#__codelineno-149-22"></a>
<a id="__codelineno-149-23" name="__codelineno-149-23" href="#__codelineno-149-23"></a>
<a id="__codelineno-149-24" name="__codelineno-149-24" href="#__codelineno-149-24"></a>
<a id="__codelineno-149-25" name="__codelineno-149-25" href="#__codelineno-149-25"></a>attributes: {
<a id="__codelineno-149-26" name="__codelineno-149-26" href="#__codelineno-149-26"></a>
<a id="__codelineno-149-27" name="__codelineno-149-27" href="#__codelineno-149-27"></a>
<a id="__codelineno-149-28" name="__codelineno-149-28" href="#__codelineno-149-28"></a>
<a id="__codelineno-149-29" name="__codelineno-149-29" href="#__codelineno-149-29"></a>&#39;my-server-key-1&#39;: &#39;my-server-value-1&#39;
<a id="__codelineno-149-30" name="__codelineno-149-30" href="#__codelineno-149-30"></a>
<a id="__codelineno-149-31" name="__codelineno-149-31" href="#__codelineno-149-31"></a>
<a id="__codelineno-149-32" name="__codelineno-149-32" href="#__codelineno-149-32"></a>
<a id="__codelineno-149-33" name="__codelineno-149-33" href="#__codelineno-149-33"></a>},
<a id="__codelineno-149-34" name="__codelineno-149-34" href="#__codelineno-149-34"></a>
<a id="__codelineno-149-35" name="__codelineno-149-35" href="#__codelineno-149-35"></a>
<a id="__codelineno-149-36" name="__codelineno-149-36" href="#__codelineno-149-36"></a>
<a id="__codelineno-149-37" name="__codelineno-149-37" href="#__codelineno-149-37"></a>}, remoteCtx);
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_4">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_4" title="Permanent link">&para;</a></h4>
<p>In the following example, we use the <a href="https://www.npmjs.com/package/axios">axios√Ø¬ª¬ø</a> HTTP client to send a REST request to another service and provide our existing context as part of the HTTP headers of our request.</p>
<p>To do so, we create a <code>ctx</code> object, pass it the current span, and mark it as active. Then we pass that context object and an empty <code>my_headers</code> object to <code>inject()</code> and, once the call is returned, we have the appropriate headers in <code>my_headers</code>, which we can eventually pass to our HTTP call.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-150-1" name="__codelineno-150-1" href="#__codelineno-150-1"></a>const ctx = opentelemetry.trace.setSpan(
<a id="__codelineno-150-2" name="__codelineno-150-2" href="#__codelineno-150-2"></a>
<a id="__codelineno-150-3" name="__codelineno-150-3" href="#__codelineno-150-3"></a>
<a id="__codelineno-150-4" name="__codelineno-150-4" href="#__codelineno-150-4"></a>
<a id="__codelineno-150-5" name="__codelineno-150-5" href="#__codelineno-150-5"></a>opentelemetry.context.active(),
<a id="__codelineno-150-6" name="__codelineno-150-6" href="#__codelineno-150-6"></a>
<a id="__codelineno-150-7" name="__codelineno-150-7" href="#__codelineno-150-7"></a>
<a id="__codelineno-150-8" name="__codelineno-150-8" href="#__codelineno-150-8"></a>
<a id="__codelineno-150-9" name="__codelineno-150-9" href="#__codelineno-150-9"></a>serverSpan
<a id="__codelineno-150-10" name="__codelineno-150-10" href="#__codelineno-150-10"></a>
<a id="__codelineno-150-11" name="__codelineno-150-11" href="#__codelineno-150-11"></a>
<a id="__codelineno-150-12" name="__codelineno-150-12" href="#__codelineno-150-12"></a>
<a id="__codelineno-150-13" name="__codelineno-150-13" href="#__codelineno-150-13"></a>);
<a id="__codelineno-150-14" name="__codelineno-150-14" href="#__codelineno-150-14"></a>
<a id="__codelineno-150-15" name="__codelineno-150-15" href="#__codelineno-150-15"></a>
<a id="__codelineno-150-16" name="__codelineno-150-16" href="#__codelineno-150-16"></a>
<a id="__codelineno-150-17" name="__codelineno-150-17" href="#__codelineno-150-17"></a>const my_headers = {};
<a id="__codelineno-150-18" name="__codelineno-150-18" href="#__codelineno-150-18"></a>
<a id="__codelineno-150-19" name="__codelineno-150-19" href="#__codelineno-150-19"></a>
<a id="__codelineno-150-20" name="__codelineno-150-20" href="#__codelineno-150-20"></a>
<a id="__codelineno-150-21" name="__codelineno-150-21" href="#__codelineno-150-21"></a>opentelemetry.propagation.inject(ctx, my_headers);
<a id="__codelineno-150-22" name="__codelineno-150-22" href="#__codelineno-150-22"></a>
<a id="__codelineno-150-23" name="__codelineno-150-23" href="#__codelineno-150-23"></a>
<a id="__codelineno-150-24" name="__codelineno-150-24" href="#__codelineno-150-24"></a>
<a id="__codelineno-150-25" name="__codelineno-150-25" href="#__codelineno-150-25"></a>await axios.get(URL, {headers: my_headers});
<a id="__codelineno-150-26" name="__codelineno-150-26" href="#__codelineno-150-26"></a>
<a id="__codelineno-150-27" name="__codelineno-150-27" href="#__codelineno-150-27"></a>
<a id="__codelineno-150-28" name="__codelineno-150-28" href="#__codelineno-150-28"></a>
<a id="__codelineno-150-29" name="__codelineno-150-29" href="#__codelineno-150-29"></a>serverSpan.end();
</code></pre></div>
<h2 id="step-4-configure-data-capture-to-meet-privacy-requirements-optional_2">Step 4 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-4-configure-data-capture-to-meet-privacy-requirements-optional_2" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-5-verify-data-ingestion-into-dynatrace_2">Step 5 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-5-verify-data-ingestion-into-dynatrace_2" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_21">Related topics<a class="headerlink" href="#related-topics_21" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-pythonmd">Source: python.md<a class="headerlink" href="#source-pythonmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Python application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/python
scraped: 2026-02-16T21:12:42.699456</p>
<hr />
<h1 id="instrument-your-python-application-with-opentelemetry">Instrument your Python application with OpenTelemetry<a class="headerlink" href="#instrument-your-python-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-python-application-with-opentelemetry_1">Instrument your Python application with OpenTelemetry<a class="headerlink" href="#instrument-your-python-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>1-min read</li>
<li>Published Apr 18, 2023</li>
</ul>
<p>These walkthroughs show how to add observability to your Python application using the OpenTelemetry Python libraries and tools.</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/walkthroughs/python/python-auto" title="Learn how to instrument your Python application using OpenTelemetry and Dynatrace.">Automatically instrument your Python application with OpenTelemetry</a></li>
<li><a href="/docs/ingest-from/opentelemetry/walkthroughs/python/python-manual" title="Learn how to instrument your Python application using OpenTelemetry and Dynatrace.">Manually instrument your Python application with OpenTelemetry</a></li>
</ul>
<p>The following features are currently supported by OpenTelemetry Python.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_22">Related topics<a class="headerlink" href="#related-topics_22" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/observe/dynatrace-for-ai-observability/get-started" title="Learn how to set up OpenLLMetry to observe an AI/ML model.">Get started</a></li>
</ul>
<hr />
<h2 id="source-rubymd">Source: ruby.md<a class="headerlink" href="#source-rubymd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Ruby application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/ruby
scraped: 2026-02-16T21:18:38.102966</p>
<hr />
<h1 id="instrument-your-ruby-application-with-opentelemetry">Instrument your Ruby application with OpenTelemetry<a class="headerlink" href="#instrument-your-ruby-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-ruby-application-with-opentelemetry_1">Instrument your Ruby application with OpenTelemetry<a class="headerlink" href="#instrument-your-ruby-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Updated on Oct 23, 2025</li>
</ul>
<p>This walkthrough shows how to add observability to your Ruby application using the OpenTelemetry Ruby libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>No</td>
</tr>
<tr>
<td>Logs</td>
<td>No</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_19">Prerequisites<a class="headerlink" href="#prerequisites_19" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_5">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_5" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_5">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_5" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_5">Get API access token<a class="headerlink" href="#get-api-access-token_5" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-choose-how-you-want-to-instrument-your-application_2">Step 2 Choose how you want to instrument your application<a class="headerlink" href="#step-2-choose-how-you-want-to-instrument-your-application_2" title="Permanent link">&para;</a></h2>
<p>OpenTelemetry supports on Ruby automatic and manual instrumentation, or a combination of both.</p>
<p>Which instrumentation should I choose?</p>
<p>It's a good idea to start with automatic instrumentation and add manual instrumentation if the automatic approach doesn't work or doesn't provide enough information.</p>
<h2 id="step-3-initialize-opentelementry">Step 3 Initialize OpenTelementry<a class="headerlink" href="#step-3-initialize-opentelementry" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the following dependencies to your Gemfile.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-151-1" name="__codelineno-151-1" href="#__codelineno-151-1"></a>gem &#39;opentelemetry-sdk&#39;
<a id="__codelineno-151-2" name="__codelineno-151-2" href="#__codelineno-151-2"></a>
<a id="__codelineno-151-3" name="__codelineno-151-3" href="#__codelineno-151-3"></a>
<a id="__codelineno-151-4" name="__codelineno-151-4" href="#__codelineno-151-4"></a>
<a id="__codelineno-151-5" name="__codelineno-151-5" href="#__codelineno-151-5"></a>gem &#39;opentelemetry-exporter-otlp&#39;
</code></pre></div>
2. Add the following <code>require</code> declaration.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-152-1" name="__codelineno-152-1" href="#__codelineno-152-1"></a>require &#39;opentelemetry/sdk&#39;
<a id="__codelineno-152-2" name="__codelineno-152-2" href="#__codelineno-152-2"></a>
<a id="__codelineno-152-3" name="__codelineno-152-3" href="#__codelineno-152-3"></a>
<a id="__codelineno-152-4" name="__codelineno-152-4" href="#__codelineno-152-4"></a>
<a id="__codelineno-152-5" name="__codelineno-152-5" href="#__codelineno-152-5"></a>require &#39;opentelemetry/exporter/otlp&#39;
</code></pre></div>
3. Add the <code>init_opentelemetry</code> function to startup code and provide the variables <code>DT_API_URL</code> and <code>DT_API_TOKEN</code> with the values for the <a href="#base-url">Dynatrace URL</a> and <a href="#access-token">access token</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-153-1" name="__codelineno-153-1" href="#__codelineno-153-1"></a>DT_API_URL = ENV[&#39;DT_API_URL&#39;]
<a id="__codelineno-153-2" name="__codelineno-153-2" href="#__codelineno-153-2"></a>
<a id="__codelineno-153-3" name="__codelineno-153-3" href="#__codelineno-153-3"></a>
<a id="__codelineno-153-4" name="__codelineno-153-4" href="#__codelineno-153-4"></a>
<a id="__codelineno-153-5" name="__codelineno-153-5" href="#__codelineno-153-5"></a>DT_API_TOKEN = ENV[&#39;DT_API_TOKEN&#39;]
<a id="__codelineno-153-6" name="__codelineno-153-6" href="#__codelineno-153-6"></a>
<a id="__codelineno-153-7" name="__codelineno-153-7" href="#__codelineno-153-7"></a>
<a id="__codelineno-153-8" name="__codelineno-153-8" href="#__codelineno-153-8"></a>
<a id="__codelineno-153-9" name="__codelineno-153-9" href="#__codelineno-153-9"></a>def init_opentelemetry
<a id="__codelineno-153-10" name="__codelineno-153-10" href="#__codelineno-153-10"></a>
<a id="__codelineno-153-11" name="__codelineno-153-11" href="#__codelineno-153-11"></a>
<a id="__codelineno-153-12" name="__codelineno-153-12" href="#__codelineno-153-12"></a>
<a id="__codelineno-153-13" name="__codelineno-153-13" href="#__codelineno-153-13"></a>OpenTelemetry::SDK.configure do |c|
<a id="__codelineno-153-14" name="__codelineno-153-14" href="#__codelineno-153-14"></a>
<a id="__codelineno-153-15" name="__codelineno-153-15" href="#__codelineno-153-15"></a>
<a id="__codelineno-153-16" name="__codelineno-153-16" href="#__codelineno-153-16"></a>
<a id="__codelineno-153-17" name="__codelineno-153-17" href="#__codelineno-153-17"></a>c.service_name = &#39;ruby-quickstart&#39; #TODO Replace with the name of your application
<a id="__codelineno-153-18" name="__codelineno-153-18" href="#__codelineno-153-18"></a>
<a id="__codelineno-153-19" name="__codelineno-153-19" href="#__codelineno-153-19"></a>
<a id="__codelineno-153-20" name="__codelineno-153-20" href="#__codelineno-153-20"></a>
<a id="__codelineno-153-21" name="__codelineno-153-21" href="#__codelineno-153-21"></a>c.service_version = &#39;1.0.1&#39; #TODO Replace with the version of your application
<a id="__codelineno-153-22" name="__codelineno-153-22" href="#__codelineno-153-22"></a>
<a id="__codelineno-153-23" name="__codelineno-153-23" href="#__codelineno-153-23"></a>
<a id="__codelineno-153-24" name="__codelineno-153-24" href="#__codelineno-153-24"></a>
<a id="__codelineno-153-25" name="__codelineno-153-25" href="#__codelineno-153-25"></a># TODO: add automatic instrumentation here (step 3 - optional)
<a id="__codelineno-153-26" name="__codelineno-153-26" href="#__codelineno-153-26"></a>
<a id="__codelineno-153-27" name="__codelineno-153-27" href="#__codelineno-153-27"></a>
<a id="__codelineno-153-28" name="__codelineno-153-28" href="#__codelineno-153-28"></a>
<a id="__codelineno-153-29" name="__codelineno-153-29" href="#__codelineno-153-29"></a>for name in [&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;, &quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;, &quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;] do
<a id="__codelineno-153-30" name="__codelineno-153-30" href="#__codelineno-153-30"></a>
<a id="__codelineno-153-31" name="__codelineno-153-31" href="#__codelineno-153-31"></a>
<a id="__codelineno-153-32" name="__codelineno-153-32" href="#__codelineno-153-32"></a>
<a id="__codelineno-153-33" name="__codelineno-153-33" href="#__codelineno-153-33"></a>begin
<a id="__codelineno-153-34" name="__codelineno-153-34" href="#__codelineno-153-34"></a>
<a id="__codelineno-153-35" name="__codelineno-153-35" href="#__codelineno-153-35"></a>
<a id="__codelineno-153-36" name="__codelineno-153-36" href="#__codelineno-153-36"></a>
<a id="__codelineno-153-37" name="__codelineno-153-37" href="#__codelineno-153-37"></a>c.resource = OpenTelemetry::SDK::Resources::Resource.create(Hash[*File.read(name.start_with?(&quot;/var&quot;) ? name : File.read(name)).split(/[=\n]+/)])
<a id="__codelineno-153-38" name="__codelineno-153-38" href="#__codelineno-153-38"></a>
<a id="__codelineno-153-39" name="__codelineno-153-39" href="#__codelineno-153-39"></a>
<a id="__codelineno-153-40" name="__codelineno-153-40" href="#__codelineno-153-40"></a>
<a id="__codelineno-153-41" name="__codelineno-153-41" href="#__codelineno-153-41"></a>rescue
<a id="__codelineno-153-42" name="__codelineno-153-42" href="#__codelineno-153-42"></a>
<a id="__codelineno-153-43" name="__codelineno-153-43" href="#__codelineno-153-43"></a>
<a id="__codelineno-153-44" name="__codelineno-153-44" href="#__codelineno-153-44"></a>
<a id="__codelineno-153-45" name="__codelineno-153-45" href="#__codelineno-153-45"></a>end
<a id="__codelineno-153-46" name="__codelineno-153-46" href="#__codelineno-153-46"></a>
<a id="__codelineno-153-47" name="__codelineno-153-47" href="#__codelineno-153-47"></a>
<a id="__codelineno-153-48" name="__codelineno-153-48" href="#__codelineno-153-48"></a>
<a id="__codelineno-153-49" name="__codelineno-153-49" href="#__codelineno-153-49"></a>end
<a id="__codelineno-153-50" name="__codelineno-153-50" href="#__codelineno-153-50"></a>
<a id="__codelineno-153-51" name="__codelineno-153-51" href="#__codelineno-153-51"></a>
<a id="__codelineno-153-52" name="__codelineno-153-52" href="#__codelineno-153-52"></a>
<a id="__codelineno-153-53" name="__codelineno-153-53" href="#__codelineno-153-53"></a>c.add_span_processor(
<a id="__codelineno-153-54" name="__codelineno-153-54" href="#__codelineno-153-54"></a>
<a id="__codelineno-153-55" name="__codelineno-153-55" href="#__codelineno-153-55"></a>
<a id="__codelineno-153-56" name="__codelineno-153-56" href="#__codelineno-153-56"></a>
<a id="__codelineno-153-57" name="__codelineno-153-57" href="#__codelineno-153-57"></a>OpenTelemetry::SDK::Trace::Export::BatchSpanProcessor.new(
<a id="__codelineno-153-58" name="__codelineno-153-58" href="#__codelineno-153-58"></a>
<a id="__codelineno-153-59" name="__codelineno-153-59" href="#__codelineno-153-59"></a>
<a id="__codelineno-153-60" name="__codelineno-153-60" href="#__codelineno-153-60"></a>
<a id="__codelineno-153-61" name="__codelineno-153-61" href="#__codelineno-153-61"></a>OpenTelemetry::Exporter::OTLP::Exporter.new(
<a id="__codelineno-153-62" name="__codelineno-153-62" href="#__codelineno-153-62"></a>
<a id="__codelineno-153-63" name="__codelineno-153-63" href="#__codelineno-153-63"></a>
<a id="__codelineno-153-64" name="__codelineno-153-64" href="#__codelineno-153-64"></a>
<a id="__codelineno-153-65" name="__codelineno-153-65" href="#__codelineno-153-65"></a>endpoint: DT_API_URL + &quot;/v1/traces&quot;,
<a id="__codelineno-153-66" name="__codelineno-153-66" href="#__codelineno-153-66"></a>
<a id="__codelineno-153-67" name="__codelineno-153-67" href="#__codelineno-153-67"></a>
<a id="__codelineno-153-68" name="__codelineno-153-68" href="#__codelineno-153-68"></a>
<a id="__codelineno-153-69" name="__codelineno-153-69" href="#__codelineno-153-69"></a>headers: {
<a id="__codelineno-153-70" name="__codelineno-153-70" href="#__codelineno-153-70"></a>
<a id="__codelineno-153-71" name="__codelineno-153-71" href="#__codelineno-153-71"></a>
<a id="__codelineno-153-72" name="__codelineno-153-72" href="#__codelineno-153-72"></a>
<a id="__codelineno-153-73" name="__codelineno-153-73" href="#__codelineno-153-73"></a>&quot;Authorization&quot;: &quot;Api-Token &quot; + DT_API_TOKEN
<a id="__codelineno-153-74" name="__codelineno-153-74" href="#__codelineno-153-74"></a>
<a id="__codelineno-153-75" name="__codelineno-153-75" href="#__codelineno-153-75"></a>
<a id="__codelineno-153-76" name="__codelineno-153-76" href="#__codelineno-153-76"></a>
<a id="__codelineno-153-77" name="__codelineno-153-77" href="#__codelineno-153-77"></a>}
<a id="__codelineno-153-78" name="__codelineno-153-78" href="#__codelineno-153-78"></a>
<a id="__codelineno-153-79" name="__codelineno-153-79" href="#__codelineno-153-79"></a>
<a id="__codelineno-153-80" name="__codelineno-153-80" href="#__codelineno-153-80"></a>
<a id="__codelineno-153-81" name="__codelineno-153-81" href="#__codelineno-153-81"></a>)
<a id="__codelineno-153-82" name="__codelineno-153-82" href="#__codelineno-153-82"></a>
<a id="__codelineno-153-83" name="__codelineno-153-83" href="#__codelineno-153-83"></a>
<a id="__codelineno-153-84" name="__codelineno-153-84" href="#__codelineno-153-84"></a>
<a id="__codelineno-153-85" name="__codelineno-153-85" href="#__codelineno-153-85"></a>)
<a id="__codelineno-153-86" name="__codelineno-153-86" href="#__codelineno-153-86"></a>
<a id="__codelineno-153-87" name="__codelineno-153-87" href="#__codelineno-153-87"></a>
<a id="__codelineno-153-88" name="__codelineno-153-88" href="#__codelineno-153-88"></a>
<a id="__codelineno-153-89" name="__codelineno-153-89" href="#__codelineno-153-89"></a>)
<a id="__codelineno-153-90" name="__codelineno-153-90" href="#__codelineno-153-90"></a>
<a id="__codelineno-153-91" name="__codelineno-153-91" href="#__codelineno-153-91"></a>
<a id="__codelineno-153-92" name="__codelineno-153-92" href="#__codelineno-153-92"></a>
<a id="__codelineno-153-93" name="__codelineno-153-93" href="#__codelineno-153-93"></a>end
<a id="__codelineno-153-94" name="__codelineno-153-94" href="#__codelineno-153-94"></a>
<a id="__codelineno-153-95" name="__codelineno-153-95" href="#__codelineno-153-95"></a>
<a id="__codelineno-153-96" name="__codelineno-153-96" href="#__codelineno-153-96"></a>
<a id="__codelineno-153-97" name="__codelineno-153-97" href="#__codelineno-153-97"></a>end
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.</p>
<p>Exporting to OneAgent</p>
<p>The Ruby SDK uses content compression by default, which is not supported by OneAgent yet.</p>
<p>When exporting to OneAgent, add <code>compression: "none"</code> to the <code>Exporter.new()</code> call to disable that feature. Otherwise, <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">export to ActiveGate</a> instead.
4. Call <code>init_opentelemetry</code> as early as possible during the startup of your application to ensure OpenTelemetry is initialized right from the start.</p>
<h2 id="step-3-optional-automatically-instrument-your-application-optional_1">Step 3 optional Automatically instrument your application Optional<a class="headerlink" href="#step-3-optional-automatically-instrument-your-application-optional_1" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the following dependency to your Gemfile.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-154-1" name="__codelineno-154-1" href="#__codelineno-154-1"></a>gem &#39;opentelemetry-instrumentation-all&#39;
</code></pre></div>
2. Add the following <code>require</code> declaration.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-155-1" name="__codelineno-155-1" href="#__codelineno-155-1"></a>require &#39;opentelemetry/instrumentation/all&#39;
</code></pre></div>
3. Add the following line after <code>c.service_version</code> in the <code>init_opentelemetry</code> function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-156-1" name="__codelineno-156-1" href="#__codelineno-156-1"></a>c.use_all
</code></pre></div>
<h2 id="step-4-optional-manually-instrument-your-application-optional_1">Step 4 optional Manually instrument your application Optional<a class="headerlink" href="#step-4-optional-manually-instrument-your-application-optional_1" title="Permanent link">&para;</a></h2>
<h3 id="add-tracing_5">Add tracing<a class="headerlink" href="#add-tracing_5" title="Permanent link">&para;</a></h3>
<ol>
<li>To create new spans, we first need a tracer object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-157-1" name="__codelineno-157-1" href="#__codelineno-157-1"></a>tracer = OpenTelemetry.tracer_provider.tracer(&#39;my-tracer&#39;)
</code></pre></div>
2. With <code>tracer</code>, we can now use <code>start_span()</code> to create and start new spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-158-1" name="__codelineno-158-1" href="#__codelineno-158-1"></a>span = tracer.start_span(&quot;Call to /myendpoint&quot;, kind: :internal)
<a id="__codelineno-158-2" name="__codelineno-158-2" href="#__codelineno-158-2"></a>
<a id="__codelineno-158-3" name="__codelineno-158-3" href="#__codelineno-158-3"></a>
<a id="__codelineno-158-4" name="__codelineno-158-4" href="#__codelineno-158-4"></a>
<a id="__codelineno-158-5" name="__codelineno-158-5" href="#__codelineno-158-5"></a>OpenTelemetry::Trace.with_span(span) do |span, context|
<a id="__codelineno-158-6" name="__codelineno-158-6" href="#__codelineno-158-6"></a>
<a id="__codelineno-158-7" name="__codelineno-158-7" href="#__codelineno-158-7"></a>
<a id="__codelineno-158-8" name="__codelineno-158-8" href="#__codelineno-158-8"></a>
<a id="__codelineno-158-9" name="__codelineno-158-9" href="#__codelineno-158-9"></a>span.set_attribute(&quot;http.method&quot;, &quot;GET&quot;)
<a id="__codelineno-158-10" name="__codelineno-158-10" href="#__codelineno-158-10"></a>
<a id="__codelineno-158-11" name="__codelineno-158-11" href="#__codelineno-158-11"></a>
<a id="__codelineno-158-12" name="__codelineno-158-12" href="#__codelineno-158-12"></a>
<a id="__codelineno-158-13" name="__codelineno-158-13" href="#__codelineno-158-13"></a>span.set_attribute(&quot;net.protocol.version&quot;, &quot;1.1&quot;)
<a id="__codelineno-158-14" name="__codelineno-158-14" href="#__codelineno-158-14"></a>
<a id="__codelineno-158-15" name="__codelineno-158-15" href="#__codelineno-158-15"></a>
<a id="__codelineno-158-16" name="__codelineno-158-16" href="#__codelineno-158-16"></a>
<a id="__codelineno-158-17" name="__codelineno-158-17" href="#__codelineno-158-17"></a># TODO your code goes here
<a id="__codelineno-158-18" name="__codelineno-158-18" href="#__codelineno-158-18"></a>
<a id="__codelineno-158-19" name="__codelineno-158-19" href="#__codelineno-158-19"></a>
<a id="__codelineno-158-20" name="__codelineno-158-20" href="#__codelineno-158-20"></a>
<a id="__codelineno-158-21" name="__codelineno-158-21" href="#__codelineno-158-21"></a>end
<a id="__codelineno-158-22" name="__codelineno-158-22" href="#__codelineno-158-22"></a>
<a id="__codelineno-158-23" name="__codelineno-158-23" href="#__codelineno-158-23"></a>
<a id="__codelineno-158-24" name="__codelineno-158-24" href="#__codelineno-158-24"></a>
<a id="__codelineno-158-25" name="__codelineno-158-25" href="#__codelineno-158-25"></a>rescue Exception =&gt; e
<a id="__codelineno-158-26" name="__codelineno-158-26" href="#__codelineno-158-26"></a>
<a id="__codelineno-158-27" name="__codelineno-158-27" href="#__codelineno-158-27"></a>
<a id="__codelineno-158-28" name="__codelineno-158-28" href="#__codelineno-158-28"></a>
<a id="__codelineno-158-29" name="__codelineno-158-29" href="#__codelineno-158-29"></a>span&amp;.record_exception(e)
<a id="__codelineno-158-30" name="__codelineno-158-30" href="#__codelineno-158-30"></a>
<a id="__codelineno-158-31" name="__codelineno-158-31" href="#__codelineno-158-31"></a>
<a id="__codelineno-158-32" name="__codelineno-158-32" href="#__codelineno-158-32"></a>
<a id="__codelineno-158-33" name="__codelineno-158-33" href="#__codelineno-158-33"></a>span&amp;.status = OpenTelemetry::Trace::Status.error(&quot;Unhandled exception of type: #{e.class}&quot;)
<a id="__codelineno-158-34" name="__codelineno-158-34" href="#__codelineno-158-34"></a>
<a id="__codelineno-158-35" name="__codelineno-158-35" href="#__codelineno-158-35"></a>
<a id="__codelineno-158-36" name="__codelineno-158-36" href="#__codelineno-158-36"></a>
<a id="__codelineno-158-37" name="__codelineno-158-37" href="#__codelineno-158-37"></a>raise e
<a id="__codelineno-158-38" name="__codelineno-158-38" href="#__codelineno-158-38"></a>
<a id="__codelineno-158-39" name="__codelineno-158-39" href="#__codelineno-158-39"></a>
<a id="__codelineno-158-40" name="__codelineno-158-40" href="#__codelineno-158-40"></a>
<a id="__codelineno-158-41" name="__codelineno-158-41" href="#__codelineno-158-41"></a>ensure
<a id="__codelineno-158-42" name="__codelineno-158-42" href="#__codelineno-158-42"></a>
<a id="__codelineno-158-43" name="__codelineno-158-43" href="#__codelineno-158-43"></a>
<a id="__codelineno-158-44" name="__codelineno-158-44" href="#__codelineno-158-44"></a>
<a id="__codelineno-158-45" name="__codelineno-158-45" href="#__codelineno-158-45"></a>span&amp;.finish
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new span and name it "Call to /myendpoint"</li>
<li>Add two attributes, following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
<li>Add a <code>TODO</code> in place of the eventual business logic</li>
<li>Call the span's <code>finish()</code> method to complete the span (in an <code>ensure</code> block to ensure the method is called)</li>
</ul>
<h2 id="process-logs-with-technology-bundle-parsers">Process logs with technology bundle parsers<a class="headerlink" href="#process-logs-with-technology-bundle-parsers" title="Permanent link">&para;</a></h2>
<p>Through OpenPipeline, you can use and configure technology bundles. A technology bundle is a library of parsers (processing rules) that process logs from various technologies, such as Java, .NET, and Microsoft IIS.</p>
<p>Parsers help you to improve filtering, troubleshooting, metrics, alerts, and dashboards by efficiently extracting log levels and relevant attributes. You can also use technology bundles to structure logs from technologies that are not supported by Dynatrace out of the box.</p>
<p><img alt="syslog-bundles" src="https://dt-cdn.net/images/env-syslogbundles-2589-90e4e38b45.png" /></p>
<p>For more information, see <a href="/docs/platform/openpipeline/use-cases/tutorial-technology-processor" title="Set up a processing pipeline to structure technology-specific logs according to Dynatrace Semantic Dictionary.">Process logs with technology bundle parsers</a>.</p>
<h3 id="collect-metrics_5">Collect metrics<a class="headerlink" href="#collect-metrics_5" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Ruby does not have stable support for metrics yet.</p>
<h3 id="connect-logs_5">Connect logs<a class="headerlink" href="#connect-logs_5" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Ruby does not have stable support for logs yet.</p>
<p>Depending on the status of the OpenTelemetry SDK, the pre-release version may nonetheless already allow the ingestion of your logs.</p>
<h3 id="ensure-context-propagation-optional_5">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_5" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<p>If you are using automatic instrumentation and your networking libraries are covered by automatic instrumentation, this will be automatically taken care of by the instrumentation libraries. Otherwise, your code needs to take this into account.</p>
<h4 id="extracting-the-context-when-receiving-a-request_5">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_5" title="Permanent link">&para;</a></h4>
<p>The following example uses the default propagator's <code>extract()</code> method to extract and recreate the context from the request, in <code>parent_context</code>. We can then pass that context to a <code>start_span</code> call to continue the previous trace with our spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-159-1" name="__codelineno-159-1" href="#__codelineno-159-1"></a>parent_context = OpenTelemetry.propagation.extract(
<a id="__codelineno-159-2" name="__codelineno-159-2" href="#__codelineno-159-2"></a>
<a id="__codelineno-159-3" name="__codelineno-159-3" href="#__codelineno-159-3"></a>
<a id="__codelineno-159-4" name="__codelineno-159-4" href="#__codelineno-159-4"></a>
<a id="__codelineno-159-5" name="__codelineno-159-5" href="#__codelineno-159-5"></a>env,
<a id="__codelineno-159-6" name="__codelineno-159-6" href="#__codelineno-159-6"></a>
<a id="__codelineno-159-7" name="__codelineno-159-7" href="#__codelineno-159-7"></a>
<a id="__codelineno-159-8" name="__codelineno-159-8" href="#__codelineno-159-8"></a>
<a id="__codelineno-159-9" name="__codelineno-159-9" href="#__codelineno-159-9"></a>getter: OpenTelemetry::Common::Propagation.rack_env_getter
<a id="__codelineno-159-10" name="__codelineno-159-10" href="#__codelineno-159-10"></a>
<a id="__codelineno-159-11" name="__codelineno-159-11" href="#__codelineno-159-11"></a>
<a id="__codelineno-159-12" name="__codelineno-159-12" href="#__codelineno-159-12"></a>
<a id="__codelineno-159-13" name="__codelineno-159-13" href="#__codelineno-159-13"></a>)
<a id="__codelineno-159-14" name="__codelineno-159-14" href="#__codelineno-159-14"></a>
<a id="__codelineno-159-15" name="__codelineno-159-15" href="#__codelineno-159-15"></a>
<a id="__codelineno-159-16" name="__codelineno-159-16" href="#__codelineno-159-16"></a>
<a id="__codelineno-159-17" name="__codelineno-159-17" href="#__codelineno-159-17"></a>span = tracer.start_span(&quot;hello world&quot;, with_parent: parent_context)
<a id="__codelineno-159-18" name="__codelineno-159-18" href="#__codelineno-159-18"></a>
<a id="__codelineno-159-19" name="__codelineno-159-19" href="#__codelineno-159-19"></a>
<a id="__codelineno-159-20" name="__codelineno-159-20" href="#__codelineno-159-20"></a>
<a id="__codelineno-159-21" name="__codelineno-159-21" href="#__codelineno-159-21"></a>OpenTelemetry::Trace.with_span(span) do |span, context|
<a id="__codelineno-159-22" name="__codelineno-159-22" href="#__codelineno-159-22"></a>
<a id="__codelineno-159-23" name="__codelineno-159-23" href="#__codelineno-159-23"></a>
<a id="__codelineno-159-24" name="__codelineno-159-24" href="#__codelineno-159-24"></a>
<a id="__codelineno-159-25" name="__codelineno-159-25" href="#__codelineno-159-25"></a>span.set_attribute(&quot;my-key-1&quot;, &quot;my-value-1&quot;)
<a id="__codelineno-159-26" name="__codelineno-159-26" href="#__codelineno-159-26"></a>
<a id="__codelineno-159-27" name="__codelineno-159-27" href="#__codelineno-159-27"></a>
<a id="__codelineno-159-28" name="__codelineno-159-28" href="#__codelineno-159-28"></a>
<a id="__codelineno-159-29" name="__codelineno-159-29" href="#__codelineno-159-29"></a># ... expansive query
<a id="__codelineno-159-30" name="__codelineno-159-30" href="#__codelineno-159-30"></a>
<a id="__codelineno-159-31" name="__codelineno-159-31" href="#__codelineno-159-31"></a>
<a id="__codelineno-159-32" name="__codelineno-159-32" href="#__codelineno-159-32"></a>
<a id="__codelineno-159-33" name="__codelineno-159-33" href="#__codelineno-159-33"></a>end
<a id="__codelineno-159-34" name="__codelineno-159-34" href="#__codelineno-159-34"></a>
<a id="__codelineno-159-35" name="__codelineno-159-35" href="#__codelineno-159-35"></a>
<a id="__codelineno-159-36" name="__codelineno-159-36" href="#__codelineno-159-36"></a>
<a id="__codelineno-159-37" name="__codelineno-159-37" href="#__codelineno-159-37"></a>ensure
<a id="__codelineno-159-38" name="__codelineno-159-38" href="#__codelineno-159-38"></a>
<a id="__codelineno-159-39" name="__codelineno-159-39" href="#__codelineno-159-39"></a>
<a id="__codelineno-159-40" name="__codelineno-159-40" href="#__codelineno-159-40"></a>
<a id="__codelineno-159-41" name="__codelineno-159-41" href="#__codelineno-159-41"></a>span&amp;.finish
<a id="__codelineno-159-42" name="__codelineno-159-42" href="#__codelineno-159-42"></a>
<a id="__codelineno-159-43" name="__codelineno-159-43" href="#__codelineno-159-43"></a>
<a id="__codelineno-159-44" name="__codelineno-159-44" href="#__codelineno-159-44"></a>
<a id="__codelineno-159-45" name="__codelineno-159-45" href="#__codelineno-159-45"></a>end
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_5">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_5" title="Permanent link">&para;</a></h4>
<p>The following example uses Ruby's standard <a href="https://ruby-doc.org/stdlib-2.7.0/libdoc/net/http/rdoc/Net/HTTP.html">Net:HTTP√Ø¬ª¬ø</a> library to call an instrumented third-party service. To add the necessary trace headers, we use the default propagator's <code>inject()</code> method.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-160-1" name="__codelineno-160-1" href="#__codelineno-160-1"></a>request = Net::HTTP::Get.new(uri.request_uri)
<a id="__codelineno-160-2" name="__codelineno-160-2" href="#__codelineno-160-2"></a>
<a id="__codelineno-160-3" name="__codelineno-160-3" href="#__codelineno-160-3"></a>
<a id="__codelineno-160-4" name="__codelineno-160-4" href="#__codelineno-160-4"></a>
<a id="__codelineno-160-5" name="__codelineno-160-5" href="#__codelineno-160-5"></a>OpenTelemetry.propagation.inject(request)
<a id="__codelineno-160-6" name="__codelineno-160-6" href="#__codelineno-160-6"></a>
<a id="__codelineno-160-7" name="__codelineno-160-7" href="#__codelineno-160-7"></a>
<a id="__codelineno-160-8" name="__codelineno-160-8" href="#__codelineno-160-8"></a>
<a id="__codelineno-160-9" name="__codelineno-160-9" href="#__codelineno-160-9"></a>response = http.request(request)
</code></pre></div>
<h2 id="step-5-configure-data-capture-to-meet-privacy-requirements-optional">Step 5 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-5-configure-data-capture-to-meet-privacy-requirements-optional" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-6-verify-data-ingestion-into-dynatrace_1">Step 6 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-6-verify-data-ingestion-into-dynatrace_1" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_23">Related topics<a class="headerlink" href="#related-topics_23" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-rustmd">Source: rust.md<a class="headerlink" href="#source-rustmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Rust application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/rust
scraped: 2026-02-16T21:17:48.305851</p>
<hr />
<h1 id="instrument-your-rust-application-with-opentelemetry">Instrument your Rust application with OpenTelemetry<a class="headerlink" href="#instrument-your-rust-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-rust-application-with-opentelemetry_1">Instrument your Rust application with OpenTelemetry<a class="headerlink" href="#instrument-your-rust-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Updated on Jan 07, 2026</li>
</ul>
<p>This walkthrough shows how to add observability to your Rust application using the OpenTelemetry Rust libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>No</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_20">Prerequisites<a class="headerlink" href="#prerequisites_20" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_6">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_6" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_6">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_6" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_6">Get API access token<a class="headerlink" href="#get-api-access-token_6" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-set-up-opentelemetry_2">Step 2 Set up OpenTelemetry<a class="headerlink" href="#step-2-set-up-opentelemetry_2" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the following crates to your <code>Cargo.toml</code> file.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-161-1" name="__codelineno-161-1" href="#__codelineno-161-1"></a>opentelemetry = { version = &quot;~0&quot;, features = [&quot;trace&quot;, &quot;metrics&quot;] }
<a id="__codelineno-161-2" name="__codelineno-161-2" href="#__codelineno-161-2"></a>
<a id="__codelineno-161-3" name="__codelineno-161-3" href="#__codelineno-161-3"></a>
<a id="__codelineno-161-4" name="__codelineno-161-4" href="#__codelineno-161-4"></a>
<a id="__codelineno-161-5" name="__codelineno-161-5" href="#__codelineno-161-5"></a>opentelemetry_sdk = { version = &quot;~0&quot;, features = [&quot;rt-tokio&quot;, &quot;metrics&quot;, &quot;logs&quot;, &quot;spec_unstable_metrics_views&quot;] }
<a id="__codelineno-161-6" name="__codelineno-161-6" href="#__codelineno-161-6"></a>
<a id="__codelineno-161-7" name="__codelineno-161-7" href="#__codelineno-161-7"></a>
<a id="__codelineno-161-8" name="__codelineno-161-8" href="#__codelineno-161-8"></a>
<a id="__codelineno-161-9" name="__codelineno-161-9" href="#__codelineno-161-9"></a>opentelemetry-otlp = { version = &quot;~0&quot;, features = [&quot;http-proto&quot;, &quot;http-json&quot;, &quot;logs&quot;, &quot;reqwest-blocking-client&quot;, &quot;reqwest-rustls&quot;] }
<a id="__codelineno-161-10" name="__codelineno-161-10" href="#__codelineno-161-10"></a>
<a id="__codelineno-161-11" name="__codelineno-161-11" href="#__codelineno-161-11"></a>
<a id="__codelineno-161-12" name="__codelineno-161-12" href="#__codelineno-161-12"></a>
<a id="__codelineno-161-13" name="__codelineno-161-13" href="#__codelineno-161-13"></a>opentelemetry-http = { version = &quot;~0&quot; }
<a id="__codelineno-161-14" name="__codelineno-161-14" href="#__codelineno-161-14"></a>
<a id="__codelineno-161-15" name="__codelineno-161-15" href="#__codelineno-161-15"></a>
<a id="__codelineno-161-16" name="__codelineno-161-16" href="#__codelineno-161-16"></a>
<a id="__codelineno-161-17" name="__codelineno-161-17" href="#__codelineno-161-17"></a>opentelemetry-appender-log = { version = &quot;~0&quot; }
<a id="__codelineno-161-18" name="__codelineno-161-18" href="#__codelineno-161-18"></a>
<a id="__codelineno-161-19" name="__codelineno-161-19" href="#__codelineno-161-19"></a>
<a id="__codelineno-161-20" name="__codelineno-161-20" href="#__codelineno-161-20"></a>
<a id="__codelineno-161-21" name="__codelineno-161-21" href="#__codelineno-161-21"></a>opentelemetry-semantic-conventions = { version = &quot;~0&quot; }
</code></pre></div>
2. Add the following <code>use</code> declarations to your code.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-162-1" name="__codelineno-162-1" href="#__codelineno-162-1"></a>use std::{env, convert::Infallible, net::SocketAddr, collections::HashMap, io::{BufRead, BufReader, Read}};
<a id="__codelineno-162-2" name="__codelineno-162-2" href="#__codelineno-162-2"></a>
<a id="__codelineno-162-3" name="__codelineno-162-3" href="#__codelineno-162-3"></a>
<a id="__codelineno-162-4" name="__codelineno-162-4" href="#__codelineno-162-4"></a>
<a id="__codelineno-162-5" name="__codelineno-162-5" href="#__codelineno-162-5"></a>use opentelemetry_sdk::trace::SdkTracerProvider;
<a id="__codelineno-162-6" name="__codelineno-162-6" href="#__codelineno-162-6"></a>
<a id="__codelineno-162-7" name="__codelineno-162-7" href="#__codelineno-162-7"></a>
<a id="__codelineno-162-8" name="__codelineno-162-8" href="#__codelineno-162-8"></a>
<a id="__codelineno-162-9" name="__codelineno-162-9" href="#__codelineno-162-9"></a>use opentelemetry_sdk::{logs::SdkLoggerProvider, metrics::{PeriodicReader, SdkMeterProvider}, propagation::TraceContextPropagator, Resource};
<a id="__codelineno-162-10" name="__codelineno-162-10" href="#__codelineno-162-10"></a>
<a id="__codelineno-162-11" name="__codelineno-162-11" href="#__codelineno-162-11"></a>
<a id="__codelineno-162-12" name="__codelineno-162-12" href="#__codelineno-162-12"></a>
<a id="__codelineno-162-13" name="__codelineno-162-13" href="#__codelineno-162-13"></a>use opentelemetry_otlp::{LogExporter, MetricExporter, Protocol, SpanExporter, WithExportConfig, WithHttpConfig};
<a id="__codelineno-162-14" name="__codelineno-162-14" href="#__codelineno-162-14"></a>
<a id="__codelineno-162-15" name="__codelineno-162-15" href="#__codelineno-162-15"></a>
<a id="__codelineno-162-16" name="__codelineno-162-16" href="#__codelineno-162-16"></a>
<a id="__codelineno-162-17" name="__codelineno-162-17" href="#__codelineno-162-17"></a>use opentelemetry_semantic_conventions::trace;
<a id="__codelineno-162-18" name="__codelineno-162-18" href="#__codelineno-162-18"></a>
<a id="__codelineno-162-19" name="__codelineno-162-19" href="#__codelineno-162-19"></a>
<a id="__codelineno-162-20" name="__codelineno-162-20" href="#__codelineno-162-20"></a>
<a id="__codelineno-162-21" name="__codelineno-162-21" href="#__codelineno-162-21"></a>use opentelemetry_http::{Bytes, HeaderExtractor, HeaderInjector};
<a id="__codelineno-162-22" name="__codelineno-162-22" href="#__codelineno-162-22"></a>
<a id="__codelineno-162-23" name="__codelineno-162-23" href="#__codelineno-162-23"></a>
<a id="__codelineno-162-24" name="__codelineno-162-24" href="#__codelineno-162-24"></a>
<a id="__codelineno-162-25" name="__codelineno-162-25" href="#__codelineno-162-25"></a>use opentelemetry_appender_log::OpenTelemetryLogBridge;
<a id="__codelineno-162-26" name="__codelineno-162-26" href="#__codelineno-162-26"></a>
<a id="__codelineno-162-27" name="__codelineno-162-27" href="#__codelineno-162-27"></a>
<a id="__codelineno-162-28" name="__codelineno-162-28" href="#__codelineno-162-28"></a>
<a id="__codelineno-162-29" name="__codelineno-162-29" href="#__codelineno-162-29"></a>use opentelemetry::{global, trace::{FutureExt, Span, SpanKind, TraceContextExt, Tracer}, Context, KeyValue};
</code></pre></div>
3. Add the following function to your startup file.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-163-1" name="__codelineno-163-1" href="#__codelineno-163-1"></a>fn init_opentelemetry() {
<a id="__codelineno-163-2" name="__codelineno-163-2" href="#__codelineno-163-2"></a>
<a id="__codelineno-163-3" name="__codelineno-163-3" href="#__codelineno-163-3"></a>
<a id="__codelineno-163-4" name="__codelineno-163-4" href="#__codelineno-163-4"></a>
<a id="__codelineno-163-5" name="__codelineno-163-5" href="#__codelineno-163-5"></a>// Helper function to read potentially available OneAgent data
<a id="__codelineno-163-6" name="__codelineno-163-6" href="#__codelineno-163-6"></a>
<a id="__codelineno-163-7" name="__codelineno-163-7" href="#__codelineno-163-7"></a>
<a id="__codelineno-163-8" name="__codelineno-163-8" href="#__codelineno-163-8"></a>
<a id="__codelineno-163-9" name="__codelineno-163-9" href="#__codelineno-163-9"></a>fn read_dt_metadata() -&gt;  Vec&lt;KeyValue&gt; {
<a id="__codelineno-163-10" name="__codelineno-163-10" href="#__codelineno-163-10"></a>
<a id="__codelineno-163-11" name="__codelineno-163-11" href="#__codelineno-163-11"></a>
<a id="__codelineno-163-12" name="__codelineno-163-12" href="#__codelineno-163-12"></a>
<a id="__codelineno-163-13" name="__codelineno-163-13" href="#__codelineno-163-13"></a>fn read_single(path: &amp;str, metadata: &amp;mut Vec&lt;KeyValue&gt;) -&gt; std::io::Result&lt;()&gt; {
<a id="__codelineno-163-14" name="__codelineno-163-14" href="#__codelineno-163-14"></a>
<a id="__codelineno-163-15" name="__codelineno-163-15" href="#__codelineno-163-15"></a>
<a id="__codelineno-163-16" name="__codelineno-163-16" href="#__codelineno-163-16"></a>
<a id="__codelineno-163-17" name="__codelineno-163-17" href="#__codelineno-163-17"></a>let mut file = std::fs::File::open(path)?;
<a id="__codelineno-163-18" name="__codelineno-163-18" href="#__codelineno-163-18"></a>
<a id="__codelineno-163-19" name="__codelineno-163-19" href="#__codelineno-163-19"></a>
<a id="__codelineno-163-20" name="__codelineno-163-20" href="#__codelineno-163-20"></a>
<a id="__codelineno-163-21" name="__codelineno-163-21" href="#__codelineno-163-21"></a>if path.starts_with(&quot;dt_metadata&quot;) {
<a id="__codelineno-163-22" name="__codelineno-163-22" href="#__codelineno-163-22"></a>
<a id="__codelineno-163-23" name="__codelineno-163-23" href="#__codelineno-163-23"></a>
<a id="__codelineno-163-24" name="__codelineno-163-24" href="#__codelineno-163-24"></a>
<a id="__codelineno-163-25" name="__codelineno-163-25" href="#__codelineno-163-25"></a>let mut name = String::new();
<a id="__codelineno-163-26" name="__codelineno-163-26" href="#__codelineno-163-26"></a>
<a id="__codelineno-163-27" name="__codelineno-163-27" href="#__codelineno-163-27"></a>
<a id="__codelineno-163-28" name="__codelineno-163-28" href="#__codelineno-163-28"></a>
<a id="__codelineno-163-29" name="__codelineno-163-29" href="#__codelineno-163-29"></a>file.read_to_string(&amp;mut name)?;
<a id="__codelineno-163-30" name="__codelineno-163-30" href="#__codelineno-163-30"></a>
<a id="__codelineno-163-31" name="__codelineno-163-31" href="#__codelineno-163-31"></a>
<a id="__codelineno-163-32" name="__codelineno-163-32" href="#__codelineno-163-32"></a>
<a id="__codelineno-163-33" name="__codelineno-163-33" href="#__codelineno-163-33"></a>file = std::fs::File::open(name)?;
<a id="__codelineno-163-34" name="__codelineno-163-34" href="#__codelineno-163-34"></a>
<a id="__codelineno-163-35" name="__codelineno-163-35" href="#__codelineno-163-35"></a>
<a id="__codelineno-163-36" name="__codelineno-163-36" href="#__codelineno-163-36"></a>
<a id="__codelineno-163-37" name="__codelineno-163-37" href="#__codelineno-163-37"></a>}
<a id="__codelineno-163-38" name="__codelineno-163-38" href="#__codelineno-163-38"></a>
<a id="__codelineno-163-39" name="__codelineno-163-39" href="#__codelineno-163-39"></a>
<a id="__codelineno-163-40" name="__codelineno-163-40" href="#__codelineno-163-40"></a>
<a id="__codelineno-163-41" name="__codelineno-163-41" href="#__codelineno-163-41"></a>for line in BufReader::new(file).lines() {
<a id="__codelineno-163-42" name="__codelineno-163-42" href="#__codelineno-163-42"></a>
<a id="__codelineno-163-43" name="__codelineno-163-43" href="#__codelineno-163-43"></a>
<a id="__codelineno-163-44" name="__codelineno-163-44" href="#__codelineno-163-44"></a>
<a id="__codelineno-163-45" name="__codelineno-163-45" href="#__codelineno-163-45"></a>if let Some((k, v)) = line?.split_once(&#39;=&#39;) {
<a id="__codelineno-163-46" name="__codelineno-163-46" href="#__codelineno-163-46"></a>
<a id="__codelineno-163-47" name="__codelineno-163-47" href="#__codelineno-163-47"></a>
<a id="__codelineno-163-48" name="__codelineno-163-48" href="#__codelineno-163-48"></a>
<a id="__codelineno-163-49" name="__codelineno-163-49" href="#__codelineno-163-49"></a>metadata.push(KeyValue::new(k.to_string(), v.to_string()))
<a id="__codelineno-163-50" name="__codelineno-163-50" href="#__codelineno-163-50"></a>
<a id="__codelineno-163-51" name="__codelineno-163-51" href="#__codelineno-163-51"></a>
<a id="__codelineno-163-52" name="__codelineno-163-52" href="#__codelineno-163-52"></a>
<a id="__codelineno-163-53" name="__codelineno-163-53" href="#__codelineno-163-53"></a>}
<a id="__codelineno-163-54" name="__codelineno-163-54" href="#__codelineno-163-54"></a>
<a id="__codelineno-163-55" name="__codelineno-163-55" href="#__codelineno-163-55"></a>
<a id="__codelineno-163-56" name="__codelineno-163-56" href="#__codelineno-163-56"></a>
<a id="__codelineno-163-57" name="__codelineno-163-57" href="#__codelineno-163-57"></a>}
<a id="__codelineno-163-58" name="__codelineno-163-58" href="#__codelineno-163-58"></a>
<a id="__codelineno-163-59" name="__codelineno-163-59" href="#__codelineno-163-59"></a>
<a id="__codelineno-163-60" name="__codelineno-163-60" href="#__codelineno-163-60"></a>
<a id="__codelineno-163-61" name="__codelineno-163-61" href="#__codelineno-163-61"></a>Ok(())
<a id="__codelineno-163-62" name="__codelineno-163-62" href="#__codelineno-163-62"></a>
<a id="__codelineno-163-63" name="__codelineno-163-63" href="#__codelineno-163-63"></a>
<a id="__codelineno-163-64" name="__codelineno-163-64" href="#__codelineno-163-64"></a>
<a id="__codelineno-163-65" name="__codelineno-163-65" href="#__codelineno-163-65"></a>}
<a id="__codelineno-163-66" name="__codelineno-163-66" href="#__codelineno-163-66"></a>
<a id="__codelineno-163-67" name="__codelineno-163-67" href="#__codelineno-163-67"></a>
<a id="__codelineno-163-68" name="__codelineno-163-68" href="#__codelineno-163-68"></a>
<a id="__codelineno-163-69" name="__codelineno-163-69" href="#__codelineno-163-69"></a>let mut metadata = Vec::new();
<a id="__codelineno-163-70" name="__codelineno-163-70" href="#__codelineno-163-70"></a>
<a id="__codelineno-163-71" name="__codelineno-163-71" href="#__codelineno-163-71"></a>
<a id="__codelineno-163-72" name="__codelineno-163-72" href="#__codelineno-163-72"></a>
<a id="__codelineno-163-73" name="__codelineno-163-73" href="#__codelineno-163-73"></a>for name in [
<a id="__codelineno-163-74" name="__codelineno-163-74" href="#__codelineno-163-74"></a>
<a id="__codelineno-163-75" name="__codelineno-163-75" href="#__codelineno-163-75"></a>
<a id="__codelineno-163-76" name="__codelineno-163-76" href="#__codelineno-163-76"></a>
<a id="__codelineno-163-77" name="__codelineno-163-77" href="#__codelineno-163-77"></a>&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;,
<a id="__codelineno-163-78" name="__codelineno-163-78" href="#__codelineno-163-78"></a>
<a id="__codelineno-163-79" name="__codelineno-163-79" href="#__codelineno-163-79"></a>
<a id="__codelineno-163-80" name="__codelineno-163-80" href="#__codelineno-163-80"></a>
<a id="__codelineno-163-81" name="__codelineno-163-81" href="#__codelineno-163-81"></a>&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;,
<a id="__codelineno-163-82" name="__codelineno-163-82" href="#__codelineno-163-82"></a>
<a id="__codelineno-163-83" name="__codelineno-163-83" href="#__codelineno-163-83"></a>
<a id="__codelineno-163-84" name="__codelineno-163-84" href="#__codelineno-163-84"></a>
<a id="__codelineno-163-85" name="__codelineno-163-85" href="#__codelineno-163-85"></a>&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;
<a id="__codelineno-163-86" name="__codelineno-163-86" href="#__codelineno-163-86"></a>
<a id="__codelineno-163-87" name="__codelineno-163-87" href="#__codelineno-163-87"></a>
<a id="__codelineno-163-88" name="__codelineno-163-88" href="#__codelineno-163-88"></a>
<a id="__codelineno-163-89" name="__codelineno-163-89" href="#__codelineno-163-89"></a>] {
<a id="__codelineno-163-90" name="__codelineno-163-90" href="#__codelineno-163-90"></a>
<a id="__codelineno-163-91" name="__codelineno-163-91" href="#__codelineno-163-91"></a>
<a id="__codelineno-163-92" name="__codelineno-163-92" href="#__codelineno-163-92"></a>
<a id="__codelineno-163-93" name="__codelineno-163-93" href="#__codelineno-163-93"></a>let _ = read_single(name, &amp;mut metadata);
<a id="__codelineno-163-94" name="__codelineno-163-94" href="#__codelineno-163-94"></a>
<a id="__codelineno-163-95" name="__codelineno-163-95" href="#__codelineno-163-95"></a>
<a id="__codelineno-163-96" name="__codelineno-163-96" href="#__codelineno-163-96"></a>
<a id="__codelineno-163-97" name="__codelineno-163-97" href="#__codelineno-163-97"></a>}
<a id="__codelineno-163-98" name="__codelineno-163-98" href="#__codelineno-163-98"></a>
<a id="__codelineno-163-99" name="__codelineno-163-99" href="#__codelineno-163-99"></a>
<a id="__codelineno-163-100" name="__codelineno-163-100" href="#__codelineno-163-100"></a>
<a id="__codelineno-163-101" name="__codelineno-163-101" href="#__codelineno-163-101"></a>return metadata;
<a id="__codelineno-163-102" name="__codelineno-163-102" href="#__codelineno-163-102"></a>
<a id="__codelineno-163-103" name="__codelineno-163-103" href="#__codelineno-163-103"></a>
<a id="__codelineno-163-104" name="__codelineno-163-104" href="#__codelineno-163-104"></a>
<a id="__codelineno-163-105" name="__codelineno-163-105" href="#__codelineno-163-105"></a>}
<a id="__codelineno-163-106" name="__codelineno-163-106" href="#__codelineno-163-106"></a>
<a id="__codelineno-163-107" name="__codelineno-163-107" href="#__codelineno-163-107"></a>
<a id="__codelineno-163-108" name="__codelineno-163-108" href="#__codelineno-163-108"></a>
<a id="__codelineno-163-109" name="__codelineno-163-109" href="#__codelineno-163-109"></a>// ===== GENERAL SETUP =====
<a id="__codelineno-163-110" name="__codelineno-163-110" href="#__codelineno-163-110"></a>
<a id="__codelineno-163-111" name="__codelineno-163-111" href="#__codelineno-163-111"></a>
<a id="__codelineno-163-112" name="__codelineno-163-112" href="#__codelineno-163-112"></a>
<a id="__codelineno-163-113" name="__codelineno-163-113" href="#__codelineno-163-113"></a>let dt_api_token = env::var(&quot;DT_API_TOKEN&quot;).unwrap(); // TODO: change
<a id="__codelineno-163-114" name="__codelineno-163-114" href="#__codelineno-163-114"></a>
<a id="__codelineno-163-115" name="__codelineno-163-115" href="#__codelineno-163-115"></a>
<a id="__codelineno-163-116" name="__codelineno-163-116" href="#__codelineno-163-116"></a>
<a id="__codelineno-163-117" name="__codelineno-163-117" href="#__codelineno-163-117"></a>let dt_api_url = env::var(&quot;DT_API_URL&quot;).unwrap();
<a id="__codelineno-163-118" name="__codelineno-163-118" href="#__codelineno-163-118"></a>
<a id="__codelineno-163-119" name="__codelineno-163-119" href="#__codelineno-163-119"></a>
<a id="__codelineno-163-120" name="__codelineno-163-120" href="#__codelineno-163-120"></a>
<a id="__codelineno-163-121" name="__codelineno-163-121" href="#__codelineno-163-121"></a>let mut map = HashMap::new();
<a id="__codelineno-163-122" name="__codelineno-163-122" href="#__codelineno-163-122"></a>
<a id="__codelineno-163-123" name="__codelineno-163-123" href="#__codelineno-163-123"></a>
<a id="__codelineno-163-124" name="__codelineno-163-124" href="#__codelineno-163-124"></a>
<a id="__codelineno-163-125" name="__codelineno-163-125" href="#__codelineno-163-125"></a>map.insert(&quot;Authorization&quot;.to_string(), format!(&quot;Api-Token {}&quot;, dt_api_token));
<a id="__codelineno-163-126" name="__codelineno-163-126" href="#__codelineno-163-126"></a>
<a id="__codelineno-163-127" name="__codelineno-163-127" href="#__codelineno-163-127"></a>
<a id="__codelineno-163-128" name="__codelineno-163-128" href="#__codelineno-163-128"></a>
<a id="__codelineno-163-129" name="__codelineno-163-129" href="#__codelineno-163-129"></a>let resource = Resource::builder()
<a id="__codelineno-163-130" name="__codelineno-163-130" href="#__codelineno-163-130"></a>
<a id="__codelineno-163-131" name="__codelineno-163-131" href="#__codelineno-163-131"></a>
<a id="__codelineno-163-132" name="__codelineno-163-132" href="#__codelineno-163-132"></a>
<a id="__codelineno-163-133" name="__codelineno-163-133" href="#__codelineno-163-133"></a>.with_service_name(&quot;rust-manual-quickstart&quot;)
<a id="__codelineno-163-134" name="__codelineno-163-134" href="#__codelineno-163-134"></a>
<a id="__codelineno-163-135" name="__codelineno-163-135" href="#__codelineno-163-135"></a>
<a id="__codelineno-163-136" name="__codelineno-163-136" href="#__codelineno-163-136"></a>
<a id="__codelineno-163-137" name="__codelineno-163-137" href="#__codelineno-163-137"></a>.with_attributes(read_dt_metadata())
<a id="__codelineno-163-138" name="__codelineno-163-138" href="#__codelineno-163-138"></a>
<a id="__codelineno-163-139" name="__codelineno-163-139" href="#__codelineno-163-139"></a>
<a id="__codelineno-163-140" name="__codelineno-163-140" href="#__codelineno-163-140"></a>
<a id="__codelineno-163-141" name="__codelineno-163-141" href="#__codelineno-163-141"></a>.build();
<a id="__codelineno-163-142" name="__codelineno-163-142" href="#__codelineno-163-142"></a>
<a id="__codelineno-163-143" name="__codelineno-163-143" href="#__codelineno-163-143"></a>
<a id="__codelineno-163-144" name="__codelineno-163-144" href="#__codelineno-163-144"></a>
<a id="__codelineno-163-145" name="__codelineno-163-145" href="#__codelineno-163-145"></a>// ===== TRACING SETUP =====
<a id="__codelineno-163-146" name="__codelineno-163-146" href="#__codelineno-163-146"></a>
<a id="__codelineno-163-147" name="__codelineno-163-147" href="#__codelineno-163-147"></a>
<a id="__codelineno-163-148" name="__codelineno-163-148" href="#__codelineno-163-148"></a>
<a id="__codelineno-163-149" name="__codelineno-163-149" href="#__codelineno-163-149"></a>global::set_text_map_propagator(TraceContextPropagator::new());
<a id="__codelineno-163-150" name="__codelineno-163-150" href="#__codelineno-163-150"></a>
<a id="__codelineno-163-151" name="__codelineno-163-151" href="#__codelineno-163-151"></a>
<a id="__codelineno-163-152" name="__codelineno-163-152" href="#__codelineno-163-152"></a>
<a id="__codelineno-163-153" name="__codelineno-163-153" href="#__codelineno-163-153"></a>let tracer_exporter = SpanExporter::builder()
<a id="__codelineno-163-154" name="__codelineno-163-154" href="#__codelineno-163-154"></a>
<a id="__codelineno-163-155" name="__codelineno-163-155" href="#__codelineno-163-155"></a>
<a id="__codelineno-163-156" name="__codelineno-163-156" href="#__codelineno-163-156"></a>
<a id="__codelineno-163-157" name="__codelineno-163-157" href="#__codelineno-163-157"></a>.with_http()
<a id="__codelineno-163-158" name="__codelineno-163-158" href="#__codelineno-163-158"></a>
<a id="__codelineno-163-159" name="__codelineno-163-159" href="#__codelineno-163-159"></a>
<a id="__codelineno-163-160" name="__codelineno-163-160" href="#__codelineno-163-160"></a>
<a id="__codelineno-163-161" name="__codelineno-163-161" href="#__codelineno-163-161"></a>.with_headers(map.clone())
<a id="__codelineno-163-162" name="__codelineno-163-162" href="#__codelineno-163-162"></a>
<a id="__codelineno-163-163" name="__codelineno-163-163" href="#__codelineno-163-163"></a>
<a id="__codelineno-163-164" name="__codelineno-163-164" href="#__codelineno-163-164"></a>
<a id="__codelineno-163-165" name="__codelineno-163-165" href="#__codelineno-163-165"></a>.with_protocol(Protocol::HttpBinary)
<a id="__codelineno-163-166" name="__codelineno-163-166" href="#__codelineno-163-166"></a>
<a id="__codelineno-163-167" name="__codelineno-163-167" href="#__codelineno-163-167"></a>
<a id="__codelineno-163-168" name="__codelineno-163-168" href="#__codelineno-163-168"></a>
<a id="__codelineno-163-169" name="__codelineno-163-169" href="#__codelineno-163-169"></a>.with_endpoint(dt_api_url.clone() + &quot;/v1/traces&quot;)
<a id="__codelineno-163-170" name="__codelineno-163-170" href="#__codelineno-163-170"></a>
<a id="__codelineno-163-171" name="__codelineno-163-171" href="#__codelineno-163-171"></a>
<a id="__codelineno-163-172" name="__codelineno-163-172" href="#__codelineno-163-172"></a>
<a id="__codelineno-163-173" name="__codelineno-163-173" href="#__codelineno-163-173"></a>.build()
<a id="__codelineno-163-174" name="__codelineno-163-174" href="#__codelineno-163-174"></a>
<a id="__codelineno-163-175" name="__codelineno-163-175" href="#__codelineno-163-175"></a>
<a id="__codelineno-163-176" name="__codelineno-163-176" href="#__codelineno-163-176"></a>
<a id="__codelineno-163-177" name="__codelineno-163-177" href="#__codelineno-163-177"></a>.unwrap();
<a id="__codelineno-163-178" name="__codelineno-163-178" href="#__codelineno-163-178"></a>
<a id="__codelineno-163-179" name="__codelineno-163-179" href="#__codelineno-163-179"></a>
<a id="__codelineno-163-180" name="__codelineno-163-180" href="#__codelineno-163-180"></a>
<a id="__codelineno-163-181" name="__codelineno-163-181" href="#__codelineno-163-181"></a>let tracer_provider = SdkTracerProvider::builder()
<a id="__codelineno-163-182" name="__codelineno-163-182" href="#__codelineno-163-182"></a>
<a id="__codelineno-163-183" name="__codelineno-163-183" href="#__codelineno-163-183"></a>
<a id="__codelineno-163-184" name="__codelineno-163-184" href="#__codelineno-163-184"></a>
<a id="__codelineno-163-185" name="__codelineno-163-185" href="#__codelineno-163-185"></a>.with_resource(resource.clone())
<a id="__codelineno-163-186" name="__codelineno-163-186" href="#__codelineno-163-186"></a>
<a id="__codelineno-163-187" name="__codelineno-163-187" href="#__codelineno-163-187"></a>
<a id="__codelineno-163-188" name="__codelineno-163-188" href="#__codelineno-163-188"></a>
<a id="__codelineno-163-189" name="__codelineno-163-189" href="#__codelineno-163-189"></a>.with_batch_exporter(tracer_exporter)
<a id="__codelineno-163-190" name="__codelineno-163-190" href="#__codelineno-163-190"></a>
<a id="__codelineno-163-191" name="__codelineno-163-191" href="#__codelineno-163-191"></a>
<a id="__codelineno-163-192" name="__codelineno-163-192" href="#__codelineno-163-192"></a>
<a id="__codelineno-163-193" name="__codelineno-163-193" href="#__codelineno-163-193"></a>.build();
<a id="__codelineno-163-194" name="__codelineno-163-194" href="#__codelineno-163-194"></a>
<a id="__codelineno-163-195" name="__codelineno-163-195" href="#__codelineno-163-195"></a>
<a id="__codelineno-163-196" name="__codelineno-163-196" href="#__codelineno-163-196"></a>
<a id="__codelineno-163-197" name="__codelineno-163-197" href="#__codelineno-163-197"></a>global::set_tracer_provider(tracer_provider.clone());
<a id="__codelineno-163-198" name="__codelineno-163-198" href="#__codelineno-163-198"></a>
<a id="__codelineno-163-199" name="__codelineno-163-199" href="#__codelineno-163-199"></a>
<a id="__codelineno-163-200" name="__codelineno-163-200" href="#__codelineno-163-200"></a>
<a id="__codelineno-163-201" name="__codelineno-163-201" href="#__codelineno-163-201"></a>// ===== METRICS SETUP ======
<a id="__codelineno-163-202" name="__codelineno-163-202" href="#__codelineno-163-202"></a>
<a id="__codelineno-163-203" name="__codelineno-163-203" href="#__codelineno-163-203"></a>
<a id="__codelineno-163-204" name="__codelineno-163-204" href="#__codelineno-163-204"></a>
<a id="__codelineno-163-205" name="__codelineno-163-205" href="#__codelineno-163-205"></a>let metrics_exporter = MetricExporter::builder()
<a id="__codelineno-163-206" name="__codelineno-163-206" href="#__codelineno-163-206"></a>
<a id="__codelineno-163-207" name="__codelineno-163-207" href="#__codelineno-163-207"></a>
<a id="__codelineno-163-208" name="__codelineno-163-208" href="#__codelineno-163-208"></a>
<a id="__codelineno-163-209" name="__codelineno-163-209" href="#__codelineno-163-209"></a>.with_http()
<a id="__codelineno-163-210" name="__codelineno-163-210" href="#__codelineno-163-210"></a>
<a id="__codelineno-163-211" name="__codelineno-163-211" href="#__codelineno-163-211"></a>
<a id="__codelineno-163-212" name="__codelineno-163-212" href="#__codelineno-163-212"></a>
<a id="__codelineno-163-213" name="__codelineno-163-213" href="#__codelineno-163-213"></a>.with_headers(map.clone())
<a id="__codelineno-163-214" name="__codelineno-163-214" href="#__codelineno-163-214"></a>
<a id="__codelineno-163-215" name="__codelineno-163-215" href="#__codelineno-163-215"></a>
<a id="__codelineno-163-216" name="__codelineno-163-216" href="#__codelineno-163-216"></a>
<a id="__codelineno-163-217" name="__codelineno-163-217" href="#__codelineno-163-217"></a>.with_endpoint(dt_api_url.clone() + &quot;/v1/metrics&quot;)
<a id="__codelineno-163-218" name="__codelineno-163-218" href="#__codelineno-163-218"></a>
<a id="__codelineno-163-219" name="__codelineno-163-219" href="#__codelineno-163-219"></a>
<a id="__codelineno-163-220" name="__codelineno-163-220" href="#__codelineno-163-220"></a>
<a id="__codelineno-163-221" name="__codelineno-163-221" href="#__codelineno-163-221"></a>.with_protocol(opentelemetry_otlp::Protocol::HttpBinary)
<a id="__codelineno-163-222" name="__codelineno-163-222" href="#__codelineno-163-222"></a>
<a id="__codelineno-163-223" name="__codelineno-163-223" href="#__codelineno-163-223"></a>
<a id="__codelineno-163-224" name="__codelineno-163-224" href="#__codelineno-163-224"></a>
<a id="__codelineno-163-225" name="__codelineno-163-225" href="#__codelineno-163-225"></a>.build()
<a id="__codelineno-163-226" name="__codelineno-163-226" href="#__codelineno-163-226"></a>
<a id="__codelineno-163-227" name="__codelineno-163-227" href="#__codelineno-163-227"></a>
<a id="__codelineno-163-228" name="__codelineno-163-228" href="#__codelineno-163-228"></a>
<a id="__codelineno-163-229" name="__codelineno-163-229" href="#__codelineno-163-229"></a>.unwrap();
<a id="__codelineno-163-230" name="__codelineno-163-230" href="#__codelineno-163-230"></a>
<a id="__codelineno-163-231" name="__codelineno-163-231" href="#__codelineno-163-231"></a>
<a id="__codelineno-163-232" name="__codelineno-163-232" href="#__codelineno-163-232"></a>
<a id="__codelineno-163-233" name="__codelineno-163-233" href="#__codelineno-163-233"></a>let meter_provider = SdkMeterProvider::builder()
<a id="__codelineno-163-234" name="__codelineno-163-234" href="#__codelineno-163-234"></a>
<a id="__codelineno-163-235" name="__codelineno-163-235" href="#__codelineno-163-235"></a>
<a id="__codelineno-163-236" name="__codelineno-163-236" href="#__codelineno-163-236"></a>
<a id="__codelineno-163-237" name="__codelineno-163-237" href="#__codelineno-163-237"></a>.with_reader(PeriodicReader::builder(metrics_exporter).build())
<a id="__codelineno-163-238" name="__codelineno-163-238" href="#__codelineno-163-238"></a>
<a id="__codelineno-163-239" name="__codelineno-163-239" href="#__codelineno-163-239"></a>
<a id="__codelineno-163-240" name="__codelineno-163-240" href="#__codelineno-163-240"></a>
<a id="__codelineno-163-241" name="__codelineno-163-241" href="#__codelineno-163-241"></a>.with_resource(resource.clone())
<a id="__codelineno-163-242" name="__codelineno-163-242" href="#__codelineno-163-242"></a>
<a id="__codelineno-163-243" name="__codelineno-163-243" href="#__codelineno-163-243"></a>
<a id="__codelineno-163-244" name="__codelineno-163-244" href="#__codelineno-163-244"></a>
<a id="__codelineno-163-245" name="__codelineno-163-245" href="#__codelineno-163-245"></a>.build();
<a id="__codelineno-163-246" name="__codelineno-163-246" href="#__codelineno-163-246"></a>
<a id="__codelineno-163-247" name="__codelineno-163-247" href="#__codelineno-163-247"></a>
<a id="__codelineno-163-248" name="__codelineno-163-248" href="#__codelineno-163-248"></a>
<a id="__codelineno-163-249" name="__codelineno-163-249" href="#__codelineno-163-249"></a>global::set_meter_provider(meter_provider);
<a id="__codelineno-163-250" name="__codelineno-163-250" href="#__codelineno-163-250"></a>
<a id="__codelineno-163-251" name="__codelineno-163-251" href="#__codelineno-163-251"></a>
<a id="__codelineno-163-252" name="__codelineno-163-252" href="#__codelineno-163-252"></a>
<a id="__codelineno-163-253" name="__codelineno-163-253" href="#__codelineno-163-253"></a>// ===== LOGS SETUP ======
<a id="__codelineno-163-254" name="__codelineno-163-254" href="#__codelineno-163-254"></a>
<a id="__codelineno-163-255" name="__codelineno-163-255" href="#__codelineno-163-255"></a>
<a id="__codelineno-163-256" name="__codelineno-163-256" href="#__codelineno-163-256"></a>
<a id="__codelineno-163-257" name="__codelineno-163-257" href="#__codelineno-163-257"></a>let logger_exporter = LogExporter::builder()
<a id="__codelineno-163-258" name="__codelineno-163-258" href="#__codelineno-163-258"></a>
<a id="__codelineno-163-259" name="__codelineno-163-259" href="#__codelineno-163-259"></a>
<a id="__codelineno-163-260" name="__codelineno-163-260" href="#__codelineno-163-260"></a>
<a id="__codelineno-163-261" name="__codelineno-163-261" href="#__codelineno-163-261"></a>.with_http()
<a id="__codelineno-163-262" name="__codelineno-163-262" href="#__codelineno-163-262"></a>
<a id="__codelineno-163-263" name="__codelineno-163-263" href="#__codelineno-163-263"></a>
<a id="__codelineno-163-264" name="__codelineno-163-264" href="#__codelineno-163-264"></a>
<a id="__codelineno-163-265" name="__codelineno-163-265" href="#__codelineno-163-265"></a>.with_headers(map.clone())
<a id="__codelineno-163-266" name="__codelineno-163-266" href="#__codelineno-163-266"></a>
<a id="__codelineno-163-267" name="__codelineno-163-267" href="#__codelineno-163-267"></a>
<a id="__codelineno-163-268" name="__codelineno-163-268" href="#__codelineno-163-268"></a>
<a id="__codelineno-163-269" name="__codelineno-163-269" href="#__codelineno-163-269"></a>.with_endpoint(dt_api_url.clone() + &quot;/v1/logs&quot;)
<a id="__codelineno-163-270" name="__codelineno-163-270" href="#__codelineno-163-270"></a>
<a id="__codelineno-163-271" name="__codelineno-163-271" href="#__codelineno-163-271"></a>
<a id="__codelineno-163-272" name="__codelineno-163-272" href="#__codelineno-163-272"></a>
<a id="__codelineno-163-273" name="__codelineno-163-273" href="#__codelineno-163-273"></a>.with_protocol(opentelemetry_otlp::Protocol::HttpBinary)
<a id="__codelineno-163-274" name="__codelineno-163-274" href="#__codelineno-163-274"></a>
<a id="__codelineno-163-275" name="__codelineno-163-275" href="#__codelineno-163-275"></a>
<a id="__codelineno-163-276" name="__codelineno-163-276" href="#__codelineno-163-276"></a>
<a id="__codelineno-163-277" name="__codelineno-163-277" href="#__codelineno-163-277"></a>.build()
<a id="__codelineno-163-278" name="__codelineno-163-278" href="#__codelineno-163-278"></a>
<a id="__codelineno-163-279" name="__codelineno-163-279" href="#__codelineno-163-279"></a>
<a id="__codelineno-163-280" name="__codelineno-163-280" href="#__codelineno-163-280"></a>
<a id="__codelineno-163-281" name="__codelineno-163-281" href="#__codelineno-163-281"></a>.unwrap();
<a id="__codelineno-163-282" name="__codelineno-163-282" href="#__codelineno-163-282"></a>
<a id="__codelineno-163-283" name="__codelineno-163-283" href="#__codelineno-163-283"></a>
<a id="__codelineno-163-284" name="__codelineno-163-284" href="#__codelineno-163-284"></a>
<a id="__codelineno-163-285" name="__codelineno-163-285" href="#__codelineno-163-285"></a>let logger_provider = SdkLoggerProvider::builder()
<a id="__codelineno-163-286" name="__codelineno-163-286" href="#__codelineno-163-286"></a>
<a id="__codelineno-163-287" name="__codelineno-163-287" href="#__codelineno-163-287"></a>
<a id="__codelineno-163-288" name="__codelineno-163-288" href="#__codelineno-163-288"></a>
<a id="__codelineno-163-289" name="__codelineno-163-289" href="#__codelineno-163-289"></a>.with_batch_exporter(logger_exporter)
<a id="__codelineno-163-290" name="__codelineno-163-290" href="#__codelineno-163-290"></a>
<a id="__codelineno-163-291" name="__codelineno-163-291" href="#__codelineno-163-291"></a>
<a id="__codelineno-163-292" name="__codelineno-163-292" href="#__codelineno-163-292"></a>
<a id="__codelineno-163-293" name="__codelineno-163-293" href="#__codelineno-163-293"></a>.with_resource(resource.clone())
<a id="__codelineno-163-294" name="__codelineno-163-294" href="#__codelineno-163-294"></a>
<a id="__codelineno-163-295" name="__codelineno-163-295" href="#__codelineno-163-295"></a>
<a id="__codelineno-163-296" name="__codelineno-163-296" href="#__codelineno-163-296"></a>
<a id="__codelineno-163-297" name="__codelineno-163-297" href="#__codelineno-163-297"></a>.build();
<a id="__codelineno-163-298" name="__codelineno-163-298" href="#__codelineno-163-298"></a>
<a id="__codelineno-163-299" name="__codelineno-163-299" href="#__codelineno-163-299"></a>
<a id="__codelineno-163-300" name="__codelineno-163-300" href="#__codelineno-163-300"></a>
<a id="__codelineno-163-301" name="__codelineno-163-301" href="#__codelineno-163-301"></a>let otel_log_appender = OpenTelemetryLogBridge::new(&amp;logger_provider);
<a id="__codelineno-163-302" name="__codelineno-163-302" href="#__codelineno-163-302"></a>
<a id="__codelineno-163-303" name="__codelineno-163-303" href="#__codelineno-163-303"></a>
<a id="__codelineno-163-304" name="__codelineno-163-304" href="#__codelineno-163-304"></a>
<a id="__codelineno-163-305" name="__codelineno-163-305" href="#__codelineno-163-305"></a>log::set_boxed_logger(Box::new(otel_log_appender)).unwrap();
<a id="__codelineno-163-306" name="__codelineno-163-306" href="#__codelineno-163-306"></a>
<a id="__codelineno-163-307" name="__codelineno-163-307" href="#__codelineno-163-307"></a>
<a id="__codelineno-163-308" name="__codelineno-163-308" href="#__codelineno-163-308"></a>
<a id="__codelineno-163-309" name="__codelineno-163-309" href="#__codelineno-163-309"></a>log::set_max_level(Level::Debug.to_level_filter());
<a id="__codelineno-163-310" name="__codelineno-163-310" href="#__codelineno-163-310"></a>
<a id="__codelineno-163-311" name="__codelineno-163-311" href="#__codelineno-163-311"></a>
<a id="__codelineno-163-312" name="__codelineno-163-312" href="#__codelineno-163-312"></a>
<a id="__codelineno-163-313" name="__codelineno-163-313" href="#__codelineno-163-313"></a>}
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.
4. Make sure the environment variables <code>DT_API_URL</code> and <code>DT_API_TOKEN</code> are properly configured for the <a href="#base-url">Dynatrace URL</a> and <a href="#access-token">access token</a>.
5. Call <code>init_opentelemetry()</code> as early as possible in your startup code.</p>
<h2 id="step-3-instrument-your-application_2">Step 3 Instrument your application<a class="headerlink" href="#step-3-instrument-your-application_2" title="Permanent link">&para;</a></h2>
<h3 id="add-tracing_6">Add tracing<a class="headerlink" href="#add-tracing_6" title="Permanent link">&para;</a></h3>
<ol>
<li>First, we need to get a tracer object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-164-1" name="__codelineno-164-1" href="#__codelineno-164-1"></a>let tracer = global::tracer(&quot;my-tracer&quot;);
</code></pre></div>
2. With <code>tracer</code>, we can now start new spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-165-1" name="__codelineno-165-1" href="#__codelineno-165-1"></a>let mut _span = tracer
<a id="__codelineno-165-2" name="__codelineno-165-2" href="#__codelineno-165-2"></a>
<a id="__codelineno-165-3" name="__codelineno-165-3" href="#__codelineno-165-3"></a>
<a id="__codelineno-165-4" name="__codelineno-165-4" href="#__codelineno-165-4"></a>
<a id="__codelineno-165-5" name="__codelineno-165-5" href="#__codelineno-165-5"></a>.span_builder(&quot;Call to /myendpoint&quot;)
<a id="__codelineno-165-6" name="__codelineno-165-6" href="#__codelineno-165-6"></a>
<a id="__codelineno-165-7" name="__codelineno-165-7" href="#__codelineno-165-7"></a>
<a id="__codelineno-165-8" name="__codelineno-165-8" href="#__codelineno-165-8"></a>
<a id="__codelineno-165-9" name="__codelineno-165-9" href="#__codelineno-165-9"></a>.with_kind(SpanKind::Internal)
<a id="__codelineno-165-10" name="__codelineno-165-10" href="#__codelineno-165-10"></a>
<a id="__codelineno-165-11" name="__codelineno-165-11" href="#__codelineno-165-11"></a>
<a id="__codelineno-165-12" name="__codelineno-165-12" href="#__codelineno-165-12"></a>
<a id="__codelineno-165-13" name="__codelineno-165-13" href="#__codelineno-165-13"></a>.start(&amp;tracer);
<a id="__codelineno-165-14" name="__codelineno-165-14" href="#__codelineno-165-14"></a>
<a id="__codelineno-165-15" name="__codelineno-165-15" href="#__codelineno-165-15"></a>
<a id="__codelineno-165-16" name="__codelineno-165-16" href="#__codelineno-165-16"></a>
<a id="__codelineno-165-17" name="__codelineno-165-17" href="#__codelineno-165-17"></a>_span.set_attribute(KeyValue::new(&quot;http.method&quot;, &quot;GET&quot;));
<a id="__codelineno-165-18" name="__codelineno-165-18" href="#__codelineno-165-18"></a>
<a id="__codelineno-165-19" name="__codelineno-165-19" href="#__codelineno-165-19"></a>
<a id="__codelineno-165-20" name="__codelineno-165-20" href="#__codelineno-165-20"></a>
<a id="__codelineno-165-21" name="__codelineno-165-21" href="#__codelineno-165-21"></a>_span.set_attribute(KeyValue::new(&quot;net.protocol.version&quot;, &quot;1.1&quot;));
<a id="__codelineno-165-22" name="__codelineno-165-22" href="#__codelineno-165-22"></a>
<a id="__codelineno-165-23" name="__codelineno-165-23" href="#__codelineno-165-23"></a>
<a id="__codelineno-165-24" name="__codelineno-165-24" href="#__codelineno-165-24"></a>
<a id="__codelineno-165-25" name="__codelineno-165-25" href="#__codelineno-165-25"></a>// TODO: Your code goes here
<a id="__codelineno-165-26" name="__codelineno-165-26" href="#__codelineno-165-26"></a>
<a id="__codelineno-165-27" name="__codelineno-165-27" href="#__codelineno-165-27"></a>
<a id="__codelineno-165-28" name="__codelineno-165-28" href="#__codelineno-165-28"></a>
<a id="__codelineno-165-29" name="__codelineno-165-29" href="#__codelineno-165-29"></a>_span.end();
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new span and name it "Call to /myendpoint"</li>
<li>Add two attributes, following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
<li>Add a <code>TODO</code> in place of the eventual business logic</li>
<li>Call the span's <code>end()</code> method to complete the span</li>
</ul>
<h3 id="collect-metrics_6">Collect metrics<a class="headerlink" href="#collect-metrics_6" title="Permanent link">&para;</a></h3>
<ol>
<li>First, we need to get a tracer object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-166-1" name="__codelineno-166-1" href="#__codelineno-166-1"></a>let meter = global::meter(&quot;request_counter&quot;);
</code></pre></div>
2. With <code>meter</code>, we can now create individual instruments, such as a counter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-167-1" name="__codelineno-167-1" href="#__codelineno-167-1"></a>let updown_counter = meter.i64_up_down_counter(&quot;request_counter&quot;).build();
</code></pre></div>
3. We can now invoke the <code>add()</code> method of <code>updown_counter</code> to record new values with the counter.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-168-1" name="__codelineno-168-1" href="#__codelineno-168-1"></a>updown_counter.add(1,&amp;[],);
</code></pre></div>
<h3 id="connect-logs_6">Connect logs<a class="headerlink" href="#connect-logs_6" title="Permanent link">&para;</a></h3>
<p>In <code>init_opentelemetry()</code>, we earlier initialized the <a href="https://docs.rs/log/latest/log/">log√Ø¬ª¬ø</a> crate with its OpenTelemetry log bridge and can now call any of its <a href="https://docs.rs/log/latest/log/#macros">logging macros√Ø¬ª¬ø</a> to log directly to Dynatrace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-169-1" name="__codelineno-169-1" href="#__codelineno-169-1"></a>error!(&quot;logging an error&quot;);
<a id="__codelineno-169-2" name="__codelineno-169-2" href="#__codelineno-169-2"></a>
<a id="__codelineno-169-3" name="__codelineno-169-3" href="#__codelineno-169-3"></a>
<a id="__codelineno-169-4" name="__codelineno-169-4" href="#__codelineno-169-4"></a>
<a id="__codelineno-169-5" name="__codelineno-169-5" href="#__codelineno-169-5"></a>debug!(&quot;logging a debug message&quot;);
</code></pre></div>
<p>Maximum log level</p>
<p>Note the call to the <a href="https://docs.rs/log/latest/log/fn.set_max_level.html"><code>log::set_max_level</code>√Ø¬ª¬ø</a> method in the <a href="#set-up-opentelemetry">initialization of OpenTelemetry</a> earlier. This sets the maximum log level of the log crate to <code>Level::Debug</code> and is required for the logged messages at that level to be emitted in the first place and picked up by the OpenTelemetry log bridge. Adjust this if you use a different maximum log level.</p>
<h3 id="ensure-context-propagation-optional_6">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_6" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<h4 id="extracting-the-context-when-receiving-a-request_6">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_6" title="Permanent link">&para;</a></h4>
<p>To continue an existing trace from an HTTP request, we first need to extract the context. For this, we declare the function <code>extract_context_from_request()</code>, which takes the incoming request object, extracts the passed context using the propagator's <code>extract()</code> method, and returns the matching context object.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-170-1" name="__codelineno-170-1" href="#__codelineno-170-1"></a>// Utility function to extract the context from the incoming request headers
<a id="__codelineno-170-2" name="__codelineno-170-2" href="#__codelineno-170-2"></a>
<a id="__codelineno-170-3" name="__codelineno-170-3" href="#__codelineno-170-3"></a>
<a id="__codelineno-170-4" name="__codelineno-170-4" href="#__codelineno-170-4"></a>
<a id="__codelineno-170-5" name="__codelineno-170-5" href="#__codelineno-170-5"></a>fn extract_context_from_request(req: &amp;Request&lt;Incoming&gt;) -&gt; Context {
<a id="__codelineno-170-6" name="__codelineno-170-6" href="#__codelineno-170-6"></a>
<a id="__codelineno-170-7" name="__codelineno-170-7" href="#__codelineno-170-7"></a>
<a id="__codelineno-170-8" name="__codelineno-170-8" href="#__codelineno-170-8"></a>
<a id="__codelineno-170-9" name="__codelineno-170-9" href="#__codelineno-170-9"></a>global::get_text_map_propagator(|propagator| {
<a id="__codelineno-170-10" name="__codelineno-170-10" href="#__codelineno-170-10"></a>
<a id="__codelineno-170-11" name="__codelineno-170-11" href="#__codelineno-170-11"></a>
<a id="__codelineno-170-12" name="__codelineno-170-12" href="#__codelineno-170-12"></a>
<a id="__codelineno-170-13" name="__codelineno-170-13" href="#__codelineno-170-13"></a>propagator.extract(&amp;HeaderExtractor(req.headers()))
<a id="__codelineno-170-14" name="__codelineno-170-14" href="#__codelineno-170-14"></a>
<a id="__codelineno-170-15" name="__codelineno-170-15" href="#__codelineno-170-15"></a>
<a id="__codelineno-170-16" name="__codelineno-170-16" href="#__codelineno-170-16"></a>
<a id="__codelineno-170-17" name="__codelineno-170-17" href="#__codelineno-170-17"></a>})
<a id="__codelineno-170-18" name="__codelineno-170-18" href="#__codelineno-170-18"></a>
<a id="__codelineno-170-19" name="__codelineno-170-19" href="#__codelineno-170-19"></a>
<a id="__codelineno-170-20" name="__codelineno-170-20" href="#__codelineno-170-20"></a>
<a id="__codelineno-170-21" name="__codelineno-170-21" href="#__codelineno-170-21"></a>}
</code></pre></div>
<p>We can then use <code>extract_context_from_request()</code> in our request handler to obtain that context and pass it as parent to our own, new <a href="https://opentelemetry.io/docs/concepts/signals/traces/#server">server span√Ø¬ª¬ø</a> using <code>start_with_context()</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-171-1" name="__codelineno-171-1" href="#__codelineno-171-1"></a>async fn router(req: Request&lt;Incoming&gt;) -&gt; Result&lt;Response&lt;BoxBody&lt;Bytes, hyper::Error&gt;&gt;, Infallible&gt; {
<a id="__codelineno-171-2" name="__codelineno-171-2" href="#__codelineno-171-2"></a>
<a id="__codelineno-171-3" name="__codelineno-171-3" href="#__codelineno-171-3"></a>
<a id="__codelineno-171-4" name="__codelineno-171-4" href="#__codelineno-171-4"></a>
<a id="__codelineno-171-5" name="__codelineno-171-5" href="#__codelineno-171-5"></a>// Extract the context from the incoming request headers
<a id="__codelineno-171-6" name="__codelineno-171-6" href="#__codelineno-171-6"></a>
<a id="__codelineno-171-7" name="__codelineno-171-7" href="#__codelineno-171-7"></a>
<a id="__codelineno-171-8" name="__codelineno-171-8" href="#__codelineno-171-8"></a>
<a id="__codelineno-171-9" name="__codelineno-171-9" href="#__codelineno-171-9"></a>let parent_cx = extract_context_from_request(&amp;req);
<a id="__codelineno-171-10" name="__codelineno-171-10" href="#__codelineno-171-10"></a>
<a id="__codelineno-171-11" name="__codelineno-171-11" href="#__codelineno-171-11"></a>
<a id="__codelineno-171-12" name="__codelineno-171-12" href="#__codelineno-171-12"></a>
<a id="__codelineno-171-13" name="__codelineno-171-13" href="#__codelineno-171-13"></a>let response = {
<a id="__codelineno-171-14" name="__codelineno-171-14" href="#__codelineno-171-14"></a>
<a id="__codelineno-171-15" name="__codelineno-171-15" href="#__codelineno-171-15"></a>
<a id="__codelineno-171-16" name="__codelineno-171-16" href="#__codelineno-171-16"></a>
<a id="__codelineno-171-17" name="__codelineno-171-17" href="#__codelineno-171-17"></a>// Create a span parenting the remote client span.
<a id="__codelineno-171-18" name="__codelineno-171-18" href="#__codelineno-171-18"></a>
<a id="__codelineno-171-19" name="__codelineno-171-19" href="#__codelineno-171-19"></a>
<a id="__codelineno-171-20" name="__codelineno-171-20" href="#__codelineno-171-20"></a>
<a id="__codelineno-171-21" name="__codelineno-171-21" href="#__codelineno-171-21"></a>let tracer = global::tracer(&quot;example/server&quot;);
<a id="__codelineno-171-22" name="__codelineno-171-22" href="#__codelineno-171-22"></a>
<a id="__codelineno-171-23" name="__codelineno-171-23" href="#__codelineno-171-23"></a>
<a id="__codelineno-171-24" name="__codelineno-171-24" href="#__codelineno-171-24"></a>
<a id="__codelineno-171-25" name="__codelineno-171-25" href="#__codelineno-171-25"></a>let mut span = tracer
<a id="__codelineno-171-26" name="__codelineno-171-26" href="#__codelineno-171-26"></a>
<a id="__codelineno-171-27" name="__codelineno-171-27" href="#__codelineno-171-27"></a>
<a id="__codelineno-171-28" name="__codelineno-171-28" href="#__codelineno-171-28"></a>
<a id="__codelineno-171-29" name="__codelineno-171-29" href="#__codelineno-171-29"></a>.span_builder(&quot;router&quot;)
<a id="__codelineno-171-30" name="__codelineno-171-30" href="#__codelineno-171-30"></a>
<a id="__codelineno-171-31" name="__codelineno-171-31" href="#__codelineno-171-31"></a>
<a id="__codelineno-171-32" name="__codelineno-171-32" href="#__codelineno-171-32"></a>
<a id="__codelineno-171-33" name="__codelineno-171-33" href="#__codelineno-171-33"></a>.with_kind(SpanKind::Server)
<a id="__codelineno-171-34" name="__codelineno-171-34" href="#__codelineno-171-34"></a>
<a id="__codelineno-171-35" name="__codelineno-171-35" href="#__codelineno-171-35"></a>
<a id="__codelineno-171-36" name="__codelineno-171-36" href="#__codelineno-171-36"></a>
<a id="__codelineno-171-37" name="__codelineno-171-37" href="#__codelineno-171-37"></a>.start_with_context(&amp;tracer, &amp;parent_cx);
<a id="__codelineno-171-38" name="__codelineno-171-38" href="#__codelineno-171-38"></a>
<a id="__codelineno-171-39" name="__codelineno-171-39" href="#__codelineno-171-39"></a>
<a id="__codelineno-171-40" name="__codelineno-171-40" href="#__codelineno-171-40"></a>
<a id="__codelineno-171-41" name="__codelineno-171-41" href="#__codelineno-171-41"></a>// Adding custom attributes
<a id="__codelineno-171-42" name="__codelineno-171-42" href="#__codelineno-171-42"></a>
<a id="__codelineno-171-43" name="__codelineno-171-43" href="#__codelineno-171-43"></a>
<a id="__codelineno-171-44" name="__codelineno-171-44" href="#__codelineno-171-44"></a>
<a id="__codelineno-171-45" name="__codelineno-171-45" href="#__codelineno-171-45"></a>span.set_attribute(KeyValue::new(&quot;my-server-key-1&quot;, &quot;my-server-value-1&quot;));
<a id="__codelineno-171-46" name="__codelineno-171-46" href="#__codelineno-171-46"></a>
<a id="__codelineno-171-47" name="__codelineno-171-47" href="#__codelineno-171-47"></a>
<a id="__codelineno-171-48" name="__codelineno-171-48" href="#__codelineno-171-48"></a>
<a id="__codelineno-171-49" name="__codelineno-171-49" href="#__codelineno-171-49"></a>};
<a id="__codelineno-171-50" name="__codelineno-171-50" href="#__codelineno-171-50"></a>
<a id="__codelineno-171-51" name="__codelineno-171-51" href="#__codelineno-171-51"></a>
<a id="__codelineno-171-52" name="__codelineno-171-52" href="#__codelineno-171-52"></a>
<a id="__codelineno-171-53" name="__codelineno-171-53" href="#__codelineno-171-53"></a>// TODO Handle the HTTP request
<a id="__codelineno-171-54" name="__codelineno-171-54" href="#__codelineno-171-54"></a>
<a id="__codelineno-171-55" name="__codelineno-171-55" href="#__codelineno-171-55"></a>
<a id="__codelineno-171-56" name="__codelineno-171-56" href="#__codelineno-171-56"></a>
<a id="__codelineno-171-57" name="__codelineno-171-57" href="#__codelineno-171-57"></a>}
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_6">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_6" title="Permanent link">&para;</a></h4>
<p>To propagate the current context to another HTTP service, we inject the context information into the HTTP request headers. The following example declares the function <code>send_request()</code>, which takes the URL of the request, the request content, and sends the request using <a href="https://docs.rs/hyper/latest/hyper/index.html">hyper√Ø¬ª¬ø</a>.</p>
<p>Once the hyper request object is initialized, we call <code>get_text_map_propagator()</code> to obtain the global <code>propagator</code> object and then use its <code>inject_context()</code> function to add the current context information to the request.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-172-1" name="__codelineno-172-1" href="#__codelineno-172-1"></a>async fn send_request(url: &amp;str, body_content: &amp;str, span_name: &amp;str) -&gt; std::result::Result&lt;(), Box&lt;dyn std::error::Error + Send + Sync + &#39;static&gt;&gt; {
<a id="__codelineno-172-2" name="__codelineno-172-2" href="#__codelineno-172-2"></a>
<a id="__codelineno-172-3" name="__codelineno-172-3" href="#__codelineno-172-3"></a>
<a id="__codelineno-172-4" name="__codelineno-172-4" href="#__codelineno-172-4"></a>
<a id="__codelineno-172-5" name="__codelineno-172-5" href="#__codelineno-172-5"></a>let client = Client::builder(TokioExecutor::new()).build_http();
<a id="__codelineno-172-6" name="__codelineno-172-6" href="#__codelineno-172-6"></a>
<a id="__codelineno-172-7" name="__codelineno-172-7" href="#__codelineno-172-7"></a>
<a id="__codelineno-172-8" name="__codelineno-172-8" href="#__codelineno-172-8"></a>
<a id="__codelineno-172-9" name="__codelineno-172-9" href="#__codelineno-172-9"></a>let tracer = global::tracer(&quot;example/client&quot;);
<a id="__codelineno-172-10" name="__codelineno-172-10" href="#__codelineno-172-10"></a>
<a id="__codelineno-172-11" name="__codelineno-172-11" href="#__codelineno-172-11"></a>
<a id="__codelineno-172-12" name="__codelineno-172-12" href="#__codelineno-172-12"></a>
<a id="__codelineno-172-13" name="__codelineno-172-13" href="#__codelineno-172-13"></a>let span = tracer
<a id="__codelineno-172-14" name="__codelineno-172-14" href="#__codelineno-172-14"></a>
<a id="__codelineno-172-15" name="__codelineno-172-15" href="#__codelineno-172-15"></a>
<a id="__codelineno-172-16" name="__codelineno-172-16" href="#__codelineno-172-16"></a>
<a id="__codelineno-172-17" name="__codelineno-172-17" href="#__codelineno-172-17"></a>.span_builder(String::from(span_name))
<a id="__codelineno-172-18" name="__codelineno-172-18" href="#__codelineno-172-18"></a>
<a id="__codelineno-172-19" name="__codelineno-172-19" href="#__codelineno-172-19"></a>
<a id="__codelineno-172-20" name="__codelineno-172-20" href="#__codelineno-172-20"></a>
<a id="__codelineno-172-21" name="__codelineno-172-21" href="#__codelineno-172-21"></a>.with_kind(SpanKind::Client)
<a id="__codelineno-172-22" name="__codelineno-172-22" href="#__codelineno-172-22"></a>
<a id="__codelineno-172-23" name="__codelineno-172-23" href="#__codelineno-172-23"></a>
<a id="__codelineno-172-24" name="__codelineno-172-24" href="#__codelineno-172-24"></a>
<a id="__codelineno-172-25" name="__codelineno-172-25" href="#__codelineno-172-25"></a>.start(&amp;tracer);
<a id="__codelineno-172-26" name="__codelineno-172-26" href="#__codelineno-172-26"></a>
<a id="__codelineno-172-27" name="__codelineno-172-27" href="#__codelineno-172-27"></a>
<a id="__codelineno-172-28" name="__codelineno-172-28" href="#__codelineno-172-28"></a>
<a id="__codelineno-172-29" name="__codelineno-172-29" href="#__codelineno-172-29"></a>let cx = Context::current_with_span(span);
<a id="__codelineno-172-30" name="__codelineno-172-30" href="#__codelineno-172-30"></a>
<a id="__codelineno-172-31" name="__codelineno-172-31" href="#__codelineno-172-31"></a>
<a id="__codelineno-172-32" name="__codelineno-172-32" href="#__codelineno-172-32"></a>
<a id="__codelineno-172-33" name="__codelineno-172-33" href="#__codelineno-172-33"></a>let mut req = hyper::Request::builder().uri(url);
<a id="__codelineno-172-34" name="__codelineno-172-34" href="#__codelineno-172-34"></a>
<a id="__codelineno-172-35" name="__codelineno-172-35" href="#__codelineno-172-35"></a>
<a id="__codelineno-172-36" name="__codelineno-172-36" href="#__codelineno-172-36"></a>
<a id="__codelineno-172-37" name="__codelineno-172-37" href="#__codelineno-172-37"></a>global::get_text_map_propagator(|propagator| {
<a id="__codelineno-172-38" name="__codelineno-172-38" href="#__codelineno-172-38"></a>
<a id="__codelineno-172-39" name="__codelineno-172-39" href="#__codelineno-172-39"></a>
<a id="__codelineno-172-40" name="__codelineno-172-40" href="#__codelineno-172-40"></a>
<a id="__codelineno-172-41" name="__codelineno-172-41" href="#__codelineno-172-41"></a>propagator.inject_context(&amp;cx, &amp;mut HeaderInjector(req.headers_mut().unwrap()))
<a id="__codelineno-172-42" name="__codelineno-172-42" href="#__codelineno-172-42"></a>
<a id="__codelineno-172-43" name="__codelineno-172-43" href="#__codelineno-172-43"></a>
<a id="__codelineno-172-44" name="__codelineno-172-44" href="#__codelineno-172-44"></a>
<a id="__codelineno-172-45" name="__codelineno-172-45" href="#__codelineno-172-45"></a>});
<a id="__codelineno-172-46" name="__codelineno-172-46" href="#__codelineno-172-46"></a>
<a id="__codelineno-172-47" name="__codelineno-172-47" href="#__codelineno-172-47"></a>
<a id="__codelineno-172-48" name="__codelineno-172-48" href="#__codelineno-172-48"></a>
<a id="__codelineno-172-49" name="__codelineno-172-49" href="#__codelineno-172-49"></a>let res = client
<a id="__codelineno-172-50" name="__codelineno-172-50" href="#__codelineno-172-50"></a>
<a id="__codelineno-172-51" name="__codelineno-172-51" href="#__codelineno-172-51"></a>
<a id="__codelineno-172-52" name="__codelineno-172-52" href="#__codelineno-172-52"></a>
<a id="__codelineno-172-53" name="__codelineno-172-53" href="#__codelineno-172-53"></a>.request(req.body(Full::new(Bytes::from(body_content.to_string())))?)
<a id="__codelineno-172-54" name="__codelineno-172-54" href="#__codelineno-172-54"></a>
<a id="__codelineno-172-55" name="__codelineno-172-55" href="#__codelineno-172-55"></a>
<a id="__codelineno-172-56" name="__codelineno-172-56" href="#__codelineno-172-56"></a>
<a id="__codelineno-172-57" name="__codelineno-172-57" href="#__codelineno-172-57"></a>.await?;
<a id="__codelineno-172-58" name="__codelineno-172-58" href="#__codelineno-172-58"></a>
<a id="__codelineno-172-59" name="__codelineno-172-59" href="#__codelineno-172-59"></a>
<a id="__codelineno-172-60" name="__codelineno-172-60" href="#__codelineno-172-60"></a>
<a id="__codelineno-172-61" name="__codelineno-172-61" href="#__codelineno-172-61"></a>cx.span().add_event(
<a id="__codelineno-172-62" name="__codelineno-172-62" href="#__codelineno-172-62"></a>
<a id="__codelineno-172-63" name="__codelineno-172-63" href="#__codelineno-172-63"></a>
<a id="__codelineno-172-64" name="__codelineno-172-64" href="#__codelineno-172-64"></a>
<a id="__codelineno-172-65" name="__codelineno-172-65" href="#__codelineno-172-65"></a>&quot;Got response!&quot;,
<a id="__codelineno-172-66" name="__codelineno-172-66" href="#__codelineno-172-66"></a>
<a id="__codelineno-172-67" name="__codelineno-172-67" href="#__codelineno-172-67"></a>
<a id="__codelineno-172-68" name="__codelineno-172-68" href="#__codelineno-172-68"></a>
<a id="__codelineno-172-69" name="__codelineno-172-69" href="#__codelineno-172-69"></a>vec![KeyValue::new(&quot;status&quot;, res.status().to_string())],
<a id="__codelineno-172-70" name="__codelineno-172-70" href="#__codelineno-172-70"></a>
<a id="__codelineno-172-71" name="__codelineno-172-71" href="#__codelineno-172-71"></a>
<a id="__codelineno-172-72" name="__codelineno-172-72" href="#__codelineno-172-72"></a>
<a id="__codelineno-172-73" name="__codelineno-172-73" href="#__codelineno-172-73"></a>);
<a id="__codelineno-172-74" name="__codelineno-172-74" href="#__codelineno-172-74"></a>
<a id="__codelineno-172-75" name="__codelineno-172-75" href="#__codelineno-172-75"></a>
<a id="__codelineno-172-76" name="__codelineno-172-76" href="#__codelineno-172-76"></a>
<a id="__codelineno-172-77" name="__codelineno-172-77" href="#__codelineno-172-77"></a>Ok(())
<a id="__codelineno-172-78" name="__codelineno-172-78" href="#__codelineno-172-78"></a>
<a id="__codelineno-172-79" name="__codelineno-172-79" href="#__codelineno-172-79"></a>
<a id="__codelineno-172-80" name="__codelineno-172-80" href="#__codelineno-172-80"></a>
<a id="__codelineno-172-81" name="__codelineno-172-81" href="#__codelineno-172-81"></a>}
</code></pre></div>
<h2 id="step-4-configure-data-capture-to-meet-privacy-requirements-optional_3">Step 4 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-4-configure-data-capture-to-meet-privacy-requirements-optional_3" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-5-verify-data-ingestion-into-dynatrace_3">Step 5 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-5-verify-data-ingestion-into-dynatrace_3" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_24">Related topics<a class="headerlink" href="#related-topics_24" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-walkthroughsmd">Source: walkthroughs.md<a class="headerlink" href="#source-walkthroughsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your application
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs
scraped: 2026-02-16T21:12:54.876187</p>
<hr />
<h1 id="instrument-your-application">Instrument your application<a class="headerlink" href="#instrument-your-application" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-application_1">Instrument your application<a class="headerlink" href="#instrument-your-application_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Updated on Nov 15, 2023</li>
</ul>
<p>The following walk-throughs are guided, step-by-step tutorials for the different programming languages supported by OpenTelemetry. They provide code samples on how to integrate the OpenTelemetry libraries into your application, initialize OpenTelemetry, create the different signals (that is, traces, metrics, and logs), and export the data to the Dynatrace backend.</p>
<p><a href="/docs/ingest-from/opentelemetry/walkthroughs/cpp" title="Learn how to instrument your C++ application using OpenTelemetry and Dynatrace.">### C++</a>[<img alt="Elixir" src="https://dt-cdn.net/images/elixir-logo-180-b773ecbdae.png" title="Elixir" /></p>
<h3 id="elixirdocsingest-fromopentelemetrywalkthroughselixir-learn-how-to-instrument-your-elixir-application-using-opentelemetry-and-dynatrace-erlang-go-java-javascript-net-php-python-ruby">Elixir](/docs/ingest-from/opentelemetry/walkthroughs/elixir "Learn how to instrument your Elixir application using OpenTelemetry and Dynatrace.")<a href="/docs/ingest-from/opentelemetry/walkthroughs/erlang" title="Learn how to instrument your Erlang application using OpenTelemetry and Dynatrace.">### Erlang</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/go" title="Learn how to instrument your Go application using OpenTelemetry and Dynatrace.">### Go</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/java" title="Learn how to instrument your Java application using OpenTelemetry and Dynatrace.">### Java</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/nodejs" title="Learn how to instrument your JavaScript application on Node.js using OpenTelemetry and Dynatrace.">### JavaScript</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/dotnet" title="Learn how to instrument your .NET application using OpenTelemetry and Dynatrace.">### .NET</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/php" title="Learn how to instrument your PHP application using OpenTelemetry and Dynatrace.">### PHP</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/python" title="Learn how to instrument your Python application using OpenTelemetry and Dynatrace.">### Python</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/ruby" title="Learn how to instrument your Ruby application using OpenTelemetry and Dynatrace.">### Ruby</a>[<img alt="Rust" src="https://dt-cdn.net/images/rust-logo-gray-8d1a6c296b.svg" title="Rust" /><a class="headerlink" href="#elixirdocsingest-fromopentelemetrywalkthroughselixir-learn-how-to-instrument-your-elixir-application-using-opentelemetry-and-dynatrace-erlang-go-java-javascript-net-php-python-ruby" title="Permanent link">&para;</a></h3>
<h3 id="rustdocsingest-fromopentelemetrywalkthroughsrust-learn-how-to-instrument-your-rust-application-using-opentelemetry-and-dynatrace">Rust](/docs/ingest-from/opentelemetry/walkthroughs/rust "Learn how to instrument your Rust application using OpenTelemetry and Dynatrace.")<a class="headerlink" href="#rustdocsingest-fromopentelemetrywalkthroughsrust-learn-how-to-instrument-your-rust-application-using-opentelemetry-and-dynatrace" title="Permanent link">&para;</a></h3>
<h2 id="related-topics_25">Related topics<a class="headerlink" href="#related-topics_25" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/amazon-web-services/integrate-into-aws/aws-lambda-integration/aws-lambda-classic/opentelemetry-interoperability" title="Enable and use OpenTelemetry interoperability in AWS Lambda.">OpenTelemetry interoperability</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions" title="Set up monitoring for Google Cloud Functions.">Google Cloud Functions monitoring</a></li>
<li><a href="/docs/ingest-from/microsoft-azure-services/azure-integrations/azure-functions/func-dynamic-plans" title="Learn how to install, configure, update, and uninstall OneAgent for monitoring Azure Functions on serverless hosting plans">Monitor Azure Functions on Consumption Plans</a></li>
</ul>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  –ö –Ω–∞—á–∞–ª—É
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      ¬© 2026 Dynatrace Managed Docs
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Yerkebulan-Ardabayev" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "navigation.instant", "search.suggest", "search.highlight", "content.code.copy", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../assets/javascripts/groq-chat.js"></script>
      
    
  </body>
</html>