
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Dynatrace Managed —Å AI-–ø–æ–º–æ—â–Ω–∏–∫–æ–º">
      
      
        <meta name="author" content="Yerkebulan Ardabayev">
      
      
        <link rel="canonical" href="https://yerkebulan-ardabayev.github.io/dynatrace-docs-website/notebooklm/ingest-from__opentelemetry/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Dynatrace Documentation: ingest-from/opentelemetry - Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dynatrace-documentation-ingest-fromopentelemetry" class="md-skip">
          –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="–í–µ—Ä—Ö–Ω–∏–π –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª">
    <a href="../.." title="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" class="md-header__button md-logo" aria-label="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dynatrace Documentation: ingest-from/opentelemetry
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="–¢—ë–º–Ω–∞—è —Ç–µ–º–∞"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="–¢—ë–º–Ω–∞—è —Ç–µ–º–∞" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="–ü–æ–∏—Å–∫" placeholder="–ü–æ–∏—Å–∫" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="–ü–æ–∏—Å–∫">
        
        <button type="reset" class="md-search__icon md-icon" title="–û—á–∏—Å—Ç–∏—Ç—å" aria-label="–û—á–∏—Å—Ç–∏—Ç—å" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Yerkebulan-Ardabayev/dynatrace-docs-website" title="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    dynatrace-docs-website
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="–í–∫–ª–∞–¥–∫–∏" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  üè† –ì–ª–∞–≤–Ω–∞—è

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../managed/" class="md-tabs__link">
          
  
  
  üéØ Managed

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../common/" class="md-tabs__link">
          
  
  
  üìä –û–±—â–µ–µ

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../saas-reference/" class="md-tabs__link">
        
  
  
    
  
  üìñ SaaS

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../ai/groq/" class="md-tabs__link">
        
  
  
    
  
  ü§ñ AI

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" class="md-nav__button md-logo" aria-label="Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>

    </a>
    Dynatrace Managed - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Yerkebulan-Ardabayev/dynatrace-docs-website" title="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    dynatrace-docs-website
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üè† –ì–ª–∞–≤–Ω–∞—è
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üéØ Managed
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    üéØ Managed
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±–∑–æ—Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –£—Å—Ç–∞–Ω–æ–≤–∫–∞
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ù–∞—Å—Ç—Ä–æ–π–∫–∞
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±–Ω–æ–≤–ª–µ–Ω–∏—è
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ë—ç–∫–∞–ø
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/managed-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ö–ª–∞—Å—Ç–µ—Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –õ–∏—Ü–µ–Ω–∑–∏—è
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/dynatrace-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/observe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed/ingest-from/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    üìä –û–±—â–µ–µ
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    üìä –û–±—â–µ–µ
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    –û–±–∑–æ—Ä
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../saas-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üìñ SaaS
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/groq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ü§ñ AI
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-configurationmd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source: configuration.md
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="dynatrace-documentation-ingest-fromopentelemetry">Dynatrace Documentation: ingest-from/opentelemetry<a class="headerlink" href="#dynatrace-documentation-ingest-fromopentelemetry" title="Permanent link">&para;</a></h1>
<p>Generated: 2026-02-16</p>
<p>Files combined: 33</p>
<hr />
<h2 id="source-configurationmd">Source: configuration.md<a class="headerlink" href="#source-configurationmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Collector Configuration
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/configuration
scraped: 2026-02-15T21:28:16.168727</p>
<hr />
<h1 id="collector-configuration">Collector Configuration<a class="headerlink" href="#collector-configuration" title="Permanent link">&para;</a></h1>
<h1 id="collector-configuration_1">Collector Configuration<a class="headerlink" href="#collector-configuration_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Updated on Dec 05, 2025</li>
</ul>
<p>To successfully configure your Collector instance, you need to configure each component (receiver, optional processor, and exporter) individually in the Collector YAML configuration file and enable them via additional pipeline objects.</p>
<p>Dynatrace Collector</p>
<p>As part of a Dynatrace Collector setup, note that you can only configure the components shipped with Dynatrace Collector.</p>
<p>Find a full list of all supported Collector components at <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a>.</p>
<h2 id="configuration-example">Configuration example<a class="headerlink" href="#configuration-example" title="Permanent link">&para;</a></h2>
<p>Here is an example YAML file for a very basic Collector configuration that can be used to export OpenTelemetry traces, metrics, and logs to Dynatrace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>receivers:
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>otlp:
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>protocols:
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>grpc:
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>http:
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>processors:
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>cumulativetodelta:
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>max_staleness: 25h
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>exporters:
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>otlp_http:
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>logs_endpoint: &quot;${env:DT_ENDPOINT}/v1/logs?structure=flattened&quot;
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>headers:
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a>
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a>service:
<a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a>
<a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a>
<a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a>pipelines:
<a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a>
<a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a>
<a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a>traces:
<a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a>
<a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a>receivers: [otlp]
<a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a>
<a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a>
<a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a>processors: []
<a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a>
<a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a>
<a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a>exporters: [otlp_http]
<a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a>
<a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a>
<a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a>metrics:
<a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a>
<a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a>receivers: [otlp]
<a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95" href="#__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96" href="#__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97" href="#__codelineno-0-97"></a>processors: [cumulativetodelta]
<a id="__codelineno-0-98" name="__codelineno-0-98" href="#__codelineno-0-98"></a>
<a id="__codelineno-0-99" name="__codelineno-0-99" href="#__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100" href="#__codelineno-0-100"></a>
<a id="__codelineno-0-101" name="__codelineno-0-101" href="#__codelineno-0-101"></a>exporters: [otlp_http]
<a id="__codelineno-0-102" name="__codelineno-0-102" href="#__codelineno-0-102"></a>
<a id="__codelineno-0-103" name="__codelineno-0-103" href="#__codelineno-0-103"></a>
<a id="__codelineno-0-104" name="__codelineno-0-104" href="#__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105" href="#__codelineno-0-105"></a>logs:
<a id="__codelineno-0-106" name="__codelineno-0-106" href="#__codelineno-0-106"></a>
<a id="__codelineno-0-107" name="__codelineno-0-107" href="#__codelineno-0-107"></a>
<a id="__codelineno-0-108" name="__codelineno-0-108" href="#__codelineno-0-108"></a>
<a id="__codelineno-0-109" name="__codelineno-0-109" href="#__codelineno-0-109"></a>receivers: [otlp]
<a id="__codelineno-0-110" name="__codelineno-0-110" href="#__codelineno-0-110"></a>
<a id="__codelineno-0-111" name="__codelineno-0-111" href="#__codelineno-0-111"></a>
<a id="__codelineno-0-112" name="__codelineno-0-112" href="#__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113" href="#__codelineno-0-113"></a>processors: []
<a id="__codelineno-0-114" name="__codelineno-0-114" href="#__codelineno-0-114"></a>
<a id="__codelineno-0-115" name="__codelineno-0-115" href="#__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116" href="#__codelineno-0-116"></a>
<a id="__codelineno-0-117" name="__codelineno-0-117" href="#__codelineno-0-117"></a>exporters: [otlp_http]
</code></pre></div>
<p>Cumulativetodelta processor recommendation</p>
<p>It is recommended to set the <code>max_staleness</code> parameter of the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor">cumulativetodelta processor√Ø¬ª¬ø</a> to a value higher than how often the collector receives metrics (e.g., how often metrics via OTLP are received, or how long the Prometheus scrape interval is). This ensures that no references to abandoned metric streams accumulate in memory over time.</p>
<p>In this YAML file, we configure the following components:</p>
<ul>
<li>An OTLP receiver (<code>otlp</code>) that can receive data via gRPC and HTTP.</li>
<li>A processor to convert any metrics with cumulative temporality to delta temporality (see <a href="#delta-metrics">Delta metrics</a> for more details).</li>
<li>
<p>An OTLP HTTP exporter (<code>otlp_http</code>) configured with:</p>
</li>
<li>
<p>The Dynatrace endpoint, see <a href="/docs/ingest-from/opentelemetry/otlp-api#base-url" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Base URLs</a>.</p>
</li>
<li>The logs endpoint configured to flatten structured logs, see &lt;#structured-logs&gt;.</li>
<li>An API token, see <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Authentication</a>.</li>
</ul>
<p>In the example configuration above, the Dynatrace token needs to have the <strong>Ingest OpenTelemetry traces</strong> (<code>openTelemetryTrace.ingest</code>), the <strong>Ingest metrics</strong> (<code>metrics.ingest</code>), and the <strong>Ingest logs</strong> (<code>logs.ingest</code>) permissions.</p>
<p>Within the service section, you define each component separately.</p>
<ul>
<li>Extensions can be enabled in their own section, while receivers, processors, and exporters are grouped under a pipeline section.</li>
<li>Pipelines can be of type traces, metrics, or logs.</li>
<li>Each receiver/processor/exporter can be used in more than one pipeline. For processors referenced in multiple pipelines, each pipeline gets a separate instance of the processors. This contrasts with receivers/exporters referenced in multiple pipelines, where only one instance of a receiver/exporter is used for all pipelines. Also, note that the order of processors dictates the order in which data is processed.</li>
<li>You can also define the same components more than once. For example, you can have two different receivers or even two or more distinct parts of the pipeline.</li>
<li>Even if a component is properly configured in its section, it will not be enabled unless it's also defined in the service section.</li>
</ul>
<h2 id="validate-the-configuration">Validate the configuration<a class="headerlink" href="#validate-the-configuration" title="Permanent link">&para;</a></h2>
<p>It is important to ensure the used Collector configuration is syntactically and semantically correct. For example, YAML uses spaces (not tabs) for indentation, to define the document hierarchy, and it is necessary to use the right level of indentation for each section and component. Collector provides the built-in <code>validate</code> command to verify the configuration and its components and services are properly configured.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>dynatrace-otel-collector validate --config=[PATH_TO_YOUR_CONFIGURATION_FILE]
</code></pre></div>
<p>If you run a container instance of the Collector, you can also use the following Docker command to run the validation directly from your container.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker run -v $(pwd):$(pwd) -w $(pwd) ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0 validate --config=[YOUR_CONFIGURATION_FILE]
</code></pre></div>
<h2 id="delta-metrics">Delta metrics<a class="headerlink" href="#delta-metrics" title="Permanent link">&para;</a></h2>
<p>Dynatrace requires metrics data to be <a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#aggregation-temporality" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">sent with delta temporality</a> and <strong>not</strong> cumulative temporality.</p>
<p>If your application doesn't allow you to configure delta temporality, you can use the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor"><code>cumulativetodelta</code> processor√Ø¬ª¬ø</a> to have your Collector instance adjust cumulative values to delta values. The <a href="#configuration-example">configuration example</a> above shows how to configure and reference the processor in your Collector configuration.</p>
<h2 id="chained-and-load-balanced-collectors">Chained and load-balanced Collectors<a class="headerlink" href="#chained-and-load-balanced-collectors" title="Permanent link">&para;</a></h2>
<p>When you use more than one Collector instance, it's important to maintain stable value propagation across all instances.</p>
<p>This is particularly important when you send OTLP requests across different Collector instances (for example, load balancing), as each Collector instance keeps track of its own delta offset, which may break the data reported to the Dynatrace backend.</p>
<p>In such scenarios, we recommend routing your OTLP requests through a single, outbound Collector instance that forwards the data to the Dynatrace backend and takes care of the delta conversion. The other Collector instances should use a cumulative aggregation, to ensure stable and consistent value propagation.</p>
<h2 id="configure-structured-logs-processing">Configure structured logs processing<a class="headerlink" href="#configure-structured-logs-processing" title="Permanent link">&para;</a></h2>
<p>When you export structured logs to Dynatrace, Dynatrace processes the log data in one of two ways.
It either:</p>
<ul>
<li>Keeps the original nested structure from your logs source ("raw").</li>
<li>Flattens it so all log attribute values are accessible via key paths ("flattened").</li>
</ul>
<p>To configure this behavior, use the <code>logs_endpoint</code> setting as shown in the <a href="#configuration-example">configuration example</a>, line 16.
Make sure to include the complete API endpoint path including <code>/v1/logs</code> (environment variables are allowed), followed by the desired behavior.</p>
<ul>
<li>To keep the original nested structure, use <code>structure=raw</code>.</li>
<li>To flatten the log data, use <code>structure=flattened</code>.</li>
</ul>
<p>If this configuration option is not specified, the default behavior depends on when your environment was created.</p>
<ul>
<li>For Dynatrace version 1.331+ and environments created after February 1, 2026: Raw.</li>
<li>For environments created before February 1, 2026: Flattened.</li>
</ul>
<hr />
<h2 id="source-deploymentmd">Source: deployment.md<a class="headerlink" href="#source-deploymentmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Collector deployment
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/deployment
scraped: 2026-02-15T21:23:21.659319</p>
<hr />
<h1 id="collector-deployment">Collector deployment<a class="headerlink" href="#collector-deployment" title="Permanent link">&para;</a></h1>
<h1 id="collector-deployment_1">Collector deployment<a class="headerlink" href="#collector-deployment_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>9-min read</li>
<li>Updated on Feb 12, 2024</li>
</ul>
<h2 id="deployment-modes">Deployment modes<a class="headerlink" href="#deployment-modes" title="Permanent link">&para;</a></h2>
<p>The Collector can be <a href="https://opentelemetry.io/docs/collector/quick-start/">deployed√Ø¬ª¬ø</a> as a standalone agent or gateway.</p>
<p>For illustrative purposes, the graphics below show the modes in a Kubernetes setup, but the same modes can also be used outside of Kubernetes.</p>
<p>Agent</p>
<p>Gateway</p>
<p>As an agent, the Collector is deployed either with the application or on the same host as the application. This Collector can receive telemetry data and enhance it with, for example, tags or infrastructure information.</p>
<p><img alt="OpenTelemetry collector as agent" src="https://dt-cdn.net/images/collector-agent-deployment-new-9322-7f44156cfc.jpg" /></p>
<p>As a gateway, one or more Collector instances can be deployed as standalone services. This Collector can be deployed additionally, for example, per cluster, region, or data center. A load balancer can help scale the independently operating Collector instances.</p>
<p><img alt="OpenTelemetry collector as gateway" src="https://dt-cdn.net/images/collector-gateway-deployment-new-2-9322-7087373547.jpg" /></p>
<p>It's also possible to combine these deployment modes and chain Collector instances. Consider this if you're deploying the Collector in large environments.</p>
<h2 id="deployment-options">Deployment Options<a class="headerlink" href="#deployment-options" title="Permanent link">&para;</a></h2>
<p>The Dynatrace Collector can be deployed for the following platforms:</p>
<ul>
<li><a href="#kubernetes">Kubernetes</a></li>
<li><a href="#docker">Docker</a></li>
<li><a href="#binary">Windows, macOS, and Linux</a></li>
<li><a href="#linux-installer-packages">Linux installer packages</a></li>
</ul>
<h3 id="kubernetes">Kubernetes<a class="headerlink" href="#kubernetes" title="Permanent link">&para;</a></h3>
<p>For Kubernetes, the Dynatrace Collector can be deployed in the following ways:</p>
<ul>
<li>OpenTelemetry Kubernetes Operator</li>
<li>Helm</li>
<li>Raw manifest</li>
</ul>
<h4 id="dynatrace-access-details">Dynatrace access details<a class="headerlink" href="#dynatrace-access-details" title="Permanent link">&para;</a></h4>
<p>Before you deploy the Collector, you need to set up the necessary Kubernetes secrets for the Dynatrace access details.</p>
<p>Use kubectl to create Kuberenetes secrets for the Dynatrace export details. Replace the placeholders (indicated by curly brackets) with the actual values for <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">the export URL and the API token</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>kubectl create secret generic dynatrace-otelcol-dt-api-credentials --from-literal=DT_ENDPOINT={ENDPOINT_URL_HERE} --from-literal=DT_API_TOKEN={API_TOKEN_HERE}
</code></pre></div>
<h4 id="kubernetes-deployment-variants">Kubernetes deployment variants<a class="headerlink" href="#kubernetes-deployment-variants" title="Permanent link">&para;</a></h4>
<p>The following sample configurations apply a resource limit of 512 megabytes. You may need to adjust this under <code>resources.limits.memory</code> for your particular use case.</p>
<p>OpenTelemetry Operator</p>
<p>Helm</p>
<p>Raw manifest</p>
<h4 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h4>
<p>If you haven't installed OpenTelemetry Operator yet, first make sure <a href="https://cert-manager.io/docs/installation/">cert-manager√Ø¬ª¬ø</a> is installed. Afterwards, you can deploy Operator with the following <code>kubectl</code> command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>kubectl apply -f https://github.com/open-telemetry/opentelemetry-operator/releases/download/v0.144.0/opentelemetry-operator.yaml
</code></pre></div>
<p>After the installation, deploy the Dynatrace Collector either in <a href="#deployment-modes">gateway or agent deployment mode</a>, with one of the following configuration samples. Save it as <code>crd-dynatrace-collector.yaml</code> and deploy it with <code>kubectl apply</code>.</p>
<p>Custom Resource Definition</p>
<p>The Kubernetes CRD of the Operator can be found on <a href="https://github.com/open-telemetry/opentelemetry-operator/blob/v0.144.0/docs/api.md#opentelemetrycollector-1">GitHub√Ø¬ª¬ø</a>.</p>
<p>Deploy as a gateway (Deployment)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>apiVersion: opentelemetry.io/v1beta1
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>kind: OpenTelemetryCollector
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>metadata:
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>name: dynatrace-otel
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>spec:
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>envFrom:
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>- secretRef:
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>env:
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>- name: MY_POD_IP
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>valueFrom:
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a>fieldRef:
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a>fieldPath: status.podIP
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a>mode: &quot;deployment&quot;
<a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a>
<a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a>
<a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a>
<a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a>image: &quot;ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0&quot;
<a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a>
<a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a>
<a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a>
<a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a>resources:
<a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a>
<a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a>
<a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a>
<a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a>limits:
<a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a>
<a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a>
<a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a>
<a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a>memory: 512Mi
<a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a>
<a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a>
<a id="__codelineno-5-72" name="__codelineno-5-72" href="#__codelineno-5-72"></a>
<a id="__codelineno-5-73" name="__codelineno-5-73" href="#__codelineno-5-73"></a>config:
<a id="__codelineno-5-74" name="__codelineno-5-74" href="#__codelineno-5-74"></a>
<a id="__codelineno-5-75" name="__codelineno-5-75" href="#__codelineno-5-75"></a>
<a id="__codelineno-5-76" name="__codelineno-5-76" href="#__codelineno-5-76"></a>
<a id="__codelineno-5-77" name="__codelineno-5-77" href="#__codelineno-5-77"></a>receivers:
<a id="__codelineno-5-78" name="__codelineno-5-78" href="#__codelineno-5-78"></a>
<a id="__codelineno-5-79" name="__codelineno-5-79" href="#__codelineno-5-79"></a>
<a id="__codelineno-5-80" name="__codelineno-5-80" href="#__codelineno-5-80"></a>
<a id="__codelineno-5-81" name="__codelineno-5-81" href="#__codelineno-5-81"></a>otlp:
<a id="__codelineno-5-82" name="__codelineno-5-82" href="#__codelineno-5-82"></a>
<a id="__codelineno-5-83" name="__codelineno-5-83" href="#__codelineno-5-83"></a>
<a id="__codelineno-5-84" name="__codelineno-5-84" href="#__codelineno-5-84"></a>
<a id="__codelineno-5-85" name="__codelineno-5-85" href="#__codelineno-5-85"></a>protocols:
<a id="__codelineno-5-86" name="__codelineno-5-86" href="#__codelineno-5-86"></a>
<a id="__codelineno-5-87" name="__codelineno-5-87" href="#__codelineno-5-87"></a>
<a id="__codelineno-5-88" name="__codelineno-5-88" href="#__codelineno-5-88"></a>
<a id="__codelineno-5-89" name="__codelineno-5-89" href="#__codelineno-5-89"></a>grpc:
<a id="__codelineno-5-90" name="__codelineno-5-90" href="#__codelineno-5-90"></a>
<a id="__codelineno-5-91" name="__codelineno-5-91" href="#__codelineno-5-91"></a>
<a id="__codelineno-5-92" name="__codelineno-5-92" href="#__codelineno-5-92"></a>
<a id="__codelineno-5-93" name="__codelineno-5-93" href="#__codelineno-5-93"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-5-94" name="__codelineno-5-94" href="#__codelineno-5-94"></a>
<a id="__codelineno-5-95" name="__codelineno-5-95" href="#__codelineno-5-95"></a>
<a id="__codelineno-5-96" name="__codelineno-5-96" href="#__codelineno-5-96"></a>
<a id="__codelineno-5-97" name="__codelineno-5-97" href="#__codelineno-5-97"></a>http:
<a id="__codelineno-5-98" name="__codelineno-5-98" href="#__codelineno-5-98"></a>
<a id="__codelineno-5-99" name="__codelineno-5-99" href="#__codelineno-5-99"></a>
<a id="__codelineno-5-100" name="__codelineno-5-100" href="#__codelineno-5-100"></a>
<a id="__codelineno-5-101" name="__codelineno-5-101" href="#__codelineno-5-101"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-5-102" name="__codelineno-5-102" href="#__codelineno-5-102"></a>
<a id="__codelineno-5-103" name="__codelineno-5-103" href="#__codelineno-5-103"></a>
<a id="__codelineno-5-104" name="__codelineno-5-104" href="#__codelineno-5-104"></a>
<a id="__codelineno-5-105" name="__codelineno-5-105" href="#__codelineno-5-105"></a>exporters:
<a id="__codelineno-5-106" name="__codelineno-5-106" href="#__codelineno-5-106"></a>
<a id="__codelineno-5-107" name="__codelineno-5-107" href="#__codelineno-5-107"></a>
<a id="__codelineno-5-108" name="__codelineno-5-108" href="#__codelineno-5-108"></a>
<a id="__codelineno-5-109" name="__codelineno-5-109" href="#__codelineno-5-109"></a>otlp_http:
<a id="__codelineno-5-110" name="__codelineno-5-110" href="#__codelineno-5-110"></a>
<a id="__codelineno-5-111" name="__codelineno-5-111" href="#__codelineno-5-111"></a>
<a id="__codelineno-5-112" name="__codelineno-5-112" href="#__codelineno-5-112"></a>
<a id="__codelineno-5-113" name="__codelineno-5-113" href="#__codelineno-5-113"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-5-114" name="__codelineno-5-114" href="#__codelineno-5-114"></a>
<a id="__codelineno-5-115" name="__codelineno-5-115" href="#__codelineno-5-115"></a>
<a id="__codelineno-5-116" name="__codelineno-5-116" href="#__codelineno-5-116"></a>
<a id="__codelineno-5-117" name="__codelineno-5-117" href="#__codelineno-5-117"></a>headers:
<a id="__codelineno-5-118" name="__codelineno-5-118" href="#__codelineno-5-118"></a>
<a id="__codelineno-5-119" name="__codelineno-5-119" href="#__codelineno-5-119"></a>
<a id="__codelineno-5-120" name="__codelineno-5-120" href="#__codelineno-5-120"></a>
<a id="__codelineno-5-121" name="__codelineno-5-121" href="#__codelineno-5-121"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-5-122" name="__codelineno-5-122" href="#__codelineno-5-122"></a>
<a id="__codelineno-5-123" name="__codelineno-5-123" href="#__codelineno-5-123"></a>
<a id="__codelineno-5-124" name="__codelineno-5-124" href="#__codelineno-5-124"></a>
<a id="__codelineno-5-125" name="__codelineno-5-125" href="#__codelineno-5-125"></a>service:
<a id="__codelineno-5-126" name="__codelineno-5-126" href="#__codelineno-5-126"></a>
<a id="__codelineno-5-127" name="__codelineno-5-127" href="#__codelineno-5-127"></a>
<a id="__codelineno-5-128" name="__codelineno-5-128" href="#__codelineno-5-128"></a>
<a id="__codelineno-5-129" name="__codelineno-5-129" href="#__codelineno-5-129"></a>pipelines:
<a id="__codelineno-5-130" name="__codelineno-5-130" href="#__codelineno-5-130"></a>
<a id="__codelineno-5-131" name="__codelineno-5-131" href="#__codelineno-5-131"></a>
<a id="__codelineno-5-132" name="__codelineno-5-132" href="#__codelineno-5-132"></a>
<a id="__codelineno-5-133" name="__codelineno-5-133" href="#__codelineno-5-133"></a>traces:
<a id="__codelineno-5-134" name="__codelineno-5-134" href="#__codelineno-5-134"></a>
<a id="__codelineno-5-135" name="__codelineno-5-135" href="#__codelineno-5-135"></a>
<a id="__codelineno-5-136" name="__codelineno-5-136" href="#__codelineno-5-136"></a>
<a id="__codelineno-5-137" name="__codelineno-5-137" href="#__codelineno-5-137"></a>receivers: [otlp]
<a id="__codelineno-5-138" name="__codelineno-5-138" href="#__codelineno-5-138"></a>
<a id="__codelineno-5-139" name="__codelineno-5-139" href="#__codelineno-5-139"></a>
<a id="__codelineno-5-140" name="__codelineno-5-140" href="#__codelineno-5-140"></a>
<a id="__codelineno-5-141" name="__codelineno-5-141" href="#__codelineno-5-141"></a>processors: []
<a id="__codelineno-5-142" name="__codelineno-5-142" href="#__codelineno-5-142"></a>
<a id="__codelineno-5-143" name="__codelineno-5-143" href="#__codelineno-5-143"></a>
<a id="__codelineno-5-144" name="__codelineno-5-144" href="#__codelineno-5-144"></a>
<a id="__codelineno-5-145" name="__codelineno-5-145" href="#__codelineno-5-145"></a>exporters: [otlp_http]
<a id="__codelineno-5-146" name="__codelineno-5-146" href="#__codelineno-5-146"></a>
<a id="__codelineno-5-147" name="__codelineno-5-147" href="#__codelineno-5-147"></a>
<a id="__codelineno-5-148" name="__codelineno-5-148" href="#__codelineno-5-148"></a>
<a id="__codelineno-5-149" name="__codelineno-5-149" href="#__codelineno-5-149"></a>metrics:
<a id="__codelineno-5-150" name="__codelineno-5-150" href="#__codelineno-5-150"></a>
<a id="__codelineno-5-151" name="__codelineno-5-151" href="#__codelineno-5-151"></a>
<a id="__codelineno-5-152" name="__codelineno-5-152" href="#__codelineno-5-152"></a>
<a id="__codelineno-5-153" name="__codelineno-5-153" href="#__codelineno-5-153"></a>receivers: [otlp]
<a id="__codelineno-5-154" name="__codelineno-5-154" href="#__codelineno-5-154"></a>
<a id="__codelineno-5-155" name="__codelineno-5-155" href="#__codelineno-5-155"></a>
<a id="__codelineno-5-156" name="__codelineno-5-156" href="#__codelineno-5-156"></a>
<a id="__codelineno-5-157" name="__codelineno-5-157" href="#__codelineno-5-157"></a>processors: []
<a id="__codelineno-5-158" name="__codelineno-5-158" href="#__codelineno-5-158"></a>
<a id="__codelineno-5-159" name="__codelineno-5-159" href="#__codelineno-5-159"></a>
<a id="__codelineno-5-160" name="__codelineno-5-160" href="#__codelineno-5-160"></a>
<a id="__codelineno-5-161" name="__codelineno-5-161" href="#__codelineno-5-161"></a>exporters: [otlp_http]
<a id="__codelineno-5-162" name="__codelineno-5-162" href="#__codelineno-5-162"></a>
<a id="__codelineno-5-163" name="__codelineno-5-163" href="#__codelineno-5-163"></a>
<a id="__codelineno-5-164" name="__codelineno-5-164" href="#__codelineno-5-164"></a>
<a id="__codelineno-5-165" name="__codelineno-5-165" href="#__codelineno-5-165"></a>logs:
<a id="__codelineno-5-166" name="__codelineno-5-166" href="#__codelineno-5-166"></a>
<a id="__codelineno-5-167" name="__codelineno-5-167" href="#__codelineno-5-167"></a>
<a id="__codelineno-5-168" name="__codelineno-5-168" href="#__codelineno-5-168"></a>
<a id="__codelineno-5-169" name="__codelineno-5-169" href="#__codelineno-5-169"></a>receivers: [otlp]
<a id="__codelineno-5-170" name="__codelineno-5-170" href="#__codelineno-5-170"></a>
<a id="__codelineno-5-171" name="__codelineno-5-171" href="#__codelineno-5-171"></a>
<a id="__codelineno-5-172" name="__codelineno-5-172" href="#__codelineno-5-172"></a>
<a id="__codelineno-5-173" name="__codelineno-5-173" href="#__codelineno-5-173"></a>processors: []
<a id="__codelineno-5-174" name="__codelineno-5-174" href="#__codelineno-5-174"></a>
<a id="__codelineno-5-175" name="__codelineno-5-175" href="#__codelineno-5-175"></a>
<a id="__codelineno-5-176" name="__codelineno-5-176" href="#__codelineno-5-176"></a>
<a id="__codelineno-5-177" name="__codelineno-5-177" href="#__codelineno-5-177"></a>exporters: [otlp_http]
</code></pre></div>
<p>Deploy as an agent (DaemonSet)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>apiVersion: opentelemetry.io/v1beta1
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>kind: OpenTelemetryCollector
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>metadata:
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>name: dynatrace-otel
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>spec:
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>envFrom:
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>- secretRef:
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>env:
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a>- name: MY_POD_IP
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>valueFrom:
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a>fieldRef:
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a>fieldPath: status.podIP
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a>mode: &quot;daemonset&quot;
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a>image: &quot;ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0&quot;
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a>resources:
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a>
<a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a>limits:
<a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a>
<a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a>
<a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a>
<a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a>memory: 512Mi
<a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a>
<a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a>
<a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a>
<a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a>config:
<a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a>
<a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a>
<a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a>
<a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a>receivers:
<a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a>
<a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a>
<a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a>
<a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a>otlp:
<a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a>
<a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a>
<a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a>
<a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a>protocols:
<a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a>
<a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a>
<a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a>
<a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a>grpc:
<a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a>
<a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a>
<a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a>
<a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a>
<a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a>
<a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a>
<a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a>http:
<a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a>
<a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a>
<a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a>
<a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-6-102" name="__codelineno-6-102" href="#__codelineno-6-102"></a>
<a id="__codelineno-6-103" name="__codelineno-6-103" href="#__codelineno-6-103"></a>
<a id="__codelineno-6-104" name="__codelineno-6-104" href="#__codelineno-6-104"></a>
<a id="__codelineno-6-105" name="__codelineno-6-105" href="#__codelineno-6-105"></a>exporters:
<a id="__codelineno-6-106" name="__codelineno-6-106" href="#__codelineno-6-106"></a>
<a id="__codelineno-6-107" name="__codelineno-6-107" href="#__codelineno-6-107"></a>
<a id="__codelineno-6-108" name="__codelineno-6-108" href="#__codelineno-6-108"></a>
<a id="__codelineno-6-109" name="__codelineno-6-109" href="#__codelineno-6-109"></a>otlp_http:
<a id="__codelineno-6-110" name="__codelineno-6-110" href="#__codelineno-6-110"></a>
<a id="__codelineno-6-111" name="__codelineno-6-111" href="#__codelineno-6-111"></a>
<a id="__codelineno-6-112" name="__codelineno-6-112" href="#__codelineno-6-112"></a>
<a id="__codelineno-6-113" name="__codelineno-6-113" href="#__codelineno-6-113"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-6-114" name="__codelineno-6-114" href="#__codelineno-6-114"></a>
<a id="__codelineno-6-115" name="__codelineno-6-115" href="#__codelineno-6-115"></a>
<a id="__codelineno-6-116" name="__codelineno-6-116" href="#__codelineno-6-116"></a>
<a id="__codelineno-6-117" name="__codelineno-6-117" href="#__codelineno-6-117"></a>headers:
<a id="__codelineno-6-118" name="__codelineno-6-118" href="#__codelineno-6-118"></a>
<a id="__codelineno-6-119" name="__codelineno-6-119" href="#__codelineno-6-119"></a>
<a id="__codelineno-6-120" name="__codelineno-6-120" href="#__codelineno-6-120"></a>
<a id="__codelineno-6-121" name="__codelineno-6-121" href="#__codelineno-6-121"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-6-122" name="__codelineno-6-122" href="#__codelineno-6-122"></a>
<a id="__codelineno-6-123" name="__codelineno-6-123" href="#__codelineno-6-123"></a>
<a id="__codelineno-6-124" name="__codelineno-6-124" href="#__codelineno-6-124"></a>
<a id="__codelineno-6-125" name="__codelineno-6-125" href="#__codelineno-6-125"></a>service:
<a id="__codelineno-6-126" name="__codelineno-6-126" href="#__codelineno-6-126"></a>
<a id="__codelineno-6-127" name="__codelineno-6-127" href="#__codelineno-6-127"></a>
<a id="__codelineno-6-128" name="__codelineno-6-128" href="#__codelineno-6-128"></a>
<a id="__codelineno-6-129" name="__codelineno-6-129" href="#__codelineno-6-129"></a>pipelines:
<a id="__codelineno-6-130" name="__codelineno-6-130" href="#__codelineno-6-130"></a>
<a id="__codelineno-6-131" name="__codelineno-6-131" href="#__codelineno-6-131"></a>
<a id="__codelineno-6-132" name="__codelineno-6-132" href="#__codelineno-6-132"></a>
<a id="__codelineno-6-133" name="__codelineno-6-133" href="#__codelineno-6-133"></a>traces:
<a id="__codelineno-6-134" name="__codelineno-6-134" href="#__codelineno-6-134"></a>
<a id="__codelineno-6-135" name="__codelineno-6-135" href="#__codelineno-6-135"></a>
<a id="__codelineno-6-136" name="__codelineno-6-136" href="#__codelineno-6-136"></a>
<a id="__codelineno-6-137" name="__codelineno-6-137" href="#__codelineno-6-137"></a>receivers: [otlp]
<a id="__codelineno-6-138" name="__codelineno-6-138" href="#__codelineno-6-138"></a>
<a id="__codelineno-6-139" name="__codelineno-6-139" href="#__codelineno-6-139"></a>
<a id="__codelineno-6-140" name="__codelineno-6-140" href="#__codelineno-6-140"></a>
<a id="__codelineno-6-141" name="__codelineno-6-141" href="#__codelineno-6-141"></a>processors: []
<a id="__codelineno-6-142" name="__codelineno-6-142" href="#__codelineno-6-142"></a>
<a id="__codelineno-6-143" name="__codelineno-6-143" href="#__codelineno-6-143"></a>
<a id="__codelineno-6-144" name="__codelineno-6-144" href="#__codelineno-6-144"></a>
<a id="__codelineno-6-145" name="__codelineno-6-145" href="#__codelineno-6-145"></a>exporters: [otlp_http]
<a id="__codelineno-6-146" name="__codelineno-6-146" href="#__codelineno-6-146"></a>
<a id="__codelineno-6-147" name="__codelineno-6-147" href="#__codelineno-6-147"></a>
<a id="__codelineno-6-148" name="__codelineno-6-148" href="#__codelineno-6-148"></a>
<a id="__codelineno-6-149" name="__codelineno-6-149" href="#__codelineno-6-149"></a>metrics:
<a id="__codelineno-6-150" name="__codelineno-6-150" href="#__codelineno-6-150"></a>
<a id="__codelineno-6-151" name="__codelineno-6-151" href="#__codelineno-6-151"></a>
<a id="__codelineno-6-152" name="__codelineno-6-152" href="#__codelineno-6-152"></a>
<a id="__codelineno-6-153" name="__codelineno-6-153" href="#__codelineno-6-153"></a>receivers: [otlp]
<a id="__codelineno-6-154" name="__codelineno-6-154" href="#__codelineno-6-154"></a>
<a id="__codelineno-6-155" name="__codelineno-6-155" href="#__codelineno-6-155"></a>
<a id="__codelineno-6-156" name="__codelineno-6-156" href="#__codelineno-6-156"></a>
<a id="__codelineno-6-157" name="__codelineno-6-157" href="#__codelineno-6-157"></a>processors: []
<a id="__codelineno-6-158" name="__codelineno-6-158" href="#__codelineno-6-158"></a>
<a id="__codelineno-6-159" name="__codelineno-6-159" href="#__codelineno-6-159"></a>
<a id="__codelineno-6-160" name="__codelineno-6-160" href="#__codelineno-6-160"></a>
<a id="__codelineno-6-161" name="__codelineno-6-161" href="#__codelineno-6-161"></a>exporters: [otlp_http]
<a id="__codelineno-6-162" name="__codelineno-6-162" href="#__codelineno-6-162"></a>
<a id="__codelineno-6-163" name="__codelineno-6-163" href="#__codelineno-6-163"></a>
<a id="__codelineno-6-164" name="__codelineno-6-164" href="#__codelineno-6-164"></a>
<a id="__codelineno-6-165" name="__codelineno-6-165" href="#__codelineno-6-165"></a>logs:
<a id="__codelineno-6-166" name="__codelineno-6-166" href="#__codelineno-6-166"></a>
<a id="__codelineno-6-167" name="__codelineno-6-167" href="#__codelineno-6-167"></a>
<a id="__codelineno-6-168" name="__codelineno-6-168" href="#__codelineno-6-168"></a>
<a id="__codelineno-6-169" name="__codelineno-6-169" href="#__codelineno-6-169"></a>receivers: [otlp]
<a id="__codelineno-6-170" name="__codelineno-6-170" href="#__codelineno-6-170"></a>
<a id="__codelineno-6-171" name="__codelineno-6-171" href="#__codelineno-6-171"></a>
<a id="__codelineno-6-172" name="__codelineno-6-172" href="#__codelineno-6-172"></a>
<a id="__codelineno-6-173" name="__codelineno-6-173" href="#__codelineno-6-173"></a>processors: []
<a id="__codelineno-6-174" name="__codelineno-6-174" href="#__codelineno-6-174"></a>
<a id="__codelineno-6-175" name="__codelineno-6-175" href="#__codelineno-6-175"></a>
<a id="__codelineno-6-176" name="__codelineno-6-176" href="#__codelineno-6-176"></a>
<a id="__codelineno-6-177" name="__codelineno-6-177" href="#__codelineno-6-177"></a>exporters: [otlp_http]
</code></pre></div>
<p>Choose one of the common <a href="#deployment-modes">deployment modes</a> for the Dynatrace Collector.</p>
<p>The Helm charts below use <code>alternateConfig</code> to provide the Collector configuration. With this entry, the default Helm chart configuration, as well as a possibly present <code>config</code> object, will be ignored.</p>
<p>Deploy as a gateway (Deployment)</p>
<ol>
<li>Save the following YAML configuration under <code>values-deployment.yaml</code></li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>mode: deployment
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>image:
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>repository: ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>tag: 0.44.0
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>command:
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>name: dynatrace-otel-collector
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>extraEnvs:
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>- name: DT_API_TOKEN
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a>valueFrom:
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a>
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>
<a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a>secretKeyRef:
<a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a>
<a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a>
<a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a>
<a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>
<a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a>
<a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a>
<a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a>key: DT_API_TOKEN
<a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a>
<a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a>
<a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a>
<a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a>- name: DT_ENDPOINT
<a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a>
<a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a>
<a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a>
<a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a>valueFrom:
<a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a>
<a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a>
<a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a>
<a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a>secretKeyRef:
<a id="__codelineno-7-58" name="__codelineno-7-58" href="#__codelineno-7-58"></a>
<a id="__codelineno-7-59" name="__codelineno-7-59" href="#__codelineno-7-59"></a>
<a id="__codelineno-7-60" name="__codelineno-7-60" href="#__codelineno-7-60"></a>
<a id="__codelineno-7-61" name="__codelineno-7-61" href="#__codelineno-7-61"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-7-62" name="__codelineno-7-62" href="#__codelineno-7-62"></a>
<a id="__codelineno-7-63" name="__codelineno-7-63" href="#__codelineno-7-63"></a>
<a id="__codelineno-7-64" name="__codelineno-7-64" href="#__codelineno-7-64"></a>
<a id="__codelineno-7-65" name="__codelineno-7-65" href="#__codelineno-7-65"></a>key: DT_ENDPOINT
<a id="__codelineno-7-66" name="__codelineno-7-66" href="#__codelineno-7-66"></a>
<a id="__codelineno-7-67" name="__codelineno-7-67" href="#__codelineno-7-67"></a>
<a id="__codelineno-7-68" name="__codelineno-7-68" href="#__codelineno-7-68"></a>
<a id="__codelineno-7-69" name="__codelineno-7-69" href="#__codelineno-7-69"></a>resources:
<a id="__codelineno-7-70" name="__codelineno-7-70" href="#__codelineno-7-70"></a>
<a id="__codelineno-7-71" name="__codelineno-7-71" href="#__codelineno-7-71"></a>
<a id="__codelineno-7-72" name="__codelineno-7-72" href="#__codelineno-7-72"></a>
<a id="__codelineno-7-73" name="__codelineno-7-73" href="#__codelineno-7-73"></a>limits:
<a id="__codelineno-7-74" name="__codelineno-7-74" href="#__codelineno-7-74"></a>
<a id="__codelineno-7-75" name="__codelineno-7-75" href="#__codelineno-7-75"></a>
<a id="__codelineno-7-76" name="__codelineno-7-76" href="#__codelineno-7-76"></a>
<a id="__codelineno-7-77" name="__codelineno-7-77" href="#__codelineno-7-77"></a>memory: 512Mi
<a id="__codelineno-7-78" name="__codelineno-7-78" href="#__codelineno-7-78"></a>
<a id="__codelineno-7-79" name="__codelineno-7-79" href="#__codelineno-7-79"></a>
<a id="__codelineno-7-80" name="__codelineno-7-80" href="#__codelineno-7-80"></a>
<a id="__codelineno-7-81" name="__codelineno-7-81" href="#__codelineno-7-81"></a>alternateConfig:
<a id="__codelineno-7-82" name="__codelineno-7-82" href="#__codelineno-7-82"></a>
<a id="__codelineno-7-83" name="__codelineno-7-83" href="#__codelineno-7-83"></a>
<a id="__codelineno-7-84" name="__codelineno-7-84" href="#__codelineno-7-84"></a>
<a id="__codelineno-7-85" name="__codelineno-7-85" href="#__codelineno-7-85"></a>extensions:
<a id="__codelineno-7-86" name="__codelineno-7-86" href="#__codelineno-7-86"></a>
<a id="__codelineno-7-87" name="__codelineno-7-87" href="#__codelineno-7-87"></a>
<a id="__codelineno-7-88" name="__codelineno-7-88" href="#__codelineno-7-88"></a>
<a id="__codelineno-7-89" name="__codelineno-7-89" href="#__codelineno-7-89"></a>health_check:
<a id="__codelineno-7-90" name="__codelineno-7-90" href="#__codelineno-7-90"></a>
<a id="__codelineno-7-91" name="__codelineno-7-91" href="#__codelineno-7-91"></a>
<a id="__codelineno-7-92" name="__codelineno-7-92" href="#__codelineno-7-92"></a>
<a id="__codelineno-7-93" name="__codelineno-7-93" href="#__codelineno-7-93"></a>endpoint: &quot;${env:MY_POD_IP}:13133&quot;
<a id="__codelineno-7-94" name="__codelineno-7-94" href="#__codelineno-7-94"></a>
<a id="__codelineno-7-95" name="__codelineno-7-95" href="#__codelineno-7-95"></a>
<a id="__codelineno-7-96" name="__codelineno-7-96" href="#__codelineno-7-96"></a>
<a id="__codelineno-7-97" name="__codelineno-7-97" href="#__codelineno-7-97"></a>receivers:
<a id="__codelineno-7-98" name="__codelineno-7-98" href="#__codelineno-7-98"></a>
<a id="__codelineno-7-99" name="__codelineno-7-99" href="#__codelineno-7-99"></a>
<a id="__codelineno-7-100" name="__codelineno-7-100" href="#__codelineno-7-100"></a>
<a id="__codelineno-7-101" name="__codelineno-7-101" href="#__codelineno-7-101"></a>otlp:
<a id="__codelineno-7-102" name="__codelineno-7-102" href="#__codelineno-7-102"></a>
<a id="__codelineno-7-103" name="__codelineno-7-103" href="#__codelineno-7-103"></a>
<a id="__codelineno-7-104" name="__codelineno-7-104" href="#__codelineno-7-104"></a>
<a id="__codelineno-7-105" name="__codelineno-7-105" href="#__codelineno-7-105"></a>protocols:
<a id="__codelineno-7-106" name="__codelineno-7-106" href="#__codelineno-7-106"></a>
<a id="__codelineno-7-107" name="__codelineno-7-107" href="#__codelineno-7-107"></a>
<a id="__codelineno-7-108" name="__codelineno-7-108" href="#__codelineno-7-108"></a>
<a id="__codelineno-7-109" name="__codelineno-7-109" href="#__codelineno-7-109"></a>grpc:
<a id="__codelineno-7-110" name="__codelineno-7-110" href="#__codelineno-7-110"></a>
<a id="__codelineno-7-111" name="__codelineno-7-111" href="#__codelineno-7-111"></a>
<a id="__codelineno-7-112" name="__codelineno-7-112" href="#__codelineno-7-112"></a>
<a id="__codelineno-7-113" name="__codelineno-7-113" href="#__codelineno-7-113"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-7-114" name="__codelineno-7-114" href="#__codelineno-7-114"></a>
<a id="__codelineno-7-115" name="__codelineno-7-115" href="#__codelineno-7-115"></a>
<a id="__codelineno-7-116" name="__codelineno-7-116" href="#__codelineno-7-116"></a>
<a id="__codelineno-7-117" name="__codelineno-7-117" href="#__codelineno-7-117"></a>http:
<a id="__codelineno-7-118" name="__codelineno-7-118" href="#__codelineno-7-118"></a>
<a id="__codelineno-7-119" name="__codelineno-7-119" href="#__codelineno-7-119"></a>
<a id="__codelineno-7-120" name="__codelineno-7-120" href="#__codelineno-7-120"></a>
<a id="__codelineno-7-121" name="__codelineno-7-121" href="#__codelineno-7-121"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-7-122" name="__codelineno-7-122" href="#__codelineno-7-122"></a>
<a id="__codelineno-7-123" name="__codelineno-7-123" href="#__codelineno-7-123"></a>
<a id="__codelineno-7-124" name="__codelineno-7-124" href="#__codelineno-7-124"></a>
<a id="__codelineno-7-125" name="__codelineno-7-125" href="#__codelineno-7-125"></a>filelog: null
<a id="__codelineno-7-126" name="__codelineno-7-126" href="#__codelineno-7-126"></a>
<a id="__codelineno-7-127" name="__codelineno-7-127" href="#__codelineno-7-127"></a>
<a id="__codelineno-7-128" name="__codelineno-7-128" href="#__codelineno-7-128"></a>
<a id="__codelineno-7-129" name="__codelineno-7-129" href="#__codelineno-7-129"></a>exporters:
<a id="__codelineno-7-130" name="__codelineno-7-130" href="#__codelineno-7-130"></a>
<a id="__codelineno-7-131" name="__codelineno-7-131" href="#__codelineno-7-131"></a>
<a id="__codelineno-7-132" name="__codelineno-7-132" href="#__codelineno-7-132"></a>
<a id="__codelineno-7-133" name="__codelineno-7-133" href="#__codelineno-7-133"></a>otlp_http:
<a id="__codelineno-7-134" name="__codelineno-7-134" href="#__codelineno-7-134"></a>
<a id="__codelineno-7-135" name="__codelineno-7-135" href="#__codelineno-7-135"></a>
<a id="__codelineno-7-136" name="__codelineno-7-136" href="#__codelineno-7-136"></a>
<a id="__codelineno-7-137" name="__codelineno-7-137" href="#__codelineno-7-137"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-7-138" name="__codelineno-7-138" href="#__codelineno-7-138"></a>
<a id="__codelineno-7-139" name="__codelineno-7-139" href="#__codelineno-7-139"></a>
<a id="__codelineno-7-140" name="__codelineno-7-140" href="#__codelineno-7-140"></a>
<a id="__codelineno-7-141" name="__codelineno-7-141" href="#__codelineno-7-141"></a>headers:
<a id="__codelineno-7-142" name="__codelineno-7-142" href="#__codelineno-7-142"></a>
<a id="__codelineno-7-143" name="__codelineno-7-143" href="#__codelineno-7-143"></a>
<a id="__codelineno-7-144" name="__codelineno-7-144" href="#__codelineno-7-144"></a>
<a id="__codelineno-7-145" name="__codelineno-7-145" href="#__codelineno-7-145"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-7-146" name="__codelineno-7-146" href="#__codelineno-7-146"></a>
<a id="__codelineno-7-147" name="__codelineno-7-147" href="#__codelineno-7-147"></a>
<a id="__codelineno-7-148" name="__codelineno-7-148" href="#__codelineno-7-148"></a>
<a id="__codelineno-7-149" name="__codelineno-7-149" href="#__codelineno-7-149"></a>service:
<a id="__codelineno-7-150" name="__codelineno-7-150" href="#__codelineno-7-150"></a>
<a id="__codelineno-7-151" name="__codelineno-7-151" href="#__codelineno-7-151"></a>
<a id="__codelineno-7-152" name="__codelineno-7-152" href="#__codelineno-7-152"></a>
<a id="__codelineno-7-153" name="__codelineno-7-153" href="#__codelineno-7-153"></a>extensions: [health_check]
<a id="__codelineno-7-154" name="__codelineno-7-154" href="#__codelineno-7-154"></a>
<a id="__codelineno-7-155" name="__codelineno-7-155" href="#__codelineno-7-155"></a>
<a id="__codelineno-7-156" name="__codelineno-7-156" href="#__codelineno-7-156"></a>
<a id="__codelineno-7-157" name="__codelineno-7-157" href="#__codelineno-7-157"></a>pipelines:
<a id="__codelineno-7-158" name="__codelineno-7-158" href="#__codelineno-7-158"></a>
<a id="__codelineno-7-159" name="__codelineno-7-159" href="#__codelineno-7-159"></a>
<a id="__codelineno-7-160" name="__codelineno-7-160" href="#__codelineno-7-160"></a>
<a id="__codelineno-7-161" name="__codelineno-7-161" href="#__codelineno-7-161"></a>traces:
<a id="__codelineno-7-162" name="__codelineno-7-162" href="#__codelineno-7-162"></a>
<a id="__codelineno-7-163" name="__codelineno-7-163" href="#__codelineno-7-163"></a>
<a id="__codelineno-7-164" name="__codelineno-7-164" href="#__codelineno-7-164"></a>
<a id="__codelineno-7-165" name="__codelineno-7-165" href="#__codelineno-7-165"></a>receivers: [otlp]
<a id="__codelineno-7-166" name="__codelineno-7-166" href="#__codelineno-7-166"></a>
<a id="__codelineno-7-167" name="__codelineno-7-167" href="#__codelineno-7-167"></a>
<a id="__codelineno-7-168" name="__codelineno-7-168" href="#__codelineno-7-168"></a>
<a id="__codelineno-7-169" name="__codelineno-7-169" href="#__codelineno-7-169"></a>processors: []
<a id="__codelineno-7-170" name="__codelineno-7-170" href="#__codelineno-7-170"></a>
<a id="__codelineno-7-171" name="__codelineno-7-171" href="#__codelineno-7-171"></a>
<a id="__codelineno-7-172" name="__codelineno-7-172" href="#__codelineno-7-172"></a>
<a id="__codelineno-7-173" name="__codelineno-7-173" href="#__codelineno-7-173"></a>exporters: [otlp_http]
<a id="__codelineno-7-174" name="__codelineno-7-174" href="#__codelineno-7-174"></a>
<a id="__codelineno-7-175" name="__codelineno-7-175" href="#__codelineno-7-175"></a>
<a id="__codelineno-7-176" name="__codelineno-7-176" href="#__codelineno-7-176"></a>
<a id="__codelineno-7-177" name="__codelineno-7-177" href="#__codelineno-7-177"></a>metrics:
<a id="__codelineno-7-178" name="__codelineno-7-178" href="#__codelineno-7-178"></a>
<a id="__codelineno-7-179" name="__codelineno-7-179" href="#__codelineno-7-179"></a>
<a id="__codelineno-7-180" name="__codelineno-7-180" href="#__codelineno-7-180"></a>
<a id="__codelineno-7-181" name="__codelineno-7-181" href="#__codelineno-7-181"></a>receivers: [otlp]
<a id="__codelineno-7-182" name="__codelineno-7-182" href="#__codelineno-7-182"></a>
<a id="__codelineno-7-183" name="__codelineno-7-183" href="#__codelineno-7-183"></a>
<a id="__codelineno-7-184" name="__codelineno-7-184" href="#__codelineno-7-184"></a>
<a id="__codelineno-7-185" name="__codelineno-7-185" href="#__codelineno-7-185"></a>processors: []
<a id="__codelineno-7-186" name="__codelineno-7-186" href="#__codelineno-7-186"></a>
<a id="__codelineno-7-187" name="__codelineno-7-187" href="#__codelineno-7-187"></a>
<a id="__codelineno-7-188" name="__codelineno-7-188" href="#__codelineno-7-188"></a>
<a id="__codelineno-7-189" name="__codelineno-7-189" href="#__codelineno-7-189"></a>exporters: [otlp_http]
<a id="__codelineno-7-190" name="__codelineno-7-190" href="#__codelineno-7-190"></a>
<a id="__codelineno-7-191" name="__codelineno-7-191" href="#__codelineno-7-191"></a>
<a id="__codelineno-7-192" name="__codelineno-7-192" href="#__codelineno-7-192"></a>
<a id="__codelineno-7-193" name="__codelineno-7-193" href="#__codelineno-7-193"></a>logs:
<a id="__codelineno-7-194" name="__codelineno-7-194" href="#__codelineno-7-194"></a>
<a id="__codelineno-7-195" name="__codelineno-7-195" href="#__codelineno-7-195"></a>
<a id="__codelineno-7-196" name="__codelineno-7-196" href="#__codelineno-7-196"></a>
<a id="__codelineno-7-197" name="__codelineno-7-197" href="#__codelineno-7-197"></a>receivers: [otlp]
<a id="__codelineno-7-198" name="__codelineno-7-198" href="#__codelineno-7-198"></a>
<a id="__codelineno-7-199" name="__codelineno-7-199" href="#__codelineno-7-199"></a>
<a id="__codelineno-7-200" name="__codelineno-7-200" href="#__codelineno-7-200"></a>
<a id="__codelineno-7-201" name="__codelineno-7-201" href="#__codelineno-7-201"></a>processors: []
<a id="__codelineno-7-202" name="__codelineno-7-202" href="#__codelineno-7-202"></a>
<a id="__codelineno-7-203" name="__codelineno-7-203" href="#__codelineno-7-203"></a>
<a id="__codelineno-7-204" name="__codelineno-7-204" href="#__codelineno-7-204"></a>
<a id="__codelineno-7-205" name="__codelineno-7-205" href="#__codelineno-7-205"></a>exporters: [otlp_http]
</code></pre></div>
2. Run the following commands to configure and install the Helm charts</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>helm repo add open-telemetry https://open-telemetry.github.io/opentelemetry-helm-charts
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>helm repo update
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>helm upgrade -i dynatrace-collector open-telemetry/opentelemetry-collector -f values-deployment.yaml
</code></pre></div>
<p>Deploy as an agent (DaemonSet)</p>
<ol>
<li>Save the following YAML configuration under <code>values-daemonset.yaml</code></li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>mode: daemonset
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>image:
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>repository: ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>tag: 0.44.0
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>command:
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>name: dynatrace-otel-collector
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a>extraEnvs:
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a>
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a>
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a>- name: DT_API_TOKEN
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a>
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a>
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a>valueFrom:
<a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a>
<a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a>
<a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a>
<a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a>secretKeyRef:
<a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a>
<a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a>
<a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a>
<a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a>
<a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a>
<a id="__codelineno-9-44" name="__codelineno-9-44" href="#__codelineno-9-44"></a>
<a id="__codelineno-9-45" name="__codelineno-9-45" href="#__codelineno-9-45"></a>key: DT_API_TOKEN
<a id="__codelineno-9-46" name="__codelineno-9-46" href="#__codelineno-9-46"></a>
<a id="__codelineno-9-47" name="__codelineno-9-47" href="#__codelineno-9-47"></a>
<a id="__codelineno-9-48" name="__codelineno-9-48" href="#__codelineno-9-48"></a>
<a id="__codelineno-9-49" name="__codelineno-9-49" href="#__codelineno-9-49"></a>- name: DT_ENDPOINT
<a id="__codelineno-9-50" name="__codelineno-9-50" href="#__codelineno-9-50"></a>
<a id="__codelineno-9-51" name="__codelineno-9-51" href="#__codelineno-9-51"></a>
<a id="__codelineno-9-52" name="__codelineno-9-52" href="#__codelineno-9-52"></a>
<a id="__codelineno-9-53" name="__codelineno-9-53" href="#__codelineno-9-53"></a>valueFrom:
<a id="__codelineno-9-54" name="__codelineno-9-54" href="#__codelineno-9-54"></a>
<a id="__codelineno-9-55" name="__codelineno-9-55" href="#__codelineno-9-55"></a>
<a id="__codelineno-9-56" name="__codelineno-9-56" href="#__codelineno-9-56"></a>
<a id="__codelineno-9-57" name="__codelineno-9-57" href="#__codelineno-9-57"></a>secretKeyRef:
<a id="__codelineno-9-58" name="__codelineno-9-58" href="#__codelineno-9-58"></a>
<a id="__codelineno-9-59" name="__codelineno-9-59" href="#__codelineno-9-59"></a>
<a id="__codelineno-9-60" name="__codelineno-9-60" href="#__codelineno-9-60"></a>
<a id="__codelineno-9-61" name="__codelineno-9-61" href="#__codelineno-9-61"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-9-62" name="__codelineno-9-62" href="#__codelineno-9-62"></a>
<a id="__codelineno-9-63" name="__codelineno-9-63" href="#__codelineno-9-63"></a>
<a id="__codelineno-9-64" name="__codelineno-9-64" href="#__codelineno-9-64"></a>
<a id="__codelineno-9-65" name="__codelineno-9-65" href="#__codelineno-9-65"></a>key: DT_ENDPOINT
<a id="__codelineno-9-66" name="__codelineno-9-66" href="#__codelineno-9-66"></a>
<a id="__codelineno-9-67" name="__codelineno-9-67" href="#__codelineno-9-67"></a>
<a id="__codelineno-9-68" name="__codelineno-9-68" href="#__codelineno-9-68"></a>
<a id="__codelineno-9-69" name="__codelineno-9-69" href="#__codelineno-9-69"></a>resources:
<a id="__codelineno-9-70" name="__codelineno-9-70" href="#__codelineno-9-70"></a>
<a id="__codelineno-9-71" name="__codelineno-9-71" href="#__codelineno-9-71"></a>
<a id="__codelineno-9-72" name="__codelineno-9-72" href="#__codelineno-9-72"></a>
<a id="__codelineno-9-73" name="__codelineno-9-73" href="#__codelineno-9-73"></a>limits:
<a id="__codelineno-9-74" name="__codelineno-9-74" href="#__codelineno-9-74"></a>
<a id="__codelineno-9-75" name="__codelineno-9-75" href="#__codelineno-9-75"></a>
<a id="__codelineno-9-76" name="__codelineno-9-76" href="#__codelineno-9-76"></a>
<a id="__codelineno-9-77" name="__codelineno-9-77" href="#__codelineno-9-77"></a>memory: 512Mi
<a id="__codelineno-9-78" name="__codelineno-9-78" href="#__codelineno-9-78"></a>
<a id="__codelineno-9-79" name="__codelineno-9-79" href="#__codelineno-9-79"></a>
<a id="__codelineno-9-80" name="__codelineno-9-80" href="#__codelineno-9-80"></a>
<a id="__codelineno-9-81" name="__codelineno-9-81" href="#__codelineno-9-81"></a>alternateConfig:
<a id="__codelineno-9-82" name="__codelineno-9-82" href="#__codelineno-9-82"></a>
<a id="__codelineno-9-83" name="__codelineno-9-83" href="#__codelineno-9-83"></a>
<a id="__codelineno-9-84" name="__codelineno-9-84" href="#__codelineno-9-84"></a>
<a id="__codelineno-9-85" name="__codelineno-9-85" href="#__codelineno-9-85"></a>extensions:
<a id="__codelineno-9-86" name="__codelineno-9-86" href="#__codelineno-9-86"></a>
<a id="__codelineno-9-87" name="__codelineno-9-87" href="#__codelineno-9-87"></a>
<a id="__codelineno-9-88" name="__codelineno-9-88" href="#__codelineno-9-88"></a>
<a id="__codelineno-9-89" name="__codelineno-9-89" href="#__codelineno-9-89"></a>health_check:
<a id="__codelineno-9-90" name="__codelineno-9-90" href="#__codelineno-9-90"></a>
<a id="__codelineno-9-91" name="__codelineno-9-91" href="#__codelineno-9-91"></a>
<a id="__codelineno-9-92" name="__codelineno-9-92" href="#__codelineno-9-92"></a>
<a id="__codelineno-9-93" name="__codelineno-9-93" href="#__codelineno-9-93"></a>endpoint: &quot;${env:MY_POD_IP}:13133&quot;
<a id="__codelineno-9-94" name="__codelineno-9-94" href="#__codelineno-9-94"></a>
<a id="__codelineno-9-95" name="__codelineno-9-95" href="#__codelineno-9-95"></a>
<a id="__codelineno-9-96" name="__codelineno-9-96" href="#__codelineno-9-96"></a>
<a id="__codelineno-9-97" name="__codelineno-9-97" href="#__codelineno-9-97"></a>receivers:
<a id="__codelineno-9-98" name="__codelineno-9-98" href="#__codelineno-9-98"></a>
<a id="__codelineno-9-99" name="__codelineno-9-99" href="#__codelineno-9-99"></a>
<a id="__codelineno-9-100" name="__codelineno-9-100" href="#__codelineno-9-100"></a>
<a id="__codelineno-9-101" name="__codelineno-9-101" href="#__codelineno-9-101"></a>otlp:
<a id="__codelineno-9-102" name="__codelineno-9-102" href="#__codelineno-9-102"></a>
<a id="__codelineno-9-103" name="__codelineno-9-103" href="#__codelineno-9-103"></a>
<a id="__codelineno-9-104" name="__codelineno-9-104" href="#__codelineno-9-104"></a>
<a id="__codelineno-9-105" name="__codelineno-9-105" href="#__codelineno-9-105"></a>protocols:
<a id="__codelineno-9-106" name="__codelineno-9-106" href="#__codelineno-9-106"></a>
<a id="__codelineno-9-107" name="__codelineno-9-107" href="#__codelineno-9-107"></a>
<a id="__codelineno-9-108" name="__codelineno-9-108" href="#__codelineno-9-108"></a>
<a id="__codelineno-9-109" name="__codelineno-9-109" href="#__codelineno-9-109"></a>grpc:
<a id="__codelineno-9-110" name="__codelineno-9-110" href="#__codelineno-9-110"></a>
<a id="__codelineno-9-111" name="__codelineno-9-111" href="#__codelineno-9-111"></a>
<a id="__codelineno-9-112" name="__codelineno-9-112" href="#__codelineno-9-112"></a>
<a id="__codelineno-9-113" name="__codelineno-9-113" href="#__codelineno-9-113"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-9-114" name="__codelineno-9-114" href="#__codelineno-9-114"></a>
<a id="__codelineno-9-115" name="__codelineno-9-115" href="#__codelineno-9-115"></a>
<a id="__codelineno-9-116" name="__codelineno-9-116" href="#__codelineno-9-116"></a>
<a id="__codelineno-9-117" name="__codelineno-9-117" href="#__codelineno-9-117"></a>http:
<a id="__codelineno-9-118" name="__codelineno-9-118" href="#__codelineno-9-118"></a>
<a id="__codelineno-9-119" name="__codelineno-9-119" href="#__codelineno-9-119"></a>
<a id="__codelineno-9-120" name="__codelineno-9-120" href="#__codelineno-9-120"></a>
<a id="__codelineno-9-121" name="__codelineno-9-121" href="#__codelineno-9-121"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-9-122" name="__codelineno-9-122" href="#__codelineno-9-122"></a>
<a id="__codelineno-9-123" name="__codelineno-9-123" href="#__codelineno-9-123"></a>
<a id="__codelineno-9-124" name="__codelineno-9-124" href="#__codelineno-9-124"></a>
<a id="__codelineno-9-125" name="__codelineno-9-125" href="#__codelineno-9-125"></a>exporters:
<a id="__codelineno-9-126" name="__codelineno-9-126" href="#__codelineno-9-126"></a>
<a id="__codelineno-9-127" name="__codelineno-9-127" href="#__codelineno-9-127"></a>
<a id="__codelineno-9-128" name="__codelineno-9-128" href="#__codelineno-9-128"></a>
<a id="__codelineno-9-129" name="__codelineno-9-129" href="#__codelineno-9-129"></a>otlp_http:
<a id="__codelineno-9-130" name="__codelineno-9-130" href="#__codelineno-9-130"></a>
<a id="__codelineno-9-131" name="__codelineno-9-131" href="#__codelineno-9-131"></a>
<a id="__codelineno-9-132" name="__codelineno-9-132" href="#__codelineno-9-132"></a>
<a id="__codelineno-9-133" name="__codelineno-9-133" href="#__codelineno-9-133"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-9-134" name="__codelineno-9-134" href="#__codelineno-9-134"></a>
<a id="__codelineno-9-135" name="__codelineno-9-135" href="#__codelineno-9-135"></a>
<a id="__codelineno-9-136" name="__codelineno-9-136" href="#__codelineno-9-136"></a>
<a id="__codelineno-9-137" name="__codelineno-9-137" href="#__codelineno-9-137"></a>headers:
<a id="__codelineno-9-138" name="__codelineno-9-138" href="#__codelineno-9-138"></a>
<a id="__codelineno-9-139" name="__codelineno-9-139" href="#__codelineno-9-139"></a>
<a id="__codelineno-9-140" name="__codelineno-9-140" href="#__codelineno-9-140"></a>
<a id="__codelineno-9-141" name="__codelineno-9-141" href="#__codelineno-9-141"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-9-142" name="__codelineno-9-142" href="#__codelineno-9-142"></a>
<a id="__codelineno-9-143" name="__codelineno-9-143" href="#__codelineno-9-143"></a>
<a id="__codelineno-9-144" name="__codelineno-9-144" href="#__codelineno-9-144"></a>
<a id="__codelineno-9-145" name="__codelineno-9-145" href="#__codelineno-9-145"></a>service:
<a id="__codelineno-9-146" name="__codelineno-9-146" href="#__codelineno-9-146"></a>
<a id="__codelineno-9-147" name="__codelineno-9-147" href="#__codelineno-9-147"></a>
<a id="__codelineno-9-148" name="__codelineno-9-148" href="#__codelineno-9-148"></a>
<a id="__codelineno-9-149" name="__codelineno-9-149" href="#__codelineno-9-149"></a>extensions: [health_check]
<a id="__codelineno-9-150" name="__codelineno-9-150" href="#__codelineno-9-150"></a>
<a id="__codelineno-9-151" name="__codelineno-9-151" href="#__codelineno-9-151"></a>
<a id="__codelineno-9-152" name="__codelineno-9-152" href="#__codelineno-9-152"></a>
<a id="__codelineno-9-153" name="__codelineno-9-153" href="#__codelineno-9-153"></a>pipelines:
<a id="__codelineno-9-154" name="__codelineno-9-154" href="#__codelineno-9-154"></a>
<a id="__codelineno-9-155" name="__codelineno-9-155" href="#__codelineno-9-155"></a>
<a id="__codelineno-9-156" name="__codelineno-9-156" href="#__codelineno-9-156"></a>
<a id="__codelineno-9-157" name="__codelineno-9-157" href="#__codelineno-9-157"></a>traces:
<a id="__codelineno-9-158" name="__codelineno-9-158" href="#__codelineno-9-158"></a>
<a id="__codelineno-9-159" name="__codelineno-9-159" href="#__codelineno-9-159"></a>
<a id="__codelineno-9-160" name="__codelineno-9-160" href="#__codelineno-9-160"></a>
<a id="__codelineno-9-161" name="__codelineno-9-161" href="#__codelineno-9-161"></a>receivers: [otlp]
<a id="__codelineno-9-162" name="__codelineno-9-162" href="#__codelineno-9-162"></a>
<a id="__codelineno-9-163" name="__codelineno-9-163" href="#__codelineno-9-163"></a>
<a id="__codelineno-9-164" name="__codelineno-9-164" href="#__codelineno-9-164"></a>
<a id="__codelineno-9-165" name="__codelineno-9-165" href="#__codelineno-9-165"></a>processors: []
<a id="__codelineno-9-166" name="__codelineno-9-166" href="#__codelineno-9-166"></a>
<a id="__codelineno-9-167" name="__codelineno-9-167" href="#__codelineno-9-167"></a>
<a id="__codelineno-9-168" name="__codelineno-9-168" href="#__codelineno-9-168"></a>
<a id="__codelineno-9-169" name="__codelineno-9-169" href="#__codelineno-9-169"></a>exporters: [otlp_http]
<a id="__codelineno-9-170" name="__codelineno-9-170" href="#__codelineno-9-170"></a>
<a id="__codelineno-9-171" name="__codelineno-9-171" href="#__codelineno-9-171"></a>
<a id="__codelineno-9-172" name="__codelineno-9-172" href="#__codelineno-9-172"></a>
<a id="__codelineno-9-173" name="__codelineno-9-173" href="#__codelineno-9-173"></a>metrics:
<a id="__codelineno-9-174" name="__codelineno-9-174" href="#__codelineno-9-174"></a>
<a id="__codelineno-9-175" name="__codelineno-9-175" href="#__codelineno-9-175"></a>
<a id="__codelineno-9-176" name="__codelineno-9-176" href="#__codelineno-9-176"></a>
<a id="__codelineno-9-177" name="__codelineno-9-177" href="#__codelineno-9-177"></a>receivers: [otlp]
<a id="__codelineno-9-178" name="__codelineno-9-178" href="#__codelineno-9-178"></a>
<a id="__codelineno-9-179" name="__codelineno-9-179" href="#__codelineno-9-179"></a>
<a id="__codelineno-9-180" name="__codelineno-9-180" href="#__codelineno-9-180"></a>
<a id="__codelineno-9-181" name="__codelineno-9-181" href="#__codelineno-9-181"></a>processors: []
<a id="__codelineno-9-182" name="__codelineno-9-182" href="#__codelineno-9-182"></a>
<a id="__codelineno-9-183" name="__codelineno-9-183" href="#__codelineno-9-183"></a>
<a id="__codelineno-9-184" name="__codelineno-9-184" href="#__codelineno-9-184"></a>
<a id="__codelineno-9-185" name="__codelineno-9-185" href="#__codelineno-9-185"></a>exporters: [otlp_http]
<a id="__codelineno-9-186" name="__codelineno-9-186" href="#__codelineno-9-186"></a>
<a id="__codelineno-9-187" name="__codelineno-9-187" href="#__codelineno-9-187"></a>
<a id="__codelineno-9-188" name="__codelineno-9-188" href="#__codelineno-9-188"></a>
<a id="__codelineno-9-189" name="__codelineno-9-189" href="#__codelineno-9-189"></a>logs:
<a id="__codelineno-9-190" name="__codelineno-9-190" href="#__codelineno-9-190"></a>
<a id="__codelineno-9-191" name="__codelineno-9-191" href="#__codelineno-9-191"></a>
<a id="__codelineno-9-192" name="__codelineno-9-192" href="#__codelineno-9-192"></a>
<a id="__codelineno-9-193" name="__codelineno-9-193" href="#__codelineno-9-193"></a>receivers: [otlp]
<a id="__codelineno-9-194" name="__codelineno-9-194" href="#__codelineno-9-194"></a>
<a id="__codelineno-9-195" name="__codelineno-9-195" href="#__codelineno-9-195"></a>
<a id="__codelineno-9-196" name="__codelineno-9-196" href="#__codelineno-9-196"></a>
<a id="__codelineno-9-197" name="__codelineno-9-197" href="#__codelineno-9-197"></a>processors: []
<a id="__codelineno-9-198" name="__codelineno-9-198" href="#__codelineno-9-198"></a>
<a id="__codelineno-9-199" name="__codelineno-9-199" href="#__codelineno-9-199"></a>
<a id="__codelineno-9-200" name="__codelineno-9-200" href="#__codelineno-9-200"></a>
<a id="__codelineno-9-201" name="__codelineno-9-201" href="#__codelineno-9-201"></a>exporters: [otlp_http]
</code></pre></div>
2. Run the following commands to configure and install the Helm charts</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>helm repo add open-telemetry https://open-telemetry.github.io/opentelemetry-helm-charts
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>helm repo update
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>helm upgrade -i dynatrace-collector open-telemetry/opentelemetry-collector -f values-daemonset.yaml
</code></pre></div>
<p>Network ports</p>
<p>Make sure to configure and forward all relevant network ports, using the <a href="https://github.com/open-telemetry/opentelemetry-helm-charts/blob/opentelemetry-collector-0.106.0/charts/opentelemetry-collector/values.yaml#L266-L313"><code>ports</code> configuration value√Ø¬ª¬ø</a>.</p>
<p>Service</p>
<p>Use <code>kubectl apply</code> with the following configuration to set up the service definitions and configure the correct ports.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>apiVersion: v1
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>kind: Service
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>metadata:
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>name: dynatrace-otel-collector
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>spec:
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>internalTrafficPolicy: Cluster
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>ipFamilies:
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a>
<a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a>
<a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>
<a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a>- IPv4
<a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a>
<a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a>
<a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a>
<a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a>ipFamilyPolicy: SingleStack
<a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a>
<a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a>
<a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a>
<a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a>ports:
<a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a>
<a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a>
<a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a>
<a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a>- name: jaeger-compact
<a id="__codelineno-11-42" name="__codelineno-11-42" href="#__codelineno-11-42"></a>
<a id="__codelineno-11-43" name="__codelineno-11-43" href="#__codelineno-11-43"></a>
<a id="__codelineno-11-44" name="__codelineno-11-44" href="#__codelineno-11-44"></a>
<a id="__codelineno-11-45" name="__codelineno-11-45" href="#__codelineno-11-45"></a>port: 6831
<a id="__codelineno-11-46" name="__codelineno-11-46" href="#__codelineno-11-46"></a>
<a id="__codelineno-11-47" name="__codelineno-11-47" href="#__codelineno-11-47"></a>
<a id="__codelineno-11-48" name="__codelineno-11-48" href="#__codelineno-11-48"></a>
<a id="__codelineno-11-49" name="__codelineno-11-49" href="#__codelineno-11-49"></a>protocol: UDP
<a id="__codelineno-11-50" name="__codelineno-11-50" href="#__codelineno-11-50"></a>
<a id="__codelineno-11-51" name="__codelineno-11-51" href="#__codelineno-11-51"></a>
<a id="__codelineno-11-52" name="__codelineno-11-52" href="#__codelineno-11-52"></a>
<a id="__codelineno-11-53" name="__codelineno-11-53" href="#__codelineno-11-53"></a>targetPort: 6831
<a id="__codelineno-11-54" name="__codelineno-11-54" href="#__codelineno-11-54"></a>
<a id="__codelineno-11-55" name="__codelineno-11-55" href="#__codelineno-11-55"></a>
<a id="__codelineno-11-56" name="__codelineno-11-56" href="#__codelineno-11-56"></a>
<a id="__codelineno-11-57" name="__codelineno-11-57" href="#__codelineno-11-57"></a>- name: jaeger-grpc
<a id="__codelineno-11-58" name="__codelineno-11-58" href="#__codelineno-11-58"></a>
<a id="__codelineno-11-59" name="__codelineno-11-59" href="#__codelineno-11-59"></a>
<a id="__codelineno-11-60" name="__codelineno-11-60" href="#__codelineno-11-60"></a>
<a id="__codelineno-11-61" name="__codelineno-11-61" href="#__codelineno-11-61"></a>port: 14250
<a id="__codelineno-11-62" name="__codelineno-11-62" href="#__codelineno-11-62"></a>
<a id="__codelineno-11-63" name="__codelineno-11-63" href="#__codelineno-11-63"></a>
<a id="__codelineno-11-64" name="__codelineno-11-64" href="#__codelineno-11-64"></a>
<a id="__codelineno-11-65" name="__codelineno-11-65" href="#__codelineno-11-65"></a>protocol: TCP
<a id="__codelineno-11-66" name="__codelineno-11-66" href="#__codelineno-11-66"></a>
<a id="__codelineno-11-67" name="__codelineno-11-67" href="#__codelineno-11-67"></a>
<a id="__codelineno-11-68" name="__codelineno-11-68" href="#__codelineno-11-68"></a>
<a id="__codelineno-11-69" name="__codelineno-11-69" href="#__codelineno-11-69"></a>targetPort: 14250
<a id="__codelineno-11-70" name="__codelineno-11-70" href="#__codelineno-11-70"></a>
<a id="__codelineno-11-71" name="__codelineno-11-71" href="#__codelineno-11-71"></a>
<a id="__codelineno-11-72" name="__codelineno-11-72" href="#__codelineno-11-72"></a>
<a id="__codelineno-11-73" name="__codelineno-11-73" href="#__codelineno-11-73"></a>- name: jaeger-thrift
<a id="__codelineno-11-74" name="__codelineno-11-74" href="#__codelineno-11-74"></a>
<a id="__codelineno-11-75" name="__codelineno-11-75" href="#__codelineno-11-75"></a>
<a id="__codelineno-11-76" name="__codelineno-11-76" href="#__codelineno-11-76"></a>
<a id="__codelineno-11-77" name="__codelineno-11-77" href="#__codelineno-11-77"></a>port: 14268
<a id="__codelineno-11-78" name="__codelineno-11-78" href="#__codelineno-11-78"></a>
<a id="__codelineno-11-79" name="__codelineno-11-79" href="#__codelineno-11-79"></a>
<a id="__codelineno-11-80" name="__codelineno-11-80" href="#__codelineno-11-80"></a>
<a id="__codelineno-11-81" name="__codelineno-11-81" href="#__codelineno-11-81"></a>protocol: TCP
<a id="__codelineno-11-82" name="__codelineno-11-82" href="#__codelineno-11-82"></a>
<a id="__codelineno-11-83" name="__codelineno-11-83" href="#__codelineno-11-83"></a>
<a id="__codelineno-11-84" name="__codelineno-11-84" href="#__codelineno-11-84"></a>
<a id="__codelineno-11-85" name="__codelineno-11-85" href="#__codelineno-11-85"></a>targetPort: 14268
<a id="__codelineno-11-86" name="__codelineno-11-86" href="#__codelineno-11-86"></a>
<a id="__codelineno-11-87" name="__codelineno-11-87" href="#__codelineno-11-87"></a>
<a id="__codelineno-11-88" name="__codelineno-11-88" href="#__codelineno-11-88"></a>
<a id="__codelineno-11-89" name="__codelineno-11-89" href="#__codelineno-11-89"></a>- appProtocol: grpc
<a id="__codelineno-11-90" name="__codelineno-11-90" href="#__codelineno-11-90"></a>
<a id="__codelineno-11-91" name="__codelineno-11-91" href="#__codelineno-11-91"></a>
<a id="__codelineno-11-92" name="__codelineno-11-92" href="#__codelineno-11-92"></a>
<a id="__codelineno-11-93" name="__codelineno-11-93" href="#__codelineno-11-93"></a>name: otlp
<a id="__codelineno-11-94" name="__codelineno-11-94" href="#__codelineno-11-94"></a>
<a id="__codelineno-11-95" name="__codelineno-11-95" href="#__codelineno-11-95"></a>
<a id="__codelineno-11-96" name="__codelineno-11-96" href="#__codelineno-11-96"></a>
<a id="__codelineno-11-97" name="__codelineno-11-97" href="#__codelineno-11-97"></a>port: 4317
<a id="__codelineno-11-98" name="__codelineno-11-98" href="#__codelineno-11-98"></a>
<a id="__codelineno-11-99" name="__codelineno-11-99" href="#__codelineno-11-99"></a>
<a id="__codelineno-11-100" name="__codelineno-11-100" href="#__codelineno-11-100"></a>
<a id="__codelineno-11-101" name="__codelineno-11-101" href="#__codelineno-11-101"></a>protocol: TCP
<a id="__codelineno-11-102" name="__codelineno-11-102" href="#__codelineno-11-102"></a>
<a id="__codelineno-11-103" name="__codelineno-11-103" href="#__codelineno-11-103"></a>
<a id="__codelineno-11-104" name="__codelineno-11-104" href="#__codelineno-11-104"></a>
<a id="__codelineno-11-105" name="__codelineno-11-105" href="#__codelineno-11-105"></a>targetPort: 4317
<a id="__codelineno-11-106" name="__codelineno-11-106" href="#__codelineno-11-106"></a>
<a id="__codelineno-11-107" name="__codelineno-11-107" href="#__codelineno-11-107"></a>
<a id="__codelineno-11-108" name="__codelineno-11-108" href="#__codelineno-11-108"></a>
<a id="__codelineno-11-109" name="__codelineno-11-109" href="#__codelineno-11-109"></a>- name: otlp-http
<a id="__codelineno-11-110" name="__codelineno-11-110" href="#__codelineno-11-110"></a>
<a id="__codelineno-11-111" name="__codelineno-11-111" href="#__codelineno-11-111"></a>
<a id="__codelineno-11-112" name="__codelineno-11-112" href="#__codelineno-11-112"></a>
<a id="__codelineno-11-113" name="__codelineno-11-113" href="#__codelineno-11-113"></a>port: 4318
<a id="__codelineno-11-114" name="__codelineno-11-114" href="#__codelineno-11-114"></a>
<a id="__codelineno-11-115" name="__codelineno-11-115" href="#__codelineno-11-115"></a>
<a id="__codelineno-11-116" name="__codelineno-11-116" href="#__codelineno-11-116"></a>
<a id="__codelineno-11-117" name="__codelineno-11-117" href="#__codelineno-11-117"></a>protocol: TCP
<a id="__codelineno-11-118" name="__codelineno-11-118" href="#__codelineno-11-118"></a>
<a id="__codelineno-11-119" name="__codelineno-11-119" href="#__codelineno-11-119"></a>
<a id="__codelineno-11-120" name="__codelineno-11-120" href="#__codelineno-11-120"></a>
<a id="__codelineno-11-121" name="__codelineno-11-121" href="#__codelineno-11-121"></a>targetPort: 4318
<a id="__codelineno-11-122" name="__codelineno-11-122" href="#__codelineno-11-122"></a>
<a id="__codelineno-11-123" name="__codelineno-11-123" href="#__codelineno-11-123"></a>
<a id="__codelineno-11-124" name="__codelineno-11-124" href="#__codelineno-11-124"></a>
<a id="__codelineno-11-125" name="__codelineno-11-125" href="#__codelineno-11-125"></a>- name: zipkin
<a id="__codelineno-11-126" name="__codelineno-11-126" href="#__codelineno-11-126"></a>
<a id="__codelineno-11-127" name="__codelineno-11-127" href="#__codelineno-11-127"></a>
<a id="__codelineno-11-128" name="__codelineno-11-128" href="#__codelineno-11-128"></a>
<a id="__codelineno-11-129" name="__codelineno-11-129" href="#__codelineno-11-129"></a>port: 9411
<a id="__codelineno-11-130" name="__codelineno-11-130" href="#__codelineno-11-130"></a>
<a id="__codelineno-11-131" name="__codelineno-11-131" href="#__codelineno-11-131"></a>
<a id="__codelineno-11-132" name="__codelineno-11-132" href="#__codelineno-11-132"></a>
<a id="__codelineno-11-133" name="__codelineno-11-133" href="#__codelineno-11-133"></a>protocol: TCP
<a id="__codelineno-11-134" name="__codelineno-11-134" href="#__codelineno-11-134"></a>
<a id="__codelineno-11-135" name="__codelineno-11-135" href="#__codelineno-11-135"></a>
<a id="__codelineno-11-136" name="__codelineno-11-136" href="#__codelineno-11-136"></a>
<a id="__codelineno-11-137" name="__codelineno-11-137" href="#__codelineno-11-137"></a>targetPort: 9411
<a id="__codelineno-11-138" name="__codelineno-11-138" href="#__codelineno-11-138"></a>
<a id="__codelineno-11-139" name="__codelineno-11-139" href="#__codelineno-11-139"></a>
<a id="__codelineno-11-140" name="__codelineno-11-140" href="#__codelineno-11-140"></a>
<a id="__codelineno-11-141" name="__codelineno-11-141" href="#__codelineno-11-141"></a>selector:
<a id="__codelineno-11-142" name="__codelineno-11-142" href="#__codelineno-11-142"></a>
<a id="__codelineno-11-143" name="__codelineno-11-143" href="#__codelineno-11-143"></a>
<a id="__codelineno-11-144" name="__codelineno-11-144" href="#__codelineno-11-144"></a>
<a id="__codelineno-11-145" name="__codelineno-11-145" href="#__codelineno-11-145"></a>app.kubernetes.io/instance: dynatrace-otel-collector
<a id="__codelineno-11-146" name="__codelineno-11-146" href="#__codelineno-11-146"></a>
<a id="__codelineno-11-147" name="__codelineno-11-147" href="#__codelineno-11-147"></a>
<a id="__codelineno-11-148" name="__codelineno-11-148" href="#__codelineno-11-148"></a>
<a id="__codelineno-11-149" name="__codelineno-11-149" href="#__codelineno-11-149"></a>app.kubernetes.io/name: dynatrace-otel-collector
<a id="__codelineno-11-150" name="__codelineno-11-150" href="#__codelineno-11-150"></a>
<a id="__codelineno-11-151" name="__codelineno-11-151" href="#__codelineno-11-151"></a>
<a id="__codelineno-11-152" name="__codelineno-11-152" href="#__codelineno-11-152"></a>
<a id="__codelineno-11-153" name="__codelineno-11-153" href="#__codelineno-11-153"></a>sessionAffinity: None
<a id="__codelineno-11-154" name="__codelineno-11-154" href="#__codelineno-11-154"></a>
<a id="__codelineno-11-155" name="__codelineno-11-155" href="#__codelineno-11-155"></a>
<a id="__codelineno-11-156" name="__codelineno-11-156" href="#__codelineno-11-156"></a>
<a id="__codelineno-11-157" name="__codelineno-11-157" href="#__codelineno-11-157"></a>type: ClusterIP
</code></pre></div>
<p>ConfigMap</p>
<p>Create a ConfigMap by applying the following configuration with <code>kubectl apply</code> to set up the Collector configuration.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>apiVersion: v1
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>kind: ConfigMap
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>metadata:
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>name: dynatrace-otel-collector-config
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>data:
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>otel-collector-config: |
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>receivers:
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>otlp:
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a>
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>protocols:
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>
<a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a>
<a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>
<a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a>grpc:
<a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>
<a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a>
<a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a>
<a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a>endpoint: ${env:MY_POD_IP}:4317
<a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a>
<a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a>
<a id="__codelineno-12-44" name="__codelineno-12-44" href="#__codelineno-12-44"></a>
<a id="__codelineno-12-45" name="__codelineno-12-45" href="#__codelineno-12-45"></a>http:
<a id="__codelineno-12-46" name="__codelineno-12-46" href="#__codelineno-12-46"></a>
<a id="__codelineno-12-47" name="__codelineno-12-47" href="#__codelineno-12-47"></a>
<a id="__codelineno-12-48" name="__codelineno-12-48" href="#__codelineno-12-48"></a>
<a id="__codelineno-12-49" name="__codelineno-12-49" href="#__codelineno-12-49"></a>endpoint: ${env:MY_POD_IP}:4318
<a id="__codelineno-12-50" name="__codelineno-12-50" href="#__codelineno-12-50"></a>
<a id="__codelineno-12-51" name="__codelineno-12-51" href="#__codelineno-12-51"></a>
<a id="__codelineno-12-52" name="__codelineno-12-52" href="#__codelineno-12-52"></a>
<a id="__codelineno-12-53" name="__codelineno-12-53" href="#__codelineno-12-53"></a>exporters:
<a id="__codelineno-12-54" name="__codelineno-12-54" href="#__codelineno-12-54"></a>
<a id="__codelineno-12-55" name="__codelineno-12-55" href="#__codelineno-12-55"></a>
<a id="__codelineno-12-56" name="__codelineno-12-56" href="#__codelineno-12-56"></a>
<a id="__codelineno-12-57" name="__codelineno-12-57" href="#__codelineno-12-57"></a>otlp_http:
<a id="__codelineno-12-58" name="__codelineno-12-58" href="#__codelineno-12-58"></a>
<a id="__codelineno-12-59" name="__codelineno-12-59" href="#__codelineno-12-59"></a>
<a id="__codelineno-12-60" name="__codelineno-12-60" href="#__codelineno-12-60"></a>
<a id="__codelineno-12-61" name="__codelineno-12-61" href="#__codelineno-12-61"></a>endpoint: &quot;${env:DT_ENDPOINT}&quot;
<a id="__codelineno-12-62" name="__codelineno-12-62" href="#__codelineno-12-62"></a>
<a id="__codelineno-12-63" name="__codelineno-12-63" href="#__codelineno-12-63"></a>
<a id="__codelineno-12-64" name="__codelineno-12-64" href="#__codelineno-12-64"></a>
<a id="__codelineno-12-65" name="__codelineno-12-65" href="#__codelineno-12-65"></a>headers:
<a id="__codelineno-12-66" name="__codelineno-12-66" href="#__codelineno-12-66"></a>
<a id="__codelineno-12-67" name="__codelineno-12-67" href="#__codelineno-12-67"></a>
<a id="__codelineno-12-68" name="__codelineno-12-68" href="#__codelineno-12-68"></a>
<a id="__codelineno-12-69" name="__codelineno-12-69" href="#__codelineno-12-69"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-12-70" name="__codelineno-12-70" href="#__codelineno-12-70"></a>
<a id="__codelineno-12-71" name="__codelineno-12-71" href="#__codelineno-12-71"></a>
<a id="__codelineno-12-72" name="__codelineno-12-72" href="#__codelineno-12-72"></a>
<a id="__codelineno-12-73" name="__codelineno-12-73" href="#__codelineno-12-73"></a>service:
<a id="__codelineno-12-74" name="__codelineno-12-74" href="#__codelineno-12-74"></a>
<a id="__codelineno-12-75" name="__codelineno-12-75" href="#__codelineno-12-75"></a>
<a id="__codelineno-12-76" name="__codelineno-12-76" href="#__codelineno-12-76"></a>
<a id="__codelineno-12-77" name="__codelineno-12-77" href="#__codelineno-12-77"></a>pipelines:
<a id="__codelineno-12-78" name="__codelineno-12-78" href="#__codelineno-12-78"></a>
<a id="__codelineno-12-79" name="__codelineno-12-79" href="#__codelineno-12-79"></a>
<a id="__codelineno-12-80" name="__codelineno-12-80" href="#__codelineno-12-80"></a>
<a id="__codelineno-12-81" name="__codelineno-12-81" href="#__codelineno-12-81"></a>traces:
<a id="__codelineno-12-82" name="__codelineno-12-82" href="#__codelineno-12-82"></a>
<a id="__codelineno-12-83" name="__codelineno-12-83" href="#__codelineno-12-83"></a>
<a id="__codelineno-12-84" name="__codelineno-12-84" href="#__codelineno-12-84"></a>
<a id="__codelineno-12-85" name="__codelineno-12-85" href="#__codelineno-12-85"></a>receivers: [otlp]
<a id="__codelineno-12-86" name="__codelineno-12-86" href="#__codelineno-12-86"></a>
<a id="__codelineno-12-87" name="__codelineno-12-87" href="#__codelineno-12-87"></a>
<a id="__codelineno-12-88" name="__codelineno-12-88" href="#__codelineno-12-88"></a>
<a id="__codelineno-12-89" name="__codelineno-12-89" href="#__codelineno-12-89"></a>processors: []
<a id="__codelineno-12-90" name="__codelineno-12-90" href="#__codelineno-12-90"></a>
<a id="__codelineno-12-91" name="__codelineno-12-91" href="#__codelineno-12-91"></a>
<a id="__codelineno-12-92" name="__codelineno-12-92" href="#__codelineno-12-92"></a>
<a id="__codelineno-12-93" name="__codelineno-12-93" href="#__codelineno-12-93"></a>exporters: [otlp_http]
<a id="__codelineno-12-94" name="__codelineno-12-94" href="#__codelineno-12-94"></a>
<a id="__codelineno-12-95" name="__codelineno-12-95" href="#__codelineno-12-95"></a>
<a id="__codelineno-12-96" name="__codelineno-12-96" href="#__codelineno-12-96"></a>
<a id="__codelineno-12-97" name="__codelineno-12-97" href="#__codelineno-12-97"></a>metrics:
<a id="__codelineno-12-98" name="__codelineno-12-98" href="#__codelineno-12-98"></a>
<a id="__codelineno-12-99" name="__codelineno-12-99" href="#__codelineno-12-99"></a>
<a id="__codelineno-12-100" name="__codelineno-12-100" href="#__codelineno-12-100"></a>
<a id="__codelineno-12-101" name="__codelineno-12-101" href="#__codelineno-12-101"></a>receivers: [otlp]
<a id="__codelineno-12-102" name="__codelineno-12-102" href="#__codelineno-12-102"></a>
<a id="__codelineno-12-103" name="__codelineno-12-103" href="#__codelineno-12-103"></a>
<a id="__codelineno-12-104" name="__codelineno-12-104" href="#__codelineno-12-104"></a>
<a id="__codelineno-12-105" name="__codelineno-12-105" href="#__codelineno-12-105"></a>processors: []
<a id="__codelineno-12-106" name="__codelineno-12-106" href="#__codelineno-12-106"></a>
<a id="__codelineno-12-107" name="__codelineno-12-107" href="#__codelineno-12-107"></a>
<a id="__codelineno-12-108" name="__codelineno-12-108" href="#__codelineno-12-108"></a>
<a id="__codelineno-12-109" name="__codelineno-12-109" href="#__codelineno-12-109"></a>exporters: [otlp_http]
<a id="__codelineno-12-110" name="__codelineno-12-110" href="#__codelineno-12-110"></a>
<a id="__codelineno-12-111" name="__codelineno-12-111" href="#__codelineno-12-111"></a>
<a id="__codelineno-12-112" name="__codelineno-12-112" href="#__codelineno-12-112"></a>
<a id="__codelineno-12-113" name="__codelineno-12-113" href="#__codelineno-12-113"></a>logs:
<a id="__codelineno-12-114" name="__codelineno-12-114" href="#__codelineno-12-114"></a>
<a id="__codelineno-12-115" name="__codelineno-12-115" href="#__codelineno-12-115"></a>
<a id="__codelineno-12-116" name="__codelineno-12-116" href="#__codelineno-12-116"></a>
<a id="__codelineno-12-117" name="__codelineno-12-117" href="#__codelineno-12-117"></a>receivers: [otlp]
<a id="__codelineno-12-118" name="__codelineno-12-118" href="#__codelineno-12-118"></a>
<a id="__codelineno-12-119" name="__codelineno-12-119" href="#__codelineno-12-119"></a>
<a id="__codelineno-12-120" name="__codelineno-12-120" href="#__codelineno-12-120"></a>
<a id="__codelineno-12-121" name="__codelineno-12-121" href="#__codelineno-12-121"></a>processors: []
<a id="__codelineno-12-122" name="__codelineno-12-122" href="#__codelineno-12-122"></a>
<a id="__codelineno-12-123" name="__codelineno-12-123" href="#__codelineno-12-123"></a>
<a id="__codelineno-12-124" name="__codelineno-12-124" href="#__codelineno-12-124"></a>
<a id="__codelineno-12-125" name="__codelineno-12-125" href="#__codelineno-12-125"></a>exporters: [otlp_http]
</code></pre></div>
<p>Manifest</p>
<p>Apply the following manifest configuration with <code>kubectl apply</code> to create the Dynatrace Collector Deployment in <a href="#deployment-modes">gateway mode</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>apiVersion: apps/v1
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>kind: Deployment
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>metadata:
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>name: dynatrace-otel-collector
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>spec:
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>selector:
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>matchLabels:
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a>
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>
<a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a>app.kubernetes.io/name: dynatrace-otel-collector
<a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a>
<a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a>
<a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a>
<a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a>replicas: 1
<a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a>
<a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a>
<a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a>
<a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a>template:
<a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a>
<a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a>
<a id="__codelineno-13-40" name="__codelineno-13-40" href="#__codelineno-13-40"></a>
<a id="__codelineno-13-41" name="__codelineno-13-41" href="#__codelineno-13-41"></a>metadata:
<a id="__codelineno-13-42" name="__codelineno-13-42" href="#__codelineno-13-42"></a>
<a id="__codelineno-13-43" name="__codelineno-13-43" href="#__codelineno-13-43"></a>
<a id="__codelineno-13-44" name="__codelineno-13-44" href="#__codelineno-13-44"></a>
<a id="__codelineno-13-45" name="__codelineno-13-45" href="#__codelineno-13-45"></a>labels:
<a id="__codelineno-13-46" name="__codelineno-13-46" href="#__codelineno-13-46"></a>
<a id="__codelineno-13-47" name="__codelineno-13-47" href="#__codelineno-13-47"></a>
<a id="__codelineno-13-48" name="__codelineno-13-48" href="#__codelineno-13-48"></a>
<a id="__codelineno-13-49" name="__codelineno-13-49" href="#__codelineno-13-49"></a>app.kubernetes.io/instance: dynatrace-otel-collector
<a id="__codelineno-13-50" name="__codelineno-13-50" href="#__codelineno-13-50"></a>
<a id="__codelineno-13-51" name="__codelineno-13-51" href="#__codelineno-13-51"></a>
<a id="__codelineno-13-52" name="__codelineno-13-52" href="#__codelineno-13-52"></a>
<a id="__codelineno-13-53" name="__codelineno-13-53" href="#__codelineno-13-53"></a>app.kubernetes.io/name: dynatrace-otel-collector
<a id="__codelineno-13-54" name="__codelineno-13-54" href="#__codelineno-13-54"></a>
<a id="__codelineno-13-55" name="__codelineno-13-55" href="#__codelineno-13-55"></a>
<a id="__codelineno-13-56" name="__codelineno-13-56" href="#__codelineno-13-56"></a>
<a id="__codelineno-13-57" name="__codelineno-13-57" href="#__codelineno-13-57"></a>spec:
<a id="__codelineno-13-58" name="__codelineno-13-58" href="#__codelineno-13-58"></a>
<a id="__codelineno-13-59" name="__codelineno-13-59" href="#__codelineno-13-59"></a>
<a id="__codelineno-13-60" name="__codelineno-13-60" href="#__codelineno-13-60"></a>
<a id="__codelineno-13-61" name="__codelineno-13-61" href="#__codelineno-13-61"></a>#You may have to configure RBAC to grant proper permissions for enriching data
<a id="__codelineno-13-62" name="__codelineno-13-62" href="#__codelineno-13-62"></a>
<a id="__codelineno-13-63" name="__codelineno-13-63" href="#__codelineno-13-63"></a>
<a id="__codelineno-13-64" name="__codelineno-13-64" href="#__codelineno-13-64"></a>
<a id="__codelineno-13-65" name="__codelineno-13-65" href="#__codelineno-13-65"></a>#serviceAccountName: dynatrace-otel-collector
<a id="__codelineno-13-66" name="__codelineno-13-66" href="#__codelineno-13-66"></a>
<a id="__codelineno-13-67" name="__codelineno-13-67" href="#__codelineno-13-67"></a>
<a id="__codelineno-13-68" name="__codelineno-13-68" href="#__codelineno-13-68"></a>
<a id="__codelineno-13-69" name="__codelineno-13-69" href="#__codelineno-13-69"></a>containers:
<a id="__codelineno-13-70" name="__codelineno-13-70" href="#__codelineno-13-70"></a>
<a id="__codelineno-13-71" name="__codelineno-13-71" href="#__codelineno-13-71"></a>
<a id="__codelineno-13-72" name="__codelineno-13-72" href="#__codelineno-13-72"></a>
<a id="__codelineno-13-73" name="__codelineno-13-73" href="#__codelineno-13-73"></a>- name: dynatrace-otel-collector
<a id="__codelineno-13-74" name="__codelineno-13-74" href="#__codelineno-13-74"></a>
<a id="__codelineno-13-75" name="__codelineno-13-75" href="#__codelineno-13-75"></a>
<a id="__codelineno-13-76" name="__codelineno-13-76" href="#__codelineno-13-76"></a>
<a id="__codelineno-13-77" name="__codelineno-13-77" href="#__codelineno-13-77"></a>args: [&quot;--config&quot;, &quot;/conf/otel-collector-config.yaml&quot;]
<a id="__codelineno-13-78" name="__codelineno-13-78" href="#__codelineno-13-78"></a>
<a id="__codelineno-13-79" name="__codelineno-13-79" href="#__codelineno-13-79"></a>
<a id="__codelineno-13-80" name="__codelineno-13-80" href="#__codelineno-13-80"></a>
<a id="__codelineno-13-81" name="__codelineno-13-81" href="#__codelineno-13-81"></a>env:
<a id="__codelineno-13-82" name="__codelineno-13-82" href="#__codelineno-13-82"></a>
<a id="__codelineno-13-83" name="__codelineno-13-83" href="#__codelineno-13-83"></a>
<a id="__codelineno-13-84" name="__codelineno-13-84" href="#__codelineno-13-84"></a>
<a id="__codelineno-13-85" name="__codelineno-13-85" href="#__codelineno-13-85"></a>- name: MY_POD_IP
<a id="__codelineno-13-86" name="__codelineno-13-86" href="#__codelineno-13-86"></a>
<a id="__codelineno-13-87" name="__codelineno-13-87" href="#__codelineno-13-87"></a>
<a id="__codelineno-13-88" name="__codelineno-13-88" href="#__codelineno-13-88"></a>
<a id="__codelineno-13-89" name="__codelineno-13-89" href="#__codelineno-13-89"></a>valueFrom:
<a id="__codelineno-13-90" name="__codelineno-13-90" href="#__codelineno-13-90"></a>
<a id="__codelineno-13-91" name="__codelineno-13-91" href="#__codelineno-13-91"></a>
<a id="__codelineno-13-92" name="__codelineno-13-92" href="#__codelineno-13-92"></a>
<a id="__codelineno-13-93" name="__codelineno-13-93" href="#__codelineno-13-93"></a>fieldRef:
<a id="__codelineno-13-94" name="__codelineno-13-94" href="#__codelineno-13-94"></a>
<a id="__codelineno-13-95" name="__codelineno-13-95" href="#__codelineno-13-95"></a>
<a id="__codelineno-13-96" name="__codelineno-13-96" href="#__codelineno-13-96"></a>
<a id="__codelineno-13-97" name="__codelineno-13-97" href="#__codelineno-13-97"></a>apiVersion: v1
<a id="__codelineno-13-98" name="__codelineno-13-98" href="#__codelineno-13-98"></a>
<a id="__codelineno-13-99" name="__codelineno-13-99" href="#__codelineno-13-99"></a>
<a id="__codelineno-13-100" name="__codelineno-13-100" href="#__codelineno-13-100"></a>
<a id="__codelineno-13-101" name="__codelineno-13-101" href="#__codelineno-13-101"></a>fieldPath: status.podIP
<a id="__codelineno-13-102" name="__codelineno-13-102" href="#__codelineno-13-102"></a>
<a id="__codelineno-13-103" name="__codelineno-13-103" href="#__codelineno-13-103"></a>
<a id="__codelineno-13-104" name="__codelineno-13-104" href="#__codelineno-13-104"></a>
<a id="__codelineno-13-105" name="__codelineno-13-105" href="#__codelineno-13-105"></a>- name: DT_ENDPOINT
<a id="__codelineno-13-106" name="__codelineno-13-106" href="#__codelineno-13-106"></a>
<a id="__codelineno-13-107" name="__codelineno-13-107" href="#__codelineno-13-107"></a>
<a id="__codelineno-13-108" name="__codelineno-13-108" href="#__codelineno-13-108"></a>
<a id="__codelineno-13-109" name="__codelineno-13-109" href="#__codelineno-13-109"></a>valueFrom:
<a id="__codelineno-13-110" name="__codelineno-13-110" href="#__codelineno-13-110"></a>
<a id="__codelineno-13-111" name="__codelineno-13-111" href="#__codelineno-13-111"></a>
<a id="__codelineno-13-112" name="__codelineno-13-112" href="#__codelineno-13-112"></a>
<a id="__codelineno-13-113" name="__codelineno-13-113" href="#__codelineno-13-113"></a>secretKeyRef:
<a id="__codelineno-13-114" name="__codelineno-13-114" href="#__codelineno-13-114"></a>
<a id="__codelineno-13-115" name="__codelineno-13-115" href="#__codelineno-13-115"></a>
<a id="__codelineno-13-116" name="__codelineno-13-116" href="#__codelineno-13-116"></a>
<a id="__codelineno-13-117" name="__codelineno-13-117" href="#__codelineno-13-117"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-13-118" name="__codelineno-13-118" href="#__codelineno-13-118"></a>
<a id="__codelineno-13-119" name="__codelineno-13-119" href="#__codelineno-13-119"></a>
<a id="__codelineno-13-120" name="__codelineno-13-120" href="#__codelineno-13-120"></a>
<a id="__codelineno-13-121" name="__codelineno-13-121" href="#__codelineno-13-121"></a>key: DT_ENDPOINT
<a id="__codelineno-13-122" name="__codelineno-13-122" href="#__codelineno-13-122"></a>
<a id="__codelineno-13-123" name="__codelineno-13-123" href="#__codelineno-13-123"></a>
<a id="__codelineno-13-124" name="__codelineno-13-124" href="#__codelineno-13-124"></a>
<a id="__codelineno-13-125" name="__codelineno-13-125" href="#__codelineno-13-125"></a>- name: DT_API_TOKEN
<a id="__codelineno-13-126" name="__codelineno-13-126" href="#__codelineno-13-126"></a>
<a id="__codelineno-13-127" name="__codelineno-13-127" href="#__codelineno-13-127"></a>
<a id="__codelineno-13-128" name="__codelineno-13-128" href="#__codelineno-13-128"></a>
<a id="__codelineno-13-129" name="__codelineno-13-129" href="#__codelineno-13-129"></a>valueFrom:
<a id="__codelineno-13-130" name="__codelineno-13-130" href="#__codelineno-13-130"></a>
<a id="__codelineno-13-131" name="__codelineno-13-131" href="#__codelineno-13-131"></a>
<a id="__codelineno-13-132" name="__codelineno-13-132" href="#__codelineno-13-132"></a>
<a id="__codelineno-13-133" name="__codelineno-13-133" href="#__codelineno-13-133"></a>secretKeyRef:
<a id="__codelineno-13-134" name="__codelineno-13-134" href="#__codelineno-13-134"></a>
<a id="__codelineno-13-135" name="__codelineno-13-135" href="#__codelineno-13-135"></a>
<a id="__codelineno-13-136" name="__codelineno-13-136" href="#__codelineno-13-136"></a>
<a id="__codelineno-13-137" name="__codelineno-13-137" href="#__codelineno-13-137"></a>name: dynatrace-otelcol-dt-api-credentials
<a id="__codelineno-13-138" name="__codelineno-13-138" href="#__codelineno-13-138"></a>
<a id="__codelineno-13-139" name="__codelineno-13-139" href="#__codelineno-13-139"></a>
<a id="__codelineno-13-140" name="__codelineno-13-140" href="#__codelineno-13-140"></a>
<a id="__codelineno-13-141" name="__codelineno-13-141" href="#__codelineno-13-141"></a>key: DT_API_TOKEN
<a id="__codelineno-13-142" name="__codelineno-13-142" href="#__codelineno-13-142"></a>
<a id="__codelineno-13-143" name="__codelineno-13-143" href="#__codelineno-13-143"></a>
<a id="__codelineno-13-144" name="__codelineno-13-144" href="#__codelineno-13-144"></a>
<a id="__codelineno-13-145" name="__codelineno-13-145" href="#__codelineno-13-145"></a>image: ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0
<a id="__codelineno-13-146" name="__codelineno-13-146" href="#__codelineno-13-146"></a>
<a id="__codelineno-13-147" name="__codelineno-13-147" href="#__codelineno-13-147"></a>
<a id="__codelineno-13-148" name="__codelineno-13-148" href="#__codelineno-13-148"></a>
<a id="__codelineno-13-149" name="__codelineno-13-149" href="#__codelineno-13-149"></a>resources:
<a id="__codelineno-13-150" name="__codelineno-13-150" href="#__codelineno-13-150"></a>
<a id="__codelineno-13-151" name="__codelineno-13-151" href="#__codelineno-13-151"></a>
<a id="__codelineno-13-152" name="__codelineno-13-152" href="#__codelineno-13-152"></a>
<a id="__codelineno-13-153" name="__codelineno-13-153" href="#__codelineno-13-153"></a>limits:
<a id="__codelineno-13-154" name="__codelineno-13-154" href="#__codelineno-13-154"></a>
<a id="__codelineno-13-155" name="__codelineno-13-155" href="#__codelineno-13-155"></a>
<a id="__codelineno-13-156" name="__codelineno-13-156" href="#__codelineno-13-156"></a>
<a id="__codelineno-13-157" name="__codelineno-13-157" href="#__codelineno-13-157"></a>memory: 512Mi
<a id="__codelineno-13-158" name="__codelineno-13-158" href="#__codelineno-13-158"></a>
<a id="__codelineno-13-159" name="__codelineno-13-159" href="#__codelineno-13-159"></a>
<a id="__codelineno-13-160" name="__codelineno-13-160" href="#__codelineno-13-160"></a>
<a id="__codelineno-13-161" name="__codelineno-13-161" href="#__codelineno-13-161"></a>ports:
<a id="__codelineno-13-162" name="__codelineno-13-162" href="#__codelineno-13-162"></a>
<a id="__codelineno-13-163" name="__codelineno-13-163" href="#__codelineno-13-163"></a>
<a id="__codelineno-13-164" name="__codelineno-13-164" href="#__codelineno-13-164"></a>
<a id="__codelineno-13-165" name="__codelineno-13-165" href="#__codelineno-13-165"></a>- containerPort: 8888 # Default endpoint for querying metrics of prometheus exporter.
<a id="__codelineno-13-166" name="__codelineno-13-166" href="#__codelineno-13-166"></a>
<a id="__codelineno-13-167" name="__codelineno-13-167" href="#__codelineno-13-167"></a>
<a id="__codelineno-13-168" name="__codelineno-13-168" href="#__codelineno-13-168"></a>
<a id="__codelineno-13-169" name="__codelineno-13-169" href="#__codelineno-13-169"></a>volumeMounts:
<a id="__codelineno-13-170" name="__codelineno-13-170" href="#__codelineno-13-170"></a>
<a id="__codelineno-13-171" name="__codelineno-13-171" href="#__codelineno-13-171"></a>
<a id="__codelineno-13-172" name="__codelineno-13-172" href="#__codelineno-13-172"></a>
<a id="__codelineno-13-173" name="__codelineno-13-173" href="#__codelineno-13-173"></a>- name: dynatrace-otel-collector-config
<a id="__codelineno-13-174" name="__codelineno-13-174" href="#__codelineno-13-174"></a>
<a id="__codelineno-13-175" name="__codelineno-13-175" href="#__codelineno-13-175"></a>
<a id="__codelineno-13-176" name="__codelineno-13-176" href="#__codelineno-13-176"></a>
<a id="__codelineno-13-177" name="__codelineno-13-177" href="#__codelineno-13-177"></a>mountPath: /conf
<a id="__codelineno-13-178" name="__codelineno-13-178" href="#__codelineno-13-178"></a>
<a id="__codelineno-13-179" name="__codelineno-13-179" href="#__codelineno-13-179"></a>
<a id="__codelineno-13-180" name="__codelineno-13-180" href="#__codelineno-13-180"></a>
<a id="__codelineno-13-181" name="__codelineno-13-181" href="#__codelineno-13-181"></a>volumes:
<a id="__codelineno-13-182" name="__codelineno-13-182" href="#__codelineno-13-182"></a>
<a id="__codelineno-13-183" name="__codelineno-13-183" href="#__codelineno-13-183"></a>
<a id="__codelineno-13-184" name="__codelineno-13-184" href="#__codelineno-13-184"></a>
<a id="__codelineno-13-185" name="__codelineno-13-185" href="#__codelineno-13-185"></a>- configMap:
<a id="__codelineno-13-186" name="__codelineno-13-186" href="#__codelineno-13-186"></a>
<a id="__codelineno-13-187" name="__codelineno-13-187" href="#__codelineno-13-187"></a>
<a id="__codelineno-13-188" name="__codelineno-13-188" href="#__codelineno-13-188"></a>
<a id="__codelineno-13-189" name="__codelineno-13-189" href="#__codelineno-13-189"></a>name: dynatrace-otel-collector-config
<a id="__codelineno-13-190" name="__codelineno-13-190" href="#__codelineno-13-190"></a>
<a id="__codelineno-13-191" name="__codelineno-13-191" href="#__codelineno-13-191"></a>
<a id="__codelineno-13-192" name="__codelineno-13-192" href="#__codelineno-13-192"></a>
<a id="__codelineno-13-193" name="__codelineno-13-193" href="#__codelineno-13-193"></a>items:
<a id="__codelineno-13-194" name="__codelineno-13-194" href="#__codelineno-13-194"></a>
<a id="__codelineno-13-195" name="__codelineno-13-195" href="#__codelineno-13-195"></a>
<a id="__codelineno-13-196" name="__codelineno-13-196" href="#__codelineno-13-196"></a>
<a id="__codelineno-13-197" name="__codelineno-13-197" href="#__codelineno-13-197"></a>- key: otel-collector-config
<a id="__codelineno-13-198" name="__codelineno-13-198" href="#__codelineno-13-198"></a>
<a id="__codelineno-13-199" name="__codelineno-13-199" href="#__codelineno-13-199"></a>
<a id="__codelineno-13-200" name="__codelineno-13-200" href="#__codelineno-13-200"></a>
<a id="__codelineno-13-201" name="__codelineno-13-201" href="#__codelineno-13-201"></a>path: otel-collector-config.yaml
<a id="__codelineno-13-202" name="__codelineno-13-202" href="#__codelineno-13-202"></a>
<a id="__codelineno-13-203" name="__codelineno-13-203" href="#__codelineno-13-203"></a>
<a id="__codelineno-13-204" name="__codelineno-13-204" href="#__codelineno-13-204"></a>
<a id="__codelineno-13-205" name="__codelineno-13-205" href="#__codelineno-13-205"></a>name: dynatrace-otel-collector-config
</code></pre></div>
<p>Service account</p>
<p>In Kubernetes, it is common to enrich OpenTelemetry signals using the <a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Kubernetes Attributes processor</a>. This requires a Kubernetes service account, which is automatically configured when using Operator or Helm.</p>
<p>For raw manifests, this needs to be configured manually by adding a <code>spec.serviceAccountName: collector</code> entry to the deployment manifest.</p>
<h3 id="docker">Docker<a class="headerlink" href="#docker" title="Permanent link">&para;</a></h3>
<p>Run the following command to download the image of the Dynatrace Collector:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>docker pull ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0
</code></pre></div>
<p>Next, ensure that the <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector configuration file</a> exists in the current working directory and run the Collector image with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>docker run -v $(pwd)/otel-collector-config.yaml:/etc/otelcol/otel-collector-config.yaml ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0 --config=/etc/otelcol/otel-collector-config.yaml
</code></pre></div>
<p>The <code>-v</code> parameter maps the local configuration file to the given container path, which is subsequently passed to the <code>--config</code> parameter.</p>
<p>Make sure to map all required network ports with the <a href="https://docs.docker.com/reference/cli/docker/container/run/#publish"><code>-p</code> parameter√Ø¬ª¬ø</a>. For example, if you accept OTLP gRPC requests on the default port, you need to specify port 4317. For OTLP over HTTP specify port 4318.</p>
<h4 id="docker-compose">Docker Compose<a class="headerlink" href="#docker-compose" title="Permanent link">&para;</a></h4>
<p>Use the following configuration in your Compose file to deploy and run the Collector image:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>version: &quot;3&quot;
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>services:
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>collector:
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>image: ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>command: [&quot;--config=/etc/otelcol/otel-collector-config.yaml&quot;]
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>volumes:
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>- ./otel-collector-config.yaml:/etc/otelcol/otel-collector-config.yaml
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a>
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a>
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a>
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a>ports:
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a>
<a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a>
<a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a>
<a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a>- &quot;4317:4317&quot;   # OTLP gRPC
<a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a>
<a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a>
<a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a>
<a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a>- &quot;4318:4318&quot;   # OTLP HTTP
</code></pre></div>
<p>In the example above, <code>ports</code> is configured for gRPC and HTTP. Adjust the list of ports according to your specific use case.</p>
<h3 id="windows-macos-and-linux">Windows, macOS, and Linux<a class="headerlink" href="#windows-macos-and-linux" title="Permanent link">&para;</a></h3>
<p>To install the Collector binary manually</p>
<ol>
<li>Download the <a href="https://github.com/Dynatrace/dynatrace-otel-collector/releases/v0.44.0">dynatrace-otel-collector√Ø¬ª¬ø</a> for your operating system from GitHub.</li>
<li>Decompress the archive file.</li>
<li>Set up the desired configuration and save it to <code>otel-collector-config.yaml</code>.</li>
<li>Run the <code>dynatrace-otel-collector</code> binary and pass the path to the configuration file using the <code>--config</code> parameter.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>./dynatrace-otel-collector --config=$(pwd)/otel-collector-config.yaml
</code></pre></div>
<h3 id="linux-installer-packages">Linux installer packages<a class="headerlink" href="#linux-installer-packages" title="Permanent link">&para;</a></h3>
<p>Dynatrace also provides DEB and RPM installer packages for Linux systems on x86-64 and ARM64 architectures.</p>
<p>Required init system</p>
<p>The installer packages require Systemd to be the active init system.</p>
<p>To deploy the Collector using an installer package, download the <a href="https://github.com/Dynatrace/dynatrace-otel-collector/releases/v0.44.0">dynatrace-otel-collector√Ø¬ª¬ø</a> for your operating system from GitHub, and install it using root privileges and the following commands.</p>
<p>Replace the following two placeholders in the commands with their actual content:</p>
<ul>
<li><code>&lt;VERSION&gt;</code> with the version tag of the download</li>
<li><code>&lt;ARCH&gt;</code> with the system architecture tag (that is, <code>x86_64</code> or <code>arm64</code>) of the download</li>
</ul>
<p>Debian (.deb)</p>
<p>Red Hat (.rpm)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>apt-get update
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>dpkg -i dynatrace-otel-collector_&lt;VERSION&gt;_Linux_&lt;ARCH&gt;.deb
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>yum update
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>rpm -ivh dynatrace-otel-collector_&lt;VERSION&gt;_Linux_&lt;ARCH&gt;.rpm
</code></pre></div>
<h4 id="service-configuration">Service configuration<a class="headerlink" href="#service-configuration" title="Permanent link">&para;</a></h4>
<p>When first starting the service, it may fail to start if there is no <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">configuration file</a> in place yet. By default, the Collector attempts to find the file at <code>/etc/dynatrace-otel-collector/config.yaml</code>.</p>
<p>Custom configuration location</p>
<p>If you wish to use a different path, you can override the default path with the <code>--config</code> parameter as part of the <code>OTELCOL_OPTIONS</code> variable in the Systemd environment file at <code>/etc/dynatrace-otel-collector/dynatrace-otel-collector.conf</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>OTELCOL_OPTIONS=&quot;--config=&lt;HERE-PATH-TO-CONFIG-FILE&gt;&quot;
</code></pre></div>
<p>Subsequent package updates will replace this file, so be sure to back up and restore its content during an update of the Collector package. Alternatively, you can override the configuration with the <a href="https://docs.fedoraproject.org/en-US/quick-docs/systemd-understanding-and-administering/#_modifying_existing_systemd_services"><code>systemctl edit</code> command√Ø¬ª¬ø</a>.</p>
<p>To see all available configuration options, run the Collector binary with the <code>--help</code> parameter.</p>
<p>After changing the configuration, make sure to restart the service using the following command and root privileges:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>systemctl restart dynatrace-otel-collector
</code></pre></div>
<h4 id="service-status">Service status<a class="headerlink" href="#service-status" title="Permanent link">&para;</a></h4>
<p>To view the current status of the Collector service, run the following command with root privileges:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>systemctl status dynatrace-otel-collector
</code></pre></div>
<p>To check the output of the Collector service, run the following command with root privileges:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>journalctl -u dynatrace-otel-collector
</code></pre></div>
<h2 id="container-image-registries">Container image registries<a class="headerlink" href="#container-image-registries" title="Permanent link">&para;</a></h2>
<p>Container images for the Dynatrace distribution of the OpenTelemetry Collector are available in</p>
<ul>
<li>
<p><a href="https://github.com/Dynatrace/dynatrace-otel-collector/pkgs/container/dynatrace-otel-collector%2Fdynatrace-otel-collector">GitHub Container Registry (GHCR)√Ø¬ª¬ø</a></p>
</li>
<li>
<p><code>ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0</code></p>
</li>
<li>
<p><a href="https://gallery.ecr.aws/dynatrace/dynatrace-otel-collector">Amazon Elastic Container Registry (Amazon ECR)√Ø¬ª¬ø</a></p>
</li>
<li>
<p><code>public.ecr.aws/dynatrace/dynatrace-otel-collector:0.44.0</code></p>
</li>
<li>
<p><a href="https://hub.docker.com/r/dynatrace/dynatrace-otel-collector">Docker Hub Container Registry√Ø¬ª¬ø</a></p>
</li>
<li>
<p><code>dynatrace/dynatrace-otel-collector:0.44.0</code></p>
</li>
</ul>
<hr />
<h2 id="source-enrichmd">Source: enrich.md<a class="headerlink" href="#source-enrichmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Enrich with OneAgent (non-containerized)
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/enrich
scraped: 2026-02-15T21:25:58.996874</p>
<hr />
<h1 id="enrich-with-oneagent-non-containerized">Enrich with OneAgent (non-containerized)<a class="headerlink" href="#enrich-with-oneagent-non-containerized" title="Permanent link">&para;</a></h1>
<h1 id="enrich-with-oneagent-non-containerized_1">Enrich with OneAgent (non-containerized)<a class="headerlink" href="#enrich-with-oneagent-non-containerized_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Dec 17, 2025</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance to enrich OpenTelemetry data with OneAgent host entities.</p>
<p>Enrichment is used for linking OpenTelemetry data to its OneAgent host and properly associating it within the topology model. For example, when ingesting logs from different hosts, tying the host entity to the respective log data allows you to run host-based log analytics tasks.</p>
<p>Container environments</p>
<p>Enrichment is specific to non-container OneAgent environments. Configuring a containerized Collector enrichment setup may lead to incorrect host and topology associations.</p>
<h2 id="prerequisites_1">Prerequisites<a class="headerlink" href="#prerequisites_1" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/resourcedetectionprocessor">Resource Detection processor√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>A OneAgent running on the same host as the Collector, where the OneAgent monitors in either Full-Stack, Infrastructure, or Foundation &amp; Discovery mode.</li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported, configured as system environment variable</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate), configured as system environment variable</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration">Demo configuration<a class="headerlink" href="#demo-configuration" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>receivers:
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>otlp:
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>protocols:
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>grpc:
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a>
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>http:
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a>
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a>
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a>
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a>
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a>
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a>
<a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a>processors:
<a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a>
<a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a>
<a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a>
<a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a>resourcedetection/dynatrace:
<a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a>
<a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a>
<a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a>
<a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a>detectors: [dynatrace]
<a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a>
<a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a>
<a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a>
<a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a>override: false
<a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a>
<a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a>
<a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a>
<a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a>exporters:
<a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a>
<a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a>
<a id="__codelineno-24-48" name="__codelineno-24-48" href="#__codelineno-24-48"></a>
<a id="__codelineno-24-49" name="__codelineno-24-49" href="#__codelineno-24-49"></a>otlp_http:
<a id="__codelineno-24-50" name="__codelineno-24-50" href="#__codelineno-24-50"></a>
<a id="__codelineno-24-51" name="__codelineno-24-51" href="#__codelineno-24-51"></a>
<a id="__codelineno-24-52" name="__codelineno-24-52" href="#__codelineno-24-52"></a>
<a id="__codelineno-24-53" name="__codelineno-24-53" href="#__codelineno-24-53"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-24-54" name="__codelineno-24-54" href="#__codelineno-24-54"></a>
<a id="__codelineno-24-55" name="__codelineno-24-55" href="#__codelineno-24-55"></a>
<a id="__codelineno-24-56" name="__codelineno-24-56" href="#__codelineno-24-56"></a>
<a id="__codelineno-24-57" name="__codelineno-24-57" href="#__codelineno-24-57"></a>headers:
<a id="__codelineno-24-58" name="__codelineno-24-58" href="#__codelineno-24-58"></a>
<a id="__codelineno-24-59" name="__codelineno-24-59" href="#__codelineno-24-59"></a>
<a id="__codelineno-24-60" name="__codelineno-24-60" href="#__codelineno-24-60"></a>
<a id="__codelineno-24-61" name="__codelineno-24-61" href="#__codelineno-24-61"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-24-62" name="__codelineno-24-62" href="#__codelineno-24-62"></a>
<a id="__codelineno-24-63" name="__codelineno-24-63" href="#__codelineno-24-63"></a>
<a id="__codelineno-24-64" name="__codelineno-24-64" href="#__codelineno-24-64"></a>
<a id="__codelineno-24-65" name="__codelineno-24-65" href="#__codelineno-24-65"></a>service:
<a id="__codelineno-24-66" name="__codelineno-24-66" href="#__codelineno-24-66"></a>
<a id="__codelineno-24-67" name="__codelineno-24-67" href="#__codelineno-24-67"></a>
<a id="__codelineno-24-68" name="__codelineno-24-68" href="#__codelineno-24-68"></a>
<a id="__codelineno-24-69" name="__codelineno-24-69" href="#__codelineno-24-69"></a>pipelines:
<a id="__codelineno-24-70" name="__codelineno-24-70" href="#__codelineno-24-70"></a>
<a id="__codelineno-24-71" name="__codelineno-24-71" href="#__codelineno-24-71"></a>
<a id="__codelineno-24-72" name="__codelineno-24-72" href="#__codelineno-24-72"></a>
<a id="__codelineno-24-73" name="__codelineno-24-73" href="#__codelineno-24-73"></a>traces:
<a id="__codelineno-24-74" name="__codelineno-24-74" href="#__codelineno-24-74"></a>
<a id="__codelineno-24-75" name="__codelineno-24-75" href="#__codelineno-24-75"></a>
<a id="__codelineno-24-76" name="__codelineno-24-76" href="#__codelineno-24-76"></a>
<a id="__codelineno-24-77" name="__codelineno-24-77" href="#__codelineno-24-77"></a>receivers: [otlp]
<a id="__codelineno-24-78" name="__codelineno-24-78" href="#__codelineno-24-78"></a>
<a id="__codelineno-24-79" name="__codelineno-24-79" href="#__codelineno-24-79"></a>
<a id="__codelineno-24-80" name="__codelineno-24-80" href="#__codelineno-24-80"></a>
<a id="__codelineno-24-81" name="__codelineno-24-81" href="#__codelineno-24-81"></a>processors: [resourcedetection/dynatrace]
<a id="__codelineno-24-82" name="__codelineno-24-82" href="#__codelineno-24-82"></a>
<a id="__codelineno-24-83" name="__codelineno-24-83" href="#__codelineno-24-83"></a>
<a id="__codelineno-24-84" name="__codelineno-24-84" href="#__codelineno-24-84"></a>
<a id="__codelineno-24-85" name="__codelineno-24-85" href="#__codelineno-24-85"></a>exporters: [otlp_http]
<a id="__codelineno-24-86" name="__codelineno-24-86" href="#__codelineno-24-86"></a>
<a id="__codelineno-24-87" name="__codelineno-24-87" href="#__codelineno-24-87"></a>
<a id="__codelineno-24-88" name="__codelineno-24-88" href="#__codelineno-24-88"></a>
<a id="__codelineno-24-89" name="__codelineno-24-89" href="#__codelineno-24-89"></a>metrics:
<a id="__codelineno-24-90" name="__codelineno-24-90" href="#__codelineno-24-90"></a>
<a id="__codelineno-24-91" name="__codelineno-24-91" href="#__codelineno-24-91"></a>
<a id="__codelineno-24-92" name="__codelineno-24-92" href="#__codelineno-24-92"></a>
<a id="__codelineno-24-93" name="__codelineno-24-93" href="#__codelineno-24-93"></a>receivers: [otlp]
<a id="__codelineno-24-94" name="__codelineno-24-94" href="#__codelineno-24-94"></a>
<a id="__codelineno-24-95" name="__codelineno-24-95" href="#__codelineno-24-95"></a>
<a id="__codelineno-24-96" name="__codelineno-24-96" href="#__codelineno-24-96"></a>
<a id="__codelineno-24-97" name="__codelineno-24-97" href="#__codelineno-24-97"></a>processors: [resourcedetection/dynatrace]
<a id="__codelineno-24-98" name="__codelineno-24-98" href="#__codelineno-24-98"></a>
<a id="__codelineno-24-99" name="__codelineno-24-99" href="#__codelineno-24-99"></a>
<a id="__codelineno-24-100" name="__codelineno-24-100" href="#__codelineno-24-100"></a>
<a id="__codelineno-24-101" name="__codelineno-24-101" href="#__codelineno-24-101"></a>exporters: [otlp_http]
<a id="__codelineno-24-102" name="__codelineno-24-102" href="#__codelineno-24-102"></a>
<a id="__codelineno-24-103" name="__codelineno-24-103" href="#__codelineno-24-103"></a>
<a id="__codelineno-24-104" name="__codelineno-24-104" href="#__codelineno-24-104"></a>
<a id="__codelineno-24-105" name="__codelineno-24-105" href="#__codelineno-24-105"></a>logs:
<a id="__codelineno-24-106" name="__codelineno-24-106" href="#__codelineno-24-106"></a>
<a id="__codelineno-24-107" name="__codelineno-24-107" href="#__codelineno-24-107"></a>
<a id="__codelineno-24-108" name="__codelineno-24-108" href="#__codelineno-24-108"></a>
<a id="__codelineno-24-109" name="__codelineno-24-109" href="#__codelineno-24-109"></a>receivers: [otlp]
<a id="__codelineno-24-110" name="__codelineno-24-110" href="#__codelineno-24-110"></a>
<a id="__codelineno-24-111" name="__codelineno-24-111" href="#__codelineno-24-111"></a>
<a id="__codelineno-24-112" name="__codelineno-24-112" href="#__codelineno-24-112"></a>
<a id="__codelineno-24-113" name="__codelineno-24-113" href="#__codelineno-24-113"></a>processors: [resourcedetection/dynatrace]
<a id="__codelineno-24-114" name="__codelineno-24-114" href="#__codelineno-24-114"></a>
<a id="__codelineno-24-115" name="__codelineno-24-115" href="#__codelineno-24-115"></a>
<a id="__codelineno-24-116" name="__codelineno-24-116" href="#__codelineno-24-116"></a>
<a id="__codelineno-24-117" name="__codelineno-24-117" href="#__codelineno-24-117"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components">Components<a class="headerlink" href="#components" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers">Receivers<a class="headerlink" href="#receivers" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance.</p>
<p>This is mainly for demonstration purposes. You can specify any other valid receiver here (for example, <code>zipkin</code>).</p>
<h3 id="processors">Processors<a class="headerlink" href="#processors" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we specify the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/resourcedetectionprocessor"><code>resourcedetection</code> processor√Ø¬ª¬ø</a> and configure it with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/resourcedetectionprocessor/README.md#dynatrace">Dynatrace-specific detector <code>dynatrace</code>√Ø¬ª¬ø</a>.</p>
<p>With this configuration, the resource detector processor will attempt to load the following three attributes from the <a href="/docs/ingest-from/extend-dynatrace/extend-data#dynatrace-oneagent" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent enrichment file</a>:</p>
<ul>
<li><code>dt.entity.host</code></li>
<li><code>host.name</code></li>
<li><code>dt.smartscape.host</code></li>
</ul>
<p>If the resource detector could load these values successfully, it will add them as resource attributes to the OTLP request. No additional processor configuration is necessary.</p>
<h3 id="exporters">Exporters<a class="headerlink" href="#exporters" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>headers</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipeline">Service pipeline<a class="headerlink" href="#service-pipeline" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver, processor, and exporter objects into service pipelines, which will perform these steps:</p>
<ul>
<li>accept OTLP requests on the configured ports</li>
<li>enrich them with the Dynatrace-relevant host data, using the resource detector processor</li>
<li>and export the enriched data to Dynatrace</li>
</ul>
<hr />
<h2 id="source-grpcmd">Source: grpc.md<a class="headerlink" href="#source-grpcmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Transform OTLP gRPC
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/grpc
scraped: 2026-02-15T21:29:03.329604</p>
<hr />
<h1 id="transform-otlp-grpc">Transform OTLP gRPC<a class="headerlink" href="#transform-otlp-grpc" title="Permanent link">&para;</a></h1>
<h1 id="transform-otlp-grpc_1">Transform OTLP gRPC<a class="headerlink" href="#transform-otlp-grpc_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Oct 11, 2023</li>
</ul>
<p>The following configuration example shows how you would configure a Collector instance to transform a gRPC OTLP request to its HTTP counterpart.</p>
<h2 id="prerequisites_2">Prerequisites<a class="headerlink" href="#prerequisites_2" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-core" title="Learn about the Dynatrace Collector.">Core</a> or <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_1">Demo configuration<a class="headerlink" href="#demo-configuration_1" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>receivers:
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>otlp:
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>protocols:
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>grpc:
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>exporters:
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a>
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>otlp_http:
<a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a>
<a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a>
<a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a>
<a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a>
<a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a>
<a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a>
<a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a>headers:
<a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a>
<a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a>
<a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a>
<a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a>
<a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a>
<a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a>
<a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a>service:
<a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a>
<a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a>
<a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a>
<a id="__codelineno-25-45" name="__codelineno-25-45" href="#__codelineno-25-45"></a>pipelines:
<a id="__codelineno-25-46" name="__codelineno-25-46" href="#__codelineno-25-46"></a>
<a id="__codelineno-25-47" name="__codelineno-25-47" href="#__codelineno-25-47"></a>
<a id="__codelineno-25-48" name="__codelineno-25-48" href="#__codelineno-25-48"></a>
<a id="__codelineno-25-49" name="__codelineno-25-49" href="#__codelineno-25-49"></a>traces:
<a id="__codelineno-25-50" name="__codelineno-25-50" href="#__codelineno-25-50"></a>
<a id="__codelineno-25-51" name="__codelineno-25-51" href="#__codelineno-25-51"></a>
<a id="__codelineno-25-52" name="__codelineno-25-52" href="#__codelineno-25-52"></a>
<a id="__codelineno-25-53" name="__codelineno-25-53" href="#__codelineno-25-53"></a>receivers: [otlp]
<a id="__codelineno-25-54" name="__codelineno-25-54" href="#__codelineno-25-54"></a>
<a id="__codelineno-25-55" name="__codelineno-25-55" href="#__codelineno-25-55"></a>
<a id="__codelineno-25-56" name="__codelineno-25-56" href="#__codelineno-25-56"></a>
<a id="__codelineno-25-57" name="__codelineno-25-57" href="#__codelineno-25-57"></a>processors: []
<a id="__codelineno-25-58" name="__codelineno-25-58" href="#__codelineno-25-58"></a>
<a id="__codelineno-25-59" name="__codelineno-25-59" href="#__codelineno-25-59"></a>
<a id="__codelineno-25-60" name="__codelineno-25-60" href="#__codelineno-25-60"></a>
<a id="__codelineno-25-61" name="__codelineno-25-61" href="#__codelineno-25-61"></a>exporters: [otlp_http]
<a id="__codelineno-25-62" name="__codelineno-25-62" href="#__codelineno-25-62"></a>
<a id="__codelineno-25-63" name="__codelineno-25-63" href="#__codelineno-25-63"></a>
<a id="__codelineno-25-64" name="__codelineno-25-64" href="#__codelineno-25-64"></a>
<a id="__codelineno-25-65" name="__codelineno-25-65" href="#__codelineno-25-65"></a>metrics:
<a id="__codelineno-25-66" name="__codelineno-25-66" href="#__codelineno-25-66"></a>
<a id="__codelineno-25-67" name="__codelineno-25-67" href="#__codelineno-25-67"></a>
<a id="__codelineno-25-68" name="__codelineno-25-68" href="#__codelineno-25-68"></a>
<a id="__codelineno-25-69" name="__codelineno-25-69" href="#__codelineno-25-69"></a>receivers: [otlp]
<a id="__codelineno-25-70" name="__codelineno-25-70" href="#__codelineno-25-70"></a>
<a id="__codelineno-25-71" name="__codelineno-25-71" href="#__codelineno-25-71"></a>
<a id="__codelineno-25-72" name="__codelineno-25-72" href="#__codelineno-25-72"></a>
<a id="__codelineno-25-73" name="__codelineno-25-73" href="#__codelineno-25-73"></a>processors: []
<a id="__codelineno-25-74" name="__codelineno-25-74" href="#__codelineno-25-74"></a>
<a id="__codelineno-25-75" name="__codelineno-25-75" href="#__codelineno-25-75"></a>
<a id="__codelineno-25-76" name="__codelineno-25-76" href="#__codelineno-25-76"></a>
<a id="__codelineno-25-77" name="__codelineno-25-77" href="#__codelineno-25-77"></a>exporters: [otlp_http]
<a id="__codelineno-25-78" name="__codelineno-25-78" href="#__codelineno-25-78"></a>
<a id="__codelineno-25-79" name="__codelineno-25-79" href="#__codelineno-25-79"></a>
<a id="__codelineno-25-80" name="__codelineno-25-80" href="#__codelineno-25-80"></a>
<a id="__codelineno-25-81" name="__codelineno-25-81" href="#__codelineno-25-81"></a>logs:
<a id="__codelineno-25-82" name="__codelineno-25-82" href="#__codelineno-25-82"></a>
<a id="__codelineno-25-83" name="__codelineno-25-83" href="#__codelineno-25-83"></a>
<a id="__codelineno-25-84" name="__codelineno-25-84" href="#__codelineno-25-84"></a>
<a id="__codelineno-25-85" name="__codelineno-25-85" href="#__codelineno-25-85"></a>receivers: [otlp]
<a id="__codelineno-25-86" name="__codelineno-25-86" href="#__codelineno-25-86"></a>
<a id="__codelineno-25-87" name="__codelineno-25-87" href="#__codelineno-25-87"></a>
<a id="__codelineno-25-88" name="__codelineno-25-88" href="#__codelineno-25-88"></a>
<a id="__codelineno-25-89" name="__codelineno-25-89" href="#__codelineno-25-89"></a>processors: []
<a id="__codelineno-25-90" name="__codelineno-25-90" href="#__codelineno-25-90"></a>
<a id="__codelineno-25-91" name="__codelineno-25-91" href="#__codelineno-25-91"></a>
<a id="__codelineno-25-92" name="__codelineno-25-92" href="#__codelineno-25-92"></a>
<a id="__codelineno-25-93" name="__codelineno-25-93" href="#__codelineno-25-93"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_1">Components<a class="headerlink" href="#components_1" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_1">Receivers<a class="headerlink" href="#receivers_1" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the gRPC <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/receiver/otlpreceiver"><code>otlp</code> receiver√Ø¬ª¬ø</a> as active receiver component for our Collector instance.</p>
<h3 id="exporters_1">Exporters<a class="headerlink" href="#exporters_1" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines">Service pipelines<a class="headerlink" href="#service-pipelines" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we eventually assemble our receiver and exporter objects into pipelines, which explictly accept gRPC requests and forward them on HTTP to Dynatrace.</p>
<h2 id="limits-and-limitations">Limits and limitations<a class="headerlink" href="#limits-and-limitations" title="Permanent link">&para;</a></h2>
<p>Data is ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP APIs</a> and is subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OpenTelemetry logs</a></li>
</ul>
<h2 id="related-topics">Related topics<a class="headerlink" href="#related-topics" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich from Kubernetes</a></li>
</ul>
<hr />
<h2 id="source-histogramsmd">Source: histograms.md<a class="headerlink" href="#source-histogramsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Compute histogram summaries
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/histograms
scraped: 2026-02-15T09:10:21.647750</p>
<hr />
<h1 id="compute-histogram-summaries">Compute histogram summaries<a class="headerlink" href="#compute-histogram-summaries" title="Permanent link">&para;</a></h1>
<h1 id="compute-histogram-summaries_1">Compute histogram summaries<a class="headerlink" href="#compute-histogram-summaries_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>3-min read</li>
<li>Published Apr 08, 2024</li>
</ul>
<p>Ingest histograms directly</p>
<p>Starting with Dynatrace version 1.300, histogram ingestion is supported directly via OTLP ingest API. Consequently, it's not required to use Collector as a workaround. Dynatrace recommends ingesting histograms directly without additional data manipulation.</p>
<p>The following configuration example shows how to use the Collector to compute and ingest summaries of histogram buckets, such as the overall sum of all values in the bucket and their total count.</p>
<h2 id="prerequisites_3">Prerequisites<a class="headerlink" href="#prerequisites_3" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor">transform√Ø¬ª¬ø</a> and <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/filterprocessor">filter√Ø¬ª¬ø</a> processors:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_2">Demo configuration<a class="headerlink" href="#demo-configuration_2" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>receivers:
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>otlp:
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>protocols:
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>grpc:
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>http:
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a>
<a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a>
<a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>
<a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>
<a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a>
<a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a>
<a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a>processors:
<a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a>
<a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a>
<a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a>
<a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a>transform:
<a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a>
<a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a>
<a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a>
<a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a>metric_statements:
<a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a>
<a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a>
<a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a>
<a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a>- context: metric
<a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a>
<a id="__codelineno-26-43" name="__codelineno-26-43" href="#__codelineno-26-43"></a>
<a id="__codelineno-26-44" name="__codelineno-26-44" href="#__codelineno-26-44"></a>
<a id="__codelineno-26-45" name="__codelineno-26-45" href="#__codelineno-26-45"></a>statements:
<a id="__codelineno-26-46" name="__codelineno-26-46" href="#__codelineno-26-46"></a>
<a id="__codelineno-26-47" name="__codelineno-26-47" href="#__codelineno-26-47"></a>
<a id="__codelineno-26-48" name="__codelineno-26-48" href="#__codelineno-26-48"></a>
<a id="__codelineno-26-49" name="__codelineno-26-49" href="#__codelineno-26-49"></a># Get count from the histogram. The new metric name will be &lt;histogram_name&gt;_count
<a id="__codelineno-26-50" name="__codelineno-26-50" href="#__codelineno-26-50"></a>
<a id="__codelineno-26-51" name="__codelineno-26-51" href="#__codelineno-26-51"></a>
<a id="__codelineno-26-52" name="__codelineno-26-52" href="#__codelineno-26-52"></a>
<a id="__codelineno-26-53" name="__codelineno-26-53" href="#__codelineno-26-53"></a>- extract_count_metric(true) where type == METRIC_DATA_TYPE_HISTOGRAM
<a id="__codelineno-26-54" name="__codelineno-26-54" href="#__codelineno-26-54"></a>
<a id="__codelineno-26-55" name="__codelineno-26-55" href="#__codelineno-26-55"></a>
<a id="__codelineno-26-56" name="__codelineno-26-56" href="#__codelineno-26-56"></a>
<a id="__codelineno-26-57" name="__codelineno-26-57" href="#__codelineno-26-57"></a># Get sum from the histogram. The new metric name will be &lt;histogram_name&gt;_sum
<a id="__codelineno-26-58" name="__codelineno-26-58" href="#__codelineno-26-58"></a>
<a id="__codelineno-26-59" name="__codelineno-26-59" href="#__codelineno-26-59"></a>
<a id="__codelineno-26-60" name="__codelineno-26-60" href="#__codelineno-26-60"></a>
<a id="__codelineno-26-61" name="__codelineno-26-61" href="#__codelineno-26-61"></a>- extract_sum_metric(true) where type == METRIC_DATA_TYPE_HISTOGRAM
<a id="__codelineno-26-62" name="__codelineno-26-62" href="#__codelineno-26-62"></a>
<a id="__codelineno-26-63" name="__codelineno-26-63" href="#__codelineno-26-63"></a>
<a id="__codelineno-26-64" name="__codelineno-26-64" href="#__codelineno-26-64"></a>
<a id="__codelineno-26-65" name="__codelineno-26-65" href="#__codelineno-26-65"></a># convert the &lt;histogram_name&gt;_sum metrics to gauges.
<a id="__codelineno-26-66" name="__codelineno-26-66" href="#__codelineno-26-66"></a>
<a id="__codelineno-26-67" name="__codelineno-26-67" href="#__codelineno-26-67"></a>
<a id="__codelineno-26-68" name="__codelineno-26-68" href="#__codelineno-26-68"></a>
<a id="__codelineno-26-69" name="__codelineno-26-69" href="#__codelineno-26-69"></a>- convert_sum_to_gauge() where IsMatch(name, &quot;.*_sum&quot;)
<a id="__codelineno-26-70" name="__codelineno-26-70" href="#__codelineno-26-70"></a>
<a id="__codelineno-26-71" name="__codelineno-26-71" href="#__codelineno-26-71"></a>
<a id="__codelineno-26-72" name="__codelineno-26-72" href="#__codelineno-26-72"></a>
<a id="__codelineno-26-73" name="__codelineno-26-73" href="#__codelineno-26-73"></a>filter:
<a id="__codelineno-26-74" name="__codelineno-26-74" href="#__codelineno-26-74"></a>
<a id="__codelineno-26-75" name="__codelineno-26-75" href="#__codelineno-26-75"></a>
<a id="__codelineno-26-76" name="__codelineno-26-76" href="#__codelineno-26-76"></a>
<a id="__codelineno-26-77" name="__codelineno-26-77" href="#__codelineno-26-77"></a>metrics:
<a id="__codelineno-26-78" name="__codelineno-26-78" href="#__codelineno-26-78"></a>
<a id="__codelineno-26-79" name="__codelineno-26-79" href="#__codelineno-26-79"></a>
<a id="__codelineno-26-80" name="__codelineno-26-80" href="#__codelineno-26-80"></a>
<a id="__codelineno-26-81" name="__codelineno-26-81" href="#__codelineno-26-81"></a>metric:
<a id="__codelineno-26-82" name="__codelineno-26-82" href="#__codelineno-26-82"></a>
<a id="__codelineno-26-83" name="__codelineno-26-83" href="#__codelineno-26-83"></a>
<a id="__codelineno-26-84" name="__codelineno-26-84" href="#__codelineno-26-84"></a>
<a id="__codelineno-26-85" name="__codelineno-26-85" href="#__codelineno-26-85"></a># Drop metrics of type histogram. The _count and _sum metrics will still be exported.
<a id="__codelineno-26-86" name="__codelineno-26-86" href="#__codelineno-26-86"></a>
<a id="__codelineno-26-87" name="__codelineno-26-87" href="#__codelineno-26-87"></a>
<a id="__codelineno-26-88" name="__codelineno-26-88" href="#__codelineno-26-88"></a>
<a id="__codelineno-26-89" name="__codelineno-26-89" href="#__codelineno-26-89"></a>- type == METRIC_DATA_TYPE_HISTOGRAM
<a id="__codelineno-26-90" name="__codelineno-26-90" href="#__codelineno-26-90"></a>
<a id="__codelineno-26-91" name="__codelineno-26-91" href="#__codelineno-26-91"></a>
<a id="__codelineno-26-92" name="__codelineno-26-92" href="#__codelineno-26-92"></a>
<a id="__codelineno-26-93" name="__codelineno-26-93" href="#__codelineno-26-93"></a>exporters:
<a id="__codelineno-26-94" name="__codelineno-26-94" href="#__codelineno-26-94"></a>
<a id="__codelineno-26-95" name="__codelineno-26-95" href="#__codelineno-26-95"></a>
<a id="__codelineno-26-96" name="__codelineno-26-96" href="#__codelineno-26-96"></a>
<a id="__codelineno-26-97" name="__codelineno-26-97" href="#__codelineno-26-97"></a>otlp_http:
<a id="__codelineno-26-98" name="__codelineno-26-98" href="#__codelineno-26-98"></a>
<a id="__codelineno-26-99" name="__codelineno-26-99" href="#__codelineno-26-99"></a>
<a id="__codelineno-26-100" name="__codelineno-26-100" href="#__codelineno-26-100"></a>
<a id="__codelineno-26-101" name="__codelineno-26-101" href="#__codelineno-26-101"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-26-102" name="__codelineno-26-102" href="#__codelineno-26-102"></a>
<a id="__codelineno-26-103" name="__codelineno-26-103" href="#__codelineno-26-103"></a>
<a id="__codelineno-26-104" name="__codelineno-26-104" href="#__codelineno-26-104"></a>
<a id="__codelineno-26-105" name="__codelineno-26-105" href="#__codelineno-26-105"></a>headers:
<a id="__codelineno-26-106" name="__codelineno-26-106" href="#__codelineno-26-106"></a>
<a id="__codelineno-26-107" name="__codelineno-26-107" href="#__codelineno-26-107"></a>
<a id="__codelineno-26-108" name="__codelineno-26-108" href="#__codelineno-26-108"></a>
<a id="__codelineno-26-109" name="__codelineno-26-109" href="#__codelineno-26-109"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-26-110" name="__codelineno-26-110" href="#__codelineno-26-110"></a>
<a id="__codelineno-26-111" name="__codelineno-26-111" href="#__codelineno-26-111"></a>
<a id="__codelineno-26-112" name="__codelineno-26-112" href="#__codelineno-26-112"></a>
<a id="__codelineno-26-113" name="__codelineno-26-113" href="#__codelineno-26-113"></a>service:
<a id="__codelineno-26-114" name="__codelineno-26-114" href="#__codelineno-26-114"></a>
<a id="__codelineno-26-115" name="__codelineno-26-115" href="#__codelineno-26-115"></a>
<a id="__codelineno-26-116" name="__codelineno-26-116" href="#__codelineno-26-116"></a>
<a id="__codelineno-26-117" name="__codelineno-26-117" href="#__codelineno-26-117"></a>pipelines:
<a id="__codelineno-26-118" name="__codelineno-26-118" href="#__codelineno-26-118"></a>
<a id="__codelineno-26-119" name="__codelineno-26-119" href="#__codelineno-26-119"></a>
<a id="__codelineno-26-120" name="__codelineno-26-120" href="#__codelineno-26-120"></a>
<a id="__codelineno-26-121" name="__codelineno-26-121" href="#__codelineno-26-121"></a>metrics:
<a id="__codelineno-26-122" name="__codelineno-26-122" href="#__codelineno-26-122"></a>
<a id="__codelineno-26-123" name="__codelineno-26-123" href="#__codelineno-26-123"></a>
<a id="__codelineno-26-124" name="__codelineno-26-124" href="#__codelineno-26-124"></a>
<a id="__codelineno-26-125" name="__codelineno-26-125" href="#__codelineno-26-125"></a>receivers: [otlp]
<a id="__codelineno-26-126" name="__codelineno-26-126" href="#__codelineno-26-126"></a>
<a id="__codelineno-26-127" name="__codelineno-26-127" href="#__codelineno-26-127"></a>
<a id="__codelineno-26-128" name="__codelineno-26-128" href="#__codelineno-26-128"></a>
<a id="__codelineno-26-129" name="__codelineno-26-129" href="#__codelineno-26-129"></a>processors: [transform,filter]
<a id="__codelineno-26-130" name="__codelineno-26-130" href="#__codelineno-26-130"></a>
<a id="__codelineno-26-131" name="__codelineno-26-131" href="#__codelineno-26-131"></a>
<a id="__codelineno-26-132" name="__codelineno-26-132" href="#__codelineno-26-132"></a>
<a id="__codelineno-26-133" name="__codelineno-26-133" href="#__codelineno-26-133"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_2">Components<a class="headerlink" href="#components_2" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_2">Receivers<a class="headerlink" href="#receivers_2" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance and configure it to accept OTLP requests on gRPC and HTTP.</p>
<h3 id="processors_1">Processors<a class="headerlink" href="#processors_1" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we configure the following two processor instances:</p>
<ul>
<li>
<p><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor"><code>transform</code>√Ø¬ª¬ø</a>, to compute the desired sum and count values of the histograms:</p>
</li>
<li>
<p>We first use the function <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/transformprocessor/README.md#extract_count_metric"><code>extract_count_metric</code>√Ø¬ª¬ø</a> to compute the number of values in each histogram bucket.</p>
</li>
<li>Then, we use the function <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/transformprocessor/README.md#extract_sum_metric"><code>extract_sum_metric</code>√Ø¬ª¬ø</a> to compute the total sum of all of its values and convert it to a gauge using <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/v0.145.0/processor/transformprocessor/README.md#convert_sum_to_gauge"><code>convert_sum_to_gauge</code>√Ø¬ª¬ø</a>.</li>
<li><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/filterprocessor"><code>filter</code>√Ø¬ª¬ø</a>, to drop the existing histogram buckets (based on <code>type</code>) and avoid histogram-related error messages.</li>
</ul>
<p>With this configuration, the Collector drops histogram metrics and creates in their place two new metrics for the sum and item count of each respective histogram.</p>
<h3 id="exporters_2">Exporters<a class="headerlink" href="#exporters_2" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>:</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_1">Service pipelines<a class="headerlink" href="#service-pipelines_1" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver and exporter objects into a metric pipeline and enable the two processors by referencing them under <code>processors</code>.</p>
<h2 id="limits-and-limitations_1">Limits and limitations<a class="headerlink" href="#limits-and-limitations_1" title="Permanent link">&para;</a></h2>
<p>Metrics are ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API</a> and are subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
</ul>
<h2 id="related-topics_1">Related topics<a class="headerlink" href="#related-topics_1" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-jaegermd">Source: jaeger.md<a class="headerlink" href="#source-jaegermd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest data from Jaeger
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/jaeger
scraped: 2026-02-15T21:29:51.433854</p>
<hr />
<h1 id="ingest-data-from-jaeger">Ingest data from Jaeger<a class="headerlink" href="#ingest-data-from-jaeger" title="Permanent link">&para;</a></h1>
<h1 id="ingest-data-from-jaeger_1">Ingest data from Jaeger<a class="headerlink" href="#ingest-data-from-jaeger_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Oct 11, 2023</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance to accept Jaeger data, transform it to OTLP, and send it to the Dynatrace backend.</p>
<h2 id="prerequisites_4">Prerequisites<a class="headerlink" href="#prerequisites_4" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/jaegerreceiver">Jaeger receiver√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li><a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">OpenTelemetry Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_3">Demo configuration<a class="headerlink" href="#demo-configuration_3" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>receivers:
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>jaeger:
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>protocols:
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>grpc:
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>exporters:
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>otlp_http:
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a>
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>
<a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>
<a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>
<a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a>
<a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>
<a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a>headers:
<a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a>
<a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a>
<a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a>
<a id="__codelineno-27-33" name="__codelineno-27-33" href="#__codelineno-27-33"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-27-34" name="__codelineno-27-34" href="#__codelineno-27-34"></a>
<a id="__codelineno-27-35" name="__codelineno-27-35" href="#__codelineno-27-35"></a>
<a id="__codelineno-27-36" name="__codelineno-27-36" href="#__codelineno-27-36"></a>
<a id="__codelineno-27-37" name="__codelineno-27-37" href="#__codelineno-27-37"></a>service:
<a id="__codelineno-27-38" name="__codelineno-27-38" href="#__codelineno-27-38"></a>
<a id="__codelineno-27-39" name="__codelineno-27-39" href="#__codelineno-27-39"></a>
<a id="__codelineno-27-40" name="__codelineno-27-40" href="#__codelineno-27-40"></a>
<a id="__codelineno-27-41" name="__codelineno-27-41" href="#__codelineno-27-41"></a>pipelines:
<a id="__codelineno-27-42" name="__codelineno-27-42" href="#__codelineno-27-42"></a>
<a id="__codelineno-27-43" name="__codelineno-27-43" href="#__codelineno-27-43"></a>
<a id="__codelineno-27-44" name="__codelineno-27-44" href="#__codelineno-27-44"></a>
<a id="__codelineno-27-45" name="__codelineno-27-45" href="#__codelineno-27-45"></a>traces:
<a id="__codelineno-27-46" name="__codelineno-27-46" href="#__codelineno-27-46"></a>
<a id="__codelineno-27-47" name="__codelineno-27-47" href="#__codelineno-27-47"></a>
<a id="__codelineno-27-48" name="__codelineno-27-48" href="#__codelineno-27-48"></a>
<a id="__codelineno-27-49" name="__codelineno-27-49" href="#__codelineno-27-49"></a>receivers: [jaeger]
<a id="__codelineno-27-50" name="__codelineno-27-50" href="#__codelineno-27-50"></a>
<a id="__codelineno-27-51" name="__codelineno-27-51" href="#__codelineno-27-51"></a>
<a id="__codelineno-27-52" name="__codelineno-27-52" href="#__codelineno-27-52"></a>
<a id="__codelineno-27-53" name="__codelineno-27-53" href="#__codelineno-27-53"></a>processors: []
<a id="__codelineno-27-54" name="__codelineno-27-54" href="#__codelineno-27-54"></a>
<a id="__codelineno-27-55" name="__codelineno-27-55" href="#__codelineno-27-55"></a>
<a id="__codelineno-27-56" name="__codelineno-27-56" href="#__codelineno-27-56"></a>
<a id="__codelineno-27-57" name="__codelineno-27-57" href="#__codelineno-27-57"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_3">Components<a class="headerlink" href="#components_3" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_3">Receivers<a class="headerlink" href="#receivers_3" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the <code>jaeger</code> receiver as active receiver component for our Collector instance.</p>
<p>The Jaeger receiver can be customized with <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/jaegerreceiver">a few more attributes√Ø¬ª¬ø</a>, which we leave with their default values in our example.</p>
<h3 id="exporters_3">Exporters<a class="headerlink" href="#exporters_3" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_2">Service pipelines<a class="headerlink" href="#service-pipelines_2" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we eventually assemble our receiver and exporter objects into a traces pipeline, which will handle our Jaeger transformation to OTLP.</p>
<h2 id="related-topics_2">Related topics<a class="headerlink" href="#related-topics_2" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich from Kubernetes</a></li>
</ul>
<hr />
<h2 id="source-netflowmd">Source: netflow.md<a class="headerlink" href="#source-netflowmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest NetFlow packets
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/netflow
scraped: 2026-02-15T09:11:04.418737</p>
<hr />
<h1 id="ingest-netflow-packets">Ingest NetFlow packets<a class="headerlink" href="#ingest-netflow-packets" title="Permanent link">&para;</a></h1>
<h1 id="ingest-netflow-packets_1">Ingest NetFlow packets<a class="headerlink" href="#ingest-netflow-packets_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Updated on Jan 27, 2026</li>
</ul>
<p>The following configuration example shows how to configure a Collector instance to accept NetFlow packets and ingest them as OTLP requests into Dynatrace.</p>
<h2 id="prerequisites_5">Prerequisites<a class="headerlink" href="#prerequisites_5" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/netflowreceiver">NetFlow receiver√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p><a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">The Dynatrace Collector</a></p>
</li>
<li><a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">OpenTelemetry Contrib</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">A custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported.</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the Ingest logs (<code>logs.ingest</code>) scope.</li>
<li>A NetFlow- or sFlow-capable device that can send NetFlow packets to the Collector instance.</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="collector-configuration_2">Collector configuration<a class="headerlink" href="#collector-configuration_2" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>receivers:
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>netflow:
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>hostname: &quot;0.0.0.0&quot;
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>scheme: netflow
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>port: 2055
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a>
<a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>sockets: 2
<a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a>
<a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>
<a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a>
<a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a>workers: 4
<a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a>
<a id="__codelineno-28-27" name="__codelineno-28-27" href="#__codelineno-28-27"></a>
<a id="__codelineno-28-28" name="__codelineno-28-28" href="#__codelineno-28-28"></a>
<a id="__codelineno-28-29" name="__codelineno-28-29" href="#__codelineno-28-29"></a>processors:
<a id="__codelineno-28-30" name="__codelineno-28-30" href="#__codelineno-28-30"></a>
<a id="__codelineno-28-31" name="__codelineno-28-31" href="#__codelineno-28-31"></a>
<a id="__codelineno-28-32" name="__codelineno-28-32" href="#__codelineno-28-32"></a>
<a id="__codelineno-28-33" name="__codelineno-28-33" href="#__codelineno-28-33"></a>batch:
<a id="__codelineno-28-34" name="__codelineno-28-34" href="#__codelineno-28-34"></a>
<a id="__codelineno-28-35" name="__codelineno-28-35" href="#__codelineno-28-35"></a>
<a id="__codelineno-28-36" name="__codelineno-28-36" href="#__codelineno-28-36"></a>
<a id="__codelineno-28-37" name="__codelineno-28-37" href="#__codelineno-28-37"></a>send_batch_size: 30
<a id="__codelineno-28-38" name="__codelineno-28-38" href="#__codelineno-28-38"></a>
<a id="__codelineno-28-39" name="__codelineno-28-39" href="#__codelineno-28-39"></a>
<a id="__codelineno-28-40" name="__codelineno-28-40" href="#__codelineno-28-40"></a>
<a id="__codelineno-28-41" name="__codelineno-28-41" href="#__codelineno-28-41"></a>timeout: 30s
<a id="__codelineno-28-42" name="__codelineno-28-42" href="#__codelineno-28-42"></a>
<a id="__codelineno-28-43" name="__codelineno-28-43" href="#__codelineno-28-43"></a>
<a id="__codelineno-28-44" name="__codelineno-28-44" href="#__codelineno-28-44"></a>
<a id="__codelineno-28-45" name="__codelineno-28-45" href="#__codelineno-28-45"></a>exporters:
<a id="__codelineno-28-46" name="__codelineno-28-46" href="#__codelineno-28-46"></a>
<a id="__codelineno-28-47" name="__codelineno-28-47" href="#__codelineno-28-47"></a>
<a id="__codelineno-28-48" name="__codelineno-28-48" href="#__codelineno-28-48"></a>
<a id="__codelineno-28-49" name="__codelineno-28-49" href="#__codelineno-28-49"></a>otlp_http:
<a id="__codelineno-28-50" name="__codelineno-28-50" href="#__codelineno-28-50"></a>
<a id="__codelineno-28-51" name="__codelineno-28-51" href="#__codelineno-28-51"></a>
<a id="__codelineno-28-52" name="__codelineno-28-52" href="#__codelineno-28-52"></a>
<a id="__codelineno-28-53" name="__codelineno-28-53" href="#__codelineno-28-53"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-28-54" name="__codelineno-28-54" href="#__codelineno-28-54"></a>
<a id="__codelineno-28-55" name="__codelineno-28-55" href="#__codelineno-28-55"></a>
<a id="__codelineno-28-56" name="__codelineno-28-56" href="#__codelineno-28-56"></a>
<a id="__codelineno-28-57" name="__codelineno-28-57" href="#__codelineno-28-57"></a>headers:
<a id="__codelineno-28-58" name="__codelineno-28-58" href="#__codelineno-28-58"></a>
<a id="__codelineno-28-59" name="__codelineno-28-59" href="#__codelineno-28-59"></a>
<a id="__codelineno-28-60" name="__codelineno-28-60" href="#__codelineno-28-60"></a>
<a id="__codelineno-28-61" name="__codelineno-28-61" href="#__codelineno-28-61"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-28-62" name="__codelineno-28-62" href="#__codelineno-28-62"></a>
<a id="__codelineno-28-63" name="__codelineno-28-63" href="#__codelineno-28-63"></a>
<a id="__codelineno-28-64" name="__codelineno-28-64" href="#__codelineno-28-64"></a>
<a id="__codelineno-28-65" name="__codelineno-28-65" href="#__codelineno-28-65"></a>service:
<a id="__codelineno-28-66" name="__codelineno-28-66" href="#__codelineno-28-66"></a>
<a id="__codelineno-28-67" name="__codelineno-28-67" href="#__codelineno-28-67"></a>
<a id="__codelineno-28-68" name="__codelineno-28-68" href="#__codelineno-28-68"></a>
<a id="__codelineno-28-69" name="__codelineno-28-69" href="#__codelineno-28-69"></a>pipelines:
<a id="__codelineno-28-70" name="__codelineno-28-70" href="#__codelineno-28-70"></a>
<a id="__codelineno-28-71" name="__codelineno-28-71" href="#__codelineno-28-71"></a>
<a id="__codelineno-28-72" name="__codelineno-28-72" href="#__codelineno-28-72"></a>
<a id="__codelineno-28-73" name="__codelineno-28-73" href="#__codelineno-28-73"></a>logs:
<a id="__codelineno-28-74" name="__codelineno-28-74" href="#__codelineno-28-74"></a>
<a id="__codelineno-28-75" name="__codelineno-28-75" href="#__codelineno-28-75"></a>
<a id="__codelineno-28-76" name="__codelineno-28-76" href="#__codelineno-28-76"></a>
<a id="__codelineno-28-77" name="__codelineno-28-77" href="#__codelineno-28-77"></a>receivers: [netflow]
<a id="__codelineno-28-78" name="__codelineno-28-78" href="#__codelineno-28-78"></a>
<a id="__codelineno-28-79" name="__codelineno-28-79" href="#__codelineno-28-79"></a>
<a id="__codelineno-28-80" name="__codelineno-28-80" href="#__codelineno-28-80"></a>
<a id="__codelineno-28-81" name="__codelineno-28-81" href="#__codelineno-28-81"></a>processors: [batch]
<a id="__codelineno-28-82" name="__codelineno-28-82" href="#__codelineno-28-82"></a>
<a id="__codelineno-28-83" name="__codelineno-28-83" href="#__codelineno-28-83"></a>
<a id="__codelineno-28-84" name="__codelineno-28-84" href="#__codelineno-28-84"></a>
<a id="__codelineno-28-85" name="__codelineno-28-85" href="#__codelineno-28-85"></a>exporters: [otlp_http]
</code></pre></div>
<p>Check the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/netflowreceiver#netflow-receiver">NetFlow receiver√Ø¬ª¬ø</a> documentation for the available configuration options.</p>
<p>We recommend setting the <code>sockets</code> parameter to match the number of CPU cores available on the Collector instance, and the <code>workers</code> parameter to twice the number of sockets. This configuration allows the Collector to process multiple incoming NetFlow packets concurrently, which improves performance.</p>
<p>For extremely large volumes of data, you should parallelize the configuration among multiple Collector instances.</p>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_4">Components<a class="headerlink" href="#components_4" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_4">Receivers<a class="headerlink" href="#receivers_4" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the <code>netflow</code> receiver as the active receiver component for our Collector instance and configure it to listen on specified ports.</p>
<h3 id="processors_2">Processors<a class="headerlink" href="#processors_2" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we specify the <code>batch</code> processor, which batches the incoming NetFlow packets before sending them to Dynatrace. This is useful for optimizing performance and reducing the number of requests sent.</p>
<h3 id="exporters_4">Exporters<a class="headerlink" href="#exporters_4" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_3">Service pipelines<a class="headerlink" href="#service-pipelines_3" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver and exporter objects into a logs pipeline, which will listen on the configured address for incoming NetFlow packets and forward them to Dynatrace using the exporter.</p>
<h2 id="data-visualization">Data visualization<a class="headerlink" href="#data-visualization" title="Permanent link">&para;</a></h2>
<p>The logs records will be available in Dynatrace with fields documented in the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/netflowreceiver#data-format">receiver documentation√Ø¬ª¬ø</a>.</p>
<h3 id="example-dql-queries">Example DQL queries<a class="headerlink" href="#example-dql-queries" title="Permanent link">&para;</a></h3>
<ul>
<li>Fetch all NetFlow logs and summarize the bytes and packets by source and destination addresses:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>fetch logs
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>| filter otel.scope.name == &quot;otelcol/netflowreceiver&quot;
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>| summarize {bytes=sum(toDouble(flow.io.bytes)), packets=sum(toDouble(flow.io.packets))}, by: {source = source.address, destination = destination.address}
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>| fieldsAdd bytes_relative=bytes
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>| fieldsAdd packets_relative=packets
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a>
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a>
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a>| sort bytes desc
</code></pre></div>
<p><img alt="Sample NetFlow charts showing top sources, destination and conversations" src="https://dt-cdn.net/images/screenshot-2025-06-16-at-12-55-07-pm-1956-d01b596006.png" />
* Fetch the most used ports:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>fetch logs
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>| filter otel.scope.name == &quot;otelcol/netflowreceiver&quot;
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>| summarize {bytes=sum(toDouble(flow.io.bytes))}, by: {port = destination.port}
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>| sort bytes desc
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>| limit 10
</code></pre></div>
<p><img alt="A NetFlow chart showing the top used ports by bytes" src="https://dt-cdn.net/images/screenshot-2025-06-16-at-1-04-11-pm-734-9a3a884a16.png" /></p>
<h2 id="limits-and-limitations_2">Limits and limitations<a class="headerlink" href="#limits-and-limitations_2" title="Permanent link">&para;</a></h2>
<p>Logs are ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API</a> and are subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OpenTelemetry logs</a></li>
</ul>
<h2 id="related-topics_3">Related topics<a class="headerlink" href="#related-topics_3" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/filelog" title="Configure the OpenTelemetry Collector to ingest log data into Dynatrace.">Ingest data from log files</a></li>
</ul>
<hr />
<h2 id="source-prometheusmd">Source: prometheus.md<a class="headerlink" href="#source-prometheusmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Scrape data from Prometheus
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/prometheus
scraped: 2026-02-15T09:06:36.632208</p>
<hr />
<h1 id="scrape-data-from-prometheus">Scrape data from Prometheus<a class="headerlink" href="#scrape-data-from-prometheus" title="Permanent link">&para;</a></h1>
<h1 id="scrape-data-from-prometheus_1">Scrape data from Prometheus<a class="headerlink" href="#scrape-data-from-prometheus_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Dec 09, 2025</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance to scrape data from an existing Prometheus setup and import it as OTLP request into Dynatrace.</p>
<h2 id="prerequisites_6">Prerequisites<a class="headerlink" href="#prerequisites_6" title="Permanent link">&para;</a></h2>
<ul>
<li>A Prometheus instance running on port 8888</li>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/prometheusreceiver">Prometheus receiver√Ø¬ª¬ø</a>, the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/metricstarttimeprocessor">metric start time processor√Ø¬ª¬ø</a>, and the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor">cumulative-to-delta processor√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_4">Demo configuration<a class="headerlink" href="#demo-configuration_4" title="Permanent link">&para;</a></h2>
<p>Dynatrace Collector v0.41.0+</p>
<p>The example pipeline below uses the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/metricstarttimeprocessor"><code>metricstarttime</code> processor√Ø¬ª¬ø</a>, which is required to convert the metrics to delta temporality.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>receivers:
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>prometheus:
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>config:
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a>scrape_configs:
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a>- job_name: &#39;node-exporter&#39;
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a>
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a>
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a>
<a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a>scrape_interval: 60s
<a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a>
<a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a>
<a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a>
<a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a>static_configs:
<a id="__codelineno-31-26" name="__codelineno-31-26" href="#__codelineno-31-26"></a>
<a id="__codelineno-31-27" name="__codelineno-31-27" href="#__codelineno-31-27"></a>
<a id="__codelineno-31-28" name="__codelineno-31-28" href="#__codelineno-31-28"></a>
<a id="__codelineno-31-29" name="__codelineno-31-29" href="#__codelineno-31-29"></a>- targets: [&#39;prometheus-prometheus-node-exporter:9100&#39;]
<a id="__codelineno-31-30" name="__codelineno-31-30" href="#__codelineno-31-30"></a>
<a id="__codelineno-31-31" name="__codelineno-31-31" href="#__codelineno-31-31"></a>
<a id="__codelineno-31-32" name="__codelineno-31-32" href="#__codelineno-31-32"></a>
<a id="__codelineno-31-33" name="__codelineno-31-33" href="#__codelineno-31-33"></a>- job_name: opentelemetry-collector
<a id="__codelineno-31-34" name="__codelineno-31-34" href="#__codelineno-31-34"></a>
<a id="__codelineno-31-35" name="__codelineno-31-35" href="#__codelineno-31-35"></a>
<a id="__codelineno-31-36" name="__codelineno-31-36" href="#__codelineno-31-36"></a>
<a id="__codelineno-31-37" name="__codelineno-31-37" href="#__codelineno-31-37"></a>scrape_interval: 60s
<a id="__codelineno-31-38" name="__codelineno-31-38" href="#__codelineno-31-38"></a>
<a id="__codelineno-31-39" name="__codelineno-31-39" href="#__codelineno-31-39"></a>
<a id="__codelineno-31-40" name="__codelineno-31-40" href="#__codelineno-31-40"></a>
<a id="__codelineno-31-41" name="__codelineno-31-41" href="#__codelineno-31-41"></a>static_configs:
<a id="__codelineno-31-42" name="__codelineno-31-42" href="#__codelineno-31-42"></a>
<a id="__codelineno-31-43" name="__codelineno-31-43" href="#__codelineno-31-43"></a>
<a id="__codelineno-31-44" name="__codelineno-31-44" href="#__codelineno-31-44"></a>
<a id="__codelineno-31-45" name="__codelineno-31-45" href="#__codelineno-31-45"></a>- targets:
<a id="__codelineno-31-46" name="__codelineno-31-46" href="#__codelineno-31-46"></a>
<a id="__codelineno-31-47" name="__codelineno-31-47" href="#__codelineno-31-47"></a>
<a id="__codelineno-31-48" name="__codelineno-31-48" href="#__codelineno-31-48"></a>
<a id="__codelineno-31-49" name="__codelineno-31-49" href="#__codelineno-31-49"></a>- 127.0.0.1:8888
<a id="__codelineno-31-50" name="__codelineno-31-50" href="#__codelineno-31-50"></a>
<a id="__codelineno-31-51" name="__codelineno-31-51" href="#__codelineno-31-51"></a>
<a id="__codelineno-31-52" name="__codelineno-31-52" href="#__codelineno-31-52"></a>
<a id="__codelineno-31-53" name="__codelineno-31-53" href="#__codelineno-31-53"></a>processors:
<a id="__codelineno-31-54" name="__codelineno-31-54" href="#__codelineno-31-54"></a>
<a id="__codelineno-31-55" name="__codelineno-31-55" href="#__codelineno-31-55"></a>
<a id="__codelineno-31-56" name="__codelineno-31-56" href="#__codelineno-31-56"></a>
<a id="__codelineno-31-57" name="__codelineno-31-57" href="#__codelineno-31-57"></a>metricstarttime:
<a id="__codelineno-31-58" name="__codelineno-31-58" href="#__codelineno-31-58"></a>
<a id="__codelineno-31-59" name="__codelineno-31-59" href="#__codelineno-31-59"></a>
<a id="__codelineno-31-60" name="__codelineno-31-60" href="#__codelineno-31-60"></a>
<a id="__codelineno-31-61" name="__codelineno-31-61" href="#__codelineno-31-61"></a>cumulativetodelta:
<a id="__codelineno-31-62" name="__codelineno-31-62" href="#__codelineno-31-62"></a>
<a id="__codelineno-31-63" name="__codelineno-31-63" href="#__codelineno-31-63"></a>
<a id="__codelineno-31-64" name="__codelineno-31-64" href="#__codelineno-31-64"></a>
<a id="__codelineno-31-65" name="__codelineno-31-65" href="#__codelineno-31-65"></a>max_staleness: 25h
<a id="__codelineno-31-66" name="__codelineno-31-66" href="#__codelineno-31-66"></a>
<a id="__codelineno-31-67" name="__codelineno-31-67" href="#__codelineno-31-67"></a>
<a id="__codelineno-31-68" name="__codelineno-31-68" href="#__codelineno-31-68"></a>
<a id="__codelineno-31-69" name="__codelineno-31-69" href="#__codelineno-31-69"></a>exporters:
<a id="__codelineno-31-70" name="__codelineno-31-70" href="#__codelineno-31-70"></a>
<a id="__codelineno-31-71" name="__codelineno-31-71" href="#__codelineno-31-71"></a>
<a id="__codelineno-31-72" name="__codelineno-31-72" href="#__codelineno-31-72"></a>
<a id="__codelineno-31-73" name="__codelineno-31-73" href="#__codelineno-31-73"></a>otlp_http:
<a id="__codelineno-31-74" name="__codelineno-31-74" href="#__codelineno-31-74"></a>
<a id="__codelineno-31-75" name="__codelineno-31-75" href="#__codelineno-31-75"></a>
<a id="__codelineno-31-76" name="__codelineno-31-76" href="#__codelineno-31-76"></a>
<a id="__codelineno-31-77" name="__codelineno-31-77" href="#__codelineno-31-77"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-31-78" name="__codelineno-31-78" href="#__codelineno-31-78"></a>
<a id="__codelineno-31-79" name="__codelineno-31-79" href="#__codelineno-31-79"></a>
<a id="__codelineno-31-80" name="__codelineno-31-80" href="#__codelineno-31-80"></a>
<a id="__codelineno-31-81" name="__codelineno-31-81" href="#__codelineno-31-81"></a>headers:
<a id="__codelineno-31-82" name="__codelineno-31-82" href="#__codelineno-31-82"></a>
<a id="__codelineno-31-83" name="__codelineno-31-83" href="#__codelineno-31-83"></a>
<a id="__codelineno-31-84" name="__codelineno-31-84" href="#__codelineno-31-84"></a>
<a id="__codelineno-31-85" name="__codelineno-31-85" href="#__codelineno-31-85"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-31-86" name="__codelineno-31-86" href="#__codelineno-31-86"></a>
<a id="__codelineno-31-87" name="__codelineno-31-87" href="#__codelineno-31-87"></a>
<a id="__codelineno-31-88" name="__codelineno-31-88" href="#__codelineno-31-88"></a>
<a id="__codelineno-31-89" name="__codelineno-31-89" href="#__codelineno-31-89"></a>service:
<a id="__codelineno-31-90" name="__codelineno-31-90" href="#__codelineno-31-90"></a>
<a id="__codelineno-31-91" name="__codelineno-31-91" href="#__codelineno-31-91"></a>
<a id="__codelineno-31-92" name="__codelineno-31-92" href="#__codelineno-31-92"></a>
<a id="__codelineno-31-93" name="__codelineno-31-93" href="#__codelineno-31-93"></a>pipelines:
<a id="__codelineno-31-94" name="__codelineno-31-94" href="#__codelineno-31-94"></a>
<a id="__codelineno-31-95" name="__codelineno-31-95" href="#__codelineno-31-95"></a>
<a id="__codelineno-31-96" name="__codelineno-31-96" href="#__codelineno-31-96"></a>
<a id="__codelineno-31-97" name="__codelineno-31-97" href="#__codelineno-31-97"></a>metrics:
<a id="__codelineno-31-98" name="__codelineno-31-98" href="#__codelineno-31-98"></a>
<a id="__codelineno-31-99" name="__codelineno-31-99" href="#__codelineno-31-99"></a>
<a id="__codelineno-31-100" name="__codelineno-31-100" href="#__codelineno-31-100"></a>
<a id="__codelineno-31-101" name="__codelineno-31-101" href="#__codelineno-31-101"></a>receivers: [prometheus]
<a id="__codelineno-31-102" name="__codelineno-31-102" href="#__codelineno-31-102"></a>
<a id="__codelineno-31-103" name="__codelineno-31-103" href="#__codelineno-31-103"></a>
<a id="__codelineno-31-104" name="__codelineno-31-104" href="#__codelineno-31-104"></a>
<a id="__codelineno-31-105" name="__codelineno-31-105" href="#__codelineno-31-105"></a>processors: [metricstarttime, cumulativetodelta]
<a id="__codelineno-31-106" name="__codelineno-31-106" href="#__codelineno-31-106"></a>
<a id="__codelineno-31-107" name="__codelineno-31-107" href="#__codelineno-31-107"></a>
<a id="__codelineno-31-108" name="__codelineno-31-108" href="#__codelineno-31-108"></a>
<a id="__codelineno-31-109" name="__codelineno-31-109" href="#__codelineno-31-109"></a>exporters: [otlp_http]
</code></pre></div>
<p>Dynatrace Collector v0.40.0 or earlier</p>
<p>In <strong>v0.40.0</strong> of the Dynatrace Collector, you must run the Collector
with the following flag in order to keep adjusting start times in the
Prometheus receiver:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>--feature-gates=-receiver.prometheusreceiver.RemoveStartTimeAdjustment
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>receivers:
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>prometheus:
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>config:
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>scrape_configs:
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a>- job_name: &#39;node-exporter&#39;
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a>
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a>
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a>
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a>scrape_interval: 60s
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a>
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a>
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a>
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a>static_configs:
<a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a>
<a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a>
<a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a>
<a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a>- targets: [&#39;prometheus-prometheus-node-exporter:9100&#39;]
<a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a>
<a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a>
<a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a>
<a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a>- job_name: opentelemetry-collector
<a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a>
<a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a>
<a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a>
<a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a>scrape_interval: 60s
<a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a>
<a id="__codelineno-33-39" name="__codelineno-33-39" href="#__codelineno-33-39"></a>
<a id="__codelineno-33-40" name="__codelineno-33-40" href="#__codelineno-33-40"></a>
<a id="__codelineno-33-41" name="__codelineno-33-41" href="#__codelineno-33-41"></a>static_configs:
<a id="__codelineno-33-42" name="__codelineno-33-42" href="#__codelineno-33-42"></a>
<a id="__codelineno-33-43" name="__codelineno-33-43" href="#__codelineno-33-43"></a>
<a id="__codelineno-33-44" name="__codelineno-33-44" href="#__codelineno-33-44"></a>
<a id="__codelineno-33-45" name="__codelineno-33-45" href="#__codelineno-33-45"></a>- targets:
<a id="__codelineno-33-46" name="__codelineno-33-46" href="#__codelineno-33-46"></a>
<a id="__codelineno-33-47" name="__codelineno-33-47" href="#__codelineno-33-47"></a>
<a id="__codelineno-33-48" name="__codelineno-33-48" href="#__codelineno-33-48"></a>
<a id="__codelineno-33-49" name="__codelineno-33-49" href="#__codelineno-33-49"></a>- 127.0.0.1:8888
<a id="__codelineno-33-50" name="__codelineno-33-50" href="#__codelineno-33-50"></a>
<a id="__codelineno-33-51" name="__codelineno-33-51" href="#__codelineno-33-51"></a>
<a id="__codelineno-33-52" name="__codelineno-33-52" href="#__codelineno-33-52"></a>
<a id="__codelineno-33-53" name="__codelineno-33-53" href="#__codelineno-33-53"></a>processors:
<a id="__codelineno-33-54" name="__codelineno-33-54" href="#__codelineno-33-54"></a>
<a id="__codelineno-33-55" name="__codelineno-33-55" href="#__codelineno-33-55"></a>
<a id="__codelineno-33-56" name="__codelineno-33-56" href="#__codelineno-33-56"></a>
<a id="__codelineno-33-57" name="__codelineno-33-57" href="#__codelineno-33-57"></a>cumulativetodelta:
<a id="__codelineno-33-58" name="__codelineno-33-58" href="#__codelineno-33-58"></a>
<a id="__codelineno-33-59" name="__codelineno-33-59" href="#__codelineno-33-59"></a>
<a id="__codelineno-33-60" name="__codelineno-33-60" href="#__codelineno-33-60"></a>
<a id="__codelineno-33-61" name="__codelineno-33-61" href="#__codelineno-33-61"></a>max_staleness: 25h
<a id="__codelineno-33-62" name="__codelineno-33-62" href="#__codelineno-33-62"></a>
<a id="__codelineno-33-63" name="__codelineno-33-63" href="#__codelineno-33-63"></a>
<a id="__codelineno-33-64" name="__codelineno-33-64" href="#__codelineno-33-64"></a>
<a id="__codelineno-33-65" name="__codelineno-33-65" href="#__codelineno-33-65"></a>exporters:
<a id="__codelineno-33-66" name="__codelineno-33-66" href="#__codelineno-33-66"></a>
<a id="__codelineno-33-67" name="__codelineno-33-67" href="#__codelineno-33-67"></a>
<a id="__codelineno-33-68" name="__codelineno-33-68" href="#__codelineno-33-68"></a>
<a id="__codelineno-33-69" name="__codelineno-33-69" href="#__codelineno-33-69"></a>otlp_http:
<a id="__codelineno-33-70" name="__codelineno-33-70" href="#__codelineno-33-70"></a>
<a id="__codelineno-33-71" name="__codelineno-33-71" href="#__codelineno-33-71"></a>
<a id="__codelineno-33-72" name="__codelineno-33-72" href="#__codelineno-33-72"></a>
<a id="__codelineno-33-73" name="__codelineno-33-73" href="#__codelineno-33-73"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-33-74" name="__codelineno-33-74" href="#__codelineno-33-74"></a>
<a id="__codelineno-33-75" name="__codelineno-33-75" href="#__codelineno-33-75"></a>
<a id="__codelineno-33-76" name="__codelineno-33-76" href="#__codelineno-33-76"></a>
<a id="__codelineno-33-77" name="__codelineno-33-77" href="#__codelineno-33-77"></a>headers:
<a id="__codelineno-33-78" name="__codelineno-33-78" href="#__codelineno-33-78"></a>
<a id="__codelineno-33-79" name="__codelineno-33-79" href="#__codelineno-33-79"></a>
<a id="__codelineno-33-80" name="__codelineno-33-80" href="#__codelineno-33-80"></a>
<a id="__codelineno-33-81" name="__codelineno-33-81" href="#__codelineno-33-81"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-33-82" name="__codelineno-33-82" href="#__codelineno-33-82"></a>
<a id="__codelineno-33-83" name="__codelineno-33-83" href="#__codelineno-33-83"></a>
<a id="__codelineno-33-84" name="__codelineno-33-84" href="#__codelineno-33-84"></a>
<a id="__codelineno-33-85" name="__codelineno-33-85" href="#__codelineno-33-85"></a>service:
<a id="__codelineno-33-86" name="__codelineno-33-86" href="#__codelineno-33-86"></a>
<a id="__codelineno-33-87" name="__codelineno-33-87" href="#__codelineno-33-87"></a>
<a id="__codelineno-33-88" name="__codelineno-33-88" href="#__codelineno-33-88"></a>
<a id="__codelineno-33-89" name="__codelineno-33-89" href="#__codelineno-33-89"></a>pipelines:
<a id="__codelineno-33-90" name="__codelineno-33-90" href="#__codelineno-33-90"></a>
<a id="__codelineno-33-91" name="__codelineno-33-91" href="#__codelineno-33-91"></a>
<a id="__codelineno-33-92" name="__codelineno-33-92" href="#__codelineno-33-92"></a>
<a id="__codelineno-33-93" name="__codelineno-33-93" href="#__codelineno-33-93"></a>metrics:
<a id="__codelineno-33-94" name="__codelineno-33-94" href="#__codelineno-33-94"></a>
<a id="__codelineno-33-95" name="__codelineno-33-95" href="#__codelineno-33-95"></a>
<a id="__codelineno-33-96" name="__codelineno-33-96" href="#__codelineno-33-96"></a>
<a id="__codelineno-33-97" name="__codelineno-33-97" href="#__codelineno-33-97"></a>receivers: [prometheus]
<a id="__codelineno-33-98" name="__codelineno-33-98" href="#__codelineno-33-98"></a>
<a id="__codelineno-33-99" name="__codelineno-33-99" href="#__codelineno-33-99"></a>
<a id="__codelineno-33-100" name="__codelineno-33-100" href="#__codelineno-33-100"></a>
<a id="__codelineno-33-101" name="__codelineno-33-101" href="#__codelineno-33-101"></a>processors: [cumulativetodelta]
<a id="__codelineno-33-102" name="__codelineno-33-102" href="#__codelineno-33-102"></a>
<a id="__codelineno-33-103" name="__codelineno-33-103" href="#__codelineno-33-103"></a>
<a id="__codelineno-33-104" name="__codelineno-33-104" href="#__codelineno-33-104"></a>
<a id="__codelineno-33-105" name="__codelineno-33-105" href="#__codelineno-33-105"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<p>Cumulativetodelta processor recommendation</p>
<p>It is recommended to set the <code>max_staleness</code> parameter of the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor">cumulativetodelta processor√Ø¬ª¬ø</a> to a value higher than how often the collector receives metrics (e.g., how often metrics via OTLP are received, or how long the Prometheus scrape interval is). This ensures that no references to abandoned metric streams accumulate in memory over time.</p>
<h2 id="components_5">Components<a class="headerlink" href="#components_5" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_5">Receivers<a class="headerlink" href="#receivers_5" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the <code>prometheus</code> receiver as active receiver component for our Collector instance. We configure the receiver with the two jobs <code>node-exporter</code> and <code>opentelemetry-collector</code> under <code>scrape_configs</code>, to fetch data from the specified hosts once a minute (<code>scrape_interval: 60s</code>).</p>
<p>For a full list of configuration parameters, see the <a href="https://github.com/prometheus/prometheus/blob/v2.28.1/docs/configuration/configuration.md">Prometheus documentation√Ø¬ª¬ø</a>.</p>
<h3 id="processors_3">Processors<a class="headerlink" href="#processors_3" title="Permanent link">&para;</a></h3>
<p>Under <code>processors</code>, we specify the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/cumulativetodeltaprocessor"><code>cumulativetodelta</code> processor√Ø¬ª¬ø</a> to convert the metrics emitted by the Prometheus receiver to their <a href="/docs/ingest-from/opentelemetry/collector/configuration#delta-metrics" title="Configure the OpenTelemetry Collector.">delta aggregation format</a>.</p>
<p>In Dynatrace Collector v0.41.0+, we specify the
<a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/metricstarttimeprocessor"><code>metricstarttime</code>
processor√Ø¬ª¬ø</a>
to add start timestamps to the metrics. This is required to properly convert the metrics to delta temporality.</p>
<h3 id="exporters_5">Exporters<a class="headerlink" href="#exporters_5" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipeline_1">Service pipeline<a class="headerlink" href="#service-pipeline_1" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble our receiver, processor, and exporter objects into a metrics pipeline, which will execute the Prometheus jobs, convert their metrics to delta values, and ingest the data into Dynatrace.</p>
<h2 id="limits-and-limitations_3">Limits and limitations<a class="headerlink" href="#limits-and-limitations_3" title="Permanent link">&para;</a></h2>
<p>Metrics are ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API</a> and are subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
</ul>
<p>To avoid data duplication, make sure that only one OpenTelemetry Collector scrapes a given target (for example, Kafka broker or Prometheus endpoint).</p>
<p>If you run multiple collector replicas, configure each one with a different target. This prevents duplicate metrics and unnecessary ingest costs.</p>
<p>The <a href="https://opentelemetry.io/docs/platforms/kubernetes/operator/target-allocator/">Target Allocator√Ø¬ª¬ø</a> automatically distributes the Prometheus targets among a pool of Collectors.</p>
<h2 id="related-topics_4">Related topics<a class="headerlink" href="#related-topics_4" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich from Kubernetes</a></li>
</ul>
<hr />
<h2 id="source-samplingmd">Source: sampling.md<a class="headerlink" href="#source-samplingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Sample data
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/sampling
scraped: 2026-02-15T09:09:42.745387</p>
<hr />
<h1 id="sample-data">Sample data<a class="headerlink" href="#sample-data" title="Permanent link">&para;</a></h1>
<h1 id="sample-data_1">Sample data<a class="headerlink" href="#sample-data_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Published May 28, 2024</li>
</ul>
<p>A distributed application under heavy load may generate a massive amount of observability data. This data incurs generation, processing, transmission, and storage costs. However, it's often possible to use sampling√¢¬Ä¬îwhere you use only a relatively small portion of the observability data and drop the rest√¢¬Ä¬îto reduce costs and still effectively monitor your application.</p>
<p>In OpenTelemetry, there are two main sampling methods:</p>
<ul>
<li><strong>Head sampling</strong> is done within your application by the OpenTelemetry SDK, and typically involves saving a random sample of transactions.</li>
</ul>
<p>Head sampling is simple and effective, but it has important limitations. For example, because the sampling decision needs to be made at the start of the transaction, it can't be affected by anything that happens after that point.
* <strong>Tail sampling</strong> is used to make sampling decisions based on information unknown at the start of the transaction.</p>
<p>In OpenTelemetry, tail sampling is typically done with the Collector by temporarily storing the full set of monitoring data until a transaction is completed. The Collector then decides to either save or drop the transaction data based on a set of sampling policies.</p>
<p>Because tail sampling typically is not random, it's important to ensure that any calculated metrics are unbiased. This can be done by calculating metrics from the full set of transactions, as shown below, or from a separate, randomly sampled stream.</p>
<p>The following configuration example shows how to configure a Collector instance to sample trace data and import it as an OTLP request into Dynatrace. It uses the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/connector/spanmetricsconnector"><code>spanmetrics</code> connector√Ø¬ª¬ø</a> to compute service metrics from traces before sampling in order to ensure their accuracy.</p>
<h2 id="prerequisites_7">Prerequisites<a class="headerlink" href="#prerequisites_7" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/transformprocessor"><code>transform</code>√Ø¬ª¬ø</a>, <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/filterprocessor"><code>filter</code>√Ø¬ª¬ø</a>, and <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/tailsamplingprocessor"><code>tail_sampling</code>√Ø¬ª¬ø</a> processors, and the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/connector/spanmetricsconnector"><code>spanmetrics</code>√Ø¬ª¬ø</a> connector:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li>The OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">Contrib</a> distribution</li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_5">Demo configuration<a class="headerlink" href="#demo-configuration_5" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>receivers:
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>otlp:
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>protocols:
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>grpc:
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>endpoint: 0.0.0.0:4317
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a>
<a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>
<a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a>
<a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a>http:
<a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a>
<a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a>
<a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a>
<a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a>endpoint: 0.0.0.0:4318
<a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a>
<a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a>
<a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a>
<a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a>processors:
<a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a>
<a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a>
<a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a>
<a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a>tail_sampling:
<a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a>
<a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a>
<a id="__codelineno-34-36" name="__codelineno-34-36" href="#__codelineno-34-36"></a>
<a id="__codelineno-34-37" name="__codelineno-34-37" href="#__codelineno-34-37"></a># This configuration keeps errors, traces longer than 500ms, and 20% of all remaining traces.
<a id="__codelineno-34-38" name="__codelineno-34-38" href="#__codelineno-34-38"></a>
<a id="__codelineno-34-39" name="__codelineno-34-39" href="#__codelineno-34-39"></a>
<a id="__codelineno-34-40" name="__codelineno-34-40" href="#__codelineno-34-40"></a>
<a id="__codelineno-34-41" name="__codelineno-34-41" href="#__codelineno-34-41"></a># Adjust with policies of your choice.
<a id="__codelineno-34-42" name="__codelineno-34-42" href="#__codelineno-34-42"></a>
<a id="__codelineno-34-43" name="__codelineno-34-43" href="#__codelineno-34-43"></a>
<a id="__codelineno-34-44" name="__codelineno-34-44" href="#__codelineno-34-44"></a>
<a id="__codelineno-34-45" name="__codelineno-34-45" href="#__codelineno-34-45"></a>policies:
<a id="__codelineno-34-46" name="__codelineno-34-46" href="#__codelineno-34-46"></a>
<a id="__codelineno-34-47" name="__codelineno-34-47" href="#__codelineno-34-47"></a>
<a id="__codelineno-34-48" name="__codelineno-34-48" href="#__codelineno-34-48"></a>
<a id="__codelineno-34-49" name="__codelineno-34-49" href="#__codelineno-34-49"></a>- name: policy1-keep-errors
<a id="__codelineno-34-50" name="__codelineno-34-50" href="#__codelineno-34-50"></a>
<a id="__codelineno-34-51" name="__codelineno-34-51" href="#__codelineno-34-51"></a>
<a id="__codelineno-34-52" name="__codelineno-34-52" href="#__codelineno-34-52"></a>
<a id="__codelineno-34-53" name="__codelineno-34-53" href="#__codelineno-34-53"></a>type: status_code
<a id="__codelineno-34-54" name="__codelineno-34-54" href="#__codelineno-34-54"></a>
<a id="__codelineno-34-55" name="__codelineno-34-55" href="#__codelineno-34-55"></a>
<a id="__codelineno-34-56" name="__codelineno-34-56" href="#__codelineno-34-56"></a>
<a id="__codelineno-34-57" name="__codelineno-34-57" href="#__codelineno-34-57"></a>status_code: {status_codes: [ERROR, UNSET]}
<a id="__codelineno-34-58" name="__codelineno-34-58" href="#__codelineno-34-58"></a>
<a id="__codelineno-34-59" name="__codelineno-34-59" href="#__codelineno-34-59"></a>
<a id="__codelineno-34-60" name="__codelineno-34-60" href="#__codelineno-34-60"></a>
<a id="__codelineno-34-61" name="__codelineno-34-61" href="#__codelineno-34-61"></a>- name: policy2-keep-slow-traces
<a id="__codelineno-34-62" name="__codelineno-34-62" href="#__codelineno-34-62"></a>
<a id="__codelineno-34-63" name="__codelineno-34-63" href="#__codelineno-34-63"></a>
<a id="__codelineno-34-64" name="__codelineno-34-64" href="#__codelineno-34-64"></a>
<a id="__codelineno-34-65" name="__codelineno-34-65" href="#__codelineno-34-65"></a>type: latency
<a id="__codelineno-34-66" name="__codelineno-34-66" href="#__codelineno-34-66"></a>
<a id="__codelineno-34-67" name="__codelineno-34-67" href="#__codelineno-34-67"></a>
<a id="__codelineno-34-68" name="__codelineno-34-68" href="#__codelineno-34-68"></a>
<a id="__codelineno-34-69" name="__codelineno-34-69" href="#__codelineno-34-69"></a>latency: {threshold_ms: 500}
<a id="__codelineno-34-70" name="__codelineno-34-70" href="#__codelineno-34-70"></a>
<a id="__codelineno-34-71" name="__codelineno-34-71" href="#__codelineno-34-71"></a>
<a id="__codelineno-34-72" name="__codelineno-34-72" href="#__codelineno-34-72"></a>
<a id="__codelineno-34-73" name="__codelineno-34-73" href="#__codelineno-34-73"></a>- name: policy3-keep-random-sample
<a id="__codelineno-34-74" name="__codelineno-34-74" href="#__codelineno-34-74"></a>
<a id="__codelineno-34-75" name="__codelineno-34-75" href="#__codelineno-34-75"></a>
<a id="__codelineno-34-76" name="__codelineno-34-76" href="#__codelineno-34-76"></a>
<a id="__codelineno-34-77" name="__codelineno-34-77" href="#__codelineno-34-77"></a>type: probabilistic
<a id="__codelineno-34-78" name="__codelineno-34-78" href="#__codelineno-34-78"></a>
<a id="__codelineno-34-79" name="__codelineno-34-79" href="#__codelineno-34-79"></a>
<a id="__codelineno-34-80" name="__codelineno-34-80" href="#__codelineno-34-80"></a>
<a id="__codelineno-34-81" name="__codelineno-34-81" href="#__codelineno-34-81"></a>probabilistic: {sampling_percentage: 20}
<a id="__codelineno-34-82" name="__codelineno-34-82" href="#__codelineno-34-82"></a>
<a id="__codelineno-34-83" name="__codelineno-34-83" href="#__codelineno-34-83"></a>
<a id="__codelineno-34-84" name="__codelineno-34-84" href="#__codelineno-34-84"></a>
<a id="__codelineno-34-85" name="__codelineno-34-85" href="#__codelineno-34-85"></a>decision_wait: 30s
<a id="__codelineno-34-86" name="__codelineno-34-86" href="#__codelineno-34-86"></a>
<a id="__codelineno-34-87" name="__codelineno-34-87" href="#__codelineno-34-87"></a>
<a id="__codelineno-34-88" name="__codelineno-34-88" href="#__codelineno-34-88"></a>
<a id="__codelineno-34-89" name="__codelineno-34-89" href="#__codelineno-34-89"></a>connectors:
<a id="__codelineno-34-90" name="__codelineno-34-90" href="#__codelineno-34-90"></a>
<a id="__codelineno-34-91" name="__codelineno-34-91" href="#__codelineno-34-91"></a>
<a id="__codelineno-34-92" name="__codelineno-34-92" href="#__codelineno-34-92"></a>
<a id="__codelineno-34-93" name="__codelineno-34-93" href="#__codelineno-34-93"></a>spanmetrics:
<a id="__codelineno-34-94" name="__codelineno-34-94" href="#__codelineno-34-94"></a>
<a id="__codelineno-34-95" name="__codelineno-34-95" href="#__codelineno-34-95"></a>
<a id="__codelineno-34-96" name="__codelineno-34-96" href="#__codelineno-34-96"></a>
<a id="__codelineno-34-97" name="__codelineno-34-97" href="#__codelineno-34-97"></a>aggregation_temporality: &quot;AGGREGATION_TEMPORALITY_DELTA&quot;
<a id="__codelineno-34-98" name="__codelineno-34-98" href="#__codelineno-34-98"></a>
<a id="__codelineno-34-99" name="__codelineno-34-99" href="#__codelineno-34-99"></a>
<a id="__codelineno-34-100" name="__codelineno-34-100" href="#__codelineno-34-100"></a>
<a id="__codelineno-34-101" name="__codelineno-34-101" href="#__codelineno-34-101"></a>namespace: &quot;requests&quot;
<a id="__codelineno-34-102" name="__codelineno-34-102" href="#__codelineno-34-102"></a>
<a id="__codelineno-34-103" name="__codelineno-34-103" href="#__codelineno-34-103"></a>
<a id="__codelineno-34-104" name="__codelineno-34-104" href="#__codelineno-34-104"></a>
<a id="__codelineno-34-105" name="__codelineno-34-105" href="#__codelineno-34-105"></a>metrics_flush_interval: 15s
<a id="__codelineno-34-106" name="__codelineno-34-106" href="#__codelineno-34-106"></a>
<a id="__codelineno-34-107" name="__codelineno-34-107" href="#__codelineno-34-107"></a>
<a id="__codelineno-34-108" name="__codelineno-34-108" href="#__codelineno-34-108"></a>
<a id="__codelineno-34-109" name="__codelineno-34-109" href="#__codelineno-34-109"></a>exporters:
<a id="__codelineno-34-110" name="__codelineno-34-110" href="#__codelineno-34-110"></a>
<a id="__codelineno-34-111" name="__codelineno-34-111" href="#__codelineno-34-111"></a>
<a id="__codelineno-34-112" name="__codelineno-34-112" href="#__codelineno-34-112"></a>
<a id="__codelineno-34-113" name="__codelineno-34-113" href="#__codelineno-34-113"></a>otlp_http:
<a id="__codelineno-34-114" name="__codelineno-34-114" href="#__codelineno-34-114"></a>
<a id="__codelineno-34-115" name="__codelineno-34-115" href="#__codelineno-34-115"></a>
<a id="__codelineno-34-116" name="__codelineno-34-116" href="#__codelineno-34-116"></a>
<a id="__codelineno-34-117" name="__codelineno-34-117" href="#__codelineno-34-117"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-34-118" name="__codelineno-34-118" href="#__codelineno-34-118"></a>
<a id="__codelineno-34-119" name="__codelineno-34-119" href="#__codelineno-34-119"></a>
<a id="__codelineno-34-120" name="__codelineno-34-120" href="#__codelineno-34-120"></a>
<a id="__codelineno-34-121" name="__codelineno-34-121" href="#__codelineno-34-121"></a>headers:
<a id="__codelineno-34-122" name="__codelineno-34-122" href="#__codelineno-34-122"></a>
<a id="__codelineno-34-123" name="__codelineno-34-123" href="#__codelineno-34-123"></a>
<a id="__codelineno-34-124" name="__codelineno-34-124" href="#__codelineno-34-124"></a>
<a id="__codelineno-34-125" name="__codelineno-34-125" href="#__codelineno-34-125"></a>Authorization: Api-Token ${env:DT_API_TOKEN}
<a id="__codelineno-34-126" name="__codelineno-34-126" href="#__codelineno-34-126"></a>
<a id="__codelineno-34-127" name="__codelineno-34-127" href="#__codelineno-34-127"></a>
<a id="__codelineno-34-128" name="__codelineno-34-128" href="#__codelineno-34-128"></a>
<a id="__codelineno-34-129" name="__codelineno-34-129" href="#__codelineno-34-129"></a>service:
<a id="__codelineno-34-130" name="__codelineno-34-130" href="#__codelineno-34-130"></a>
<a id="__codelineno-34-131" name="__codelineno-34-131" href="#__codelineno-34-131"></a>
<a id="__codelineno-34-132" name="__codelineno-34-132" href="#__codelineno-34-132"></a>
<a id="__codelineno-34-133" name="__codelineno-34-133" href="#__codelineno-34-133"></a>pipelines:
<a id="__codelineno-34-134" name="__codelineno-34-134" href="#__codelineno-34-134"></a>
<a id="__codelineno-34-135" name="__codelineno-34-135" href="#__codelineno-34-135"></a>
<a id="__codelineno-34-136" name="__codelineno-34-136" href="#__codelineno-34-136"></a>
<a id="__codelineno-34-137" name="__codelineno-34-137" href="#__codelineno-34-137"></a>traces:
<a id="__codelineno-34-138" name="__codelineno-34-138" href="#__codelineno-34-138"></a>
<a id="__codelineno-34-139" name="__codelineno-34-139" href="#__codelineno-34-139"></a>
<a id="__codelineno-34-140" name="__codelineno-34-140" href="#__codelineno-34-140"></a>
<a id="__codelineno-34-141" name="__codelineno-34-141" href="#__codelineno-34-141"></a>receivers: [otlp]
<a id="__codelineno-34-142" name="__codelineno-34-142" href="#__codelineno-34-142"></a>
<a id="__codelineno-34-143" name="__codelineno-34-143" href="#__codelineno-34-143"></a>
<a id="__codelineno-34-144" name="__codelineno-34-144" href="#__codelineno-34-144"></a>
<a id="__codelineno-34-145" name="__codelineno-34-145" href="#__codelineno-34-145"></a>processors: [tail_sampling]
<a id="__codelineno-34-146" name="__codelineno-34-146" href="#__codelineno-34-146"></a>
<a id="__codelineno-34-147" name="__codelineno-34-147" href="#__codelineno-34-147"></a>
<a id="__codelineno-34-148" name="__codelineno-34-148" href="#__codelineno-34-148"></a>
<a id="__codelineno-34-149" name="__codelineno-34-149" href="#__codelineno-34-149"></a>exporters: [otlp_http]
<a id="__codelineno-34-150" name="__codelineno-34-150" href="#__codelineno-34-150"></a>
<a id="__codelineno-34-151" name="__codelineno-34-151" href="#__codelineno-34-151"></a>
<a id="__codelineno-34-152" name="__codelineno-34-152" href="#__codelineno-34-152"></a>
<a id="__codelineno-34-153" name="__codelineno-34-153" href="#__codelineno-34-153"></a>traces/spanmetrics:
<a id="__codelineno-34-154" name="__codelineno-34-154" href="#__codelineno-34-154"></a>
<a id="__codelineno-34-155" name="__codelineno-34-155" href="#__codelineno-34-155"></a>
<a id="__codelineno-34-156" name="__codelineno-34-156" href="#__codelineno-34-156"></a>
<a id="__codelineno-34-157" name="__codelineno-34-157" href="#__codelineno-34-157"></a>receivers: [otlp]
<a id="__codelineno-34-158" name="__codelineno-34-158" href="#__codelineno-34-158"></a>
<a id="__codelineno-34-159" name="__codelineno-34-159" href="#__codelineno-34-159"></a>
<a id="__codelineno-34-160" name="__codelineno-34-160" href="#__codelineno-34-160"></a>
<a id="__codelineno-34-161" name="__codelineno-34-161" href="#__codelineno-34-161"></a>processors: []
<a id="__codelineno-34-162" name="__codelineno-34-162" href="#__codelineno-34-162"></a>
<a id="__codelineno-34-163" name="__codelineno-34-163" href="#__codelineno-34-163"></a>
<a id="__codelineno-34-164" name="__codelineno-34-164" href="#__codelineno-34-164"></a>
<a id="__codelineno-34-165" name="__codelineno-34-165" href="#__codelineno-34-165"></a>exporters: [spanmetrics]
<a id="__codelineno-34-166" name="__codelineno-34-166" href="#__codelineno-34-166"></a>
<a id="__codelineno-34-167" name="__codelineno-34-167" href="#__codelineno-34-167"></a>
<a id="__codelineno-34-168" name="__codelineno-34-168" href="#__codelineno-34-168"></a>
<a id="__codelineno-34-169" name="__codelineno-34-169" href="#__codelineno-34-169"></a>metrics:
<a id="__codelineno-34-170" name="__codelineno-34-170" href="#__codelineno-34-170"></a>
<a id="__codelineno-34-171" name="__codelineno-34-171" href="#__codelineno-34-171"></a>
<a id="__codelineno-34-172" name="__codelineno-34-172" href="#__codelineno-34-172"></a>
<a id="__codelineno-34-173" name="__codelineno-34-173" href="#__codelineno-34-173"></a>receivers: [spanmetrics]
<a id="__codelineno-34-174" name="__codelineno-34-174" href="#__codelineno-34-174"></a>
<a id="__codelineno-34-175" name="__codelineno-34-175" href="#__codelineno-34-175"></a>
<a id="__codelineno-34-176" name="__codelineno-34-176" href="#__codelineno-34-176"></a>
<a id="__codelineno-34-177" name="__codelineno-34-177" href="#__codelineno-34-177"></a>processors: []
<a id="__codelineno-34-178" name="__codelineno-34-178" href="#__codelineno-34-178"></a>
<a id="__codelineno-34-179" name="__codelineno-34-179" href="#__codelineno-34-179"></a>
<a id="__codelineno-34-180" name="__codelineno-34-180" href="#__codelineno-34-180"></a>
<a id="__codelineno-34-181" name="__codelineno-34-181" href="#__codelineno-34-181"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_6">Components<a class="headerlink" href="#components_6" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_6">Receivers<a class="headerlink" href="#receivers_6" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the standard <code>otlp</code> receiver as active receiver component for our Collector instance and configure it to accept OTLP requests on gRPC and HTTP.</p>
<h3 id="processors_4">Processors<a class="headerlink" href="#processors_4" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/processor/tailsamplingprocessor"><code>tail_sampling</code>√Ø¬ª¬ø</a> to sample distributed traces based on properties of the trace.</li>
</ul>
<h3 id="connectors">Connectors<a class="headerlink" href="#connectors" title="Permanent link">&para;</a></h3>
<p>Under <code>connectors</code>, we specify the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/connector/spanmetricsconnector"><code>spanmetrics</code> connector√Ø¬ª¬ø</a> to compute service metrics from spans.</p>
<h3 id="exporters_6">Exporters<a class="headerlink" href="#exporters_6" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_4">Service pipelines<a class="headerlink" href="#service-pipelines_4" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we assemble three pipelines:</p>
<ul>
<li><code>traces</code> assembles the OTLP receiver, tail sampling processor, and <code>otlp_http</code> exporter to send sampled spans to Dynatrace.</li>
<li><code>traces/spanmetrics</code> uses the same OTLP receiver and the <code>spanmetrics</code> connector to compute service metrics from received spans, without sampling, and forwards the computed metrics to <code>metrics</code>.</li>
<li><code>metrics</code> uses the <code>transform</code>, <code>filter</code>, and <code>transform/spanmetrics</code> processors to format metrics for Dynatrace metric ingest before sending metrics to Dynatrace using the <code>otlp_http</code> exporter.</li>
</ul>
<h2 id="opentelemetry-sampling-considerations">OpenTelemetry sampling considerations<a class="headerlink" href="#opentelemetry-sampling-considerations" title="Permanent link">&para;</a></h2>
<h3 id="mixed-mode-sampling">Mixed-mode sampling<a class="headerlink" href="#mixed-mode-sampling" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry and OneAgent use incompatible approaches to sampling that should not be mixed. If a distributed trace, which may include multiple applications and services, only partially utilizes either method, it's likely to result in inconsistent results and incomplete distributed traces. Each distributed trace should be sampled by only one of the methods to ensure it's captured in its entirety.</p>
<h3 id="trace-derived-service-metrics">Trace-derived service metrics<a class="headerlink" href="#trace-derived-service-metrics" title="Permanent link">&para;</a></h3>
<p>Dynatrace trace-derived metrics are calculated from trace data after it's ingested into Dynatrace.</p>
<p>If OpenTelemetry traces are sampled, the trace-derived metrics are calculated only from the sampled subset of trace data. This means that some trace-derived metrics might be biased or incorrect.</p>
<p>For example, a probabilistic sampler that saves 5% of traffic will result in a throughput metric that shows 5% of the actual throughput. If you use OpenTelemetry tail-based sampling to also capture 100% of slow or error traces, your service metrics will not only show incorrect throughput, but will also incorrectly bias error rates and response times.</p>
<p>To mitigate this, if you want to sample OpenTelemetry traces, you should calculate service metrics before sampling and use those metrics rather than the trace-derived metrics calculated by Dynatrace. If you're using the Collector for sampling, trace-derived metrics should be calculated by the Collector before applying sampling, or by the SDK. This can be done with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/connector/spanmetricsconnector"><code>spanmetrics</code> connector√Ø¬ª¬ø</a> as shown in the example above.</p>
<h2 id="limits-and-limitations_4">Limits and limitations<a class="headerlink" href="#limits-and-limitations_4" title="Permanent link">&para;</a></h2>
<p>Data is ingested using the OpenTelemetry protocol (OTLP) via the <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP APIs</a> and is subject to the API's limits and restrictions.
For more information see:</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">OpenTelemetry metrics limitations</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#dynatrace-mapping" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">Dynatrace metrics mapping</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OpenTelemetry logs</a></li>
</ul>
<h2 id="related-topics_5">Related topics<a class="headerlink" href="#related-topics_5" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/batch" title="Configure the OpenTelemetry Collector to send data in batches to the Dynatrace backend.">Batch OTLP requests</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/histograms" title="Configure the OpenTelemetry Collector to compute histogram summaries.">Compute histogram summaries</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/memory" title="Configure the OpenTelemetry Collector to respect memory limits and not use excessive system resources.">Apply memory limits</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/multi-export" title="Configure the OpenTelemetry Collector to send data to more than one backend.">Send data to multiple backends</a></li>
</ul>
<hr />
<h2 id="source-zipkinmd">Source: zipkin.md<a class="headerlink" href="#source-zipkinmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest data from Zipkin
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases/zipkin
scraped: 2026-02-15T09:12:58.667496</p>
<hr />
<h1 id="ingest-data-from-zipkin">Ingest data from Zipkin<a class="headerlink" href="#ingest-data-from-zipkin" title="Permanent link">&para;</a></h1>
<h1 id="ingest-data-from-zipkin_1">Ingest data from Zipkin<a class="headerlink" href="#ingest-data-from-zipkin_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Published Oct 11, 2023</li>
</ul>
<p>The following configuration example shows how you configure a Collector instance to accept Zipkin data, transform it to OTLP, and send it to the Dynatrace backend.</p>
<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h2>
<h3 id="b3-requirements">B3 requirements<a class="headerlink" href="#b3-requirements" title="Permanent link">&para;</a></h3>
<p>Pay attention to the B3 requirements, to avoid having spans being dropped because of shared and duplicated span identifiers. See the <a href="https://opentelemetry.io/docs/specs/otel/context/api-propagators/#b3-requirements">propagator specification√Ø¬ª¬ø</a> for more details.</p>
<p>For example, if you are using <a href="https://cloud.spring.io/spring-cloud-sleuth/2.1.x/multi/multi__propagation.html#_extracting_a_propagated_context">Spring Code Sleuth√Ø¬ª¬ø</a>, you can use the following configuration setting to disable span sharing:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>spring:
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>sleuth:
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>supports-join: false
</code></pre></div>
<h3 id="single-collector-routing">Single Collector routing<a class="headerlink" href="#single-collector-routing" title="Permanent link">&para;</a></h3>
<p>Make sure to route all related Zipkin/B3 spans via the same Collector instance, to guarantee full ingestion. If you ingest some spans using OneAgent alone, they may not be properly linked and not show up as connected to your Zipkin spans.</p>
<h2 id="prerequisites_8">Prerequisites<a class="headerlink" href="#prerequisites_8" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>One of the following Collector distributions with the <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/zipkinreceiver">Zipkin receiver√Ø¬ª¬ø</a>:</p>
</li>
<li>
<p>The <a href="/docs/ingest-from/opentelemetry/collector#dt-collector-dist" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a></p>
</li>
<li>OpenTelemetry <a href="/docs/ingest-from/opentelemetry/collector#collector-contrib" title="Learn about the Dynatrace Collector.">Contrib</a></li>
<li>A <a href="/docs/ingest-from/opentelemetry/collector#collector-builder" title="Learn about the Dynatrace Collector.">custom Builder version</a></li>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace API endpoint URL</a> to which the data should be exported</li>
<li>An <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a> with the relevant access scope (only required for SaaS and ActiveGate)</li>
</ul>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/deployment" title="Deploy the Dynatrace Collector.">Collector Deployment</a> and <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a> on how to set up your Collector with the configuration below.</p>
<h2 id="demo-configuration_6">Demo configuration<a class="headerlink" href="#demo-configuration_6" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>receivers:
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>zipkin:
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>exporters:
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>otlp_http:
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a>
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a>endpoint: ${env:DT_ENDPOINT}
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a>
<a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a>
<a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a>headers:
<a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a>
<a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a>
<a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a>
<a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a>Authorization: &quot;Api-Token ${env:DT_API_TOKEN}&quot;
<a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a>
<a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a>
<a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a>
<a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a>service:
<a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a>
<a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a>
<a id="__codelineno-36-32" name="__codelineno-36-32" href="#__codelineno-36-32"></a>
<a id="__codelineno-36-33" name="__codelineno-36-33" href="#__codelineno-36-33"></a>pipelines:
<a id="__codelineno-36-34" name="__codelineno-36-34" href="#__codelineno-36-34"></a>
<a id="__codelineno-36-35" name="__codelineno-36-35" href="#__codelineno-36-35"></a>
<a id="__codelineno-36-36" name="__codelineno-36-36" href="#__codelineno-36-36"></a>
<a id="__codelineno-36-37" name="__codelineno-36-37" href="#__codelineno-36-37"></a>traces:
<a id="__codelineno-36-38" name="__codelineno-36-38" href="#__codelineno-36-38"></a>
<a id="__codelineno-36-39" name="__codelineno-36-39" href="#__codelineno-36-39"></a>
<a id="__codelineno-36-40" name="__codelineno-36-40" href="#__codelineno-36-40"></a>
<a id="__codelineno-36-41" name="__codelineno-36-41" href="#__codelineno-36-41"></a>receivers: [zipkin]
<a id="__codelineno-36-42" name="__codelineno-36-42" href="#__codelineno-36-42"></a>
<a id="__codelineno-36-43" name="__codelineno-36-43" href="#__codelineno-36-43"></a>
<a id="__codelineno-36-44" name="__codelineno-36-44" href="#__codelineno-36-44"></a>
<a id="__codelineno-36-45" name="__codelineno-36-45" href="#__codelineno-36-45"></a>processors: []
<a id="__codelineno-36-46" name="__codelineno-36-46" href="#__codelineno-36-46"></a>
<a id="__codelineno-36-47" name="__codelineno-36-47" href="#__codelineno-36-47"></a>
<a id="__codelineno-36-48" name="__codelineno-36-48" href="#__codelineno-36-48"></a>
<a id="__codelineno-36-49" name="__codelineno-36-49" href="#__codelineno-36-49"></a>exporters: [otlp_http]
</code></pre></div>
<p>Configuration validation</p>
<p><a href="/docs/ingest-from/opentelemetry/collector/configuration#validate" title="Configure the OpenTelemetry Collector.">Validate your settings</a> to avoid any configuration issues.</p>
<h2 id="components_7">Components<a class="headerlink" href="#components_7" title="Permanent link">&para;</a></h2>
<p>For our configuration, we configure the following components.</p>
<h3 id="receivers_7">Receivers<a class="headerlink" href="#receivers_7" title="Permanent link">&para;</a></h3>
<p>Under <code>receivers</code>, we specify the <code>zipkin</code> receiver as active receiver component for our Collector instance.</p>
<p>The Zipkin receiver can be customized with <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/v0.145.0/receiver/zipkinreceiver">a few more attributes√Ø¬ª¬ø</a>, which we leave with their default values in our example.</p>
<h3 id="exporters_7">Exporters<a class="headerlink" href="#exporters_7" title="Permanent link">&para;</a></h3>
<p>Under <code>exporters</code>, we specify the default <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/exporter/otlphttpexporter"><code>otlp_http</code> exporter√Ø¬ª¬ø</a> and configure it with our Dynatrace API URL and the required authentication token.</p>
<p>For this purpose, we set the following two environment variables and reference them in the configuration values for <code>endpoint</code> and <code>Authorization</code>.</p>
<ul>
<li><code>DT_ENDPOINT</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">base URL of the Dynatrace API endpoint</a> (for example, <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code>)</li>
<li><code>DT_API_TOKEN</code> contains the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">API token</a></li>
</ul>
<h3 id="service-pipelines_5">Service pipelines<a class="headerlink" href="#service-pipelines_5" title="Permanent link">&para;</a></h3>
<p>Under <code>service</code>, we eventually assemble our receiver and exporter objects into a traces pipeline, which will handle our Zipkin transformation to OTLP.</p>
<h2 id="related-topics_6">Related topics<a class="headerlink" href="#related-topics_6" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Enrich from Kubernetes</a></li>
</ul>
<hr />
<h2 id="source-use-casesmd">Source: use-cases.md<a class="headerlink" href="#source-use-casesmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Collector use cases
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector/use-cases
scraped: 2026-02-15T21:29:24.034118</p>
<hr />
<h1 id="collector-use-cases">Collector use cases<a class="headerlink" href="#collector-use-cases" title="Permanent link">&para;</a></h1>
<h1 id="collector-use-cases_1">Collector use cases<a class="headerlink" href="#collector-use-cases_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Dec 09, 2025</li>
</ul>
<h2 id="recommended-configurations">Recommended configurations<a class="headerlink" href="#recommended-configurations" title="Permanent link">&para;</a></h2>
<p>When using the Collector, we recommend using the following features in the basic configuration, in addition to components specific to your use case.</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/batch" title="Configure the OpenTelemetry Collector to send data in batches to the Dynatrace backend.">Batching</a>√¢¬Ä¬îto improve network performance and throughput</li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/memory" title="Configure the OpenTelemetry Collector to respect memory limits and not use excessive system resources.">Memory Limitation</a>√¢¬Ä¬îto avoid memory allocation related issues</li>
<li><a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">Kubernetes Enrichment</a>√¢¬Ä¬îto include Kubernetes-specific information in your requests and support data correlation in the Dynatrace backend</li>
</ul>
<h2 id="use-cases">Use cases<a class="headerlink" href="#use-cases" title="Permanent link">&para;</a></h2>
<p>[### Batching</p>
<p>Configure the OpenTelemetry Collector to send data in batches to the Dynatrace backend.](/docs/ingest-from/opentelemetry/collector/use-cases/batch "Configure the OpenTelemetry Collector to send data in batches to the Dynatrace backend.")[### Enrich with OneAgent</p>
<p>Configure the OpenTelemetry Collector to enrich data with OneAgent.](/docs/ingest-from/opentelemetry/collector/use-cases/enrich "Configure the OpenTelemetry Collector to enrich OTLP requests.")[<img alt="FluentD" src="https://dt-cdn.net/images/untitled-300-c72685245e.png" title="FluentD" /></p>
<h3 id="fluentd">FluentD<a class="headerlink" href="#fluentd" title="Permanent link">&para;</a></h3>
<p>Configure the OpenTelemetry Collector to ingest data from FluentD.](/docs/ingest-from/opentelemetry/collector/use-cases/fluentd "Configure the OpenTelemetry Collector to ingest FluentD data.")[### gRPC to HTTP</p>
<p>Configure the OpenTelemetry Collector to transform a gRPC OTLP request to HTTP.](/docs/ingest-from/opentelemetry/collector/use-cases/grpc "Configure the OpenTelemetry Collector to transform a gRPC OTLP request to HTTP.")[### Histogram summaries</p>
<p>Configure the OpenTelemetry Collector to compute bucket summaries for histogram metrics.](/docs/ingest-from/opentelemetry/collector/use-cases/histograms "Configure the OpenTelemetry Collector to compute histogram summaries.")[<img alt="Jaeger" src="https://dt-cdn.net/images/jaeger-300-3d21c8cbd4-300-2d7104a994.png" title="Jaeger" /></p>
<h3 id="jaeger">Jaeger<a class="headerlink" href="#jaeger" title="Permanent link">&para;</a></h3>
<p>Configure the OpenTelemetry Collector to ingest and transform Jaeger data into Dynatrace.](/docs/ingest-from/opentelemetry/collector/use-cases/jaeger "Configure the OpenTelemetry Collector to ingest and convert Jaeger data into Dynatrace.")[### Kafka</p>
<p>Configure the OpenTelemetry Collector to integrate with Apache Kafka.](/docs/ingest-from/opentelemetry/collector/use-cases/kafka "Configure the OpenTelemetry Collector to ingest data via Kafka into Dynatrace.")[### Kubernetes Enrichment</p>
<p>Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.](/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes "Configure the OpenTelemetry Collector to ingest Kubernetes data into Dynatrace.")[### Log files</p>
<p>Configure the OpenTelemetry Collector to ingest log files.](/docs/ingest-from/opentelemetry/collector/use-cases/filelog "Configure the OpenTelemetry Collector to ingest log data into Dynatrace.")[### Mask sensitive data</p>
<p>Configure the OpenTelemetry Collector to mask sensitive data before forwarding to Dynatrace.](/docs/ingest-from/opentelemetry/collector/use-cases/redact "Configure the OpenTelemetry Collector to mask sensitive data before forwarding to Dynatrace.")[### Memory Limitation</p>
<p>Configure the OpenTelemetry Collector to respect memory limits and not use excessive system resources.](/docs/ingest-from/opentelemetry/collector/use-cases/memory "Configure the OpenTelemetry Collector to respect memory limits and not use excessive system resources.")[### Multiple backends</p>
<p>Configure the OpenTelemetry Collector to export to multiple backends.](/docs/ingest-from/opentelemetry/collector/use-cases/multi-export "Configure the OpenTelemetry Collector to send data to more than one backend.")[### NetFlow</p>
<p>Configure the OpenTelemetry Collector to ingest NetFlow packets.](/docs/ingest-from/opentelemetry/collector/use-cases/netflow "Configure the OpenTelemetry Collector to ingest NetFlow data.")[<img alt="Prometheus" src="https://dt-cdn.net/images/prometheus-logo-grey-e85840f462-8e7b2967a6.svg" title="Prometheus" /></p>
<h3 id="prometheus">Prometheus<a class="headerlink" href="#prometheus" title="Permanent link">&para;</a></h3>
<p>Configure the OpenTelemetry Collector to scrape your Prometheus data.](/docs/ingest-from/opentelemetry/collector/use-cases/prometheus "Configure the OpenTelemetry Collector to scrape your Prometheus data.")[### Sampling</p>
<p>Configure the OpenTelemetry Collector to sample distributed traces.](/docs/ingest-from/opentelemetry/collector/use-cases/sampling "Configure the OpenTelemetry Collector to sample data using the <code>tail_sampling</code> processor.")[### StatsD</p>
<p>Configure the OpenTelemetry Collector to ingest StatsD data.](/docs/ingest-from/opentelemetry/collector/use-cases/statsd "Configure the OpenTelemetry Collector to ingest StatsD data.")[### Syslog</p>
<p>Configure the OpenTelemetry Collector to ingest syslog data.](/docs/ingest-from/opentelemetry/collector/use-cases/syslog "Configure the OpenTelemetry Collector to ingest syslog data into Dynatrace.")[### Transforming and filtering</p>
<p>Configure the OpenTelemetry Collector to add, transform, and drop OpenTelemetry data.](/docs/ingest-from/opentelemetry/collector/use-cases/transform "Configure the OpenTelemetry Collector to add, transform, and drop OpenTelemetry data.")[<img alt="Zipkin" src="https://dt-cdn.net/images/zipkin-gray-300-7e572e6589.png" title="Zipkin" /></p>
<h3 id="zipkin">Zipkin<a class="headerlink" href="#zipkin" title="Permanent link">&para;</a></h3>
<p>Configure the OpenTelemetry Collector to ingest and transform Zipkin data into Dynatrace.](/docs/ingest-from/opentelemetry/collector/use-cases/zipkin "Configure the OpenTelemetry Collector to ingest and convert Zipkin data into Dynatrace.")</p>
<hr />
<h2 id="source-collectormd">Source: collector.md<a class="headerlink" href="#source-collectormd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Dynatrace Collector
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/collector
scraped: 2026-02-15T21:16:05.099077</p>
<hr />
<h1 id="dynatrace-collector">Dynatrace Collector<a class="headerlink" href="#dynatrace-collector" title="Permanent link">&para;</a></h1>
<h1 id="dynatrace-collector_1">Dynatrace Collector<a class="headerlink" href="#dynatrace-collector_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>5-min read</li>
<li>Updated on Nov 17, 2025</li>
</ul>
<p>The Collector is a network service application that you can use to batch and transform telemetry data. It acts as a proxy and can receive OTLP requests as well as data from other sources, transform these requests according to defined rules, and forward them to the backend.</p>
<p><img alt="OpenTelemetry Collector Overview" src="https://dt-cdn.net/images/collector-1062-e6ec25a6ee.png" /></p>
<h2 id="advantages-of-using-the-collector">Advantages of using the Collector<a class="headerlink" href="#advantages-of-using-the-collector" title="Permanent link">&para;</a></h2>
<p>In general, using the Collector alongside your service can be an advantage, since it allows your service to offload data quickly and takes care of additional handling such as retries, batching, encryption, or sensitive data filtering. It centralizes common processing tasks instead of duplicating them in each application.</p>
<p>You should use the Collector if:</p>
<ul>
<li>You need to collect data from different data sources in different formats and you need an easy way to make them all deliver their data to a backend that would otherwise be incompatible.</li>
<li>You need to have common processing of attributes on your telemetry data.</li>
</ul>
<p>The Collector is a relatively lightweight component, so teams can deploy their own to avoid sharing the same configuration.</p>
<p>The Collector is configured in a single YAML file. This eliminates the need to browse through multiple files and reduces maintenance. You can find more information on the configuration at <a href="/docs/ingest-from/opentelemetry/collector/configuration" title="Configure the OpenTelemetry Collector.">Collector Configuration</a>.</p>
<h2 id="distributions">Distributions<a class="headerlink" href="#distributions" title="Permanent link">&para;</a></h2>
<p>The Collector comes in different distribution flavors and with different setup and deployment options.</p>
<h3 id="dynatrace-collector_2">Dynatrace Collector<a class="headerlink" href="#dynatrace-collector_2" title="Permanent link">&para;</a></h3>
<p>The Dynatrace distribution of the OpenTelemetry Collector is a customized Collector build provided by Dynatrace and tailored for typical use cases in a Dynatrace context. It ships with an optimized and verified set of Collector components.</p>
<p>Advantages of Dynatrace Collector</p>
<p>The Dynatrace Collector offers the following advantages compared to the OpenTelemetry Collector distributions:</p>
<ul>
<li>Covered by Dynatrace support (x86-64 and ARM64)</li>
<li>Collector components verified by Dynatrace</li>
<li>Security patches independent of OpenTelemetry Collector releases</li>
</ul>
<p>You can download the Dynatrace Collector release from <a href="https://github.com/Dynatrace/dynatrace-otel-collector/releases/v0.44.0">our repository√Ø¬ª¬ø</a>.</p>
<p>It is also available as a container image at <a href="https://github.com/Dynatrace/dynatrace-otel-collector/pkgs/container/dynatrace-otel-collector%2Fdynatrace-otel-collector">Github Packages√Ø¬ª¬ø</a> and can be pulled using the following Docker command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>docker pull ghcr.io/dynatrace/dynatrace-otel-collector/dynatrace-otel-collector:0.44.0
</code></pre></div>
<p>More information about further available container repositories can be found under <a href="/docs/ingest-from/opentelemetry/collector/deployment#container-image-registries" title="Deploy the Dynatrace Collector.">Collector deployment</a>.</p>
<p>Dynatrace Collector ships with specific components as described in the Dynatrace Collector's GitHub repo.
For the full list, see <a href="https://github.com/Dynatrace/dynatrace-otel-collector#components">Components√Ø¬ª¬ø</a>.</p>
<p>Take a look at <a href="/docs/ingest-from/opentelemetry/collector/use-cases" title="Configure your Collector instance for different use cases.">Collector use cases</a> for concrete use-case and configuration examples for the individual components.</p>
<h3 id="opentelemetry-distributions">OpenTelemetry Distributions<a class="headerlink" href="#opentelemetry-distributions" title="Permanent link">&para;</a></h3>
<p>There are two principal OpenTelemetry distributions of the Collector:</p>
<ul>
<li><strong>Collector Core</strong></li>
<li><strong>Collector Contrib</strong></li>
</ul>
<p>Additionally, OpenTelemetry also provides the <strong>Collector Builder</strong>, which allows you to build your own, customized Collector binary.</p>
<p>Dynatrace support</p>
<p>Dynatrace only provides limited support for Core, Contrib, and Builder setups, covering only the components and their versions included in the Dynatrace Collector.</p>
<p>For a fully supported Collector distribution, see <a href="#dt-collector-dist">Dynatrace Collector</a>.</p>
<h4 id="collector-core">Collector Core<a class="headerlink" href="#collector-core" title="Permanent link">&para;</a></h4>
<p>The <a href="https://github.com/open-telemetry/opentelemetry-collector">Core distribution√Ø¬ª¬ø</a> contains the basic proxy service and a few fundamental service components:</p>
<ul>
<li>A receiver for OTLP over HTTP and gRPC</li>
<li>Processors for batching requests and ensuring memory usage constraints</li>
<li>Exporters for console logging and OTLP over HTTP and gRPC</li>
</ul>
<h4 id="collector-contrib">Collector Contrib<a class="headerlink" href="#collector-contrib" title="Permanent link">&para;</a></h4>
<p>The <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib">Contrib distribution√Ø¬ª¬ø</a> builds on top of Core and enhances its functionality by shipping with a large number of additional receivers, processors, and exporters, contributed by third parties.</p>
<p>Given that the Contrib distribution is an all-in-one package and comes with all service components pre-compiled, it may use more system resources (storage and memory) than an optimized Collector build. Generally, we recommend using the Contrib distribution for testing purposes and a custom build of the Collector (see <a href="#collector-builder">Builder</a>) in production.</p>
<h4 id="collector-builder-ocb">Collector Builder (ocb)<a class="headerlink" href="#collector-builder-ocb" title="Permanent link">&para;</a></h4>
<p>In addition to the two distributions, OpenTelemetry also offers the <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/cmd/builder">Collector Builder√Ø¬ª¬ø</a>, a command line tool that allows you to build your own customized version of the Collector.</p>
<h3 id="which-distribution-should-i-use">Which distribution should I use?<a class="headerlink" href="#which-distribution-should-i-use" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>When should I use it?</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dynatrace Collector Recommended</td>
<td>The preferred choice for most use cases. It ships with a set of verified and stable Collector components, typically used with Dynatrace setups.</td>
</tr>
<tr>
<td>Custom Builder version</td>
<td>When you need to fully customize the Collector instance and only run the components required for your use case.</td>
</tr>
<tr>
<td>Core</td>
<td>When you primarily want to convert between OTLP protocols (HTTP √¢¬Ü¬î gRPC), ensure memory usage constraints, or apply request batching.</td>
</tr>
<tr>
<td>Contrib</td>
<td>Ideal for test setups, as it contains all third-party components and doesn't require a custom build. It's generally not recommended for use in production systems, as it typically uses more resources and may be less stable than an optimized Builder instance.</td>
</tr>
</tbody>
</table>
<h2 id="components_8">Components<a class="headerlink" href="#components_8" title="Permanent link">&para;</a></h2>
<h3 id="receiver">Receiver<a class="headerlink" href="#receiver" title="Permanent link">&para;</a></h3>
<p>A receiver is a component that enables data to come into the Collector. It can receive data from multiple sources. Many receivers come with default settings and do not need much configuration.</p>
<p>For a list of available receivers and their basic configuration, see the official <a href="https://opentelemetry.io/docs/collector/configuration/#receivers">OpenTelemetry documentation on receivers√Ø¬ª¬ø</a>.</p>
<h3 id="processor-optional">Processor Optional<a class="headerlink" href="#processor-optional" title="Permanent link">&para;</a></h3>
<p>A processor is an optional component that decides what to do with the data.</p>
<p>For a list of available processors and their basic configuration, see the official <a href="https://opentelemetry.io/docs/collector/configuration/#processors">OpenTelemetry documentation on processors√Ø¬ª¬ø</a>. OpenTelemetry has a list of <a href="https://github.com/open-telemetry/opentelemetry-collector/tree/v0.145.0/processor#recommended-processors">recommended processors√Ø¬ª¬ø</a>, but these are optional.</p>
<h3 id="exporter">Exporter<a class="headerlink" href="#exporter" title="Permanent link">&para;</a></h3>
<p>An exporter is a component that sends processed data to one or more backends. Exporters can support more than one data source.</p>
<p>Because many exporters require additional configuration (for example, an endpoint), be sure to check the official <a href="https://opentelemetry.io/docs/collector/configuration/#exporters">OpenTelemetry documentation on exporters√Ø¬ª¬ø</a> for a list of available exporters and their configurations.</p>
<h3 id="services">Services<a class="headerlink" href="#services" title="Permanent link">&para;</a></h3>
<p>Services are used to define pipelines that channel data through the Collector. They define which components work together to process OpenTelemetry data.</p>
<hr />
<h2 id="source-getting-startedmd">Source: getting-started.md<a class="headerlink" href="#source-getting-startedmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Get started with OpenTelemetry and Dynatrace
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/getting-started
scraped: 2026-02-15T21:09:17.233861</p>
<hr />
<h1 id="get-started-with-opentelemetry-and-dynatrace">Get started with OpenTelemetry and Dynatrace<a class="headerlink" href="#get-started-with-opentelemetry-and-dynatrace" title="Permanent link">&para;</a></h1>
<h1 id="get-started-with-opentelemetry-and-dynatrace_1">Get started with OpenTelemetry and Dynatrace<a class="headerlink" href="#get-started-with-opentelemetry-and-dynatrace_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>3-min read</li>
<li>Updated on Oct 15, 2025</li>
</ul>
<p>Find the information that you need to get started with ingesting OpenTelemetry logs, metrics, and traces into Dynatrace.</p>
<p>[### OTLP APIs</p>
<p>The Dynatrace OTLP API endpoints and token scopes needed to configure telemetry exports to Dynatrace.](/docs/ingest-from/opentelemetry/otlp-api "Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.")[### Instrument your apps</p>
<p>Instrument your apps to send OpenTelemetry data to Dynatrace API endpoints.](/docs/ingest-from/opentelemetry/walkthroughs "Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.")[### Dynatrace Collector</p>
<p>The customized Collector build, provided by Dynatrace and tailored for typical use cases in a Dynatrace context.](/docs/ingest-from/opentelemetry/collector "Learn about the Dynatrace Collector.")[### Istio and Envoy</p>
<p>Configure Istio and Envoy for OpenTelemetry exports to Dynatrace.](/docs/ingest-from/opentelemetry/integrations "Learn how to integrate OpenTelemetry and Dynatrace with Istio and Envoy.")[### Ensuring success</p>
<p>Make sure you get the OpenTelemetry data that you need in Dynatrace.](/docs/ingest-from/opentelemetry/troubleshooting "Troubleshoot common issues in the context of OpenTelemetry and data ingestion.")[### Licensing</p>
<p>How to calculate DPS consumption related to OpenTelemetry.](/docs/ingest-from/opentelemetry/opentelemetry-licensing "Learn how Dynatrace calculates licensing for data ingested via OpenTelemetry, using the Dynatrace Platform Subscription (DPS) model.")</p>
<hr />
<h2 id="source-envoymd">Source: envoy.md<a class="headerlink" href="#source-envoymd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Configure OpenTelemetry tracing with Envoy
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/integrations/envoy
scraped: 2026-02-15T21:14:21.459834</p>
<hr />
<h1 id="configure-opentelemetry-tracing-with-envoy">Configure OpenTelemetry tracing with Envoy<a class="headerlink" href="#configure-opentelemetry-tracing-with-envoy" title="Permanent link">&para;</a></h1>
<h1 id="configure-opentelemetry-tracing-with-envoy_1">Configure OpenTelemetry tracing with Envoy<a class="headerlink" href="#configure-opentelemetry-tracing-with-envoy_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Updated on Oct 15, 2025</li>
</ul>
<p>Support statement</p>
<p>This integration is based on open source code governed by the respective communities and is not covered under the Dynatrace support policy. While we strive to assist, issues and feature requests should be reported directly to the respective project. Dynatrace cannot ensure fixes/features due to the independent nature of OSS projects.</p>
<p>Always use the most recent release version to ensure you have the latest patches and fixes deployed.</p>
<p>This page describes how to configure your Envoy version 1.29+ instance to export traces to Dynatrace.</p>
<p>If you're using Envoy versions 1.28 and earlier, you can still export traces to Dynatrace via the OneAgent Envoy code module.</p>
<h3 id="prerequisites_9">Prerequisites<a class="headerlink" href="#prerequisites_9" title="Permanent link">&para;</a></h3>
<ul>
<li>The <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">OTLP traces URL</a> for the export.</li>
<li>
<p>The OneAgent Envoy code module is disabled.
  To do this:</p>
</li>
<li>
<p>Go to the applicable configuration page:</p>
<ul>
<li>For the entire environment, go to <strong>Settings</strong> &gt; <strong>Monitoring</strong> &gt; <strong>Monitored technologies</strong>.</li>
<li>For a particular host, go to <strong>Your host</strong> &gt; <strong>Host settings</strong> &gt; <strong>General</strong>.</li>
<li>Find <strong>Envoy</strong> in the list of monitored technologies and select  <strong>Edit</strong>.</li>
<li>Select the <strong>Monitor Envoy</strong> toggle, as appropriate, to disable the OneAgent Envoy code module.</li>
</ul>
</li>
</ul>
<h3 id="steps">Steps<a class="headerlink" href="#steps" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Get configuration entries</p>
</li>
<li>
<p>In Dynatrace Hub, search for <code>Envoy</code>.</p>
</li>
<li>Select the Hub entry for Envoy.</li>
<li>Select <strong>Set up</strong>.</li>
<li>Configure the API token.</li>
<li>
<p>Proceed with the following steps and use (and adjust) the two provided configuration snippets where applicable.</p>
</li>
<li>
<p>Add Dynatrace cluster entry for OpenTelemetry export</p>
</li>
</ol>
<p>For Envoy to send traces to Dynatrace, you first need to configure a <a href="https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/intro/terminology">cluster√Ø¬ª¬ø</a> entry for Dynatrace in the Envoy configuration file. For that, add the <a href="#snippets">cluster configuration entry as obtained in step 2</a> under the top-level <code>clusters</code> key.</p>
<ol>
<li>Dynatrace-specific configuration for the OpenTelemetry tracer</li>
</ol>
<p>Next, you need to add the tracing provider to the <a href="https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/http/http_connection_management#http-connection-management">HTTP connection manager filter√Ø¬ª¬ø</a> in the <a href="https://www.envoyproxy.io/docs/envoy/latest/start/quick-start/configuration-static#listeners">Envoy configuration file√Ø¬ª¬ø</a>.</p>
<p>Envoy 1.30+</p>
<p>Envoy 1.29</p>
<p>Use the <a href="#snippets">tracer configuration entry you obtained in step 2</a>, configure the <a href="#prerequisites">API token</a> under <code>tracing</code> - <code>provider</code> - <code>typed_config</code> - <code>http_service</code> - <code>request_headers_to_add</code> - <code>header</code> - <code>value</code> (the correct syntax is <code>value: "Api-Token YOUR_API_TOKEN_HERE"</code>), and add the tracer configuration under aforementioned <code>filters</code> entry.</p>
<p>Configure the following snippet under <code>filters</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>tracing:
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>provider:
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>name: envoy.tracers.opentelemetry
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a>typed_config:
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a>&quot;@type&quot;: type.googleapis.com/envoy.config.trace.v3.OpenTelemetryConfig
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a>
<a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a>
<a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a>
<a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a>service_name: your-service-name
<a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a>
<a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a>
<a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a>
<a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a>http_service:
<a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a>
<a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a>
<a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a>
<a id="__codelineno-38-29" name="__codelineno-38-29" href="#__codelineno-38-29"></a>http_uri:
<a id="__codelineno-38-30" name="__codelineno-38-30" href="#__codelineno-38-30"></a>
<a id="__codelineno-38-31" name="__codelineno-38-31" href="#__codelineno-38-31"></a>
<a id="__codelineno-38-32" name="__codelineno-38-32" href="#__codelineno-38-32"></a>
<a id="__codelineno-38-33" name="__codelineno-38-33" href="#__codelineno-38-33"></a>uri: &quot;{your-environment-id}.live.dynatrace.com/api/v2/otlp/v1/traces&quot;
<a id="__codelineno-38-34" name="__codelineno-38-34" href="#__codelineno-38-34"></a>
<a id="__codelineno-38-35" name="__codelineno-38-35" href="#__codelineno-38-35"></a>
<a id="__codelineno-38-36" name="__codelineno-38-36" href="#__codelineno-38-36"></a>
<a id="__codelineno-38-37" name="__codelineno-38-37" href="#__codelineno-38-37"></a>cluster: dynatrace
<a id="__codelineno-38-38" name="__codelineno-38-38" href="#__codelineno-38-38"></a>
<a id="__codelineno-38-39" name="__codelineno-38-39" href="#__codelineno-38-39"></a>
<a id="__codelineno-38-40" name="__codelineno-38-40" href="#__codelineno-38-40"></a>
<a id="__codelineno-38-41" name="__codelineno-38-41" href="#__codelineno-38-41"></a>timeout: 10s
<a id="__codelineno-38-42" name="__codelineno-38-42" href="#__codelineno-38-42"></a>
<a id="__codelineno-38-43" name="__codelineno-38-43" href="#__codelineno-38-43"></a>
<a id="__codelineno-38-44" name="__codelineno-38-44" href="#__codelineno-38-44"></a>
<a id="__codelineno-38-45" name="__codelineno-38-45" href="#__codelineno-38-45"></a>request_headers_to_add:
<a id="__codelineno-38-46" name="__codelineno-38-46" href="#__codelineno-38-46"></a>
<a id="__codelineno-38-47" name="__codelineno-38-47" href="#__codelineno-38-47"></a>
<a id="__codelineno-38-48" name="__codelineno-38-48" href="#__codelineno-38-48"></a>
<a id="__codelineno-38-49" name="__codelineno-38-49" href="#__codelineno-38-49"></a>- header:
<a id="__codelineno-38-50" name="__codelineno-38-50" href="#__codelineno-38-50"></a>
<a id="__codelineno-38-51" name="__codelineno-38-51" href="#__codelineno-38-51"></a>
<a id="__codelineno-38-52" name="__codelineno-38-52" href="#__codelineno-38-52"></a>
<a id="__codelineno-38-53" name="__codelineno-38-53" href="#__codelineno-38-53"></a>key: &quot;Authorization&quot;
<a id="__codelineno-38-54" name="__codelineno-38-54" href="#__codelineno-38-54"></a>
<a id="__codelineno-38-55" name="__codelineno-38-55" href="#__codelineno-38-55"></a>
<a id="__codelineno-38-56" name="__codelineno-38-56" href="#__codelineno-38-56"></a>
<a id="__codelineno-38-57" name="__codelineno-38-57" href="#__codelineno-38-57"></a>value: &quot;Api-Token {API_TOKEN_HERE}&quot;
<a id="__codelineno-38-58" name="__codelineno-38-58" href="#__codelineno-38-58"></a>
<a id="__codelineno-38-59" name="__codelineno-38-59" href="#__codelineno-38-59"></a>
<a id="__codelineno-38-60" name="__codelineno-38-60" href="#__codelineno-38-60"></a>
<a id="__codelineno-38-61" name="__codelineno-38-61" href="#__codelineno-38-61"></a>resource_detectors:
<a id="__codelineno-38-62" name="__codelineno-38-62" href="#__codelineno-38-62"></a>
<a id="__codelineno-38-63" name="__codelineno-38-63" href="#__codelineno-38-63"></a>
<a id="__codelineno-38-64" name="__codelineno-38-64" href="#__codelineno-38-64"></a>
<a id="__codelineno-38-65" name="__codelineno-38-65" href="#__codelineno-38-65"></a>- name: envoy.tracers.opentelemetry.resource_detectors.dynatrace
<a id="__codelineno-38-66" name="__codelineno-38-66" href="#__codelineno-38-66"></a>
<a id="__codelineno-38-67" name="__codelineno-38-67" href="#__codelineno-38-67"></a>
<a id="__codelineno-38-68" name="__codelineno-38-68" href="#__codelineno-38-68"></a>
<a id="__codelineno-38-69" name="__codelineno-38-69" href="#__codelineno-38-69"></a>typed_config:
<a id="__codelineno-38-70" name="__codelineno-38-70" href="#__codelineno-38-70"></a>
<a id="__codelineno-38-71" name="__codelineno-38-71" href="#__codelineno-38-71"></a>
<a id="__codelineno-38-72" name="__codelineno-38-72" href="#__codelineno-38-72"></a>
<a id="__codelineno-38-73" name="__codelineno-38-73" href="#__codelineno-38-73"></a>&quot;@type&quot;: type.googleapis.com/envoy.extensions.tracers.opentelemetry.resource_detectors.v3.DynatraceResourceDetectorConfig
</code></pre></div>
<p>These values need to be adjusted to reflect your Dynatrace environment and the export configuration:</p>
<ul>
<li><code>uri</code>√¢¬Ä¬ìSpecifies the desired <a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">export URL with the trace path</a>. The value must not include the protocol scheme but start with hostname instead.</li>
<li><code>cluster</code>√¢¬Ä¬ìSpecifies the cluster name and has to match the value of <code>cluster_name</code> of the previous cluster definition.</li>
<li>
<p><code>request_headers_to_add</code>√¢¬Ä¬ìContains the HTTP headers to be included in the request. Necessary when exporting to ActiveGate (configured for the <a href="#prerequisites">API token</a>).</p>
</li>
<li>
<p>Verify the setup</p>
</li>
</ul>
<p>Once the setup is complete and you have ingested your first data, you can verify if the traces show up in Dynatrace.</p>
<p><img alt="trace" src="https://dt-cdn.net/images/screenshot-1863-979a8a5284.png" /></p>
<h2 id="related-topics_7">Related topics<a class="headerlink" href="#related-topics_7" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-metrics/ingestion-methods/prometheus" title="Learn how to extend observability in Dynatrace with Prometheus metrics.">Prometheus</a></li>
<li><a href="/docs/observe/infrastructure-observability/container-platform-monitoring/kubernetes-monitoring/monitor-istio-metrics" title="Istio metric ingestion and topology detection">Istio/Envoy proxy metrics</a></li>
</ul>
<hr />
<h2 id="source-istiomd">Source: istio.md<a class="headerlink" href="#source-istiomd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Configure OpenTelemetry tracing with Istio
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/integrations/istio
scraped: 2026-02-15T09:08:49.409862</p>
<hr />
<h1 id="configure-opentelemetry-tracing-with-istio">Configure OpenTelemetry tracing with Istio<a class="headerlink" href="#configure-opentelemetry-tracing-with-istio" title="Permanent link">&para;</a></h1>
<h1 id="configure-opentelemetry-tracing-with-istio_1">Configure OpenTelemetry tracing with Istio<a class="headerlink" href="#configure-opentelemetry-tracing-with-istio_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>3-min read</li>
<li>Updated on Oct 22, 2025</li>
</ul>
<p>Support statement</p>
<p>This integration is based on open source code governed by the respective communities and is not covered under the Dynatrace support policy. While we strive to assist, issues and feature requests should be reported directly to the respective project. Dynatrace cannot ensure fixes/features due to the independent nature of OSS projects.</p>
<p>Always use the most recent release version to ensure you have the latest patches and fixes deployed.</p>
<p>This page describes how to use Istio version 1.22+ with the <a href="https://istio.io/latest/docs/reference/config/istio.mesh.v1alpha1/#MeshConfig-ExtensionProvider-OpenTelemetryTracingProvider">Istio OpenTelemetry extension provider√Ø¬ª¬ø</a>, and how to configure it to export OpenTelemetry traces to Dynatrace.</p>
<h3 id="system-requirements">System requirements<a class="headerlink" href="#system-requirements" title="Permanent link">&para;</a></h3>
<p>The following prerequisites are necessary to configure Istio OpenTelemetry trace configuration, including Dynatrace resource detection and sampling:</p>
<ul>
<li>Istio version 1.22+ (i.e., Istio releases that ship with Envoy 1.30+)</li>
</ul>
<p>Istio version 1.21 and earlier</p>
<p>Istio versions 1.21 and earlier ship with Envoy versions 1.29 and earlier, which is based on OpenTracing.
To use these Isito releases, enable the Dynatrace Envoy code module as described in <a href="/docs/ingest-from/opentelemetry/integrations/envoy#envoy-code-module" title="Learn how to configure Envoy to send OpenTelemetry traces to Dynatrace.">Configure OpenTelemetry tracing with Envoy</a>.</p>
<h2 id="licensing-impact">Licensing impact<a class="headerlink" href="#licensing-impact" title="Permanent link">&para;</a></h2>
<p>In certain deployment setups, tracing with Istio version 1.22+ results in consumption of the following <a href="https://www.dynatrace.com/pricing/">rate card√Ø¬ª¬ø</a> capabilities:</p>
<ul>
<li>
<p>When using the Dynatrace resource detector and sampler:</p>
</li>
<li>
<p>Classic Full-Stack or cloud-native Full-Stack deployments: Usage is included in <a href="/docs/license/capabilities/app-infra-observability/full-stack-monitoring" title="Learn how your consumption of the Dynatrace Full-Stack Monitoring DPS capability is billed and charged.">Full-Stack Monitoring (DPS)</a> and <a href="/docs/license/monitoring-consumption-classic/application-and-infrastructure-monitoring" title="Understand how Dynatrace application and infrastructure monitoring consumption is calculated based on host units.">Host Units (Dynatrace Classic License)</a>.</p>
</li>
<li>For Application-Observability-only deployments: Usage incurs consumption of <a href="/docs/license/capabilities/platform-extensions" title="Learn how consumption of Dynatrace platform extensions is calculated using the Dynatrace Platform Subscription model.">Custom Traces Classic (DPS)</a> or <a href="/docs/license/monitoring-consumption-classic/davis-data-units/custom-traces" title="Understand how DDU consumption is calculated for spans ingested via the Trace API.">DDUs for custom traces (Dynatrace Classic License)</a>.</li>
<li>Without the Dynatrace resource detector and sampler: Usage incurs consumption of <a href="/docs/license/capabilities/platform-extensions" title="Learn how consumption of Dynatrace platform extensions is calculated using the Dynatrace Platform Subscription model.">Custom Traces Classic (DPS)</a> or <a href="/docs/license/monitoring-consumption-classic/davis-data-units/custom-traces" title="Understand how DDU consumption is calculated for spans ingested via the Trace API.">DDUs for custom traces (Dynatrace Classic License)</a>.</li>
</ul>
<h2 id="deployment-considerations">Deployment considerations<a class="headerlink" href="#deployment-considerations" title="Permanent link">&para;</a></h2>
<p>It's possible to configure Istio OpenTelemetry tracing in a standalone deployment or in combination with Dynatrace Operator.</p>
<h3 id="deployment-in-combination-with-dynatrace-operator-recommended">Deployment in combination with Dynatrace Operator Recommended<a class="headerlink" href="#deployment-in-combination-with-dynatrace-operator-recommended" title="Permanent link">&para;</a></h3>
<p>We recommend using the Istio OpenTelemetry integration in combination with a Dynatrace Operator deployment with <a href="/docs/ingest-from/setup-on-k8s/guides/metadata-automation/metadata-enrichment" title="Metadata enrichment in the Dynatrace Operator adds context to Kubernetes pods by attaching relevant metadata to entities like pods, hosts, and processes for better observability.">metadata enrichment</a> and <a href="/docs/ingest-from/setup-on-k8s/extend-observability-k8s/telemetry-ingest" title="Enable Dynatrace telemetry ingest endpoints in Kubernetes for cluster-local data ingest.">telemetry ingest endpoints</a> enabled. Other features like OneAgent or ActiveGate are not required.</p>
<p>This provides the following benefits compared to standalone usage:</p>
<ul>
<li>Resilient and more efficient delivery of traces by providing retry and batching capabilities.</li>
<li>Optional routing through ActiveGate.</li>
<li>No additional access token required.</li>
<li>No additional <code>ServiceEntries</code> required.</li>
<li>Compatibility with Dynatrace Operator <code>enableIstio</code>.</li>
</ul>
<h3 id="standalone-deployment">Standalone deployment<a class="headerlink" href="#standalone-deployment" title="Permanent link">&para;</a></h3>
<p>It's possible to ingest Istio traces without a Dynatrace Operator instance deployed, but this comes with major downsides and should only be used if it's not possible to deploy Dynatrace Operator.</p>
<p>Caveats when using standalone deployment:</p>
<ul>
<li>No Kubernetes metadata will be available for traces. This means traces will not be automatically correlated with Kubernetes workloads or services in Dynatrace.</li>
<li>Potentially unreliable delivery of traces. The current implementation of the OTLP HTTP exporter in Envoy doesn't provide any means of retry or error handling in case of connectivity or other issues when sending traces to Dynatrace, which can lead to loss of traces.</li>
<li>The required <code>ServiceEntry</code> is not compatible with the <code>enableIstio</code> option of Dynatrace Operator.</li>
</ul>
<h3 id="other-deployment-considerations">Other deployment considerations<a class="headerlink" href="#other-deployment-considerations" title="Permanent link">&para;</a></h3>
<p>Istio ambient mode</p>
<h4 id="istio-ambient-mode-support">Istio ambient mode support<a class="headerlink" href="#istio-ambient-mode-support" title="Permanent link">&para;</a></h4>
<p>Istio in ambient mode doesn't rely on Envoy proxies to route traffic, so tracing Istio traffic using the OpenTelemetry integration is not possible. If waypoint proxies are used, those would still emit traces, but the metadata would be misleading or wrong. Currently, there is no solution for end-to-end tracing in Istio ambient mode.</p>
<h2 id="steps_1">Steps<a class="headerlink" href="#steps_1" title="Permanent link">&para;</a></h2>
<h3 id="1-requirements">1. Requirements<a class="headerlink" href="#1-requirements" title="Permanent link">&para;</a></h3>
<p>Check the following requirements before starting to deploy tracing for Istio.</p>
<p>Dynatrace Operator</p>
<p>Standalone</p>
<ol>
<li>
<p>Dynatrace Operator is <a href="/docs/ingest-from/setup-on-k8s/deployment" title="Deploy Dynatrace Operator on Kubernetes">deployed</a>.</p>
</li>
<li>
<p>For optimal configuration, follow the guide for <a href="/docs/ingest-from/setup-on-k8s/guides/deployment-and-configuration/istio-deployment" title="Deployment of Dynatrace Operator alongside Istio in various scenarios">deployment alongside Istio</a>.</p>
</li>
<li><a href="/docs/ingest-from/setup-on-k8s/extend-observability-k8s/telemetry-ingest" title="Enable Dynatrace telemetry ingest endpoints in Kubernetes for cluster-local data ingest.">Telemetry ingest</a> endpoints are enabled.</li>
</ol>
<p>Either Dynatrace Operator is not deployed, or <code>enableIstio</code> is set to <code>false</code> in the DynaKube.</p>
<h3 id="2-get-configuration-entries">2. Get configuration entries<a class="headerlink" href="#2-get-configuration-entries" title="Permanent link">&para;</a></h3>
<p>Dynatrace Operator</p>
<p>Standalone</p>
<ol>
<li>In Dynatrace Hub, search for <code>Istio</code>.</li>
<li>Filter by the category <strong>Technology</strong>.</li>
<li>Select the Hub entry <strong>Istio Service Mesh</strong>.</li>
<li>Select <strong>Set up</strong>.</li>
<li>
<p>Use the provided and pre-configured snippets to deploy the following items in the next steps:</p>
</li>
<li>
<p>Mesh configuration</p>
</li>
<li>
<p>Telemetry API</p>
</li>
<li>
<p>In Dynatrace Hub, search for <code>Istio</code>.</p>
</li>
<li>Filter by the category <strong>Technology</strong>.</li>
<li>Select the Hub entry <strong>Istio Service Mesh</strong>.</li>
<li>Select <strong>Set up</strong>.</li>
<li>Configure the API token.</li>
<li>
<p>Use the provided and pre-configured snippets to deploy the following items in the next steps:</p>
</li>
<li>
<p>Mesh configuration</p>
</li>
<li>Service entry</li>
<li>Telemetry API</li>
</ol>
<h3 id="3-apply-the-mesh-configuration-to-your-istio-installation">3. Apply the mesh configuration to your Istio installation<a class="headerlink" href="#3-apply-the-mesh-configuration-to-your-istio-installation" title="Permanent link">&para;</a></h3>
<p>Dynatrace Operator</p>
<p>Standalone</p>
<p>To use the telemetry ingest endpoints provided by the Dynatrace OpenTelemetry collector, we need to change the snippet obtained in step 2 by removing the API token header and changing the target service.</p>
<p>The resulting configuration should look like this, assuming the default ingest service name:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>apiVersion: install.istio.io/v1alpha1
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>kind: IstioOperator
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>spec:
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a>meshConfig:
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a>extensionProviders:
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a>- name: dynatrace-otel
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a>
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a>
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a>opentelemetry:
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a>
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a>
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a>
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a>port: 4318
<a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a>
<a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a>
<a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a>
<a id="__codelineno-39-33" name="__codelineno-39-33" href="#__codelineno-39-33"></a>service: &quot;&lt;dynakube-name&gt;-telemetry-ingest.&lt;dynatrace-operator-namespace&gt;.svc.cluster.local&quot; # &lt;-- Please fill in your ingest endpoint service
<a id="__codelineno-39-34" name="__codelineno-39-34" href="#__codelineno-39-34"></a>
<a id="__codelineno-39-35" name="__codelineno-39-35" href="#__codelineno-39-35"></a>
<a id="__codelineno-39-36" name="__codelineno-39-36" href="#__codelineno-39-36"></a>
<a id="__codelineno-39-37" name="__codelineno-39-37" href="#__codelineno-39-37"></a>http:
<a id="__codelineno-39-38" name="__codelineno-39-38" href="#__codelineno-39-38"></a>
<a id="__codelineno-39-39" name="__codelineno-39-39" href="#__codelineno-39-39"></a>
<a id="__codelineno-39-40" name="__codelineno-39-40" href="#__codelineno-39-40"></a>
<a id="__codelineno-39-41" name="__codelineno-39-41" href="#__codelineno-39-41"></a>path: &quot;/v1/traces&quot;
<a id="__codelineno-39-42" name="__codelineno-39-42" href="#__codelineno-39-42"></a>
<a id="__codelineno-39-43" name="__codelineno-39-43" href="#__codelineno-39-43"></a>
<a id="__codelineno-39-44" name="__codelineno-39-44" href="#__codelineno-39-44"></a>
<a id="__codelineno-39-45" name="__codelineno-39-45" href="#__codelineno-39-45"></a>timeout: 10s
<a id="__codelineno-39-46" name="__codelineno-39-46" href="#__codelineno-39-46"></a>
<a id="__codelineno-39-47" name="__codelineno-39-47" href="#__codelineno-39-47"></a>
<a id="__codelineno-39-48" name="__codelineno-39-48" href="#__codelineno-39-48"></a>
<a id="__codelineno-39-49" name="__codelineno-39-49" href="#__codelineno-39-49"></a>resource_detectors:
<a id="__codelineno-39-50" name="__codelineno-39-50" href="#__codelineno-39-50"></a>
<a id="__codelineno-39-51" name="__codelineno-39-51" href="#__codelineno-39-51"></a>
<a id="__codelineno-39-52" name="__codelineno-39-52" href="#__codelineno-39-52"></a>
<a id="__codelineno-39-53" name="__codelineno-39-53" href="#__codelineno-39-53"></a>dynatrace: {}
<a id="__codelineno-39-54" name="__codelineno-39-54" href="#__codelineno-39-54"></a>
<a id="__codelineno-39-55" name="__codelineno-39-55" href="#__codelineno-39-55"></a>
<a id="__codelineno-39-56" name="__codelineno-39-56" href="#__codelineno-39-56"></a>
<a id="__codelineno-39-57" name="__codelineno-39-57" href="#__codelineno-39-57"></a>dynatrace_sampler:
<a id="__codelineno-39-58" name="__codelineno-39-58" href="#__codelineno-39-58"></a>
<a id="__codelineno-39-59" name="__codelineno-39-59" href="#__codelineno-39-59"></a>
<a id="__codelineno-39-60" name="__codelineno-39-60" href="#__codelineno-39-60"></a>
<a id="__codelineno-39-61" name="__codelineno-39-61" href="#__codelineno-39-61"></a>tenant: &quot;&lt;your-tenant-id&gt;&quot;  # &lt;-- This must not be changed from step 2
<a id="__codelineno-39-62" name="__codelineno-39-62" href="#__codelineno-39-62"></a>
<a id="__codelineno-39-63" name="__codelineno-39-63" href="#__codelineno-39-63"></a>
<a id="__codelineno-39-64" name="__codelineno-39-64" href="#__codelineno-39-64"></a>
<a id="__codelineno-39-65" name="__codelineno-39-65" href="#__codelineno-39-65"></a>cluster_id: &lt;cluster-id&gt;    # &lt;-- This must not be changed from step 2
</code></pre></div>
<p>Save the file as <code>meshconfig.yaml</code> and apply the configuration using the following command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>istioctl install -f meshconfig.yaml
</code></pre></div>
<p>Save the mesh configuration snippet you obtained in step 2 under <code>meshconfig.yaml</code> and configure Istio with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>istioctl install -f meshconfig.yaml
</code></pre></div>
<p>Existing Mesh configuration</p>
<p>If you already use your own, custom Mesh configuration, you need to merge its content with the provided snippet. Otherwise, you can use the snippet as-is.</p>
<h3 id="4-deploy-the-service-entry">4. Deploy the service entry<a class="headerlink" href="#4-deploy-the-service-entry" title="Permanent link">&para;</a></h3>
<p>Dynatrace Operator</p>
<p>Standalone</p>
<p>This step is only required for standalone deployment.
No action required when using Dynatrace Operator.</p>
<p>Next, you need to deploy the <a href="https://istio.io/latest/docs/reference/config/networking/service-entry/">Istio service entry√Ø¬ª¬ø</a> manifest you obtained in step 1 using <code>kubectl</code>. Save it to <code>dt-serviceentry.yaml</code> and run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>kubectl apply -n istio-system -f dt-serviceentry.yaml
</code></pre></div>
<h3 id="5-enable-tracing-provider">5. Enable tracing provider<a class="headerlink" href="#5-enable-tracing-provider" title="Permanent link">&para;</a></h3>
<p>As last configuration step, use the Istio telemetry API to enable the tracing provider.</p>
<p>Save the telemetry API manifest you obtained in step 2 to <code>dt-telemetry.yaml</code> and use <code>kubectl</code> to apply the configuration to the desired namespace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>kubectl apply -n istio-system -f dt-telemetry.yaml
</code></pre></div>
<p>Multiple telemetry resources</p>
<p>Do not deploy more than one telemetry resource within a given namespace, as doing so may lead to configuration conflicts and incomplete tracing information.</p>
<p>If you require different telemetry resources, deploy them to different namespaces or using different selectors.</p>
<p>Pod restart</p>
<p>Make sure to restart all applicable Kubernetes pods, to let the changes to the mesh configuration take effect.</p>
<h3 id="6-verify-the-setup">6. Verify the setup<a class="headerlink" href="#6-verify-the-setup" title="Permanent link">&para;</a></h3>
<p>Once the setup is complete and you have ingested your first data, you can verify if the traces show up in Dynatrace.</p>
<p><img alt="trace" src="https://dt-cdn.net/images/istio-otel-tracing-2513-5da62a325b.png" /></p>
<hr />
<h2 id="source-integrationsmd">Source: integrations.md<a class="headerlink" href="#source-integrationsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Integrate with Istio and Envoy
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/integrations
scraped: 2026-02-15T21:15:59.025523</p>
<hr />
<h1 id="integrate-with-istio-and-envoy">Integrate with Istio and Envoy<a class="headerlink" href="#integrate-with-istio-and-envoy" title="Permanent link">&para;</a></h1>
<h1 id="integrate-with-istio-and-envoy_1">Integrate with Istio and Envoy<a class="headerlink" href="#integrate-with-istio-and-envoy_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>1-min read</li>
<li>Updated on Oct 15, 2025</li>
</ul>
<p>This page provides information on how to configure Istio and Envoy to export OpenTelemetry data to Dynatrace.</p>
<p><a href="/docs/ingest-from/opentelemetry/integrations/istio" title="Learn how to configure Istio on Kubernetes to deploy pre-configured proxy services for OpenTelemetry tracing.">### Istio</a><a href="/docs/ingest-from/opentelemetry/integrations/envoy" title="Learn how to configure Envoy to send OpenTelemetry traces to Dynatrace.">### Envoy</a></p>
<hr />
<h2 id="source-opentelemetry-licensingmd">Source: opentelemetry-licensing.md<a class="headerlink" href="#source-opentelemetry-licensingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: OpenTelemetry licensing
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/opentelemetry-licensing
scraped: 2026-02-15T21:16:01.481768</p>
<hr />
<h1 id="opentelemetry-licensing">OpenTelemetry licensing<a class="headerlink" href="#opentelemetry-licensing" title="Permanent link">&para;</a></h1>
<h1 id="opentelemetry-licensing_1">OpenTelemetry licensing<a class="headerlink" href="#opentelemetry-licensing_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>2-min read</li>
<li>Published Aug 25, 2025</li>
</ul>
<p>Latest Dynatrace</p>
<p>Learn how OpenTelemetry data ingest is calculated with the Dynatrace Platform Subscription (DPS) license model.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides seamless support for OpenTelemetry data ingestion and processing.
This lets you leverage the power of observability across your distributed systems.</p>
<p>Licensing for OpenTelemetry data is fully integrated into the Dynatrace Platform Subscription model, ensuring that all telemetry types (traces and spans, metrics, and logs) are billed transparently and consistently.</p>
<p>With Dynatrace, OpenTelemetry data is treated like any other ingested data.
Flexible pricing is based on the volume of data ingested, stored, and queried.
Pricing calculations use the same <a href="https://www.dynatrace.com/pricing/">rate card items√Ø¬ª¬ø</a> as for all telemetry data that is ingested into the platform.</p>
<h2 id="traces-powered-by-grail-dps">Traces powered by Grail (DPS)<a class="headerlink" href="#traces-powered-by-grail-dps" title="Permanent link">&para;</a></h2>
<p>Dynatrace allows you to ingest and analyze OpenTelemetry trace data seamlessly.</p>
<p>For complete information, see <a href="/docs/license/capabilities/traces" title="Learn how Dynatrace Traces powered by Grail consumption is calculated using the Dynatrace Platform Subscription (DPS) model.">Traces powered by Grail overview (DPS)</a>.</p>
<h3 id="ingestion">Ingestion<a class="headerlink" href="#ingestion" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry trace data is billed by the ingested volume.
It is charged as <a href="/docs/license/capabilities/traces/dps-traces-ingest" title="Learn how your consumption of the Traces - Ingest &amp; Process DPS capability is billed and charged.">Traces √¢¬Ä¬ì Ingest &amp; Process</a>.</p>
<p>Full-Stack Monitoring includes a <a href="/docs/license/capabilities/app-infra-observability/full-stack-monitoring#full-stack-traces" title="Learn how your consumption of the Dynatrace Full-Stack Monitoring DPS capability is billed and charged.">defined amount of trace data volume</a> for traces that are sent via the OneAgent Trace API or from a Full-Stack monitored host.
You are only charged for trace data (from these sources) that exceeds the included volume.</p>
<h3 id="retention">Retention<a class="headerlink" href="#retention" title="Permanent link">&para;</a></h3>
<p>Retention of OpenTelemetry trace data is billed based on the volume of trace data stored.
It is measured in gibibytes per day (GiB-day) and charged as <a href="/docs/license/capabilities/traces/dps-traces-retain" title="Learn how your consumption of the Traces - Retain DPS capability is billed and charged.">Traces √¢¬Ä¬ì Retain</a>.</p>
<p>The default <a href="/docs/manage/data-privacy-and-security/data-privacy/data-retention-periods#purepath" title="Check retention times for various data types.">trace data retention period of 10 days</a> is included.
Any trace data retained longer than 10 days is charged on a per-gibibyte basis as <a href="/docs/license/capabilities/traces#trace-retain-usage" title="Learn how Dynatrace Traces powered by Grail consumption is calculated using the Dynatrace Platform Subscription (DPS) model.">Traces - Retain</a>.</p>
<h3 id="query">Query<a class="headerlink" href="#query" title="Permanent link">&para;</a></h3>
<p>Querying of OpenTelmetry traces is billed based on gibibytes scanned (GiB-scanned) and charged as <a href="/docs/license/capabilities/traces/dps-traces-query" title="Learn how your consumption of the Traces - Query DPS capability is billed and charged.">Traces √¢¬Ä¬ì Query</a>.</p>
<p>The use of <a href="/docs/observe/application-observability/distributed-tracing" title="Trace and analyze in real time highly distributed systems with Grail."><img alt="Distributed Tracing" src="https://dt-cdn.net/images/distributed-tracing-4ed13d1274.svg" title="Distributed Tracing" /> <strong>Distributed Tracing</strong></a> and <a href="/docs/observe/application-observability/services/services-app" title="Maintain centralized control over service health, performance, and resources with the Services app."><img alt="Services" src="https://dt-cdn.net/hub/logos/services.png" title="Services" /> <strong>Services</strong></a> is included with Dynatrace.
No query consumption is generated by these apps.</p>
<h2 id="metrics-powered-by-grail-dps">Metrics powered by Grail (DPS)<a class="headerlink" href="#metrics-powered-by-grail-dps" title="Permanent link">&para;</a></h2>
<p>Dynatrace supports OpenTelemetry metrics, allowing you to seamlessly ingest and analyze OpenTelemetry data alongside metrics from Dynatrace-monitored environments.
OpenTelemetry metrics are billed as Metrics powered by Grail, just like other ingested metrics.</p>
<p>For complete information, see <a href="/docs/license/capabilities/metrics" title="Learn how Dynatrace Metrics powered by Grail consumption is calculated using the Dynatrace Platform Subscription model.">Metrics powered by Grail overview (DPS)</a>.</p>
<h3 id="ingestion_1">Ingestion<a class="headerlink" href="#ingestion_1" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry metrics are billed by the number of metric data points ingested, measured as groups of 100,000 data points.
This ingest is charged as <a href="/docs/license/capabilities/metrics/dps-metrics-ingest" title="Learn how your consumption of the Metrics - Ingest &amp; Process DPS capability is billed and charged.">Metrics √¢¬Ä¬ì Ingest &amp; Process</a>.</p>
<p>Metrics originating from Full-Stack-monitored hosts or containers <a href="/docs/license/capabilities/app-infra-observability/full-stack-monitoring#dps-included-metrics" title="Learn how your consumption of the Dynatrace Full-Stack Monitoring DPS capability is billed and charged.">include a defined amount of metric data points</a>.
Each contributing GiB of host or application memory adds 900 data points in each 15-minute interval.</p>
<p>In an environment with Full-Stack Monitoring, you are only charged for metric data points that exceed this limit.</p>
<h3 id="retention_1">Retention<a class="headerlink" href="#retention_1" title="Permanent link">&para;</a></h3>
<p>Retention of OpenTelemetry metrics is billed based on the volume of metric data stored.
It is measured in gibibytes per day (GiB-day) and charged as <a href="/docs/license/capabilities/metrics/dps-metrics-retain" title="Learn how your consumption of the Metrics - Retain DPS capability is billed and charged.">Metrics √¢¬Ä¬ì Retain</a>.</p>
<p>Metrics powered by Grail includes <a href="/docs/manage/data-privacy-and-security/data-privacy/data-retention-periods" title="Check retention times for various data types.">15 months (462 days) of one-minute granularity</a>.
Metrics that you choose to retain beyond that period are charged.</p>
<h3 id="query_1">Query<a class="headerlink" href="#query_1" title="Permanent link">&para;</a></h3>
<p>Querying metric data is included in <a href="/docs/license/capabilities/metrics/dps-metrics-ingest" title="Learn how your consumption of the Metrics - Ingest &amp; Process DPS capability is billed and charged.">Metrics √¢¬Ä¬ì Ingest &amp; Process</a>.</p>
<h2 id="logs-powered-by-grail-dps">Logs powered by Grail (DPS)<a class="headerlink" href="#logs-powered-by-grail-dps" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides full support for OpenTelemetry logs.
This enables you to centralize log data from OpenTelemetry sources alongside logs from Dynatrace-monitored environments. OpenTelemetry logs are billed as Logs powered by Grail.</p>
<p>For complete information, see <a href="/docs/license/capabilities/log-analytics" title="Learn how Dynatrace Log Analytics consumption is calculated using the Dynatrace Platform Subscription model.">Log Analytics (DPS)</a>.</p>
<h3 id="ingestion_2">Ingestion<a class="headerlink" href="#ingestion_2" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry log data is billed by the volume ingested.
It is measured in gibibytes (GiB) and charged as <a href="/docs/license/capabilities/log-analytics/dps-log-ingest" title="Learn how your consumption of the Log Management &amp; Analytics - Ingest &amp; Process DPS capability is billed and charged.">Log Management &amp; Analytics √¢¬Ä¬ì Ingest &amp; Process</a>.</p>
<h3 id="retention_2">Retention<a class="headerlink" href="#retention_2" title="Permanent link">&para;</a></h3>
<p>Retention of log data is billed based on the volume of log data stored.
It is measured in gibibytes per day (GiB-day) and charged as <a href="/docs/license/capabilities/log-analytics/dps-log-retain" title="Learn how your consumption of the Log Management &amp; Analytics - Retain DPS capability is billed and charged.">Log Management &amp; Analytics √¢¬Ä¬ì Retain</a>.</p>
<h3 id="query_2">Query<a class="headerlink" href="#query_2" title="Permanent link">&para;</a></h3>
<p>Querying log data is billed based on the volume of log data queried.
It is measured in gibibytes scanned (GiB-scanned) and charged as <a href="/docs/license/capabilities/log-analytics/dps-log-query" title="Learn how your consumption of the Log Management &amp; Analytics - Query DPS capability is billed and charged.">Log Management &amp; Analytics - Query</a>.</p>
<h2 id="track-your-consumption">Track your consumption<a class="headerlink" href="#track-your-consumption" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides different ways to track your OpenTelmetry ingest.
These are described on the respective DPS capability page:</p>
<ul>
<li><a href="/docs/license/capabilities/traces/dps-traces-ingest#consumption-trace-ingest" title="Learn how your consumption of the Traces - Ingest &amp; Process DPS capability is billed and charged.">Pre-made notebooks to track your trace ingest</a></li>
<li><a href="/docs/license/capabilities/log-analytics/dps-log-ingest#track-your-consumption" title="Learn how your consumption of the Log Management &amp; Analytics - Ingest &amp; Process DPS capability is billed and charged.">Built-in metrics to track your log ingest</a></li>
<li><a href="/docs/license/capabilities/metrics/dps-metrics-ingest#calculate-your-consumption" title="Learn how your consumption of the Metrics - Ingest &amp; Process DPS capability is billed and charged.">Calculations to track your metrics ingest</a></li>
</ul>
<h2 id="related-topics_8">Related topics<a class="headerlink" href="#related-topics_8" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/opentelemetry" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">OpenTelemetry and Dynatrace</a></li>
<li><a href="/docs/license/capabilities/log-analytics" title="Learn how Dynatrace Log Analytics consumption is calculated using the Dynatrace Platform Subscription model.">Log Analytics (DPS)</a></li>
<li><a href="/docs/license/capabilities/traces" title="Learn how Dynatrace Traces powered by Grail consumption is calculated using the Dynatrace Platform Subscription (DPS) model.">Traces powered by Grail overview (DPS)</a></li>
<li><a href="/docs/license/capabilities/metrics" title="Learn how Dynatrace Metrics powered by Grail consumption is calculated using the Dynatrace Platform Subscription model.">Metrics powered by Grail overview (DPS)</a></li>
</ul>
<hr />
<h2 id="source-opentelemetry-security-contextmd">Source: opentelemetry-security-context.md<a class="headerlink" href="#source-opentelemetry-security-contextmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Set up Grail permissions for OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/opentelemetry-security-context
scraped: 2026-02-15T21:14:00.975476</p>
<hr />
<h1 id="set-up-grail-permissions-for-opentelemetry">Set up Grail permissions for OpenTelemetry<a class="headerlink" href="#set-up-grail-permissions-for-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="set-up-grail-permissions-for-opentelemetry_1">Set up Grail permissions for OpenTelemetry<a class="headerlink" href="#set-up-grail-permissions-for-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>2-min read</li>
<li>Updated on Nov 20, 2025</li>
</ul>
<p>Dynatrace has a <a href="/docs/platform/grail/organize-data/assign-permissions-in-grail" title="Find out how to assign permissions to buckets and tables in Grail.">permission model for Grail</a>. This applies to all telemetry data, such as metrics, events, spans, and logs.</p>
<p>We recommend setting up permissions along organizational lines and deployment scopes. Suitable concepts include host groups, Kubernetes clusters, and Kubernetes namespaces. These attributes are typically available for all telemetry data ingested via Dynatrace collection methods like OneAgent, OpenTelemetry, or Kubernetes operator. Hence, you can use these attributes to enable <a href="/docs/platform/grail/organize-data/assign-permissions-in-grail#grail-permissions-table-record" title="Find out how to assign permissions to buckets and tables in Grail.">record-level permissions</a>.</p>
<p>For Kubernetes-based deployments, make sure Dynatrace Operator has <a href="/docs/ingest-from/setup-on-k8s/guides/metadata-automation/metadata-enrichment" title="Metadata enrichment in the Dynatrace Operator adds context to Kubernetes pods by attaching relevant metadata to entities like pods, hosts, and processes for better observability.">metadata enrichment</a> enabled.</p>
<p>If you only require a basic permission concept, setting up bucket-level permissions is the best option. You can then route your data to the correct bucket in OpenPipeline by matching one of the mentioned deployment-relevant primary Grail fields.</p>
<p>For more control in Dynatrace, you can set up policy boundaries with more granular restrictions on a data level. By default, you can use the following attributes:</p>
<ul>
<li><code>dt.host_group.id</code></li>
<li><code>k8s.cluster.name</code></li>
<li><code>k8s.namespace.name</code></li>
<li>Any other attribute listed in the <a href="/docs/platform/grail/organize-data/assign-permissions-in-grail#grail-permissions-table-record" title="Find out how to assign permissions to buckets and tables in Grail.">permission model</a></li>
</ul>
<p>Dynatrace provides a comprehensive permission model for Grail that applies to all telemetry data-including metrics, logs, spans, and events.</p>
<h2 id="set-up-security-context">Set up security context<a class="headerlink" href="#set-up-security-context" title="Permanent link">&para;</a></h2>
<p>If the permissions on deployment-level attributes or the bucket level are insufficient, Dynatrace allows you to set up fine-grained permissions by adding a <code>dt.security_context</code> attribute to your data. This context can represent your security architecture and could even be hierarchical by encoding this into a string such as <code>department-A/department-AB/team-C</code>.</p>
<p>To use <code>dt.security_context</code> and other attributes for permissions, make sure these attributes are present in your telemetry data.</p>
<p>To add the security context to your OpenTelemetry data, enrich your signals with the <code>dt.security_context</code> attribute. Dynatrace automatically propagates the <code>dt.security_context</code> value from spans to the service entity for span data.</p>
<p>You can use your existing labels and tags to facilitate permissions in Dynatrace.</p>
<h3 id="security-context-via-kubernetes-labels-or-annotations">Security context via Kubernetes labels or annotations<a class="headerlink" href="#security-context-via-kubernetes-labels-or-annotations" title="Permanent link">&para;</a></h3>
<p>You can use <a href="/docs/ingest-from/setup-on-k8s/guides/metadata-automation/k8s-metadata-telemetry-enrichment" title="Guides for telemetry enrichment on Kubernetes">Kubernetes labels or annotations</a> as a source for your <code>dt.security_context</code>. This is one of the most convenient ways of doing this.</p>
<p>Alternatively, you can <a href="/docs/ingest-from/opentelemetry/collector/use-cases/kubernetes/k8s-enrich" title="Configure the OpenTelemetry Collector to enrich OTLP requests with Kubernetes data.">configure the OpenTelemetry Collector to enrich data in transit</a>. If you do this, you might have to map your Kubernetes metadata to <code>dt.security_context</code> in OpenPipeline.</p>
<h3 id="security-context-via-opentelemetry-resource-attributes">Security context via OpenTelemetry resource attributes<a class="headerlink" href="#security-context-via-opentelemetry-resource-attributes" title="Permanent link">&para;</a></h3>
<p>To use the <a href="/docs/deliver/release-monitoring/version-detection-strategies#otel_resource_attributes" title="Metadata for version detection in different technologies"><code>OTEL_RESOURCE_ATTRIBUTES</code></a> environment variable, just directly set the <code>dt.security_context</code> as a resource attribute. You can also use any resource attribute in OpenPipeline as a source for your <code>dt.security_context</code>.</p>
<h3 id="security-context-via-oneagent-metadata-file">Security context via OneAgent metadata file<a class="headerlink" href="#security-context-via-oneagent-metadata-file" title="Permanent link">&para;</a></h3>
<p>Dynatrace OneAgent provides enrichment files or environment variables to <a href="/docs/ingest-from/extend-dynatrace/extend-data#operator-enrichment-directory" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">add attributes directly in your application code</a>.</p>
<p>To read more about enrichment options and setup, see how to <a href="/docs/ingest-from/setup-on-k8s/guides/metadata-automation/k8s-metadata-telemetry-enrichment#expand--enrich-via-environment-variable--4" title="Guides for telemetry enrichment on Kubernetes">enrich via environment variable</a>.</p>
<hr />
<h2 id="source-ingest-logsmd">Source: ingest-logs.md<a class="headerlink" href="#source-ingest-logsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest OTLP logs
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api/ingest-logs
scraped: 2026-02-15T21:24:35.802004</p>
<hr />
<h1 id="ingest-otlp-logs">Ingest OTLP logs<a class="headerlink" href="#ingest-otlp-logs" title="Permanent link">&para;</a></h1>
<h1 id="ingest-otlp-logs_1">Ingest OTLP logs<a class="headerlink" href="#ingest-otlp-logs_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Reference</li>
<li>3-min read</li>
<li>Updated on Feb 10, 2026</li>
</ul>
<p>OpenTelemetry supports attributes at different levels in an OpenTelemetry log request, such as the resource level, scope level, and record level.</p>
<p>The Log ingestion API collects and attempts to automatically transform log data.</p>
<h2 id="data-transformation">Data transformation<a class="headerlink" href="#data-transformation" title="Permanent link">&para;</a></h2>
<p>Each log record from the ingested batch is mapped to a single Dynatrace log record, which contains three special attributes: <code>timestamp</code>, <code>loglevel</code>, <code>content</code>, and a set of other key-value attributes. These properties are set based on keys present in the input object as follows.</p>
<h3 id="timestamp">Timestamp<a class="headerlink" href="#timestamp" title="Permanent link">&para;</a></h3>
<ul>
<li>Set based on the <strong>Timestamp</strong> field of the input log record. See the differences between data models in the <a href="#otlp-structured-logs">Log ingestion API processing</a> section below for more details.</li>
<li>Log events older than the <strong>Log Age</strong> limit are discarded. Timestamps more than 10 minutes ahead of the current time are replaced with the current time. See the <a href="#ingestion-limits">Ingestion limits</a> section for details.</li>
<li>The default value is the current timestamp.</li>
</ul>
<h3 id="log-level">Log level<a class="headerlink" href="#log-level" title="Permanent link">&para;</a></h3>
<ul>
<li>Set based on the <strong>SeverityText</strong> field (first priority) or <strong>SeverityNumber</strong> field (secondnd priority) of the input log record. See the differences between data models in the section <a href="#otlp-structured-logs">Log ingestion API processing</a> below for more details.</li>
<li>The default value is <code>NONE</code>.</li>
</ul>
<h3 id="content">Content<a class="headerlink" href="#content" title="Permanent link">&para;</a></h3>
<ul>
<li>The content is set based on the <strong>Body</strong> field of the input log record.</li>
<li>If the <strong>Body</strong> field is not a string type, the value is stringified. In case of complex types, it is stringified as a JSON string. For kvlist_value type, see the differences between data models in the <a href="#otlp-structured-logs">Log ingestion API processing</a> section below for more details.</li>
</ul>
<h3 id="attributes">Attributes<a class="headerlink" href="#attributes" title="Permanent link">&para;</a></h3>
<ul>
<li>Contains all other attributes from the input record's attributes contained in the sections: <strong>Resource</strong>, <strong>InstrumentationScope</strong>, and <strong>Attributes</strong>.</li>
<li>The <code>TraceID</code> and <code>SpanID</code> attributes are mapped to the <code>trace_id</code> and <code>span_id</code> fields, and their values are converted to hexadecimal representation (e.g., <code>0xCAFEBABE</code>).</li>
<li>Automatic attribute. The <code>dt.auth.origin</code> attribute is automatically added to every log record ingested via API. This attribute is the public part of the API key that the log source authorizes to connect to the generic log ingest API.</li>
</ul>
<p>All attributes should preferably map to <strong>semantic attributes</strong> for Dynatrace to interpret them correctly.</p>
<ul>
<li>Logs on Grail: All attributes can be used in queries, though Semantic Dictionary helps Davis AI in the interpretation of the logs. Refer to the <a href="/docs/semantic-dictionary" title="The Semantic Dictionary defines standardized field names used across monitoring data types like logs, events, spans, metrics, and entities.">Semantic Dictionary</a> for more details.</li>
<li>Log Monitoring Classic: Refer to the <a href="/docs/analyze-explore-automate/log-monitoring/acquire-log-data/logs-classic-ingestion-api/log-classic-semantic-attributes" title="Supported semantic attributes that are indexed in Log Monitoring Classic.">Semantic attributes (Logs Classic)</a> for more details.</li>
</ul>
<h2 id="data-types">Data types<a class="headerlink" href="#data-types" title="Permanent link">&para;</a></h2>
<p>Dynatrace supports OpenTelemetry data types as described in the sections below.</p>
<h3 id="scalar-value">Scalar value<a class="headerlink" href="#scalar-value" title="Permanent link">&para;</a></h3>
<p>Scalar values are transformed as follows:</p>
<ul>
<li>Logs on Grail with OpenPipeline custom processing (Dynatrace SaaS version 1.295+, Environment ActiveGate version 1.295+): All JSON data types (string, number, boolean, null) are supported. All attributes can be used in queries. Keys are case-sensitive.</li>
<li>Logs on Grail with OpenPipeline routed to Classic Pipeline: All attribute keys are lowercased and all attribute values are stringified. All attributes can be used in queries.</li>
<li>Log Monitoring Classic: All attribute keys are lowercased and all attribute values are stringified. Custom attributes and semantic attributes can generally be used in queries.</li>
</ul>
<h3 id="byte-array">Byte array<a class="headerlink" href="#byte-array" title="Permanent link">&para;</a></h3>
<p>Byte arrays are converted to base64-encoded strings. For example, the following array</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>[0x68, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x77, 0x6f, 0x72, 0x6c, 0x64]
</code></pre></div>
<p>is transformed and ingested as <code>aGVsbG8gd29yZA==</code>.</p>
<h3 id="array">Array<a class="headerlink" href="#array" title="Permanent link">&para;</a></h3>
<p>Array attribute values are converted to arrays of a uniform type. The target type is chosen according to the following rules:</p>
<ul>
<li>Complex values, such as arrays, or objects are mapped to JSON string values.</li>
<li>If any value in the array is a string, or if any value must be converted to a string (e.g., an object or array), the target type of the entire array is string.</li>
<li>If all values in the source array are numeric, the target array type is numeric.</li>
<li>Null values are considered compatible with any type.</li>
</ul>
<h3 id="map">Map<a class="headerlink" href="#map" title="Permanent link">&para;</a></h3>
<p>Map processing depends on the data model used. See <a href="#otlp-structured-logs">Log ingestion API processing</a> below for more details.</p>
<p>For example, this attribute map <code>planet</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>{
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>&quot;name&quot;: &quot;earth&quot;
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>&quot;system&quot; : {
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>&quot;name&quot;: &quot;solar&quot;,
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>
<a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>
<a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a>&quot;galaxy&quot;: {
<a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a>
<a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a>
<a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a>
<a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a>&quot;name&quot;: &quot;milky way&quot;,
<a id="__codelineno-45-22" name="__codelineno-45-22" href="#__codelineno-45-22"></a>
<a id="__codelineno-45-23" name="__codelineno-45-23" href="#__codelineno-45-23"></a>
<a id="__codelineno-45-24" name="__codelineno-45-24" href="#__codelineno-45-24"></a>
<a id="__codelineno-45-25" name="__codelineno-45-25" href="#__codelineno-45-25"></a>&quot;group&quot;: {
<a id="__codelineno-45-26" name="__codelineno-45-26" href="#__codelineno-45-26"></a>
<a id="__codelineno-45-27" name="__codelineno-45-27" href="#__codelineno-45-27"></a>
<a id="__codelineno-45-28" name="__codelineno-45-28" href="#__codelineno-45-28"></a>
<a id="__codelineno-45-29" name="__codelineno-45-29" href="#__codelineno-45-29"></a>&quot;name&quot;: &quot;local&quot;
<a id="__codelineno-45-30" name="__codelineno-45-30" href="#__codelineno-45-30"></a>
<a id="__codelineno-45-31" name="__codelineno-45-31" href="#__codelineno-45-31"></a>
<a id="__codelineno-45-32" name="__codelineno-45-32" href="#__codelineno-45-32"></a>
<a id="__codelineno-45-33" name="__codelineno-45-33" href="#__codelineno-45-33"></a>}
<a id="__codelineno-45-34" name="__codelineno-45-34" href="#__codelineno-45-34"></a>
<a id="__codelineno-45-35" name="__codelineno-45-35" href="#__codelineno-45-35"></a>
<a id="__codelineno-45-36" name="__codelineno-45-36" href="#__codelineno-45-36"></a>
<a id="__codelineno-45-37" name="__codelineno-45-37" href="#__codelineno-45-37"></a>}
<a id="__codelineno-45-38" name="__codelineno-45-38" href="#__codelineno-45-38"></a>
<a id="__codelineno-45-39" name="__codelineno-45-39" href="#__codelineno-45-39"></a>
<a id="__codelineno-45-40" name="__codelineno-45-40" href="#__codelineno-45-40"></a>
<a id="__codelineno-45-41" name="__codelineno-45-41" href="#__codelineno-45-41"></a>}
<a id="__codelineno-45-42" name="__codelineno-45-42" href="#__codelineno-45-42"></a>
<a id="__codelineno-45-43" name="__codelineno-45-43" href="#__codelineno-45-43"></a>
<a id="__codelineno-45-44" name="__codelineno-45-44" href="#__codelineno-45-44"></a>
<a id="__codelineno-45-45" name="__codelineno-45-45" href="#__codelineno-45-45"></a>}
</code></pre></div>
<p>would be flattened into four attributes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>&quot;planet.name&quot;: &quot;earth&quot;
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>&quot;planet.system.name&quot;: &quot;solar&quot;
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a>&quot;planet.system.galaxy.name&quot;: &quot;milky way&quot;
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>&quot;planet.system.galaxy.group.name&quot;: &quot;local&quot;
</code></pre></div>
<ul>
<li>Scalar values are ingested in their string representation (see <a href="#scalar-value">scalar value</a>).</li>
<li>Byte arrays are ingested as Base64 strings (see <a href="#byte-array">byte array</a>).</li>
<li><code>Any</code> arrays are ingested as lists, with values being transformed as <a href="#array">arrays</a>.</li>
<li>Maps are flattened as outlined above (<a href="#ingestion-limits">up to five levels</a>).</li>
</ul>
<h2 id="attribute-ingestion">Attribute ingestion<a class="headerlink" href="#attribute-ingestion" title="Permanent link">&para;</a></h2>
<p>OpenTelemetry supports attributes at different levels in an OpenTelemetry log request, such as the resource level, scope level, and record level.</p>
<p>When Dynatrace ingests OpenTelemetry logs, it resolves duplicate attributes and automatically recognizes certain attributes names.</p>
<h3 id="duplicate-attributes">Duplicate attributes<a class="headerlink" href="#duplicate-attributes" title="Permanent link">&para;</a></h3>
<p>Dynatrace resolves duplicate attribute names automatically.
The exact method depends on the data model.</p>
<h4 id="flattened-data-model">Flattened data model<a class="headerlink" href="#flattened-data-model" title="Permanent link">&para;</a></h4>
<p>When attributes are saved in a flattened fashion on the Dynatrace side, there may be name collisions if attributes on different levels share the same name. Dynatrace resolves this by prefixing duplicate attributes with <code>overwritten[COUNTER].</code>. The counter value indicates how many times the attribute name has been already encountered as a duplicate.</p>
<p>For example, if you have three attributes all named <code>my.attribute</code> on the resource, scope, and log levels:</p>
<ul>
<li>The resource attribute is ingested as <code>my.attribute</code>.</li>
<li>The scope attribute is ingested as <code>overwritten1.my.attribute</code>.</li>
<li>The log attribute is ingested as <code>overwritten2.my.attribute</code>.</li>
</ul>
<h4 id="raw-data-model">Raw data model<a class="headerlink" href="#raw-data-model" title="Permanent link">&para;</a></h4>
<p>In the raw data model, OTLP resource attributes and OTLP attributes are parsed into Dynatrace top-level attributes, and the OTLP body is parsed into the content.</p>
<p>OTLP resource attributes and OTLP attributes are parsed into Dynatrace top-level attributes, and the OTLP body is parsed into the content.</p>
<p>Dynatrace prefixes duplicate attributes with an incrementing counter, for example <code>overwritten1.myattribute</code>. The counter value indicates how many times the attribute has been encountered as a duplicate. This avoids name collisions when attributes at different OTLP levels share the same name.</p>
<h3 id="data-transformation-and-automatic-parsing">Data transformation and automatic parsing<a class="headerlink" href="#data-transformation-and-automatic-parsing" title="Permanent link">&para;</a></h3>
<p>A number of attribute names are automatically recognized by Dynatrace and mapped to the respective Dynatrace log field.
These fields are defined in the Semantic Dictionary, see <a href="/docs/semantic-dictionary/model/log" title="Get to know the Semantic Dictionary models related to Log Analytics.">Log Management and Analytics</a>.</p>
<p>The timestamp, severity, and log message are set based on keys present in the input JSON object, as described in the following sections.</p>
<p>For a full list of attributes and their names, see <a href="/docs/dynatrace-api/environment-api/log-monitoring-v2/post-ingest-logs#request-body-objects" title="Push custom logs to Dynatrace via the Log Monitoring API v2.">Log Monitoring API v2 - POST ingest logs</a>.</p>
<h4 id="timestamp_1">Timestamp<a class="headerlink" href="#timestamp_1" title="Permanent link">&para;</a></h4>
<p>The timestamp (<code>timestamp</code>) is determined based on one of the following, evaluated in order.</p>
<ol>
<li>The <code>OTLP message timestamp</code> field.</li>
<li>The content of the body (if the body is a map).</li>
<li>The content of the OTLP log record.</li>
</ol>
<p>If the timestamp is taken from the body or OTLP log record, the value is the first found attribute in the following list, evaluated in order:</p>
<ol>
<li><code>timestamp</code></li>
<li><code>@timestamp</code></li>
<li><code>_timestamp</code></li>
<li><code>eventtime</code></li>
<li><code>date</code></li>
<li><code>published_date</code></li>
<li><code>syslog.timestamp</code></li>
<li><code>syslog.timestamp</code></li>
<li><code>epochSecond</code></li>
<li><code>startTime</code></li>
<li><code>datetime</code></li>
<li><code>ts</code></li>
<li><code>timeMillis</code></li>
<li><code>@t</code></li>
</ol>
<p>Supported timestamp formats are: <code>UTC milliseconds</code>, <code>RFC3339</code>, and <code>RFC3164</code>.
For unsupported timestamp formats, the current timestamp is used, and the value of the unsupported format is stored in the <code>unparsed_timestamp</code> attribute.</p>
<p>Log records older than the <a href="/docs/analyze-explore-automate/logs/lma-limits#log-ingestion-limits" title="Default limits for the latest version of Dynatrace Log Management and Analytics.">log age limit</a> are discarded. Timestamps more than 10 minutes ahead of the current time are replaced with the current time.</p>
<p>If there is no supported timestamp key in the log record, the default value is the current timestamp.</p>
<p>If there is no timezone in the timestamp, the default timezone is UTC.</p>
<h4 id="severity">Severity<a class="headerlink" href="#severity" title="Permanent link">&para;</a></h4>
<p>The severity (<code>loglevel</code>), is determined based on one of the following, evaluated in order.</p>
<ol>
<li>The <code>OTLP message severity</code> field.</li>
<li>The <code>severityText</code> field.</li>
<li>The content of the body (if the body is a map).</li>
<li>The content of the OTLP log record.</li>
</ol>
<p>If the severity is taken from the body or OTLP log record, the value is the first found attribute in the following list, evaluated in order:</p>
<ol>
<li><code>loglevel</code></li>
<li><code>status</code></li>
<li><code>severity</code></li>
<li><code>level</code></li>
<li><code>syslog.severity</code></li>
</ol>
<p>The default value is <code>NONE</code>.</p>
<h4 id="log-message">Log message<a class="headerlink" href="#log-message" title="Permanent link">&para;</a></h4>
<p>The log message (<code>content</code>), is determined based on the <code>OTLP log record body</code> field.</p>
<ul>
<li>
<p>If body is a scalar value, log content is set to the string representation of that value.</p>
</li>
<li>
<p>If not, further processing depends on the data model:</p>
</li>
<li>
<p>Flattened model:</p>
<ul>
<li>When the body is a map, content is set based on one of the following body attributes: content, message, payload, body, log (or left empty when no such key is present).</li>
<li>When the body is an array, the content is set to the string representation of the array.</li>
<li>Raw model: The content is set to the string representation of the array or map in the body.</li>
</ul>
</li>
</ul>
<h2 id="ingestion-limits">Ingestion limits<a class="headerlink" href="#ingestion-limits" title="Permanent link">&para;</a></h2>
<p>See <a href="/docs/analyze-explore-automate/logs/lma-limits" title="Default limits for the latest version of Dynatrace Log Management and Analytics.">Log Management and Analytics default limits</a> and <a href="/docs/analyze-explore-automate/log-monitoring/log-monitoring-limits" title="Default limits for the latest version of Dynatrace Log Monitoring.">Log Monitoring default limits (Logs Classic)</a> for the limits applied to ingested log requests, their attributes, and their attribute values.</p>
<h2 id="log-ingestion-api-processing">Log ingestion API processing<a class="headerlink" href="#log-ingestion-api-processing" title="Permanent link">&para;</a></h2>
<p>There are two data models that identify how structured logs are processed by log ingestion endpoints: <strong>raw</strong> and <strong>flattened</strong>. The difference between the two is in how attributes with object/dictionary values are transformed.</p>
<p>If this configuration option is not specified, the default behavior depends on when your environment was created.</p>
<ul>
<li>For Dynatrace version 1.331+: Raw.</li>
<li>For Dynatrace versions 1.330 and earlier: Flattened.</li>
</ul>
<p>Escaping in output examples is for visualization purposes only. <code>\"</code> is billed as one character.</p>
<h3 id="raw-data-model_1">Raw data model<a class="headerlink" href="#raw-data-model_1" title="Permanent link">&para;</a></h3>
<p>The raw data model transforms the content of structured logs as described in the sections below. All the following examples apply to Log ingestion API endpoints available on Environment ActiveGateand SaaS.</p>
<p>When using log shippers such as <a href="/docs/analyze-explore-automate/logs/lma-log-ingestion/lma-stream-logs-with-fluent-bit" title="Integrate Fluent Bit to stream logs to Dynatrace.">Fluentbit</a>, <a href="/docs/analyze-explore-automate/logs/lma-log-ingestion/lma-stream-logs-fluentd-k8s" title="Integrate Fluentd with Dynatrace to stream logs from nodes and pods to Dynatrace.">Fluentd</a> or <a href="/docs/analyze-explore-automate/logs/lma-log-ingestion/lma-stream-logs-with-logstash" title="Integrate Logstash to stream logs from nodes and pods to Dynatrace.">Logstash</a>, avoid using JSON parsers on the shipper side and let Dynatrace handle the JSON parsing instead. This approach reduces processing overhead on your log shipper and ensures consistent parsing behavior.</p>
<h4 id="maps-and-arrays-in-attributes">Maps and arrays in attributes<a class="headerlink" href="#maps-and-arrays-in-attributes" title="Permanent link">&para;</a></h4>
<p>For the raw data model, the map attribute values are turned into a JSON string, and the array attribute values are turned into an array of the uniform type.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>body: &quot;Hello world!&quot;
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>Resource:
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>- &quot;any-attr-type-3&quot;: {&quot;3&quot; = &quot;c&quot;}
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a>
<a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a>Scope:
<a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a>
<a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a>
<a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a>
<a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a>- &quot;any-attr-type-2&quot;: {&quot;2&quot; = &quot;b&quot;}
<a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a>
<a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a>
<a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a>
<a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a>Attributes:
<a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a>
<a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a>
<a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a>
<a id="__codelineno-47-25" name="__codelineno-47-25" href="#__codelineno-47-25"></a>- &quot;any-attr-type-1&quot;: {&quot;1&quot; = &quot;a&quot;}
<a id="__codelineno-47-26" name="__codelineno-47-26" href="#__codelineno-47-26"></a>
<a id="__codelineno-47-27" name="__codelineno-47-27" href="#__codelineno-47-27"></a>
<a id="__codelineno-47-28" name="__codelineno-47-28" href="#__codelineno-47-28"></a>
<a id="__codelineno-47-29" name="__codelineno-47-29" href="#__codelineno-47-29"></a>- &quot;any-attr-type-4&quot;:
<a id="__codelineno-47-30" name="__codelineno-47-30" href="#__codelineno-47-30"></a>
<a id="__codelineno-47-31" name="__codelineno-47-31" href="#__codelineno-47-31"></a>
<a id="__codelineno-47-32" name="__codelineno-47-32" href="#__codelineno-47-32"></a>
<a id="__codelineno-47-33" name="__codelineno-47-33" href="#__codelineno-47-33"></a>[ &quot;val1&quot;, 10, -123.456, false, 0x01020304 ]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>√¢¬Ä¬úcontent√¢¬Ä¬ù: &quot;Hello world!&quot;
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>&quot;any-attr-type-1&quot;: &quot;{\&quot;1\&quot;: \&quot;a\&quot;}&quot;
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>&quot;any-attr-type-2&quot;: &quot;{\&quot;2\&quot;: \&quot;b\&quot;}&quot;
<a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a>
<a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a>
<a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a>
<a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a>&quot;any-attr-type-3&quot;: &quot;{\&quot;3\&quot;: \&quot;c\&quot;}&quot;
<a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a>
<a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a>
<a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a>
<a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a>&quot;any-attr-type-4&quot;:
<a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a>
<a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a>
<a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a>
<a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a>[&quot;val1&quot;, &quot;10&quot;, &quot;-123.456&quot;, &quot;false&quot;, &quot;AQIDBA==&quot;]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>KeyValue {
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>key: &quot;test&quot;
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a>
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>value: {
<a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a>
<a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a>
<a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a>
<a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a>kvlist_value: {
<a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a>
<a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a>
<a id="__codelineno-49-16" name="__codelineno-49-16" href="#__codelineno-49-16"></a>
<a id="__codelineno-49-17" name="__codelineno-49-17" href="#__codelineno-49-17"></a>values: [
<a id="__codelineno-49-18" name="__codelineno-49-18" href="#__codelineno-49-18"></a>
<a id="__codelineno-49-19" name="__codelineno-49-19" href="#__codelineno-49-19"></a>
<a id="__codelineno-49-20" name="__codelineno-49-20" href="#__codelineno-49-20"></a>
<a id="__codelineno-49-21" name="__codelineno-49-21" href="#__codelineno-49-21"></a>{
<a id="__codelineno-49-22" name="__codelineno-49-22" href="#__codelineno-49-22"></a>
<a id="__codelineno-49-23" name="__codelineno-49-23" href="#__codelineno-49-23"></a>
<a id="__codelineno-49-24" name="__codelineno-49-24" href="#__codelineno-49-24"></a>
<a id="__codelineno-49-25" name="__codelineno-49-25" href="#__codelineno-49-25"></a>key: &quot;attribute&quot;
<a id="__codelineno-49-26" name="__codelineno-49-26" href="#__codelineno-49-26"></a>
<a id="__codelineno-49-27" name="__codelineno-49-27" href="#__codelineno-49-27"></a>
<a id="__codelineno-49-28" name="__codelineno-49-28" href="#__codelineno-49-28"></a>
<a id="__codelineno-49-29" name="__codelineno-49-29" href="#__codelineno-49-29"></a>value: {
<a id="__codelineno-49-30" name="__codelineno-49-30" href="#__codelineno-49-30"></a>
<a id="__codelineno-49-31" name="__codelineno-49-31" href="#__codelineno-49-31"></a>
<a id="__codelineno-49-32" name="__codelineno-49-32" href="#__codelineno-49-32"></a>
<a id="__codelineno-49-33" name="__codelineno-49-33" href="#__codelineno-49-33"></a>kvlist_value: {
<a id="__codelineno-49-34" name="__codelineno-49-34" href="#__codelineno-49-34"></a>
<a id="__codelineno-49-35" name="__codelineno-49-35" href="#__codelineno-49-35"></a>
<a id="__codelineno-49-36" name="__codelineno-49-36" href="#__codelineno-49-36"></a>
<a id="__codelineno-49-37" name="__codelineno-49-37" href="#__codelineno-49-37"></a>values: [
<a id="__codelineno-49-38" name="__codelineno-49-38" href="#__codelineno-49-38"></a>
<a id="__codelineno-49-39" name="__codelineno-49-39" href="#__codelineno-49-39"></a>
<a id="__codelineno-49-40" name="__codelineno-49-40" href="#__codelineno-49-40"></a>
<a id="__codelineno-49-41" name="__codelineno-49-41" href="#__codelineno-49-41"></a>{ key: &quot;one&quot;, value: { string_value: &quot;value 1&quot; } },
<a id="__codelineno-49-42" name="__codelineno-49-42" href="#__codelineno-49-42"></a>
<a id="__codelineno-49-43" name="__codelineno-49-43" href="#__codelineno-49-43"></a>
<a id="__codelineno-49-44" name="__codelineno-49-44" href="#__codelineno-49-44"></a>
<a id="__codelineno-49-45" name="__codelineno-49-45" href="#__codelineno-49-45"></a>{ key: &quot;two&quot;, value: { string_value: &quot;value 2&quot; } }
<a id="__codelineno-49-46" name="__codelineno-49-46" href="#__codelineno-49-46"></a>
<a id="__codelineno-49-47" name="__codelineno-49-47" href="#__codelineno-49-47"></a>
<a id="__codelineno-49-48" name="__codelineno-49-48" href="#__codelineno-49-48"></a>
<a id="__codelineno-49-49" name="__codelineno-49-49" href="#__codelineno-49-49"></a>]
<a id="__codelineno-49-50" name="__codelineno-49-50" href="#__codelineno-49-50"></a>
<a id="__codelineno-49-51" name="__codelineno-49-51" href="#__codelineno-49-51"></a>
<a id="__codelineno-49-52" name="__codelineno-49-52" href="#__codelineno-49-52"></a>
<a id="__codelineno-49-53" name="__codelineno-49-53" href="#__codelineno-49-53"></a>}
<a id="__codelineno-49-54" name="__codelineno-49-54" href="#__codelineno-49-54"></a>
<a id="__codelineno-49-55" name="__codelineno-49-55" href="#__codelineno-49-55"></a>
<a id="__codelineno-49-56" name="__codelineno-49-56" href="#__codelineno-49-56"></a>
<a id="__codelineno-49-57" name="__codelineno-49-57" href="#__codelineno-49-57"></a>}
<a id="__codelineno-49-58" name="__codelineno-49-58" href="#__codelineno-49-58"></a>
<a id="__codelineno-49-59" name="__codelineno-49-59" href="#__codelineno-49-59"></a>
<a id="__codelineno-49-60" name="__codelineno-49-60" href="#__codelineno-49-60"></a>
<a id="__codelineno-49-61" name="__codelineno-49-61" href="#__codelineno-49-61"></a>}
<a id="__codelineno-49-62" name="__codelineno-49-62" href="#__codelineno-49-62"></a>
<a id="__codelineno-49-63" name="__codelineno-49-63" href="#__codelineno-49-63"></a>
<a id="__codelineno-49-64" name="__codelineno-49-64" href="#__codelineno-49-64"></a>
<a id="__codelineno-49-65" name="__codelineno-49-65" href="#__codelineno-49-65"></a>]
<a id="__codelineno-49-66" name="__codelineno-49-66" href="#__codelineno-49-66"></a>
<a id="__codelineno-49-67" name="__codelineno-49-67" href="#__codelineno-49-67"></a>
<a id="__codelineno-49-68" name="__codelineno-49-68" href="#__codelineno-49-68"></a>
<a id="__codelineno-49-69" name="__codelineno-49-69" href="#__codelineno-49-69"></a>}
<a id="__codelineno-49-70" name="__codelineno-49-70" href="#__codelineno-49-70"></a>
<a id="__codelineno-49-71" name="__codelineno-49-71" href="#__codelineno-49-71"></a>
<a id="__codelineno-49-72" name="__codelineno-49-72" href="#__codelineno-49-72"></a>
<a id="__codelineno-49-73" name="__codelineno-49-73" href="#__codelineno-49-73"></a>}
<a id="__codelineno-49-74" name="__codelineno-49-74" href="#__codelineno-49-74"></a>
<a id="__codelineno-49-75" name="__codelineno-49-75" href="#__codelineno-49-75"></a>
<a id="__codelineno-49-76" name="__codelineno-49-76" href="#__codelineno-49-76"></a>
<a id="__codelineno-49-77" name="__codelineno-49-77" href="#__codelineno-49-77"></a>}
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>&quot;test&quot;: &quot;{ \&quot;attribute\&quot;: {\&quot;one\&quot;: \&quot;value 1\&quot;, \&quot;two\&quot;: \&quot;value 2\&quot; } }&quot;
</code></pre></div>
<h4 id="map-in-body">Map in body<a class="headerlink" href="#map-in-body" title="Permanent link">&para;</a></h4>
<p>In this case, the <strong>Body</strong> field of the input log record is converted to a JSON string.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>Body:
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>{
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>
<a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a>
<a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a>&quot;content&quot; = &quot;Hello World!&quot;,
<a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a>
<a id="__codelineno-51-11" name="__codelineno-51-11" href="#__codelineno-51-11"></a>
<a id="__codelineno-51-12" name="__codelineno-51-12" href="#__codelineno-51-12"></a>
<a id="__codelineno-51-13" name="__codelineno-51-13" href="#__codelineno-51-13"></a>&quot;my-body-attr-1&quot;: &quot;abc&quot;,
<a id="__codelineno-51-14" name="__codelineno-51-14" href="#__codelineno-51-14"></a>
<a id="__codelineno-51-15" name="__codelineno-51-15" href="#__codelineno-51-15"></a>
<a id="__codelineno-51-16" name="__codelineno-51-16" href="#__codelineno-51-16"></a>
<a id="__codelineno-51-17" name="__codelineno-51-17" href="#__codelineno-51-17"></a>&quot;my-body-nested-1&quot;: {
<a id="__codelineno-51-18" name="__codelineno-51-18" href="#__codelineno-51-18"></a>
<a id="__codelineno-51-19" name="__codelineno-51-19" href="#__codelineno-51-19"></a>
<a id="__codelineno-51-20" name="__codelineno-51-20" href="#__codelineno-51-20"></a>
<a id="__codelineno-51-21" name="__codelineno-51-21" href="#__codelineno-51-21"></a>&quot;subkey&quot;: &quot;val&quot;
<a id="__codelineno-51-22" name="__codelineno-51-22" href="#__codelineno-51-22"></a>
<a id="__codelineno-51-23" name="__codelineno-51-23" href="#__codelineno-51-23"></a>
<a id="__codelineno-51-24" name="__codelineno-51-24" href="#__codelineno-51-24"></a>
<a id="__codelineno-51-25" name="__codelineno-51-25" href="#__codelineno-51-25"></a>},
<a id="__codelineno-51-26" name="__codelineno-51-26" href="#__codelineno-51-26"></a>
<a id="__codelineno-51-27" name="__codelineno-51-27" href="#__codelineno-51-27"></a>
<a id="__codelineno-51-28" name="__codelineno-51-28" href="#__codelineno-51-28"></a>
<a id="__codelineno-51-29" name="__codelineno-51-29" href="#__codelineno-51-29"></a>&quot;@timestamp&quot;: &quot;2025-06-01 13:01:02.123&quot;,
<a id="__codelineno-51-30" name="__codelineno-51-30" href="#__codelineno-51-30"></a>
<a id="__codelineno-51-31" name="__codelineno-51-31" href="#__codelineno-51-31"></a>
<a id="__codelineno-51-32" name="__codelineno-51-32" href="#__codelineno-51-32"></a>
<a id="__codelineno-51-33" name="__codelineno-51-33" href="#__codelineno-51-33"></a>&quot;loglevel&quot;: &quot;INFO&quot;
<a id="__codelineno-51-34" name="__codelineno-51-34" href="#__codelineno-51-34"></a>
<a id="__codelineno-51-35" name="__codelineno-51-35" href="#__codelineno-51-35"></a>
<a id="__codelineno-51-36" name="__codelineno-51-36" href="#__codelineno-51-36"></a>
<a id="__codelineno-51-37" name="__codelineno-51-37" href="#__codelineno-51-37"></a>}
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>&quot;content&quot;: &quot;{ \&quot;content\&quot; = \&quot;Hello World!\&quot;,
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>\&quot;my-body-attr-1\&quot;: \&quot;abc\&quot;,
<a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a>
<a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a>
<a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a>
<a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a>\&quot;my-body-nested-1\&quot;: {
<a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a>
<a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a>
<a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a>
<a id="__codelineno-52-13" name="__codelineno-52-13" href="#__codelineno-52-13"></a>\&quot;subkey\&quot;: \&quot;val\&quot;
<a id="__codelineno-52-14" name="__codelineno-52-14" href="#__codelineno-52-14"></a>
<a id="__codelineno-52-15" name="__codelineno-52-15" href="#__codelineno-52-15"></a>
<a id="__codelineno-52-16" name="__codelineno-52-16" href="#__codelineno-52-16"></a>
<a id="__codelineno-52-17" name="__codelineno-52-17" href="#__codelineno-52-17"></a>},
<a id="__codelineno-52-18" name="__codelineno-52-18" href="#__codelineno-52-18"></a>
<a id="__codelineno-52-19" name="__codelineno-52-19" href="#__codelineno-52-19"></a>
<a id="__codelineno-52-20" name="__codelineno-52-20" href="#__codelineno-52-20"></a>
<a id="__codelineno-52-21" name="__codelineno-52-21" href="#__codelineno-52-21"></a>\&quot;@timestamp\&quot;: \&quot;2025-06-01 13:01:02.123\&quot;,
<a id="__codelineno-52-22" name="__codelineno-52-22" href="#__codelineno-52-22"></a>
<a id="__codelineno-52-23" name="__codelineno-52-23" href="#__codelineno-52-23"></a>
<a id="__codelineno-52-24" name="__codelineno-52-24" href="#__codelineno-52-24"></a>
<a id="__codelineno-52-25" name="__codelineno-52-25" href="#__codelineno-52-25"></a>\&quot;loglevel\&quot;: \&quot;INFO\&quot;
<a id="__codelineno-52-26" name="__codelineno-52-26" href="#__codelineno-52-26"></a>
<a id="__codelineno-52-27" name="__codelineno-52-27" href="#__codelineno-52-27"></a>
<a id="__codelineno-52-28" name="__codelineno-52-28" href="#__codelineno-52-28"></a>
<a id="__codelineno-52-29" name="__codelineno-52-29" href="#__codelineno-52-29"></a>}&quot;
</code></pre></div>
<h4 id="body-as-array">Body as array<a class="headerlink" href="#body-as-array" title="Permanent link">&para;</a></h4>
<p>In this case, the array in the body is stringified.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>Body:
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>[ &quot;string-val&quot;, true, 12, 12.34, 0x6279746573 ]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>&quot;content&quot;: &quot;[\&quot;string-val\&quot;,true,12,12.34,\&quot;Ynl0ZXM=\&quot;]&quot;
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>...
</code></pre></div>
<h4 id="name-conflicts">Name conflicts<a class="headerlink" href="#name-conflicts" title="Permanent link">&para;</a></h4>
<p>In the raw data model, OTLP resource attributes and OTLP attributes are copied into Dynatrace top-level attributes, and the OTLP body is copied into the content.</p>
<p>Dynatrace prefixes duplicate attributes with an incrementing counter, for example <code>overwritten1.myattribute</code>. The counter value indicates how many times the attribute has been encountered as a duplicate. This avoids name collisions when attributes at different OTLP levels share the same name.</p>
<h3 id="flattened-data-model_1">Flattened data model<a class="headerlink" href="#flattened-data-model_1" title="Permanent link">&para;</a></h3>
<p>With the flattened data model, the content of structured logs is transformed as described in the sections below. All the following examples apply to Log ingestion API endpoints available on Environment ActiveGateand SaaS.</p>
<h4 id="maps-and-arrays-in-attributes_1">Maps and arrays in attributes<a class="headerlink" href="#maps-and-arrays-in-attributes_1" title="Permanent link">&para;</a></h4>
<p>In this case, the map attribute values are flattened, i.e. replaced with keys concatenated using a dot (.) until a simple value is reached in the hierarchy, and the array attribute values are turned into a custom string.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>body: &quot;Hello world!&quot;
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>Resource:
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a>- &quot;any-attr-type-3&quot;: {&quot;3&quot; = &quot;c&quot;}
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a>
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a>
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a>Scope:
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a>
<a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a>
<a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a>
<a id="__codelineno-55-17" name="__codelineno-55-17" href="#__codelineno-55-17"></a>- &quot;any-attr-type-2&quot; : {&quot;2&quot; = &quot;b&quot;}
<a id="__codelineno-55-18" name="__codelineno-55-18" href="#__codelineno-55-18"></a>
<a id="__codelineno-55-19" name="__codelineno-55-19" href="#__codelineno-55-19"></a>
<a id="__codelineno-55-20" name="__codelineno-55-20" href="#__codelineno-55-20"></a>
<a id="__codelineno-55-21" name="__codelineno-55-21" href="#__codelineno-55-21"></a>Attributes:
<a id="__codelineno-55-22" name="__codelineno-55-22" href="#__codelineno-55-22"></a>
<a id="__codelineno-55-23" name="__codelineno-55-23" href="#__codelineno-55-23"></a>
<a id="__codelineno-55-24" name="__codelineno-55-24" href="#__codelineno-55-24"></a>
<a id="__codelineno-55-25" name="__codelineno-55-25" href="#__codelineno-55-25"></a>- &quot;any-attr-type-1&quot; : {&quot;1&quot; = &quot;a&quot;}
<a id="__codelineno-55-26" name="__codelineno-55-26" href="#__codelineno-55-26"></a>
<a id="__codelineno-55-27" name="__codelineno-55-27" href="#__codelineno-55-27"></a>
<a id="__codelineno-55-28" name="__codelineno-55-28" href="#__codelineno-55-28"></a>
<a id="__codelineno-55-29" name="__codelineno-55-29" href="#__codelineno-55-29"></a>- &quot;any-attr-type-4&quot; :
<a id="__codelineno-55-30" name="__codelineno-55-30" href="#__codelineno-55-30"></a>
<a id="__codelineno-55-31" name="__codelineno-55-31" href="#__codelineno-55-31"></a>
<a id="__codelineno-55-32" name="__codelineno-55-32" href="#__codelineno-55-32"></a>
<a id="__codelineno-55-33" name="__codelineno-55-33" href="#__codelineno-55-33"></a>[ &quot;val1&quot;, 10, -123.456, false, 0x01020304 ]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>√¢¬Ä¬úcontent√¢¬Ä¬ù: &quot;Hello world!&quot;
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>&quot;any-attr-type-1.1&quot;: &quot;a&quot;
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a>
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a>
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a>&quot;any-attr-type-2.2&quot;: &quot;b&quot;
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a>
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a>
<a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a>
<a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a>&quot;any-attr-type-3.3&quot;: &quot;c&quot;
<a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a>
<a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a>
<a id="__codelineno-56-16" name="__codelineno-56-16" href="#__codelineno-56-16"></a>
<a id="__codelineno-56-17" name="__codelineno-56-17" href="#__codelineno-56-17"></a>&quot;any-attr-type-4&quot;:
<a id="__codelineno-56-18" name="__codelineno-56-18" href="#__codelineno-56-18"></a>
<a id="__codelineno-56-19" name="__codelineno-56-19" href="#__codelineno-56-19"></a>
<a id="__codelineno-56-20" name="__codelineno-56-20" href="#__codelineno-56-20"></a>
<a id="__codelineno-56-21" name="__codelineno-56-21" href="#__codelineno-56-21"></a>[&quot;val1&quot;, 10, -123.456, false, &quot;AQIDBA==&quot;]
</code></pre></div>
<p>Flattening proceeds up to the maximum nesting level specified by the <strong>Nested objects</strong> limit. Structures nested deeper than this are replaced with the string value <code>&lt;truncated due to nesting limit&gt;</code>. See the <a href="#ingestion-limits">Ingestion limits</a> section for details.</p>
<h4 id="map-in-body_1">Map in body<a class="headerlink" href="#map-in-body_1" title="Permanent link">&para;</a></h4>
<p>In this case, the map attributes are merged with the log record.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>Body:
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>{
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a>
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a>
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a>
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a>&quot;content&quot; = &quot;Hello World!&quot;,
<a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a>
<a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a>
<a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a>
<a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a>&quot;my-body-attr-1&quot;: &quot;abc&quot;,
<a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a>
<a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a>
<a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a>
<a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a>&quot;my-body-nested-1&quot;: {
<a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a>
<a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a>
<a id="__codelineno-57-20" name="__codelineno-57-20" href="#__codelineno-57-20"></a>
<a id="__codelineno-57-21" name="__codelineno-57-21" href="#__codelineno-57-21"></a>&quot;subkey&quot;: &quot;val&quot;
<a id="__codelineno-57-22" name="__codelineno-57-22" href="#__codelineno-57-22"></a>
<a id="__codelineno-57-23" name="__codelineno-57-23" href="#__codelineno-57-23"></a>
<a id="__codelineno-57-24" name="__codelineno-57-24" href="#__codelineno-57-24"></a>
<a id="__codelineno-57-25" name="__codelineno-57-25" href="#__codelineno-57-25"></a>},
<a id="__codelineno-57-26" name="__codelineno-57-26" href="#__codelineno-57-26"></a>
<a id="__codelineno-57-27" name="__codelineno-57-27" href="#__codelineno-57-27"></a>
<a id="__codelineno-57-28" name="__codelineno-57-28" href="#__codelineno-57-28"></a>
<a id="__codelineno-57-29" name="__codelineno-57-29" href="#__codelineno-57-29"></a>&quot;@timestamp&quot;: &quot;2025-06-01 13:01:02.123&quot;,
<a id="__codelineno-57-30" name="__codelineno-57-30" href="#__codelineno-57-30"></a>
<a id="__codelineno-57-31" name="__codelineno-57-31" href="#__codelineno-57-31"></a>
<a id="__codelineno-57-32" name="__codelineno-57-32" href="#__codelineno-57-32"></a>
<a id="__codelineno-57-33" name="__codelineno-57-33" href="#__codelineno-57-33"></a>&quot;loglevel&quot;: &quot;INFO&quot;
<a id="__codelineno-57-34" name="__codelineno-57-34" href="#__codelineno-57-34"></a>
<a id="__codelineno-57-35" name="__codelineno-57-35" href="#__codelineno-57-35"></a>
<a id="__codelineno-57-36" name="__codelineno-57-36" href="#__codelineno-57-36"></a>
<a id="__codelineno-57-37" name="__codelineno-57-37" href="#__codelineno-57-37"></a>}
<a id="__codelineno-57-38" name="__codelineno-57-38" href="#__codelineno-57-38"></a>
<a id="__codelineno-57-39" name="__codelineno-57-39" href="#__codelineno-57-39"></a>
<a id="__codelineno-57-40" name="__codelineno-57-40" href="#__codelineno-57-40"></a>
<a id="__codelineno-57-41" name="__codelineno-57-41" href="#__codelineno-57-41"></a>Attributes:
<a id="__codelineno-57-42" name="__codelineno-57-42" href="#__codelineno-57-42"></a>
<a id="__codelineno-57-43" name="__codelineno-57-43" href="#__codelineno-57-43"></a>
<a id="__codelineno-57-44" name="__codelineno-57-44" href="#__codelineno-57-44"></a>
<a id="__codelineno-57-45" name="__codelineno-57-45" href="#__codelineno-57-45"></a>- &quot;any-attr-type-1&quot; : &quot;my-attr&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>&quot;content&quot;: &quot;Hello world!&quot;
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>&quot;timestamp&quot;: &quot;2025-06-01 13:01:02.123&quot;
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a>
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a>
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a>&quot;loglevel&quot;: &quot;INFO&quot;
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a>
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a>
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a>
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a>&quot;any-attr-type-1&quot;: &quot;my-attr&quot;
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a>
<a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a>
<a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a>
<a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a>&quot;my-body-attr-1&quot;: &quot;abc&quot;
<a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a>
<a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a>
<a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a>
<a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a>&quot;my-body-nested-1.subkey&quot;: &quot;val&quot;
</code></pre></div>
<h4 id="body-as-array_1">Body as array<a class="headerlink" href="#body-as-array_1" title="Permanent link">&para;</a></h4>
<p>In this case, the array in the body is stringified.</p>
<p>Input</p>
<p>Log ingestion API endpoint output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>Body:
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>[ &quot;string-val&quot;, true, 12, 12.34, 0x6279746573 ]
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>&quot;content&quot;: &quot;[\&quot;string-val\&quot;,true,12,12.34,\&quot;Ynl0ZXM=\&quot;]&quot;
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>...
</code></pre></div>
<h4 id="content-related-behavior">Content-related behavior:<a class="headerlink" href="#content-related-behavior" title="Permanent link">&para;</a></h4>
<p>If the Body field is of <strong>kvlist_value</strong> type (a list of key-value pairs), the structure is processed in the same way as log record attributes, including flattening and conflict resolution.</p>
<p>Attributes found in <strong>Body</strong> may also be used for setting the <code>timestamp</code>, <code>loglevel</code>, and <code>content</code> attributes of the log record, as described below.</p>
<h5 id="timestamp_2">Timestamp<a class="headerlink" href="#timestamp_2" title="Permanent link">&para;</a></h5>
<ul>
<li>If the <code>timestamp</code> cannot be set based on the <strong>Timestamp</strong> field, the first of the following keys found in <strong>Body</strong> is used: <code>timestamp</code>, <code>@timestamp</code>, <code>_timestamp</code>, <code>eventtime</code>, <code>date</code>, <code>published_date</code>, <code>syslog.timestamp</code>, <code>time</code>, <code>epochSecond</code>, <code>startTime</code>, <code>datetime</code>, <code>ts</code>, <code>timeMillis</code>, <code>@t</code>.</li>
<li>Supported timestamp formats: <code>UTC milliseconds</code>, <code>RFC3339</code>, and <code>RFC3164</code>.</li>
<li>The default value is the current timestamp and the default timezone is UTC if it's missing in timestamp.</li>
</ul>
<h5 id="log-level_1">Log level<a class="headerlink" href="#log-level_1" title="Permanent link">&para;</a></h5>
<ul>
<li>If the <code>loglevel</code> cannot be set based on the <strong>Severity</strong> field, the first of the following keys found in <strong>Body</strong> is used: <code>loglevel</code>, <code>status</code>, <code>severity</code>, <code>level</code>, <code>syslog.severity</code>.</li>
<li>The default value is <code>NONE</code>.</li>
</ul>
<h5 id="content_1">Content<a class="headerlink" href="#content_1" title="Permanent link">&para;</a></h5>
<ul>
<li><code>content</code> is set based on the first of the following keys found in <strong>Body</strong>: <code>content</code>, <code>message</code>, <code>payload</code>, <code>body</code>, <code>log</code>, <code>_raw</code> (<code>_raw</code> is supported only in the raw data model).</li>
<li>If no content attribute is found among supported content keys, the <code>content</code> is set to an empty string.</li>
</ul>
<h4 id="name-conflicts_1">Name conflicts<a class="headerlink" href="#name-conflicts_1" title="Permanent link">&para;</a></h4>
<p>When attributes are saved in a flattened fashion on the Dynatrace side, there may be name collisions if attributes on different levels share the same name. Dynatrace resolves this by prefixing duplicate attributes with <code>overwritten[COUNTER].</code>. The counter value indicates how many times the attribute name has been already encountered as a duplicate.</p>
<p>For example, if you have three attributes all named <code>my.attribute</code> on the resource, scope, and log levels:</p>
<ul>
<li>the resource attribute is ingested as <code>my.attribute</code></li>
<li>the scope attribute is ingested as <code>overwritten1.my.attribute</code></li>
<li>the log attribute is ingested as <code>overwritten2.my.attribute</code></li>
</ul>
<h2 id="additional-attributers-handling">Additional attributers handling<a class="headerlink" href="#additional-attributers-handling" title="Permanent link">&para;</a></h2>
<p>The Log ingestion API additionally accepts log attributes through:</p>
<ul>
<li>Query parameters</li>
<li>Special header: <code>X-Dynatrace-Attr</code></li>
</ul>
<p>These attributes are merged with those provided in the OpenTelemetry log request according to the rules described below.</p>
<h3 id="query-parameter-attributes">Query parameter attributes<a class="headerlink" href="#query-parameter-attributes" title="Permanent link">&para;</a></h3>
<ul>
<li>All query parameters passed to the Log ingestion API endpoint are added to the log record attributes.</li>
<li>If a parameter key appears multiple times, all values are captured as an array attribute.</li>
<li>Keys and values follow the same attribute parsing rules as log request attributes.</li>
<li>Certain parameters are processed by the API for internal purposes and never appear as log record attributes, even if explicitly provided (such as those used in the <strong>X√¢¬Ä¬ëDynatrace√¢¬Ä¬ëOptions</strong> header). For the complete list of reserved parameter names and their processing behavior, see the <a href="/docs/dynatrace-api/environment-api/opentelemetry/post-logs#parameters" title="Send OpenTelemetry logs to Dynatrace via API.">API documentation</a>.</li>
</ul>
<h4 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<p>Request URL</p>
<p>Resulting output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>otlphttp:
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>logs_endpoint: /api/v2/otlp/v1/logs?env=prod&amp;env=blue&amp;team=payments
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>Body: &quot;Hello World!&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>{
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a>
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a>
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a>&quot;content&quot;: &quot;Hello World!&quot;,
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a>
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a>
<a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a>
<a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a>&quot;env&quot;: [&quot;prod&quot;, &quot;blue&quot;],
<a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a>
<a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a>
<a id="__codelineno-63-12" name="__codelineno-63-12" href="#__codelineno-63-12"></a>
<a id="__codelineno-63-13" name="__codelineno-63-13" href="#__codelineno-63-13"></a>&quot;team&quot;: &quot;payments&quot;
<a id="__codelineno-63-14" name="__codelineno-63-14" href="#__codelineno-63-14"></a>
<a id="__codelineno-63-15" name="__codelineno-63-15" href="#__codelineno-63-15"></a>
<a id="__codelineno-63-16" name="__codelineno-63-16" href="#__codelineno-63-16"></a>
<a id="__codelineno-63-17" name="__codelineno-63-17" href="#__codelineno-63-17"></a>}
</code></pre></div>
<h3 id="header-based-attributes-x-dynatrace-attr">Header-based attributes (X-Dynatrace-Attr)<a class="headerlink" href="#header-based-attributes-x-dynatrace-attr" title="Permanent link">&para;</a></h3>
<p>The API supports a special header for passing additional attributes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>otlphttp:
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a>endpoint: /api/v2/otlp
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a>headers:
<a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a>
<a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a>
<a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a>
<a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a>X-Dynatrace-Attr: region=eu-central-1&amp;team=core
</code></pre></div>
<p>Rules:</p>
<ul>
<li>Keys and values follow the same attribute parsing rules as query parameters.</li>
<li>Multi-value behavior is also supported inside the header attributes.</li>
<li>Same reserved parameter names restrictions apply.</li>
</ul>
<h3 id="attributes-precedence-rules">Attributes precedence rules<a class="headerlink" href="#attributes-precedence-rules" title="Permanent link">&para;</a></h3>
<p>When attributes appear in multiple places, the Log ingestion API applies attribute precedence while still preserving body values for auditability. The attributes are applied in the following order:</p>
<ul>
<li>Query Parameters (highest precedence)</li>
<li>X-Dynatrace-Attr header</li>
<li>OpenTelemetry log request (lowest precedence; existing ingestion path)</li>
</ul>
<h4 id="override-behavior">Override behavior<a class="headerlink" href="#override-behavior" title="Permanent link">&para;</a></h4>
<p>When attributes from query parameters or the header override log request attributes:</p>
<ul>
<li>The final attribute value is set according to the attribute source precedence rules.</li>
<li>The values already present in the log request are preserved and mirrored under <code>overwrittenN.&lt;attribute_key&gt;</code>.
  Where N is an incrementing integer (1, 2, √¢¬Ä¬¶) depending on how many log request-originating values had to be preserved. This ensures uniqueness, even when multiple conflicts occur.</li>
<li>Only values originating from the log request are preserved under the <code>overwrittenN.*</code> keys. Attributes overridden by higher-precedence sources do not generate overwritten copies.</li>
</ul>
<h4 id="example_1">Example<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h4>
<p>Request</p>
<p>Resulting output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>otlphttp:
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a>logs_endpoint: /api/v2/otlp/v1/logs?team=frontend
</code></pre></div>
<p>Log Request:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>Body: &quot;Hello World!&quot;
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>Attributes:
<a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>
<a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a>
<a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a>
<a id="__codelineno-66-9" name="__codelineno-66-9" href="#__codelineno-66-9"></a>- &quot;team&quot;: &quot;backend&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>{
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>&quot;content&quot;: &quot;Hello World!&quot;,
<a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>
<a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a>
<a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a>
<a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a>&quot;team&quot;: &quot;frontend&quot;,
<a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a>
<a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a>
<a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a>
<a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a>&quot;overwritten1.team&quot;: &quot;backend&quot;
<a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a>
<a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a>
<a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a>
<a id="__codelineno-67-17" name="__codelineno-67-17" href="#__codelineno-67-17"></a>}
</code></pre></div>
<h3 id="billing-behavior">Billing behavior<a class="headerlink" href="#billing-behavior" title="Permanent link">&para;</a></h3>
<p>Attributes provided through query parameters or headers are included in billing calculations.</p>
<p>For multi-value attributes, the attribute key contributes to billing only once, regardless of how many values are present.</p>
<h2 id="related-topics_9">Related topics<a class="headerlink" href="#related-topics_9" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/dynatrace-api/environment-api/opentelemetry/post-logs" title="Send OpenTelemetry logs to Dynatrace via API.">OpenTelemetry logs ingest API</a></li>
</ul>
<hr />
<h2 id="source-about-metrics-ingestmd">Source: about-metrics-ingest.md<a class="headerlink" href="#source-about-metrics-ingestmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: About OTLP metrics ingest
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest
scraped: 2026-02-15T21:24:05.559570</p>
<hr />
<h1 id="about-otlp-metrics-ingest">About OTLP metrics ingest<a class="headerlink" href="#about-otlp-metrics-ingest" title="Permanent link">&para;</a></h1>
<h1 id="about-otlp-metrics-ingest_1">About OTLP metrics ingest<a class="headerlink" href="#about-otlp-metrics-ingest_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Explanation</li>
<li>2-min read</li>
<li>Updated on Nov 04, 2025</li>
</ul>
<p>Dynatrace version 1.254+</p>
<p>This page provides information about how Dynatrace ingests and enriches OpenTelemetry metrics.</p>
<p>Migrate from the Dynatrace OpenTelemetry metrics exporter</p>
<p>If you're still using the Dynatrace OpenTelemetry metrics exporter, we recommend that you migrate to the OTLP metrics exporter.
For more information, see <a href="https://community.dynatrace.com/t5/Open-Q-A/Migrating-from-the-Dynatrace-OTel-metrics-exporter-to-standard/m-p/286986/thread-id/37689#M37690">Migrating from the Dynatrace OTel metrics exporter to standard OTLP metrics exporter√Ø¬ª¬ø</a>.</p>
<h2 id="dynatrace-specific-mapping">Dynatrace-specific mapping<a class="headerlink" href="#dynatrace-specific-mapping" title="Permanent link">&para;</a></h2>
<p>Dynatrace maps the individual OpenTelemetry instruments to the following Dynatrace metric types:</p>
<table>
<thead>
<tr>
<th>Instrument</th>
<th>with temporality</th>
<th>maps to Dynatrace</th>
</tr>
</thead>
<tbody>
<tr>
<td>Counter</td>
<td>Delta</td>
<td>Counter</td>
</tr>
<tr>
<td>Counter</td>
<td>Cumulative</td>
<td>N/A</td>
</tr>
<tr>
<td>Gauge</td>
<td>N/A</td>
<td>Gauge</td>
</tr>
<tr>
<td>Explicit bucket histogram <a href="#fn-1-1-def">1</a></td>
<td>Delta</td>
<td>Histogram</td>
</tr>
<tr>
<td>Exponential histogram <a href="#fn-1-2-def">2</a></td>
<td>Delta</td>
<td>Exponential histogram</td>
</tr>
<tr>
<td>UpDownCounter</td>
<td>Delta</td>
<td>Counter</td>
</tr>
<tr>
<td>UpDownCounter</td>
<td>Cumulative</td>
<td>Gauge</td>
</tr>
<tr>
<td>Summary</td>
<td>N/A</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<p>1</p>
<p>Explicit bucket histograms are supported starting with Dynatrace version 1.300.</p>
<p>2</p>
<p>For exponential histograms, Dynatrace ingests the histogram's <code>min|max|sum|count</code> but doesn't ingest the buckets.</p>
<h2 id="api-limits-and-validations">API limits and validations<a class="headerlink" href="#api-limits-and-validations" title="Permanent link">&para;</a></h2>
<p>When ingesting OpenTelemetry metrics, the following limits and validations apply.</p>
<table>
<thead>
<tr>
<th>Entity</th>
<th>Limit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Metric key length, characters</td>
<td>Min: 2, Max: 255</td>
<td>The length of a metric key.</td>
</tr>
<tr>
<td>Dimension key length, characters</td>
<td>Min: 1, Max: 100</td>
<td>The length of a dimension key. If the maximum length is exceeded, the key is truncated to 100 characters.</td>
</tr>
<tr>
<td>Dimension value length, characters</td>
<td>Min: 1, Max: 255</td>
<td>The length of a dimension value. If the maximum length is exceeded, the dimension value is truncated to 255 characters.</td>
</tr>
<tr>
<td>Number of dimensions per metric data point</td>
<td>50</td>
<td>The maximum total number of dimensions in a single metric data point. If the number of dimensions is exceeded, the whole data point is dropped.</td>
</tr>
<tr>
<td>Total number of possible metric keys per environment</td>
<td>100,000</td>
<td>The maximum number of metric keys that can be active at the same time.</td>
</tr>
<tr>
<td>Number of tuples per month per metric</td>
<td>1,000,000</td>
<td>The maximum number of tuples (unique metric-dimension key-value type combinations) for each metric key for the last 30 days.</td>
</tr>
<tr>
<td>Number of tuples per month for all custom metrics</td>
<td>50,000,000</td>
<td>The maximum number of tuples (unique metric-dimension key-value type combinations) for all custom metrics for the last 30 days.</td>
</tr>
<tr>
<td>Instrument unit, characters</td>
<td>63</td>
<td>The maximum total length of the instrument unit. If the maximum length is exceeded, the unit is dropped.</td>
</tr>
<tr>
<td>Instrument description, characters</td>
<td>1,023</td>
<td>The maximum total length of the instrument description. If the maximum length is exceeded, the instrument description is truncated to 1,023 characters.</td>
</tr>
<tr>
<td>Request size</td>
<td>4 MB</td>
<td>The maximum uncompressed size of an OTLP request with a metrics payload. If the limit is exceeded, the entire request is dropped.</td>
</tr>
<tr>
<td>Metric data points</td>
<td>15,000</td>
<td>The maximum number of metric data points in an OTLP request with a metrics payload. If the limit is exceeded, the entire request is dropped.</td>
</tr>
</tbody>
</table>
<h3 id="attribute-ingestion_1">Attribute ingestion<a class="headerlink" href="#attribute-ingestion_1" title="Permanent link">&para;</a></h3>
<p>OpenTelemetry supports attributes on different levels in an OpenTelemetry metric request (that is, data points, scopes, and resources).
Because attributes are saved in a flattened fashion on the Dynatrace side, there may be name collisions if attributes on different levels share the same name.</p>
<p>To handle such name conflicts, Dynatrace applies the following order of priority to choose which attribute will be ingested:</p>
<ol>
<li>Data point attributes</li>
<li>Scope attributes</li>
<li>Resource attributes</li>
</ol>
<p>For example, if there is a data point and a scope attribute have the same name, the value of the data point will take precedence.
Similarly, if a scope and resource attribute share the same name, Dynatrace will ingest the value of the scope attribute.</p>
<h3 id="aggregation-temporality">Aggregation temporality<a class="headerlink" href="#aggregation-temporality" title="Permanent link">&para;</a></h3>
<p>The Dynatrace backend exclusively works with delta values and requires the respective aggregation temporality.
Please ensure your metrics exporter is accordingly configured or set the <a href="https://opentelemetry.io/docs/specs/otel/metrics/sdk_exporters/otlp/"><code>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</code>√Ø¬ª¬ø</a> environment variable to <code>DELTA</code>.</p>
<p>For examples on how to set the temporality under each individual language, see the <a href="/docs/ingest-from/opentelemetry/walkthroughs" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">integration walkthroughs</a>.</p>
<h3 id="metric-keys">Metric keys<a class="headerlink" href="#metric-keys" title="Permanent link">&para;</a></h3>
<ul>
<li>A metric key consists of sections separated by dots (for example, <code>dt.metrics</code>).</li>
<li>A metric key can contain lowercase and uppercase letters, numbers, hyphens (<code>-</code>), and underscores (<code>_</code>).</li>
<li>A metric key must start with a letter character.</li>
<li>A metric key must not contain non-Latin characters (such as <code>√É¬§</code>, <code>√É¬∂</code>, and <code>√É¬º</code>).</li>
<li>A metric key may be suffixed automatically depending on the payload (for example, <code>.count</code> for counters and <code>.gauge</code> for gauges).</li>
</ul>
<p>If you use characters that are invalid according to the rules above, they will be replaced with underscores.
If your metric key does not have at least one valid character, the data point will be dropped.</p>
<h3 id="dimension-keys">Dimension keys<a class="headerlink" href="#dimension-keys" title="Permanent link">&para;</a></h3>
<ul>
<li>Dimensions are comparable to span or resources attributes.</li>
<li>A dimension key can contain only lowercase letters (not uppercase letters), numbers, hyphens (<code>-</code>), periods (<code>.</code>), and underscores (<code>_</code>).</li>
<li>A dimension key must start with a letter character.</li>
<li>A dimension key must not contain non-Latin characters (such as <code>√É¬§</code>, <code>√É¬∂</code>, and <code>√É¬º</code>).</li>
<li>A dimension key can be in the <code>key.key-section</code> format.</li>
<li>You can specify up to 50 dimensions.</li>
<li>If the same dimension key is specified multiple times in a single payload, only the value that occurs first is accepted.</li>
</ul>
<p>If you use characters that are invalid according to the rules above, they will be replaced with underscores.
If your dimension key does not have at least one valid character, the key will be dropped.</p>
<p>Dimension values must be passed as a string, Boolean, or integer.</p>
<p>Dynatrace does not support non-string dimensions and will convert Booleans and integers to strings upon ingest.</p>
<p>If any other type is used, the entire dimension will be dropped.</p>
<h3 id="histograms">Histograms<a class="headerlink" href="#histograms" title="Permanent link">&para;</a></h3>
<p>For exponential histograms, Dynatrace ingests the histogram's <code>min|max|sum|count</code> but doesn't ingest the buckets.</p>
<p>If any of below happens, the OpenTelemetry ingest API returns the <code>400</code> or <code>200 with partial success</code> responses.</p>
<ul>
<li>Cumulative histograms aren't ingested (similarly to cumulative counters).</li>
<li>Histogram data points without sum aren't ingested. This happens when negative values are recorded.</li>
<li>Histogram buckets are not sorted.</li>
<li>Histogram bucket boundary values of <code>NaN</code> or <code>Infinite</code> are invalid.</li>
</ul>
<p>The Dynatrace OpenTelemetry ingest API only returns an HTTP <code>400</code> when all metrics in the OTLP request are invalid.</p>
<h3 id="summaries">Summaries<a class="headerlink" href="#summaries" title="Permanent link">&para;</a></h3>
<p>Dynatrace does not support summary metrics.</p>
<p>Summary metrics only exist in the OpenTelemetry protocol (OTLP) for compatibility with other formats.
Applications using official OpenTelemetry SDKs cannot produce summary metrics.</p>
<hr />
<h2 id="source-ingest-tracesmd">Source: ingest-traces.md<a class="headerlink" href="#source-ingest-tracesmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ingest OTLP traces
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api/ingest-traces
scraped: 2026-02-15T21:29:05.798631</p>
<hr />
<h1 id="ingest-otlp-traces">Ingest OTLP traces<a class="headerlink" href="#ingest-otlp-traces" title="Permanent link">&para;</a></h1>
<h1 id="ingest-otlp-traces_1">Ingest OTLP traces<a class="headerlink" href="#ingest-otlp-traces_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Reference</li>
<li>1-min read</li>
<li>Updated on Jul 15, 2024</li>
</ul>
<p>The following limitations apply to OpenTelemetry trace ingest requests and ingested spans.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Limit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Span end time</td>
<td>60 minutes in the past</td>
<td>The minimum value of the span end timestamp at time of ingestion</td>
</tr>
<tr>
<td>Span end time</td>
<td>10 minutes in the future</td>
<td>The maximum value of the span end timestamp at time of ingestion</td>
</tr>
<tr>
<td>Number of span attributes</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of span attributes per span</td>
</tr>
<tr>
<td>Number of span events</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of events per span</td>
</tr>
<tr>
<td>Number of event attributes</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of attributes per span event</td>
</tr>
<tr>
<td>Number of span links</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of links per span</td>
</tr>
<tr>
<td>Number of link attributes</td>
<td>128<a href="#fn-1-1-def">1</a></td>
<td>The maximum number of attributes per span link</td>
</tr>
<tr>
<td>Request size</td>
<td>8 MB</td>
<td>The maximum size of an OTLP request for trace ingest to an ActiveGate (uncompressed data)</td>
</tr>
<tr>
<td>Request size (gzip)</td>
<td>8 MB</td>
<td>The maximum size of an OTLP request for trace ingest to an ActiveGate (compressed data)</td>
</tr>
</tbody>
</table>
<p>1</p>
<p>Typical limit of the OpenTelemetry SDK. Not limited by Dynatrace.</p>
<hr />
<h2 id="source-otel-semantic-mappingmd">Source: otel-semantic-mapping.md<a class="headerlink" href="#source-otel-semantic-mappingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: OpenTelemetry to Dynatrace semantic mapping
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api/otel-semantic-mapping
scraped: 2026-02-15T21:22:55.444265</p>
<hr />
<h1 id="opentelemetry-to-dynatrace-semantic-mapping">OpenTelemetry to Dynatrace semantic mapping<a class="headerlink" href="#opentelemetry-to-dynatrace-semantic-mapping" title="Permanent link">&para;</a></h1>
<h1 id="opentelemetry-to-dynatrace-semantic-mapping_1">OpenTelemetry to Dynatrace semantic mapping<a class="headerlink" href="#opentelemetry-to-dynatrace-semantic-mapping_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Reference</li>
<li>2-min read</li>
<li>Published Jan 08, 2026</li>
</ul>
<p>Dynatrace automatically maps OpenTelemetry semantic conventions to the <a href="/docs/semantic-dictionary" title="The Semantic Dictionary defines standardized field names used across monitoring data types like logs, events, spans, metrics, and entities.">Dynatrace Semantic Dictionary</a>.</p>
<p>This mapping ensures consistent data interpretation across your observability stack and enables Dynatrace apps, analytics, and visualization features to work with OpenTelemetry instrumentation.</p>
<h2 id="messaging-operations">Messaging operations<a class="headerlink" href="#messaging-operations" title="Permanent link">&para;</a></h2>
<p>Dynatrace maps OpenTelemetry messaging attributes to the Dynatrace semantic model.</p>
<table>
<thead>
<tr>
<th>OpenTelemetry attribute</th>
<th>Dynatrace attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>messaging.operation</code></td>
<td><code>messaging.operation.type</code></td>
</tr>
</tbody>
</table>
<p>For <a href="/docs/semantic-dictionary/fields#messaging" title="Get to know the list of global fields that have a well defined semantic meaning in Dynatrace and can be used across different monitoring types."><code>messaging.operation.type</code></a>, the value <code>send</code> is normalized to <code>publish</code>.</p>
<h2 id="url-parsing">URL parsing<a class="headerlink" href="#url-parsing" title="Permanent link">&para;</a></h2>
<p>Dynatrace automatically parses <a href="/docs/semantic-dictionary/fields#url" title="Get to know the list of global fields that have a well defined semantic meaning in Dynatrace and can be used across different monitoring types."><code>url.full</code></a> into its constituent components:</p>
<table>
<thead>
<tr>
<th>Derived attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url.path</code></td>
<td>The path component of the URL</td>
</tr>
<tr>
<td><code>url.scheme</code></td>
<td>The protocol scheme (for example, <code>https</code>)</td>
</tr>
<tr>
<td><code>url.fragment</code></td>
<td>The fragment identifier</td>
</tr>
<tr>
<td><code>url.query</code></td>
<td>The query string</td>
</tr>
<tr>
<td><code>server.address</code></td>
<td>The host address</td>
</tr>
<tr>
<td><code>server.port</code></td>
<td>The port number</td>
</tr>
</tbody>
</table>
<h3 id="deprecated-attributes">Deprecated attributes<a class="headerlink" href="#deprecated-attributes" title="Permanent link">&para;</a></h3>
<p>Dynatrace maps deprecated OpenTelemetry HTTP attributes to their current equivalents:</p>
<table>
<thead>
<tr>
<th>Deprecated attribute</th>
<th>Current attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>http.url</code></td>
<td><code>url.full</code></td>
</tr>
<tr>
<td><code>http.method</code></td>
<td><code>http.request.method</code></td>
</tr>
<tr>
<td><code>http.status_code</code></td>
<td><code>http.response.status_code</code></td>
</tr>
</tbody>
</table>
<h2 id="cloud-provider-attributes">Cloud provider attributes<a class="headerlink" href="#cloud-provider-attributes" title="Permanent link">&para;</a></h2>
<p>Dynatrace creates provider-specific attributes from standard OpenTelemetry cloud attributes.</p>
<h3 id="account-and-project-identifiers">Account and project identifiers<a class="headerlink" href="#account-and-project-identifiers" title="Permanent link">&para;</a></h3>
<p>Dynatrace creates provider-specific account attributes from the standard <a href="/docs/semantic-dictionary/fields#cloud" title="Get to know the list of global fields that have a well defined semantic meaning in Dynatrace and can be used across different monitoring types."><code>cloud.account.id</code></a> attribute:</p>
<table>
<thead>
<tr>
<th>Cloud provider</th>
<th>OpenTelemetry attribute</th>
<th>Created attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS</td>
<td><code>cloud.account.id</code></td>
<td><code>aws.account.id</code></td>
</tr>
<tr>
<td>Azure</td>
<td><code>cloud.account.id</code></td>
<td><code>azure.subscription</code></td>
</tr>
<tr>
<td>Google Cloud</td>
<td><code>cloud.account.id</code></td>
<td><code>gcp.project.id</code></td>
</tr>
</tbody>
</table>
<h3 id="regional-attributes">Regional attributes<a class="headerlink" href="#regional-attributes" title="Permanent link">&para;</a></h3>
<p>Dynatrace creates provider-specific region attributes from standard <a href="/docs/semantic-dictionary/fields#cloud" title="Get to know the list of global fields that have a well defined semantic meaning in Dynatrace and can be used across different monitoring types."><code>cloud.region</code></a> and related attributes:</p>
<table>
<thead>
<tr>
<th>Cloud provider</th>
<th>OpenTelemetry attributes</th>
<th>Created attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS</td>
<td><code>cloud.region</code></td>
<td><code>aws.region</code></td>
</tr>
<tr>
<td>Azure</td>
<td><code>cloud.region</code></td>
<td><code>azure.location</code></td>
</tr>
<tr>
<td>Google Cloud</td>
<td><code>gcp.location</code> <code>gcp.zone</code> <code>cloud.region</code> <code>cloud.availability_zone</code></td>
<td><code>gcp.region</code></td>
</tr>
</tbody>
</table>
<p>For Google Cloud, if multiple source attributes are present, they are evaluated in the order listed above.</p>
<h2 id="use-standard-opentelemetry-conventions">Use standard OpenTelemetry conventions<a class="headerlink" href="#use-standard-opentelemetry-conventions" title="Permanent link">&para;</a></h2>
<p>Standard <a href="https://opentelemetry.io/docs/specs/semconv/">OpenTelemetry semantic conventions√Ø¬ª¬ø</a> are supported in your instrumentation. Dynatrace handles the translation automatically. This allows standard OpenTelemetry semantic conventions to work with Dynatrace semantic analysis.</p>
<hr />
<h2 id="source-otlp-apimd">Source: otlp-api.md<a class="headerlink" href="#source-otlp-apimd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Dynatrace OTLP API endpoints
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/otlp-api
scraped: 2026-02-15T21:16:02.681702</p>
<hr />
<h1 id="dynatrace-otlp-api-endpoints">Dynatrace OTLP API endpoints<a class="headerlink" href="#dynatrace-otlp-api-endpoints" title="Permanent link">&para;</a></h1>
<h1 id="dynatrace-otlp-api-endpoints_1">Dynatrace OTLP API endpoints<a class="headerlink" href="#dynatrace-otlp-api-endpoints_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Explanation</li>
<li>8-min read</li>
<li>Updated on Jan 09, 2026</li>
</ul>
<p>The <a href="https://opentelemetry.io/docs/specs/otlp/">OpenTelemetry Protocol (OTLP)√Ø¬ª¬ø</a> is the principal network protocol for the exchange of telemetry data between OpenTelemetry-backed services and applications.</p>
<p>Dynatrace provides native OTLP endpoints with the following services:</p>
<ul>
<li>The Dynatrace SaaS platform</li>
<li>ActiveGate instances</li>
</ul>
<p>Alternatively, you can deploy the <a href="/docs/ingest-from/opentelemetry/collector" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a> as an intermediary service application to batch requests and improve network performance, or to transform requests before forwarding them to Dynatrace (for example, <a href="/docs/ingest-from/opentelemetry/collector/use-cases/redact" title="Configure the OpenTelemetry Collector to mask sensitive data before forwarding to Dynatrace.">mask sensitive data</a>).</p>
<h2 id="default-ingest-paths">Default ingest paths<a class="headerlink" href="#default-ingest-paths" title="Permanent link">&para;</a></h2>
<p>The ingest paths used by Dynatrace for the individual signal types follow the <a href="https://opentelemetry.io/docs/specs/otel/protocol/exporter/#endpoint-urls-for-otlphttp">standard OpenTelemetry paths√Ø¬ª¬ø</a>.</p>
<table>
<thead>
<tr>
<th>Signal Type</th>
<th>Path</th>
</tr>
</thead>
<tbody>
<tr>
<td>Traces</td>
<td><code>/v1/traces</code></td>
</tr>
<tr>
<td>Metrics</td>
<td><code>/v1/metrics</code></td>
</tr>
<tr>
<td>Logs</td>
<td><code>/v1/logs</code></td>
</tr>
</tbody>
</table>
<p>Depending on the configuration, you may need to append these paths individually to the base URLs of the following service endpoints when specifying the export URLs. This can happen either in-code, when using <a href="/docs/ingest-from/opentelemetry/walkthroughs" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">manual instrumentation</a>, or using the standard <a href="https://opentelemetry.io/docs/languages/sdk-configuration/otlp-exporter/#endpoint-configuration">environment variables√Ø¬ª¬ø</a>.</p>
<h2 id="export-to-dynatrace">Export to Dynatrace<a class="headerlink" href="#export-to-dynatrace" title="Permanent link">&para;</a></h2>
<h3 id="base-urls">Base URLs<a class="headerlink" href="#base-urls" title="Permanent link">&para;</a></h3>
<p>The following addresses provide the base URLs for your OTLP ingest configuration. Use the URL applicable to your type of environment and replace the relevant part with your <a href="/docs/discover-dynatrace/get-started/monitoring-environment" title="Understand and learn how to work with monitoring environments.">environment ID</a>.
You will also use the base URL if you define the <code>OTEL_EXPORTER_OTLP_ENDPOINT</code> environment variable, see <a href="#environment-variables">Environment variables</a>.</p>
<table>
<thead>
<tr>
<th>API Type</th>
<th>Base URL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dynatrace SaaS</td>
<td><code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code></td>
</tr>
<tr>
<td>Environment ActiveGate<a href="#fn-1-1-def">1</a></td>
<td><code>https://{your-activegate-domain}:9999/e/{your-environment-id}/api/v2/otlp</code></td>
</tr>
<tr>
<td>Containerized Environment ActiveGate<a href="#fn-1-2-def">2</a></td>
<td><code>https://{your-activegate-domain}/e/{your-environment-id}/api/v2/otlp</code></td>
</tr>
</tbody>
</table>
<p>1</p>
<p>Environment ActiveGates listen by default on port <code>9999</code>. If you changed that port, adjust the port in the URL accordingly.</p>
<p>2</p>
<p>A <a href="/docs/ingest-from/setup-on-k8s/guides/deployment-and-configuration/activegate-pvc" title="Set up a persistent storage for containerized ActiveGate to be used as temporary storage for ingested data.">PVC</a> is required for this setup.</p>
<p>If you copy your environment ID from the browser's address bar, make sure to remove <code>.apps</code>.</p>
<ul>
<li>Incorrect base URL: <code>https://{your-environment-id}.live.apps.dynatrace.com/api/v2/otlp</code></li>
<li>Correct base URL: <code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp</code></li>
</ul>
<p>Otherwise, the API calls will return an error that looks like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>not retryable error: Permanent error: rpc error: code = Unimplemented desc = error exporting items, request to https://&lt;environment&gt;.live.apps.dynatracelabs.com/api/v2/otlp/v1/logs responded with HTTP Status Code 404
</code></pre></div>
<h3 id="url-examples">URL examples<a class="headerlink" href="#url-examples" title="Permanent link">&para;</a></h3>
<p>The following example URLs illustrate combinations of base URLs and paths for signal types.</p>
<h4 id="dynatrace-saas">Dynatrace SaaS<a class="headerlink" href="#dynatrace-saas" title="Permanent link">&para;</a></h4>
<p>Signal type</p>
<p>URL</p>
<p>Traces</p>
<p><code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp/v1/traces</code></p>
<p>Metrics</p>
<p><code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp/v1/metrics</code></p>
<p>Logs</p>
<p><code>https://{your-environment-id}.live.dynatrace.com/api/v2/otlp/v1/logs</code></p>
<h4 id="environment-activegate">Environment ActiveGate<a class="headerlink" href="#environment-activegate" title="Permanent link">&para;</a></h4>
<p>Signal type</p>
<p>URL</p>
<p>Traces</p>
<p><code>https://{your-activegate-domain}:9999/e/{your-environment-id}/api/v2/otlp/v1/traces</code></p>
<p>Metrics</p>
<p><code>https://{your-activegate-domain}:9999/e/{your-environment-id}/api/v2/otlp/v1/metrics</code></p>
<p>Logs</p>
<p><code>https://{your-activegate-domain}:9999/e/{your-environment-id}/api/v2/otlp/v1/logs</code></p>
<p>Information enrichment</p>
<p>Vanilla OTLP exports to ActiveGate require manual enrichment of Dynatrace host information to have the proper topology information.</p>
<p>To do so, make sure your traces have the correct mapping resource attributes set. The list of applicable attributes can be found in (or imported from) the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">enrichment files</a>.</p>
<h3 id="api-limitations">API limitations<a class="headerlink" href="#api-limitations" title="Permanent link">&para;</a></h3>
<p>Calls to Dynatrace API endpoints have the following limitations.</p>
<ul>
<li>gRPC is not supported.
  API calls need to use HTTP.</li>
<li>JSON is not supported for Protocol Buffers.
  Binary format must be used.</li>
</ul>
<h3 id="environment-variables">Environment variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h3>
<p>When you configure your application to export to Dynatrace, one way is to configure certain environment variables as described below.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>OTEL_EXPORTER_OTLP_ENDPOINT=[YOUR_BASE_URL]
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>OTEL_EXPORTER_OTLP_HEADERS=&quot;Authorization=Api-Token [YOUR_TOKEN]&quot;
<a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>
<a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a>
<a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a>
<a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a>OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf
</code></pre></div>
<p>For more information about language-specific configuration, see <a href="/docs/ingest-from/opentelemetry/walkthroughs" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">Instrument your application</a>.</p>
<h3 id="authentication-and-access-tokens">Authentication and access tokens<a class="headerlink" href="#authentication-and-access-tokens" title="Permanent link">&para;</a></h3>
<p>For exports to SaaS and ActiveGate, authentication is handled using an API access token and the <code>Authorization</code> HTTP header.
For more information on access tokens, see <a href="/docs/dynatrace-api/basics/dynatrace-api-authentication" title="Find out how to get authenticated to use the Dynatrace API.">Dynatrace API - Tokens and authentication</a>.</p>
<p>To create an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.
Use the appropriate access scopes for the signals that you want to export.
You can combine scopes in a single token, and also add scopes to an existing token.</p>
<ul>
<li>Traces: <code>openTelemetryTrace.ingest</code></li>
<li>Metrics: <code>metrics.ingest</code></li>
<li>Logs: <code>logs.ingest</code></li>
</ul>
<h3 id="network-requirements">Network requirements<a class="headerlink" href="#network-requirements" title="Permanent link">&para;</a></h3>
<p>Verify that the following are true:</p>
<ul>
<li>TCP port is not blocked</li>
</ul>
<p>Because OTLP communication with ActiveGate takes place over the ports 443 (for SaaS and Managed) or 9999 (for Environment ActiveGates), make sure that the TCP port in question is not blocked by a firewall or any other network management solution you might be using.
* Your system's certificate trust store is up to date</p>
<p>To avoid possible SSL certificate issues with expired or missing default root certificates, make sure that your system's certificate trust store is up to date.</p>
<h2 id="export-to-the-collector">Export to the Collector<a class="headerlink" href="#export-to-the-collector" title="Permanent link">&para;</a></h2>
<p>Using the Collector as an intermediate gateway allows you to streamline and optimize your telemetry data and requests centrally. See <a href="/docs/ingest-from/opentelemetry/collector/use-cases" title="Configure your Collector instance for different use cases.">Collector use cases</a> for more information and sample configurations for popular Collector use cases.</p>
<p>See <a href="/docs/ingest-from/opentelemetry/collector" title="Learn about the Dynatrace Collector.">Dynatrace Collector</a> for more details on how to configure a Collector instance.</p>
<p>gRPC conversion</p>
<p>As Dynatrace currently requires OTLP exports with HTTP, you can use the Collector to convert gRPC exports to HTTP.</p>
<p>See <a href="/docs/ingest-from/opentelemetry/collector/use-cases/grpc" title="Configure the OpenTelemetry Collector to transform a gRPC OTLP request to HTTP.">Transform OTLP gRPC</a> for more details.</p>
<h3 id="authentication-and-tls">Authentication and TLS<a class="headerlink" href="#authentication-and-tls" title="Permanent link">&para;</a></h3>
<p>Whether you need to use TLS and authenticate your requests against the Collector depends on your particular Collector setup/configuration. By default, the <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/v0.145.0/receiver/otlpreceiver/README.md">OTLP receiver√Ø¬ª¬ø</a> is configured for plain-text HTTP and does not require authentication.</p>
<p>The eventual outbound connection from the Collector to Dynatrace always requires authentication and TLS.</p>
<h3 id="network-requirements_1">Network requirements<a class="headerlink" href="#network-requirements_1" title="Permanent link">&para;</a></h3>
<p>Verify that the following are true:</p>
<ul>
<li>Network ports not blocked</li>
</ul>
<p>Make sure the network ports required by the configured receiver instances are not blocked by a firewall or any other network management solution used as part of your infrastructure.</p>
<h2 id="related-topics_10">Related topics<a class="headerlink" href="#related-topics_10" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/dynatrace-api/environment-api/opentelemetry" title="Use Dynatrace API as a target for OpenTelemetry exporters to ingest OpenTelemetry metrics, logs, and traces.">OpenTelemetry Protocol (OTLP) ingest API</a></li>
</ul>
<hr />
<h2 id="source-troubleshootingmd">Source: troubleshooting.md<a class="headerlink" href="#source-troubleshootingmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Ensure success with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/troubleshooting
scraped: 2026-02-15T21:16:00.334691</p>
<hr />
<h1 id="ensure-success-with-opentelemetry">Ensure success with OpenTelemetry<a class="headerlink" href="#ensure-success-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="ensure-success-with-opentelemetry_1">Ensure success with OpenTelemetry<a class="headerlink" href="#ensure-success-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Troubleshooting</li>
<li>1-min read</li>
<li>Updated on Dec 03, 2025</li>
</ul>
<p>Successfully implementing OpenTelemetry requires both reliable data export and proper visualization in Dynatrace.
This page offers guidance for properly configuring and troubleshooting your OpenTelemetry implementation with Dynatrace.</p>
<h2 id="metrics-for-ingest-monitoring">Metrics for ingest monitoring<a class="headerlink" href="#metrics-for-ingest-monitoring" title="Permanent link">&para;</a></h2>
<p>Dynatrace provides the following built-in metrics for the ingestion of OpenTelemetry signals.
In case of missing data, these can be useful in further analyzing possible ingestion issues.</p>
<p>In Dynatrace Classic, ingest monitoring metrics are prefixed with <code>dsfm:</code> instead of <code>dt.sfm.</code></p>
<h3 id="metrics-for-logs-ingest">Metrics for logs ingest<a class="headerlink" href="#metrics-for-logs-ingest" title="Permanent link">&para;</a></h3>
<p>Latest Dynatrace</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dt.sfm.active_gate.event_ingest.event_incoming_count</code></td>
<td>Number of ingested log records</td>
</tr>
<tr>
<td><code>dt.sfm.active_gate.event_ingest.drop_count</code></td>
<td>Number of dropped log records</td>
</tr>
<tr>
<td><code>dt.sfm.active_gate.event_ingest.event_otlp_size</code></td>
<td>Payload size of received log requests</td>
</tr>
</tbody>
</table>
<h3 id="metrics-for-metrics-ingest">Metrics for metrics ingest<a class="headerlink" href="#metrics-for-metrics-ingest" title="Permanent link">&para;</a></h3>
<p>Latest Dynatrace</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dt.sfm.active_gate.metrics.ingest.otlp.datapoints.accepted</code></td>
<td>Number of accepted data points</td>
</tr>
<tr>
<td><code>dt.sfm.active_gate.metrics.ingest.otlp.datapoints.rejected</code></td>
<td>Number of rejected data points</td>
</tr>
</tbody>
</table>
<p>Rejected metrics come with a <code>reason</code> dimension, which provides additional details on why a data point was rejected.
In Dynatrace, you can filter, sort, and split by that dimension.</p>
<p>A typical reason is when metrics are sent with cumulative aggregation temporality (Dynatrace <a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#aggregation-temporality" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">requires delta temporality</a>), in which case <code>reason</code> indicates <code>UNSUPPORTED_METRIC_TYPE_MONOTONIC_CUMULATIVE_SUM</code>.</p>
<h3 id="metrics-for-traces-ingest">Metrics for traces ingest<a class="headerlink" href="#metrics-for-traces-ingest" title="Permanent link">&para;</a></h3>
<p>Latest Dynatrace</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dt.sfm.server.spans.received</code></td>
<td>Number of OpenTelemetry spans ingested via the OLTP trace endpoint (ActiveGate or OneAgent) that were successfully received by Dynatrace</td>
</tr>
<tr>
<td><code>dt.sfm.server.spans.persisted</code></td>
<td>Number of OpenTelemetry spans preserved by Dynatrace; only preserved spans are available for distributed traces analysis</td>
</tr>
<tr>
<td><code>dt.sfm.server.spans.dropped</code></td>
<td>Number of OpenTelemetry spans that were not preserved by Dynatrace because of the indicated reason (for example, span end time out of range)</td>
</tr>
</tbody>
</table>
<h2 id="common-issues-and-solutions">Common issues and solutions<a class="headerlink" href="#common-issues-and-solutions" title="Permanent link">&para;</a></h2>
<h3 id="setup-issues">Setup issues<a class="headerlink" href="#setup-issues" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/dm038xt">I'm having setup issues with OpenTelemetry. What should I check?√Ø¬ª¬ø</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Fixing-SSL-Errors-in-OpenTelemetry-SDKs-when-exporting-to/ta-p/269404">Fixing SSL Errors in OpenTelemetry SDKs when exporting to Dynatrace ActiveGate√Ø¬ª¬ø</a></li>
</ul>
<h3 id="connection-issues">Connection issues<a class="headerlink" href="#connection-issues" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/x0238hc">Why do I get a connection error when exporting with OTLP to ActiveGate?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/tk4384x">Why do I get a connection error when exporting OpenTelemetry traces to OneAgent?√Ø¬ª¬ø</a></li>
</ul>
<h3 id="authentication-issues">Authentication issues<a class="headerlink" href="#authentication-issues" title="Permanent link">&para;</a></h3>
<ul>
<li>Problem: HTTP 401/403 errors in ingestion metrics.</li>
<li>Solution: Verify API permissions and endpoint configurations.</li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://dt-url.net/lg638i3">Why does ActiveGate return a 401 Unauthorized error?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/2n838im">Why does ActiveGate return a 403 Forbidden error?√Ø¬ª¬ø</a></li>
</ul>
<h3 id="data-format-issues">Data format issues<a class="headerlink" href="#data-format-issues" title="Permanent link">&para;</a></h3>
<ul>
<li>Problem: High drop rates with format errors.</li>
<li>Solution: Validate OpenTelemetry data format compliance and attribute limits.</li>
</ul>
<h3 id="configuration-issues">Configuration issues<a class="headerlink" href="#configuration-issues" title="Permanent link">&para;</a></h3>
<ul>
<li>Problem: No data appears despite successful exports.</li>
<li>Solution: Verify endpoint URLs, headers, and protocol configuration.</li>
</ul>
<h3 id="ingestion-issues">Ingestion issues<a class="headerlink" href="#ingestion-issues" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/sb238k5">Why does my OTLP export not work?√Ø¬ª¬ø</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a></li>
</ul>
<h3 id="vertical-topology">Vertical topology<a class="headerlink" href="#vertical-topology" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/48038un">Why is my vertical topology missing?√Ø¬ª¬ø</a></li>
</ul>
<h2 id="signal-specific-questions">Signal-specific questions<a class="headerlink" href="#signal-specific-questions" title="Permanent link">&para;</a></h2>
<p>Specific information about ingesting each signal type is available at</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-logs" title="Learn how Dynatrace ingests OpenTelemetry log records and what limitations apply.">Ingest OTLP logs</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">About OTLP metrics ingest</a></li>
<li><a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-traces" title="Learn how Dynatrace ingests OpenTelemetry traces and what limitations apply.">Ingest OTLP traces</a></li>
</ul>
<h3 id="traces">Traces<a class="headerlink" href="#traces" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://dt-url.net/ae038vj">Why are my spans not linked? Why are my spans orphaned?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/z402yxq">Why are my OpenTelemetry span attributes missing?√Ø¬ª¬ø</a></li>
</ul>
<h3 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Why-are-my-OpenTelemetry-metrics-not-ingested/ta-p/269428">Why are my metrics not ingested?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/s60382e">Why are my cumulative metrics not ingested?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/0u238ec">Why do I receive a "Partial Success" response?√Ø¬ª¬ø</a></li>
<li><a href="https://dt-url.net/jj03800">Why are my metric attributes missing?√Ø¬ª¬ø</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/How-to-set-up-OpenTelemetry-metrics-with-delta-temporality/ta-p/269292">How to set up OpenTelemetry metrics with delta temporality√Ø¬ª¬ø</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Delay-in-displaying-OpenTelemetry-metric-dimensions-in-Dynatrace/ta-p/269732">Delay in displaying OpenTelemetry metric dimensions in Dynatrace√Ø¬ª¬ø</a></li>
<li><a href="https://community.dynatrace.com/t5/Troubleshooting/Why-are-my-OpenTelemetry-metrics-not-ingested/ta-p/269428">Why are my OpenTelemetry metrics not ingested√Ø¬ª¬ø</a></li>
</ul>
<h2 id="best-practices">Best practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h2>
<h3 id="use-metric-dimensions">Use metric dimensions<a class="headerlink" href="#use-metric-dimensions" title="Permanent link">&para;</a></h3>
<p>Dimensions are used in Dynatrace to help distinguish what is being measured in a specific data point.</p>
<p>In OpenTelemetry, dimensions are called attributes.</p>
<p>For example, if you're measuring the number of requests an endpoint has received, you can use dimensions to split that metric into requests that went through (status code 200) and requests that failed (status code 500).</p>
<p>Your dimensions should be well-annotated (recognizable, readable, understandable), have descriptive names, and provide good information.</p>
<h3 id="compression">Compression<a class="headerlink" href="#compression" title="Permanent link">&para;</a></h3>
<p>Dynatrace recommends that you enable <code>gzip</code> compression on your OTLP exporters.</p>
<p>The default compression on the OTLP exporter <a href="https://opentelemetry.io/docs/specs/otel/protocol/exporter/">is not set√Ø¬ª¬ø</a>, but it can be configured through the following environment variables:</p>
<ul>
<li><code>OTEL_EXPORTER_OTLP_COMPRESSION</code></li>
<li><code>OTEL_EXPORTER_OTLP_TRACES_COMPRESSION</code></li>
<li><code>OTEL_EXPORTER_OTLP_METRICS_COMPRESSION</code></li>
<li><code>OTEL_EXPORTER_OTLP_LOGS_COMPRESSION</code></li>
</ul>
<p>Acceptable values are <code>none</code> or <code>gzip</code>.</p>
<h3 id="batching">Batching<a class="headerlink" href="#batching" title="Permanent link">&para;</a></h3>
<p>If you use the OpenTelemetry Collector, we highly recommend that you use a <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/v0.145.0/processor/batchprocessor/README.md">batch processor√Ø¬ª¬ø</a>.</p>
<p>Batching helps better compress the data and reduce the number of outgoing connections required to transmit data to Dynatrace.</p>
<p>See this <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/v0.145.0/processor/batchprocessor/README.md">GitHub readme√Ø¬ª¬ø</a> for more information.</p>
<hr />
<h2 id="source-cppmd">Source: cpp.md<a class="headerlink" href="#source-cppmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your C++ application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/cpp
scraped: 2026-02-15T21:20:52.889494</p>
<hr />
<h1 id="instrument-your-c-application-with-opentelemetry">Instrument your C++ application with OpenTelemetry<a class="headerlink" href="#instrument-your-c-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-c-application-with-opentelemetry_1">Instrument your C++ application with OpenTelemetry<a class="headerlink" href="#instrument-your-c-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Updated on Nov 12, 2025</li>
</ul>
<p>This walkthrough shows how to add observability to your C++ application using the OpenTelemetry C++ libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>No</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_10">Prerequisites<a class="headerlink" href="#prerequisites_10" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>A <a href="https://github.com/open-telemetry/opentelemetry-cpp/blob/main/README.md#supported-development-platforms">supported√Ø¬ª¬ø</a> C++ compiler (C++ 11 and later)</li>
<li>The <a href="https://github.com/protocolbuffers/protobuf/blob/master/src/README.md">Protocol Buffers library√Ø¬ª¬ø</a></li>
<li>The <a href="https://github.com/open-telemetry/opentelemetry-cpp/blob/main/INSTALL.md">OpenTelemetry library√Ø¬ª¬ø</a></li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token">Get API access token<a class="headerlink" href="#get-api-access-token" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-set-up-opentelemetry">Step 2 Set up OpenTelemetry<a class="headerlink" href="#step-2-set-up-opentelemetry" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the following directives to your CMake build configuration in <code>CMakeLists.txt</code>:</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>find_package(CURL REQUIRED)
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a>
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a>find_package(Protobuf REQUIRED)
<a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>
<a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a>
<a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a>
<a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a>find_package(opentelemetry-cpp CONFIG REQUIRED)
<a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a>
<a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a>
<a id="__codelineno-70-12" name="__codelineno-70-12" href="#__codelineno-70-12"></a>
<a id="__codelineno-70-13" name="__codelineno-70-13" href="#__codelineno-70-13"></a>include_directories(&quot;${OPENTELEMETRY_CPP_INCLUDE_DIRS}&quot;)
<a id="__codelineno-70-14" name="__codelineno-70-14" href="#__codelineno-70-14"></a>
<a id="__codelineno-70-15" name="__codelineno-70-15" href="#__codelineno-70-15"></a>
<a id="__codelineno-70-16" name="__codelineno-70-16" href="#__codelineno-70-16"></a>
<a id="__codelineno-70-17" name="__codelineno-70-17" href="#__codelineno-70-17"></a>target_link_libraries(
<a id="__codelineno-70-18" name="__codelineno-70-18" href="#__codelineno-70-18"></a>
<a id="__codelineno-70-19" name="__codelineno-70-19" href="#__codelineno-70-19"></a>
<a id="__codelineno-70-20" name="__codelineno-70-20" href="#__codelineno-70-20"></a>
<a id="__codelineno-70-21" name="__codelineno-70-21" href="#__codelineno-70-21"></a>&lt;YOUR_EXE_NAME&gt; ${OPENTELEMETRY_CPP_LIBRARIES}
<a id="__codelineno-70-22" name="__codelineno-70-22" href="#__codelineno-70-22"></a>
<a id="__codelineno-70-23" name="__codelineno-70-23" href="#__codelineno-70-23"></a>
<a id="__codelineno-70-24" name="__codelineno-70-24" href="#__codelineno-70-24"></a>
<a id="__codelineno-70-25" name="__codelineno-70-25" href="#__codelineno-70-25"></a>opentelemetry_trace
<a id="__codelineno-70-26" name="__codelineno-70-26" href="#__codelineno-70-26"></a>
<a id="__codelineno-70-27" name="__codelineno-70-27" href="#__codelineno-70-27"></a>
<a id="__codelineno-70-28" name="__codelineno-70-28" href="#__codelineno-70-28"></a>
<a id="__codelineno-70-29" name="__codelineno-70-29" href="#__codelineno-70-29"></a>opentelemetry_common
<a id="__codelineno-70-30" name="__codelineno-70-30" href="#__codelineno-70-30"></a>
<a id="__codelineno-70-31" name="__codelineno-70-31" href="#__codelineno-70-31"></a>
<a id="__codelineno-70-32" name="__codelineno-70-32" href="#__codelineno-70-32"></a>
<a id="__codelineno-70-33" name="__codelineno-70-33" href="#__codelineno-70-33"></a>opentelemetry_http_client_curl
<a id="__codelineno-70-34" name="__codelineno-70-34" href="#__codelineno-70-34"></a>
<a id="__codelineno-70-35" name="__codelineno-70-35" href="#__codelineno-70-35"></a>
<a id="__codelineno-70-36" name="__codelineno-70-36" href="#__codelineno-70-36"></a>
<a id="__codelineno-70-37" name="__codelineno-70-37" href="#__codelineno-70-37"></a>opentelemetry_exporter_otlp_http
<a id="__codelineno-70-38" name="__codelineno-70-38" href="#__codelineno-70-38"></a>
<a id="__codelineno-70-39" name="__codelineno-70-39" href="#__codelineno-70-39"></a>
<a id="__codelineno-70-40" name="__codelineno-70-40" href="#__codelineno-70-40"></a>
<a id="__codelineno-70-41" name="__codelineno-70-41" href="#__codelineno-70-41"></a>opentelemetry_exporter_otlp_http_client
<a id="__codelineno-70-42" name="__codelineno-70-42" href="#__codelineno-70-42"></a>
<a id="__codelineno-70-43" name="__codelineno-70-43" href="#__codelineno-70-43"></a>
<a id="__codelineno-70-44" name="__codelineno-70-44" href="#__codelineno-70-44"></a>
<a id="__codelineno-70-45" name="__codelineno-70-45" href="#__codelineno-70-45"></a>opentelemetry_otlp_recordable
<a id="__codelineno-70-46" name="__codelineno-70-46" href="#__codelineno-70-46"></a>
<a id="__codelineno-70-47" name="__codelineno-70-47" href="#__codelineno-70-47"></a>
<a id="__codelineno-70-48" name="__codelineno-70-48" href="#__codelineno-70-48"></a>
<a id="__codelineno-70-49" name="__codelineno-70-49" href="#__codelineno-70-49"></a>opentelemetry_resources
<a id="__codelineno-70-50" name="__codelineno-70-50" href="#__codelineno-70-50"></a>
<a id="__codelineno-70-51" name="__codelineno-70-51" href="#__codelineno-70-51"></a>
<a id="__codelineno-70-52" name="__codelineno-70-52" href="#__codelineno-70-52"></a>
<a id="__codelineno-70-53" name="__codelineno-70-53" href="#__codelineno-70-53"></a>opentelemetry_metrics
<a id="__codelineno-70-54" name="__codelineno-70-54" href="#__codelineno-70-54"></a>
<a id="__codelineno-70-55" name="__codelineno-70-55" href="#__codelineno-70-55"></a>
<a id="__codelineno-70-56" name="__codelineno-70-56" href="#__codelineno-70-56"></a>
<a id="__codelineno-70-57" name="__codelineno-70-57" href="#__codelineno-70-57"></a>opentelemetry_exporter_otlp_http_metric
<a id="__codelineno-70-58" name="__codelineno-70-58" href="#__codelineno-70-58"></a>
<a id="__codelineno-70-59" name="__codelineno-70-59" href="#__codelineno-70-59"></a>
<a id="__codelineno-70-60" name="__codelineno-70-60" href="#__codelineno-70-60"></a>
<a id="__codelineno-70-61" name="__codelineno-70-61" href="#__codelineno-70-61"></a>)
</code></pre></div>
2. Create a file named <code>otel.h</code> in your application directory and save the following content:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>#include &quot;opentelemetry/trace/provider.h&quot;
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a>
<a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a>#include &quot;opentelemetry/trace/propagation/http_trace_context.h&quot;
<a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>
<a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a>
<a id="__codelineno-71-8" name="__codelineno-71-8" href="#__codelineno-71-8"></a>
<a id="__codelineno-71-9" name="__codelineno-71-9" href="#__codelineno-71-9"></a>#include &quot;opentelemetry/context/propagation/global_propagator.h&quot;
<a id="__codelineno-71-10" name="__codelineno-71-10" href="#__codelineno-71-10"></a>
<a id="__codelineno-71-11" name="__codelineno-71-11" href="#__codelineno-71-11"></a>
<a id="__codelineno-71-12" name="__codelineno-71-12" href="#__codelineno-71-12"></a>
<a id="__codelineno-71-13" name="__codelineno-71-13" href="#__codelineno-71-13"></a>#include &quot;opentelemetry/sdk/trace/simple_processor_factory.h&quot;
<a id="__codelineno-71-14" name="__codelineno-71-14" href="#__codelineno-71-14"></a>
<a id="__codelineno-71-15" name="__codelineno-71-15" href="#__codelineno-71-15"></a>
<a id="__codelineno-71-16" name="__codelineno-71-16" href="#__codelineno-71-16"></a>
<a id="__codelineno-71-17" name="__codelineno-71-17" href="#__codelineno-71-17"></a>#include &quot;opentelemetry/sdk/trace/tracer_context.h&quot;
<a id="__codelineno-71-18" name="__codelineno-71-18" href="#__codelineno-71-18"></a>
<a id="__codelineno-71-19" name="__codelineno-71-19" href="#__codelineno-71-19"></a>
<a id="__codelineno-71-20" name="__codelineno-71-20" href="#__codelineno-71-20"></a>
<a id="__codelineno-71-21" name="__codelineno-71-21" href="#__codelineno-71-21"></a>#include &quot;opentelemetry/sdk/trace/tracer_context_factory.h&quot;
<a id="__codelineno-71-22" name="__codelineno-71-22" href="#__codelineno-71-22"></a>
<a id="__codelineno-71-23" name="__codelineno-71-23" href="#__codelineno-71-23"></a>
<a id="__codelineno-71-24" name="__codelineno-71-24" href="#__codelineno-71-24"></a>
<a id="__codelineno-71-25" name="__codelineno-71-25" href="#__codelineno-71-25"></a>#include &quot;opentelemetry/sdk/trace/tracer_provider_factory.h&quot;
<a id="__codelineno-71-26" name="__codelineno-71-26" href="#__codelineno-71-26"></a>
<a id="__codelineno-71-27" name="__codelineno-71-27" href="#__codelineno-71-27"></a>
<a id="__codelineno-71-28" name="__codelineno-71-28" href="#__codelineno-71-28"></a>
<a id="__codelineno-71-29" name="__codelineno-71-29" href="#__codelineno-71-29"></a>#include &quot;opentelemetry/exporters/ostream/span_exporter_factory.h&quot;
<a id="__codelineno-71-30" name="__codelineno-71-30" href="#__codelineno-71-30"></a>
<a id="__codelineno-71-31" name="__codelineno-71-31" href="#__codelineno-71-31"></a>
<a id="__codelineno-71-32" name="__codelineno-71-32" href="#__codelineno-71-32"></a>
<a id="__codelineno-71-33" name="__codelineno-71-33" href="#__codelineno-71-33"></a>#include &quot;opentelemetry/exporters/otlp/otlp_http_exporter_factory.h&quot;
<a id="__codelineno-71-34" name="__codelineno-71-34" href="#__codelineno-71-34"></a>
<a id="__codelineno-71-35" name="__codelineno-71-35" href="#__codelineno-71-35"></a>
<a id="__codelineno-71-36" name="__codelineno-71-36" href="#__codelineno-71-36"></a>
<a id="__codelineno-71-37" name="__codelineno-71-37" href="#__codelineno-71-37"></a>#include &quot;opentelemetry/metrics/provider.h&quot;
<a id="__codelineno-71-38" name="__codelineno-71-38" href="#__codelineno-71-38"></a>
<a id="__codelineno-71-39" name="__codelineno-71-39" href="#__codelineno-71-39"></a>
<a id="__codelineno-71-40" name="__codelineno-71-40" href="#__codelineno-71-40"></a>
<a id="__codelineno-71-41" name="__codelineno-71-41" href="#__codelineno-71-41"></a>#include &quot;opentelemetry/sdk/metrics/export/periodic_exporting_metric_reader.h&quot;
<a id="__codelineno-71-42" name="__codelineno-71-42" href="#__codelineno-71-42"></a>
<a id="__codelineno-71-43" name="__codelineno-71-43" href="#__codelineno-71-43"></a>
<a id="__codelineno-71-44" name="__codelineno-71-44" href="#__codelineno-71-44"></a>
<a id="__codelineno-71-45" name="__codelineno-71-45" href="#__codelineno-71-45"></a>#include &quot;opentelemetry/sdk/metrics/view/view_registry_factory.h&quot;
<a id="__codelineno-71-46" name="__codelineno-71-46" href="#__codelineno-71-46"></a>
<a id="__codelineno-71-47" name="__codelineno-71-47" href="#__codelineno-71-47"></a>
<a id="__codelineno-71-48" name="__codelineno-71-48" href="#__codelineno-71-48"></a>
<a id="__codelineno-71-49" name="__codelineno-71-49" href="#__codelineno-71-49"></a>#include &quot;opentelemetry/sdk/metrics/meter_context_factory.h&quot;
<a id="__codelineno-71-50" name="__codelineno-71-50" href="#__codelineno-71-50"></a>
<a id="__codelineno-71-51" name="__codelineno-71-51" href="#__codelineno-71-51"></a>
<a id="__codelineno-71-52" name="__codelineno-71-52" href="#__codelineno-71-52"></a>
<a id="__codelineno-71-53" name="__codelineno-71-53" href="#__codelineno-71-53"></a>#include &quot;opentelemetry/sdk/metrics/meter_provider_factory.h&quot;
<a id="__codelineno-71-54" name="__codelineno-71-54" href="#__codelineno-71-54"></a>
<a id="__codelineno-71-55" name="__codelineno-71-55" href="#__codelineno-71-55"></a>
<a id="__codelineno-71-56" name="__codelineno-71-56" href="#__codelineno-71-56"></a>
<a id="__codelineno-71-57" name="__codelineno-71-57" href="#__codelineno-71-57"></a>#include &quot;opentelemetry/exporters/ostream/metric_exporter_factory.h&quot;
<a id="__codelineno-71-58" name="__codelineno-71-58" href="#__codelineno-71-58"></a>
<a id="__codelineno-71-59" name="__codelineno-71-59" href="#__codelineno-71-59"></a>
<a id="__codelineno-71-60" name="__codelineno-71-60" href="#__codelineno-71-60"></a>
<a id="__codelineno-71-61" name="__codelineno-71-61" href="#__codelineno-71-61"></a>#include &quot;opentelemetry/exporters/otlp/otlp_http_metric_exporter_factory.h&quot;
<a id="__codelineno-71-62" name="__codelineno-71-62" href="#__codelineno-71-62"></a>
<a id="__codelineno-71-63" name="__codelineno-71-63" href="#__codelineno-71-63"></a>
<a id="__codelineno-71-64" name="__codelineno-71-64" href="#__codelineno-71-64"></a>
<a id="__codelineno-71-65" name="__codelineno-71-65" href="#__codelineno-71-65"></a>#include &quot;opentelemetry/logs/provider.h&quot;
<a id="__codelineno-71-66" name="__codelineno-71-66" href="#__codelineno-71-66"></a>
<a id="__codelineno-71-67" name="__codelineno-71-67" href="#__codelineno-71-67"></a>
<a id="__codelineno-71-68" name="__codelineno-71-68" href="#__codelineno-71-68"></a>
<a id="__codelineno-71-69" name="__codelineno-71-69" href="#__codelineno-71-69"></a>#include &quot;opentelemetry/sdk/logs/logger.h&quot;
<a id="__codelineno-71-70" name="__codelineno-71-70" href="#__codelineno-71-70"></a>
<a id="__codelineno-71-71" name="__codelineno-71-71" href="#__codelineno-71-71"></a>
<a id="__codelineno-71-72" name="__codelineno-71-72" href="#__codelineno-71-72"></a>
<a id="__codelineno-71-73" name="__codelineno-71-73" href="#__codelineno-71-73"></a>#include &quot;opentelemetry/sdk/logs/logger_provider_factory.h&quot;
<a id="__codelineno-71-74" name="__codelineno-71-74" href="#__codelineno-71-74"></a>
<a id="__codelineno-71-75" name="__codelineno-71-75" href="#__codelineno-71-75"></a>
<a id="__codelineno-71-76" name="__codelineno-71-76" href="#__codelineno-71-76"></a>
<a id="__codelineno-71-77" name="__codelineno-71-77" href="#__codelineno-71-77"></a>#include &quot;opentelemetry/sdk/logs/simple_log_record_processor_factory.h&quot;
<a id="__codelineno-71-78" name="__codelineno-71-78" href="#__codelineno-71-78"></a>
<a id="__codelineno-71-79" name="__codelineno-71-79" href="#__codelineno-71-79"></a>
<a id="__codelineno-71-80" name="__codelineno-71-80" href="#__codelineno-71-80"></a>
<a id="__codelineno-71-81" name="__codelineno-71-81" href="#__codelineno-71-81"></a>#include &quot;opentelemetry/sdk/logs/logger_context_factory.h&quot;
<a id="__codelineno-71-82" name="__codelineno-71-82" href="#__codelineno-71-82"></a>
<a id="__codelineno-71-83" name="__codelineno-71-83" href="#__codelineno-71-83"></a>
<a id="__codelineno-71-84" name="__codelineno-71-84" href="#__codelineno-71-84"></a>
<a id="__codelineno-71-85" name="__codelineno-71-85" href="#__codelineno-71-85"></a>#include &quot;opentelemetry/exporters/ostream/log_record_exporter.h&quot;
<a id="__codelineno-71-86" name="__codelineno-71-86" href="#__codelineno-71-86"></a>
<a id="__codelineno-71-87" name="__codelineno-71-87" href="#__codelineno-71-87"></a>
<a id="__codelineno-71-88" name="__codelineno-71-88" href="#__codelineno-71-88"></a>
<a id="__codelineno-71-89" name="__codelineno-71-89" href="#__codelineno-71-89"></a>#include &quot;opentelemetry/exporters/otlp/otlp_http_log_record_exporter_factory.h&quot;
<a id="__codelineno-71-90" name="__codelineno-71-90" href="#__codelineno-71-90"></a>
<a id="__codelineno-71-91" name="__codelineno-71-91" href="#__codelineno-71-91"></a>
<a id="__codelineno-71-92" name="__codelineno-71-92" href="#__codelineno-71-92"></a>
<a id="__codelineno-71-93" name="__codelineno-71-93" href="#__codelineno-71-93"></a>#include &lt;cstring&gt;
<a id="__codelineno-71-94" name="__codelineno-71-94" href="#__codelineno-71-94"></a>
<a id="__codelineno-71-95" name="__codelineno-71-95" href="#__codelineno-71-95"></a>
<a id="__codelineno-71-96" name="__codelineno-71-96" href="#__codelineno-71-96"></a>
<a id="__codelineno-71-97" name="__codelineno-71-97" href="#__codelineno-71-97"></a>#include &lt;iostream&gt;
<a id="__codelineno-71-98" name="__codelineno-71-98" href="#__codelineno-71-98"></a>
<a id="__codelineno-71-99" name="__codelineno-71-99" href="#__codelineno-71-99"></a>
<a id="__codelineno-71-100" name="__codelineno-71-100" href="#__codelineno-71-100"></a>
<a id="__codelineno-71-101" name="__codelineno-71-101" href="#__codelineno-71-101"></a>#include &lt;vector&gt;
<a id="__codelineno-71-102" name="__codelineno-71-102" href="#__codelineno-71-102"></a>
<a id="__codelineno-71-103" name="__codelineno-71-103" href="#__codelineno-71-103"></a>
<a id="__codelineno-71-104" name="__codelineno-71-104" href="#__codelineno-71-104"></a>
<a id="__codelineno-71-105" name="__codelineno-71-105" href="#__codelineno-71-105"></a>#include &lt;fstream&gt;
<a id="__codelineno-71-106" name="__codelineno-71-106" href="#__codelineno-71-106"></a>
<a id="__codelineno-71-107" name="__codelineno-71-107" href="#__codelineno-71-107"></a>
<a id="__codelineno-71-108" name="__codelineno-71-108" href="#__codelineno-71-108"></a>
<a id="__codelineno-71-109" name="__codelineno-71-109" href="#__codelineno-71-109"></a>#include &lt;list&gt;
<a id="__codelineno-71-110" name="__codelineno-71-110" href="#__codelineno-71-110"></a>
<a id="__codelineno-71-111" name="__codelineno-71-111" href="#__codelineno-71-111"></a>
<a id="__codelineno-71-112" name="__codelineno-71-112" href="#__codelineno-71-112"></a>
<a id="__codelineno-71-113" name="__codelineno-71-113" href="#__codelineno-71-113"></a>#include &lt;memory&gt;
<a id="__codelineno-71-114" name="__codelineno-71-114" href="#__codelineno-71-114"></a>
<a id="__codelineno-71-115" name="__codelineno-71-115" href="#__codelineno-71-115"></a>
<a id="__codelineno-71-116" name="__codelineno-71-116" href="#__codelineno-71-116"></a>
<a id="__codelineno-71-117" name="__codelineno-71-117" href="#__codelineno-71-117"></a>#include &lt;thread&gt;
<a id="__codelineno-71-118" name="__codelineno-71-118" href="#__codelineno-71-118"></a>
<a id="__codelineno-71-119" name="__codelineno-71-119" href="#__codelineno-71-119"></a>
<a id="__codelineno-71-120" name="__codelineno-71-120" href="#__codelineno-71-120"></a>
<a id="__codelineno-71-121" name="__codelineno-71-121" href="#__codelineno-71-121"></a>#include &lt;iostream&gt;
<a id="__codelineno-71-122" name="__codelineno-71-122" href="#__codelineno-71-122"></a>
<a id="__codelineno-71-123" name="__codelineno-71-123" href="#__codelineno-71-123"></a>
<a id="__codelineno-71-124" name="__codelineno-71-124" href="#__codelineno-71-124"></a>
<a id="__codelineno-71-125" name="__codelineno-71-125" href="#__codelineno-71-125"></a>#include &lt;string&gt;
<a id="__codelineno-71-126" name="__codelineno-71-126" href="#__codelineno-71-126"></a>
<a id="__codelineno-71-127" name="__codelineno-71-127" href="#__codelineno-71-127"></a>
<a id="__codelineno-71-128" name="__codelineno-71-128" href="#__codelineno-71-128"></a>
<a id="__codelineno-71-129" name="__codelineno-71-129" href="#__codelineno-71-129"></a>using namespace std;
<a id="__codelineno-71-130" name="__codelineno-71-130" href="#__codelineno-71-130"></a>
<a id="__codelineno-71-131" name="__codelineno-71-131" href="#__codelineno-71-131"></a>
<a id="__codelineno-71-132" name="__codelineno-71-132" href="#__codelineno-71-132"></a>
<a id="__codelineno-71-133" name="__codelineno-71-133" href="#__codelineno-71-133"></a>namespace nostd    = opentelemetry::nostd;
<a id="__codelineno-71-134" name="__codelineno-71-134" href="#__codelineno-71-134"></a>
<a id="__codelineno-71-135" name="__codelineno-71-135" href="#__codelineno-71-135"></a>
<a id="__codelineno-71-136" name="__codelineno-71-136" href="#__codelineno-71-136"></a>
<a id="__codelineno-71-137" name="__codelineno-71-137" href="#__codelineno-71-137"></a>namespace otlp     = opentelemetry::exporter::otlp;
<a id="__codelineno-71-138" name="__codelineno-71-138" href="#__codelineno-71-138"></a>
<a id="__codelineno-71-139" name="__codelineno-71-139" href="#__codelineno-71-139"></a>
<a id="__codelineno-71-140" name="__codelineno-71-140" href="#__codelineno-71-140"></a>
<a id="__codelineno-71-141" name="__codelineno-71-141" href="#__codelineno-71-141"></a>namespace resource = opentelemetry::sdk::resource;
<a id="__codelineno-71-142" name="__codelineno-71-142" href="#__codelineno-71-142"></a>
<a id="__codelineno-71-143" name="__codelineno-71-143" href="#__codelineno-71-143"></a>
<a id="__codelineno-71-144" name="__codelineno-71-144" href="#__codelineno-71-144"></a>
<a id="__codelineno-71-145" name="__codelineno-71-145" href="#__codelineno-71-145"></a>namespace trace_api      = opentelemetry::trace;
<a id="__codelineno-71-146" name="__codelineno-71-146" href="#__codelineno-71-146"></a>
<a id="__codelineno-71-147" name="__codelineno-71-147" href="#__codelineno-71-147"></a>
<a id="__codelineno-71-148" name="__codelineno-71-148" href="#__codelineno-71-148"></a>
<a id="__codelineno-71-149" name="__codelineno-71-149" href="#__codelineno-71-149"></a>namespace trace_sdk      = opentelemetry::sdk::trace;
<a id="__codelineno-71-150" name="__codelineno-71-150" href="#__codelineno-71-150"></a>
<a id="__codelineno-71-151" name="__codelineno-71-151" href="#__codelineno-71-151"></a>
<a id="__codelineno-71-152" name="__codelineno-71-152" href="#__codelineno-71-152"></a>
<a id="__codelineno-71-153" name="__codelineno-71-153" href="#__codelineno-71-153"></a>namespace metrics_api   = opentelemetry::metrics;
<a id="__codelineno-71-154" name="__codelineno-71-154" href="#__codelineno-71-154"></a>
<a id="__codelineno-71-155" name="__codelineno-71-155" href="#__codelineno-71-155"></a>
<a id="__codelineno-71-156" name="__codelineno-71-156" href="#__codelineno-71-156"></a>
<a id="__codelineno-71-157" name="__codelineno-71-157" href="#__codelineno-71-157"></a>namespace metrics_sdk    = opentelemetry::sdk::metrics;
<a id="__codelineno-71-158" name="__codelineno-71-158" href="#__codelineno-71-158"></a>
<a id="__codelineno-71-159" name="__codelineno-71-159" href="#__codelineno-71-159"></a>
<a id="__codelineno-71-160" name="__codelineno-71-160" href="#__codelineno-71-160"></a>
<a id="__codelineno-71-161" name="__codelineno-71-161" href="#__codelineno-71-161"></a>namespace logs_api      = opentelemetry::logs;
<a id="__codelineno-71-162" name="__codelineno-71-162" href="#__codelineno-71-162"></a>
<a id="__codelineno-71-163" name="__codelineno-71-163" href="#__codelineno-71-163"></a>
<a id="__codelineno-71-164" name="__codelineno-71-164" href="#__codelineno-71-164"></a>
<a id="__codelineno-71-165" name="__codelineno-71-165" href="#__codelineno-71-165"></a>namespace logs_sdk      = opentelemetry::sdk::logs;
<a id="__codelineno-71-166" name="__codelineno-71-166" href="#__codelineno-71-166"></a>
<a id="__codelineno-71-167" name="__codelineno-71-167" href="#__codelineno-71-167"></a>
<a id="__codelineno-71-168" name="__codelineno-71-168" href="#__codelineno-71-168"></a>
<a id="__codelineno-71-169" name="__codelineno-71-169" href="#__codelineno-71-169"></a>namespace
<a id="__codelineno-71-170" name="__codelineno-71-170" href="#__codelineno-71-170"></a>
<a id="__codelineno-71-171" name="__codelineno-71-171" href="#__codelineno-71-171"></a>
<a id="__codelineno-71-172" name="__codelineno-71-172" href="#__codelineno-71-172"></a>
<a id="__codelineno-71-173" name="__codelineno-71-173" href="#__codelineno-71-173"></a>{
<a id="__codelineno-71-174" name="__codelineno-71-174" href="#__codelineno-71-174"></a>
<a id="__codelineno-71-175" name="__codelineno-71-175" href="#__codelineno-71-175"></a>
<a id="__codelineno-71-176" name="__codelineno-71-176" href="#__codelineno-71-176"></a>
<a id="__codelineno-71-177" name="__codelineno-71-177" href="#__codelineno-71-177"></a>// Class definition for context propagation
<a id="__codelineno-71-178" name="__codelineno-71-178" href="#__codelineno-71-178"></a>
<a id="__codelineno-71-179" name="__codelineno-71-179" href="#__codelineno-71-179"></a>
<a id="__codelineno-71-180" name="__codelineno-71-180" href="#__codelineno-71-180"></a>
<a id="__codelineno-71-181" name="__codelineno-71-181" href="#__codelineno-71-181"></a>otlp::OtlpHttpMetricExporterOptions options;
<a id="__codelineno-71-182" name="__codelineno-71-182" href="#__codelineno-71-182"></a>
<a id="__codelineno-71-183" name="__codelineno-71-183" href="#__codelineno-71-183"></a>
<a id="__codelineno-71-184" name="__codelineno-71-184" href="#__codelineno-71-184"></a>
<a id="__codelineno-71-185" name="__codelineno-71-185" href="#__codelineno-71-185"></a>std::string version{ &quot;1.0.1&quot; };
<a id="__codelineno-71-186" name="__codelineno-71-186" href="#__codelineno-71-186"></a>
<a id="__codelineno-71-187" name="__codelineno-71-187" href="#__codelineno-71-187"></a>
<a id="__codelineno-71-188" name="__codelineno-71-188" href="#__codelineno-71-188"></a>
<a id="__codelineno-71-189" name="__codelineno-71-189" href="#__codelineno-71-189"></a>std::string name{ &quot;app_cpp&quot; };
<a id="__codelineno-71-190" name="__codelineno-71-190" href="#__codelineno-71-190"></a>
<a id="__codelineno-71-191" name="__codelineno-71-191" href="#__codelineno-71-191"></a>
<a id="__codelineno-71-192" name="__codelineno-71-192" href="#__codelineno-71-192"></a>
<a id="__codelineno-71-193" name="__codelineno-71-193" href="#__codelineno-71-193"></a>std::string schema{ &quot;https://opentelemetry.io/schemas/1.2.0&quot; };
<a id="__codelineno-71-194" name="__codelineno-71-194" href="#__codelineno-71-194"></a>
<a id="__codelineno-71-195" name="__codelineno-71-195" href="#__codelineno-71-195"></a>
<a id="__codelineno-71-196" name="__codelineno-71-196" href="#__codelineno-71-196"></a>
<a id="__codelineno-71-197" name="__codelineno-71-197" href="#__codelineno-71-197"></a>template &lt;typename T&gt;
<a id="__codelineno-71-198" name="__codelineno-71-198" href="#__codelineno-71-198"></a>
<a id="__codelineno-71-199" name="__codelineno-71-199" href="#__codelineno-71-199"></a>
<a id="__codelineno-71-200" name="__codelineno-71-200" href="#__codelineno-71-200"></a>
<a id="__codelineno-71-201" name="__codelineno-71-201" href="#__codelineno-71-201"></a>class HttpTextMapCarrier : public opentelemetry::context::propagation::TextMapCarrier
<a id="__codelineno-71-202" name="__codelineno-71-202" href="#__codelineno-71-202"></a>
<a id="__codelineno-71-203" name="__codelineno-71-203" href="#__codelineno-71-203"></a>
<a id="__codelineno-71-204" name="__codelineno-71-204" href="#__codelineno-71-204"></a>
<a id="__codelineno-71-205" name="__codelineno-71-205" href="#__codelineno-71-205"></a>{
<a id="__codelineno-71-206" name="__codelineno-71-206" href="#__codelineno-71-206"></a>
<a id="__codelineno-71-207" name="__codelineno-71-207" href="#__codelineno-71-207"></a>
<a id="__codelineno-71-208" name="__codelineno-71-208" href="#__codelineno-71-208"></a>
<a id="__codelineno-71-209" name="__codelineno-71-209" href="#__codelineno-71-209"></a>public:
<a id="__codelineno-71-210" name="__codelineno-71-210" href="#__codelineno-71-210"></a>
<a id="__codelineno-71-211" name="__codelineno-71-211" href="#__codelineno-71-211"></a>
<a id="__codelineno-71-212" name="__codelineno-71-212" href="#__codelineno-71-212"></a>
<a id="__codelineno-71-213" name="__codelineno-71-213" href="#__codelineno-71-213"></a>HttpTextMapCarrier&lt;T&gt;(T &amp;headers) : headers_(headers) {}
<a id="__codelineno-71-214" name="__codelineno-71-214" href="#__codelineno-71-214"></a>
<a id="__codelineno-71-215" name="__codelineno-71-215" href="#__codelineno-71-215"></a>
<a id="__codelineno-71-216" name="__codelineno-71-216" href="#__codelineno-71-216"></a>
<a id="__codelineno-71-217" name="__codelineno-71-217" href="#__codelineno-71-217"></a>HttpTextMapCarrier() = default;
<a id="__codelineno-71-218" name="__codelineno-71-218" href="#__codelineno-71-218"></a>
<a id="__codelineno-71-219" name="__codelineno-71-219" href="#__codelineno-71-219"></a>
<a id="__codelineno-71-220" name="__codelineno-71-220" href="#__codelineno-71-220"></a>
<a id="__codelineno-71-221" name="__codelineno-71-221" href="#__codelineno-71-221"></a>virtual nostd::string_view Get(nostd::string_view key) const noexcept override
<a id="__codelineno-71-222" name="__codelineno-71-222" href="#__codelineno-71-222"></a>
<a id="__codelineno-71-223" name="__codelineno-71-223" href="#__codelineno-71-223"></a>
<a id="__codelineno-71-224" name="__codelineno-71-224" href="#__codelineno-71-224"></a>
<a id="__codelineno-71-225" name="__codelineno-71-225" href="#__codelineno-71-225"></a>{
<a id="__codelineno-71-226" name="__codelineno-71-226" href="#__codelineno-71-226"></a>
<a id="__codelineno-71-227" name="__codelineno-71-227" href="#__codelineno-71-227"></a>
<a id="__codelineno-71-228" name="__codelineno-71-228" href="#__codelineno-71-228"></a>
<a id="__codelineno-71-229" name="__codelineno-71-229" href="#__codelineno-71-229"></a>std::string key_to_compare = key.data();
<a id="__codelineno-71-230" name="__codelineno-71-230" href="#__codelineno-71-230"></a>
<a id="__codelineno-71-231" name="__codelineno-71-231" href="#__codelineno-71-231"></a>
<a id="__codelineno-71-232" name="__codelineno-71-232" href="#__codelineno-71-232"></a>
<a id="__codelineno-71-233" name="__codelineno-71-233" href="#__codelineno-71-233"></a>// Header&#39;s first letter seems to be  automatically capitaliazed by our test http-server, so
<a id="__codelineno-71-234" name="__codelineno-71-234" href="#__codelineno-71-234"></a>
<a id="__codelineno-71-235" name="__codelineno-71-235" href="#__codelineno-71-235"></a>
<a id="__codelineno-71-236" name="__codelineno-71-236" href="#__codelineno-71-236"></a>
<a id="__codelineno-71-237" name="__codelineno-71-237" href="#__codelineno-71-237"></a>// compare accordingly.
<a id="__codelineno-71-238" name="__codelineno-71-238" href="#__codelineno-71-238"></a>
<a id="__codelineno-71-239" name="__codelineno-71-239" href="#__codelineno-71-239"></a>
<a id="__codelineno-71-240" name="__codelineno-71-240" href="#__codelineno-71-240"></a>
<a id="__codelineno-71-241" name="__codelineno-71-241" href="#__codelineno-71-241"></a>if (key == opentelemetry::trace::propagation::kTraceParent)
<a id="__codelineno-71-242" name="__codelineno-71-242" href="#__codelineno-71-242"></a>
<a id="__codelineno-71-243" name="__codelineno-71-243" href="#__codelineno-71-243"></a>
<a id="__codelineno-71-244" name="__codelineno-71-244" href="#__codelineno-71-244"></a>
<a id="__codelineno-71-245" name="__codelineno-71-245" href="#__codelineno-71-245"></a>{
<a id="__codelineno-71-246" name="__codelineno-71-246" href="#__codelineno-71-246"></a>
<a id="__codelineno-71-247" name="__codelineno-71-247" href="#__codelineno-71-247"></a>
<a id="__codelineno-71-248" name="__codelineno-71-248" href="#__codelineno-71-248"></a>
<a id="__codelineno-71-249" name="__codelineno-71-249" href="#__codelineno-71-249"></a>key_to_compare = &quot;Traceparent&quot;;
<a id="__codelineno-71-250" name="__codelineno-71-250" href="#__codelineno-71-250"></a>
<a id="__codelineno-71-251" name="__codelineno-71-251" href="#__codelineno-71-251"></a>
<a id="__codelineno-71-252" name="__codelineno-71-252" href="#__codelineno-71-252"></a>
<a id="__codelineno-71-253" name="__codelineno-71-253" href="#__codelineno-71-253"></a>}
<a id="__codelineno-71-254" name="__codelineno-71-254" href="#__codelineno-71-254"></a>
<a id="__codelineno-71-255" name="__codelineno-71-255" href="#__codelineno-71-255"></a>
<a id="__codelineno-71-256" name="__codelineno-71-256" href="#__codelineno-71-256"></a>
<a id="__codelineno-71-257" name="__codelineno-71-257" href="#__codelineno-71-257"></a>else if (key == opentelemetry::trace::propagation::kTraceState)
<a id="__codelineno-71-258" name="__codelineno-71-258" href="#__codelineno-71-258"></a>
<a id="__codelineno-71-259" name="__codelineno-71-259" href="#__codelineno-71-259"></a>
<a id="__codelineno-71-260" name="__codelineno-71-260" href="#__codelineno-71-260"></a>
<a id="__codelineno-71-261" name="__codelineno-71-261" href="#__codelineno-71-261"></a>{
<a id="__codelineno-71-262" name="__codelineno-71-262" href="#__codelineno-71-262"></a>
<a id="__codelineno-71-263" name="__codelineno-71-263" href="#__codelineno-71-263"></a>
<a id="__codelineno-71-264" name="__codelineno-71-264" href="#__codelineno-71-264"></a>
<a id="__codelineno-71-265" name="__codelineno-71-265" href="#__codelineno-71-265"></a>key_to_compare = &quot;Tracestate&quot;;
<a id="__codelineno-71-266" name="__codelineno-71-266" href="#__codelineno-71-266"></a>
<a id="__codelineno-71-267" name="__codelineno-71-267" href="#__codelineno-71-267"></a>
<a id="__codelineno-71-268" name="__codelineno-71-268" href="#__codelineno-71-268"></a>
<a id="__codelineno-71-269" name="__codelineno-71-269" href="#__codelineno-71-269"></a>}
<a id="__codelineno-71-270" name="__codelineno-71-270" href="#__codelineno-71-270"></a>
<a id="__codelineno-71-271" name="__codelineno-71-271" href="#__codelineno-71-271"></a>
<a id="__codelineno-71-272" name="__codelineno-71-272" href="#__codelineno-71-272"></a>
<a id="__codelineno-71-273" name="__codelineno-71-273" href="#__codelineno-71-273"></a>auto it = headers_.find(key_to_compare);
<a id="__codelineno-71-274" name="__codelineno-71-274" href="#__codelineno-71-274"></a>
<a id="__codelineno-71-275" name="__codelineno-71-275" href="#__codelineno-71-275"></a>
<a id="__codelineno-71-276" name="__codelineno-71-276" href="#__codelineno-71-276"></a>
<a id="__codelineno-71-277" name="__codelineno-71-277" href="#__codelineno-71-277"></a>if (it != headers_.end())
<a id="__codelineno-71-278" name="__codelineno-71-278" href="#__codelineno-71-278"></a>
<a id="__codelineno-71-279" name="__codelineno-71-279" href="#__codelineno-71-279"></a>
<a id="__codelineno-71-280" name="__codelineno-71-280" href="#__codelineno-71-280"></a>
<a id="__codelineno-71-281" name="__codelineno-71-281" href="#__codelineno-71-281"></a>{
<a id="__codelineno-71-282" name="__codelineno-71-282" href="#__codelineno-71-282"></a>
<a id="__codelineno-71-283" name="__codelineno-71-283" href="#__codelineno-71-283"></a>
<a id="__codelineno-71-284" name="__codelineno-71-284" href="#__codelineno-71-284"></a>
<a id="__codelineno-71-285" name="__codelineno-71-285" href="#__codelineno-71-285"></a>return it-&gt;second;
<a id="__codelineno-71-286" name="__codelineno-71-286" href="#__codelineno-71-286"></a>
<a id="__codelineno-71-287" name="__codelineno-71-287" href="#__codelineno-71-287"></a>
<a id="__codelineno-71-288" name="__codelineno-71-288" href="#__codelineno-71-288"></a>
<a id="__codelineno-71-289" name="__codelineno-71-289" href="#__codelineno-71-289"></a>}
<a id="__codelineno-71-290" name="__codelineno-71-290" href="#__codelineno-71-290"></a>
<a id="__codelineno-71-291" name="__codelineno-71-291" href="#__codelineno-71-291"></a>
<a id="__codelineno-71-292" name="__codelineno-71-292" href="#__codelineno-71-292"></a>
<a id="__codelineno-71-293" name="__codelineno-71-293" href="#__codelineno-71-293"></a>return &quot;&quot;;
<a id="__codelineno-71-294" name="__codelineno-71-294" href="#__codelineno-71-294"></a>
<a id="__codelineno-71-295" name="__codelineno-71-295" href="#__codelineno-71-295"></a>
<a id="__codelineno-71-296" name="__codelineno-71-296" href="#__codelineno-71-296"></a>
<a id="__codelineno-71-297" name="__codelineno-71-297" href="#__codelineno-71-297"></a>}
<a id="__codelineno-71-298" name="__codelineno-71-298" href="#__codelineno-71-298"></a>
<a id="__codelineno-71-299" name="__codelineno-71-299" href="#__codelineno-71-299"></a>
<a id="__codelineno-71-300" name="__codelineno-71-300" href="#__codelineno-71-300"></a>
<a id="__codelineno-71-301" name="__codelineno-71-301" href="#__codelineno-71-301"></a>virtual void Set(nostd::string_view key, nostd::string_view value) noexcept override
<a id="__codelineno-71-302" name="__codelineno-71-302" href="#__codelineno-71-302"></a>
<a id="__codelineno-71-303" name="__codelineno-71-303" href="#__codelineno-71-303"></a>
<a id="__codelineno-71-304" name="__codelineno-71-304" href="#__codelineno-71-304"></a>
<a id="__codelineno-71-305" name="__codelineno-71-305" href="#__codelineno-71-305"></a>{
<a id="__codelineno-71-306" name="__codelineno-71-306" href="#__codelineno-71-306"></a>
<a id="__codelineno-71-307" name="__codelineno-71-307" href="#__codelineno-71-307"></a>
<a id="__codelineno-71-308" name="__codelineno-71-308" href="#__codelineno-71-308"></a>
<a id="__codelineno-71-309" name="__codelineno-71-309" href="#__codelineno-71-309"></a>headers_.insert(std::pair&lt;std::string, std::string&gt;(std::string(key), std::string(value)));
<a id="__codelineno-71-310" name="__codelineno-71-310" href="#__codelineno-71-310"></a>
<a id="__codelineno-71-311" name="__codelineno-71-311" href="#__codelineno-71-311"></a>
<a id="__codelineno-71-312" name="__codelineno-71-312" href="#__codelineno-71-312"></a>
<a id="__codelineno-71-313" name="__codelineno-71-313" href="#__codelineno-71-313"></a>}
<a id="__codelineno-71-314" name="__codelineno-71-314" href="#__codelineno-71-314"></a>
<a id="__codelineno-71-315" name="__codelineno-71-315" href="#__codelineno-71-315"></a>
<a id="__codelineno-71-316" name="__codelineno-71-316" href="#__codelineno-71-316"></a>
<a id="__codelineno-71-317" name="__codelineno-71-317" href="#__codelineno-71-317"></a>T headers_;
<a id="__codelineno-71-318" name="__codelineno-71-318" href="#__codelineno-71-318"></a>
<a id="__codelineno-71-319" name="__codelineno-71-319" href="#__codelineno-71-319"></a>
<a id="__codelineno-71-320" name="__codelineno-71-320" href="#__codelineno-71-320"></a>
<a id="__codelineno-71-321" name="__codelineno-71-321" href="#__codelineno-71-321"></a>};
<a id="__codelineno-71-322" name="__codelineno-71-322" href="#__codelineno-71-322"></a>
<a id="__codelineno-71-323" name="__codelineno-71-323" href="#__codelineno-71-323"></a>
<a id="__codelineno-71-324" name="__codelineno-71-324" href="#__codelineno-71-324"></a>
<a id="__codelineno-71-325" name="__codelineno-71-325" href="#__codelineno-71-325"></a>// ===== GENERAL SETUP =====
<a id="__codelineno-71-326" name="__codelineno-71-326" href="#__codelineno-71-326"></a>
<a id="__codelineno-71-327" name="__codelineno-71-327" href="#__codelineno-71-327"></a>
<a id="__codelineno-71-328" name="__codelineno-71-328" href="#__codelineno-71-328"></a>
<a id="__codelineno-71-329" name="__codelineno-71-329" href="#__codelineno-71-329"></a>void initTracer()
<a id="__codelineno-71-330" name="__codelineno-71-330" href="#__codelineno-71-330"></a>
<a id="__codelineno-71-331" name="__codelineno-71-331" href="#__codelineno-71-331"></a>
<a id="__codelineno-71-332" name="__codelineno-71-332" href="#__codelineno-71-332"></a>
<a id="__codelineno-71-333" name="__codelineno-71-333" href="#__codelineno-71-333"></a>{
<a id="__codelineno-71-334" name="__codelineno-71-334" href="#__codelineno-71-334"></a>
<a id="__codelineno-71-335" name="__codelineno-71-335" href="#__codelineno-71-335"></a>
<a id="__codelineno-71-336" name="__codelineno-71-336" href="#__codelineno-71-336"></a>
<a id="__codelineno-71-337" name="__codelineno-71-337" href="#__codelineno-71-337"></a>otlp::OtlpHttpExporterOptions traceOptions;
<a id="__codelineno-71-338" name="__codelineno-71-338" href="#__codelineno-71-338"></a>
<a id="__codelineno-71-339" name="__codelineno-71-339" href="#__codelineno-71-339"></a>
<a id="__codelineno-71-340" name="__codelineno-71-340" href="#__codelineno-71-340"></a>
<a id="__codelineno-71-341" name="__codelineno-71-341" href="#__codelineno-71-341"></a>traceOptions.url = std::string(std::getenv(&quot;DT_API_URL&quot;)) + &quot;/v1/traces&quot;;
<a id="__codelineno-71-342" name="__codelineno-71-342" href="#__codelineno-71-342"></a>
<a id="__codelineno-71-343" name="__codelineno-71-343" href="#__codelineno-71-343"></a>
<a id="__codelineno-71-344" name="__codelineno-71-344" href="#__codelineno-71-344"></a>
<a id="__codelineno-71-345" name="__codelineno-71-345" href="#__codelineno-71-345"></a>traceOptions.content_type  = otlp::HttpRequestContentType::kBinary;
<a id="__codelineno-71-346" name="__codelineno-71-346" href="#__codelineno-71-346"></a>
<a id="__codelineno-71-347" name="__codelineno-71-347" href="#__codelineno-71-347"></a>
<a id="__codelineno-71-348" name="__codelineno-71-348" href="#__codelineno-71-348"></a>
<a id="__codelineno-71-349" name="__codelineno-71-349" href="#__codelineno-71-349"></a>traceOptions.http_headers.insert(
<a id="__codelineno-71-350" name="__codelineno-71-350" href="#__codelineno-71-350"></a>
<a id="__codelineno-71-351" name="__codelineno-71-351" href="#__codelineno-71-351"></a>
<a id="__codelineno-71-352" name="__codelineno-71-352" href="#__codelineno-71-352"></a>
<a id="__codelineno-71-353" name="__codelineno-71-353" href="#__codelineno-71-353"></a>std::make_pair&lt;const std::string, std::string&gt;(&quot;Authorization&quot;, std::getenv(&quot;DT_API_TOKEN&quot;)));
<a id="__codelineno-71-354" name="__codelineno-71-354" href="#__codelineno-71-354"></a>
<a id="__codelineno-71-355" name="__codelineno-71-355" href="#__codelineno-71-355"></a>
<a id="__codelineno-71-356" name="__codelineno-71-356" href="#__codelineno-71-356"></a>
<a id="__codelineno-71-357" name="__codelineno-71-357" href="#__codelineno-71-357"></a>resource::ResourceAttributes resource_attributes = {{&quot;service.name&quot;, name},
<a id="__codelineno-71-358" name="__codelineno-71-358" href="#__codelineno-71-358"></a>
<a id="__codelineno-71-359" name="__codelineno-71-359" href="#__codelineno-71-359"></a>
<a id="__codelineno-71-360" name="__codelineno-71-360" href="#__codelineno-71-360"></a>
<a id="__codelineno-71-361" name="__codelineno-71-361" href="#__codelineno-71-361"></a>{&quot;service.version&quot;, version}};
<a id="__codelineno-71-362" name="__codelineno-71-362" href="#__codelineno-71-362"></a>
<a id="__codelineno-71-363" name="__codelineno-71-363" href="#__codelineno-71-363"></a>
<a id="__codelineno-71-364" name="__codelineno-71-364" href="#__codelineno-71-364"></a>
<a id="__codelineno-71-365" name="__codelineno-71-365" href="#__codelineno-71-365"></a>resource::ResourceAttributes dt_resource_attributes;
<a id="__codelineno-71-366" name="__codelineno-71-366" href="#__codelineno-71-366"></a>
<a id="__codelineno-71-367" name="__codelineno-71-367" href="#__codelineno-71-367"></a>
<a id="__codelineno-71-368" name="__codelineno-71-368" href="#__codelineno-71-368"></a>
<a id="__codelineno-71-369" name="__codelineno-71-369" href="#__codelineno-71-369"></a>try
<a id="__codelineno-71-370" name="__codelineno-71-370" href="#__codelineno-71-370"></a>
<a id="__codelineno-71-371" name="__codelineno-71-371" href="#__codelineno-71-371"></a>
<a id="__codelineno-71-372" name="__codelineno-71-372" href="#__codelineno-71-372"></a>
<a id="__codelineno-71-373" name="__codelineno-71-373" href="#__codelineno-71-373"></a>{
<a id="__codelineno-71-374" name="__codelineno-71-374" href="#__codelineno-71-374"></a>
<a id="__codelineno-71-375" name="__codelineno-71-375" href="#__codelineno-71-375"></a>
<a id="__codelineno-71-376" name="__codelineno-71-376" href="#__codelineno-71-376"></a>
<a id="__codelineno-71-377" name="__codelineno-71-377" href="#__codelineno-71-377"></a>for (string name : {&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;,
<a id="__codelineno-71-378" name="__codelineno-71-378" href="#__codelineno-71-378"></a>
<a id="__codelineno-71-379" name="__codelineno-71-379" href="#__codelineno-71-379"></a>
<a id="__codelineno-71-380" name="__codelineno-71-380" href="#__codelineno-71-380"></a>
<a id="__codelineno-71-381" name="__codelineno-71-381" href="#__codelineno-71-381"></a>&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;,
<a id="__codelineno-71-382" name="__codelineno-71-382" href="#__codelineno-71-382"></a>
<a id="__codelineno-71-383" name="__codelineno-71-383" href="#__codelineno-71-383"></a>
<a id="__codelineno-71-384" name="__codelineno-71-384" href="#__codelineno-71-384"></a>
<a id="__codelineno-71-385" name="__codelineno-71-385" href="#__codelineno-71-385"></a>&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;})
<a id="__codelineno-71-386" name="__codelineno-71-386" href="#__codelineno-71-386"></a>
<a id="__codelineno-71-387" name="__codelineno-71-387" href="#__codelineno-71-387"></a>
<a id="__codelineno-71-388" name="__codelineno-71-388" href="#__codelineno-71-388"></a>
<a id="__codelineno-71-389" name="__codelineno-71-389" href="#__codelineno-71-389"></a>{
<a id="__codelineno-71-390" name="__codelineno-71-390" href="#__codelineno-71-390"></a>
<a id="__codelineno-71-391" name="__codelineno-71-391" href="#__codelineno-71-391"></a>
<a id="__codelineno-71-392" name="__codelineno-71-392" href="#__codelineno-71-392"></a>
<a id="__codelineno-71-393" name="__codelineno-71-393" href="#__codelineno-71-393"></a>string file_path;
<a id="__codelineno-71-394" name="__codelineno-71-394" href="#__codelineno-71-394"></a>
<a id="__codelineno-71-395" name="__codelineno-71-395" href="#__codelineno-71-395"></a>
<a id="__codelineno-71-396" name="__codelineno-71-396" href="#__codelineno-71-396"></a>
<a id="__codelineno-71-397" name="__codelineno-71-397" href="#__codelineno-71-397"></a>ifstream dt_file;
<a id="__codelineno-71-398" name="__codelineno-71-398" href="#__codelineno-71-398"></a>
<a id="__codelineno-71-399" name="__codelineno-71-399" href="#__codelineno-71-399"></a>
<a id="__codelineno-71-400" name="__codelineno-71-400" href="#__codelineno-71-400"></a>
<a id="__codelineno-71-401" name="__codelineno-71-401" href="#__codelineno-71-401"></a>dt_file.open(name);
<a id="__codelineno-71-402" name="__codelineno-71-402" href="#__codelineno-71-402"></a>
<a id="__codelineno-71-403" name="__codelineno-71-403" href="#__codelineno-71-403"></a>
<a id="__codelineno-71-404" name="__codelineno-71-404" href="#__codelineno-71-404"></a>
<a id="__codelineno-71-405" name="__codelineno-71-405" href="#__codelineno-71-405"></a>if (dt_file.is_open())
<a id="__codelineno-71-406" name="__codelineno-71-406" href="#__codelineno-71-406"></a>
<a id="__codelineno-71-407" name="__codelineno-71-407" href="#__codelineno-71-407"></a>
<a id="__codelineno-71-408" name="__codelineno-71-408" href="#__codelineno-71-408"></a>
<a id="__codelineno-71-409" name="__codelineno-71-409" href="#__codelineno-71-409"></a>{
<a id="__codelineno-71-410" name="__codelineno-71-410" href="#__codelineno-71-410"></a>
<a id="__codelineno-71-411" name="__codelineno-71-411" href="#__codelineno-71-411"></a>
<a id="__codelineno-71-412" name="__codelineno-71-412" href="#__codelineno-71-412"></a>
<a id="__codelineno-71-413" name="__codelineno-71-413" href="#__codelineno-71-413"></a>string dt_metadata;
<a id="__codelineno-71-414" name="__codelineno-71-414" href="#__codelineno-71-414"></a>
<a id="__codelineno-71-415" name="__codelineno-71-415" href="#__codelineno-71-415"></a>
<a id="__codelineno-71-416" name="__codelineno-71-416" href="#__codelineno-71-416"></a>
<a id="__codelineno-71-417" name="__codelineno-71-417" href="#__codelineno-71-417"></a>ifstream dt_properties;
<a id="__codelineno-71-418" name="__codelineno-71-418" href="#__codelineno-71-418"></a>
<a id="__codelineno-71-419" name="__codelineno-71-419" href="#__codelineno-71-419"></a>
<a id="__codelineno-71-420" name="__codelineno-71-420" href="#__codelineno-71-420"></a>
<a id="__codelineno-71-421" name="__codelineno-71-421" href="#__codelineno-71-421"></a>while (getline(dt_file, file_path))
<a id="__codelineno-71-422" name="__codelineno-71-422" href="#__codelineno-71-422"></a>
<a id="__codelineno-71-423" name="__codelineno-71-423" href="#__codelineno-71-423"></a>
<a id="__codelineno-71-424" name="__codelineno-71-424" href="#__codelineno-71-424"></a>
<a id="__codelineno-71-425" name="__codelineno-71-425" href="#__codelineno-71-425"></a>{
<a id="__codelineno-71-426" name="__codelineno-71-426" href="#__codelineno-71-426"></a>
<a id="__codelineno-71-427" name="__codelineno-71-427" href="#__codelineno-71-427"></a>
<a id="__codelineno-71-428" name="__codelineno-71-428" href="#__codelineno-71-428"></a>
<a id="__codelineno-71-429" name="__codelineno-71-429" href="#__codelineno-71-429"></a>dt_properties.open(file_path);
<a id="__codelineno-71-430" name="__codelineno-71-430" href="#__codelineno-71-430"></a>
<a id="__codelineno-71-431" name="__codelineno-71-431" href="#__codelineno-71-431"></a>
<a id="__codelineno-71-432" name="__codelineno-71-432" href="#__codelineno-71-432"></a>
<a id="__codelineno-71-433" name="__codelineno-71-433" href="#__codelineno-71-433"></a>if (dt_properties.is_open())
<a id="__codelineno-71-434" name="__codelineno-71-434" href="#__codelineno-71-434"></a>
<a id="__codelineno-71-435" name="__codelineno-71-435" href="#__codelineno-71-435"></a>
<a id="__codelineno-71-436" name="__codelineno-71-436" href="#__codelineno-71-436"></a>
<a id="__codelineno-71-437" name="__codelineno-71-437" href="#__codelineno-71-437"></a>{
<a id="__codelineno-71-438" name="__codelineno-71-438" href="#__codelineno-71-438"></a>
<a id="__codelineno-71-439" name="__codelineno-71-439" href="#__codelineno-71-439"></a>
<a id="__codelineno-71-440" name="__codelineno-71-440" href="#__codelineno-71-440"></a>
<a id="__codelineno-71-441" name="__codelineno-71-441" href="#__codelineno-71-441"></a>while (getline(dt_properties, dt_metadata))
<a id="__codelineno-71-442" name="__codelineno-71-442" href="#__codelineno-71-442"></a>
<a id="__codelineno-71-443" name="__codelineno-71-443" href="#__codelineno-71-443"></a>
<a id="__codelineno-71-444" name="__codelineno-71-444" href="#__codelineno-71-444"></a>
<a id="__codelineno-71-445" name="__codelineno-71-445" href="#__codelineno-71-445"></a>{
<a id="__codelineno-71-446" name="__codelineno-71-446" href="#__codelineno-71-446"></a>
<a id="__codelineno-71-447" name="__codelineno-71-447" href="#__codelineno-71-447"></a>
<a id="__codelineno-71-448" name="__codelineno-71-448" href="#__codelineno-71-448"></a>
<a id="__codelineno-71-449" name="__codelineno-71-449" href="#__codelineno-71-449"></a>dt_resource_attributes.SetAttribute(
<a id="__codelineno-71-450" name="__codelineno-71-450" href="#__codelineno-71-450"></a>
<a id="__codelineno-71-451" name="__codelineno-71-451" href="#__codelineno-71-451"></a>
<a id="__codelineno-71-452" name="__codelineno-71-452" href="#__codelineno-71-452"></a>
<a id="__codelineno-71-453" name="__codelineno-71-453" href="#__codelineno-71-453"></a>dt_metadata.substr(0, dt_metadata.find(&quot;=&quot;)),
<a id="__codelineno-71-454" name="__codelineno-71-454" href="#__codelineno-71-454"></a>
<a id="__codelineno-71-455" name="__codelineno-71-455" href="#__codelineno-71-455"></a>
<a id="__codelineno-71-456" name="__codelineno-71-456" href="#__codelineno-71-456"></a>
<a id="__codelineno-71-457" name="__codelineno-71-457" href="#__codelineno-71-457"></a>dt_metadata.substr(dt_metadata.find(&quot;=&quot;) + 1)
<a id="__codelineno-71-458" name="__codelineno-71-458" href="#__codelineno-71-458"></a>
<a id="__codelineno-71-459" name="__codelineno-71-459" href="#__codelineno-71-459"></a>
<a id="__codelineno-71-460" name="__codelineno-71-460" href="#__codelineno-71-460"></a>
<a id="__codelineno-71-461" name="__codelineno-71-461" href="#__codelineno-71-461"></a>);
<a id="__codelineno-71-462" name="__codelineno-71-462" href="#__codelineno-71-462"></a>
<a id="__codelineno-71-463" name="__codelineno-71-463" href="#__codelineno-71-463"></a>
<a id="__codelineno-71-464" name="__codelineno-71-464" href="#__codelineno-71-464"></a>
<a id="__codelineno-71-465" name="__codelineno-71-465" href="#__codelineno-71-465"></a>}
<a id="__codelineno-71-466" name="__codelineno-71-466" href="#__codelineno-71-466"></a>
<a id="__codelineno-71-467" name="__codelineno-71-467" href="#__codelineno-71-467"></a>
<a id="__codelineno-71-468" name="__codelineno-71-468" href="#__codelineno-71-468"></a>
<a id="__codelineno-71-469" name="__codelineno-71-469" href="#__codelineno-71-469"></a>dt_properties.close();
<a id="__codelineno-71-470" name="__codelineno-71-470" href="#__codelineno-71-470"></a>
<a id="__codelineno-71-471" name="__codelineno-71-471" href="#__codelineno-71-471"></a>
<a id="__codelineno-71-472" name="__codelineno-71-472" href="#__codelineno-71-472"></a>
<a id="__codelineno-71-473" name="__codelineno-71-473" href="#__codelineno-71-473"></a>}
<a id="__codelineno-71-474" name="__codelineno-71-474" href="#__codelineno-71-474"></a>
<a id="__codelineno-71-475" name="__codelineno-71-475" href="#__codelineno-71-475"></a>
<a id="__codelineno-71-476" name="__codelineno-71-476" href="#__codelineno-71-476"></a>
<a id="__codelineno-71-477" name="__codelineno-71-477" href="#__codelineno-71-477"></a>}
<a id="__codelineno-71-478" name="__codelineno-71-478" href="#__codelineno-71-478"></a>
<a id="__codelineno-71-479" name="__codelineno-71-479" href="#__codelineno-71-479"></a>
<a id="__codelineno-71-480" name="__codelineno-71-480" href="#__codelineno-71-480"></a>
<a id="__codelineno-71-481" name="__codelineno-71-481" href="#__codelineno-71-481"></a>dt_file.close();
<a id="__codelineno-71-482" name="__codelineno-71-482" href="#__codelineno-71-482"></a>
<a id="__codelineno-71-483" name="__codelineno-71-483" href="#__codelineno-71-483"></a>
<a id="__codelineno-71-484" name="__codelineno-71-484" href="#__codelineno-71-484"></a>
<a id="__codelineno-71-485" name="__codelineno-71-485" href="#__codelineno-71-485"></a>}
<a id="__codelineno-71-486" name="__codelineno-71-486" href="#__codelineno-71-486"></a>
<a id="__codelineno-71-487" name="__codelineno-71-487" href="#__codelineno-71-487"></a>
<a id="__codelineno-71-488" name="__codelineno-71-488" href="#__codelineno-71-488"></a>
<a id="__codelineno-71-489" name="__codelineno-71-489" href="#__codelineno-71-489"></a>}
<a id="__codelineno-71-490" name="__codelineno-71-490" href="#__codelineno-71-490"></a>
<a id="__codelineno-71-491" name="__codelineno-71-491" href="#__codelineno-71-491"></a>
<a id="__codelineno-71-492" name="__codelineno-71-492" href="#__codelineno-71-492"></a>
<a id="__codelineno-71-493" name="__codelineno-71-493" href="#__codelineno-71-493"></a>}
<a id="__codelineno-71-494" name="__codelineno-71-494" href="#__codelineno-71-494"></a>
<a id="__codelineno-71-495" name="__codelineno-71-495" href="#__codelineno-71-495"></a>
<a id="__codelineno-71-496" name="__codelineno-71-496" href="#__codelineno-71-496"></a>
<a id="__codelineno-71-497" name="__codelineno-71-497" href="#__codelineno-71-497"></a>catch (...) {}
<a id="__codelineno-71-498" name="__codelineno-71-498" href="#__codelineno-71-498"></a>
<a id="__codelineno-71-499" name="__codelineno-71-499" href="#__codelineno-71-499"></a>
<a id="__codelineno-71-500" name="__codelineno-71-500" href="#__codelineno-71-500"></a>
<a id="__codelineno-71-501" name="__codelineno-71-501" href="#__codelineno-71-501"></a>auto dt_resource = resource::Resource::Create(dt_resource_attributes);
<a id="__codelineno-71-502" name="__codelineno-71-502" href="#__codelineno-71-502"></a>
<a id="__codelineno-71-503" name="__codelineno-71-503" href="#__codelineno-71-503"></a>
<a id="__codelineno-71-504" name="__codelineno-71-504" href="#__codelineno-71-504"></a>
<a id="__codelineno-71-505" name="__codelineno-71-505" href="#__codelineno-71-505"></a>auto resource = resource::Resource::Create(resource_attributes);
<a id="__codelineno-71-506" name="__codelineno-71-506" href="#__codelineno-71-506"></a>
<a id="__codelineno-71-507" name="__codelineno-71-507" href="#__codelineno-71-507"></a>
<a id="__codelineno-71-508" name="__codelineno-71-508" href="#__codelineno-71-508"></a>
<a id="__codelineno-71-509" name="__codelineno-71-509" href="#__codelineno-71-509"></a>auto merged_resource = dt_resource.Merge(resource);
<a id="__codelineno-71-510" name="__codelineno-71-510" href="#__codelineno-71-510"></a>
<a id="__codelineno-71-511" name="__codelineno-71-511" href="#__codelineno-71-511"></a>
<a id="__codelineno-71-512" name="__codelineno-71-512" href="#__codelineno-71-512"></a>
<a id="__codelineno-71-513" name="__codelineno-71-513" href="#__codelineno-71-513"></a>auto exporter = otlp::OtlpHttpExporterFactory::Create(traceOptions);
<a id="__codelineno-71-514" name="__codelineno-71-514" href="#__codelineno-71-514"></a>
<a id="__codelineno-71-515" name="__codelineno-71-515" href="#__codelineno-71-515"></a>
<a id="__codelineno-71-516" name="__codelineno-71-516" href="#__codelineno-71-516"></a>
<a id="__codelineno-71-517" name="__codelineno-71-517" href="#__codelineno-71-517"></a>auto processor = trace_sdk::SimpleSpanProcessorFactory::Create(std::move(exporter));
<a id="__codelineno-71-518" name="__codelineno-71-518" href="#__codelineno-71-518"></a>
<a id="__codelineno-71-519" name="__codelineno-71-519" href="#__codelineno-71-519"></a>
<a id="__codelineno-71-520" name="__codelineno-71-520" href="#__codelineno-71-520"></a>
<a id="__codelineno-71-521" name="__codelineno-71-521" href="#__codelineno-71-521"></a>std::vector&lt;std::unique_ptr&lt;trace_sdk::SpanProcessor&gt;&gt; processors;
<a id="__codelineno-71-522" name="__codelineno-71-522" href="#__codelineno-71-522"></a>
<a id="__codelineno-71-523" name="__codelineno-71-523" href="#__codelineno-71-523"></a>
<a id="__codelineno-71-524" name="__codelineno-71-524" href="#__codelineno-71-524"></a>
<a id="__codelineno-71-525" name="__codelineno-71-525" href="#__codelineno-71-525"></a>processors.push_back(std::move(processor));
<a id="__codelineno-71-526" name="__codelineno-71-526" href="#__codelineno-71-526"></a>
<a id="__codelineno-71-527" name="__codelineno-71-527" href="#__codelineno-71-527"></a>
<a id="__codelineno-71-528" name="__codelineno-71-528" href="#__codelineno-71-528"></a>
<a id="__codelineno-71-529" name="__codelineno-71-529" href="#__codelineno-71-529"></a>auto context = trace_sdk::TracerContextFactory::Create(std::move(processors), merged_resource);
<a id="__codelineno-71-530" name="__codelineno-71-530" href="#__codelineno-71-530"></a>
<a id="__codelineno-71-531" name="__codelineno-71-531" href="#__codelineno-71-531"></a>
<a id="__codelineno-71-532" name="__codelineno-71-532" href="#__codelineno-71-532"></a>
<a id="__codelineno-71-533" name="__codelineno-71-533" href="#__codelineno-71-533"></a>std::shared_ptr&lt;opentelemetry::trace::TracerProvider&gt; provider = opentelemetry::sdk::trace::TracerProviderFactory::Create(std::move(context));
<a id="__codelineno-71-534" name="__codelineno-71-534" href="#__codelineno-71-534"></a>
<a id="__codelineno-71-535" name="__codelineno-71-535" href="#__codelineno-71-535"></a>
<a id="__codelineno-71-536" name="__codelineno-71-536" href="#__codelineno-71-536"></a>
<a id="__codelineno-71-537" name="__codelineno-71-537" href="#__codelineno-71-537"></a>// Set the global trace provider
<a id="__codelineno-71-538" name="__codelineno-71-538" href="#__codelineno-71-538"></a>
<a id="__codelineno-71-539" name="__codelineno-71-539" href="#__codelineno-71-539"></a>
<a id="__codelineno-71-540" name="__codelineno-71-540" href="#__codelineno-71-540"></a>
<a id="__codelineno-71-541" name="__codelineno-71-541" href="#__codelineno-71-541"></a>opentelemetry::trace::Provider::SetTracerProvider(provider);
<a id="__codelineno-71-542" name="__codelineno-71-542" href="#__codelineno-71-542"></a>
<a id="__codelineno-71-543" name="__codelineno-71-543" href="#__codelineno-71-543"></a>
<a id="__codelineno-71-544" name="__codelineno-71-544" href="#__codelineno-71-544"></a>
<a id="__codelineno-71-545" name="__codelineno-71-545" href="#__codelineno-71-545"></a>// set global propagator
<a id="__codelineno-71-546" name="__codelineno-71-546" href="#__codelineno-71-546"></a>
<a id="__codelineno-71-547" name="__codelineno-71-547" href="#__codelineno-71-547"></a>
<a id="__codelineno-71-548" name="__codelineno-71-548" href="#__codelineno-71-548"></a>
<a id="__codelineno-71-549" name="__codelineno-71-549" href="#__codelineno-71-549"></a>opentelemetry::context::propagation::GlobalTextMapPropagator::SetGlobalPropagator(
<a id="__codelineno-71-550" name="__codelineno-71-550" href="#__codelineno-71-550"></a>
<a id="__codelineno-71-551" name="__codelineno-71-551" href="#__codelineno-71-551"></a>
<a id="__codelineno-71-552" name="__codelineno-71-552" href="#__codelineno-71-552"></a>
<a id="__codelineno-71-553" name="__codelineno-71-553" href="#__codelineno-71-553"></a>opentelemetry::nostd::shared_ptr&lt;opentelemetry::context::propagation::TextMapPropagator&gt;(
<a id="__codelineno-71-554" name="__codelineno-71-554" href="#__codelineno-71-554"></a>
<a id="__codelineno-71-555" name="__codelineno-71-555" href="#__codelineno-71-555"></a>
<a id="__codelineno-71-556" name="__codelineno-71-556" href="#__codelineno-71-556"></a>
<a id="__codelineno-71-557" name="__codelineno-71-557" href="#__codelineno-71-557"></a>new opentelemetry::trace::propagation::HttpTraceContext()));
<a id="__codelineno-71-558" name="__codelineno-71-558" href="#__codelineno-71-558"></a>
<a id="__codelineno-71-559" name="__codelineno-71-559" href="#__codelineno-71-559"></a>
<a id="__codelineno-71-560" name="__codelineno-71-560" href="#__codelineno-71-560"></a>
<a id="__codelineno-71-561" name="__codelineno-71-561" href="#__codelineno-71-561"></a>}
<a id="__codelineno-71-562" name="__codelineno-71-562" href="#__codelineno-71-562"></a>
<a id="__codelineno-71-563" name="__codelineno-71-563" href="#__codelineno-71-563"></a>
<a id="__codelineno-71-564" name="__codelineno-71-564" href="#__codelineno-71-564"></a>
<a id="__codelineno-71-565" name="__codelineno-71-565" href="#__codelineno-71-565"></a>// ===== METRIC SETUP =====
<a id="__codelineno-71-566" name="__codelineno-71-566" href="#__codelineno-71-566"></a>
<a id="__codelineno-71-567" name="__codelineno-71-567" href="#__codelineno-71-567"></a>
<a id="__codelineno-71-568" name="__codelineno-71-568" href="#__codelineno-71-568"></a>
<a id="__codelineno-71-569" name="__codelineno-71-569" href="#__codelineno-71-569"></a>void initMeter() {
<a id="__codelineno-71-570" name="__codelineno-71-570" href="#__codelineno-71-570"></a>
<a id="__codelineno-71-571" name="__codelineno-71-571" href="#__codelineno-71-571"></a>
<a id="__codelineno-71-572" name="__codelineno-71-572" href="#__codelineno-71-572"></a>
<a id="__codelineno-71-573" name="__codelineno-71-573" href="#__codelineno-71-573"></a>resource::ResourceAttributes resource_attributes = {{&quot;service.name&quot;, name},
<a id="__codelineno-71-574" name="__codelineno-71-574" href="#__codelineno-71-574"></a>
<a id="__codelineno-71-575" name="__codelineno-71-575" href="#__codelineno-71-575"></a>
<a id="__codelineno-71-576" name="__codelineno-71-576" href="#__codelineno-71-576"></a>
<a id="__codelineno-71-577" name="__codelineno-71-577" href="#__codelineno-71-577"></a>{&quot;service.version&quot;, version}};
<a id="__codelineno-71-578" name="__codelineno-71-578" href="#__codelineno-71-578"></a>
<a id="__codelineno-71-579" name="__codelineno-71-579" href="#__codelineno-71-579"></a>
<a id="__codelineno-71-580" name="__codelineno-71-580" href="#__codelineno-71-580"></a>
<a id="__codelineno-71-581" name="__codelineno-71-581" href="#__codelineno-71-581"></a>otlp::OtlpHttpMetricExporterOptions otlpOptions;
<a id="__codelineno-71-582" name="__codelineno-71-582" href="#__codelineno-71-582"></a>
<a id="__codelineno-71-583" name="__codelineno-71-583" href="#__codelineno-71-583"></a>
<a id="__codelineno-71-584" name="__codelineno-71-584" href="#__codelineno-71-584"></a>
<a id="__codelineno-71-585" name="__codelineno-71-585" href="#__codelineno-71-585"></a>auto resource = resource::Resource::Create(resource_attributes);
<a id="__codelineno-71-586" name="__codelineno-71-586" href="#__codelineno-71-586"></a>
<a id="__codelineno-71-587" name="__codelineno-71-587" href="#__codelineno-71-587"></a>
<a id="__codelineno-71-588" name="__codelineno-71-588" href="#__codelineno-71-588"></a>
<a id="__codelineno-71-589" name="__codelineno-71-589" href="#__codelineno-71-589"></a>otlpOptions.url = std::string(std::getenv(&quot;DT_API_URL&quot;)) + &quot;/v1/metrics&quot;;
<a id="__codelineno-71-590" name="__codelineno-71-590" href="#__codelineno-71-590"></a>
<a id="__codelineno-71-591" name="__codelineno-71-591" href="#__codelineno-71-591"></a>
<a id="__codelineno-71-592" name="__codelineno-71-592" href="#__codelineno-71-592"></a>
<a id="__codelineno-71-593" name="__codelineno-71-593" href="#__codelineno-71-593"></a>otlpOptions.aggregation_temporality = otlp::PreferredAggregationTemporality::kDelta;
<a id="__codelineno-71-594" name="__codelineno-71-594" href="#__codelineno-71-594"></a>
<a id="__codelineno-71-595" name="__codelineno-71-595" href="#__codelineno-71-595"></a>
<a id="__codelineno-71-596" name="__codelineno-71-596" href="#__codelineno-71-596"></a>
<a id="__codelineno-71-597" name="__codelineno-71-597" href="#__codelineno-71-597"></a>otlpOptions.content_type = otlp::HttpRequestContentType::kBinary;
<a id="__codelineno-71-598" name="__codelineno-71-598" href="#__codelineno-71-598"></a>
<a id="__codelineno-71-599" name="__codelineno-71-599" href="#__codelineno-71-599"></a>
<a id="__codelineno-71-600" name="__codelineno-71-600" href="#__codelineno-71-600"></a>
<a id="__codelineno-71-601" name="__codelineno-71-601" href="#__codelineno-71-601"></a>otlpOptions.http_headers.insert(std::make_pair&lt;const std::string, std::string&gt;(&quot;Authorization&quot;, std::getenv(&quot;DT_API_TOKEN&quot;)));
<a id="__codelineno-71-602" name="__codelineno-71-602" href="#__codelineno-71-602"></a>
<a id="__codelineno-71-603" name="__codelineno-71-603" href="#__codelineno-71-603"></a>
<a id="__codelineno-71-604" name="__codelineno-71-604" href="#__codelineno-71-604"></a>
<a id="__codelineno-71-605" name="__codelineno-71-605" href="#__codelineno-71-605"></a>//This creates the exporter with the options we have defined above.
<a id="__codelineno-71-606" name="__codelineno-71-606" href="#__codelineno-71-606"></a>
<a id="__codelineno-71-607" name="__codelineno-71-607" href="#__codelineno-71-607"></a>
<a id="__codelineno-71-608" name="__codelineno-71-608" href="#__codelineno-71-608"></a>
<a id="__codelineno-71-609" name="__codelineno-71-609" href="#__codelineno-71-609"></a>auto exporter = otlp::OtlpHttpMetricExporterFactory::Create(otlpOptions);
<a id="__codelineno-71-610" name="__codelineno-71-610" href="#__codelineno-71-610"></a>
<a id="__codelineno-71-611" name="__codelineno-71-611" href="#__codelineno-71-611"></a>
<a id="__codelineno-71-612" name="__codelineno-71-612" href="#__codelineno-71-612"></a>
<a id="__codelineno-71-613" name="__codelineno-71-613" href="#__codelineno-71-613"></a>metrics_sdk::PeriodicExportingMetricReaderOptions options;
<a id="__codelineno-71-614" name="__codelineno-71-614" href="#__codelineno-71-614"></a>
<a id="__codelineno-71-615" name="__codelineno-71-615" href="#__codelineno-71-615"></a>
<a id="__codelineno-71-616" name="__codelineno-71-616" href="#__codelineno-71-616"></a>
<a id="__codelineno-71-617" name="__codelineno-71-617" href="#__codelineno-71-617"></a>options.export_interval_millis = std::chrono::milliseconds(1000);
<a id="__codelineno-71-618" name="__codelineno-71-618" href="#__codelineno-71-618"></a>
<a id="__codelineno-71-619" name="__codelineno-71-619" href="#__codelineno-71-619"></a>
<a id="__codelineno-71-620" name="__codelineno-71-620" href="#__codelineno-71-620"></a>
<a id="__codelineno-71-621" name="__codelineno-71-621" href="#__codelineno-71-621"></a>options.export_timeout_millis  = std::chrono::milliseconds(500);
<a id="__codelineno-71-622" name="__codelineno-71-622" href="#__codelineno-71-622"></a>
<a id="__codelineno-71-623" name="__codelineno-71-623" href="#__codelineno-71-623"></a>
<a id="__codelineno-71-624" name="__codelineno-71-624" href="#__codelineno-71-624"></a>
<a id="__codelineno-71-625" name="__codelineno-71-625" href="#__codelineno-71-625"></a>std::unique_ptr&lt;metrics_sdk::MetricReader&gt; reader{new metrics_sdk::PeriodicExportingMetricReader(std::move(exporter), options) };
<a id="__codelineno-71-626" name="__codelineno-71-626" href="#__codelineno-71-626"></a>
<a id="__codelineno-71-627" name="__codelineno-71-627" href="#__codelineno-71-627"></a>
<a id="__codelineno-71-628" name="__codelineno-71-628" href="#__codelineno-71-628"></a>
<a id="__codelineno-71-629" name="__codelineno-71-629" href="#__codelineno-71-629"></a>auto context = metrics_sdk::MeterContextFactory::Create(opentelemetry::sdk::metrics::ViewRegistryFactory::Create(), resource);
<a id="__codelineno-71-630" name="__codelineno-71-630" href="#__codelineno-71-630"></a>
<a id="__codelineno-71-631" name="__codelineno-71-631" href="#__codelineno-71-631"></a>
<a id="__codelineno-71-632" name="__codelineno-71-632" href="#__codelineno-71-632"></a>
<a id="__codelineno-71-633" name="__codelineno-71-633" href="#__codelineno-71-633"></a>context-&gt;AddMetricReader(std::move(reader));
<a id="__codelineno-71-634" name="__codelineno-71-634" href="#__codelineno-71-634"></a>
<a id="__codelineno-71-635" name="__codelineno-71-635" href="#__codelineno-71-635"></a>
<a id="__codelineno-71-636" name="__codelineno-71-636" href="#__codelineno-71-636"></a>
<a id="__codelineno-71-637" name="__codelineno-71-637" href="#__codelineno-71-637"></a>auto u_provider = metrics_sdk::MeterProviderFactory::Create(std::move(context));
<a id="__codelineno-71-638" name="__codelineno-71-638" href="#__codelineno-71-638"></a>
<a id="__codelineno-71-639" name="__codelineno-71-639" href="#__codelineno-71-639"></a>
<a id="__codelineno-71-640" name="__codelineno-71-640" href="#__codelineno-71-640"></a>
<a id="__codelineno-71-641" name="__codelineno-71-641" href="#__codelineno-71-641"></a>std::shared_ptr&lt;opentelemetry::metrics::MeterProvider&gt; provider(std::move(u_provider));
<a id="__codelineno-71-642" name="__codelineno-71-642" href="#__codelineno-71-642"></a>
<a id="__codelineno-71-643" name="__codelineno-71-643" href="#__codelineno-71-643"></a>
<a id="__codelineno-71-644" name="__codelineno-71-644" href="#__codelineno-71-644"></a>
<a id="__codelineno-71-645" name="__codelineno-71-645" href="#__codelineno-71-645"></a>metrics_api::Provider::SetMeterProvider(provider);
<a id="__codelineno-71-646" name="__codelineno-71-646" href="#__codelineno-71-646"></a>
<a id="__codelineno-71-647" name="__codelineno-71-647" href="#__codelineno-71-647"></a>
<a id="__codelineno-71-648" name="__codelineno-71-648" href="#__codelineno-71-648"></a>
<a id="__codelineno-71-649" name="__codelineno-71-649" href="#__codelineno-71-649"></a>}
<a id="__codelineno-71-650" name="__codelineno-71-650" href="#__codelineno-71-650"></a>
<a id="__codelineno-71-651" name="__codelineno-71-651" href="#__codelineno-71-651"></a>
<a id="__codelineno-71-652" name="__codelineno-71-652" href="#__codelineno-71-652"></a>
<a id="__codelineno-71-653" name="__codelineno-71-653" href="#__codelineno-71-653"></a>// ===== LOG SETUP =====
<a id="__codelineno-71-654" name="__codelineno-71-654" href="#__codelineno-71-654"></a>
<a id="__codelineno-71-655" name="__codelineno-71-655" href="#__codelineno-71-655"></a>
<a id="__codelineno-71-656" name="__codelineno-71-656" href="#__codelineno-71-656"></a>
<a id="__codelineno-71-657" name="__codelineno-71-657" href="#__codelineno-71-657"></a>void initLogger() {
<a id="__codelineno-71-658" name="__codelineno-71-658" href="#__codelineno-71-658"></a>
<a id="__codelineno-71-659" name="__codelineno-71-659" href="#__codelineno-71-659"></a>
<a id="__codelineno-71-660" name="__codelineno-71-660" href="#__codelineno-71-660"></a>
<a id="__codelineno-71-661" name="__codelineno-71-661" href="#__codelineno-71-661"></a>resource::ResourceAttributes resource_attributes = {{&quot;service.name&quot;, name},
<a id="__codelineno-71-662" name="__codelineno-71-662" href="#__codelineno-71-662"></a>
<a id="__codelineno-71-663" name="__codelineno-71-663" href="#__codelineno-71-663"></a>
<a id="__codelineno-71-664" name="__codelineno-71-664" href="#__codelineno-71-664"></a>
<a id="__codelineno-71-665" name="__codelineno-71-665" href="#__codelineno-71-665"></a>{&quot;service.version&quot;, version}};
<a id="__codelineno-71-666" name="__codelineno-71-666" href="#__codelineno-71-666"></a>
<a id="__codelineno-71-667" name="__codelineno-71-667" href="#__codelineno-71-667"></a>
<a id="__codelineno-71-668" name="__codelineno-71-668" href="#__codelineno-71-668"></a>
<a id="__codelineno-71-669" name="__codelineno-71-669" href="#__codelineno-71-669"></a>auto resource = resource::Resource::Create(resource_attributes);
<a id="__codelineno-71-670" name="__codelineno-71-670" href="#__codelineno-71-670"></a>
<a id="__codelineno-71-671" name="__codelineno-71-671" href="#__codelineno-71-671"></a>
<a id="__codelineno-71-672" name="__codelineno-71-672" href="#__codelineno-71-672"></a>
<a id="__codelineno-71-673" name="__codelineno-71-673" href="#__codelineno-71-673"></a>otlp::OtlpHttpLogRecordExporterOptions loggerOptions;
<a id="__codelineno-71-674" name="__codelineno-71-674" href="#__codelineno-71-674"></a>
<a id="__codelineno-71-675" name="__codelineno-71-675" href="#__codelineno-71-675"></a>
<a id="__codelineno-71-676" name="__codelineno-71-676" href="#__codelineno-71-676"></a>
<a id="__codelineno-71-677" name="__codelineno-71-677" href="#__codelineno-71-677"></a>loggerOptions.url = std::string(std::getenv(&quot;DT_API_URL&quot;)) + &quot;/v1/logs&quot;;
<a id="__codelineno-71-678" name="__codelineno-71-678" href="#__codelineno-71-678"></a>
<a id="__codelineno-71-679" name="__codelineno-71-679" href="#__codelineno-71-679"></a>
<a id="__codelineno-71-680" name="__codelineno-71-680" href="#__codelineno-71-680"></a>
<a id="__codelineno-71-681" name="__codelineno-71-681" href="#__codelineno-71-681"></a>loggerOptions.http_headers.insert(std::make_pair&lt;const std::string, std::string&gt;(&quot;Authorization&quot;, std::getenv(&quot;DT_API_TOKEN&quot;)));
<a id="__codelineno-71-682" name="__codelineno-71-682" href="#__codelineno-71-682"></a>
<a id="__codelineno-71-683" name="__codelineno-71-683" href="#__codelineno-71-683"></a>
<a id="__codelineno-71-684" name="__codelineno-71-684" href="#__codelineno-71-684"></a>
<a id="__codelineno-71-685" name="__codelineno-71-685" href="#__codelineno-71-685"></a>loggerOptions.content_type = opentelemetry::exporter::otlp::HttpRequestContentType::kBinary;
<a id="__codelineno-71-686" name="__codelineno-71-686" href="#__codelineno-71-686"></a>
<a id="__codelineno-71-687" name="__codelineno-71-687" href="#__codelineno-71-687"></a>
<a id="__codelineno-71-688" name="__codelineno-71-688" href="#__codelineno-71-688"></a>
<a id="__codelineno-71-689" name="__codelineno-71-689" href="#__codelineno-71-689"></a>auto exporter  = otlp::OtlpHttpLogRecordExporterFactory::Create(loggerOptions);
<a id="__codelineno-71-690" name="__codelineno-71-690" href="#__codelineno-71-690"></a>
<a id="__codelineno-71-691" name="__codelineno-71-691" href="#__codelineno-71-691"></a>
<a id="__codelineno-71-692" name="__codelineno-71-692" href="#__codelineno-71-692"></a>
<a id="__codelineno-71-693" name="__codelineno-71-693" href="#__codelineno-71-693"></a>auto processor = logs_sdk::SimpleLogRecordProcessorFactory::Create(std::move(exporter));
<a id="__codelineno-71-694" name="__codelineno-71-694" href="#__codelineno-71-694"></a>
<a id="__codelineno-71-695" name="__codelineno-71-695" href="#__codelineno-71-695"></a>
<a id="__codelineno-71-696" name="__codelineno-71-696" href="#__codelineno-71-696"></a>
<a id="__codelineno-71-697" name="__codelineno-71-697" href="#__codelineno-71-697"></a>std::vector&lt;std::unique_ptr&lt;logs_sdk::LogRecordProcessor&gt;&gt; processors;
<a id="__codelineno-71-698" name="__codelineno-71-698" href="#__codelineno-71-698"></a>
<a id="__codelineno-71-699" name="__codelineno-71-699" href="#__codelineno-71-699"></a>
<a id="__codelineno-71-700" name="__codelineno-71-700" href="#__codelineno-71-700"></a>
<a id="__codelineno-71-701" name="__codelineno-71-701" href="#__codelineno-71-701"></a>processors.push_back(std::move(processor));
<a id="__codelineno-71-702" name="__codelineno-71-702" href="#__codelineno-71-702"></a>
<a id="__codelineno-71-703" name="__codelineno-71-703" href="#__codelineno-71-703"></a>
<a id="__codelineno-71-704" name="__codelineno-71-704" href="#__codelineno-71-704"></a>
<a id="__codelineno-71-705" name="__codelineno-71-705" href="#__codelineno-71-705"></a>auto context = logs_sdk::LoggerContextFactory::Create(std::move(processors), resource);
<a id="__codelineno-71-706" name="__codelineno-71-706" href="#__codelineno-71-706"></a>
<a id="__codelineno-71-707" name="__codelineno-71-707" href="#__codelineno-71-707"></a>
<a id="__codelineno-71-708" name="__codelineno-71-708" href="#__codelineno-71-708"></a>
<a id="__codelineno-71-709" name="__codelineno-71-709" href="#__codelineno-71-709"></a>std::shared_ptr&lt;logs_api::LoggerProvider&gt; provider = logs_sdk::LoggerProviderFactory::Create(std::move(context));
<a id="__codelineno-71-710" name="__codelineno-71-710" href="#__codelineno-71-710"></a>
<a id="__codelineno-71-711" name="__codelineno-71-711" href="#__codelineno-71-711"></a>
<a id="__codelineno-71-712" name="__codelineno-71-712" href="#__codelineno-71-712"></a>
<a id="__codelineno-71-713" name="__codelineno-71-713" href="#__codelineno-71-713"></a>opentelemetry::logs::Provider::SetLoggerProvider(provider);
<a id="__codelineno-71-714" name="__codelineno-71-714" href="#__codelineno-71-714"></a>
<a id="__codelineno-71-715" name="__codelineno-71-715" href="#__codelineno-71-715"></a>
<a id="__codelineno-71-716" name="__codelineno-71-716" href="#__codelineno-71-716"></a>
<a id="__codelineno-71-717" name="__codelineno-71-717" href="#__codelineno-71-717"></a>}
<a id="__codelineno-71-718" name="__codelineno-71-718" href="#__codelineno-71-718"></a>
<a id="__codelineno-71-719" name="__codelineno-71-719" href="#__codelineno-71-719"></a>
<a id="__codelineno-71-720" name="__codelineno-71-720" href="#__codelineno-71-720"></a>
<a id="__codelineno-71-721" name="__codelineno-71-721" href="#__codelineno-71-721"></a>nostd::shared_ptr&lt;opentelemetry::logs::Logger&gt; get_logger(std::string scope){
<a id="__codelineno-71-722" name="__codelineno-71-722" href="#__codelineno-71-722"></a>
<a id="__codelineno-71-723" name="__codelineno-71-723" href="#__codelineno-71-723"></a>
<a id="__codelineno-71-724" name="__codelineno-71-724" href="#__codelineno-71-724"></a>
<a id="__codelineno-71-725" name="__codelineno-71-725" href="#__codelineno-71-725"></a>// TODO: add your log provider here
<a id="__codelineno-71-726" name="__codelineno-71-726" href="#__codelineno-71-726"></a>
<a id="__codelineno-71-727" name="__codelineno-71-727" href="#__codelineno-71-727"></a>
<a id="__codelineno-71-728" name="__codelineno-71-728" href="#__codelineno-71-728"></a>
<a id="__codelineno-71-729" name="__codelineno-71-729" href="#__codelineno-71-729"></a>return logger;
<a id="__codelineno-71-730" name="__codelineno-71-730" href="#__codelineno-71-730"></a>
<a id="__codelineno-71-731" name="__codelineno-71-731" href="#__codelineno-71-731"></a>
<a id="__codelineno-71-732" name="__codelineno-71-732" href="#__codelineno-71-732"></a>
<a id="__codelineno-71-733" name="__codelineno-71-733" href="#__codelineno-71-733"></a>}
<a id="__codelineno-71-734" name="__codelineno-71-734" href="#__codelineno-71-734"></a>
<a id="__codelineno-71-735" name="__codelineno-71-735" href="#__codelineno-71-735"></a>
<a id="__codelineno-71-736" name="__codelineno-71-736" href="#__codelineno-71-736"></a>
<a id="__codelineno-71-737" name="__codelineno-71-737" href="#__codelineno-71-737"></a>opentelemetry::nostd::shared_ptr&lt;opentelemetry::trace::Tracer&gt; get_tracer(std::string tracer_name)
<a id="__codelineno-71-738" name="__codelineno-71-738" href="#__codelineno-71-738"></a>
<a id="__codelineno-71-739" name="__codelineno-71-739" href="#__codelineno-71-739"></a>
<a id="__codelineno-71-740" name="__codelineno-71-740" href="#__codelineno-71-740"></a>
<a id="__codelineno-71-741" name="__codelineno-71-741" href="#__codelineno-71-741"></a>{
<a id="__codelineno-71-742" name="__codelineno-71-742" href="#__codelineno-71-742"></a>
<a id="__codelineno-71-743" name="__codelineno-71-743" href="#__codelineno-71-743"></a>
<a id="__codelineno-71-744" name="__codelineno-71-744" href="#__codelineno-71-744"></a>
<a id="__codelineno-71-745" name="__codelineno-71-745" href="#__codelineno-71-745"></a>// TODO: add your trace provider here
<a id="__codelineno-71-746" name="__codelineno-71-746" href="#__codelineno-71-746"></a>
<a id="__codelineno-71-747" name="__codelineno-71-747" href="#__codelineno-71-747"></a>
<a id="__codelineno-71-748" name="__codelineno-71-748" href="#__codelineno-71-748"></a>
<a id="__codelineno-71-749" name="__codelineno-71-749" href="#__codelineno-71-749"></a>return tracer;
<a id="__codelineno-71-750" name="__codelineno-71-750" href="#__codelineno-71-750"></a>
<a id="__codelineno-71-751" name="__codelineno-71-751" href="#__codelineno-71-751"></a>
<a id="__codelineno-71-752" name="__codelineno-71-752" href="#__codelineno-71-752"></a>
<a id="__codelineno-71-753" name="__codelineno-71-753" href="#__codelineno-71-753"></a>}
<a id="__codelineno-71-754" name="__codelineno-71-754" href="#__codelineno-71-754"></a>
<a id="__codelineno-71-755" name="__codelineno-71-755" href="#__codelineno-71-755"></a>
<a id="__codelineno-71-756" name="__codelineno-71-756" href="#__codelineno-71-756"></a>
<a id="__codelineno-71-757" name="__codelineno-71-757" href="#__codelineno-71-757"></a>nostd::unique_ptr&lt;opentelemetry::metrics::Counter&lt;uint64_t&gt;&gt; initIntCounter()
<a id="__codelineno-71-758" name="__codelineno-71-758" href="#__codelineno-71-758"></a>
<a id="__codelineno-71-759" name="__codelineno-71-759" href="#__codelineno-71-759"></a>
<a id="__codelineno-71-760" name="__codelineno-71-760" href="#__codelineno-71-760"></a>
<a id="__codelineno-71-761" name="__codelineno-71-761" href="#__codelineno-71-761"></a>{
<a id="__codelineno-71-762" name="__codelineno-71-762" href="#__codelineno-71-762"></a>
<a id="__codelineno-71-763" name="__codelineno-71-763" href="#__codelineno-71-763"></a>
<a id="__codelineno-71-764" name="__codelineno-71-764" href="#__codelineno-71-764"></a>
<a id="__codelineno-71-765" name="__codelineno-71-765" href="#__codelineno-71-765"></a>// TODO: add your custom metrics here
<a id="__codelineno-71-766" name="__codelineno-71-766" href="#__codelineno-71-766"></a>
<a id="__codelineno-71-767" name="__codelineno-71-767" href="#__codelineno-71-767"></a>
<a id="__codelineno-71-768" name="__codelineno-71-768" href="#__codelineno-71-768"></a>
<a id="__codelineno-71-769" name="__codelineno-71-769" href="#__codelineno-71-769"></a>return request_counter;
<a id="__codelineno-71-770" name="__codelineno-71-770" href="#__codelineno-71-770"></a>
<a id="__codelineno-71-771" name="__codelineno-71-771" href="#__codelineno-71-771"></a>
<a id="__codelineno-71-772" name="__codelineno-71-772" href="#__codelineno-71-772"></a>
<a id="__codelineno-71-773" name="__codelineno-71-773" href="#__codelineno-71-773"></a>}
<a id="__codelineno-71-774" name="__codelineno-71-774" href="#__codelineno-71-774"></a>
<a id="__codelineno-71-775" name="__codelineno-71-775" href="#__codelineno-71-775"></a>
<a id="__codelineno-71-776" name="__codelineno-71-776" href="#__codelineno-71-776"></a>
<a id="__codelineno-71-777" name="__codelineno-71-777" href="#__codelineno-71-777"></a>void initOpenTelemetry() {
<a id="__codelineno-71-778" name="__codelineno-71-778" href="#__codelineno-71-778"></a>
<a id="__codelineno-71-779" name="__codelineno-71-779" href="#__codelineno-71-779"></a>
<a id="__codelineno-71-780" name="__codelineno-71-780" href="#__codelineno-71-780"></a>
<a id="__codelineno-71-781" name="__codelineno-71-781" href="#__codelineno-71-781"></a>// You can import only the required method
<a id="__codelineno-71-782" name="__codelineno-71-782" href="#__codelineno-71-782"></a>
<a id="__codelineno-71-783" name="__codelineno-71-783" href="#__codelineno-71-783"></a>
<a id="__codelineno-71-784" name="__codelineno-71-784" href="#__codelineno-71-784"></a>
<a id="__codelineno-71-785" name="__codelineno-71-785" href="#__codelineno-71-785"></a>initLogger();
<a id="__codelineno-71-786" name="__codelineno-71-786" href="#__codelineno-71-786"></a>
<a id="__codelineno-71-787" name="__codelineno-71-787" href="#__codelineno-71-787"></a>
<a id="__codelineno-71-788" name="__codelineno-71-788" href="#__codelineno-71-788"></a>
<a id="__codelineno-71-789" name="__codelineno-71-789" href="#__codelineno-71-789"></a>initTracer();
<a id="__codelineno-71-790" name="__codelineno-71-790" href="#__codelineno-71-790"></a>
<a id="__codelineno-71-791" name="__codelineno-71-791" href="#__codelineno-71-791"></a>
<a id="__codelineno-71-792" name="__codelineno-71-792" href="#__codelineno-71-792"></a>
<a id="__codelineno-71-793" name="__codelineno-71-793" href="#__codelineno-71-793"></a>initMeter();
<a id="__codelineno-71-794" name="__codelineno-71-794" href="#__codelineno-71-794"></a>
<a id="__codelineno-71-795" name="__codelineno-71-795" href="#__codelineno-71-795"></a>
<a id="__codelineno-71-796" name="__codelineno-71-796" href="#__codelineno-71-796"></a>
<a id="__codelineno-71-797" name="__codelineno-71-797" href="#__codelineno-71-797"></a>}
<a id="__codelineno-71-798" name="__codelineno-71-798" href="#__codelineno-71-798"></a>
<a id="__codelineno-71-799" name="__codelineno-71-799" href="#__codelineno-71-799"></a>
<a id="__codelineno-71-800" name="__codelineno-71-800" href="#__codelineno-71-800"></a>
<a id="__codelineno-71-801" name="__codelineno-71-801" href="#__codelineno-71-801"></a>}
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.
3. Configure <code>DT_API_URL</code> and <code>DT_API_TOKEN</code> for the <a href="#base-url">Dynatrace URL</a> and <a href="#access-token">access token</a> in <code>otel.h</code>.</p>
<h2 id="step-3-instrument-your-application">Step 3 Instrument your application<a class="headerlink" href="#step-3-instrument-your-application" title="Permanent link">&para;</a></h2>
<p>To use OpenTelemetry, you first need to complete these two steps:</p>
<ol>
<li>Add the necessary header files to your code.</li>
</ol>
<p>To add the header files, include <code>otel.h</code> wherever you want to make use of OpenTelemetry.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>#include &quot;otel.h&quot;
</code></pre></div>
2. Initialize OpenTelemetry.</p>
<p>For the initialization, use the <code>initOpenTelemetry</code> function in <code>otel.h</code> and call it early on in the startup code of your application.</p>
<h3 id="add-tracing">Add tracing<a class="headerlink" href="#add-tracing" title="Permanent link">&para;</a></h3>
<ol>
<li>Get a reference to the tracer provider.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>auto provider = opentelemetry::trace::Provider::GetTracerProvider();
</code></pre></div>
2. Obtain a tracer object.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>// In our case the GetTraces method takes the tracer name and returns the tracer provider
<a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>
<a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a>
<a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a>
<a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a>auto tracer = provider-&gt;GetTracer(tracer_name);
</code></pre></div>
3. With <code>tracer</code>, we can now start new spans and set them for the current execution scope.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>StartSpanOptions options;
<a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>
<a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a>
<a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a>
<a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a>options.kind = SpanKind::kServer;
<a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a>
<a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a>
<a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a>
<a id="__codelineno-75-9" name="__codelineno-75-9" href="#__codelineno-75-9"></a>auto span = tracer-&gt;StartSpan(&quot;Call to /myendpoint&quot;, {
<a id="__codelineno-75-10" name="__codelineno-75-10" href="#__codelineno-75-10"></a>
<a id="__codelineno-75-11" name="__codelineno-75-11" href="#__codelineno-75-11"></a>
<a id="__codelineno-75-12" name="__codelineno-75-12" href="#__codelineno-75-12"></a>
<a id="__codelineno-75-13" name="__codelineno-75-13" href="#__codelineno-75-13"></a>{ &quot;http.method&quot;, &quot;GET&quot; },
<a id="__codelineno-75-14" name="__codelineno-75-14" href="#__codelineno-75-14"></a>
<a id="__codelineno-75-15" name="__codelineno-75-15" href="#__codelineno-75-15"></a>
<a id="__codelineno-75-16" name="__codelineno-75-16" href="#__codelineno-75-16"></a>
<a id="__codelineno-75-17" name="__codelineno-75-17" href="#__codelineno-75-17"></a>{ &quot;net.protocol.version&quot;, &quot;1.1&quot; }
<a id="__codelineno-75-18" name="__codelineno-75-18" href="#__codelineno-75-18"></a>
<a id="__codelineno-75-19" name="__codelineno-75-19" href="#__codelineno-75-19"></a>
<a id="__codelineno-75-20" name="__codelineno-75-20" href="#__codelineno-75-20"></a>
<a id="__codelineno-75-21" name="__codelineno-75-21" href="#__codelineno-75-21"></a>}, options);
<a id="__codelineno-75-22" name="__codelineno-75-22" href="#__codelineno-75-22"></a>
<a id="__codelineno-75-23" name="__codelineno-75-23" href="#__codelineno-75-23"></a>
<a id="__codelineno-75-24" name="__codelineno-75-24" href="#__codelineno-75-24"></a>
<a id="__codelineno-75-25" name="__codelineno-75-25" href="#__codelineno-75-25"></a>auto scope = tracer-&gt;WithActiveSpan(span);
<a id="__codelineno-75-26" name="__codelineno-75-26" href="#__codelineno-75-26"></a>
<a id="__codelineno-75-27" name="__codelineno-75-27" href="#__codelineno-75-27"></a>
<a id="__codelineno-75-28" name="__codelineno-75-28" href="#__codelineno-75-28"></a>
<a id="__codelineno-75-29" name="__codelineno-75-29" href="#__codelineno-75-29"></a>// TODO: Your code goes here
<a id="__codelineno-75-30" name="__codelineno-75-30" href="#__codelineno-75-30"></a>
<a id="__codelineno-75-31" name="__codelineno-75-31" href="#__codelineno-75-31"></a>
<a id="__codelineno-75-32" name="__codelineno-75-32" href="#__codelineno-75-32"></a>
<a id="__codelineno-75-33" name="__codelineno-75-33" href="#__codelineno-75-33"></a>span-&gt;End();
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new span and name it "Call to /myendpoint"</li>
<li>Add two attributes, following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
<li>Add a <code>TODO</code> in place of the eventual business logic</li>
<li>Call the span's <code>End()</code> method to complete the span</li>
</ul>
<h3 id="collect-metrics">Collect metrics<a class="headerlink" href="#collect-metrics" title="Permanent link">&para;</a></h3>
<ol>
<li>Get a reference to the meter provider.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>auto provider = metrics_api::Provider::GetMeterProvider();
</code></pre></div>
2. Obtain a meter object.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>nostd::shared_ptr&lt;metrics_api::Meter&gt; meter = provider-&gt;GetMeter(&quot;my-meter&quot;, &quot;1.0.1&quot;);
</code></pre></div>
3. With <code>meter</code>, we can now create individual instruments, such as a counter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>auto request_counter = meter-&gt;CreateUInt64Counter(&quot;request_counter&quot;);
</code></pre></div>
4. We can now invoke the <code>Add()</code> method of <code>request_counter</code> to record new values with the counter and save additional attributes (for example, <code>action.type</code>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>std::map&lt;std::string, std::string&gt; labels = { {&quot;action.type&quot;, &quot;create&quot;} };
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a>
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a>
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a>auto labelkv = opentelemetry::common::KeyValueIterableView&lt;decltype(labels)&gt;{ labels };
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>
<a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a>
<a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a>
<a id="__codelineno-79-9" name="__codelineno-79-9" href="#__codelineno-79-9"></a>request_counter-&gt;Add(1, labelkv);
</code></pre></div>
<h3 id="connect-logs">Connect logs<a class="headerlink" href="#connect-logs" title="Permanent link">&para;</a></h3>
<ol>
<li>Get a reference to the logger provider.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a>auto provider = logs_api::Provider::GetLoggerProvider();
</code></pre></div>
2. Call the provider's <code>GetLogger()</code> method to obtain a logger instance.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a>auto logger = provider-&gt;GetLogger(&quot;scope_name&quot;, &quot;&quot;, OPENTELEMETRY_SDK_VERSION);
</code></pre></div>
3. Call any of the available logging methods to record a log statement. The following example logs a debug statement.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a>logger-&gt;Debug(&quot;My debug statement here&quot;);
</code></pre></div>
<h3 id="ensure-context-propagation-optional">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<p>In the following examples, we assume that we are handling context propagation using the standard <a href="https://www.w3.org/TR/trace-context/">W3C trace context√Ø¬ª¬ø</a> headers, and we receive and set HTTP headers with the OpenTelemetry <code>http_client::Headers</code> object.</p>
<p>For that purpose, we use an instance of the class <code>HttpTextMapCarrier</code>, which we defined during the setup, and which is based on the OpenTelemetry class <a href="https://opentelemetry-cpp.readthedocs.io/en/latest/otel_docs/classopentelemetry_1_1context_1_1propagation_1_1TextMapCarrier.html#exhale-class-classopentelemetry-1-1context-1-1propagation-1-1textmapcarrier"><code>TextMapCarrier</code>√Ø¬ª¬ø</a>.</p>
<h4 id="extracting-the-context-when-receiving-a-request">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request" title="Permanent link">&para;</a></h4>
<p>To extract information on an existing context, we call the <code>Extract</code> method of the global propagator singleton and pass it the <code>HttpTextMapCarrier</code> instance, as well as the current context. This returns a new context object (<code>new_context</code>), which we allows us to continue the previous trace with our spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a>StartSpanOptions options;
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a>
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a>options.kind          = SpanKind::kServer;
<a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>
<a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a>
<a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a>
<a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a>std::string span_name = request.uri;
<a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a>
<a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a>
<a id="__codelineno-83-12" name="__codelineno-83-12" href="#__codelineno-83-12"></a>
<a id="__codelineno-83-13" name="__codelineno-83-13" href="#__codelineno-83-13"></a>// extract context from http header
<a id="__codelineno-83-14" name="__codelineno-83-14" href="#__codelineno-83-14"></a>
<a id="__codelineno-83-15" name="__codelineno-83-15" href="#__codelineno-83-15"></a>
<a id="__codelineno-83-16" name="__codelineno-83-16" href="#__codelineno-83-16"></a>
<a id="__codelineno-83-17" name="__codelineno-83-17" href="#__codelineno-83-17"></a>std::map&lt;std::string, std::string&gt; &amp;request_headers =
<a id="__codelineno-83-18" name="__codelineno-83-18" href="#__codelineno-83-18"></a>
<a id="__codelineno-83-19" name="__codelineno-83-19" href="#__codelineno-83-19"></a>
<a id="__codelineno-83-20" name="__codelineno-83-20" href="#__codelineno-83-20"></a>
<a id="__codelineno-83-21" name="__codelineno-83-21" href="#__codelineno-83-21"></a>const_cast&lt;std::map&lt;std::string, std::string&gt; &amp;&gt;(request.headers);
<a id="__codelineno-83-22" name="__codelineno-83-22" href="#__codelineno-83-22"></a>
<a id="__codelineno-83-23" name="__codelineno-83-23" href="#__codelineno-83-23"></a>
<a id="__codelineno-83-24" name="__codelineno-83-24" href="#__codelineno-83-24"></a>
<a id="__codelineno-83-25" name="__codelineno-83-25" href="#__codelineno-83-25"></a>const HttpTextMapCarrier&lt;std::map&lt;std::string, std::string&gt;&gt; carrier(request_headers);
<a id="__codelineno-83-26" name="__codelineno-83-26" href="#__codelineno-83-26"></a>
<a id="__codelineno-83-27" name="__codelineno-83-27" href="#__codelineno-83-27"></a>
<a id="__codelineno-83-28" name="__codelineno-83-28" href="#__codelineno-83-28"></a>
<a id="__codelineno-83-29" name="__codelineno-83-29" href="#__codelineno-83-29"></a>auto prop        = context::propagation::GlobalTextMapPropagator::GetGlobalPropagator();
<a id="__codelineno-83-30" name="__codelineno-83-30" href="#__codelineno-83-30"></a>
<a id="__codelineno-83-31" name="__codelineno-83-31" href="#__codelineno-83-31"></a>
<a id="__codelineno-83-32" name="__codelineno-83-32" href="#__codelineno-83-32"></a>
<a id="__codelineno-83-33" name="__codelineno-83-33" href="#__codelineno-83-33"></a>auto current_ctx = context::RuntimeContext::GetCurrent();
<a id="__codelineno-83-34" name="__codelineno-83-34" href="#__codelineno-83-34"></a>
<a id="__codelineno-83-35" name="__codelineno-83-35" href="#__codelineno-83-35"></a>
<a id="__codelineno-83-36" name="__codelineno-83-36" href="#__codelineno-83-36"></a>
<a id="__codelineno-83-37" name="__codelineno-83-37" href="#__codelineno-83-37"></a>auto new_context = prop-&gt;Extract(carrier, current_ctx);
<a id="__codelineno-83-38" name="__codelineno-83-38" href="#__codelineno-83-38"></a>
<a id="__codelineno-83-39" name="__codelineno-83-39" href="#__codelineno-83-39"></a>
<a id="__codelineno-83-40" name="__codelineno-83-40" href="#__codelineno-83-40"></a>
<a id="__codelineno-83-41" name="__codelineno-83-41" href="#__codelineno-83-41"></a>options.parent   = GetSpan(new_context)-&gt;GetContext();
<a id="__codelineno-83-42" name="__codelineno-83-42" href="#__codelineno-83-42"></a>
<a id="__codelineno-83-43" name="__codelineno-83-43" href="#__codelineno-83-43"></a>
<a id="__codelineno-83-44" name="__codelineno-83-44" href="#__codelineno-83-44"></a>
<a id="__codelineno-83-45" name="__codelineno-83-45" href="#__codelineno-83-45"></a>auto span = get_tracer(&quot;manual-server&quot;)
<a id="__codelineno-83-46" name="__codelineno-83-46" href="#__codelineno-83-46"></a>
<a id="__codelineno-83-47" name="__codelineno-83-47" href="#__codelineno-83-47"></a>
<a id="__codelineno-83-48" name="__codelineno-83-48" href="#__codelineno-83-48"></a>
<a id="__codelineno-83-49" name="__codelineno-83-49" href="#__codelineno-83-49"></a>-&gt;StartSpan(&quot;my-server-span&quot;, { //TODO Replace with the name of your span
<a id="__codelineno-83-50" name="__codelineno-83-50" href="#__codelineno-83-50"></a>
<a id="__codelineno-83-51" name="__codelineno-83-51" href="#__codelineno-83-51"></a>
<a id="__codelineno-83-52" name="__codelineno-83-52" href="#__codelineno-83-52"></a>
<a id="__codelineno-83-53" name="__codelineno-83-53" href="#__codelineno-83-53"></a>{&quot;my-server-key-1&quot;, &quot;my-server-value-1&quot;} //TODO Add attributes
<a id="__codelineno-83-54" name="__codelineno-83-54" href="#__codelineno-83-54"></a>
<a id="__codelineno-83-55" name="__codelineno-83-55" href="#__codelineno-83-55"></a>
<a id="__codelineno-83-56" name="__codelineno-83-56" href="#__codelineno-83-56"></a>
<a id="__codelineno-83-57" name="__codelineno-83-57" href="#__codelineno-83-57"></a>}, options);
<a id="__codelineno-83-58" name="__codelineno-83-58" href="#__codelineno-83-58"></a>
<a id="__codelineno-83-59" name="__codelineno-83-59" href="#__codelineno-83-59"></a>
<a id="__codelineno-83-60" name="__codelineno-83-60" href="#__codelineno-83-60"></a>
<a id="__codelineno-83-61" name="__codelineno-83-61" href="#__codelineno-83-61"></a>auto scope = get_tracer(&quot;http_server&quot;)-&gt;WithActiveSpan(span);
<a id="__codelineno-83-62" name="__codelineno-83-62" href="#__codelineno-83-62"></a>
<a id="__codelineno-83-63" name="__codelineno-83-63" href="#__codelineno-83-63"></a>
<a id="__codelineno-83-64" name="__codelineno-83-64" href="#__codelineno-83-64"></a>
<a id="__codelineno-83-65" name="__codelineno-83-65" href="#__codelineno-83-65"></a>for (auto &amp;kv : request.headers)
<a id="__codelineno-83-66" name="__codelineno-83-66" href="#__codelineno-83-66"></a>
<a id="__codelineno-83-67" name="__codelineno-83-67" href="#__codelineno-83-67"></a>
<a id="__codelineno-83-68" name="__codelineno-83-68" href="#__codelineno-83-68"></a>
<a id="__codelineno-83-69" name="__codelineno-83-69" href="#__codelineno-83-69"></a>{
<a id="__codelineno-83-70" name="__codelineno-83-70" href="#__codelineno-83-70"></a>
<a id="__codelineno-83-71" name="__codelineno-83-71" href="#__codelineno-83-71"></a>
<a id="__codelineno-83-72" name="__codelineno-83-72" href="#__codelineno-83-72"></a>
<a id="__codelineno-83-73" name="__codelineno-83-73" href="#__codelineno-83-73"></a>span-&gt;SetAttribute(&quot;http.header.&quot; + std::string(kv.first.data()), kv.second);
<a id="__codelineno-83-74" name="__codelineno-83-74" href="#__codelineno-83-74"></a>
<a id="__codelineno-83-75" name="__codelineno-83-75" href="#__codelineno-83-75"></a>
<a id="__codelineno-83-76" name="__codelineno-83-76" href="#__codelineno-83-76"></a>
<a id="__codelineno-83-77" name="__codelineno-83-77" href="#__codelineno-83-77"></a>}
<a id="__codelineno-83-78" name="__codelineno-83-78" href="#__codelineno-83-78"></a>
<a id="__codelineno-83-79" name="__codelineno-83-79" href="#__codelineno-83-79"></a>
<a id="__codelineno-83-80" name="__codelineno-83-80" href="#__codelineno-83-80"></a>
<a id="__codelineno-83-81" name="__codelineno-83-81" href="#__codelineno-83-81"></a>span-&gt;AddEvent(&quot;Processing request&quot;);
<a id="__codelineno-83-82" name="__codelineno-83-82" href="#__codelineno-83-82"></a>
<a id="__codelineno-83-83" name="__codelineno-83-83" href="#__codelineno-83-83"></a>
<a id="__codelineno-83-84" name="__codelineno-83-84" href="#__codelineno-83-84"></a>
<a id="__codelineno-83-85" name="__codelineno-83-85" href="#__codelineno-83-85"></a>response.headers[HTTP_SERVER_NS::CONTENT_TYPE] = HTTP_SERVER_NS::CONTENT_TYPE_TEXT;
<a id="__codelineno-83-86" name="__codelineno-83-86" href="#__codelineno-83-86"></a>
<a id="__codelineno-83-87" name="__codelineno-83-87" href="#__codelineno-83-87"></a>
<a id="__codelineno-83-88" name="__codelineno-83-88" href="#__codelineno-83-88"></a>
<a id="__codelineno-83-89" name="__codelineno-83-89" href="#__codelineno-83-89"></a>response.body = doCall();
<a id="__codelineno-83-90" name="__codelineno-83-90" href="#__codelineno-83-90"></a>
<a id="__codelineno-83-91" name="__codelineno-83-91" href="#__codelineno-83-91"></a>
<a id="__codelineno-83-92" name="__codelineno-83-92" href="#__codelineno-83-92"></a>
<a id="__codelineno-83-93" name="__codelineno-83-93" href="#__codelineno-83-93"></a>span-&gt;End();
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests" title="Permanent link">&para;</a></h4>
<p>For injecting current context information into an outbound request, we call the <code>Inject</code> method of the global propagator singleton and pass it the <code>HttpTextMapCarrier</code> instance, as well as the current context. This adds the applicable headers to the <code>carrier</code> instance, which we then use in the text step with our HTTP request.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>auto http_client = http_client::HttpClientFactory::CreateSync();
<a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>
<a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a>
<a id="__codelineno-84-4" name="__codelineno-84-4" href="#__codelineno-84-4"></a>
<a id="__codelineno-84-5" name="__codelineno-84-5" href="#__codelineno-84-5"></a>std::string url  = std::getenv(&quot;URL&quot;); // TODO set URL you want to call
<a id="__codelineno-84-6" name="__codelineno-84-6" href="#__codelineno-84-6"></a>
<a id="__codelineno-84-7" name="__codelineno-84-7" href="#__codelineno-84-7"></a>
<a id="__codelineno-84-8" name="__codelineno-84-8" href="#__codelineno-84-8"></a>
<a id="__codelineno-84-9" name="__codelineno-84-9" href="#__codelineno-84-9"></a>CustomCounter(); // remove
<a id="__codelineno-84-10" name="__codelineno-84-10" href="#__codelineno-84-10"></a>
<a id="__codelineno-84-11" name="__codelineno-84-11" href="#__codelineno-84-11"></a>
<a id="__codelineno-84-12" name="__codelineno-84-12" href="#__codelineno-84-12"></a>
<a id="__codelineno-84-13" name="__codelineno-84-13" href="#__codelineno-84-13"></a>// start active span
<a id="__codelineno-84-14" name="__codelineno-84-14" href="#__codelineno-84-14"></a>
<a id="__codelineno-84-15" name="__codelineno-84-15" href="#__codelineno-84-15"></a>
<a id="__codelineno-84-16" name="__codelineno-84-16" href="#__codelineno-84-16"></a>
<a id="__codelineno-84-17" name="__codelineno-84-17" href="#__codelineno-84-17"></a>StartSpanOptions options;
<a id="__codelineno-84-18" name="__codelineno-84-18" href="#__codelineno-84-18"></a>
<a id="__codelineno-84-19" name="__codelineno-84-19" href="#__codelineno-84-19"></a>
<a id="__codelineno-84-20" name="__codelineno-84-20" href="#__codelineno-84-20"></a>
<a id="__codelineno-84-21" name="__codelineno-84-21" href="#__codelineno-84-21"></a>options.kind = SpanKind::kClient;
<a id="__codelineno-84-22" name="__codelineno-84-22" href="#__codelineno-84-22"></a>
<a id="__codelineno-84-23" name="__codelineno-84-23" href="#__codelineno-84-23"></a>
<a id="__codelineno-84-24" name="__codelineno-84-24" href="#__codelineno-84-24"></a>
<a id="__codelineno-84-25" name="__codelineno-84-25" href="#__codelineno-84-25"></a>opentelemetry::ext::http::common::UrlParser url_parser(url);
<a id="__codelineno-84-26" name="__codelineno-84-26" href="#__codelineno-84-26"></a>
<a id="__codelineno-84-27" name="__codelineno-84-27" href="#__codelineno-84-27"></a>
<a id="__codelineno-84-28" name="__codelineno-84-28" href="#__codelineno-84-28"></a>
<a id="__codelineno-84-29" name="__codelineno-84-29" href="#__codelineno-84-29"></a>std::string span_name = url_parser.path_;
<a id="__codelineno-84-30" name="__codelineno-84-30" href="#__codelineno-84-30"></a>
<a id="__codelineno-84-31" name="__codelineno-84-31" href="#__codelineno-84-31"></a>
<a id="__codelineno-84-32" name="__codelineno-84-32" href="#__codelineno-84-32"></a>
<a id="__codelineno-84-33" name="__codelineno-84-33" href="#__codelineno-84-33"></a>auto span = get_tracer(&quot;http-client&quot;)-&gt;StartSpan(span_name,
<a id="__codelineno-84-34" name="__codelineno-84-34" href="#__codelineno-84-34"></a>
<a id="__codelineno-84-35" name="__codelineno-84-35" href="#__codelineno-84-35"></a>
<a id="__codelineno-84-36" name="__codelineno-84-36" href="#__codelineno-84-36"></a>
<a id="__codelineno-84-37" name="__codelineno-84-37" href="#__codelineno-84-37"></a>{{opentelemetry::semconv::url::kUrlFull, url_parser.url_},
<a id="__codelineno-84-38" name="__codelineno-84-38" href="#__codelineno-84-38"></a>
<a id="__codelineno-84-39" name="__codelineno-84-39" href="#__codelineno-84-39"></a>
<a id="__codelineno-84-40" name="__codelineno-84-40" href="#__codelineno-84-40"></a>
<a id="__codelineno-84-41" name="__codelineno-84-41" href="#__codelineno-84-41"></a>{opentelemetry::semconv::url::kUrlScheme, url_parser.scheme_},
<a id="__codelineno-84-42" name="__codelineno-84-42" href="#__codelineno-84-42"></a>
<a id="__codelineno-84-43" name="__codelineno-84-43" href="#__codelineno-84-43"></a>
<a id="__codelineno-84-44" name="__codelineno-84-44" href="#__codelineno-84-44"></a>
<a id="__codelineno-84-45" name="__codelineno-84-45" href="#__codelineno-84-45"></a>{opentelemetry::semconv::http::kHttpRequestMethod, &quot;GET&quot;}},
<a id="__codelineno-84-46" name="__codelineno-84-46" href="#__codelineno-84-46"></a>
<a id="__codelineno-84-47" name="__codelineno-84-47" href="#__codelineno-84-47"></a>
<a id="__codelineno-84-48" name="__codelineno-84-48" href="#__codelineno-84-48"></a>
<a id="__codelineno-84-49" name="__codelineno-84-49" href="#__codelineno-84-49"></a>options);
<a id="__codelineno-84-50" name="__codelineno-84-50" href="#__codelineno-84-50"></a>
<a id="__codelineno-84-51" name="__codelineno-84-51" href="#__codelineno-84-51"></a>
<a id="__codelineno-84-52" name="__codelineno-84-52" href="#__codelineno-84-52"></a>
<a id="__codelineno-84-53" name="__codelineno-84-53" href="#__codelineno-84-53"></a>auto scope = get_tracer(&quot;http-client&quot;)-&gt;WithActiveSpan(span);
<a id="__codelineno-84-54" name="__codelineno-84-54" href="#__codelineno-84-54"></a>
<a id="__codelineno-84-55" name="__codelineno-84-55" href="#__codelineno-84-55"></a>
<a id="__codelineno-84-56" name="__codelineno-84-56" href="#__codelineno-84-56"></a>
<a id="__codelineno-84-57" name="__codelineno-84-57" href="#__codelineno-84-57"></a>// inject current context into http header
<a id="__codelineno-84-58" name="__codelineno-84-58" href="#__codelineno-84-58"></a>
<a id="__codelineno-84-59" name="__codelineno-84-59" href="#__codelineno-84-59"></a>
<a id="__codelineno-84-60" name="__codelineno-84-60" href="#__codelineno-84-60"></a>
<a id="__codelineno-84-61" name="__codelineno-84-61" href="#__codelineno-84-61"></a>auto current_ctx = context::RuntimeContext::GetCurrent();
<a id="__codelineno-84-62" name="__codelineno-84-62" href="#__codelineno-84-62"></a>
<a id="__codelineno-84-63" name="__codelineno-84-63" href="#__codelineno-84-63"></a>
<a id="__codelineno-84-64" name="__codelineno-84-64" href="#__codelineno-84-64"></a>
<a id="__codelineno-84-65" name="__codelineno-84-65" href="#__codelineno-84-65"></a>HttpTextMapCarrier&lt;http_client::Headers&gt; carrier;
<a id="__codelineno-84-66" name="__codelineno-84-66" href="#__codelineno-84-66"></a>
<a id="__codelineno-84-67" name="__codelineno-84-67" href="#__codelineno-84-67"></a>
<a id="__codelineno-84-68" name="__codelineno-84-68" href="#__codelineno-84-68"></a>
<a id="__codelineno-84-69" name="__codelineno-84-69" href="#__codelineno-84-69"></a>auto prop = context::propagation::GlobalTextMapPropagator::GetGlobalPropagator();
<a id="__codelineno-84-70" name="__codelineno-84-70" href="#__codelineno-84-70"></a>
<a id="__codelineno-84-71" name="__codelineno-84-71" href="#__codelineno-84-71"></a>
<a id="__codelineno-84-72" name="__codelineno-84-72" href="#__codelineno-84-72"></a>
<a id="__codelineno-84-73" name="__codelineno-84-73" href="#__codelineno-84-73"></a>prop-&gt;Inject(carrier, current_ctx);
<a id="__codelineno-84-74" name="__codelineno-84-74" href="#__codelineno-84-74"></a>
<a id="__codelineno-84-75" name="__codelineno-84-75" href="#__codelineno-84-75"></a>
<a id="__codelineno-84-76" name="__codelineno-84-76" href="#__codelineno-84-76"></a>
<a id="__codelineno-84-77" name="__codelineno-84-77" href="#__codelineno-84-77"></a>// send http request
<a id="__codelineno-84-78" name="__codelineno-84-78" href="#__codelineno-84-78"></a>
<a id="__codelineno-84-79" name="__codelineno-84-79" href="#__codelineno-84-79"></a>
<a id="__codelineno-84-80" name="__codelineno-84-80" href="#__codelineno-84-80"></a>
<a id="__codelineno-84-81" name="__codelineno-84-81" href="#__codelineno-84-81"></a>http_client::Result result = http_client-&gt;GetNoSsl(url, carrier.headers_);
<a id="__codelineno-84-82" name="__codelineno-84-82" href="#__codelineno-84-82"></a>
<a id="__codelineno-84-83" name="__codelineno-84-83" href="#__codelineno-84-83"></a>
<a id="__codelineno-84-84" name="__codelineno-84-84" href="#__codelineno-84-84"></a>
<a id="__codelineno-84-85" name="__codelineno-84-85" href="#__codelineno-84-85"></a>//your code goes here
<a id="__codelineno-84-86" name="__codelineno-84-86" href="#__codelineno-84-86"></a>
<a id="__codelineno-84-87" name="__codelineno-84-87" href="#__codelineno-84-87"></a>
<a id="__codelineno-84-88" name="__codelineno-84-88" href="#__codelineno-84-88"></a>
<a id="__codelineno-84-89" name="__codelineno-84-89" href="#__codelineno-84-89"></a>//then end span
</code></pre></div>
<h2 id="step-4-configure-data-capture-to-meet-privacy-requirements-optional">Step 4 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-4-configure-data-capture-to-meet-privacy-requirements-optional" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-5-verify-data-ingestion-into-dynatrace">Step 5 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-5-verify-data-ingestion-into-dynatrace" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_11">Related topics<a class="headerlink" href="#related-topics_11" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-dotnetmd">Source: dotnet.md<a class="headerlink" href="#source-dotnetmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your .NET application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/dotnet
scraped: 2026-02-15T21:25:49.684876</p>
<hr />
<h1 id="instrument-your-net-application-with-opentelemetry">Instrument your .NET application with OpenTelemetry<a class="headerlink" href="#instrument-your-net-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-net-application-with-opentelemetry_1">Instrument your .NET application with OpenTelemetry<a class="headerlink" href="#instrument-your-net-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>7-min read</li>
<li>Updated on Nov 14, 2023</li>
</ul>
<p>This walkthrough shows how to add observability to your .NET application using the OpenTelemetry .NET libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_11">Prerequisites<a class="headerlink" href="#prerequisites_11" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.254+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_1">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_1" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_1">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_1" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_1">Get API access token<a class="headerlink" href="#get-api-access-token_1" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-choose-how-you-want-to-instrument-your-application">Step 2 Choose how you want to instrument your application<a class="headerlink" href="#step-2-choose-how-you-want-to-instrument-your-application" title="Permanent link">&para;</a></h2>
<p>For .NET, OpenTelemetry supports automatic and manual instrumentation (or a combination of both).</p>
<p>Which instrumentation should I choose?</p>
<p>It's a good idea to start with automatic instrumentation and add manual instrumentation if the automatic approach doesn't work or doesn't provide enough information.</p>
<h2 id="step-3-optional-automatically-instrument-your-application-optional">Step 3 optional Automatically instrument your application Optional<a class="headerlink" href="#step-3-optional-automatically-instrument-your-application-optional" title="Permanent link">&para;</a></h2>
<p>.NET automatic instrumentation can be configured either during development or later after deployment.</p>
<p>Enrichment with OneAgent</p>
<p>It is currently not possible to <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">enrich</a> automatically instrumented services with host-relevant information. To achieve this, you'd need to switch to manual instrumentation.</p>
<p>During development</p>
<p>After deployment</p>
<ol>
<li>Install <a href="https://www.nuget.org/packages/OpenTelemetry.Extensions.Hosting"><code>OpenTelemetry.Extensions.Hosting</code>√Ø¬ª¬ø</a>.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>dotnet add package OpenTelemetry.Extensions.Hosting
</code></pre></div>
2. Install the appropriate instrumentation library for your .NET framework (full list available <a href="https://www.nuget.org/packages?q=OpenTelemetry.Instrumentation">here√Ø¬ª¬ø</a>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>dotnet add package OpenTelemetry.Instrumentation.[FRAMEWORK_NAME]
</code></pre></div>
<ol>
<li>Download the <a href="https://github.com/open-telemetry/opentelemetry-dotnet-instrumentation/releases/latest">latest auto installer√Ø¬ª¬ø</a> for the target operating system.</li>
<li><a href="https://github.com/open-telemetry/opentelemetry-dotnet-instrumentation#shell-scripts">Run (on Unix)√Ø¬ª¬ø</a> or <a href="https://github.com/open-telemetry/opentelemetry-dotnet-instrumentation#powershell-module-windows">import (on Windows)√Ø¬ª¬ø</a> the auto installer, to install and set up all necessary auto instrumentation libraries.</li>
<li>Run your application.</li>
</ol>
<p>In addition to the instrumentation setup above, you also need to configure the relevant export parameters with environment variables. This includes the <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">endpoint URL</a>, the <a href="/docs/ingest-from/opentelemetry/otlp-api#authentication-export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">authentication token</a>, and the <a href="/docs/ingest-from/opentelemetry/otlp-api/ingest-otlp-metrics/about-metrics-ingest#aggregation-temporality" title="Learn how Dynatrace ingests OpenTelemetry metrics and what limitations apply.">temporality preference for metrics</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>OTEL_EXPORTER_OTLP_ENDPOINT=[URL]
<a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a>
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a>
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a>OTEL_EXPORTER_OTLP_HEADERS=&quot;Authorization=Api-Token [TOKEN]&quot;
<a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a>
<a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a>
<a id="__codelineno-87-8" name="__codelineno-87-8" href="#__codelineno-87-8"></a>
<a id="__codelineno-87-9" name="__codelineno-87-9" href="#__codelineno-87-9"></a>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE=delta
</code></pre></div>
<h2 id="step-4-optional-manually-instrument-your-application-optional">Step 4 optional Manually instrument your application Optional<a class="headerlink" href="#step-4-optional-manually-instrument-your-application-optional" title="Permanent link">&para;</a></h2>
<h3 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h3>
<p>The setup steps slightly differ depending on whether you instrument a plain .NET application or an ASP.NET application.</p>
<p>.NET</p>
<p>ASP.NET</p>
<ol>
<li>Install the following packages.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>dotnet add package Microsoft.Extensions.Logging
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>
<a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a>dotnet add package OpenTelemetry.Extensions.Hosting
<a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>
<a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a>
<a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a>
<a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a>dotnet add package OpenTelemetry
<a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a>
<a id="__codelineno-88-11" name="__codelineno-88-11" href="#__codelineno-88-11"></a>
<a id="__codelineno-88-12" name="__codelineno-88-12" href="#__codelineno-88-12"></a>
<a id="__codelineno-88-13" name="__codelineno-88-13" href="#__codelineno-88-13"></a>dotnet add package OpenTelemetry.Api
<a id="__codelineno-88-14" name="__codelineno-88-14" href="#__codelineno-88-14"></a>
<a id="__codelineno-88-15" name="__codelineno-88-15" href="#__codelineno-88-15"></a>
<a id="__codelineno-88-16" name="__codelineno-88-16" href="#__codelineno-88-16"></a>
<a id="__codelineno-88-17" name="__codelineno-88-17" href="#__codelineno-88-17"></a>dotnet add package OpenTelemetry.Exporter.OpenTelemetryProtocol
</code></pre></div>
2. Add the following <code>using</code> statements to the startup class, which bootstraps your application.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>using OpenTelemetry;
<a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a>
<a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a>
<a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a>
<a id="__codelineno-89-5" name="__codelineno-89-5" href="#__codelineno-89-5"></a>using OpenTelemetry.Trace;
<a id="__codelineno-89-6" name="__codelineno-89-6" href="#__codelineno-89-6"></a>
<a id="__codelineno-89-7" name="__codelineno-89-7" href="#__codelineno-89-7"></a>
<a id="__codelineno-89-8" name="__codelineno-89-8" href="#__codelineno-89-8"></a>
<a id="__codelineno-89-9" name="__codelineno-89-9" href="#__codelineno-89-9"></a>using OpenTelemetry.Exporter;
<a id="__codelineno-89-10" name="__codelineno-89-10" href="#__codelineno-89-10"></a>
<a id="__codelineno-89-11" name="__codelineno-89-11" href="#__codelineno-89-11"></a>
<a id="__codelineno-89-12" name="__codelineno-89-12" href="#__codelineno-89-12"></a>
<a id="__codelineno-89-13" name="__codelineno-89-13" href="#__codelineno-89-13"></a>using OpenTelemetry.Metrics;
<a id="__codelineno-89-14" name="__codelineno-89-14" href="#__codelineno-89-14"></a>
<a id="__codelineno-89-15" name="__codelineno-89-15" href="#__codelineno-89-15"></a>
<a id="__codelineno-89-16" name="__codelineno-89-16" href="#__codelineno-89-16"></a>
<a id="__codelineno-89-17" name="__codelineno-89-17" href="#__codelineno-89-17"></a>using OpenTelemetry.Logs;
<a id="__codelineno-89-18" name="__codelineno-89-18" href="#__codelineno-89-18"></a>
<a id="__codelineno-89-19" name="__codelineno-89-19" href="#__codelineno-89-19"></a>
<a id="__codelineno-89-20" name="__codelineno-89-20" href="#__codelineno-89-20"></a>
<a id="__codelineno-89-21" name="__codelineno-89-21" href="#__codelineno-89-21"></a>using OpenTelemetry.Resources;
<a id="__codelineno-89-22" name="__codelineno-89-22" href="#__codelineno-89-22"></a>
<a id="__codelineno-89-23" name="__codelineno-89-23" href="#__codelineno-89-23"></a>
<a id="__codelineno-89-24" name="__codelineno-89-24" href="#__codelineno-89-24"></a>
<a id="__codelineno-89-25" name="__codelineno-89-25" href="#__codelineno-89-25"></a>using OpenTelemetry.Context.Propagation;
<a id="__codelineno-89-26" name="__codelineno-89-26" href="#__codelineno-89-26"></a>
<a id="__codelineno-89-27" name="__codelineno-89-27" href="#__codelineno-89-27"></a>
<a id="__codelineno-89-28" name="__codelineno-89-28" href="#__codelineno-89-28"></a>
<a id="__codelineno-89-29" name="__codelineno-89-29" href="#__codelineno-89-29"></a>using System.Diagnostics;
<a id="__codelineno-89-30" name="__codelineno-89-30" href="#__codelineno-89-30"></a>
<a id="__codelineno-89-31" name="__codelineno-89-31" href="#__codelineno-89-31"></a>
<a id="__codelineno-89-32" name="__codelineno-89-32" href="#__codelineno-89-32"></a>
<a id="__codelineno-89-33" name="__codelineno-89-33" href="#__codelineno-89-33"></a>using System.Diagnostics.Metrics;
<a id="__codelineno-89-34" name="__codelineno-89-34" href="#__codelineno-89-34"></a>
<a id="__codelineno-89-35" name="__codelineno-89-35" href="#__codelineno-89-35"></a>
<a id="__codelineno-89-36" name="__codelineno-89-36" href="#__codelineno-89-36"></a>
<a id="__codelineno-89-37" name="__codelineno-89-37" href="#__codelineno-89-37"></a>using Microsoft.Extensions.Logging;
</code></pre></div>
3. Add these fields to your startup class, with the first two containing the <a href="#dynatrace-docs--otlp-export">access details</a>, if you are using the OTLP export.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a>private static string DT_API_URL = &quot;&quot;; // TODO: Provide your SaaS/Managed URL here
<a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>
<a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a>
<a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a>
<a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a>private static string DT_API_TOKEN = &quot;&quot;; // TODO: Provide the OpenTelemetry-scoped access token here
<a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a>
<a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a>
<a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a>
<a id="__codelineno-90-9" name="__codelineno-90-9" href="#__codelineno-90-9"></a>private const string activitySource = &quot;Dynatrace.DotNetApp.Sample&quot;; // TODO: Provide a descriptive name for your application here
<a id="__codelineno-90-10" name="__codelineno-90-10" href="#__codelineno-90-10"></a>
<a id="__codelineno-90-11" name="__codelineno-90-11" href="#__codelineno-90-11"></a>
<a id="__codelineno-90-12" name="__codelineno-90-12" href="#__codelineno-90-12"></a>
<a id="__codelineno-90-13" name="__codelineno-90-13" href="#__codelineno-90-13"></a>public static readonly ActivitySource MyActivitySource = new ActivitySource(activitySource);
<a id="__codelineno-90-14" name="__codelineno-90-14" href="#__codelineno-90-14"></a>
<a id="__codelineno-90-15" name="__codelineno-90-15" href="#__codelineno-90-15"></a>
<a id="__codelineno-90-16" name="__codelineno-90-16" href="#__codelineno-90-16"></a>
<a id="__codelineno-90-17" name="__codelineno-90-17" href="#__codelineno-90-17"></a>private static ILoggerFactory loggerFactoryOT;
</code></pre></div>
<p>Value injection</p>
<p>Instead of hardcoding the URL and token, you might also consider reading them from storage specific to your application framework (for example, environment variables or framework secrets).
4. Add the <code>initOpenTelemetry</code> method to your startup class and invoke it as early as possible during your application startup. This initializes OpenTelemetry for the Dynatrace backend and creates default tracer and meter providers.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>private static void initOpenTelemetry(IServiceCollection services)
<a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>
<a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a>
<a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a>
<a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a>{
<a id="__codelineno-91-6" name="__codelineno-91-6" href="#__codelineno-91-6"></a>
<a id="__codelineno-91-7" name="__codelineno-91-7" href="#__codelineno-91-7"></a>
<a id="__codelineno-91-8" name="__codelineno-91-8" href="#__codelineno-91-8"></a>
<a id="__codelineno-91-9" name="__codelineno-91-9" href="#__codelineno-91-9"></a>List&lt;KeyValuePair&lt;string, object&gt;&gt; dt_metadata = new List&lt;KeyValuePair&lt;string, object&gt;&gt;();
<a id="__codelineno-91-10" name="__codelineno-91-10" href="#__codelineno-91-10"></a>
<a id="__codelineno-91-11" name="__codelineno-91-11" href="#__codelineno-91-11"></a>
<a id="__codelineno-91-12" name="__codelineno-91-12" href="#__codelineno-91-12"></a>
<a id="__codelineno-91-13" name="__codelineno-91-13" href="#__codelineno-91-13"></a>foreach (string name in new string[] {&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;,
<a id="__codelineno-91-14" name="__codelineno-91-14" href="#__codelineno-91-14"></a>
<a id="__codelineno-91-15" name="__codelineno-91-15" href="#__codelineno-91-15"></a>
<a id="__codelineno-91-16" name="__codelineno-91-16" href="#__codelineno-91-16"></a>
<a id="__codelineno-91-17" name="__codelineno-91-17" href="#__codelineno-91-17"></a>&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;,
<a id="__codelineno-91-18" name="__codelineno-91-18" href="#__codelineno-91-18"></a>
<a id="__codelineno-91-19" name="__codelineno-91-19" href="#__codelineno-91-19"></a>
<a id="__codelineno-91-20" name="__codelineno-91-20" href="#__codelineno-91-20"></a>
<a id="__codelineno-91-21" name="__codelineno-91-21" href="#__codelineno-91-21"></a>&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;}) {
<a id="__codelineno-91-22" name="__codelineno-91-22" href="#__codelineno-91-22"></a>
<a id="__codelineno-91-23" name="__codelineno-91-23" href="#__codelineno-91-23"></a>
<a id="__codelineno-91-24" name="__codelineno-91-24" href="#__codelineno-91-24"></a>
<a id="__codelineno-91-25" name="__codelineno-91-25" href="#__codelineno-91-25"></a>try {
<a id="__codelineno-91-26" name="__codelineno-91-26" href="#__codelineno-91-26"></a>
<a id="__codelineno-91-27" name="__codelineno-91-27" href="#__codelineno-91-27"></a>
<a id="__codelineno-91-28" name="__codelineno-91-28" href="#__codelineno-91-28"></a>
<a id="__codelineno-91-29" name="__codelineno-91-29" href="#__codelineno-91-29"></a>foreach (string line in System.IO.File.ReadAllLines(name.StartsWith(&quot;/var&quot;) ? name : System.IO.File.ReadAllText(name))) {
<a id="__codelineno-91-30" name="__codelineno-91-30" href="#__codelineno-91-30"></a>
<a id="__codelineno-91-31" name="__codelineno-91-31" href="#__codelineno-91-31"></a>
<a id="__codelineno-91-32" name="__codelineno-91-32" href="#__codelineno-91-32"></a>
<a id="__codelineno-91-33" name="__codelineno-91-33" href="#__codelineno-91-33"></a>var keyvalue = line.Split(&quot;=&quot;);
<a id="__codelineno-91-34" name="__codelineno-91-34" href="#__codelineno-91-34"></a>
<a id="__codelineno-91-35" name="__codelineno-91-35" href="#__codelineno-91-35"></a>
<a id="__codelineno-91-36" name="__codelineno-91-36" href="#__codelineno-91-36"></a>
<a id="__codelineno-91-37" name="__codelineno-91-37" href="#__codelineno-91-37"></a>dt_metadata.Add( new KeyValuePair&lt;string, object&gt;(keyvalue[0], keyvalue[1]));
<a id="__codelineno-91-38" name="__codelineno-91-38" href="#__codelineno-91-38"></a>
<a id="__codelineno-91-39" name="__codelineno-91-39" href="#__codelineno-91-39"></a>
<a id="__codelineno-91-40" name="__codelineno-91-40" href="#__codelineno-91-40"></a>
<a id="__codelineno-91-41" name="__codelineno-91-41" href="#__codelineno-91-41"></a>}
<a id="__codelineno-91-42" name="__codelineno-91-42" href="#__codelineno-91-42"></a>
<a id="__codelineno-91-43" name="__codelineno-91-43" href="#__codelineno-91-43"></a>
<a id="__codelineno-91-44" name="__codelineno-91-44" href="#__codelineno-91-44"></a>
<a id="__codelineno-91-45" name="__codelineno-91-45" href="#__codelineno-91-45"></a>}
<a id="__codelineno-91-46" name="__codelineno-91-46" href="#__codelineno-91-46"></a>
<a id="__codelineno-91-47" name="__codelineno-91-47" href="#__codelineno-91-47"></a>
<a id="__codelineno-91-48" name="__codelineno-91-48" href="#__codelineno-91-48"></a>
<a id="__codelineno-91-49" name="__codelineno-91-49" href="#__codelineno-91-49"></a>catch { }
<a id="__codelineno-91-50" name="__codelineno-91-50" href="#__codelineno-91-50"></a>
<a id="__codelineno-91-51" name="__codelineno-91-51" href="#__codelineno-91-51"></a>
<a id="__codelineno-91-52" name="__codelineno-91-52" href="#__codelineno-91-52"></a>
<a id="__codelineno-91-53" name="__codelineno-91-53" href="#__codelineno-91-53"></a>}
<a id="__codelineno-91-54" name="__codelineno-91-54" href="#__codelineno-91-54"></a>
<a id="__codelineno-91-55" name="__codelineno-91-55" href="#__codelineno-91-55"></a>
<a id="__codelineno-91-56" name="__codelineno-91-56" href="#__codelineno-91-56"></a>
<a id="__codelineno-91-57" name="__codelineno-91-57" href="#__codelineno-91-57"></a>Action&lt;ResourceBuilder&gt; configureResource = r =&gt; r
<a id="__codelineno-91-58" name="__codelineno-91-58" href="#__codelineno-91-58"></a>
<a id="__codelineno-91-59" name="__codelineno-91-59" href="#__codelineno-91-59"></a>
<a id="__codelineno-91-60" name="__codelineno-91-60" href="#__codelineno-91-60"></a>
<a id="__codelineno-91-61" name="__codelineno-91-61" href="#__codelineno-91-61"></a>.AddService(serviceName: &quot;dotnet-quickstart&quot;) //TODO Replace with the name of your application
<a id="__codelineno-91-62" name="__codelineno-91-62" href="#__codelineno-91-62"></a>
<a id="__codelineno-91-63" name="__codelineno-91-63" href="#__codelineno-91-63"></a>
<a id="__codelineno-91-64" name="__codelineno-91-64" href="#__codelineno-91-64"></a>
<a id="__codelineno-91-65" name="__codelineno-91-65" href="#__codelineno-91-65"></a>.AddAttributes(dt_metadata);
<a id="__codelineno-91-66" name="__codelineno-91-66" href="#__codelineno-91-66"></a>
<a id="__codelineno-91-67" name="__codelineno-91-67" href="#__codelineno-91-67"></a>
<a id="__codelineno-91-68" name="__codelineno-91-68" href="#__codelineno-91-68"></a>
<a id="__codelineno-91-69" name="__codelineno-91-69" href="#__codelineno-91-69"></a>services.AddOpenTelemetry()
<a id="__codelineno-91-70" name="__codelineno-91-70" href="#__codelineno-91-70"></a>
<a id="__codelineno-91-71" name="__codelineno-91-71" href="#__codelineno-91-71"></a>
<a id="__codelineno-91-72" name="__codelineno-91-72" href="#__codelineno-91-72"></a>
<a id="__codelineno-91-73" name="__codelineno-91-73" href="#__codelineno-91-73"></a>.ConfigureResource(configureResource)
<a id="__codelineno-91-74" name="__codelineno-91-74" href="#__codelineno-91-74"></a>
<a id="__codelineno-91-75" name="__codelineno-91-75" href="#__codelineno-91-75"></a>
<a id="__codelineno-91-76" name="__codelineno-91-76" href="#__codelineno-91-76"></a>
<a id="__codelineno-91-77" name="__codelineno-91-77" href="#__codelineno-91-77"></a>.WithTracing(builder =&gt; {
<a id="__codelineno-91-78" name="__codelineno-91-78" href="#__codelineno-91-78"></a>
<a id="__codelineno-91-79" name="__codelineno-91-79" href="#__codelineno-91-79"></a>
<a id="__codelineno-91-80" name="__codelineno-91-80" href="#__codelineno-91-80"></a>
<a id="__codelineno-91-81" name="__codelineno-91-81" href="#__codelineno-91-81"></a>builder
<a id="__codelineno-91-82" name="__codelineno-91-82" href="#__codelineno-91-82"></a>
<a id="__codelineno-91-83" name="__codelineno-91-83" href="#__codelineno-91-83"></a>
<a id="__codelineno-91-84" name="__codelineno-91-84" href="#__codelineno-91-84"></a>
<a id="__codelineno-91-85" name="__codelineno-91-85" href="#__codelineno-91-85"></a>.SetSampler(new AlwaysOnSampler())
<a id="__codelineno-91-86" name="__codelineno-91-86" href="#__codelineno-91-86"></a>
<a id="__codelineno-91-87" name="__codelineno-91-87" href="#__codelineno-91-87"></a>
<a id="__codelineno-91-88" name="__codelineno-91-88" href="#__codelineno-91-88"></a>
<a id="__codelineno-91-89" name="__codelineno-91-89" href="#__codelineno-91-89"></a>.AddSource(MyActivitySource.Name)
<a id="__codelineno-91-90" name="__codelineno-91-90" href="#__codelineno-91-90"></a>
<a id="__codelineno-91-91" name="__codelineno-91-91" href="#__codelineno-91-91"></a>
<a id="__codelineno-91-92" name="__codelineno-91-92" href="#__codelineno-91-92"></a>
<a id="__codelineno-91-93" name="__codelineno-91-93" href="#__codelineno-91-93"></a>.AddOtlpExporter(options =&gt;
<a id="__codelineno-91-94" name="__codelineno-91-94" href="#__codelineno-91-94"></a>
<a id="__codelineno-91-95" name="__codelineno-91-95" href="#__codelineno-91-95"></a>
<a id="__codelineno-91-96" name="__codelineno-91-96" href="#__codelineno-91-96"></a>
<a id="__codelineno-91-97" name="__codelineno-91-97" href="#__codelineno-91-97"></a>{
<a id="__codelineno-91-98" name="__codelineno-91-98" href="#__codelineno-91-98"></a>
<a id="__codelineno-91-99" name="__codelineno-91-99" href="#__codelineno-91-99"></a>
<a id="__codelineno-91-100" name="__codelineno-91-100" href="#__codelineno-91-100"></a>
<a id="__codelineno-91-101" name="__codelineno-91-101" href="#__codelineno-91-101"></a>options.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/traces&quot;);
<a id="__codelineno-91-102" name="__codelineno-91-102" href="#__codelineno-91-102"></a>
<a id="__codelineno-91-103" name="__codelineno-91-103" href="#__codelineno-91-103"></a>
<a id="__codelineno-91-104" name="__codelineno-91-104" href="#__codelineno-91-104"></a>
<a id="__codelineno-91-105" name="__codelineno-91-105" href="#__codelineno-91-105"></a>options.Protocol = OpenTelemetry.Exporter.OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-91-106" name="__codelineno-91-106" href="#__codelineno-91-106"></a>
<a id="__codelineno-91-107" name="__codelineno-91-107" href="#__codelineno-91-107"></a>
<a id="__codelineno-91-108" name="__codelineno-91-108" href="#__codelineno-91-108"></a>
<a id="__codelineno-91-109" name="__codelineno-91-109" href="#__codelineno-91-109"></a>options.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-91-110" name="__codelineno-91-110" href="#__codelineno-91-110"></a>
<a id="__codelineno-91-111" name="__codelineno-91-111" href="#__codelineno-91-111"></a>
<a id="__codelineno-91-112" name="__codelineno-91-112" href="#__codelineno-91-112"></a>
<a id="__codelineno-91-113" name="__codelineno-91-113" href="#__codelineno-91-113"></a>});
<a id="__codelineno-91-114" name="__codelineno-91-114" href="#__codelineno-91-114"></a>
<a id="__codelineno-91-115" name="__codelineno-91-115" href="#__codelineno-91-115"></a>
<a id="__codelineno-91-116" name="__codelineno-91-116" href="#__codelineno-91-116"></a>
<a id="__codelineno-91-117" name="__codelineno-91-117" href="#__codelineno-91-117"></a>})
<a id="__codelineno-91-118" name="__codelineno-91-118" href="#__codelineno-91-118"></a>
<a id="__codelineno-91-119" name="__codelineno-91-119" href="#__codelineno-91-119"></a>
<a id="__codelineno-91-120" name="__codelineno-91-120" href="#__codelineno-91-120"></a>
<a id="__codelineno-91-121" name="__codelineno-91-121" href="#__codelineno-91-121"></a>.WithMetrics(builder =&gt; {
<a id="__codelineno-91-122" name="__codelineno-91-122" href="#__codelineno-91-122"></a>
<a id="__codelineno-91-123" name="__codelineno-91-123" href="#__codelineno-91-123"></a>
<a id="__codelineno-91-124" name="__codelineno-91-124" href="#__codelineno-91-124"></a>
<a id="__codelineno-91-125" name="__codelineno-91-125" href="#__codelineno-91-125"></a>builder
<a id="__codelineno-91-126" name="__codelineno-91-126" href="#__codelineno-91-126"></a>
<a id="__codelineno-91-127" name="__codelineno-91-127" href="#__codelineno-91-127"></a>
<a id="__codelineno-91-128" name="__codelineno-91-128" href="#__codelineno-91-128"></a>
<a id="__codelineno-91-129" name="__codelineno-91-129" href="#__codelineno-91-129"></a>.AddMeter(&quot;my-meter&quot;)
<a id="__codelineno-91-130" name="__codelineno-91-130" href="#__codelineno-91-130"></a>
<a id="__codelineno-91-131" name="__codelineno-91-131" href="#__codelineno-91-131"></a>
<a id="__codelineno-91-132" name="__codelineno-91-132" href="#__codelineno-91-132"></a>
<a id="__codelineno-91-133" name="__codelineno-91-133" href="#__codelineno-91-133"></a>.AddOtlpExporter((OtlpExporterOptions exporterOptions, MetricReaderOptions readerOptions) =&gt;
<a id="__codelineno-91-134" name="__codelineno-91-134" href="#__codelineno-91-134"></a>
<a id="__codelineno-91-135" name="__codelineno-91-135" href="#__codelineno-91-135"></a>
<a id="__codelineno-91-136" name="__codelineno-91-136" href="#__codelineno-91-136"></a>
<a id="__codelineno-91-137" name="__codelineno-91-137" href="#__codelineno-91-137"></a>{
<a id="__codelineno-91-138" name="__codelineno-91-138" href="#__codelineno-91-138"></a>
<a id="__codelineno-91-139" name="__codelineno-91-139" href="#__codelineno-91-139"></a>
<a id="__codelineno-91-140" name="__codelineno-91-140" href="#__codelineno-91-140"></a>
<a id="__codelineno-91-141" name="__codelineno-91-141" href="#__codelineno-91-141"></a>exporterOptions.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/metrics&quot;);
<a id="__codelineno-91-142" name="__codelineno-91-142" href="#__codelineno-91-142"></a>
<a id="__codelineno-91-143" name="__codelineno-91-143" href="#__codelineno-91-143"></a>
<a id="__codelineno-91-144" name="__codelineno-91-144" href="#__codelineno-91-144"></a>
<a id="__codelineno-91-145" name="__codelineno-91-145" href="#__codelineno-91-145"></a>exporterOptions.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-91-146" name="__codelineno-91-146" href="#__codelineno-91-146"></a>
<a id="__codelineno-91-147" name="__codelineno-91-147" href="#__codelineno-91-147"></a>
<a id="__codelineno-91-148" name="__codelineno-91-148" href="#__codelineno-91-148"></a>
<a id="__codelineno-91-149" name="__codelineno-91-149" href="#__codelineno-91-149"></a>exporterOptions.Protocol = OpenTelemetry.Exporter.OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-91-150" name="__codelineno-91-150" href="#__codelineno-91-150"></a>
<a id="__codelineno-91-151" name="__codelineno-91-151" href="#__codelineno-91-151"></a>
<a id="__codelineno-91-152" name="__codelineno-91-152" href="#__codelineno-91-152"></a>
<a id="__codelineno-91-153" name="__codelineno-91-153" href="#__codelineno-91-153"></a>readerOptions.TemporalityPreference = MetricReaderTemporalityPreference.Delta;
<a id="__codelineno-91-154" name="__codelineno-91-154" href="#__codelineno-91-154"></a>
<a id="__codelineno-91-155" name="__codelineno-91-155" href="#__codelineno-91-155"></a>
<a id="__codelineno-91-156" name="__codelineno-91-156" href="#__codelineno-91-156"></a>
<a id="__codelineno-91-157" name="__codelineno-91-157" href="#__codelineno-91-157"></a>});
<a id="__codelineno-91-158" name="__codelineno-91-158" href="#__codelineno-91-158"></a>
<a id="__codelineno-91-159" name="__codelineno-91-159" href="#__codelineno-91-159"></a>
<a id="__codelineno-91-160" name="__codelineno-91-160" href="#__codelineno-91-160"></a>
<a id="__codelineno-91-161" name="__codelineno-91-161" href="#__codelineno-91-161"></a>});
<a id="__codelineno-91-162" name="__codelineno-91-162" href="#__codelineno-91-162"></a>
<a id="__codelineno-91-163" name="__codelineno-91-163" href="#__codelineno-91-163"></a>
<a id="__codelineno-91-164" name="__codelineno-91-164" href="#__codelineno-91-164"></a>
<a id="__codelineno-91-165" name="__codelineno-91-165" href="#__codelineno-91-165"></a>var resourceBuilder = ResourceBuilder.CreateDefault();
<a id="__codelineno-91-166" name="__codelineno-91-166" href="#__codelineno-91-166"></a>
<a id="__codelineno-91-167" name="__codelineno-91-167" href="#__codelineno-91-167"></a>
<a id="__codelineno-91-168" name="__codelineno-91-168" href="#__codelineno-91-168"></a>
<a id="__codelineno-91-169" name="__codelineno-91-169" href="#__codelineno-91-169"></a>configureResource!(resourceBuilder);
<a id="__codelineno-91-170" name="__codelineno-91-170" href="#__codelineno-91-170"></a>
<a id="__codelineno-91-171" name="__codelineno-91-171" href="#__codelineno-91-171"></a>
<a id="__codelineno-91-172" name="__codelineno-91-172" href="#__codelineno-91-172"></a>
<a id="__codelineno-91-173" name="__codelineno-91-173" href="#__codelineno-91-173"></a>loggerFactoryOT = LoggerFactory.Create(builder =&gt; {
<a id="__codelineno-91-174" name="__codelineno-91-174" href="#__codelineno-91-174"></a>
<a id="__codelineno-91-175" name="__codelineno-91-175" href="#__codelineno-91-175"></a>
<a id="__codelineno-91-176" name="__codelineno-91-176" href="#__codelineno-91-176"></a>
<a id="__codelineno-91-177" name="__codelineno-91-177" href="#__codelineno-91-177"></a>builder
<a id="__codelineno-91-178" name="__codelineno-91-178" href="#__codelineno-91-178"></a>
<a id="__codelineno-91-179" name="__codelineno-91-179" href="#__codelineno-91-179"></a>
<a id="__codelineno-91-180" name="__codelineno-91-180" href="#__codelineno-91-180"></a>
<a id="__codelineno-91-181" name="__codelineno-91-181" href="#__codelineno-91-181"></a>.AddOpenTelemetry(options =&gt; {
<a id="__codelineno-91-182" name="__codelineno-91-182" href="#__codelineno-91-182"></a>
<a id="__codelineno-91-183" name="__codelineno-91-183" href="#__codelineno-91-183"></a>
<a id="__codelineno-91-184" name="__codelineno-91-184" href="#__codelineno-91-184"></a>
<a id="__codelineno-91-185" name="__codelineno-91-185" href="#__codelineno-91-185"></a>options.SetResourceBuilder(resourceBuilder).AddOtlpExporter(options =&gt; {
<a id="__codelineno-91-186" name="__codelineno-91-186" href="#__codelineno-91-186"></a>
<a id="__codelineno-91-187" name="__codelineno-91-187" href="#__codelineno-91-187"></a>
<a id="__codelineno-91-188" name="__codelineno-91-188" href="#__codelineno-91-188"></a>
<a id="__codelineno-91-189" name="__codelineno-91-189" href="#__codelineno-91-189"></a>options.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/logs&quot;);
<a id="__codelineno-91-190" name="__codelineno-91-190" href="#__codelineno-91-190"></a>
<a id="__codelineno-91-191" name="__codelineno-91-191" href="#__codelineno-91-191"></a>
<a id="__codelineno-91-192" name="__codelineno-91-192" href="#__codelineno-91-192"></a>
<a id="__codelineno-91-193" name="__codelineno-91-193" href="#__codelineno-91-193"></a>options.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-91-194" name="__codelineno-91-194" href="#__codelineno-91-194"></a>
<a id="__codelineno-91-195" name="__codelineno-91-195" href="#__codelineno-91-195"></a>
<a id="__codelineno-91-196" name="__codelineno-91-196" href="#__codelineno-91-196"></a>
<a id="__codelineno-91-197" name="__codelineno-91-197" href="#__codelineno-91-197"></a>options.ExportProcessorType = OpenTelemetry.ExportProcessorType.Batch;
<a id="__codelineno-91-198" name="__codelineno-91-198" href="#__codelineno-91-198"></a>
<a id="__codelineno-91-199" name="__codelineno-91-199" href="#__codelineno-91-199"></a>
<a id="__codelineno-91-200" name="__codelineno-91-200" href="#__codelineno-91-200"></a>
<a id="__codelineno-91-201" name="__codelineno-91-201" href="#__codelineno-91-201"></a>options.Protocol = OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-91-202" name="__codelineno-91-202" href="#__codelineno-91-202"></a>
<a id="__codelineno-91-203" name="__codelineno-91-203" href="#__codelineno-91-203"></a>
<a id="__codelineno-91-204" name="__codelineno-91-204" href="#__codelineno-91-204"></a>
<a id="__codelineno-91-205" name="__codelineno-91-205" href="#__codelineno-91-205"></a>});
<a id="__codelineno-91-206" name="__codelineno-91-206" href="#__codelineno-91-206"></a>
<a id="__codelineno-91-207" name="__codelineno-91-207" href="#__codelineno-91-207"></a>
<a id="__codelineno-91-208" name="__codelineno-91-208" href="#__codelineno-91-208"></a>
<a id="__codelineno-91-209" name="__codelineno-91-209" href="#__codelineno-91-209"></a>})
<a id="__codelineno-91-210" name="__codelineno-91-210" href="#__codelineno-91-210"></a>
<a id="__codelineno-91-211" name="__codelineno-91-211" href="#__codelineno-91-211"></a>
<a id="__codelineno-91-212" name="__codelineno-91-212" href="#__codelineno-91-212"></a>
<a id="__codelineno-91-213" name="__codelineno-91-213" href="#__codelineno-91-213"></a>.AddConsole();
<a id="__codelineno-91-214" name="__codelineno-91-214" href="#__codelineno-91-214"></a>
<a id="__codelineno-91-215" name="__codelineno-91-215" href="#__codelineno-91-215"></a>
<a id="__codelineno-91-216" name="__codelineno-91-216" href="#__codelineno-91-216"></a>
<a id="__codelineno-91-217" name="__codelineno-91-217" href="#__codelineno-91-217"></a>});
<a id="__codelineno-91-218" name="__codelineno-91-218" href="#__codelineno-91-218"></a>
<a id="__codelineno-91-219" name="__codelineno-91-219" href="#__codelineno-91-219"></a>
<a id="__codelineno-91-220" name="__codelineno-91-220" href="#__codelineno-91-220"></a>
<a id="__codelineno-91-221" name="__codelineno-91-221" href="#__codelineno-91-221"></a>Sdk.CreateTracerProviderBuilder()
<a id="__codelineno-91-222" name="__codelineno-91-222" href="#__codelineno-91-222"></a>
<a id="__codelineno-91-223" name="__codelineno-91-223" href="#__codelineno-91-223"></a>
<a id="__codelineno-91-224" name="__codelineno-91-224" href="#__codelineno-91-224"></a>
<a id="__codelineno-91-225" name="__codelineno-91-225" href="#__codelineno-91-225"></a>.SetSampler(new AlwaysOnSampler())
<a id="__codelineno-91-226" name="__codelineno-91-226" href="#__codelineno-91-226"></a>
<a id="__codelineno-91-227" name="__codelineno-91-227" href="#__codelineno-91-227"></a>
<a id="__codelineno-91-228" name="__codelineno-91-228" href="#__codelineno-91-228"></a>
<a id="__codelineno-91-229" name="__codelineno-91-229" href="#__codelineno-91-229"></a>.AddSource(MyActivitySource.Name)
<a id="__codelineno-91-230" name="__codelineno-91-230" href="#__codelineno-91-230"></a>
<a id="__codelineno-91-231" name="__codelineno-91-231" href="#__codelineno-91-231"></a>
<a id="__codelineno-91-232" name="__codelineno-91-232" href="#__codelineno-91-232"></a>
<a id="__codelineno-91-233" name="__codelineno-91-233" href="#__codelineno-91-233"></a>.ConfigureResource(configureResource);
<a id="__codelineno-91-234" name="__codelineno-91-234" href="#__codelineno-91-234"></a>
<a id="__codelineno-91-235" name="__codelineno-91-235" href="#__codelineno-91-235"></a>
<a id="__codelineno-91-236" name="__codelineno-91-236" href="#__codelineno-91-236"></a>
<a id="__codelineno-91-237" name="__codelineno-91-237" href="#__codelineno-91-237"></a>// add-logging
<a id="__codelineno-91-238" name="__codelineno-91-238" href="#__codelineno-91-238"></a>
<a id="__codelineno-91-239" name="__codelineno-91-239" href="#__codelineno-91-239"></a>
<a id="__codelineno-91-240" name="__codelineno-91-240" href="#__codelineno-91-240"></a>
<a id="__codelineno-91-241" name="__codelineno-91-241" href="#__codelineno-91-241"></a>}
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.</p>
<ol>
<li>Install the following packages.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a>dotnet add package Microsoft.Extensions.Logging
<a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a>
<a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a>
<a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a>
<a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a>dotnet add package OpenTelemetry.Extensions.Hosting
<a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>
<a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a>
<a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a>
<a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a>dotnet add package OpenTelemetry
<a id="__codelineno-92-10" name="__codelineno-92-10" href="#__codelineno-92-10"></a>
<a id="__codelineno-92-11" name="__codelineno-92-11" href="#__codelineno-92-11"></a>
<a id="__codelineno-92-12" name="__codelineno-92-12" href="#__codelineno-92-12"></a>
<a id="__codelineno-92-13" name="__codelineno-92-13" href="#__codelineno-92-13"></a>dotnet add package OpenTelemetry.Api
<a id="__codelineno-92-14" name="__codelineno-92-14" href="#__codelineno-92-14"></a>
<a id="__codelineno-92-15" name="__codelineno-92-15" href="#__codelineno-92-15"></a>
<a id="__codelineno-92-16" name="__codelineno-92-16" href="#__codelineno-92-16"></a>
<a id="__codelineno-92-17" name="__codelineno-92-17" href="#__codelineno-92-17"></a>dotnet add package OpenTelemetry.Exporter.OpenTelemetryProtocol
<a id="__codelineno-92-18" name="__codelineno-92-18" href="#__codelineno-92-18"></a>
<a id="__codelineno-92-19" name="__codelineno-92-19" href="#__codelineno-92-19"></a>
<a id="__codelineno-92-20" name="__codelineno-92-20" href="#__codelineno-92-20"></a>
<a id="__codelineno-92-21" name="__codelineno-92-21" href="#__codelineno-92-21"></a>dotnet add package OpenTelemetry.Instrumentation.AspNetCore
<a id="__codelineno-92-22" name="__codelineno-92-22" href="#__codelineno-92-22"></a>
<a id="__codelineno-92-23" name="__codelineno-92-23" href="#__codelineno-92-23"></a>
<a id="__codelineno-92-24" name="__codelineno-92-24" href="#__codelineno-92-24"></a>
<a id="__codelineno-92-25" name="__codelineno-92-25" href="#__codelineno-92-25"></a>dotnet add package OpenTelemetry.Instrumentation.Http
<a id="__codelineno-92-26" name="__codelineno-92-26" href="#__codelineno-92-26"></a>
<a id="__codelineno-92-27" name="__codelineno-92-27" href="#__codelineno-92-27"></a>
<a id="__codelineno-92-28" name="__codelineno-92-28" href="#__codelineno-92-28"></a>
<a id="__codelineno-92-29" name="__codelineno-92-29" href="#__codelineno-92-29"></a>dotnet add package OpenTelemetry.Instrumentation.Runtime
</code></pre></div>
2. Add the following <code>using</code> statements to the startup class, which bootstraps your application.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>using OpenTelemetry;
<a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>
<a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a>
<a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a>
<a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a>using OpenTelemetry.Trace;
<a id="__codelineno-93-6" name="__codelineno-93-6" href="#__codelineno-93-6"></a>
<a id="__codelineno-93-7" name="__codelineno-93-7" href="#__codelineno-93-7"></a>
<a id="__codelineno-93-8" name="__codelineno-93-8" href="#__codelineno-93-8"></a>
<a id="__codelineno-93-9" name="__codelineno-93-9" href="#__codelineno-93-9"></a>using OpenTelemetry.Exporter;
<a id="__codelineno-93-10" name="__codelineno-93-10" href="#__codelineno-93-10"></a>
<a id="__codelineno-93-11" name="__codelineno-93-11" href="#__codelineno-93-11"></a>
<a id="__codelineno-93-12" name="__codelineno-93-12" href="#__codelineno-93-12"></a>
<a id="__codelineno-93-13" name="__codelineno-93-13" href="#__codelineno-93-13"></a>using OpenTelemetry.Metrics;
<a id="__codelineno-93-14" name="__codelineno-93-14" href="#__codelineno-93-14"></a>
<a id="__codelineno-93-15" name="__codelineno-93-15" href="#__codelineno-93-15"></a>
<a id="__codelineno-93-16" name="__codelineno-93-16" href="#__codelineno-93-16"></a>
<a id="__codelineno-93-17" name="__codelineno-93-17" href="#__codelineno-93-17"></a>using OpenTelemetry.Logs;
<a id="__codelineno-93-18" name="__codelineno-93-18" href="#__codelineno-93-18"></a>
<a id="__codelineno-93-19" name="__codelineno-93-19" href="#__codelineno-93-19"></a>
<a id="__codelineno-93-20" name="__codelineno-93-20" href="#__codelineno-93-20"></a>
<a id="__codelineno-93-21" name="__codelineno-93-21" href="#__codelineno-93-21"></a>using OpenTelemetry.Resources;
<a id="__codelineno-93-22" name="__codelineno-93-22" href="#__codelineno-93-22"></a>
<a id="__codelineno-93-23" name="__codelineno-93-23" href="#__codelineno-93-23"></a>
<a id="__codelineno-93-24" name="__codelineno-93-24" href="#__codelineno-93-24"></a>
<a id="__codelineno-93-25" name="__codelineno-93-25" href="#__codelineno-93-25"></a>using OpenTelemetry.Context.Propagation;
<a id="__codelineno-93-26" name="__codelineno-93-26" href="#__codelineno-93-26"></a>
<a id="__codelineno-93-27" name="__codelineno-93-27" href="#__codelineno-93-27"></a>
<a id="__codelineno-93-28" name="__codelineno-93-28" href="#__codelineno-93-28"></a>
<a id="__codelineno-93-29" name="__codelineno-93-29" href="#__codelineno-93-29"></a>using System.Diagnostics;
<a id="__codelineno-93-30" name="__codelineno-93-30" href="#__codelineno-93-30"></a>
<a id="__codelineno-93-31" name="__codelineno-93-31" href="#__codelineno-93-31"></a>
<a id="__codelineno-93-32" name="__codelineno-93-32" href="#__codelineno-93-32"></a>
<a id="__codelineno-93-33" name="__codelineno-93-33" href="#__codelineno-93-33"></a>using System.Diagnostics.Metrics;
<a id="__codelineno-93-34" name="__codelineno-93-34" href="#__codelineno-93-34"></a>
<a id="__codelineno-93-35" name="__codelineno-93-35" href="#__codelineno-93-35"></a>
<a id="__codelineno-93-36" name="__codelineno-93-36" href="#__codelineno-93-36"></a>
<a id="__codelineno-93-37" name="__codelineno-93-37" href="#__codelineno-93-37"></a>using Microsoft.Extensions.Logging;
<a id="__codelineno-93-38" name="__codelineno-93-38" href="#__codelineno-93-38"></a>
<a id="__codelineno-93-39" name="__codelineno-93-39" href="#__codelineno-93-39"></a>
<a id="__codelineno-93-40" name="__codelineno-93-40" href="#__codelineno-93-40"></a>
<a id="__codelineno-93-41" name="__codelineno-93-41" href="#__codelineno-93-41"></a>using OpenTelemetry.Instrumentation.AspNetCore;
</code></pre></div>
3. Add these fields to your startup class, with the first two containing the <a href="#dynatrace-docs--otlp-export">access details</a>, if you are using the OTLP export.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a>private static string DT_API_URL = &quot;&quot;; // TODO: Provide your SaaS/Managed URL here
<a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a>
<a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a>
<a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a>
<a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a>private static string DT_API_TOKEN = &quot;&quot;; // TODO: Provide the OpenTelemetry-scoped access token here
<a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a>
<a id="__codelineno-94-7" name="__codelineno-94-7" href="#__codelineno-94-7"></a>
<a id="__codelineno-94-8" name="__codelineno-94-8" href="#__codelineno-94-8"></a>
<a id="__codelineno-94-9" name="__codelineno-94-9" href="#__codelineno-94-9"></a>private const string activitySource = &quot;Dynatrace.DotNetApp.Sample&quot;; // TODO: Provide a descriptive name for your application here
<a id="__codelineno-94-10" name="__codelineno-94-10" href="#__codelineno-94-10"></a>
<a id="__codelineno-94-11" name="__codelineno-94-11" href="#__codelineno-94-11"></a>
<a id="__codelineno-94-12" name="__codelineno-94-12" href="#__codelineno-94-12"></a>
<a id="__codelineno-94-13" name="__codelineno-94-13" href="#__codelineno-94-13"></a>public static readonly ActivitySource MyActivitySource = new ActivitySource(activitySource);
<a id="__codelineno-94-14" name="__codelineno-94-14" href="#__codelineno-94-14"></a>
<a id="__codelineno-94-15" name="__codelineno-94-15" href="#__codelineno-94-15"></a>
<a id="__codelineno-94-16" name="__codelineno-94-16" href="#__codelineno-94-16"></a>
<a id="__codelineno-94-17" name="__codelineno-94-17" href="#__codelineno-94-17"></a>private static ILoggerFactory loggerFactoryOT;
</code></pre></div>
<p>Value injection</p>
<p>Instead of hardcoding the URL and token, you might also consider reading them from storage specific to your application framework (for example, environment variables or framework secrets).
4. Add the <code>initOpenTelemetry</code> method to your startup class and invoke it as early as possible during your application startup. This initializes OpenTelemetry for the Dynatrace backend and creates default tracer and meter providers.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a>private static void initOpenTelemetry(){
<a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a>
<a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>
<a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a>
<a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a>var port = System.Environment.GetEnvironmentVariable(&quot;PORT&quot;) ?? &quot;8080&quot;;
<a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a>
<a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a>
<a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a>
<a id="__codelineno-95-9" name="__codelineno-95-9" href="#__codelineno-95-9"></a>var appBuilder = WebApplication.CreateBuilder();
<a id="__codelineno-95-10" name="__codelineno-95-10" href="#__codelineno-95-10"></a>
<a id="__codelineno-95-11" name="__codelineno-95-11" href="#__codelineno-95-11"></a>
<a id="__codelineno-95-12" name="__codelineno-95-12" href="#__codelineno-95-12"></a>
<a id="__codelineno-95-13" name="__codelineno-95-13" href="#__codelineno-95-13"></a>appBuilder.WebHost.ConfigureKestrel(options =&gt;{
<a id="__codelineno-95-14" name="__codelineno-95-14" href="#__codelineno-95-14"></a>
<a id="__codelineno-95-15" name="__codelineno-95-15" href="#__codelineno-95-15"></a>
<a id="__codelineno-95-16" name="__codelineno-95-16" href="#__codelineno-95-16"></a>
<a id="__codelineno-95-17" name="__codelineno-95-17" href="#__codelineno-95-17"></a>options.ListenAnyIP(Convert.ToInt32(port)); // hardcoding the port
<a id="__codelineno-95-18" name="__codelineno-95-18" href="#__codelineno-95-18"></a>
<a id="__codelineno-95-19" name="__codelineno-95-19" href="#__codelineno-95-19"></a>
<a id="__codelineno-95-20" name="__codelineno-95-20" href="#__codelineno-95-20"></a>
<a id="__codelineno-95-21" name="__codelineno-95-21" href="#__codelineno-95-21"></a>});
<a id="__codelineno-95-22" name="__codelineno-95-22" href="#__codelineno-95-22"></a>
<a id="__codelineno-95-23" name="__codelineno-95-23" href="#__codelineno-95-23"></a>
<a id="__codelineno-95-24" name="__codelineno-95-24" href="#__codelineno-95-24"></a>
<a id="__codelineno-95-25" name="__codelineno-95-25" href="#__codelineno-95-25"></a>List&lt;KeyValuePair&lt;string, object&gt;&gt; dt_metadata = new List&lt;KeyValuePair&lt;string, object&gt;&gt;();
<a id="__codelineno-95-26" name="__codelineno-95-26" href="#__codelineno-95-26"></a>
<a id="__codelineno-95-27" name="__codelineno-95-27" href="#__codelineno-95-27"></a>
<a id="__codelineno-95-28" name="__codelineno-95-28" href="#__codelineno-95-28"></a>
<a id="__codelineno-95-29" name="__codelineno-95-29" href="#__codelineno-95-29"></a>foreach (string name in new string[] {&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;,
<a id="__codelineno-95-30" name="__codelineno-95-30" href="#__codelineno-95-30"></a>
<a id="__codelineno-95-31" name="__codelineno-95-31" href="#__codelineno-95-31"></a>
<a id="__codelineno-95-32" name="__codelineno-95-32" href="#__codelineno-95-32"></a>
<a id="__codelineno-95-33" name="__codelineno-95-33" href="#__codelineno-95-33"></a>&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;,
<a id="__codelineno-95-34" name="__codelineno-95-34" href="#__codelineno-95-34"></a>
<a id="__codelineno-95-35" name="__codelineno-95-35" href="#__codelineno-95-35"></a>
<a id="__codelineno-95-36" name="__codelineno-95-36" href="#__codelineno-95-36"></a>
<a id="__codelineno-95-37" name="__codelineno-95-37" href="#__codelineno-95-37"></a>&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;}) {
<a id="__codelineno-95-38" name="__codelineno-95-38" href="#__codelineno-95-38"></a>
<a id="__codelineno-95-39" name="__codelineno-95-39" href="#__codelineno-95-39"></a>
<a id="__codelineno-95-40" name="__codelineno-95-40" href="#__codelineno-95-40"></a>
<a id="__codelineno-95-41" name="__codelineno-95-41" href="#__codelineno-95-41"></a>try {
<a id="__codelineno-95-42" name="__codelineno-95-42" href="#__codelineno-95-42"></a>
<a id="__codelineno-95-43" name="__codelineno-95-43" href="#__codelineno-95-43"></a>
<a id="__codelineno-95-44" name="__codelineno-95-44" href="#__codelineno-95-44"></a>
<a id="__codelineno-95-45" name="__codelineno-95-45" href="#__codelineno-95-45"></a>foreach (string line in System.IO.File.ReadAllLines(name.StartsWith(&quot;/var&quot;) ? name : System.IO.File.ReadAllText(name))) {
<a id="__codelineno-95-46" name="__codelineno-95-46" href="#__codelineno-95-46"></a>
<a id="__codelineno-95-47" name="__codelineno-95-47" href="#__codelineno-95-47"></a>
<a id="__codelineno-95-48" name="__codelineno-95-48" href="#__codelineno-95-48"></a>
<a id="__codelineno-95-49" name="__codelineno-95-49" href="#__codelineno-95-49"></a>var keyvalue = line.Split(&quot;=&quot;);
<a id="__codelineno-95-50" name="__codelineno-95-50" href="#__codelineno-95-50"></a>
<a id="__codelineno-95-51" name="__codelineno-95-51" href="#__codelineno-95-51"></a>
<a id="__codelineno-95-52" name="__codelineno-95-52" href="#__codelineno-95-52"></a>
<a id="__codelineno-95-53" name="__codelineno-95-53" href="#__codelineno-95-53"></a>dt_metadata.Add( new KeyValuePair&lt;string, object&gt;(keyvalue[0], keyvalue[1]));
<a id="__codelineno-95-54" name="__codelineno-95-54" href="#__codelineno-95-54"></a>
<a id="__codelineno-95-55" name="__codelineno-95-55" href="#__codelineno-95-55"></a>
<a id="__codelineno-95-56" name="__codelineno-95-56" href="#__codelineno-95-56"></a>
<a id="__codelineno-95-57" name="__codelineno-95-57" href="#__codelineno-95-57"></a>}
<a id="__codelineno-95-58" name="__codelineno-95-58" href="#__codelineno-95-58"></a>
<a id="__codelineno-95-59" name="__codelineno-95-59" href="#__codelineno-95-59"></a>
<a id="__codelineno-95-60" name="__codelineno-95-60" href="#__codelineno-95-60"></a>
<a id="__codelineno-95-61" name="__codelineno-95-61" href="#__codelineno-95-61"></a>}
<a id="__codelineno-95-62" name="__codelineno-95-62" href="#__codelineno-95-62"></a>
<a id="__codelineno-95-63" name="__codelineno-95-63" href="#__codelineno-95-63"></a>
<a id="__codelineno-95-64" name="__codelineno-95-64" href="#__codelineno-95-64"></a>
<a id="__codelineno-95-65" name="__codelineno-95-65" href="#__codelineno-95-65"></a>catch { }
<a id="__codelineno-95-66" name="__codelineno-95-66" href="#__codelineno-95-66"></a>
<a id="__codelineno-95-67" name="__codelineno-95-67" href="#__codelineno-95-67"></a>
<a id="__codelineno-95-68" name="__codelineno-95-68" href="#__codelineno-95-68"></a>
<a id="__codelineno-95-69" name="__codelineno-95-69" href="#__codelineno-95-69"></a>}
<a id="__codelineno-95-70" name="__codelineno-95-70" href="#__codelineno-95-70"></a>
<a id="__codelineno-95-71" name="__codelineno-95-71" href="#__codelineno-95-71"></a>
<a id="__codelineno-95-72" name="__codelineno-95-72" href="#__codelineno-95-72"></a>
<a id="__codelineno-95-73" name="__codelineno-95-73" href="#__codelineno-95-73"></a>Action&lt;ResourceBuilder&gt; configureResource = r =&gt; r
<a id="__codelineno-95-74" name="__codelineno-95-74" href="#__codelineno-95-74"></a>
<a id="__codelineno-95-75" name="__codelineno-95-75" href="#__codelineno-95-75"></a>
<a id="__codelineno-95-76" name="__codelineno-95-76" href="#__codelineno-95-76"></a>
<a id="__codelineno-95-77" name="__codelineno-95-77" href="#__codelineno-95-77"></a>.AddService(serviceName: &quot;dotnetManual&quot;) //TODO Replace with the name of your application
<a id="__codelineno-95-78" name="__codelineno-95-78" href="#__codelineno-95-78"></a>
<a id="__codelineno-95-79" name="__codelineno-95-79" href="#__codelineno-95-79"></a>
<a id="__codelineno-95-80" name="__codelineno-95-80" href="#__codelineno-95-80"></a>
<a id="__codelineno-95-81" name="__codelineno-95-81" href="#__codelineno-95-81"></a>.AddAttributes(dt_metadata);
<a id="__codelineno-95-82" name="__codelineno-95-82" href="#__codelineno-95-82"></a>
<a id="__codelineno-95-83" name="__codelineno-95-83" href="#__codelineno-95-83"></a>
<a id="__codelineno-95-84" name="__codelineno-95-84" href="#__codelineno-95-84"></a>
<a id="__codelineno-95-85" name="__codelineno-95-85" href="#__codelineno-95-85"></a>appBuilder.Services.AddOpenTelemetry()
<a id="__codelineno-95-86" name="__codelineno-95-86" href="#__codelineno-95-86"></a>
<a id="__codelineno-95-87" name="__codelineno-95-87" href="#__codelineno-95-87"></a>
<a id="__codelineno-95-88" name="__codelineno-95-88" href="#__codelineno-95-88"></a>
<a id="__codelineno-95-89" name="__codelineno-95-89" href="#__codelineno-95-89"></a>.ConfigureResource(configureResource)
<a id="__codelineno-95-90" name="__codelineno-95-90" href="#__codelineno-95-90"></a>
<a id="__codelineno-95-91" name="__codelineno-95-91" href="#__codelineno-95-91"></a>
<a id="__codelineno-95-92" name="__codelineno-95-92" href="#__codelineno-95-92"></a>
<a id="__codelineno-95-93" name="__codelineno-95-93" href="#__codelineno-95-93"></a>.WithTracing(builder =&gt;{
<a id="__codelineno-95-94" name="__codelineno-95-94" href="#__codelineno-95-94"></a>
<a id="__codelineno-95-95" name="__codelineno-95-95" href="#__codelineno-95-95"></a>
<a id="__codelineno-95-96" name="__codelineno-95-96" href="#__codelineno-95-96"></a>
<a id="__codelineno-95-97" name="__codelineno-95-97" href="#__codelineno-95-97"></a>appBuilder.Services.Configure&lt;AspNetCoreTraceInstrumentationOptions&gt;(appBuilder.Configuration.GetSection(&quot;AspNetCoreInstrumentation&quot;));
<a id="__codelineno-95-98" name="__codelineno-95-98" href="#__codelineno-95-98"></a>
<a id="__codelineno-95-99" name="__codelineno-95-99" href="#__codelineno-95-99"></a>
<a id="__codelineno-95-100" name="__codelineno-95-100" href="#__codelineno-95-100"></a>
<a id="__codelineno-95-101" name="__codelineno-95-101" href="#__codelineno-95-101"></a>builder
<a id="__codelineno-95-102" name="__codelineno-95-102" href="#__codelineno-95-102"></a>
<a id="__codelineno-95-103" name="__codelineno-95-103" href="#__codelineno-95-103"></a>
<a id="__codelineno-95-104" name="__codelineno-95-104" href="#__codelineno-95-104"></a>
<a id="__codelineno-95-105" name="__codelineno-95-105" href="#__codelineno-95-105"></a>.AddSource(MyActivitySource.Name)
<a id="__codelineno-95-106" name="__codelineno-95-106" href="#__codelineno-95-106"></a>
<a id="__codelineno-95-107" name="__codelineno-95-107" href="#__codelineno-95-107"></a>
<a id="__codelineno-95-108" name="__codelineno-95-108" href="#__codelineno-95-108"></a>
<a id="__codelineno-95-109" name="__codelineno-95-109" href="#__codelineno-95-109"></a>.SetSampler(new AlwaysOnSampler())
<a id="__codelineno-95-110" name="__codelineno-95-110" href="#__codelineno-95-110"></a>
<a id="__codelineno-95-111" name="__codelineno-95-111" href="#__codelineno-95-111"></a>
<a id="__codelineno-95-112" name="__codelineno-95-112" href="#__codelineno-95-112"></a>
<a id="__codelineno-95-113" name="__codelineno-95-113" href="#__codelineno-95-113"></a>.AddHttpClientInstrumentation()
<a id="__codelineno-95-114" name="__codelineno-95-114" href="#__codelineno-95-114"></a>
<a id="__codelineno-95-115" name="__codelineno-95-115" href="#__codelineno-95-115"></a>
<a id="__codelineno-95-116" name="__codelineno-95-116" href="#__codelineno-95-116"></a>
<a id="__codelineno-95-117" name="__codelineno-95-117" href="#__codelineno-95-117"></a>.AddAspNetCoreInstrumentation()
<a id="__codelineno-95-118" name="__codelineno-95-118" href="#__codelineno-95-118"></a>
<a id="__codelineno-95-119" name="__codelineno-95-119" href="#__codelineno-95-119"></a>
<a id="__codelineno-95-120" name="__codelineno-95-120" href="#__codelineno-95-120"></a>
<a id="__codelineno-95-121" name="__codelineno-95-121" href="#__codelineno-95-121"></a>.AddOtlpExporter(otlpOptions =&gt;{
<a id="__codelineno-95-122" name="__codelineno-95-122" href="#__codelineno-95-122"></a>
<a id="__codelineno-95-123" name="__codelineno-95-123" href="#__codelineno-95-123"></a>
<a id="__codelineno-95-124" name="__codelineno-95-124" href="#__codelineno-95-124"></a>
<a id="__codelineno-95-125" name="__codelineno-95-125" href="#__codelineno-95-125"></a>otlpOptions.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/traces&quot;);
<a id="__codelineno-95-126" name="__codelineno-95-126" href="#__codelineno-95-126"></a>
<a id="__codelineno-95-127" name="__codelineno-95-127" href="#__codelineno-95-127"></a>
<a id="__codelineno-95-128" name="__codelineno-95-128" href="#__codelineno-95-128"></a>
<a id="__codelineno-95-129" name="__codelineno-95-129" href="#__codelineno-95-129"></a>otlpOptions.Protocol = OpenTelemetry.Exporter.OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-95-130" name="__codelineno-95-130" href="#__codelineno-95-130"></a>
<a id="__codelineno-95-131" name="__codelineno-95-131" href="#__codelineno-95-131"></a>
<a id="__codelineno-95-132" name="__codelineno-95-132" href="#__codelineno-95-132"></a>
<a id="__codelineno-95-133" name="__codelineno-95-133" href="#__codelineno-95-133"></a>otlpOptions.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-95-134" name="__codelineno-95-134" href="#__codelineno-95-134"></a>
<a id="__codelineno-95-135" name="__codelineno-95-135" href="#__codelineno-95-135"></a>
<a id="__codelineno-95-136" name="__codelineno-95-136" href="#__codelineno-95-136"></a>
<a id="__codelineno-95-137" name="__codelineno-95-137" href="#__codelineno-95-137"></a>});
<a id="__codelineno-95-138" name="__codelineno-95-138" href="#__codelineno-95-138"></a>
<a id="__codelineno-95-139" name="__codelineno-95-139" href="#__codelineno-95-139"></a>
<a id="__codelineno-95-140" name="__codelineno-95-140" href="#__codelineno-95-140"></a>
<a id="__codelineno-95-141" name="__codelineno-95-141" href="#__codelineno-95-141"></a>})
<a id="__codelineno-95-142" name="__codelineno-95-142" href="#__codelineno-95-142"></a>
<a id="__codelineno-95-143" name="__codelineno-95-143" href="#__codelineno-95-143"></a>
<a id="__codelineno-95-144" name="__codelineno-95-144" href="#__codelineno-95-144"></a>
<a id="__codelineno-95-145" name="__codelineno-95-145" href="#__codelineno-95-145"></a>.WithMetrics(builder =&gt;{
<a id="__codelineno-95-146" name="__codelineno-95-146" href="#__codelineno-95-146"></a>
<a id="__codelineno-95-147" name="__codelineno-95-147" href="#__codelineno-95-147"></a>
<a id="__codelineno-95-148" name="__codelineno-95-148" href="#__codelineno-95-148"></a>
<a id="__codelineno-95-149" name="__codelineno-95-149" href="#__codelineno-95-149"></a>builder
<a id="__codelineno-95-150" name="__codelineno-95-150" href="#__codelineno-95-150"></a>
<a id="__codelineno-95-151" name="__codelineno-95-151" href="#__codelineno-95-151"></a>
<a id="__codelineno-95-152" name="__codelineno-95-152" href="#__codelineno-95-152"></a>
<a id="__codelineno-95-153" name="__codelineno-95-153" href="#__codelineno-95-153"></a>.AddMeter(&quot;my-meter&quot;)
<a id="__codelineno-95-154" name="__codelineno-95-154" href="#__codelineno-95-154"></a>
<a id="__codelineno-95-155" name="__codelineno-95-155" href="#__codelineno-95-155"></a>
<a id="__codelineno-95-156" name="__codelineno-95-156" href="#__codelineno-95-156"></a>
<a id="__codelineno-95-157" name="__codelineno-95-157" href="#__codelineno-95-157"></a>// .AddMeter(Instrumentation.MeterName)
<a id="__codelineno-95-158" name="__codelineno-95-158" href="#__codelineno-95-158"></a>
<a id="__codelineno-95-159" name="__codelineno-95-159" href="#__codelineno-95-159"></a>
<a id="__codelineno-95-160" name="__codelineno-95-160" href="#__codelineno-95-160"></a>
<a id="__codelineno-95-161" name="__codelineno-95-161" href="#__codelineno-95-161"></a>.AddRuntimeInstrumentation()
<a id="__codelineno-95-162" name="__codelineno-95-162" href="#__codelineno-95-162"></a>
<a id="__codelineno-95-163" name="__codelineno-95-163" href="#__codelineno-95-163"></a>
<a id="__codelineno-95-164" name="__codelineno-95-164" href="#__codelineno-95-164"></a>
<a id="__codelineno-95-165" name="__codelineno-95-165" href="#__codelineno-95-165"></a>.AddHttpClientInstrumentation()
<a id="__codelineno-95-166" name="__codelineno-95-166" href="#__codelineno-95-166"></a>
<a id="__codelineno-95-167" name="__codelineno-95-167" href="#__codelineno-95-167"></a>
<a id="__codelineno-95-168" name="__codelineno-95-168" href="#__codelineno-95-168"></a>
<a id="__codelineno-95-169" name="__codelineno-95-169" href="#__codelineno-95-169"></a>.AddAspNetCoreInstrumentation()
<a id="__codelineno-95-170" name="__codelineno-95-170" href="#__codelineno-95-170"></a>
<a id="__codelineno-95-171" name="__codelineno-95-171" href="#__codelineno-95-171"></a>
<a id="__codelineno-95-172" name="__codelineno-95-172" href="#__codelineno-95-172"></a>
<a id="__codelineno-95-173" name="__codelineno-95-173" href="#__codelineno-95-173"></a>.AddOtlpExporter((OtlpExporterOptions exporterOptions, MetricReaderOptions readerOptions) =&gt; {
<a id="__codelineno-95-174" name="__codelineno-95-174" href="#__codelineno-95-174"></a>
<a id="__codelineno-95-175" name="__codelineno-95-175" href="#__codelineno-95-175"></a>
<a id="__codelineno-95-176" name="__codelineno-95-176" href="#__codelineno-95-176"></a>
<a id="__codelineno-95-177" name="__codelineno-95-177" href="#__codelineno-95-177"></a>exporterOptions.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/metrics&quot;);
<a id="__codelineno-95-178" name="__codelineno-95-178" href="#__codelineno-95-178"></a>
<a id="__codelineno-95-179" name="__codelineno-95-179" href="#__codelineno-95-179"></a>
<a id="__codelineno-95-180" name="__codelineno-95-180" href="#__codelineno-95-180"></a>
<a id="__codelineno-95-181" name="__codelineno-95-181" href="#__codelineno-95-181"></a>exporterOptions.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-95-182" name="__codelineno-95-182" href="#__codelineno-95-182"></a>
<a id="__codelineno-95-183" name="__codelineno-95-183" href="#__codelineno-95-183"></a>
<a id="__codelineno-95-184" name="__codelineno-95-184" href="#__codelineno-95-184"></a>
<a id="__codelineno-95-185" name="__codelineno-95-185" href="#__codelineno-95-185"></a>exporterOptions.Protocol = OpenTelemetry.Exporter.OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-95-186" name="__codelineno-95-186" href="#__codelineno-95-186"></a>
<a id="__codelineno-95-187" name="__codelineno-95-187" href="#__codelineno-95-187"></a>
<a id="__codelineno-95-188" name="__codelineno-95-188" href="#__codelineno-95-188"></a>
<a id="__codelineno-95-189" name="__codelineno-95-189" href="#__codelineno-95-189"></a>readerOptions.TemporalityPreference = MetricReaderTemporalityPreference.Delta;
<a id="__codelineno-95-190" name="__codelineno-95-190" href="#__codelineno-95-190"></a>
<a id="__codelineno-95-191" name="__codelineno-95-191" href="#__codelineno-95-191"></a>
<a id="__codelineno-95-192" name="__codelineno-95-192" href="#__codelineno-95-192"></a>
<a id="__codelineno-95-193" name="__codelineno-95-193" href="#__codelineno-95-193"></a>});
<a id="__codelineno-95-194" name="__codelineno-95-194" href="#__codelineno-95-194"></a>
<a id="__codelineno-95-195" name="__codelineno-95-195" href="#__codelineno-95-195"></a>
<a id="__codelineno-95-196" name="__codelineno-95-196" href="#__codelineno-95-196"></a>
<a id="__codelineno-95-197" name="__codelineno-95-197" href="#__codelineno-95-197"></a>appBuilder.Logging.ClearProviders();
<a id="__codelineno-95-198" name="__codelineno-95-198" href="#__codelineno-95-198"></a>
<a id="__codelineno-95-199" name="__codelineno-95-199" href="#__codelineno-95-199"></a>
<a id="__codelineno-95-200" name="__codelineno-95-200" href="#__codelineno-95-200"></a>
<a id="__codelineno-95-201" name="__codelineno-95-201" href="#__codelineno-95-201"></a>appBuilder.Logging.AddOpenTelemetry(options =&gt;
<a id="__codelineno-95-202" name="__codelineno-95-202" href="#__codelineno-95-202"></a>
<a id="__codelineno-95-203" name="__codelineno-95-203" href="#__codelineno-95-203"></a>
<a id="__codelineno-95-204" name="__codelineno-95-204" href="#__codelineno-95-204"></a>
<a id="__codelineno-95-205" name="__codelineno-95-205" href="#__codelineno-95-205"></a>{
<a id="__codelineno-95-206" name="__codelineno-95-206" href="#__codelineno-95-206"></a>
<a id="__codelineno-95-207" name="__codelineno-95-207" href="#__codelineno-95-207"></a>
<a id="__codelineno-95-208" name="__codelineno-95-208" href="#__codelineno-95-208"></a>
<a id="__codelineno-95-209" name="__codelineno-95-209" href="#__codelineno-95-209"></a>var resourceBuilder = ResourceBuilder.CreateDefault();
<a id="__codelineno-95-210" name="__codelineno-95-210" href="#__codelineno-95-210"></a>
<a id="__codelineno-95-211" name="__codelineno-95-211" href="#__codelineno-95-211"></a>
<a id="__codelineno-95-212" name="__codelineno-95-212" href="#__codelineno-95-212"></a>
<a id="__codelineno-95-213" name="__codelineno-95-213" href="#__codelineno-95-213"></a>configureResource(resourceBuilder);
<a id="__codelineno-95-214" name="__codelineno-95-214" href="#__codelineno-95-214"></a>
<a id="__codelineno-95-215" name="__codelineno-95-215" href="#__codelineno-95-215"></a>
<a id="__codelineno-95-216" name="__codelineno-95-216" href="#__codelineno-95-216"></a>
<a id="__codelineno-95-217" name="__codelineno-95-217" href="#__codelineno-95-217"></a>options.SetResourceBuilder(resourceBuilder);
<a id="__codelineno-95-218" name="__codelineno-95-218" href="#__codelineno-95-218"></a>
<a id="__codelineno-95-219" name="__codelineno-95-219" href="#__codelineno-95-219"></a>
<a id="__codelineno-95-220" name="__codelineno-95-220" href="#__codelineno-95-220"></a>
<a id="__codelineno-95-221" name="__codelineno-95-221" href="#__codelineno-95-221"></a>options.AddOtlpExporter(otlpOptions =&gt; {
<a id="__codelineno-95-222" name="__codelineno-95-222" href="#__codelineno-95-222"></a>
<a id="__codelineno-95-223" name="__codelineno-95-223" href="#__codelineno-95-223"></a>
<a id="__codelineno-95-224" name="__codelineno-95-224" href="#__codelineno-95-224"></a>
<a id="__codelineno-95-225" name="__codelineno-95-225" href="#__codelineno-95-225"></a>otlpOptions.Endpoint = new Uri(Environment.GetEnvironmentVariable(&quot;DT_API_URL&quot;)+ &quot;/v1/logs&quot;);
<a id="__codelineno-95-226" name="__codelineno-95-226" href="#__codelineno-95-226"></a>
<a id="__codelineno-95-227" name="__codelineno-95-227" href="#__codelineno-95-227"></a>
<a id="__codelineno-95-228" name="__codelineno-95-228" href="#__codelineno-95-228"></a>
<a id="__codelineno-95-229" name="__codelineno-95-229" href="#__codelineno-95-229"></a>otlpOptions.Headers = $&quot;Authorization=Api-Token {Environment.GetEnvironmentVariable(&quot;DT_API_TOKEN&quot;)}&quot;;
<a id="__codelineno-95-230" name="__codelineno-95-230" href="#__codelineno-95-230"></a>
<a id="__codelineno-95-231" name="__codelineno-95-231" href="#__codelineno-95-231"></a>
<a id="__codelineno-95-232" name="__codelineno-95-232" href="#__codelineno-95-232"></a>
<a id="__codelineno-95-233" name="__codelineno-95-233" href="#__codelineno-95-233"></a>otlpOptions.ExportProcessorType = OpenTelemetry.ExportProcessorType.Batch;
<a id="__codelineno-95-234" name="__codelineno-95-234" href="#__codelineno-95-234"></a>
<a id="__codelineno-95-235" name="__codelineno-95-235" href="#__codelineno-95-235"></a>
<a id="__codelineno-95-236" name="__codelineno-95-236" href="#__codelineno-95-236"></a>
<a id="__codelineno-95-237" name="__codelineno-95-237" href="#__codelineno-95-237"></a>otlpOptions.Protocol = OtlpExportProtocol.HttpProtobuf;
<a id="__codelineno-95-238" name="__codelineno-95-238" href="#__codelineno-95-238"></a>
<a id="__codelineno-95-239" name="__codelineno-95-239" href="#__codelineno-95-239"></a>
<a id="__codelineno-95-240" name="__codelineno-95-240" href="#__codelineno-95-240"></a>
<a id="__codelineno-95-241" name="__codelineno-95-241" href="#__codelineno-95-241"></a>});
<a id="__codelineno-95-242" name="__codelineno-95-242" href="#__codelineno-95-242"></a>
<a id="__codelineno-95-243" name="__codelineno-95-243" href="#__codelineno-95-243"></a>
<a id="__codelineno-95-244" name="__codelineno-95-244" href="#__codelineno-95-244"></a>
<a id="__codelineno-95-245" name="__codelineno-95-245" href="#__codelineno-95-245"></a>});
<a id="__codelineno-95-246" name="__codelineno-95-246" href="#__codelineno-95-246"></a>
<a id="__codelineno-95-247" name="__codelineno-95-247" href="#__codelineno-95-247"></a>
<a id="__codelineno-95-248" name="__codelineno-95-248" href="#__codelineno-95-248"></a>
<a id="__codelineno-95-249" name="__codelineno-95-249" href="#__codelineno-95-249"></a>appBuilder.Services.AddControllers();
<a id="__codelineno-95-250" name="__codelineno-95-250" href="#__codelineno-95-250"></a>
<a id="__codelineno-95-251" name="__codelineno-95-251" href="#__codelineno-95-251"></a>
<a id="__codelineno-95-252" name="__codelineno-95-252" href="#__codelineno-95-252"></a>
<a id="__codelineno-95-253" name="__codelineno-95-253" href="#__codelineno-95-253"></a>appBuilder.Services.AddEndpointsApiExplorer();
<a id="__codelineno-95-254" name="__codelineno-95-254" href="#__codelineno-95-254"></a>
<a id="__codelineno-95-255" name="__codelineno-95-255" href="#__codelineno-95-255"></a>
<a id="__codelineno-95-256" name="__codelineno-95-256" href="#__codelineno-95-256"></a>
<a id="__codelineno-95-257" name="__codelineno-95-257" href="#__codelineno-95-257"></a>var app = appBuilder.Build();
<a id="__codelineno-95-258" name="__codelineno-95-258" href="#__codelineno-95-258"></a>
<a id="__codelineno-95-259" name="__codelineno-95-259" href="#__codelineno-95-259"></a>
<a id="__codelineno-95-260" name="__codelineno-95-260" href="#__codelineno-95-260"></a>
<a id="__codelineno-95-261" name="__codelineno-95-261" href="#__codelineno-95-261"></a>app.MapControllers();
<a id="__codelineno-95-262" name="__codelineno-95-262" href="#__codelineno-95-262"></a>
<a id="__codelineno-95-263" name="__codelineno-95-263" href="#__codelineno-95-263"></a>
<a id="__codelineno-95-264" name="__codelineno-95-264" href="#__codelineno-95-264"></a>
<a id="__codelineno-95-265" name="__codelineno-95-265" href="#__codelineno-95-265"></a>app.Run();
<a id="__codelineno-95-266" name="__codelineno-95-266" href="#__codelineno-95-266"></a>
<a id="__codelineno-95-267" name="__codelineno-95-267" href="#__codelineno-95-267"></a>
<a id="__codelineno-95-268" name="__codelineno-95-268" href="#__codelineno-95-268"></a>
<a id="__codelineno-95-269" name="__codelineno-95-269" href="#__codelineno-95-269"></a>});
<a id="__codelineno-95-270" name="__codelineno-95-270" href="#__codelineno-95-270"></a>
<a id="__codelineno-95-271" name="__codelineno-95-271" href="#__codelineno-95-271"></a>
<a id="__codelineno-95-272" name="__codelineno-95-272" href="#__codelineno-95-272"></a>
<a id="__codelineno-95-273" name="__codelineno-95-273" href="#__codelineno-95-273"></a>}
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.</p>
<h3 id="add-tracing_1">Add tracing<a class="headerlink" href="#add-tracing_1" title="Permanent link">&para;</a></h3>
<p>Using <code>MyActivitySource</code> from the <a href="#setup">setup step</a>, we can now start new activities (traces):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a>using var activity = Startup.MyActivitySource.StartActivity(&quot;Call to /myendpoint&quot;, ActivityKind.Consumer, parentContext.ActivityContext);
<a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a>
<a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>
<a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a>
<a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a>activity?.SetTag(&quot;http.method&quot;, &quot;GET&quot;);
<a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a>
<a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a>
<a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a>
<a id="__codelineno-96-9" name="__codelineno-96-9" href="#__codelineno-96-9"></a>activity?.SetTag(&quot;net.protocol.version&quot;, &quot;1.1&quot;);
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new activity (span) and name it "Call to /myendpoint"</li>
<li>Add two tags (attributes), following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
</ul>
<p>The activity will be automatically set as the current and active span until the execution flow leaves the current method scope. Subsequent activities will automatically become child spans.</p>
<h3 id="collect-metrics_1">Collect metrics<a class="headerlink" href="#collect-metrics_1" title="Permanent link">&para;</a></h3>
<ol>
<li>To instantiate new metric instruments, we first need a meter object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a>private static readonly Meter meter = new Meter(&quot;my-meter&quot;, &quot;1.0.0&quot;);  //TODO Replace with the name of your meter
</code></pre></div>
2. With <code>meter</code>, we can now create individual instruments, such as a counter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a>private static readonly Counter&lt;long&gt; counter = meter.CreateCounter&lt;long&gt;(&quot;request_counter&quot;);
</code></pre></div>
3. We can now invoke the <code>Add()</code> method of <code>counter</code> to record new values with our counter and save additional attributes (for example, <code>action.type</code>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>counter.Add(1, new(&quot;ip&quot;, &quot;an ip address here&quot;), new(&quot;some other key&quot;, &quot;some other value&quot;));
</code></pre></div>
<h3 id="connect-logs_1">Connect logs<a class="headerlink" href="#connect-logs_1" title="Permanent link">&para;</a></h3>
<p>With the <code>loggerFactoryOT</code> variable, we initialized under <a href="#setup">Setup</a>, we can now create individual logger instances, which will pass logged information straight to the configured OpenTelemetry endpoint at Dynatrace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a>var logger = loggerFactoryOT.CreateLogger&lt;Startup&gt;();
<a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>
<a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>
<a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a>
<a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a>services.AddSingleton&lt;ILoggerFactory&gt;(loggerFactoryOT);
<a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a>
<a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a>
<a id="__codelineno-100-8" name="__codelineno-100-8" href="#__codelineno-100-8"></a>
<a id="__codelineno-100-9" name="__codelineno-100-9" href="#__codelineno-100-9"></a>services.AddSingleton(logger);
<a id="__codelineno-100-10" name="__codelineno-100-10" href="#__codelineno-100-10"></a>
<a id="__codelineno-100-11" name="__codelineno-100-11" href="#__codelineno-100-11"></a>
<a id="__codelineno-100-12" name="__codelineno-100-12" href="#__codelineno-100-12"></a>
<a id="__codelineno-100-13" name="__codelineno-100-13" href="#__codelineno-100-13"></a>logger.LogInformation(eventId: 123, &quot;Log line&quot;);
</code></pre></div>
<h3 id="ensure-context-propagation-optional_1">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_1" title="Permanent link">&para;</a></h3>
<p><a href="/docs/ingest-from/opentelemetry#context-propagation" title="Learn how to integrate and ingest OpenTelemetry data (traces, metrics, and logs) into Dynatrace.">Context propagation</a> is particularly important when network calls (for example, REST) are involved.</p>
<p>If you are using automatic instrumentation and your networking libraries are covered by automatic instrumentation, this will be automatically taken care of by the instrumentation libraries. Otherwise, your code needs to take this into account.</p>
<h4 id="extracting-the-context-when-receiving-a-request_1">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_1" title="Permanent link">&para;</a></h4>
<p>In the following example, we assume that we have received a network call via <code>System.Web.HttpRequest</code> and we define a <code>CompositeTextMapPropagator</code> instance to fetch the context information from the HTTP headers. We then pass that instance to <code>Extract()</code>, returning the context object, which allows us to continue the previous trace with our spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a>private CompositeTextMapPropagator propagator = new CompositeTextMapPropagator(new TextMapPropagator[] {
<a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>
<a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a>
<a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a>
<a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a>new TraceContextPropagator(),
<a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a>
<a id="__codelineno-101-7" name="__codelineno-101-7" href="#__codelineno-101-7"></a>
<a id="__codelineno-101-8" name="__codelineno-101-8" href="#__codelineno-101-8"></a>
<a id="__codelineno-101-9" name="__codelineno-101-9" href="#__codelineno-101-9"></a>new BaggagePropagator(),
<a id="__codelineno-101-10" name="__codelineno-101-10" href="#__codelineno-101-10"></a>
<a id="__codelineno-101-11" name="__codelineno-101-11" href="#__codelineno-101-11"></a>
<a id="__codelineno-101-12" name="__codelineno-101-12" href="#__codelineno-101-12"></a>
<a id="__codelineno-101-13" name="__codelineno-101-13" href="#__codelineno-101-13"></a>});
<a id="__codelineno-101-14" name="__codelineno-101-14" href="#__codelineno-101-14"></a>
<a id="__codelineno-101-15" name="__codelineno-101-15" href="#__codelineno-101-15"></a>
<a id="__codelineno-101-16" name="__codelineno-101-16" href="#__codelineno-101-16"></a>
<a id="__codelineno-101-17" name="__codelineno-101-17" href="#__codelineno-101-17"></a>private static readonly Func&lt;HttpRequest, string, IEnumerable&lt;string&gt;&gt; valueGetter = (request, name) =&gt; request.Headers[name];
<a id="__codelineno-101-18" name="__codelineno-101-18" href="#__codelineno-101-18"></a>
<a id="__codelineno-101-19" name="__codelineno-101-19" href="#__codelineno-101-19"></a>
<a id="__codelineno-101-20" name="__codelineno-101-20" href="#__codelineno-101-20"></a>
<a id="__codelineno-101-21" name="__codelineno-101-21" href="#__codelineno-101-21"></a>var parentContext = propagator.Extract(default, HttpContext.Request, valueGetter);
<a id="__codelineno-101-22" name="__codelineno-101-22" href="#__codelineno-101-22"></a>
<a id="__codelineno-101-23" name="__codelineno-101-23" href="#__codelineno-101-23"></a>
<a id="__codelineno-101-24" name="__codelineno-101-24" href="#__codelineno-101-24"></a>
<a id="__codelineno-101-25" name="__codelineno-101-25" href="#__codelineno-101-25"></a>using var activity = MyActivitySource.StartActivity(&quot;my-span&quot;, ActivityKind.Consumer, parentContext.ActivityContext);
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_1">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_1" title="Permanent link">&para;</a></h4>
<p>In the following example, we send a REST request to another service and provide our existing context as part of the HTTP headers of our request.</p>
<p>To do so, we define a <code>TextMapPropagator</code> instance, which adds the respective information. Once we have instantiated our REST object, we pass it, along with the context and the setter instance, to <code>Inject()</code>, which will add the necessary headers to the request.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>private CompositeTextMapPropagator propagator = new CompositeTextMapPropagator(new TextMapPropagator[] {
<a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>
<a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a>
<a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a>
<a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a>new TraceContextPropagator(),
<a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a>
<a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a>
<a id="__codelineno-102-8" name="__codelineno-102-8" href="#__codelineno-102-8"></a>
<a id="__codelineno-102-9" name="__codelineno-102-9" href="#__codelineno-102-9"></a>new BaggagePropagator()
<a id="__codelineno-102-10" name="__codelineno-102-10" href="#__codelineno-102-10"></a>
<a id="__codelineno-102-11" name="__codelineno-102-11" href="#__codelineno-102-11"></a>
<a id="__codelineno-102-12" name="__codelineno-102-12" href="#__codelineno-102-12"></a>
<a id="__codelineno-102-13" name="__codelineno-102-13" href="#__codelineno-102-13"></a>});
<a id="__codelineno-102-14" name="__codelineno-102-14" href="#__codelineno-102-14"></a>
<a id="__codelineno-102-15" name="__codelineno-102-15" href="#__codelineno-102-15"></a>
<a id="__codelineno-102-16" name="__codelineno-102-16" href="#__codelineno-102-16"></a>
<a id="__codelineno-102-17" name="__codelineno-102-17" href="#__codelineno-102-17"></a>private static Action&lt;HttpRequestMessage, string, string&gt; _headerValueSetter =&gt; (request, name, value) =&gt; {
<a id="__codelineno-102-18" name="__codelineno-102-18" href="#__codelineno-102-18"></a>
<a id="__codelineno-102-19" name="__codelineno-102-19" href="#__codelineno-102-19"></a>
<a id="__codelineno-102-20" name="__codelineno-102-20" href="#__codelineno-102-20"></a>
<a id="__codelineno-102-21" name="__codelineno-102-21" href="#__codelineno-102-21"></a>request.Headers.Remove(name);
<a id="__codelineno-102-22" name="__codelineno-102-22" href="#__codelineno-102-22"></a>
<a id="__codelineno-102-23" name="__codelineno-102-23" href="#__codelineno-102-23"></a>
<a id="__codelineno-102-24" name="__codelineno-102-24" href="#__codelineno-102-24"></a>
<a id="__codelineno-102-25" name="__codelineno-102-25" href="#__codelineno-102-25"></a>request.Headers.Add(name, value);
<a id="__codelineno-102-26" name="__codelineno-102-26" href="#__codelineno-102-26"></a>
<a id="__codelineno-102-27" name="__codelineno-102-27" href="#__codelineno-102-27"></a>
<a id="__codelineno-102-28" name="__codelineno-102-28" href="#__codelineno-102-28"></a>
<a id="__codelineno-102-29" name="__codelineno-102-29" href="#__codelineno-102-29"></a>};
<a id="__codelineno-102-30" name="__codelineno-102-30" href="#__codelineno-102-30"></a>
<a id="__codelineno-102-31" name="__codelineno-102-31" href="#__codelineno-102-31"></a>
<a id="__codelineno-102-32" name="__codelineno-102-32" href="#__codelineno-102-32"></a>
<a id="__codelineno-102-33" name="__codelineno-102-33" href="#__codelineno-102-33"></a>propagator.Inject(new PropagationContext(activity!.Context, Baggage.Current), request, _headerValueSetter);
</code></pre></div>
<h2 id="step-5-optional-configure-data-capture-to-meet-privacy-requirements-optional">Step 5 optional Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-5-optional-configure-data-capture-to-meet-privacy-requirements-optional" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-6-verify-data-ingestion-into-dynatrace">Step 6 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-6-verify-data-ingestion-into-dynatrace" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_12">Related topics<a class="headerlink" href="#related-topics_12" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-erlangmd">Source: erlang.md<a class="headerlink" href="#source-erlangmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Erlang application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/erlang
scraped: 2026-02-15T21:20:23.702799</p>
<hr />
<h1 id="instrument-your-erlang-application-with-opentelemetry">Instrument your Erlang application with OpenTelemetry<a class="headerlink" href="#instrument-your-erlang-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-erlang-application-with-opentelemetry_1">Instrument your Erlang application with OpenTelemetry<a class="headerlink" href="#instrument-your-erlang-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Published Apr 20, 2023</li>
</ul>
<p>This walkthrough shows how to add observability to your Erlang application using the OpenTelemetry Erlang libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>No</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>No</td>
</tr>
<tr>
<td>Logs</td>
<td>No</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_12">Prerequisites<a class="headerlink" href="#prerequisites_12" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_2">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_2" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_2">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_2" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>.</p>
<p>The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_2">Get API access token<a class="headerlink" href="#get-api-access-token_2" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-set-up-opentelemetry_1">Step 2 Set up OpenTelemetry<a class="headerlink" href="#step-2-set-up-opentelemetry_1" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the current versions of the <a href="https://hex.pm/packages?search=opentelemetry&amp;sort=recent_downloads">following dependencies√Ø¬ª¬ø</a> to <code>rebar.config</code>.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a>{deps, [
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>
<a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a>
<a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a>%TODO add any additional dependancies here
<a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a>
<a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a>
<a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a>
<a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a>opentelemetry_api,
<a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a>
<a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a>
<a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a>
<a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a>opentelemetry,
<a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a>
<a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a>
<a id="__codelineno-103-16" name="__codelineno-103-16" href="#__codelineno-103-16"></a>
<a id="__codelineno-103-17" name="__codelineno-103-17" href="#__codelineno-103-17"></a>opentelemetry_exporter
<a id="__codelineno-103-18" name="__codelineno-103-18" href="#__codelineno-103-18"></a>
<a id="__codelineno-103-19" name="__codelineno-103-19" href="#__codelineno-103-19"></a>
<a id="__codelineno-103-20" name="__codelineno-103-20" href="#__codelineno-103-20"></a>
<a id="__codelineno-103-21" name="__codelineno-103-21" href="#__codelineno-103-21"></a>]}.
</code></pre></div>
2. Add the following dependencies to your <code>.app.src</code> file in the <code>src</code> directory.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a>{applications, [kernel,
<a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a>
<a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>
<a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a>
<a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a>stdlib,
<a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a>
<a id="__codelineno-104-7" name="__codelineno-104-7" href="#__codelineno-104-7"></a>
<a id="__codelineno-104-8" name="__codelineno-104-8" href="#__codelineno-104-8"></a>
<a id="__codelineno-104-9" name="__codelineno-104-9" href="#__codelineno-104-9"></a>opentelemetry_api,
<a id="__codelineno-104-10" name="__codelineno-104-10" href="#__codelineno-104-10"></a>
<a id="__codelineno-104-11" name="__codelineno-104-11" href="#__codelineno-104-11"></a>
<a id="__codelineno-104-12" name="__codelineno-104-12" href="#__codelineno-104-12"></a>
<a id="__codelineno-104-13" name="__codelineno-104-13" href="#__codelineno-104-13"></a>opentelemetry,
<a id="__codelineno-104-14" name="__codelineno-104-14" href="#__codelineno-104-14"></a>
<a id="__codelineno-104-15" name="__codelineno-104-15" href="#__codelineno-104-15"></a>
<a id="__codelineno-104-16" name="__codelineno-104-16" href="#__codelineno-104-16"></a>
<a id="__codelineno-104-17" name="__codelineno-104-17" href="#__codelineno-104-17"></a>opentelemetry_exporter]}
</code></pre></div>
3. Add the following configuration to <code>config/sys.config</code> and replace <code>[URL]</code> and <code>[TOKEN]</code> with the respective values for the <a href="#base-url">Dynatrace URL</a> and <a href="#access-token">access token</a>.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a>[
<a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>
<a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>
<a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a>
<a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a>{otel_getting_started, []},
<a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a>
<a id="__codelineno-105-7" name="__codelineno-105-7" href="#__codelineno-105-7"></a>
<a id="__codelineno-105-8" name="__codelineno-105-8" href="#__codelineno-105-8"></a>
<a id="__codelineno-105-9" name="__codelineno-105-9" href="#__codelineno-105-9"></a>{opentelemetry,
<a id="__codelineno-105-10" name="__codelineno-105-10" href="#__codelineno-105-10"></a>
<a id="__codelineno-105-11" name="__codelineno-105-11" href="#__codelineno-105-11"></a>
<a id="__codelineno-105-12" name="__codelineno-105-12" href="#__codelineno-105-12"></a>
<a id="__codelineno-105-13" name="__codelineno-105-13" href="#__codelineno-105-13"></a>[{span_processor, batch},
<a id="__codelineno-105-14" name="__codelineno-105-14" href="#__codelineno-105-14"></a>
<a id="__codelineno-105-15" name="__codelineno-105-15" href="#__codelineno-105-15"></a>
<a id="__codelineno-105-16" name="__codelineno-105-16" href="#__codelineno-105-16"></a>
<a id="__codelineno-105-17" name="__codelineno-105-17" href="#__codelineno-105-17"></a>{traces_exporter, otlp},
<a id="__codelineno-105-18" name="__codelineno-105-18" href="#__codelineno-105-18"></a>
<a id="__codelineno-105-19" name="__codelineno-105-19" href="#__codelineno-105-19"></a>
<a id="__codelineno-105-20" name="__codelineno-105-20" href="#__codelineno-105-20"></a>
<a id="__codelineno-105-21" name="__codelineno-105-21" href="#__codelineno-105-21"></a>{resource,
<a id="__codelineno-105-22" name="__codelineno-105-22" href="#__codelineno-105-22"></a>
<a id="__codelineno-105-23" name="__codelineno-105-23" href="#__codelineno-105-23"></a>
<a id="__codelineno-105-24" name="__codelineno-105-24" href="#__codelineno-105-24"></a>
<a id="__codelineno-105-25" name="__codelineno-105-25" href="#__codelineno-105-25"></a>[{service,
<a id="__codelineno-105-26" name="__codelineno-105-26" href="#__codelineno-105-26"></a>
<a id="__codelineno-105-27" name="__codelineno-105-27" href="#__codelineno-105-27"></a>
<a id="__codelineno-105-28" name="__codelineno-105-28" href="#__codelineno-105-28"></a>
<a id="__codelineno-105-29" name="__codelineno-105-29" href="#__codelineno-105-29"></a>#{name =&gt; &quot;erlang-quickstart&quot;, version =&gt; &quot;1.0.1&quot;} %%TODO Replace with the name and version of your application
<a id="__codelineno-105-30" name="__codelineno-105-30" href="#__codelineno-105-30"></a>
<a id="__codelineno-105-31" name="__codelineno-105-31" href="#__codelineno-105-31"></a>
<a id="__codelineno-105-32" name="__codelineno-105-32" href="#__codelineno-105-32"></a>
<a id="__codelineno-105-33" name="__codelineno-105-33" href="#__codelineno-105-33"></a>}]
<a id="__codelineno-105-34" name="__codelineno-105-34" href="#__codelineno-105-34"></a>
<a id="__codelineno-105-35" name="__codelineno-105-35" href="#__codelineno-105-35"></a>
<a id="__codelineno-105-36" name="__codelineno-105-36" href="#__codelineno-105-36"></a>
<a id="__codelineno-105-37" name="__codelineno-105-37" href="#__codelineno-105-37"></a>},
<a id="__codelineno-105-38" name="__codelineno-105-38" href="#__codelineno-105-38"></a>
<a id="__codelineno-105-39" name="__codelineno-105-39" href="#__codelineno-105-39"></a>
<a id="__codelineno-105-40" name="__codelineno-105-40" href="#__codelineno-105-40"></a>
<a id="__codelineno-105-41" name="__codelineno-105-41" href="#__codelineno-105-41"></a>{resource_detectors, [
<a id="__codelineno-105-42" name="__codelineno-105-42" href="#__codelineno-105-42"></a>
<a id="__codelineno-105-43" name="__codelineno-105-43" href="#__codelineno-105-43"></a>
<a id="__codelineno-105-44" name="__codelineno-105-44" href="#__codelineno-105-44"></a>
<a id="__codelineno-105-45" name="__codelineno-105-45" href="#__codelineno-105-45"></a>otel_resource_env_var,
<a id="__codelineno-105-46" name="__codelineno-105-46" href="#__codelineno-105-46"></a>
<a id="__codelineno-105-47" name="__codelineno-105-47" href="#__codelineno-105-47"></a>
<a id="__codelineno-105-48" name="__codelineno-105-48" href="#__codelineno-105-48"></a>
<a id="__codelineno-105-49" name="__codelineno-105-49" href="#__codelineno-105-49"></a>otel_resource_app_env,
<a id="__codelineno-105-50" name="__codelineno-105-50" href="#__codelineno-105-50"></a>
<a id="__codelineno-105-51" name="__codelineno-105-51" href="#__codelineno-105-51"></a>
<a id="__codelineno-105-52" name="__codelineno-105-52" href="#__codelineno-105-52"></a>
<a id="__codelineno-105-53" name="__codelineno-105-53" href="#__codelineno-105-53"></a>extra_metadata
<a id="__codelineno-105-54" name="__codelineno-105-54" href="#__codelineno-105-54"></a>
<a id="__codelineno-105-55" name="__codelineno-105-55" href="#__codelineno-105-55"></a>
<a id="__codelineno-105-56" name="__codelineno-105-56" href="#__codelineno-105-56"></a>
<a id="__codelineno-105-57" name="__codelineno-105-57" href="#__codelineno-105-57"></a>]}
<a id="__codelineno-105-58" name="__codelineno-105-58" href="#__codelineno-105-58"></a>
<a id="__codelineno-105-59" name="__codelineno-105-59" href="#__codelineno-105-59"></a>
<a id="__codelineno-105-60" name="__codelineno-105-60" href="#__codelineno-105-60"></a>
<a id="__codelineno-105-61" name="__codelineno-105-61" href="#__codelineno-105-61"></a>]
<a id="__codelineno-105-62" name="__codelineno-105-62" href="#__codelineno-105-62"></a>
<a id="__codelineno-105-63" name="__codelineno-105-63" href="#__codelineno-105-63"></a>
<a id="__codelineno-105-64" name="__codelineno-105-64" href="#__codelineno-105-64"></a>
<a id="__codelineno-105-65" name="__codelineno-105-65" href="#__codelineno-105-65"></a>},
<a id="__codelineno-105-66" name="__codelineno-105-66" href="#__codelineno-105-66"></a>
<a id="__codelineno-105-67" name="__codelineno-105-67" href="#__codelineno-105-67"></a>
<a id="__codelineno-105-68" name="__codelineno-105-68" href="#__codelineno-105-68"></a>
<a id="__codelineno-105-69" name="__codelineno-105-69" href="#__codelineno-105-69"></a>{opentelemetry_exporter,
<a id="__codelineno-105-70" name="__codelineno-105-70" href="#__codelineno-105-70"></a>
<a id="__codelineno-105-71" name="__codelineno-105-71" href="#__codelineno-105-71"></a>
<a id="__codelineno-105-72" name="__codelineno-105-72" href="#__codelineno-105-72"></a>
<a id="__codelineno-105-73" name="__codelineno-105-73" href="#__codelineno-105-73"></a>[{otlp_protocol, http_protobuf},
<a id="__codelineno-105-74" name="__codelineno-105-74" href="#__codelineno-105-74"></a>
<a id="__codelineno-105-75" name="__codelineno-105-75" href="#__codelineno-105-75"></a>
<a id="__codelineno-105-76" name="__codelineno-105-76" href="#__codelineno-105-76"></a>
<a id="__codelineno-105-77" name="__codelineno-105-77" href="#__codelineno-105-77"></a>{otlp_traces_endpoint, &quot;[URL]&quot;}, %%TODO Replace [URL] to your SaaS/Managed URL as mentioned in the next step
<a id="__codelineno-105-78" name="__codelineno-105-78" href="#__codelineno-105-78"></a>
<a id="__codelineno-105-79" name="__codelineno-105-79" href="#__codelineno-105-79"></a>
<a id="__codelineno-105-80" name="__codelineno-105-80" href="#__codelineno-105-80"></a>
<a id="__codelineno-105-81" name="__codelineno-105-81" href="#__codelineno-105-81"></a>{otlp_headers, [{&quot;Authorization&quot;, &quot;Api-Token [TOKEN]&quot;}]} %%TODO Replace [TOKEN] with your API Token as mentioned in the next step
<a id="__codelineno-105-82" name="__codelineno-105-82" href="#__codelineno-105-82"></a>
<a id="__codelineno-105-83" name="__codelineno-105-83" href="#__codelineno-105-83"></a>
<a id="__codelineno-105-84" name="__codelineno-105-84" href="#__codelineno-105-84"></a>
<a id="__codelineno-105-85" name="__codelineno-105-85" href="#__codelineno-105-85"></a>]}
<a id="__codelineno-105-86" name="__codelineno-105-86" href="#__codelineno-105-86"></a>
<a id="__codelineno-105-87" name="__codelineno-105-87" href="#__codelineno-105-87"></a>
<a id="__codelineno-105-88" name="__codelineno-105-88" href="#__codelineno-105-88"></a>
<a id="__codelineno-105-89" name="__codelineno-105-89" href="#__codelineno-105-89"></a>].
</code></pre></div>
4. Save the following code to <code>src/extra_metadata.erl</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a>-module(extra_metadata).
<a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>
<a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>
<a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a>
<a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>-behaviour(otel_resource_detector).
<a id="__codelineno-106-6" name="__codelineno-106-6" href="#__codelineno-106-6"></a>
<a id="__codelineno-106-7" name="__codelineno-106-7" href="#__codelineno-106-7"></a>
<a id="__codelineno-106-8" name="__codelineno-106-8" href="#__codelineno-106-8"></a>
<a id="__codelineno-106-9" name="__codelineno-106-9" href="#__codelineno-106-9"></a>-export([get_resource/1]).
<a id="__codelineno-106-10" name="__codelineno-106-10" href="#__codelineno-106-10"></a>
<a id="__codelineno-106-11" name="__codelineno-106-11" href="#__codelineno-106-11"></a>
<a id="__codelineno-106-12" name="__codelineno-106-12" href="#__codelineno-106-12"></a>
<a id="__codelineno-106-13" name="__codelineno-106-13" href="#__codelineno-106-13"></a>get_resource(_) -&gt;
<a id="__codelineno-106-14" name="__codelineno-106-14" href="#__codelineno-106-14"></a>
<a id="__codelineno-106-15" name="__codelineno-106-15" href="#__codelineno-106-15"></a>
<a id="__codelineno-106-16" name="__codelineno-106-16" href="#__codelineno-106-16"></a>
<a id="__codelineno-106-17" name="__codelineno-106-17" href="#__codelineno-106-17"></a>Metadata = otel_resource:create(otel_resource_app_env:parse(get_metadata(&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;)), []),
<a id="__codelineno-106-18" name="__codelineno-106-18" href="#__codelineno-106-18"></a>
<a id="__codelineno-106-19" name="__codelineno-106-19" href="#__codelineno-106-19"></a>
<a id="__codelineno-106-20" name="__codelineno-106-20" href="#__codelineno-106-20"></a>
<a id="__codelineno-106-21" name="__codelineno-106-21" href="#__codelineno-106-21"></a>{ok, MetadataFilePath} = file:read_file(&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;),
<a id="__codelineno-106-22" name="__codelineno-106-22" href="#__codelineno-106-22"></a>
<a id="__codelineno-106-23" name="__codelineno-106-23" href="#__codelineno-106-23"></a>
<a id="__codelineno-106-24" name="__codelineno-106-24" href="#__codelineno-106-24"></a>
<a id="__codelineno-106-25" name="__codelineno-106-25" href="#__codelineno-106-25"></a>Metadata2 = otel_resource:create(otel_resource_app_env:parse(get_metadata(MetadataFilePath)), []),
<a id="__codelineno-106-26" name="__codelineno-106-26" href="#__codelineno-106-26"></a>
<a id="__codelineno-106-27" name="__codelineno-106-27" href="#__codelineno-106-27"></a>
<a id="__codelineno-106-28" name="__codelineno-106-28" href="#__codelineno-106-28"></a>
<a id="__codelineno-106-29" name="__codelineno-106-29" href="#__codelineno-106-29"></a>Metadata3 = otel_resource:create(otel_resource_app_env:parse(get_metadata(&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;)), []),
<a id="__codelineno-106-30" name="__codelineno-106-30" href="#__codelineno-106-30"></a>
<a id="__codelineno-106-31" name="__codelineno-106-31" href="#__codelineno-106-31"></a>
<a id="__codelineno-106-32" name="__codelineno-106-32" href="#__codelineno-106-32"></a>
<a id="__codelineno-106-33" name="__codelineno-106-33" href="#__codelineno-106-33"></a>otel_resource:merge(otel_resource:merge(Metadata, Metadata2), Metadata3),
<a id="__codelineno-106-34" name="__codelineno-106-34" href="#__codelineno-106-34"></a>
<a id="__codelineno-106-35" name="__codelineno-106-35" href="#__codelineno-106-35"></a>
<a id="__codelineno-106-36" name="__codelineno-106-36" href="#__codelineno-106-36"></a>
<a id="__codelineno-106-37" name="__codelineno-106-37" href="#__codelineno-106-37"></a>otel_resource:merge(Metadata, Metadata2).
<a id="__codelineno-106-38" name="__codelineno-106-38" href="#__codelineno-106-38"></a>
<a id="__codelineno-106-39" name="__codelineno-106-39" href="#__codelineno-106-39"></a>
<a id="__codelineno-106-40" name="__codelineno-106-40" href="#__codelineno-106-40"></a>
<a id="__codelineno-106-41" name="__codelineno-106-41" href="#__codelineno-106-41"></a>get_metadata(FileName) -&gt;
<a id="__codelineno-106-42" name="__codelineno-106-42" href="#__codelineno-106-42"></a>
<a id="__codelineno-106-43" name="__codelineno-106-43" href="#__codelineno-106-43"></a>
<a id="__codelineno-106-44" name="__codelineno-106-44" href="#__codelineno-106-44"></a>
<a id="__codelineno-106-45" name="__codelineno-106-45" href="#__codelineno-106-45"></a>try
<a id="__codelineno-106-46" name="__codelineno-106-46" href="#__codelineno-106-46"></a>
<a id="__codelineno-106-47" name="__codelineno-106-47" href="#__codelineno-106-47"></a>
<a id="__codelineno-106-48" name="__codelineno-106-48" href="#__codelineno-106-48"></a>
<a id="__codelineno-106-49" name="__codelineno-106-49" href="#__codelineno-106-49"></a>{ok, MetadataFile} = file:read_file(FileName),
<a id="__codelineno-106-50" name="__codelineno-106-50" href="#__codelineno-106-50"></a>
<a id="__codelineno-106-51" name="__codelineno-106-51" href="#__codelineno-106-51"></a>
<a id="__codelineno-106-52" name="__codelineno-106-52" href="#__codelineno-106-52"></a>
<a id="__codelineno-106-53" name="__codelineno-106-53" href="#__codelineno-106-53"></a>Lines = binary:split(MetadataFile, &lt;&lt;&quot;\n&quot;&gt;&gt;, [trim, global]),
<a id="__codelineno-106-54" name="__codelineno-106-54" href="#__codelineno-106-54"></a>
<a id="__codelineno-106-55" name="__codelineno-106-55" href="#__codelineno-106-55"></a>
<a id="__codelineno-106-56" name="__codelineno-106-56" href="#__codelineno-106-56"></a>
<a id="__codelineno-106-57" name="__codelineno-106-57" href="#__codelineno-106-57"></a>make_tuples(Lines, [])
<a id="__codelineno-106-58" name="__codelineno-106-58" href="#__codelineno-106-58"></a>
<a id="__codelineno-106-59" name="__codelineno-106-59" href="#__codelineno-106-59"></a>
<a id="__codelineno-106-60" name="__codelineno-106-60" href="#__codelineno-106-60"></a>
<a id="__codelineno-106-61" name="__codelineno-106-61" href="#__codelineno-106-61"></a>catch _:_ -&gt; &quot;Metadata not found, safe to continue&quot;
<a id="__codelineno-106-62" name="__codelineno-106-62" href="#__codelineno-106-62"></a>
<a id="__codelineno-106-63" name="__codelineno-106-63" href="#__codelineno-106-63"></a>
<a id="__codelineno-106-64" name="__codelineno-106-64" href="#__codelineno-106-64"></a>
<a id="__codelineno-106-65" name="__codelineno-106-65" href="#__codelineno-106-65"></a>end.
<a id="__codelineno-106-66" name="__codelineno-106-66" href="#__codelineno-106-66"></a>
<a id="__codelineno-106-67" name="__codelineno-106-67" href="#__codelineno-106-67"></a>
<a id="__codelineno-106-68" name="__codelineno-106-68" href="#__codelineno-106-68"></a>
<a id="__codelineno-106-69" name="__codelineno-106-69" href="#__codelineno-106-69"></a>make_tuples([Line|Lines], Acc) -&gt;
<a id="__codelineno-106-70" name="__codelineno-106-70" href="#__codelineno-106-70"></a>
<a id="__codelineno-106-71" name="__codelineno-106-71" href="#__codelineno-106-71"></a>
<a id="__codelineno-106-72" name="__codelineno-106-72" href="#__codelineno-106-72"></a>
<a id="__codelineno-106-73" name="__codelineno-106-73" href="#__codelineno-106-73"></a>[Key, Value] = binary:split(Line, &lt;&lt;&quot;=&quot;&gt;&gt;),
<a id="__codelineno-106-74" name="__codelineno-106-74" href="#__codelineno-106-74"></a>
<a id="__codelineno-106-75" name="__codelineno-106-75" href="#__codelineno-106-75"></a>
<a id="__codelineno-106-76" name="__codelineno-106-76" href="#__codelineno-106-76"></a>
<a id="__codelineno-106-77" name="__codelineno-106-77" href="#__codelineno-106-77"></a>make_tuples(Lines, [{Key, Value}|Acc]);
<a id="__codelineno-106-78" name="__codelineno-106-78" href="#__codelineno-106-78"></a>
<a id="__codelineno-106-79" name="__codelineno-106-79" href="#__codelineno-106-79"></a>
<a id="__codelineno-106-80" name="__codelineno-106-80" href="#__codelineno-106-80"></a>
<a id="__codelineno-106-81" name="__codelineno-106-81" href="#__codelineno-106-81"></a>make_tuples([], Acc) -&gt; Acc.
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.</p>
<h2 id="step-3-instrument-your-application_1">Step 3 Instrument your application<a class="headerlink" href="#step-3-instrument-your-application_1" title="Permanent link">&para;</a></h2>
<h3 id="add-tracing_2">Add tracing<a class="headerlink" href="#add-tracing_2" title="Permanent link">&para;</a></h3>
<p>Spans are started with the macro <a href="https://hexdocs.pm/opentelemetry_api/OpenTelemetry.Tracer.html#with_span/3"><code>with_span</code>√Ø¬ª¬ø</a> and accept an optional list of span attributes, as well as the code block for this span. The span will automatically finish when the code block returns.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a>-export([init/2]).
<a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>
<a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a>
<a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a>
<a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a>-include_lib(&quot;opentelemetry_api/include/otel_tracer.hrl&quot;).
<a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a>
<a id="__codelineno-107-7" name="__codelineno-107-7" href="#__codelineno-107-7"></a>
<a id="__codelineno-107-8" name="__codelineno-107-8" href="#__codelineno-107-8"></a>
<a id="__codelineno-107-9" name="__codelineno-107-9" href="#__codelineno-107-9"></a>-include_lib(&quot;opentelemetry/include/otel_resource.hrl&quot;).
<a id="__codelineno-107-10" name="__codelineno-107-10" href="#__codelineno-107-10"></a>
<a id="__codelineno-107-11" name="__codelineno-107-11" href="#__codelineno-107-11"></a>
<a id="__codelineno-107-12" name="__codelineno-107-12" href="#__codelineno-107-12"></a>
<a id="__codelineno-107-13" name="__codelineno-107-13" href="#__codelineno-107-13"></a>init( Req, State ) -&gt;
<a id="__codelineno-107-14" name="__codelineno-107-14" href="#__codelineno-107-14"></a>
<a id="__codelineno-107-15" name="__codelineno-107-15" href="#__codelineno-107-15"></a>
<a id="__codelineno-107-16" name="__codelineno-107-16" href="#__codelineno-107-16"></a>
<a id="__codelineno-107-17" name="__codelineno-107-17" href="#__codelineno-107-17"></a>?with_span(&lt;&lt;&quot;parent_span&quot;&gt;&gt;, #{attributes =&gt; [ %%TODO Add span name
<a id="__codelineno-107-18" name="__codelineno-107-18" href="#__codelineno-107-18"></a>
<a id="__codelineno-107-19" name="__codelineno-107-19" href="#__codelineno-107-19"></a>
<a id="__codelineno-107-20" name="__codelineno-107-20" href="#__codelineno-107-20"></a>
<a id="__codelineno-107-21" name="__codelineno-107-21" href="#__codelineno-107-21"></a>{&lt;&lt;&quot;my-key-1&quot;&gt;&gt;, &lt;&lt;&quot;my-value-1&quot;&gt;&gt;}] %%TODO Add attributes at span creation
<a id="__codelineno-107-22" name="__codelineno-107-22" href="#__codelineno-107-22"></a>
<a id="__codelineno-107-23" name="__codelineno-107-23" href="#__codelineno-107-23"></a>
<a id="__codelineno-107-24" name="__codelineno-107-24" href="#__codelineno-107-24"></a>
<a id="__codelineno-107-25" name="__codelineno-107-25" href="#__codelineno-107-25"></a>}, fun child_function/1),
<a id="__codelineno-107-26" name="__codelineno-107-26" href="#__codelineno-107-26"></a>
<a id="__codelineno-107-27" name="__codelineno-107-27" href="#__codelineno-107-27"></a>
<a id="__codelineno-107-28" name="__codelineno-107-28" href="#__codelineno-107-28"></a>
<a id="__codelineno-107-29" name="__codelineno-107-29" href="#__codelineno-107-29"></a>%% Your code goes here
<a id="__codelineno-107-30" name="__codelineno-107-30" href="#__codelineno-107-30"></a>
<a id="__codelineno-107-31" name="__codelineno-107-31" href="#__codelineno-107-31"></a>
<a id="__codelineno-107-32" name="__codelineno-107-32" href="#__codelineno-107-32"></a>
<a id="__codelineno-107-33" name="__codelineno-107-33" href="#__codelineno-107-33"></a>child_function(_SpanCtx) -&gt;
<a id="__codelineno-107-34" name="__codelineno-107-34" href="#__codelineno-107-34"></a>
<a id="__codelineno-107-35" name="__codelineno-107-35" href="#__codelineno-107-35"></a>
<a id="__codelineno-107-36" name="__codelineno-107-36" href="#__codelineno-107-36"></a>
<a id="__codelineno-107-37" name="__codelineno-107-37" href="#__codelineno-107-37"></a>?with_span(&lt;&lt;&quot;child_span&quot;&gt;&gt;, #{},
<a id="__codelineno-107-38" name="__codelineno-107-38" href="#__codelineno-107-38"></a>
<a id="__codelineno-107-39" name="__codelineno-107-39" href="#__codelineno-107-39"></a>
<a id="__codelineno-107-40" name="__codelineno-107-40" href="#__codelineno-107-40"></a>
<a id="__codelineno-107-41" name="__codelineno-107-41" href="#__codelineno-107-41"></a>fun(_ChildSpanCtx) -&gt;
<a id="__codelineno-107-42" name="__codelineno-107-42" href="#__codelineno-107-42"></a>
<a id="__codelineno-107-43" name="__codelineno-107-43" href="#__codelineno-107-43"></a>
<a id="__codelineno-107-44" name="__codelineno-107-44" href="#__codelineno-107-44"></a>
<a id="__codelineno-107-45" name="__codelineno-107-45" href="#__codelineno-107-45"></a>?set_attributes([{&lt;&lt;&quot;child-key-1&quot;&gt;&gt;, &lt;&lt;&quot;child-value-1&quot;&gt;&gt;}]) %%TODO Add attributes after span creation
<a id="__codelineno-107-46" name="__codelineno-107-46" href="#__codelineno-107-46"></a>
<a id="__codelineno-107-47" name="__codelineno-107-47" href="#__codelineno-107-47"></a>
<a id="__codelineno-107-48" name="__codelineno-107-48" href="#__codelineno-107-48"></a>
<a id="__codelineno-107-49" name="__codelineno-107-49" href="#__codelineno-107-49"></a>end).
</code></pre></div>
<h3 id="collect-metrics_2">Collect metrics<a class="headerlink" href="#collect-metrics_2" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Erlang does not have stable support for metrics yet.</p>
<h3 id="connect-logs_2">Connect logs<a class="headerlink" href="#connect-logs_2" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Erlang does not have stable support for logs yet.</p>
<p>Depending on the status of the OpenTelemetry SDK, the pre-release version may nonetheless already allow the ingestion of your logs.</p>
<h3 id="ensure-context-propagation-optional_2">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_2" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<h4 id="extracting-the-context-when-receiving-a-request_2">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_2" title="Permanent link">&para;</a></h4>
<p>For extracting information on an existing context, we pass the headers to the <code>otel_propagator_text_map.extract</code> function, which parses the context information provided by the headers and sets the current context based on that.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a>%% Get Headers from incoming request
<a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a>
<a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a>
<a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a>
<a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a>Headers = maps:get(headers, Req),
<a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a>
<a id="__codelineno-108-7" name="__codelineno-108-7" href="#__codelineno-108-7"></a>
<a id="__codelineno-108-8" name="__codelineno-108-8" href="#__codelineno-108-8"></a>
<a id="__codelineno-108-9" name="__codelineno-108-9" href="#__codelineno-108-9"></a>otel_propagator_text_map:extract(maps:to_list(Headers)),
<a id="__codelineno-108-10" name="__codelineno-108-10" href="#__codelineno-108-10"></a>
<a id="__codelineno-108-11" name="__codelineno-108-11" href="#__codelineno-108-11"></a>
<a id="__codelineno-108-12" name="__codelineno-108-12" href="#__codelineno-108-12"></a>
<a id="__codelineno-108-13" name="__codelineno-108-13" href="#__codelineno-108-13"></a>SpanCtx = ?start_span(&lt;&lt;&quot;span-name&quot;&gt;&gt;),
<a id="__codelineno-108-14" name="__codelineno-108-14" href="#__codelineno-108-14"></a>
<a id="__codelineno-108-15" name="__codelineno-108-15" href="#__codelineno-108-15"></a>
<a id="__codelineno-108-16" name="__codelineno-108-16" href="#__codelineno-108-16"></a>
<a id="__codelineno-108-17" name="__codelineno-108-17" href="#__codelineno-108-17"></a>%% As we used `otel_propagator_text_map` the current context is from the parent span
<a id="__codelineno-108-18" name="__codelineno-108-18" href="#__codelineno-108-18"></a>
<a id="__codelineno-108-19" name="__codelineno-108-19" href="#__codelineno-108-19"></a>
<a id="__codelineno-108-20" name="__codelineno-108-20" href="#__codelineno-108-20"></a>
<a id="__codelineno-108-21" name="__codelineno-108-21" href="#__codelineno-108-21"></a>Ctx = otel_ctx:get_current(),
<a id="__codelineno-108-22" name="__codelineno-108-22" href="#__codelineno-108-22"></a>
<a id="__codelineno-108-23" name="__codelineno-108-23" href="#__codelineno-108-23"></a>
<a id="__codelineno-108-24" name="__codelineno-108-24" href="#__codelineno-108-24"></a>
<a id="__codelineno-108-25" name="__codelineno-108-25" href="#__codelineno-108-25"></a>proc_lib:spawn_link(fun() -&gt;
<a id="__codelineno-108-26" name="__codelineno-108-26" href="#__codelineno-108-26"></a>
<a id="__codelineno-108-27" name="__codelineno-108-27" href="#__codelineno-108-27"></a>
<a id="__codelineno-108-28" name="__codelineno-108-28" href="#__codelineno-108-28"></a>
<a id="__codelineno-108-29" name="__codelineno-108-29" href="#__codelineno-108-29"></a>%% Start span and set as current
<a id="__codelineno-108-30" name="__codelineno-108-30" href="#__codelineno-108-30"></a>
<a id="__codelineno-108-31" name="__codelineno-108-31" href="#__codelineno-108-31"></a>
<a id="__codelineno-108-32" name="__codelineno-108-32" href="#__codelineno-108-32"></a>
<a id="__codelineno-108-33" name="__codelineno-108-33" href="#__codelineno-108-33"></a>otel_ctx:attach(Ctx),
<a id="__codelineno-108-34" name="__codelineno-108-34" href="#__codelineno-108-34"></a>
<a id="__codelineno-108-35" name="__codelineno-108-35" href="#__codelineno-108-35"></a>
<a id="__codelineno-108-36" name="__codelineno-108-36" href="#__codelineno-108-36"></a>
<a id="__codelineno-108-37" name="__codelineno-108-37" href="#__codelineno-108-37"></a>?set_current_span(SpanCtx),
<a id="__codelineno-108-38" name="__codelineno-108-38" href="#__codelineno-108-38"></a>
<a id="__codelineno-108-39" name="__codelineno-108-39" href="#__codelineno-108-39"></a>
<a id="__codelineno-108-40" name="__codelineno-108-40" href="#__codelineno-108-40"></a>
<a id="__codelineno-108-41" name="__codelineno-108-41" href="#__codelineno-108-41"></a>%% Create response
<a id="__codelineno-108-42" name="__codelineno-108-42" href="#__codelineno-108-42"></a>
<a id="__codelineno-108-43" name="__codelineno-108-43" href="#__codelineno-108-43"></a>
<a id="__codelineno-108-44" name="__codelineno-108-44" href="#__codelineno-108-44"></a>
<a id="__codelineno-108-45" name="__codelineno-108-45" href="#__codelineno-108-45"></a>Resp = cowboy_req:reply(
<a id="__codelineno-108-46" name="__codelineno-108-46" href="#__codelineno-108-46"></a>
<a id="__codelineno-108-47" name="__codelineno-108-47" href="#__codelineno-108-47"></a>
<a id="__codelineno-108-48" name="__codelineno-108-48" href="#__codelineno-108-48"></a>
<a id="__codelineno-108-49" name="__codelineno-108-49" href="#__codelineno-108-49"></a>200,
<a id="__codelineno-108-50" name="__codelineno-108-50" href="#__codelineno-108-50"></a>
<a id="__codelineno-108-51" name="__codelineno-108-51" href="#__codelineno-108-51"></a>
<a id="__codelineno-108-52" name="__codelineno-108-52" href="#__codelineno-108-52"></a>
<a id="__codelineno-108-53" name="__codelineno-108-53" href="#__codelineno-108-53"></a>#{&lt;&lt;&quot;content-type&quot;&gt;&gt; =&gt; &lt;&lt;&quot;application/json&quot;&gt;&gt;},
<a id="__codelineno-108-54" name="__codelineno-108-54" href="#__codelineno-108-54"></a>
<a id="__codelineno-108-55" name="__codelineno-108-55" href="#__codelineno-108-55"></a>
<a id="__codelineno-108-56" name="__codelineno-108-56" href="#__codelineno-108-56"></a>
<a id="__codelineno-108-57" name="__codelineno-108-57" href="#__codelineno-108-57"></a>&lt;&lt;&quot;{\&quot;message\&quot;: \&quot;hello world\&quot;}&quot;&gt;&gt;,
<a id="__codelineno-108-58" name="__codelineno-108-58" href="#__codelineno-108-58"></a>
<a id="__codelineno-108-59" name="__codelineno-108-59" href="#__codelineno-108-59"></a>
<a id="__codelineno-108-60" name="__codelineno-108-60" href="#__codelineno-108-60"></a>
<a id="__codelineno-108-61" name="__codelineno-108-61" href="#__codelineno-108-61"></a>Req
<a id="__codelineno-108-62" name="__codelineno-108-62" href="#__codelineno-108-62"></a>
<a id="__codelineno-108-63" name="__codelineno-108-63" href="#__codelineno-108-63"></a>
<a id="__codelineno-108-64" name="__codelineno-108-64" href="#__codelineno-108-64"></a>
<a id="__codelineno-108-65" name="__codelineno-108-65" href="#__codelineno-108-65"></a>),
<a id="__codelineno-108-66" name="__codelineno-108-66" href="#__codelineno-108-66"></a>
<a id="__codelineno-108-67" name="__codelineno-108-67" href="#__codelineno-108-67"></a>
<a id="__codelineno-108-68" name="__codelineno-108-68" href="#__codelineno-108-68"></a>
<a id="__codelineno-108-69" name="__codelineno-108-69" href="#__codelineno-108-69"></a>{ok, Resp, State},
<a id="__codelineno-108-70" name="__codelineno-108-70" href="#__codelineno-108-70"></a>
<a id="__codelineno-108-71" name="__codelineno-108-71" href="#__codelineno-108-71"></a>
<a id="__codelineno-108-72" name="__codelineno-108-72" href="#__codelineno-108-72"></a>
<a id="__codelineno-108-73" name="__codelineno-108-73" href="#__codelineno-108-73"></a>?end_span(SpanCtx)
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_2">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_2" title="Permanent link">&para;</a></h4>
<p>The following example uses <code>otel_propagator_text_map:inject</code> to provide the HTTP headers (necessary for context propagation) in <code>NewHeaders</code>, which we eventually merge with the existing header object <code>Headers</code> and pass to the <code>httpc:request</code> call, which allows the receiving endpoint to continue the trace with the provided information.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a>?with_span(&lt;&lt;&quot;span-name&quot;&gt;&gt;, #{},
<a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>
<a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a>
<a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a>
<a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a>fun(_ChildSpanCtx) -&gt;
<a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a>
<a id="__codelineno-109-7" name="__codelineno-109-7" href="#__codelineno-109-7"></a>
<a id="__codelineno-109-8" name="__codelineno-109-8" href="#__codelineno-109-8"></a>
<a id="__codelineno-109-9" name="__codelineno-109-9" href="#__codelineno-109-9"></a>%% A custom header example
<a id="__codelineno-109-10" name="__codelineno-109-10" href="#__codelineno-109-10"></a>
<a id="__codelineno-109-11" name="__codelineno-109-11" href="#__codelineno-109-11"></a>
<a id="__codelineno-109-12" name="__codelineno-109-12" href="#__codelineno-109-12"></a>
<a id="__codelineno-109-13" name="__codelineno-109-13" href="#__codelineno-109-13"></a>Headers = [{&quot;content-type&quot;, &quot;application/json&quot;}, {&quot;X-Custom-Header&quot;, &quot;some-value&quot;}],
<a id="__codelineno-109-14" name="__codelineno-109-14" href="#__codelineno-109-14"></a>
<a id="__codelineno-109-15" name="__codelineno-109-15" href="#__codelineno-109-15"></a>
<a id="__codelineno-109-16" name="__codelineno-109-16" href="#__codelineno-109-16"></a>
<a id="__codelineno-109-17" name="__codelineno-109-17" href="#__codelineno-109-17"></a>%% We convert the traceparent information and merge the 2 headers as
<a id="__codelineno-109-18" name="__codelineno-109-18" href="#__codelineno-109-18"></a>
<a id="__codelineno-109-19" name="__codelineno-109-19" href="#__codelineno-109-19"></a>
<a id="__codelineno-109-20" name="__codelineno-109-20" href="#__codelineno-109-20"></a>
<a id="__codelineno-109-21" name="__codelineno-109-21" href="#__codelineno-109-21"></a>%% Httpc:request requires tuples of strings
<a id="__codelineno-109-22" name="__codelineno-109-22" href="#__codelineno-109-22"></a>
<a id="__codelineno-109-23" name="__codelineno-109-23" href="#__codelineno-109-23"></a>
<a id="__codelineno-109-24" name="__codelineno-109-24" href="#__codelineno-109-24"></a>
<a id="__codelineno-109-25" name="__codelineno-109-25" href="#__codelineno-109-25"></a>Tmp = [],
<a id="__codelineno-109-26" name="__codelineno-109-26" href="#__codelineno-109-26"></a>
<a id="__codelineno-109-27" name="__codelineno-109-27" href="#__codelineno-109-27"></a>
<a id="__codelineno-109-28" name="__codelineno-109-28" href="#__codelineno-109-28"></a>
<a id="__codelineno-109-29" name="__codelineno-109-29" href="#__codelineno-109-29"></a>NewHeaders = headers_list(otel_propagator_text_map:inject(opentelemetry:get_text_map_injector(), Tmp)),
<a id="__codelineno-109-30" name="__codelineno-109-30" href="#__codelineno-109-30"></a>
<a id="__codelineno-109-31" name="__codelineno-109-31" href="#__codelineno-109-31"></a>
<a id="__codelineno-109-32" name="__codelineno-109-32" href="#__codelineno-109-32"></a>
<a id="__codelineno-109-33" name="__codelineno-109-33" href="#__codelineno-109-33"></a>MergedHeaders = lists:append(Headers, NewHeaders),
<a id="__codelineno-109-34" name="__codelineno-109-34" href="#__codelineno-109-34"></a>
<a id="__codelineno-109-35" name="__codelineno-109-35" href="#__codelineno-109-35"></a>
<a id="__codelineno-109-36" name="__codelineno-109-36" href="#__codelineno-109-36"></a>
<a id="__codelineno-109-37" name="__codelineno-109-37" href="#__codelineno-109-37"></a>{ok, Res} = httpc:request(get, {URL, MergedHeaders}, [], []),
<a id="__codelineno-109-38" name="__codelineno-109-38" href="#__codelineno-109-38"></a>
<a id="__codelineno-109-39" name="__codelineno-109-39" href="#__codelineno-109-39"></a>
<a id="__codelineno-109-40" name="__codelineno-109-40" href="#__codelineno-109-40"></a>
<a id="__codelineno-109-41" name="__codelineno-109-41" href="#__codelineno-109-41"></a>io:format(&quot;Response: ~p~n&quot;, [Res])
<a id="__codelineno-109-42" name="__codelineno-109-42" href="#__codelineno-109-42"></a>
<a id="__codelineno-109-43" name="__codelineno-109-43" href="#__codelineno-109-43"></a>
<a id="__codelineno-109-44" name="__codelineno-109-44" href="#__codelineno-109-44"></a>
<a id="__codelineno-109-45" name="__codelineno-109-45" href="#__codelineno-109-45"></a>end).
<a id="__codelineno-109-46" name="__codelineno-109-46" href="#__codelineno-109-46"></a>
<a id="__codelineno-109-47" name="__codelineno-109-47" href="#__codelineno-109-47"></a>
<a id="__codelineno-109-48" name="__codelineno-109-48" href="#__codelineno-109-48"></a>
<a id="__codelineno-109-49" name="__codelineno-109-49" href="#__codelineno-109-49"></a>headers_list(Headers) -&gt;
<a id="__codelineno-109-50" name="__codelineno-109-50" href="#__codelineno-109-50"></a>
<a id="__codelineno-109-51" name="__codelineno-109-51" href="#__codelineno-109-51"></a>
<a id="__codelineno-109-52" name="__codelineno-109-52" href="#__codelineno-109-52"></a>
<a id="__codelineno-109-53" name="__codelineno-109-53" href="#__codelineno-109-53"></a>[{binary_to_list(Name), binary_to_list(Value)} || {Name, Value} &lt;- Headers].
</code></pre></div>
<h2 id="step-4-configure-data-capture-to-meet-privacy-requirements-optional_1">Step 4 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-4-configure-data-capture-to-meet-privacy-requirements-optional_1" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-5-verify-data-ingestion-into-dynatrace_1">Step 5 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-5-verify-data-ingestion-into-dynatrace_1" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_13">Related topics<a class="headerlink" href="#related-topics_13" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-javamd">Source: java.md<a class="headerlink" href="#source-javamd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Java application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/java
scraped: 2026-02-15T09:06:32.098195</p>
<hr />
<h1 id="instrument-your-java-application-with-opentelemetry">Instrument your Java application with OpenTelemetry<a class="headerlink" href="#instrument-your-java-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-java-application-with-opentelemetry_1">Instrument your Java application with OpenTelemetry<a class="headerlink" href="#instrument-your-java-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Published Apr 18, 2023</li>
</ul>
<p>These walkthroughs show how to add observability to your Java application using the OpenTelemetry Java libraries and tools.</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/walkthroughs/java/java-auto" title="Learn how to instrument your Java application using OpenTelemetry and Dynatrace.">Automatically instrument your Java application with OpenTelemetry</a></li>
<li><a href="/docs/ingest-from/opentelemetry/walkthroughs/java/java-manual" title="Learn how to instrument your Java application using OpenTelemetry and Dynatrace.">Manually instrument your Java application with OpenTelemetry</a></li>
</ul>
<p>The following features are currently supported by OpenTelemetry Java.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_14">Related topics<a class="headerlink" href="#related-topics_14" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-nodejsmd">Source: nodejs.md<a class="headerlink" href="#source-nodejsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your JavaScript application on Node.js with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/nodejs
scraped: 2026-02-15T09:09:15.804154</p>
<hr />
<h1 id="instrument-your-javascript-application-on-nodejs-with-opentelemetry">Instrument your JavaScript application on Node.js with OpenTelemetry<a class="headerlink" href="#instrument-your-javascript-application-on-nodejs-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-javascript-application-on-nodejs-with-opentelemetry_1">Instrument your JavaScript application on Node.js with OpenTelemetry<a class="headerlink" href="#instrument-your-javascript-application-on-nodejs-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Updated on Nov 14, 2023</li>
</ul>
<p>This walkthrough shows how to add observability to your JavaScript application using the OpenTelemetry JavaScript libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>No</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_13">Prerequisites<a class="headerlink" href="#prerequisites_13" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_3">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_3" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_3">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_3" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_3">Get API access token<a class="headerlink" href="#get-api-access-token_3" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-initialize-opentelemetry">Step 2 Initialize OpenTelemetry<a class="headerlink" href="#step-2-initialize-opentelemetry" title="Permanent link">&para;</a></h2>
<ol>
<li>Run the following <code>npm</code> command to install the necessary libraries and dependencies.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a>npm install \
<a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>
<a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a>
<a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a>
<a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a>@opentelemetry/api \
<a id="__codelineno-110-6" name="__codelineno-110-6" href="#__codelineno-110-6"></a>
<a id="__codelineno-110-7" name="__codelineno-110-7" href="#__codelineno-110-7"></a>
<a id="__codelineno-110-8" name="__codelineno-110-8" href="#__codelineno-110-8"></a>
<a id="__codelineno-110-9" name="__codelineno-110-9" href="#__codelineno-110-9"></a>@opentelemetry/exporter-metrics-otlp-proto \
<a id="__codelineno-110-10" name="__codelineno-110-10" href="#__codelineno-110-10"></a>
<a id="__codelineno-110-11" name="__codelineno-110-11" href="#__codelineno-110-11"></a>
<a id="__codelineno-110-12" name="__codelineno-110-12" href="#__codelineno-110-12"></a>
<a id="__codelineno-110-13" name="__codelineno-110-13" href="#__codelineno-110-13"></a>@opentelemetry/exporter-trace-otlp-proto \
<a id="__codelineno-110-14" name="__codelineno-110-14" href="#__codelineno-110-14"></a>
<a id="__codelineno-110-15" name="__codelineno-110-15" href="#__codelineno-110-15"></a>
<a id="__codelineno-110-16" name="__codelineno-110-16" href="#__codelineno-110-16"></a>
<a id="__codelineno-110-17" name="__codelineno-110-17" href="#__codelineno-110-17"></a>@opentelemetry/instrumentation \
<a id="__codelineno-110-18" name="__codelineno-110-18" href="#__codelineno-110-18"></a>
<a id="__codelineno-110-19" name="__codelineno-110-19" href="#__codelineno-110-19"></a>
<a id="__codelineno-110-20" name="__codelineno-110-20" href="#__codelineno-110-20"></a>
<a id="__codelineno-110-21" name="__codelineno-110-21" href="#__codelineno-110-21"></a>@opentelemetry/resources \
<a id="__codelineno-110-22" name="__codelineno-110-22" href="#__codelineno-110-22"></a>
<a id="__codelineno-110-23" name="__codelineno-110-23" href="#__codelineno-110-23"></a>
<a id="__codelineno-110-24" name="__codelineno-110-24" href="#__codelineno-110-24"></a>
<a id="__codelineno-110-25" name="__codelineno-110-25" href="#__codelineno-110-25"></a>@opentelemetry/sdk-metrics \
<a id="__codelineno-110-26" name="__codelineno-110-26" href="#__codelineno-110-26"></a>
<a id="__codelineno-110-27" name="__codelineno-110-27" href="#__codelineno-110-27"></a>
<a id="__codelineno-110-28" name="__codelineno-110-28" href="#__codelineno-110-28"></a>
<a id="__codelineno-110-29" name="__codelineno-110-29" href="#__codelineno-110-29"></a>@opentelemetry/sdk-trace-node \
<a id="__codelineno-110-30" name="__codelineno-110-30" href="#__codelineno-110-30"></a>
<a id="__codelineno-110-31" name="__codelineno-110-31" href="#__codelineno-110-31"></a>
<a id="__codelineno-110-32" name="__codelineno-110-32" href="#__codelineno-110-32"></a>
<a id="__codelineno-110-33" name="__codelineno-110-33" href="#__codelineno-110-33"></a>@opentelemetry/semantic-conventions
</code></pre></div>
<p>Depending on the libraries your application is using, there may be also additional instrumentation support libraries that you want to add to the dependencies. A list of support libraries can be found <a href="https://www.npmjs.com/search?q=%40opentelemetry%2Finstrumentation">here√Ø¬ª¬ø</a>. Common examples would be <a href="https://www.npmjs.com/package/@opentelemetry/instrumentation-http">@opentelemetry/instrumentation-http√Ø¬ª¬ø</a> and <a href="https://www.npmjs.com/package/@opentelemetry/instrumentation-net">@opentelemetry/instrumentation-net√Ø¬ª¬ø</a> for the HTTP and network libraries.
2. Create a file named <code>otel.js</code> in your application directory and save the following content.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a>const opentelemetry = require(&quot;@opentelemetry/api&quot;);
<a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a>
<a id="__codelineno-111-3" name="__codelineno-111-3" href="#__codelineno-111-3"></a>
<a id="__codelineno-111-4" name="__codelineno-111-4" href="#__codelineno-111-4"></a>
<a id="__codelineno-111-5" name="__codelineno-111-5" href="#__codelineno-111-5"></a>const { resourceFromAttributes, emptyResource, defaultResource } = require(&quot;@opentelemetry/resources&quot;);
<a id="__codelineno-111-6" name="__codelineno-111-6" href="#__codelineno-111-6"></a>
<a id="__codelineno-111-7" name="__codelineno-111-7" href="#__codelineno-111-7"></a>
<a id="__codelineno-111-8" name="__codelineno-111-8" href="#__codelineno-111-8"></a>
<a id="__codelineno-111-9" name="__codelineno-111-9" href="#__codelineno-111-9"></a>const { ATTR_SERVICE_NAME, ATTR_SERVICE_VERSION } = require(&quot;@opentelemetry/semantic-conventions&quot;);
<a id="__codelineno-111-10" name="__codelineno-111-10" href="#__codelineno-111-10"></a>
<a id="__codelineno-111-11" name="__codelineno-111-11" href="#__codelineno-111-11"></a>
<a id="__codelineno-111-12" name="__codelineno-111-12" href="#__codelineno-111-12"></a>
<a id="__codelineno-111-13" name="__codelineno-111-13" href="#__codelineno-111-13"></a>const { NodeTracerProvider } = require(&quot;@opentelemetry/sdk-trace-node&quot;);
<a id="__codelineno-111-14" name="__codelineno-111-14" href="#__codelineno-111-14"></a>
<a id="__codelineno-111-15" name="__codelineno-111-15" href="#__codelineno-111-15"></a>
<a id="__codelineno-111-16" name="__codelineno-111-16" href="#__codelineno-111-16"></a>
<a id="__codelineno-111-17" name="__codelineno-111-17" href="#__codelineno-111-17"></a>const { registerInstrumentations } = require(&quot;@opentelemetry/instrumentation&quot;);
<a id="__codelineno-111-18" name="__codelineno-111-18" href="#__codelineno-111-18"></a>
<a id="__codelineno-111-19" name="__codelineno-111-19" href="#__codelineno-111-19"></a>
<a id="__codelineno-111-20" name="__codelineno-111-20" href="#__codelineno-111-20"></a>
<a id="__codelineno-111-21" name="__codelineno-111-21" href="#__codelineno-111-21"></a>const { BatchSpanProcessor } = require(&quot;@opentelemetry/sdk-trace-base&quot;);
<a id="__codelineno-111-22" name="__codelineno-111-22" href="#__codelineno-111-22"></a>
<a id="__codelineno-111-23" name="__codelineno-111-23" href="#__codelineno-111-23"></a>
<a id="__codelineno-111-24" name="__codelineno-111-24" href="#__codelineno-111-24"></a>
<a id="__codelineno-111-25" name="__codelineno-111-25" href="#__codelineno-111-25"></a>const { OTLPTraceExporter } = require(&quot;@opentelemetry/exporter-trace-otlp-proto&quot;);
<a id="__codelineno-111-26" name="__codelineno-111-26" href="#__codelineno-111-26"></a>
<a id="__codelineno-111-27" name="__codelineno-111-27" href="#__codelineno-111-27"></a>
<a id="__codelineno-111-28" name="__codelineno-111-28" href="#__codelineno-111-28"></a>
<a id="__codelineno-111-29" name="__codelineno-111-29" href="#__codelineno-111-29"></a>const { OTLPMetricExporter } = require(&quot;@opentelemetry/exporter-metrics-otlp-proto&quot;);
<a id="__codelineno-111-30" name="__codelineno-111-30" href="#__codelineno-111-30"></a>
<a id="__codelineno-111-31" name="__codelineno-111-31" href="#__codelineno-111-31"></a>
<a id="__codelineno-111-32" name="__codelineno-111-32" href="#__codelineno-111-32"></a>
<a id="__codelineno-111-33" name="__codelineno-111-33" href="#__codelineno-111-33"></a>const { MeterProvider, PeriodicExportingMetricReader, AggregationTemporality } = require(&#39;@opentelemetry/sdk-metrics&#39;);
<a id="__codelineno-111-34" name="__codelineno-111-34" href="#__codelineno-111-34"></a>
<a id="__codelineno-111-35" name="__codelineno-111-35" href="#__codelineno-111-35"></a>
<a id="__codelineno-111-36" name="__codelineno-111-36" href="#__codelineno-111-36"></a>
<a id="__codelineno-111-37" name="__codelineno-111-37" href="#__codelineno-111-37"></a>const DT_API_URL = &#39;&#39;; // TODO: Provide your SaaS/Managed URL here
<a id="__codelineno-111-38" name="__codelineno-111-38" href="#__codelineno-111-38"></a>
<a id="__codelineno-111-39" name="__codelineno-111-39" href="#__codelineno-111-39"></a>
<a id="__codelineno-111-40" name="__codelineno-111-40" href="#__codelineno-111-40"></a>
<a id="__codelineno-111-41" name="__codelineno-111-41" href="#__codelineno-111-41"></a>const DT_API_TOKEN = &#39;&#39;; // TODO: Provide the OpenTelemetry-scoped access token here
<a id="__codelineno-111-42" name="__codelineno-111-42" href="#__codelineno-111-42"></a>
<a id="__codelineno-111-43" name="__codelineno-111-43" href="#__codelineno-111-43"></a>
<a id="__codelineno-111-44" name="__codelineno-111-44" href="#__codelineno-111-44"></a>
<a id="__codelineno-111-45" name="__codelineno-111-45" href="#__codelineno-111-45"></a>// ===== GENERAL SETUP =====
<a id="__codelineno-111-46" name="__codelineno-111-46" href="#__codelineno-111-46"></a>
<a id="__codelineno-111-47" name="__codelineno-111-47" href="#__codelineno-111-47"></a>
<a id="__codelineno-111-48" name="__codelineno-111-48" href="#__codelineno-111-48"></a>
<a id="__codelineno-111-49" name="__codelineno-111-49" href="#__codelineno-111-49"></a>registerInstrumentations({
<a id="__codelineno-111-50" name="__codelineno-111-50" href="#__codelineno-111-50"></a>
<a id="__codelineno-111-51" name="__codelineno-111-51" href="#__codelineno-111-51"></a>
<a id="__codelineno-111-52" name="__codelineno-111-52" href="#__codelineno-111-52"></a>
<a id="__codelineno-111-53" name="__codelineno-111-53" href="#__codelineno-111-53"></a>instrumentations: [ /* TODO Register your auto-instrumentation libraries here */ ],
<a id="__codelineno-111-54" name="__codelineno-111-54" href="#__codelineno-111-54"></a>
<a id="__codelineno-111-55" name="__codelineno-111-55" href="#__codelineno-111-55"></a>
<a id="__codelineno-111-56" name="__codelineno-111-56" href="#__codelineno-111-56"></a>
<a id="__codelineno-111-57" name="__codelineno-111-57" href="#__codelineno-111-57"></a>});
<a id="__codelineno-111-58" name="__codelineno-111-58" href="#__codelineno-111-58"></a>
<a id="__codelineno-111-59" name="__codelineno-111-59" href="#__codelineno-111-59"></a>
<a id="__codelineno-111-60" name="__codelineno-111-60" href="#__codelineno-111-60"></a>
<a id="__codelineno-111-61" name="__codelineno-111-61" href="#__codelineno-111-61"></a>const fs = require(&quot;fs&quot;);
<a id="__codelineno-111-62" name="__codelineno-111-62" href="#__codelineno-111-62"></a>
<a id="__codelineno-111-63" name="__codelineno-111-63" href="#__codelineno-111-63"></a>
<a id="__codelineno-111-64" name="__codelineno-111-64" href="#__codelineno-111-64"></a>
<a id="__codelineno-111-65" name="__codelineno-111-65" href="#__codelineno-111-65"></a>let dtmetadata = emptyResource();
<a id="__codelineno-111-66" name="__codelineno-111-66" href="#__codelineno-111-66"></a>
<a id="__codelineno-111-67" name="__codelineno-111-67" href="#__codelineno-111-67"></a>
<a id="__codelineno-111-68" name="__codelineno-111-68" href="#__codelineno-111-68"></a>
<a id="__codelineno-111-69" name="__codelineno-111-69" href="#__codelineno-111-69"></a>for (let name of [&#39;dt_metadata_e617c525669e072eebe3d0f08212e8f2.json&#39;, &#39;/var/lib/dynatrace/enrichment/dt_metadata.json&#39;, &#39;/var/lib/dynatrace/enrichment/dt_host_metadata.json&#39;]) {
<a id="__codelineno-111-70" name="__codelineno-111-70" href="#__codelineno-111-70"></a>
<a id="__codelineno-111-71" name="__codelineno-111-71" href="#__codelineno-111-71"></a>
<a id="__codelineno-111-72" name="__codelineno-111-72" href="#__codelineno-111-72"></a>
<a id="__codelineno-111-73" name="__codelineno-111-73" href="#__codelineno-111-73"></a>try {
<a id="__codelineno-111-74" name="__codelineno-111-74" href="#__codelineno-111-74"></a>
<a id="__codelineno-111-75" name="__codelineno-111-75" href="#__codelineno-111-75"></a>
<a id="__codelineno-111-76" name="__codelineno-111-76" href="#__codelineno-111-76"></a>
<a id="__codelineno-111-77" name="__codelineno-111-77" href="#__codelineno-111-77"></a>dtmetadata = dtmetadata.merge(
<a id="__codelineno-111-78" name="__codelineno-111-78" href="#__codelineno-111-78"></a>
<a id="__codelineno-111-79" name="__codelineno-111-79" href="#__codelineno-111-79"></a>
<a id="__codelineno-111-80" name="__codelineno-111-80" href="#__codelineno-111-80"></a>
<a id="__codelineno-111-81" name="__codelineno-111-81" href="#__codelineno-111-81"></a>resourceFromAttributes(JSON.parse(fs.readFileSync(name.startsWith(&quot;/var&quot;) ?
<a id="__codelineno-111-82" name="__codelineno-111-82" href="#__codelineno-111-82"></a>
<a id="__codelineno-111-83" name="__codelineno-111-83" href="#__codelineno-111-83"></a>
<a id="__codelineno-111-84" name="__codelineno-111-84" href="#__codelineno-111-84"></a>
<a id="__codelineno-111-85" name="__codelineno-111-85" href="#__codelineno-111-85"></a>name : fs.readFileSync(name).toString(&#39;utf-8&#39;).trim()).toString(&#39;utf-8&#39;))));
<a id="__codelineno-111-86" name="__codelineno-111-86" href="#__codelineno-111-86"></a>
<a id="__codelineno-111-87" name="__codelineno-111-87" href="#__codelineno-111-87"></a>
<a id="__codelineno-111-88" name="__codelineno-111-88" href="#__codelineno-111-88"></a>
<a id="__codelineno-111-89" name="__codelineno-111-89" href="#__codelineno-111-89"></a>break
<a id="__codelineno-111-90" name="__codelineno-111-90" href="#__codelineno-111-90"></a>
<a id="__codelineno-111-91" name="__codelineno-111-91" href="#__codelineno-111-91"></a>
<a id="__codelineno-111-92" name="__codelineno-111-92" href="#__codelineno-111-92"></a>
<a id="__codelineno-111-93" name="__codelineno-111-93" href="#__codelineno-111-93"></a>} catch { }
<a id="__codelineno-111-94" name="__codelineno-111-94" href="#__codelineno-111-94"></a>
<a id="__codelineno-111-95" name="__codelineno-111-95" href="#__codelineno-111-95"></a>
<a id="__codelineno-111-96" name="__codelineno-111-96" href="#__codelineno-111-96"></a>
<a id="__codelineno-111-97" name="__codelineno-111-97" href="#__codelineno-111-97"></a>}
<a id="__codelineno-111-98" name="__codelineno-111-98" href="#__codelineno-111-98"></a>
<a id="__codelineno-111-99" name="__codelineno-111-99" href="#__codelineno-111-99"></a>
<a id="__codelineno-111-100" name="__codelineno-111-100" href="#__codelineno-111-100"></a>
<a id="__codelineno-111-101" name="__codelineno-111-101" href="#__codelineno-111-101"></a>const resource =
<a id="__codelineno-111-102" name="__codelineno-111-102" href="#__codelineno-111-102"></a>
<a id="__codelineno-111-103" name="__codelineno-111-103" href="#__codelineno-111-103"></a>
<a id="__codelineno-111-104" name="__codelineno-111-104" href="#__codelineno-111-104"></a>
<a id="__codelineno-111-105" name="__codelineno-111-105" href="#__codelineno-111-105"></a>defaultResource().merge(
<a id="__codelineno-111-106" name="__codelineno-111-106" href="#__codelineno-111-106"></a>
<a id="__codelineno-111-107" name="__codelineno-111-107" href="#__codelineno-111-107"></a>
<a id="__codelineno-111-108" name="__codelineno-111-108" href="#__codelineno-111-108"></a>
<a id="__codelineno-111-109" name="__codelineno-111-109" href="#__codelineno-111-109"></a>resourceFromAttributes({
<a id="__codelineno-111-110" name="__codelineno-111-110" href="#__codelineno-111-110"></a>
<a id="__codelineno-111-111" name="__codelineno-111-111" href="#__codelineno-111-111"></a>
<a id="__codelineno-111-112" name="__codelineno-111-112" href="#__codelineno-111-112"></a>
<a id="__codelineno-111-113" name="__codelineno-111-113" href="#__codelineno-111-113"></a>[ATTR_SERVICE_NAME]: &quot;js-agent&quot;,
<a id="__codelineno-111-114" name="__codelineno-111-114" href="#__codelineno-111-114"></a>
<a id="__codelineno-111-115" name="__codelineno-111-115" href="#__codelineno-111-115"></a>
<a id="__codelineno-111-116" name="__codelineno-111-116" href="#__codelineno-111-116"></a>
<a id="__codelineno-111-117" name="__codelineno-111-117" href="#__codelineno-111-117"></a>[ATTR_SERVICE_VERSION]: &quot;0.1.0&quot;,
<a id="__codelineno-111-118" name="__codelineno-111-118" href="#__codelineno-111-118"></a>
<a id="__codelineno-111-119" name="__codelineno-111-119" href="#__codelineno-111-119"></a>
<a id="__codelineno-111-120" name="__codelineno-111-120" href="#__codelineno-111-120"></a>
<a id="__codelineno-111-121" name="__codelineno-111-121" href="#__codelineno-111-121"></a>})
<a id="__codelineno-111-122" name="__codelineno-111-122" href="#__codelineno-111-122"></a>
<a id="__codelineno-111-123" name="__codelineno-111-123" href="#__codelineno-111-123"></a>
<a id="__codelineno-111-124" name="__codelineno-111-124" href="#__codelineno-111-124"></a>
<a id="__codelineno-111-125" name="__codelineno-111-125" href="#__codelineno-111-125"></a>).merge(dtmetadata);
<a id="__codelineno-111-126" name="__codelineno-111-126" href="#__codelineno-111-126"></a>
<a id="__codelineno-111-127" name="__codelineno-111-127" href="#__codelineno-111-127"></a>
<a id="__codelineno-111-128" name="__codelineno-111-128" href="#__codelineno-111-128"></a>
<a id="__codelineno-111-129" name="__codelineno-111-129" href="#__codelineno-111-129"></a>// ===== TRACING SETUP =====
<a id="__codelineno-111-130" name="__codelineno-111-130" href="#__codelineno-111-130"></a>
<a id="__codelineno-111-131" name="__codelineno-111-131" href="#__codelineno-111-131"></a>
<a id="__codelineno-111-132" name="__codelineno-111-132" href="#__codelineno-111-132"></a>
<a id="__codelineno-111-133" name="__codelineno-111-133" href="#__codelineno-111-133"></a>const exporter = new OTLPTraceExporter({
<a id="__codelineno-111-134" name="__codelineno-111-134" href="#__codelineno-111-134"></a>
<a id="__codelineno-111-135" name="__codelineno-111-135" href="#__codelineno-111-135"></a>
<a id="__codelineno-111-136" name="__codelineno-111-136" href="#__codelineno-111-136"></a>
<a id="__codelineno-111-137" name="__codelineno-111-137" href="#__codelineno-111-137"></a>url: DT_API_URL + &#39;/v1/traces&#39;,
<a id="__codelineno-111-138" name="__codelineno-111-138" href="#__codelineno-111-138"></a>
<a id="__codelineno-111-139" name="__codelineno-111-139" href="#__codelineno-111-139"></a>
<a id="__codelineno-111-140" name="__codelineno-111-140" href="#__codelineno-111-140"></a>
<a id="__codelineno-111-141" name="__codelineno-111-141" href="#__codelineno-111-141"></a>headers: { Authorization: &#39;Api-Token &#39; + DT_API_TOKEN }
<a id="__codelineno-111-142" name="__codelineno-111-142" href="#__codelineno-111-142"></a>
<a id="__codelineno-111-143" name="__codelineno-111-143" href="#__codelineno-111-143"></a>
<a id="__codelineno-111-144" name="__codelineno-111-144" href="#__codelineno-111-144"></a>
<a id="__codelineno-111-145" name="__codelineno-111-145" href="#__codelineno-111-145"></a>});
<a id="__codelineno-111-146" name="__codelineno-111-146" href="#__codelineno-111-146"></a>
<a id="__codelineno-111-147" name="__codelineno-111-147" href="#__codelineno-111-147"></a>
<a id="__codelineno-111-148" name="__codelineno-111-148" href="#__codelineno-111-148"></a>
<a id="__codelineno-111-149" name="__codelineno-111-149" href="#__codelineno-111-149"></a>const processor = new BatchSpanProcessor(exporter);
<a id="__codelineno-111-150" name="__codelineno-111-150" href="#__codelineno-111-150"></a>
<a id="__codelineno-111-151" name="__codelineno-111-151" href="#__codelineno-111-151"></a>
<a id="__codelineno-111-152" name="__codelineno-111-152" href="#__codelineno-111-152"></a>
<a id="__codelineno-111-153" name="__codelineno-111-153" href="#__codelineno-111-153"></a>const provider = new NodeTracerProvider({
<a id="__codelineno-111-154" name="__codelineno-111-154" href="#__codelineno-111-154"></a>
<a id="__codelineno-111-155" name="__codelineno-111-155" href="#__codelineno-111-155"></a>
<a id="__codelineno-111-156" name="__codelineno-111-156" href="#__codelineno-111-156"></a>
<a id="__codelineno-111-157" name="__codelineno-111-157" href="#__codelineno-111-157"></a>resource: resource,
<a id="__codelineno-111-158" name="__codelineno-111-158" href="#__codelineno-111-158"></a>
<a id="__codelineno-111-159" name="__codelineno-111-159" href="#__codelineno-111-159"></a>
<a id="__codelineno-111-160" name="__codelineno-111-160" href="#__codelineno-111-160"></a>
<a id="__codelineno-111-161" name="__codelineno-111-161" href="#__codelineno-111-161"></a>spanProcessors: [ processor ]
<a id="__codelineno-111-162" name="__codelineno-111-162" href="#__codelineno-111-162"></a>
<a id="__codelineno-111-163" name="__codelineno-111-163" href="#__codelineno-111-163"></a>
<a id="__codelineno-111-164" name="__codelineno-111-164" href="#__codelineno-111-164"></a>
<a id="__codelineno-111-165" name="__codelineno-111-165" href="#__codelineno-111-165"></a>});
<a id="__codelineno-111-166" name="__codelineno-111-166" href="#__codelineno-111-166"></a>
<a id="__codelineno-111-167" name="__codelineno-111-167" href="#__codelineno-111-167"></a>
<a id="__codelineno-111-168" name="__codelineno-111-168" href="#__codelineno-111-168"></a>
<a id="__codelineno-111-169" name="__codelineno-111-169" href="#__codelineno-111-169"></a>provider.register();
<a id="__codelineno-111-170" name="__codelineno-111-170" href="#__codelineno-111-170"></a>
<a id="__codelineno-111-171" name="__codelineno-111-171" href="#__codelineno-111-171"></a>
<a id="__codelineno-111-172" name="__codelineno-111-172" href="#__codelineno-111-172"></a>
<a id="__codelineno-111-173" name="__codelineno-111-173" href="#__codelineno-111-173"></a>// ===== METRIC SETUP =====
<a id="__codelineno-111-174" name="__codelineno-111-174" href="#__codelineno-111-174"></a>
<a id="__codelineno-111-175" name="__codelineno-111-175" href="#__codelineno-111-175"></a>
<a id="__codelineno-111-176" name="__codelineno-111-176" href="#__codelineno-111-176"></a>
<a id="__codelineno-111-177" name="__codelineno-111-177" href="#__codelineno-111-177"></a>const metricExporter = new OTLPMetricExporter({
<a id="__codelineno-111-178" name="__codelineno-111-178" href="#__codelineno-111-178"></a>
<a id="__codelineno-111-179" name="__codelineno-111-179" href="#__codelineno-111-179"></a>
<a id="__codelineno-111-180" name="__codelineno-111-180" href="#__codelineno-111-180"></a>
<a id="__codelineno-111-181" name="__codelineno-111-181" href="#__codelineno-111-181"></a>url: DT_API_URL + &#39;/v1/metrics&#39;,
<a id="__codelineno-111-182" name="__codelineno-111-182" href="#__codelineno-111-182"></a>
<a id="__codelineno-111-183" name="__codelineno-111-183" href="#__codelineno-111-183"></a>
<a id="__codelineno-111-184" name="__codelineno-111-184" href="#__codelineno-111-184"></a>
<a id="__codelineno-111-185" name="__codelineno-111-185" href="#__codelineno-111-185"></a>headers: { Authorization: &#39;Api-Token &#39; + DT_API_TOKEN },
<a id="__codelineno-111-186" name="__codelineno-111-186" href="#__codelineno-111-186"></a>
<a id="__codelineno-111-187" name="__codelineno-111-187" href="#__codelineno-111-187"></a>
<a id="__codelineno-111-188" name="__codelineno-111-188" href="#__codelineno-111-188"></a>
<a id="__codelineno-111-189" name="__codelineno-111-189" href="#__codelineno-111-189"></a>temporalityPreference: AggregationTemporality.DELTA
<a id="__codelineno-111-190" name="__codelineno-111-190" href="#__codelineno-111-190"></a>
<a id="__codelineno-111-191" name="__codelineno-111-191" href="#__codelineno-111-191"></a>
<a id="__codelineno-111-192" name="__codelineno-111-192" href="#__codelineno-111-192"></a>
<a id="__codelineno-111-193" name="__codelineno-111-193" href="#__codelineno-111-193"></a>});
<a id="__codelineno-111-194" name="__codelineno-111-194" href="#__codelineno-111-194"></a>
<a id="__codelineno-111-195" name="__codelineno-111-195" href="#__codelineno-111-195"></a>
<a id="__codelineno-111-196" name="__codelineno-111-196" href="#__codelineno-111-196"></a>
<a id="__codelineno-111-197" name="__codelineno-111-197" href="#__codelineno-111-197"></a>const metricReader = new PeriodicExportingMetricReader({
<a id="__codelineno-111-198" name="__codelineno-111-198" href="#__codelineno-111-198"></a>
<a id="__codelineno-111-199" name="__codelineno-111-199" href="#__codelineno-111-199"></a>
<a id="__codelineno-111-200" name="__codelineno-111-200" href="#__codelineno-111-200"></a>
<a id="__codelineno-111-201" name="__codelineno-111-201" href="#__codelineno-111-201"></a>exporter: metricExporter,
<a id="__codelineno-111-202" name="__codelineno-111-202" href="#__codelineno-111-202"></a>
<a id="__codelineno-111-203" name="__codelineno-111-203" href="#__codelineno-111-203"></a>
<a id="__codelineno-111-204" name="__codelineno-111-204" href="#__codelineno-111-204"></a>
<a id="__codelineno-111-205" name="__codelineno-111-205" href="#__codelineno-111-205"></a>exportIntervalMillis: 3000
<a id="__codelineno-111-206" name="__codelineno-111-206" href="#__codelineno-111-206"></a>
<a id="__codelineno-111-207" name="__codelineno-111-207" href="#__codelineno-111-207"></a>
<a id="__codelineno-111-208" name="__codelineno-111-208" href="#__codelineno-111-208"></a>
<a id="__codelineno-111-209" name="__codelineno-111-209" href="#__codelineno-111-209"></a>});
<a id="__codelineno-111-210" name="__codelineno-111-210" href="#__codelineno-111-210"></a>
<a id="__codelineno-111-211" name="__codelineno-111-211" href="#__codelineno-111-211"></a>
<a id="__codelineno-111-212" name="__codelineno-111-212" href="#__codelineno-111-212"></a>
<a id="__codelineno-111-213" name="__codelineno-111-213" href="#__codelineno-111-213"></a>const meterProvider = new MeterProvider({
<a id="__codelineno-111-214" name="__codelineno-111-214" href="#__codelineno-111-214"></a>
<a id="__codelineno-111-215" name="__codelineno-111-215" href="#__codelineno-111-215"></a>
<a id="__codelineno-111-216" name="__codelineno-111-216" href="#__codelineno-111-216"></a>
<a id="__codelineno-111-217" name="__codelineno-111-217" href="#__codelineno-111-217"></a>resource: resource,
<a id="__codelineno-111-218" name="__codelineno-111-218" href="#__codelineno-111-218"></a>
<a id="__codelineno-111-219" name="__codelineno-111-219" href="#__codelineno-111-219"></a>
<a id="__codelineno-111-220" name="__codelineno-111-220" href="#__codelineno-111-220"></a>
<a id="__codelineno-111-221" name="__codelineno-111-221" href="#__codelineno-111-221"></a>readers: [ metricReader ]
<a id="__codelineno-111-222" name="__codelineno-111-222" href="#__codelineno-111-222"></a>
<a id="__codelineno-111-223" name="__codelineno-111-223" href="#__codelineno-111-223"></a>
<a id="__codelineno-111-224" name="__codelineno-111-224" href="#__codelineno-111-224"></a>
<a id="__codelineno-111-225" name="__codelineno-111-225" href="#__codelineno-111-225"></a>});
<a id="__codelineno-111-226" name="__codelineno-111-226" href="#__codelineno-111-226"></a>
<a id="__codelineno-111-227" name="__codelineno-111-227" href="#__codelineno-111-227"></a>
<a id="__codelineno-111-228" name="__codelineno-111-228" href="#__codelineno-111-228"></a>
<a id="__codelineno-111-229" name="__codelineno-111-229" href="#__codelineno-111-229"></a>// Set this MeterProvider to be global to the app being instrumented.
<a id="__codelineno-111-230" name="__codelineno-111-230" href="#__codelineno-111-230"></a>
<a id="__codelineno-111-231" name="__codelineno-111-231" href="#__codelineno-111-231"></a>
<a id="__codelineno-111-232" name="__codelineno-111-232" href="#__codelineno-111-232"></a>
<a id="__codelineno-111-233" name="__codelineno-111-233" href="#__codelineno-111-233"></a>opentelemetry.metrics.setGlobalMeterProvider(meterProvider);
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.
3. If you export using OTLP, configure the two variables <code>DT_API_URL</code> and <code>DT_API_TOKEN</code> in <code>otel.js</code> with their <a href="#dynatrace-docs--otlp-export">respective values</a>.</p>
<p>Value injection</p>
<p>Instead of hardcoding the URL and token, you might also consider reading them from storage specific to your application framework (for example, environment variables or framework secrets).
4. Adjust the Node.js call for your application to include the <a href="https://nodejs.org/api/cli.html#-r---require-module">√¢¬Ä¬ìrequire√Ø¬ª¬ø</a> command line parameter and point it towards <code>otel.js</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a>node --require ./otel.js ./myapplication.js
</code></pre></div>
<h2 id="step-3-manually-instrument-your-application">Step 3 Manually instrument your application<a class="headerlink" href="#step-3-manually-instrument-your-application" title="Permanent link">&para;</a></h2>
<h3 id="add-tracing_3">Add tracing<a class="headerlink" href="#add-tracing_3" title="Permanent link">&para;</a></h3>
<ol>
<li>Obtain a reference to the OpenTelemetry API.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a>const opentelemetry = require(&quot;@opentelemetry/api&quot;);
</code></pre></div>
2. Now we can get a tracer object.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a>const tracer = opentelemetry.trace.getTracer(&#39;my-tracer&#39;);
</code></pre></div>
3. With <code>tracer</code>, we can use a span builder to create and start new spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a>const span = tracer.startSpan(&#39;Call to /myendpoint&#39;);
<a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a>
<a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a>
<a id="__codelineno-115-4" name="__codelineno-115-4" href="#__codelineno-115-4"></a>
<a id="__codelineno-115-5" name="__codelineno-115-5" href="#__codelineno-115-5"></a>span.setAttribute(&#39;http.method&#39;, &#39;GET&#39;);
<a id="__codelineno-115-6" name="__codelineno-115-6" href="#__codelineno-115-6"></a>
<a id="__codelineno-115-7" name="__codelineno-115-7" href="#__codelineno-115-7"></a>
<a id="__codelineno-115-8" name="__codelineno-115-8" href="#__codelineno-115-8"></a>
<a id="__codelineno-115-9" name="__codelineno-115-9" href="#__codelineno-115-9"></a>span.setAttribute(&#39;net.protocol.version&#39;,&#39;1.1&#39;);
<a id="__codelineno-115-10" name="__codelineno-115-10" href="#__codelineno-115-10"></a>
<a id="__codelineno-115-11" name="__codelineno-115-11" href="#__codelineno-115-11"></a>
<a id="__codelineno-115-12" name="__codelineno-115-12" href="#__codelineno-115-12"></a>
<a id="__codelineno-115-13" name="__codelineno-115-13" href="#__codelineno-115-13"></a>// TODO your code goes here
<a id="__codelineno-115-14" name="__codelineno-115-14" href="#__codelineno-115-14"></a>
<a id="__codelineno-115-15" name="__codelineno-115-15" href="#__codelineno-115-15"></a>
<a id="__codelineno-115-16" name="__codelineno-115-16" href="#__codelineno-115-16"></a>
<a id="__codelineno-115-17" name="__codelineno-115-17" href="#__codelineno-115-17"></a>span.end();
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new span and name it "Call to /myendpoint"</li>
<li>Add two attributes, following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
<li>Add a <code>TODO</code> in place of the eventual business logic</li>
<li>Call the span's <code>end()</code> method to complete the span</li>
</ul>
<h3 id="collect-metrics_3">Collect metrics<a class="headerlink" href="#collect-metrics_3" title="Permanent link">&para;</a></h3>
<ol>
<li>As with tracing, we first need to get a reference to the OpenTelemetry API.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a>const opentelemetry = require(&quot;@opentelemetry/api&quot;);
</code></pre></div>
2. Next, we need to obtain a meter object.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a>const meter = opentelemetry.metrics.getMeter(&#39;my-meter&#39;);
</code></pre></div>
3. With <code>meter</code>, we can now create individual instruments, such as a counter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a>const requestCounter = meter.createCounter(&#39;request_counter&#39;, {
<a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a>
<a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a>
<a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a>
<a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a>description: &#39;The number of requests we received&#39;
<a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a>
<a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a>
<a id="__codelineno-118-8" name="__codelineno-118-8" href="#__codelineno-118-8"></a>
<a id="__codelineno-118-9" name="__codelineno-118-9" href="#__codelineno-118-9"></a>});
</code></pre></div>
4. We can now invoke the <code>add()</code> method of <code>requestCounter</code> to record new values with the counter and save additional attributes (for example, <code>action.type</code>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a>requestCounter.add(1, { &#39;action.type&#39;: &#39;create&#39; });
</code></pre></div>
<p>You can also create an asynchronous gauge, which requires a callback function that will be invoked by OpenTelemetry upon data collection.</p>
<p>The following example records on each invocation the available memory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a>const gauge = meter.createObservableGauge(&#39;free_memory&#39;);
<a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>
<a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>
<a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a>
<a id="__codelineno-120-5" name="__codelineno-120-5" href="#__codelineno-120-5"></a>gauge.addCallback(r =&gt; {
<a id="__codelineno-120-6" name="__codelineno-120-6" href="#__codelineno-120-6"></a>
<a id="__codelineno-120-7" name="__codelineno-120-7" href="#__codelineno-120-7"></a>
<a id="__codelineno-120-8" name="__codelineno-120-8" href="#__codelineno-120-8"></a>
<a id="__codelineno-120-9" name="__codelineno-120-9" href="#__codelineno-120-9"></a>r.observe(require(&#39;os&#39;).freemem());
<a id="__codelineno-120-10" name="__codelineno-120-10" href="#__codelineno-120-10"></a>
<a id="__codelineno-120-11" name="__codelineno-120-11" href="#__codelineno-120-11"></a>
<a id="__codelineno-120-12" name="__codelineno-120-12" href="#__codelineno-120-12"></a>
<a id="__codelineno-120-13" name="__codelineno-120-13" href="#__codelineno-120-13"></a>});
</code></pre></div>
<h3 id="connect-logs_3">Connect logs<a class="headerlink" href="#connect-logs_3" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Node.js does not have stable support for logs yet.</p>
<p>Depending on the status of the OpenTelemetry SDK, the pre-release version may nonetheless already allow the ingestion of your logs.</p>
<h3 id="ensure-context-propagation-optional_3">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_3" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<p>If you are using automatic instrumentation and your networking libraries are covered by automatic instrumentation, this will be automatically taken care of by the instrumentation libraries. Otherwise, your code needs to take this into account.</p>
<h4 id="extracting-the-context-when-receiving-a-request_3">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_3" title="Permanent link">&para;</a></h4>
<p>The following examples assume that we received a network call via <a href="https://nodejs.org/api/http.html#class-httpclientrequest"><code>ClientRequest</code>√Ø¬ª¬ø</a> and uses <code>extract()</code> to create the context object <code>remoteCtx</code>, based on the context information received from the HTTP headers. This allows us to continue the previous trace with our spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a>//Extract context from incoming headers
<a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a>
<a id="__codelineno-121-3" name="__codelineno-121-3" href="#__codelineno-121-3"></a>
<a id="__codelineno-121-4" name="__codelineno-121-4" href="#__codelineno-121-4"></a>
<a id="__codelineno-121-5" name="__codelineno-121-5" href="#__codelineno-121-5"></a>const { SpanKind, ROOT_CONTEXT } = require(&quot;@opentelemetry/api&quot;);
<a id="__codelineno-121-6" name="__codelineno-121-6" href="#__codelineno-121-6"></a>
<a id="__codelineno-121-7" name="__codelineno-121-7" href="#__codelineno-121-7"></a>
<a id="__codelineno-121-8" name="__codelineno-121-8" href="#__codelineno-121-8"></a>
<a id="__codelineno-121-9" name="__codelineno-121-9" href="#__codelineno-121-9"></a>const remoteCtx = opentelemetry.propagation.extract(ROOT_CONTEXT, req.headers);
<a id="__codelineno-121-10" name="__codelineno-121-10" href="#__codelineno-121-10"></a>
<a id="__codelineno-121-11" name="__codelineno-121-11" href="#__codelineno-121-11"></a>
<a id="__codelineno-121-12" name="__codelineno-121-12" href="#__codelineno-121-12"></a>
<a id="__codelineno-121-13" name="__codelineno-121-13" href="#__codelineno-121-13"></a>const serverSpan = opentelemetry.trace.getTracer(&#39;my-server-tracer&#39;)
<a id="__codelineno-121-14" name="__codelineno-121-14" href="#__codelineno-121-14"></a>
<a id="__codelineno-121-15" name="__codelineno-121-15" href="#__codelineno-121-15"></a>
<a id="__codelineno-121-16" name="__codelineno-121-16" href="#__codelineno-121-16"></a>
<a id="__codelineno-121-17" name="__codelineno-121-17" href="#__codelineno-121-17"></a>.startSpan(&#39;my-server-span&#39;, {
<a id="__codelineno-121-18" name="__codelineno-121-18" href="#__codelineno-121-18"></a>
<a id="__codelineno-121-19" name="__codelineno-121-19" href="#__codelineno-121-19"></a>
<a id="__codelineno-121-20" name="__codelineno-121-20" href="#__codelineno-121-20"></a>
<a id="__codelineno-121-21" name="__codelineno-121-21" href="#__codelineno-121-21"></a>kind: SpanKind.SERVER,
<a id="__codelineno-121-22" name="__codelineno-121-22" href="#__codelineno-121-22"></a>
<a id="__codelineno-121-23" name="__codelineno-121-23" href="#__codelineno-121-23"></a>
<a id="__codelineno-121-24" name="__codelineno-121-24" href="#__codelineno-121-24"></a>
<a id="__codelineno-121-25" name="__codelineno-121-25" href="#__codelineno-121-25"></a>attributes: {
<a id="__codelineno-121-26" name="__codelineno-121-26" href="#__codelineno-121-26"></a>
<a id="__codelineno-121-27" name="__codelineno-121-27" href="#__codelineno-121-27"></a>
<a id="__codelineno-121-28" name="__codelineno-121-28" href="#__codelineno-121-28"></a>
<a id="__codelineno-121-29" name="__codelineno-121-29" href="#__codelineno-121-29"></a>&#39;my-server-key-1&#39;: &#39;my-server-value-1&#39;
<a id="__codelineno-121-30" name="__codelineno-121-30" href="#__codelineno-121-30"></a>
<a id="__codelineno-121-31" name="__codelineno-121-31" href="#__codelineno-121-31"></a>
<a id="__codelineno-121-32" name="__codelineno-121-32" href="#__codelineno-121-32"></a>
<a id="__codelineno-121-33" name="__codelineno-121-33" href="#__codelineno-121-33"></a>},
<a id="__codelineno-121-34" name="__codelineno-121-34" href="#__codelineno-121-34"></a>
<a id="__codelineno-121-35" name="__codelineno-121-35" href="#__codelineno-121-35"></a>
<a id="__codelineno-121-36" name="__codelineno-121-36" href="#__codelineno-121-36"></a>
<a id="__codelineno-121-37" name="__codelineno-121-37" href="#__codelineno-121-37"></a>}, remoteCtx);
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_3">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_3" title="Permanent link">&para;</a></h4>
<p>In the following example, we use the <a href="https://www.npmjs.com/package/axios">axios√Ø¬ª¬ø</a> HTTP client to send a REST request to another service and provide our existing context as part of the HTTP headers of our request.</p>
<p>To do so, we create a <code>ctx</code> object, pass it the current span, and mark it as active. Then we pass that context object and an empty <code>my_headers</code> object to <code>inject()</code> and, once the call is returned, we have the appropriate headers in <code>my_headers</code>, which we can eventually pass to our HTTP call.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a>const ctx = opentelemetry.trace.setSpan(
<a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a>
<a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a>
<a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a>
<a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a>opentelemetry.context.active(),
<a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a>
<a id="__codelineno-122-7" name="__codelineno-122-7" href="#__codelineno-122-7"></a>
<a id="__codelineno-122-8" name="__codelineno-122-8" href="#__codelineno-122-8"></a>
<a id="__codelineno-122-9" name="__codelineno-122-9" href="#__codelineno-122-9"></a>serverSpan
<a id="__codelineno-122-10" name="__codelineno-122-10" href="#__codelineno-122-10"></a>
<a id="__codelineno-122-11" name="__codelineno-122-11" href="#__codelineno-122-11"></a>
<a id="__codelineno-122-12" name="__codelineno-122-12" href="#__codelineno-122-12"></a>
<a id="__codelineno-122-13" name="__codelineno-122-13" href="#__codelineno-122-13"></a>);
<a id="__codelineno-122-14" name="__codelineno-122-14" href="#__codelineno-122-14"></a>
<a id="__codelineno-122-15" name="__codelineno-122-15" href="#__codelineno-122-15"></a>
<a id="__codelineno-122-16" name="__codelineno-122-16" href="#__codelineno-122-16"></a>
<a id="__codelineno-122-17" name="__codelineno-122-17" href="#__codelineno-122-17"></a>const my_headers = {};
<a id="__codelineno-122-18" name="__codelineno-122-18" href="#__codelineno-122-18"></a>
<a id="__codelineno-122-19" name="__codelineno-122-19" href="#__codelineno-122-19"></a>
<a id="__codelineno-122-20" name="__codelineno-122-20" href="#__codelineno-122-20"></a>
<a id="__codelineno-122-21" name="__codelineno-122-21" href="#__codelineno-122-21"></a>opentelemetry.propagation.inject(ctx, my_headers);
<a id="__codelineno-122-22" name="__codelineno-122-22" href="#__codelineno-122-22"></a>
<a id="__codelineno-122-23" name="__codelineno-122-23" href="#__codelineno-122-23"></a>
<a id="__codelineno-122-24" name="__codelineno-122-24" href="#__codelineno-122-24"></a>
<a id="__codelineno-122-25" name="__codelineno-122-25" href="#__codelineno-122-25"></a>await axios.get(URL, {headers: my_headers});
<a id="__codelineno-122-26" name="__codelineno-122-26" href="#__codelineno-122-26"></a>
<a id="__codelineno-122-27" name="__codelineno-122-27" href="#__codelineno-122-27"></a>
<a id="__codelineno-122-28" name="__codelineno-122-28" href="#__codelineno-122-28"></a>
<a id="__codelineno-122-29" name="__codelineno-122-29" href="#__codelineno-122-29"></a>serverSpan.end();
</code></pre></div>
<h2 id="step-4-configure-data-capture-to-meet-privacy-requirements-optional_2">Step 4 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-4-configure-data-capture-to-meet-privacy-requirements-optional_2" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-5-verify-data-ingestion-into-dynatrace_2">Step 5 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-5-verify-data-ingestion-into-dynatrace_2" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_15">Related topics<a class="headerlink" href="#related-topics_15" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-pythonmd">Source: python.md<a class="headerlink" href="#source-pythonmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Python application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/python
scraped: 2026-02-15T21:15:47.497462</p>
<hr />
<h1 id="instrument-your-python-application-with-opentelemetry">Instrument your Python application with OpenTelemetry<a class="headerlink" href="#instrument-your-python-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-python-application-with-opentelemetry_1">Instrument your Python application with OpenTelemetry<a class="headerlink" href="#instrument-your-python-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>Overview</li>
<li>1-min read</li>
<li>Published Apr 18, 2023</li>
</ul>
<p>These walkthroughs show how to add observability to your Python application using the OpenTelemetry Python libraries and tools.</p>
<ul>
<li><a href="/docs/ingest-from/opentelemetry/walkthroughs/python/python-auto" title="Learn how to instrument your Python application using OpenTelemetry and Dynatrace.">Automatically instrument your Python application with OpenTelemetry</a></li>
<li><a href="/docs/ingest-from/opentelemetry/walkthroughs/python/python-manual" title="Learn how to instrument your Python application using OpenTelemetry and Dynatrace.">Manually instrument your Python application with OpenTelemetry</a></li>
</ul>
<p>The following features are currently supported by OpenTelemetry Python.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="related-topics_16">Related topics<a class="headerlink" href="#related-topics_16" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
<li><a href="/docs/observe/dynatrace-for-ai-observability/get-started" title="Learn how to set up OpenLLMetry to observe an AI/ML model.">Get started</a></li>
</ul>
<hr />
<h2 id="source-rubymd">Source: ruby.md<a class="headerlink" href="#source-rubymd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Ruby application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/ruby
scraped: 2026-02-15T21:20:20.957960</p>
<hr />
<h1 id="instrument-your-ruby-application-with-opentelemetry">Instrument your Ruby application with OpenTelemetry<a class="headerlink" href="#instrument-your-ruby-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-ruby-application-with-opentelemetry_1">Instrument your Ruby application with OpenTelemetry<a class="headerlink" href="#instrument-your-ruby-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>4-min read</li>
<li>Updated on Oct 23, 2025</li>
</ul>
<p>This walkthrough shows how to add observability to your Ruby application using the OpenTelemetry Ruby libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>Yes</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>No</td>
</tr>
<tr>
<td>Logs</td>
<td>No</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_14">Prerequisites<a class="headerlink" href="#prerequisites_14" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_4">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_4" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_4">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_4" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_4">Get API access token<a class="headerlink" href="#get-api-access-token_4" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-choose-how-you-want-to-instrument-your-application_1">Step 2 Choose how you want to instrument your application<a class="headerlink" href="#step-2-choose-how-you-want-to-instrument-your-application_1" title="Permanent link">&para;</a></h2>
<p>OpenTelemetry supports on Ruby automatic and manual instrumentation, or a combination of both.</p>
<p>Which instrumentation should I choose?</p>
<p>It's a good idea to start with automatic instrumentation and add manual instrumentation if the automatic approach doesn't work or doesn't provide enough information.</p>
<h2 id="step-3-initialize-opentelementry">Step 3 Initialize OpenTelementry<a class="headerlink" href="#step-3-initialize-opentelementry" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the following dependencies to your Gemfile.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a>gem &#39;opentelemetry-sdk&#39;
<a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a>
<a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a>
<a id="__codelineno-123-4" name="__codelineno-123-4" href="#__codelineno-123-4"></a>
<a id="__codelineno-123-5" name="__codelineno-123-5" href="#__codelineno-123-5"></a>gem &#39;opentelemetry-exporter-otlp&#39;
</code></pre></div>
2. Add the following <code>require</code> declaration.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a>require &#39;opentelemetry/sdk&#39;
<a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a>
<a id="__codelineno-124-3" name="__codelineno-124-3" href="#__codelineno-124-3"></a>
<a id="__codelineno-124-4" name="__codelineno-124-4" href="#__codelineno-124-4"></a>
<a id="__codelineno-124-5" name="__codelineno-124-5" href="#__codelineno-124-5"></a>require &#39;opentelemetry/exporter/otlp&#39;
</code></pre></div>
3. Add the <code>init_opentelemetry</code> function to startup code and provide the variables <code>DT_API_URL</code> and <code>DT_API_TOKEN</code> with the values for the <a href="#base-url">Dynatrace URL</a> and <a href="#access-token">access token</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a>DT_API_URL = ENV[&#39;DT_API_URL&#39;]
<a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a>
<a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a>
<a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a>
<a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a>DT_API_TOKEN = ENV[&#39;DT_API_TOKEN&#39;]
<a id="__codelineno-125-6" name="__codelineno-125-6" href="#__codelineno-125-6"></a>
<a id="__codelineno-125-7" name="__codelineno-125-7" href="#__codelineno-125-7"></a>
<a id="__codelineno-125-8" name="__codelineno-125-8" href="#__codelineno-125-8"></a>
<a id="__codelineno-125-9" name="__codelineno-125-9" href="#__codelineno-125-9"></a>def init_opentelemetry
<a id="__codelineno-125-10" name="__codelineno-125-10" href="#__codelineno-125-10"></a>
<a id="__codelineno-125-11" name="__codelineno-125-11" href="#__codelineno-125-11"></a>
<a id="__codelineno-125-12" name="__codelineno-125-12" href="#__codelineno-125-12"></a>
<a id="__codelineno-125-13" name="__codelineno-125-13" href="#__codelineno-125-13"></a>OpenTelemetry::SDK.configure do |c|
<a id="__codelineno-125-14" name="__codelineno-125-14" href="#__codelineno-125-14"></a>
<a id="__codelineno-125-15" name="__codelineno-125-15" href="#__codelineno-125-15"></a>
<a id="__codelineno-125-16" name="__codelineno-125-16" href="#__codelineno-125-16"></a>
<a id="__codelineno-125-17" name="__codelineno-125-17" href="#__codelineno-125-17"></a>c.service_name = &#39;ruby-quickstart&#39; #TODO Replace with the name of your application
<a id="__codelineno-125-18" name="__codelineno-125-18" href="#__codelineno-125-18"></a>
<a id="__codelineno-125-19" name="__codelineno-125-19" href="#__codelineno-125-19"></a>
<a id="__codelineno-125-20" name="__codelineno-125-20" href="#__codelineno-125-20"></a>
<a id="__codelineno-125-21" name="__codelineno-125-21" href="#__codelineno-125-21"></a>c.service_version = &#39;1.0.1&#39; #TODO Replace with the version of your application
<a id="__codelineno-125-22" name="__codelineno-125-22" href="#__codelineno-125-22"></a>
<a id="__codelineno-125-23" name="__codelineno-125-23" href="#__codelineno-125-23"></a>
<a id="__codelineno-125-24" name="__codelineno-125-24" href="#__codelineno-125-24"></a>
<a id="__codelineno-125-25" name="__codelineno-125-25" href="#__codelineno-125-25"></a># TODO: add automatic instrumentation here (step 3 - optional)
<a id="__codelineno-125-26" name="__codelineno-125-26" href="#__codelineno-125-26"></a>
<a id="__codelineno-125-27" name="__codelineno-125-27" href="#__codelineno-125-27"></a>
<a id="__codelineno-125-28" name="__codelineno-125-28" href="#__codelineno-125-28"></a>
<a id="__codelineno-125-29" name="__codelineno-125-29" href="#__codelineno-125-29"></a>for name in [&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;, &quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;, &quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;] do
<a id="__codelineno-125-30" name="__codelineno-125-30" href="#__codelineno-125-30"></a>
<a id="__codelineno-125-31" name="__codelineno-125-31" href="#__codelineno-125-31"></a>
<a id="__codelineno-125-32" name="__codelineno-125-32" href="#__codelineno-125-32"></a>
<a id="__codelineno-125-33" name="__codelineno-125-33" href="#__codelineno-125-33"></a>begin
<a id="__codelineno-125-34" name="__codelineno-125-34" href="#__codelineno-125-34"></a>
<a id="__codelineno-125-35" name="__codelineno-125-35" href="#__codelineno-125-35"></a>
<a id="__codelineno-125-36" name="__codelineno-125-36" href="#__codelineno-125-36"></a>
<a id="__codelineno-125-37" name="__codelineno-125-37" href="#__codelineno-125-37"></a>c.resource = OpenTelemetry::SDK::Resources::Resource.create(Hash[*File.read(name.start_with?(&quot;/var&quot;) ? name : File.read(name)).split(/[=\n]+/)])
<a id="__codelineno-125-38" name="__codelineno-125-38" href="#__codelineno-125-38"></a>
<a id="__codelineno-125-39" name="__codelineno-125-39" href="#__codelineno-125-39"></a>
<a id="__codelineno-125-40" name="__codelineno-125-40" href="#__codelineno-125-40"></a>
<a id="__codelineno-125-41" name="__codelineno-125-41" href="#__codelineno-125-41"></a>rescue
<a id="__codelineno-125-42" name="__codelineno-125-42" href="#__codelineno-125-42"></a>
<a id="__codelineno-125-43" name="__codelineno-125-43" href="#__codelineno-125-43"></a>
<a id="__codelineno-125-44" name="__codelineno-125-44" href="#__codelineno-125-44"></a>
<a id="__codelineno-125-45" name="__codelineno-125-45" href="#__codelineno-125-45"></a>end
<a id="__codelineno-125-46" name="__codelineno-125-46" href="#__codelineno-125-46"></a>
<a id="__codelineno-125-47" name="__codelineno-125-47" href="#__codelineno-125-47"></a>
<a id="__codelineno-125-48" name="__codelineno-125-48" href="#__codelineno-125-48"></a>
<a id="__codelineno-125-49" name="__codelineno-125-49" href="#__codelineno-125-49"></a>end
<a id="__codelineno-125-50" name="__codelineno-125-50" href="#__codelineno-125-50"></a>
<a id="__codelineno-125-51" name="__codelineno-125-51" href="#__codelineno-125-51"></a>
<a id="__codelineno-125-52" name="__codelineno-125-52" href="#__codelineno-125-52"></a>
<a id="__codelineno-125-53" name="__codelineno-125-53" href="#__codelineno-125-53"></a>c.add_span_processor(
<a id="__codelineno-125-54" name="__codelineno-125-54" href="#__codelineno-125-54"></a>
<a id="__codelineno-125-55" name="__codelineno-125-55" href="#__codelineno-125-55"></a>
<a id="__codelineno-125-56" name="__codelineno-125-56" href="#__codelineno-125-56"></a>
<a id="__codelineno-125-57" name="__codelineno-125-57" href="#__codelineno-125-57"></a>OpenTelemetry::SDK::Trace::Export::BatchSpanProcessor.new(
<a id="__codelineno-125-58" name="__codelineno-125-58" href="#__codelineno-125-58"></a>
<a id="__codelineno-125-59" name="__codelineno-125-59" href="#__codelineno-125-59"></a>
<a id="__codelineno-125-60" name="__codelineno-125-60" href="#__codelineno-125-60"></a>
<a id="__codelineno-125-61" name="__codelineno-125-61" href="#__codelineno-125-61"></a>OpenTelemetry::Exporter::OTLP::Exporter.new(
<a id="__codelineno-125-62" name="__codelineno-125-62" href="#__codelineno-125-62"></a>
<a id="__codelineno-125-63" name="__codelineno-125-63" href="#__codelineno-125-63"></a>
<a id="__codelineno-125-64" name="__codelineno-125-64" href="#__codelineno-125-64"></a>
<a id="__codelineno-125-65" name="__codelineno-125-65" href="#__codelineno-125-65"></a>endpoint: DT_API_URL + &quot;/v1/traces&quot;,
<a id="__codelineno-125-66" name="__codelineno-125-66" href="#__codelineno-125-66"></a>
<a id="__codelineno-125-67" name="__codelineno-125-67" href="#__codelineno-125-67"></a>
<a id="__codelineno-125-68" name="__codelineno-125-68" href="#__codelineno-125-68"></a>
<a id="__codelineno-125-69" name="__codelineno-125-69" href="#__codelineno-125-69"></a>headers: {
<a id="__codelineno-125-70" name="__codelineno-125-70" href="#__codelineno-125-70"></a>
<a id="__codelineno-125-71" name="__codelineno-125-71" href="#__codelineno-125-71"></a>
<a id="__codelineno-125-72" name="__codelineno-125-72" href="#__codelineno-125-72"></a>
<a id="__codelineno-125-73" name="__codelineno-125-73" href="#__codelineno-125-73"></a>&quot;Authorization&quot;: &quot;Api-Token &quot; + DT_API_TOKEN
<a id="__codelineno-125-74" name="__codelineno-125-74" href="#__codelineno-125-74"></a>
<a id="__codelineno-125-75" name="__codelineno-125-75" href="#__codelineno-125-75"></a>
<a id="__codelineno-125-76" name="__codelineno-125-76" href="#__codelineno-125-76"></a>
<a id="__codelineno-125-77" name="__codelineno-125-77" href="#__codelineno-125-77"></a>}
<a id="__codelineno-125-78" name="__codelineno-125-78" href="#__codelineno-125-78"></a>
<a id="__codelineno-125-79" name="__codelineno-125-79" href="#__codelineno-125-79"></a>
<a id="__codelineno-125-80" name="__codelineno-125-80" href="#__codelineno-125-80"></a>
<a id="__codelineno-125-81" name="__codelineno-125-81" href="#__codelineno-125-81"></a>)
<a id="__codelineno-125-82" name="__codelineno-125-82" href="#__codelineno-125-82"></a>
<a id="__codelineno-125-83" name="__codelineno-125-83" href="#__codelineno-125-83"></a>
<a id="__codelineno-125-84" name="__codelineno-125-84" href="#__codelineno-125-84"></a>
<a id="__codelineno-125-85" name="__codelineno-125-85" href="#__codelineno-125-85"></a>)
<a id="__codelineno-125-86" name="__codelineno-125-86" href="#__codelineno-125-86"></a>
<a id="__codelineno-125-87" name="__codelineno-125-87" href="#__codelineno-125-87"></a>
<a id="__codelineno-125-88" name="__codelineno-125-88" href="#__codelineno-125-88"></a>
<a id="__codelineno-125-89" name="__codelineno-125-89" href="#__codelineno-125-89"></a>)
<a id="__codelineno-125-90" name="__codelineno-125-90" href="#__codelineno-125-90"></a>
<a id="__codelineno-125-91" name="__codelineno-125-91" href="#__codelineno-125-91"></a>
<a id="__codelineno-125-92" name="__codelineno-125-92" href="#__codelineno-125-92"></a>
<a id="__codelineno-125-93" name="__codelineno-125-93" href="#__codelineno-125-93"></a>end
<a id="__codelineno-125-94" name="__codelineno-125-94" href="#__codelineno-125-94"></a>
<a id="__codelineno-125-95" name="__codelineno-125-95" href="#__codelineno-125-95"></a>
<a id="__codelineno-125-96" name="__codelineno-125-96" href="#__codelineno-125-96"></a>
<a id="__codelineno-125-97" name="__codelineno-125-97" href="#__codelineno-125-97"></a>end
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.</p>
<p>Exporting to OneAgent</p>
<p>The Ruby SDK uses content compression by default, which is not supported by OneAgent yet.</p>
<p>When exporting to OneAgent, add <code>compression: "none"</code> to the <code>Exporter.new()</code> call to disable that feature. Otherwise, <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">export to ActiveGate</a> instead.
4. Call <code>init_opentelemetry</code> as early as possible during the startup of your application to ensure OpenTelemetry is initialized right from the start.</p>
<h2 id="step-3-optional-automatically-instrument-your-application-optional_1">Step 3 optional Automatically instrument your application Optional<a class="headerlink" href="#step-3-optional-automatically-instrument-your-application-optional_1" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the following dependency to your Gemfile.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a>gem &#39;opentelemetry-instrumentation-all&#39;
</code></pre></div>
2. Add the following <code>require</code> declaration.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a>require &#39;opentelemetry/instrumentation/all&#39;
</code></pre></div>
3. Add the following line after <code>c.service_version</code> in the <code>init_opentelemetry</code> function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>c.use_all
</code></pre></div>
<h2 id="step-4-optional-manually-instrument-your-application-optional_1">Step 4 optional Manually instrument your application Optional<a class="headerlink" href="#step-4-optional-manually-instrument-your-application-optional_1" title="Permanent link">&para;</a></h2>
<h3 id="add-tracing_4">Add tracing<a class="headerlink" href="#add-tracing_4" title="Permanent link">&para;</a></h3>
<ol>
<li>To create new spans, we first need a tracer object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a>tracer = OpenTelemetry.tracer_provider.tracer(&#39;my-tracer&#39;)
</code></pre></div>
2. With <code>tracer</code>, we can now use <code>start_span()</code> to create and start new spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a>span = tracer.start_span(&quot;Call to /myendpoint&quot;, kind: :internal)
<a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a>
<a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a>
<a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a>
<a id="__codelineno-130-5" name="__codelineno-130-5" href="#__codelineno-130-5"></a>OpenTelemetry::Trace.with_span(span) do |span, context|
<a id="__codelineno-130-6" name="__codelineno-130-6" href="#__codelineno-130-6"></a>
<a id="__codelineno-130-7" name="__codelineno-130-7" href="#__codelineno-130-7"></a>
<a id="__codelineno-130-8" name="__codelineno-130-8" href="#__codelineno-130-8"></a>
<a id="__codelineno-130-9" name="__codelineno-130-9" href="#__codelineno-130-9"></a>span.set_attribute(&quot;http.method&quot;, &quot;GET&quot;)
<a id="__codelineno-130-10" name="__codelineno-130-10" href="#__codelineno-130-10"></a>
<a id="__codelineno-130-11" name="__codelineno-130-11" href="#__codelineno-130-11"></a>
<a id="__codelineno-130-12" name="__codelineno-130-12" href="#__codelineno-130-12"></a>
<a id="__codelineno-130-13" name="__codelineno-130-13" href="#__codelineno-130-13"></a>span.set_attribute(&quot;net.protocol.version&quot;, &quot;1.1&quot;)
<a id="__codelineno-130-14" name="__codelineno-130-14" href="#__codelineno-130-14"></a>
<a id="__codelineno-130-15" name="__codelineno-130-15" href="#__codelineno-130-15"></a>
<a id="__codelineno-130-16" name="__codelineno-130-16" href="#__codelineno-130-16"></a>
<a id="__codelineno-130-17" name="__codelineno-130-17" href="#__codelineno-130-17"></a># TODO your code goes here
<a id="__codelineno-130-18" name="__codelineno-130-18" href="#__codelineno-130-18"></a>
<a id="__codelineno-130-19" name="__codelineno-130-19" href="#__codelineno-130-19"></a>
<a id="__codelineno-130-20" name="__codelineno-130-20" href="#__codelineno-130-20"></a>
<a id="__codelineno-130-21" name="__codelineno-130-21" href="#__codelineno-130-21"></a>end
<a id="__codelineno-130-22" name="__codelineno-130-22" href="#__codelineno-130-22"></a>
<a id="__codelineno-130-23" name="__codelineno-130-23" href="#__codelineno-130-23"></a>
<a id="__codelineno-130-24" name="__codelineno-130-24" href="#__codelineno-130-24"></a>
<a id="__codelineno-130-25" name="__codelineno-130-25" href="#__codelineno-130-25"></a>rescue Exception =&gt; e
<a id="__codelineno-130-26" name="__codelineno-130-26" href="#__codelineno-130-26"></a>
<a id="__codelineno-130-27" name="__codelineno-130-27" href="#__codelineno-130-27"></a>
<a id="__codelineno-130-28" name="__codelineno-130-28" href="#__codelineno-130-28"></a>
<a id="__codelineno-130-29" name="__codelineno-130-29" href="#__codelineno-130-29"></a>span&amp;.record_exception(e)
<a id="__codelineno-130-30" name="__codelineno-130-30" href="#__codelineno-130-30"></a>
<a id="__codelineno-130-31" name="__codelineno-130-31" href="#__codelineno-130-31"></a>
<a id="__codelineno-130-32" name="__codelineno-130-32" href="#__codelineno-130-32"></a>
<a id="__codelineno-130-33" name="__codelineno-130-33" href="#__codelineno-130-33"></a>span&amp;.status = OpenTelemetry::Trace::Status.error(&quot;Unhandled exception of type: #{e.class}&quot;)
<a id="__codelineno-130-34" name="__codelineno-130-34" href="#__codelineno-130-34"></a>
<a id="__codelineno-130-35" name="__codelineno-130-35" href="#__codelineno-130-35"></a>
<a id="__codelineno-130-36" name="__codelineno-130-36" href="#__codelineno-130-36"></a>
<a id="__codelineno-130-37" name="__codelineno-130-37" href="#__codelineno-130-37"></a>raise e
<a id="__codelineno-130-38" name="__codelineno-130-38" href="#__codelineno-130-38"></a>
<a id="__codelineno-130-39" name="__codelineno-130-39" href="#__codelineno-130-39"></a>
<a id="__codelineno-130-40" name="__codelineno-130-40" href="#__codelineno-130-40"></a>
<a id="__codelineno-130-41" name="__codelineno-130-41" href="#__codelineno-130-41"></a>ensure
<a id="__codelineno-130-42" name="__codelineno-130-42" href="#__codelineno-130-42"></a>
<a id="__codelineno-130-43" name="__codelineno-130-43" href="#__codelineno-130-43"></a>
<a id="__codelineno-130-44" name="__codelineno-130-44" href="#__codelineno-130-44"></a>
<a id="__codelineno-130-45" name="__codelineno-130-45" href="#__codelineno-130-45"></a>span&amp;.finish
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new span and name it "Call to /myendpoint"</li>
<li>Add two attributes, following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
<li>Add a <code>TODO</code> in place of the eventual business logic</li>
<li>Call the span's <code>finish()</code> method to complete the span (in an <code>ensure</code> block to ensure the method is called)</li>
</ul>
<h2 id="process-logs-with-technology-bundle-parsers">Process logs with technology bundle parsers<a class="headerlink" href="#process-logs-with-technology-bundle-parsers" title="Permanent link">&para;</a></h2>
<p>Through OpenPipeline, you can use and configure technology bundles. A technology bundle is a library of parsers (processing rules) that process logs from various technologies, such as Java, .NET, and Microsoft IIS.</p>
<p>Parsers help you to improve filtering, troubleshooting, metrics, alerts, and dashboards by efficiently extracting log levels and relevant attributes. You can also use technology bundles to structure logs from technologies that are not supported by Dynatrace out of the box.</p>
<p><img alt="syslog-bundles" src="https://dt-cdn.net/images/env-syslogbundles-2589-90e4e38b45.png" /></p>
<p>For more information, see <a href="/docs/platform/openpipeline/use-cases/tutorial-technology-processor" title="Set up a processing pipeline to structure technology-specific logs according to Dynatrace Semantic Dictionary.">Process logs with technology bundle parsers</a>.</p>
<h3 id="collect-metrics_4">Collect metrics<a class="headerlink" href="#collect-metrics_4" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Ruby does not have stable support for metrics yet.</p>
<h3 id="connect-logs_4">Connect logs<a class="headerlink" href="#connect-logs_4" title="Permanent link">&para;</a></h3>
<p>No example yet, as OpenTelemetry for Ruby does not have stable support for logs yet.</p>
<p>Depending on the status of the OpenTelemetry SDK, the pre-release version may nonetheless already allow the ingestion of your logs.</p>
<h3 id="ensure-context-propagation-optional_4">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_4" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<p>If you are using automatic instrumentation and your networking libraries are covered by automatic instrumentation, this will be automatically taken care of by the instrumentation libraries. Otherwise, your code needs to take this into account.</p>
<h4 id="extracting-the-context-when-receiving-a-request_4">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_4" title="Permanent link">&para;</a></h4>
<p>The following example uses the default propagator's <code>extract()</code> method to extract and recreate the context from the request, in <code>parent_context</code>. We can then pass that context to a <code>start_span</code> call to continue the previous trace with our spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a>parent_context = OpenTelemetry.propagation.extract(
<a id="__codelineno-131-2" name="__codelineno-131-2" href="#__codelineno-131-2"></a>
<a id="__codelineno-131-3" name="__codelineno-131-3" href="#__codelineno-131-3"></a>
<a id="__codelineno-131-4" name="__codelineno-131-4" href="#__codelineno-131-4"></a>
<a id="__codelineno-131-5" name="__codelineno-131-5" href="#__codelineno-131-5"></a>env,
<a id="__codelineno-131-6" name="__codelineno-131-6" href="#__codelineno-131-6"></a>
<a id="__codelineno-131-7" name="__codelineno-131-7" href="#__codelineno-131-7"></a>
<a id="__codelineno-131-8" name="__codelineno-131-8" href="#__codelineno-131-8"></a>
<a id="__codelineno-131-9" name="__codelineno-131-9" href="#__codelineno-131-9"></a>getter: OpenTelemetry::Common::Propagation.rack_env_getter
<a id="__codelineno-131-10" name="__codelineno-131-10" href="#__codelineno-131-10"></a>
<a id="__codelineno-131-11" name="__codelineno-131-11" href="#__codelineno-131-11"></a>
<a id="__codelineno-131-12" name="__codelineno-131-12" href="#__codelineno-131-12"></a>
<a id="__codelineno-131-13" name="__codelineno-131-13" href="#__codelineno-131-13"></a>)
<a id="__codelineno-131-14" name="__codelineno-131-14" href="#__codelineno-131-14"></a>
<a id="__codelineno-131-15" name="__codelineno-131-15" href="#__codelineno-131-15"></a>
<a id="__codelineno-131-16" name="__codelineno-131-16" href="#__codelineno-131-16"></a>
<a id="__codelineno-131-17" name="__codelineno-131-17" href="#__codelineno-131-17"></a>span = tracer.start_span(&quot;hello world&quot;, with_parent: parent_context)
<a id="__codelineno-131-18" name="__codelineno-131-18" href="#__codelineno-131-18"></a>
<a id="__codelineno-131-19" name="__codelineno-131-19" href="#__codelineno-131-19"></a>
<a id="__codelineno-131-20" name="__codelineno-131-20" href="#__codelineno-131-20"></a>
<a id="__codelineno-131-21" name="__codelineno-131-21" href="#__codelineno-131-21"></a>OpenTelemetry::Trace.with_span(span) do |span, context|
<a id="__codelineno-131-22" name="__codelineno-131-22" href="#__codelineno-131-22"></a>
<a id="__codelineno-131-23" name="__codelineno-131-23" href="#__codelineno-131-23"></a>
<a id="__codelineno-131-24" name="__codelineno-131-24" href="#__codelineno-131-24"></a>
<a id="__codelineno-131-25" name="__codelineno-131-25" href="#__codelineno-131-25"></a>span.set_attribute(&quot;my-key-1&quot;, &quot;my-value-1&quot;)
<a id="__codelineno-131-26" name="__codelineno-131-26" href="#__codelineno-131-26"></a>
<a id="__codelineno-131-27" name="__codelineno-131-27" href="#__codelineno-131-27"></a>
<a id="__codelineno-131-28" name="__codelineno-131-28" href="#__codelineno-131-28"></a>
<a id="__codelineno-131-29" name="__codelineno-131-29" href="#__codelineno-131-29"></a># ... expansive query
<a id="__codelineno-131-30" name="__codelineno-131-30" href="#__codelineno-131-30"></a>
<a id="__codelineno-131-31" name="__codelineno-131-31" href="#__codelineno-131-31"></a>
<a id="__codelineno-131-32" name="__codelineno-131-32" href="#__codelineno-131-32"></a>
<a id="__codelineno-131-33" name="__codelineno-131-33" href="#__codelineno-131-33"></a>end
<a id="__codelineno-131-34" name="__codelineno-131-34" href="#__codelineno-131-34"></a>
<a id="__codelineno-131-35" name="__codelineno-131-35" href="#__codelineno-131-35"></a>
<a id="__codelineno-131-36" name="__codelineno-131-36" href="#__codelineno-131-36"></a>
<a id="__codelineno-131-37" name="__codelineno-131-37" href="#__codelineno-131-37"></a>ensure
<a id="__codelineno-131-38" name="__codelineno-131-38" href="#__codelineno-131-38"></a>
<a id="__codelineno-131-39" name="__codelineno-131-39" href="#__codelineno-131-39"></a>
<a id="__codelineno-131-40" name="__codelineno-131-40" href="#__codelineno-131-40"></a>
<a id="__codelineno-131-41" name="__codelineno-131-41" href="#__codelineno-131-41"></a>span&amp;.finish
<a id="__codelineno-131-42" name="__codelineno-131-42" href="#__codelineno-131-42"></a>
<a id="__codelineno-131-43" name="__codelineno-131-43" href="#__codelineno-131-43"></a>
<a id="__codelineno-131-44" name="__codelineno-131-44" href="#__codelineno-131-44"></a>
<a id="__codelineno-131-45" name="__codelineno-131-45" href="#__codelineno-131-45"></a>end
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_4">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_4" title="Permanent link">&para;</a></h4>
<p>The following example uses Ruby's standard <a href="https://ruby-doc.org/stdlib-2.7.0/libdoc/net/http/rdoc/Net/HTTP.html">Net:HTTP√Ø¬ª¬ø</a> library to call an instrumented third-party service. To add the necessary trace headers, we use the default propagator's <code>inject()</code> method.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>request = Net::HTTP::Get.new(uri.request_uri)
<a id="__codelineno-132-2" name="__codelineno-132-2" href="#__codelineno-132-2"></a>
<a id="__codelineno-132-3" name="__codelineno-132-3" href="#__codelineno-132-3"></a>
<a id="__codelineno-132-4" name="__codelineno-132-4" href="#__codelineno-132-4"></a>
<a id="__codelineno-132-5" name="__codelineno-132-5" href="#__codelineno-132-5"></a>OpenTelemetry.propagation.inject(request)
<a id="__codelineno-132-6" name="__codelineno-132-6" href="#__codelineno-132-6"></a>
<a id="__codelineno-132-7" name="__codelineno-132-7" href="#__codelineno-132-7"></a>
<a id="__codelineno-132-8" name="__codelineno-132-8" href="#__codelineno-132-8"></a>
<a id="__codelineno-132-9" name="__codelineno-132-9" href="#__codelineno-132-9"></a>response = http.request(request)
</code></pre></div>
<h2 id="step-5-configure-data-capture-to-meet-privacy-requirements-optional">Step 5 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-5-configure-data-capture-to-meet-privacy-requirements-optional" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-6-verify-data-ingestion-into-dynatrace_1">Step 6 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-6-verify-data-ingestion-into-dynatrace_1" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_17">Related topics<a class="headerlink" href="#related-topics_17" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-rustmd">Source: rust.md<a class="headerlink" href="#source-rustmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your Rust application with OpenTelemetry
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs/rust
scraped: 2026-02-15T21:20:14.064602</p>
<hr />
<h1 id="instrument-your-rust-application-with-opentelemetry">Instrument your Rust application with OpenTelemetry<a class="headerlink" href="#instrument-your-rust-application-with-opentelemetry" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-rust-application-with-opentelemetry_1">Instrument your Rust application with OpenTelemetry<a class="headerlink" href="#instrument-your-rust-application-with-opentelemetry_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>5-min read</li>
<li>Updated on Jan 07, 2026</li>
</ul>
<p>This walkthrough shows how to add observability to your Rust application using the OpenTelemetry Rust libraries and tools.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Automatic instrumentation</td>
<td>No</td>
</tr>
<tr>
<td>Traces</td>
<td>Yes</td>
</tr>
<tr>
<td>Metrics</td>
<td>Yes</td>
</tr>
<tr>
<td>Logs</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites_15">Prerequisites<a class="headerlink" href="#prerequisites_15" title="Permanent link">&para;</a></h2>
<ul>
<li>Dynatrace version 1.222+</li>
<li>
<p>For tracing, W3C Trace Context is enabled</p>
</li>
<li>
<p>Go to <strong>Settings</strong> &gt; <strong>Preferences</strong> &gt; <strong>OneAgent features</strong>.</p>
</li>
<li>Turn on <strong>Send W3C Trace Context HTTP headers</strong>.</li>
</ul>
<h2 id="step-1-get-the-dynatrace-access-details_5">Step 1 Get the Dynatrace access details<a class="headerlink" href="#step-1-get-the-dynatrace-access-details_5" title="Permanent link">&para;</a></h2>
<h3 id="determine-the-api-base-url_5">Determine the API base URL<a class="headerlink" href="#determine-the-api-base-url_5" title="Permanent link">&para;</a></h3>
<p>For details on how to assemble the base OTLP endpoint URL, see <a href="/docs/ingest-from/opentelemetry/otlp-api#export-to-activegate" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a>. The URL should end in <code>/api/v2/otlp</code>.</p>
<h3 id="get-api-access-token_5">Get API access token<a class="headerlink" href="#get-api-access-token_5" title="Permanent link">&para;</a></h3>
<p>To generate an access token, in Dynatrace, go to <img alt="Access tokens" src="https://dt-cdn.net/images/access-tokens-512-a766b810b8.png" title="Access tokens" /> <strong>Access Tokens</strong>.</p>
<p><a href="/docs/ingest-from/opentelemetry/otlp-api#authentication" title="Learn about the OTLP API endpoints that your application uses to export OpenTelemetry data to Dynatrace.">Dynatrace OTLP API endpoints</a> has more details on the format and the necessary access scopes.</p>
<h2 id="step-2-set-up-opentelemetry_2">Step 2 Set up OpenTelemetry<a class="headerlink" href="#step-2-set-up-opentelemetry_2" title="Permanent link">&para;</a></h2>
<ol>
<li>Add the following crates to your <code>Cargo.toml</code> file.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>opentelemetry = { version = &quot;~0&quot;, features = [&quot;trace&quot;, &quot;metrics&quot;] }
<a id="__codelineno-133-2" name="__codelineno-133-2" href="#__codelineno-133-2"></a>
<a id="__codelineno-133-3" name="__codelineno-133-3" href="#__codelineno-133-3"></a>
<a id="__codelineno-133-4" name="__codelineno-133-4" href="#__codelineno-133-4"></a>
<a id="__codelineno-133-5" name="__codelineno-133-5" href="#__codelineno-133-5"></a>opentelemetry_sdk = { version = &quot;~0&quot;, features = [&quot;rt-tokio&quot;, &quot;metrics&quot;, &quot;logs&quot;, &quot;spec_unstable_metrics_views&quot;] }
<a id="__codelineno-133-6" name="__codelineno-133-6" href="#__codelineno-133-6"></a>
<a id="__codelineno-133-7" name="__codelineno-133-7" href="#__codelineno-133-7"></a>
<a id="__codelineno-133-8" name="__codelineno-133-8" href="#__codelineno-133-8"></a>
<a id="__codelineno-133-9" name="__codelineno-133-9" href="#__codelineno-133-9"></a>opentelemetry-otlp = { version = &quot;~0&quot;, features = [&quot;http-proto&quot;, &quot;http-json&quot;, &quot;logs&quot;, &quot;reqwest-blocking-client&quot;, &quot;reqwest-rustls&quot;] }
<a id="__codelineno-133-10" name="__codelineno-133-10" href="#__codelineno-133-10"></a>
<a id="__codelineno-133-11" name="__codelineno-133-11" href="#__codelineno-133-11"></a>
<a id="__codelineno-133-12" name="__codelineno-133-12" href="#__codelineno-133-12"></a>
<a id="__codelineno-133-13" name="__codelineno-133-13" href="#__codelineno-133-13"></a>opentelemetry-http = { version = &quot;~0&quot; }
<a id="__codelineno-133-14" name="__codelineno-133-14" href="#__codelineno-133-14"></a>
<a id="__codelineno-133-15" name="__codelineno-133-15" href="#__codelineno-133-15"></a>
<a id="__codelineno-133-16" name="__codelineno-133-16" href="#__codelineno-133-16"></a>
<a id="__codelineno-133-17" name="__codelineno-133-17" href="#__codelineno-133-17"></a>opentelemetry-appender-log = { version = &quot;~0&quot; }
<a id="__codelineno-133-18" name="__codelineno-133-18" href="#__codelineno-133-18"></a>
<a id="__codelineno-133-19" name="__codelineno-133-19" href="#__codelineno-133-19"></a>
<a id="__codelineno-133-20" name="__codelineno-133-20" href="#__codelineno-133-20"></a>
<a id="__codelineno-133-21" name="__codelineno-133-21" href="#__codelineno-133-21"></a>opentelemetry-semantic-conventions = { version = &quot;~0&quot; }
</code></pre></div>
2. Add the following <code>use</code> declarations to your code.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a>use std::{env, convert::Infallible, net::SocketAddr, collections::HashMap, io::{BufRead, BufReader, Read}};
<a id="__codelineno-134-2" name="__codelineno-134-2" href="#__codelineno-134-2"></a>
<a id="__codelineno-134-3" name="__codelineno-134-3" href="#__codelineno-134-3"></a>
<a id="__codelineno-134-4" name="__codelineno-134-4" href="#__codelineno-134-4"></a>
<a id="__codelineno-134-5" name="__codelineno-134-5" href="#__codelineno-134-5"></a>use opentelemetry_sdk::trace::SdkTracerProvider;
<a id="__codelineno-134-6" name="__codelineno-134-6" href="#__codelineno-134-6"></a>
<a id="__codelineno-134-7" name="__codelineno-134-7" href="#__codelineno-134-7"></a>
<a id="__codelineno-134-8" name="__codelineno-134-8" href="#__codelineno-134-8"></a>
<a id="__codelineno-134-9" name="__codelineno-134-9" href="#__codelineno-134-9"></a>use opentelemetry_sdk::{logs::SdkLoggerProvider, metrics::{PeriodicReader, SdkMeterProvider}, propagation::TraceContextPropagator, Resource};
<a id="__codelineno-134-10" name="__codelineno-134-10" href="#__codelineno-134-10"></a>
<a id="__codelineno-134-11" name="__codelineno-134-11" href="#__codelineno-134-11"></a>
<a id="__codelineno-134-12" name="__codelineno-134-12" href="#__codelineno-134-12"></a>
<a id="__codelineno-134-13" name="__codelineno-134-13" href="#__codelineno-134-13"></a>use opentelemetry_otlp::{LogExporter, MetricExporter, Protocol, SpanExporter, WithExportConfig, WithHttpConfig};
<a id="__codelineno-134-14" name="__codelineno-134-14" href="#__codelineno-134-14"></a>
<a id="__codelineno-134-15" name="__codelineno-134-15" href="#__codelineno-134-15"></a>
<a id="__codelineno-134-16" name="__codelineno-134-16" href="#__codelineno-134-16"></a>
<a id="__codelineno-134-17" name="__codelineno-134-17" href="#__codelineno-134-17"></a>use opentelemetry_semantic_conventions::trace;
<a id="__codelineno-134-18" name="__codelineno-134-18" href="#__codelineno-134-18"></a>
<a id="__codelineno-134-19" name="__codelineno-134-19" href="#__codelineno-134-19"></a>
<a id="__codelineno-134-20" name="__codelineno-134-20" href="#__codelineno-134-20"></a>
<a id="__codelineno-134-21" name="__codelineno-134-21" href="#__codelineno-134-21"></a>use opentelemetry_http::{Bytes, HeaderExtractor, HeaderInjector};
<a id="__codelineno-134-22" name="__codelineno-134-22" href="#__codelineno-134-22"></a>
<a id="__codelineno-134-23" name="__codelineno-134-23" href="#__codelineno-134-23"></a>
<a id="__codelineno-134-24" name="__codelineno-134-24" href="#__codelineno-134-24"></a>
<a id="__codelineno-134-25" name="__codelineno-134-25" href="#__codelineno-134-25"></a>use opentelemetry_appender_log::OpenTelemetryLogBridge;
<a id="__codelineno-134-26" name="__codelineno-134-26" href="#__codelineno-134-26"></a>
<a id="__codelineno-134-27" name="__codelineno-134-27" href="#__codelineno-134-27"></a>
<a id="__codelineno-134-28" name="__codelineno-134-28" href="#__codelineno-134-28"></a>
<a id="__codelineno-134-29" name="__codelineno-134-29" href="#__codelineno-134-29"></a>use opentelemetry::{global, trace::{FutureExt, Span, SpanKind, TraceContextExt, Tracer}, Context, KeyValue};
</code></pre></div>
3. Add the following function to your startup file.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a>fn init_opentelemetry() {
<a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a>
<a id="__codelineno-135-3" name="__codelineno-135-3" href="#__codelineno-135-3"></a>
<a id="__codelineno-135-4" name="__codelineno-135-4" href="#__codelineno-135-4"></a>
<a id="__codelineno-135-5" name="__codelineno-135-5" href="#__codelineno-135-5"></a>// Helper function to read potentially available OneAgent data
<a id="__codelineno-135-6" name="__codelineno-135-6" href="#__codelineno-135-6"></a>
<a id="__codelineno-135-7" name="__codelineno-135-7" href="#__codelineno-135-7"></a>
<a id="__codelineno-135-8" name="__codelineno-135-8" href="#__codelineno-135-8"></a>
<a id="__codelineno-135-9" name="__codelineno-135-9" href="#__codelineno-135-9"></a>fn read_dt_metadata() -&gt;  Vec&lt;KeyValue&gt; {
<a id="__codelineno-135-10" name="__codelineno-135-10" href="#__codelineno-135-10"></a>
<a id="__codelineno-135-11" name="__codelineno-135-11" href="#__codelineno-135-11"></a>
<a id="__codelineno-135-12" name="__codelineno-135-12" href="#__codelineno-135-12"></a>
<a id="__codelineno-135-13" name="__codelineno-135-13" href="#__codelineno-135-13"></a>fn read_single(path: &amp;str, metadata: &amp;mut Vec&lt;KeyValue&gt;) -&gt; std::io::Result&lt;()&gt; {
<a id="__codelineno-135-14" name="__codelineno-135-14" href="#__codelineno-135-14"></a>
<a id="__codelineno-135-15" name="__codelineno-135-15" href="#__codelineno-135-15"></a>
<a id="__codelineno-135-16" name="__codelineno-135-16" href="#__codelineno-135-16"></a>
<a id="__codelineno-135-17" name="__codelineno-135-17" href="#__codelineno-135-17"></a>let mut file = std::fs::File::open(path)?;
<a id="__codelineno-135-18" name="__codelineno-135-18" href="#__codelineno-135-18"></a>
<a id="__codelineno-135-19" name="__codelineno-135-19" href="#__codelineno-135-19"></a>
<a id="__codelineno-135-20" name="__codelineno-135-20" href="#__codelineno-135-20"></a>
<a id="__codelineno-135-21" name="__codelineno-135-21" href="#__codelineno-135-21"></a>if path.starts_with(&quot;dt_metadata&quot;) {
<a id="__codelineno-135-22" name="__codelineno-135-22" href="#__codelineno-135-22"></a>
<a id="__codelineno-135-23" name="__codelineno-135-23" href="#__codelineno-135-23"></a>
<a id="__codelineno-135-24" name="__codelineno-135-24" href="#__codelineno-135-24"></a>
<a id="__codelineno-135-25" name="__codelineno-135-25" href="#__codelineno-135-25"></a>let mut name = String::new();
<a id="__codelineno-135-26" name="__codelineno-135-26" href="#__codelineno-135-26"></a>
<a id="__codelineno-135-27" name="__codelineno-135-27" href="#__codelineno-135-27"></a>
<a id="__codelineno-135-28" name="__codelineno-135-28" href="#__codelineno-135-28"></a>
<a id="__codelineno-135-29" name="__codelineno-135-29" href="#__codelineno-135-29"></a>file.read_to_string(&amp;mut name)?;
<a id="__codelineno-135-30" name="__codelineno-135-30" href="#__codelineno-135-30"></a>
<a id="__codelineno-135-31" name="__codelineno-135-31" href="#__codelineno-135-31"></a>
<a id="__codelineno-135-32" name="__codelineno-135-32" href="#__codelineno-135-32"></a>
<a id="__codelineno-135-33" name="__codelineno-135-33" href="#__codelineno-135-33"></a>file = std::fs::File::open(name)?;
<a id="__codelineno-135-34" name="__codelineno-135-34" href="#__codelineno-135-34"></a>
<a id="__codelineno-135-35" name="__codelineno-135-35" href="#__codelineno-135-35"></a>
<a id="__codelineno-135-36" name="__codelineno-135-36" href="#__codelineno-135-36"></a>
<a id="__codelineno-135-37" name="__codelineno-135-37" href="#__codelineno-135-37"></a>}
<a id="__codelineno-135-38" name="__codelineno-135-38" href="#__codelineno-135-38"></a>
<a id="__codelineno-135-39" name="__codelineno-135-39" href="#__codelineno-135-39"></a>
<a id="__codelineno-135-40" name="__codelineno-135-40" href="#__codelineno-135-40"></a>
<a id="__codelineno-135-41" name="__codelineno-135-41" href="#__codelineno-135-41"></a>for line in BufReader::new(file).lines() {
<a id="__codelineno-135-42" name="__codelineno-135-42" href="#__codelineno-135-42"></a>
<a id="__codelineno-135-43" name="__codelineno-135-43" href="#__codelineno-135-43"></a>
<a id="__codelineno-135-44" name="__codelineno-135-44" href="#__codelineno-135-44"></a>
<a id="__codelineno-135-45" name="__codelineno-135-45" href="#__codelineno-135-45"></a>if let Some((k, v)) = line?.split_once(&#39;=&#39;) {
<a id="__codelineno-135-46" name="__codelineno-135-46" href="#__codelineno-135-46"></a>
<a id="__codelineno-135-47" name="__codelineno-135-47" href="#__codelineno-135-47"></a>
<a id="__codelineno-135-48" name="__codelineno-135-48" href="#__codelineno-135-48"></a>
<a id="__codelineno-135-49" name="__codelineno-135-49" href="#__codelineno-135-49"></a>metadata.push(KeyValue::new(k.to_string(), v.to_string()))
<a id="__codelineno-135-50" name="__codelineno-135-50" href="#__codelineno-135-50"></a>
<a id="__codelineno-135-51" name="__codelineno-135-51" href="#__codelineno-135-51"></a>
<a id="__codelineno-135-52" name="__codelineno-135-52" href="#__codelineno-135-52"></a>
<a id="__codelineno-135-53" name="__codelineno-135-53" href="#__codelineno-135-53"></a>}
<a id="__codelineno-135-54" name="__codelineno-135-54" href="#__codelineno-135-54"></a>
<a id="__codelineno-135-55" name="__codelineno-135-55" href="#__codelineno-135-55"></a>
<a id="__codelineno-135-56" name="__codelineno-135-56" href="#__codelineno-135-56"></a>
<a id="__codelineno-135-57" name="__codelineno-135-57" href="#__codelineno-135-57"></a>}
<a id="__codelineno-135-58" name="__codelineno-135-58" href="#__codelineno-135-58"></a>
<a id="__codelineno-135-59" name="__codelineno-135-59" href="#__codelineno-135-59"></a>
<a id="__codelineno-135-60" name="__codelineno-135-60" href="#__codelineno-135-60"></a>
<a id="__codelineno-135-61" name="__codelineno-135-61" href="#__codelineno-135-61"></a>Ok(())
<a id="__codelineno-135-62" name="__codelineno-135-62" href="#__codelineno-135-62"></a>
<a id="__codelineno-135-63" name="__codelineno-135-63" href="#__codelineno-135-63"></a>
<a id="__codelineno-135-64" name="__codelineno-135-64" href="#__codelineno-135-64"></a>
<a id="__codelineno-135-65" name="__codelineno-135-65" href="#__codelineno-135-65"></a>}
<a id="__codelineno-135-66" name="__codelineno-135-66" href="#__codelineno-135-66"></a>
<a id="__codelineno-135-67" name="__codelineno-135-67" href="#__codelineno-135-67"></a>
<a id="__codelineno-135-68" name="__codelineno-135-68" href="#__codelineno-135-68"></a>
<a id="__codelineno-135-69" name="__codelineno-135-69" href="#__codelineno-135-69"></a>let mut metadata = Vec::new();
<a id="__codelineno-135-70" name="__codelineno-135-70" href="#__codelineno-135-70"></a>
<a id="__codelineno-135-71" name="__codelineno-135-71" href="#__codelineno-135-71"></a>
<a id="__codelineno-135-72" name="__codelineno-135-72" href="#__codelineno-135-72"></a>
<a id="__codelineno-135-73" name="__codelineno-135-73" href="#__codelineno-135-73"></a>for name in [
<a id="__codelineno-135-74" name="__codelineno-135-74" href="#__codelineno-135-74"></a>
<a id="__codelineno-135-75" name="__codelineno-135-75" href="#__codelineno-135-75"></a>
<a id="__codelineno-135-76" name="__codelineno-135-76" href="#__codelineno-135-76"></a>
<a id="__codelineno-135-77" name="__codelineno-135-77" href="#__codelineno-135-77"></a>&quot;dt_metadata_e617c525669e072eebe3d0f08212e8f2.properties&quot;,
<a id="__codelineno-135-78" name="__codelineno-135-78" href="#__codelineno-135-78"></a>
<a id="__codelineno-135-79" name="__codelineno-135-79" href="#__codelineno-135-79"></a>
<a id="__codelineno-135-80" name="__codelineno-135-80" href="#__codelineno-135-80"></a>
<a id="__codelineno-135-81" name="__codelineno-135-81" href="#__codelineno-135-81"></a>&quot;/var/lib/dynatrace/enrichment/dt_metadata.properties&quot;,
<a id="__codelineno-135-82" name="__codelineno-135-82" href="#__codelineno-135-82"></a>
<a id="__codelineno-135-83" name="__codelineno-135-83" href="#__codelineno-135-83"></a>
<a id="__codelineno-135-84" name="__codelineno-135-84" href="#__codelineno-135-84"></a>
<a id="__codelineno-135-85" name="__codelineno-135-85" href="#__codelineno-135-85"></a>&quot;/var/lib/dynatrace/enrichment/dt_host_metadata.properties&quot;
<a id="__codelineno-135-86" name="__codelineno-135-86" href="#__codelineno-135-86"></a>
<a id="__codelineno-135-87" name="__codelineno-135-87" href="#__codelineno-135-87"></a>
<a id="__codelineno-135-88" name="__codelineno-135-88" href="#__codelineno-135-88"></a>
<a id="__codelineno-135-89" name="__codelineno-135-89" href="#__codelineno-135-89"></a>] {
<a id="__codelineno-135-90" name="__codelineno-135-90" href="#__codelineno-135-90"></a>
<a id="__codelineno-135-91" name="__codelineno-135-91" href="#__codelineno-135-91"></a>
<a id="__codelineno-135-92" name="__codelineno-135-92" href="#__codelineno-135-92"></a>
<a id="__codelineno-135-93" name="__codelineno-135-93" href="#__codelineno-135-93"></a>let _ = read_single(name, &amp;mut metadata);
<a id="__codelineno-135-94" name="__codelineno-135-94" href="#__codelineno-135-94"></a>
<a id="__codelineno-135-95" name="__codelineno-135-95" href="#__codelineno-135-95"></a>
<a id="__codelineno-135-96" name="__codelineno-135-96" href="#__codelineno-135-96"></a>
<a id="__codelineno-135-97" name="__codelineno-135-97" href="#__codelineno-135-97"></a>}
<a id="__codelineno-135-98" name="__codelineno-135-98" href="#__codelineno-135-98"></a>
<a id="__codelineno-135-99" name="__codelineno-135-99" href="#__codelineno-135-99"></a>
<a id="__codelineno-135-100" name="__codelineno-135-100" href="#__codelineno-135-100"></a>
<a id="__codelineno-135-101" name="__codelineno-135-101" href="#__codelineno-135-101"></a>return metadata;
<a id="__codelineno-135-102" name="__codelineno-135-102" href="#__codelineno-135-102"></a>
<a id="__codelineno-135-103" name="__codelineno-135-103" href="#__codelineno-135-103"></a>
<a id="__codelineno-135-104" name="__codelineno-135-104" href="#__codelineno-135-104"></a>
<a id="__codelineno-135-105" name="__codelineno-135-105" href="#__codelineno-135-105"></a>}
<a id="__codelineno-135-106" name="__codelineno-135-106" href="#__codelineno-135-106"></a>
<a id="__codelineno-135-107" name="__codelineno-135-107" href="#__codelineno-135-107"></a>
<a id="__codelineno-135-108" name="__codelineno-135-108" href="#__codelineno-135-108"></a>
<a id="__codelineno-135-109" name="__codelineno-135-109" href="#__codelineno-135-109"></a>// ===== GENERAL SETUP =====
<a id="__codelineno-135-110" name="__codelineno-135-110" href="#__codelineno-135-110"></a>
<a id="__codelineno-135-111" name="__codelineno-135-111" href="#__codelineno-135-111"></a>
<a id="__codelineno-135-112" name="__codelineno-135-112" href="#__codelineno-135-112"></a>
<a id="__codelineno-135-113" name="__codelineno-135-113" href="#__codelineno-135-113"></a>let dt_api_token = env::var(&quot;DT_API_TOKEN&quot;).unwrap(); // TODO: change
<a id="__codelineno-135-114" name="__codelineno-135-114" href="#__codelineno-135-114"></a>
<a id="__codelineno-135-115" name="__codelineno-135-115" href="#__codelineno-135-115"></a>
<a id="__codelineno-135-116" name="__codelineno-135-116" href="#__codelineno-135-116"></a>
<a id="__codelineno-135-117" name="__codelineno-135-117" href="#__codelineno-135-117"></a>let dt_api_url = env::var(&quot;DT_API_URL&quot;).unwrap();
<a id="__codelineno-135-118" name="__codelineno-135-118" href="#__codelineno-135-118"></a>
<a id="__codelineno-135-119" name="__codelineno-135-119" href="#__codelineno-135-119"></a>
<a id="__codelineno-135-120" name="__codelineno-135-120" href="#__codelineno-135-120"></a>
<a id="__codelineno-135-121" name="__codelineno-135-121" href="#__codelineno-135-121"></a>let mut map = HashMap::new();
<a id="__codelineno-135-122" name="__codelineno-135-122" href="#__codelineno-135-122"></a>
<a id="__codelineno-135-123" name="__codelineno-135-123" href="#__codelineno-135-123"></a>
<a id="__codelineno-135-124" name="__codelineno-135-124" href="#__codelineno-135-124"></a>
<a id="__codelineno-135-125" name="__codelineno-135-125" href="#__codelineno-135-125"></a>map.insert(&quot;Authorization&quot;.to_string(), format!(&quot;Api-Token {}&quot;, dt_api_token));
<a id="__codelineno-135-126" name="__codelineno-135-126" href="#__codelineno-135-126"></a>
<a id="__codelineno-135-127" name="__codelineno-135-127" href="#__codelineno-135-127"></a>
<a id="__codelineno-135-128" name="__codelineno-135-128" href="#__codelineno-135-128"></a>
<a id="__codelineno-135-129" name="__codelineno-135-129" href="#__codelineno-135-129"></a>let resource = Resource::builder()
<a id="__codelineno-135-130" name="__codelineno-135-130" href="#__codelineno-135-130"></a>
<a id="__codelineno-135-131" name="__codelineno-135-131" href="#__codelineno-135-131"></a>
<a id="__codelineno-135-132" name="__codelineno-135-132" href="#__codelineno-135-132"></a>
<a id="__codelineno-135-133" name="__codelineno-135-133" href="#__codelineno-135-133"></a>.with_service_name(&quot;rust-manual-quickstart&quot;)
<a id="__codelineno-135-134" name="__codelineno-135-134" href="#__codelineno-135-134"></a>
<a id="__codelineno-135-135" name="__codelineno-135-135" href="#__codelineno-135-135"></a>
<a id="__codelineno-135-136" name="__codelineno-135-136" href="#__codelineno-135-136"></a>
<a id="__codelineno-135-137" name="__codelineno-135-137" href="#__codelineno-135-137"></a>.with_attributes(read_dt_metadata())
<a id="__codelineno-135-138" name="__codelineno-135-138" href="#__codelineno-135-138"></a>
<a id="__codelineno-135-139" name="__codelineno-135-139" href="#__codelineno-135-139"></a>
<a id="__codelineno-135-140" name="__codelineno-135-140" href="#__codelineno-135-140"></a>
<a id="__codelineno-135-141" name="__codelineno-135-141" href="#__codelineno-135-141"></a>.build();
<a id="__codelineno-135-142" name="__codelineno-135-142" href="#__codelineno-135-142"></a>
<a id="__codelineno-135-143" name="__codelineno-135-143" href="#__codelineno-135-143"></a>
<a id="__codelineno-135-144" name="__codelineno-135-144" href="#__codelineno-135-144"></a>
<a id="__codelineno-135-145" name="__codelineno-135-145" href="#__codelineno-135-145"></a>// ===== TRACING SETUP =====
<a id="__codelineno-135-146" name="__codelineno-135-146" href="#__codelineno-135-146"></a>
<a id="__codelineno-135-147" name="__codelineno-135-147" href="#__codelineno-135-147"></a>
<a id="__codelineno-135-148" name="__codelineno-135-148" href="#__codelineno-135-148"></a>
<a id="__codelineno-135-149" name="__codelineno-135-149" href="#__codelineno-135-149"></a>global::set_text_map_propagator(TraceContextPropagator::new());
<a id="__codelineno-135-150" name="__codelineno-135-150" href="#__codelineno-135-150"></a>
<a id="__codelineno-135-151" name="__codelineno-135-151" href="#__codelineno-135-151"></a>
<a id="__codelineno-135-152" name="__codelineno-135-152" href="#__codelineno-135-152"></a>
<a id="__codelineno-135-153" name="__codelineno-135-153" href="#__codelineno-135-153"></a>let tracer_exporter = SpanExporter::builder()
<a id="__codelineno-135-154" name="__codelineno-135-154" href="#__codelineno-135-154"></a>
<a id="__codelineno-135-155" name="__codelineno-135-155" href="#__codelineno-135-155"></a>
<a id="__codelineno-135-156" name="__codelineno-135-156" href="#__codelineno-135-156"></a>
<a id="__codelineno-135-157" name="__codelineno-135-157" href="#__codelineno-135-157"></a>.with_http()
<a id="__codelineno-135-158" name="__codelineno-135-158" href="#__codelineno-135-158"></a>
<a id="__codelineno-135-159" name="__codelineno-135-159" href="#__codelineno-135-159"></a>
<a id="__codelineno-135-160" name="__codelineno-135-160" href="#__codelineno-135-160"></a>
<a id="__codelineno-135-161" name="__codelineno-135-161" href="#__codelineno-135-161"></a>.with_headers(map.clone())
<a id="__codelineno-135-162" name="__codelineno-135-162" href="#__codelineno-135-162"></a>
<a id="__codelineno-135-163" name="__codelineno-135-163" href="#__codelineno-135-163"></a>
<a id="__codelineno-135-164" name="__codelineno-135-164" href="#__codelineno-135-164"></a>
<a id="__codelineno-135-165" name="__codelineno-135-165" href="#__codelineno-135-165"></a>.with_protocol(Protocol::HttpBinary)
<a id="__codelineno-135-166" name="__codelineno-135-166" href="#__codelineno-135-166"></a>
<a id="__codelineno-135-167" name="__codelineno-135-167" href="#__codelineno-135-167"></a>
<a id="__codelineno-135-168" name="__codelineno-135-168" href="#__codelineno-135-168"></a>
<a id="__codelineno-135-169" name="__codelineno-135-169" href="#__codelineno-135-169"></a>.with_endpoint(dt_api_url.clone() + &quot;/v1/traces&quot;)
<a id="__codelineno-135-170" name="__codelineno-135-170" href="#__codelineno-135-170"></a>
<a id="__codelineno-135-171" name="__codelineno-135-171" href="#__codelineno-135-171"></a>
<a id="__codelineno-135-172" name="__codelineno-135-172" href="#__codelineno-135-172"></a>
<a id="__codelineno-135-173" name="__codelineno-135-173" href="#__codelineno-135-173"></a>.build()
<a id="__codelineno-135-174" name="__codelineno-135-174" href="#__codelineno-135-174"></a>
<a id="__codelineno-135-175" name="__codelineno-135-175" href="#__codelineno-135-175"></a>
<a id="__codelineno-135-176" name="__codelineno-135-176" href="#__codelineno-135-176"></a>
<a id="__codelineno-135-177" name="__codelineno-135-177" href="#__codelineno-135-177"></a>.unwrap();
<a id="__codelineno-135-178" name="__codelineno-135-178" href="#__codelineno-135-178"></a>
<a id="__codelineno-135-179" name="__codelineno-135-179" href="#__codelineno-135-179"></a>
<a id="__codelineno-135-180" name="__codelineno-135-180" href="#__codelineno-135-180"></a>
<a id="__codelineno-135-181" name="__codelineno-135-181" href="#__codelineno-135-181"></a>let tracer_provider = SdkTracerProvider::builder()
<a id="__codelineno-135-182" name="__codelineno-135-182" href="#__codelineno-135-182"></a>
<a id="__codelineno-135-183" name="__codelineno-135-183" href="#__codelineno-135-183"></a>
<a id="__codelineno-135-184" name="__codelineno-135-184" href="#__codelineno-135-184"></a>
<a id="__codelineno-135-185" name="__codelineno-135-185" href="#__codelineno-135-185"></a>.with_resource(resource.clone())
<a id="__codelineno-135-186" name="__codelineno-135-186" href="#__codelineno-135-186"></a>
<a id="__codelineno-135-187" name="__codelineno-135-187" href="#__codelineno-135-187"></a>
<a id="__codelineno-135-188" name="__codelineno-135-188" href="#__codelineno-135-188"></a>
<a id="__codelineno-135-189" name="__codelineno-135-189" href="#__codelineno-135-189"></a>.with_batch_exporter(tracer_exporter)
<a id="__codelineno-135-190" name="__codelineno-135-190" href="#__codelineno-135-190"></a>
<a id="__codelineno-135-191" name="__codelineno-135-191" href="#__codelineno-135-191"></a>
<a id="__codelineno-135-192" name="__codelineno-135-192" href="#__codelineno-135-192"></a>
<a id="__codelineno-135-193" name="__codelineno-135-193" href="#__codelineno-135-193"></a>.build();
<a id="__codelineno-135-194" name="__codelineno-135-194" href="#__codelineno-135-194"></a>
<a id="__codelineno-135-195" name="__codelineno-135-195" href="#__codelineno-135-195"></a>
<a id="__codelineno-135-196" name="__codelineno-135-196" href="#__codelineno-135-196"></a>
<a id="__codelineno-135-197" name="__codelineno-135-197" href="#__codelineno-135-197"></a>global::set_tracer_provider(tracer_provider.clone());
<a id="__codelineno-135-198" name="__codelineno-135-198" href="#__codelineno-135-198"></a>
<a id="__codelineno-135-199" name="__codelineno-135-199" href="#__codelineno-135-199"></a>
<a id="__codelineno-135-200" name="__codelineno-135-200" href="#__codelineno-135-200"></a>
<a id="__codelineno-135-201" name="__codelineno-135-201" href="#__codelineno-135-201"></a>// ===== METRICS SETUP ======
<a id="__codelineno-135-202" name="__codelineno-135-202" href="#__codelineno-135-202"></a>
<a id="__codelineno-135-203" name="__codelineno-135-203" href="#__codelineno-135-203"></a>
<a id="__codelineno-135-204" name="__codelineno-135-204" href="#__codelineno-135-204"></a>
<a id="__codelineno-135-205" name="__codelineno-135-205" href="#__codelineno-135-205"></a>let metrics_exporter = MetricExporter::builder()
<a id="__codelineno-135-206" name="__codelineno-135-206" href="#__codelineno-135-206"></a>
<a id="__codelineno-135-207" name="__codelineno-135-207" href="#__codelineno-135-207"></a>
<a id="__codelineno-135-208" name="__codelineno-135-208" href="#__codelineno-135-208"></a>
<a id="__codelineno-135-209" name="__codelineno-135-209" href="#__codelineno-135-209"></a>.with_http()
<a id="__codelineno-135-210" name="__codelineno-135-210" href="#__codelineno-135-210"></a>
<a id="__codelineno-135-211" name="__codelineno-135-211" href="#__codelineno-135-211"></a>
<a id="__codelineno-135-212" name="__codelineno-135-212" href="#__codelineno-135-212"></a>
<a id="__codelineno-135-213" name="__codelineno-135-213" href="#__codelineno-135-213"></a>.with_headers(map.clone())
<a id="__codelineno-135-214" name="__codelineno-135-214" href="#__codelineno-135-214"></a>
<a id="__codelineno-135-215" name="__codelineno-135-215" href="#__codelineno-135-215"></a>
<a id="__codelineno-135-216" name="__codelineno-135-216" href="#__codelineno-135-216"></a>
<a id="__codelineno-135-217" name="__codelineno-135-217" href="#__codelineno-135-217"></a>.with_endpoint(dt_api_url.clone() + &quot;/v1/metrics&quot;)
<a id="__codelineno-135-218" name="__codelineno-135-218" href="#__codelineno-135-218"></a>
<a id="__codelineno-135-219" name="__codelineno-135-219" href="#__codelineno-135-219"></a>
<a id="__codelineno-135-220" name="__codelineno-135-220" href="#__codelineno-135-220"></a>
<a id="__codelineno-135-221" name="__codelineno-135-221" href="#__codelineno-135-221"></a>.with_protocol(opentelemetry_otlp::Protocol::HttpBinary)
<a id="__codelineno-135-222" name="__codelineno-135-222" href="#__codelineno-135-222"></a>
<a id="__codelineno-135-223" name="__codelineno-135-223" href="#__codelineno-135-223"></a>
<a id="__codelineno-135-224" name="__codelineno-135-224" href="#__codelineno-135-224"></a>
<a id="__codelineno-135-225" name="__codelineno-135-225" href="#__codelineno-135-225"></a>.build()
<a id="__codelineno-135-226" name="__codelineno-135-226" href="#__codelineno-135-226"></a>
<a id="__codelineno-135-227" name="__codelineno-135-227" href="#__codelineno-135-227"></a>
<a id="__codelineno-135-228" name="__codelineno-135-228" href="#__codelineno-135-228"></a>
<a id="__codelineno-135-229" name="__codelineno-135-229" href="#__codelineno-135-229"></a>.unwrap();
<a id="__codelineno-135-230" name="__codelineno-135-230" href="#__codelineno-135-230"></a>
<a id="__codelineno-135-231" name="__codelineno-135-231" href="#__codelineno-135-231"></a>
<a id="__codelineno-135-232" name="__codelineno-135-232" href="#__codelineno-135-232"></a>
<a id="__codelineno-135-233" name="__codelineno-135-233" href="#__codelineno-135-233"></a>let meter_provider = SdkMeterProvider::builder()
<a id="__codelineno-135-234" name="__codelineno-135-234" href="#__codelineno-135-234"></a>
<a id="__codelineno-135-235" name="__codelineno-135-235" href="#__codelineno-135-235"></a>
<a id="__codelineno-135-236" name="__codelineno-135-236" href="#__codelineno-135-236"></a>
<a id="__codelineno-135-237" name="__codelineno-135-237" href="#__codelineno-135-237"></a>.with_reader(PeriodicReader::builder(metrics_exporter).build())
<a id="__codelineno-135-238" name="__codelineno-135-238" href="#__codelineno-135-238"></a>
<a id="__codelineno-135-239" name="__codelineno-135-239" href="#__codelineno-135-239"></a>
<a id="__codelineno-135-240" name="__codelineno-135-240" href="#__codelineno-135-240"></a>
<a id="__codelineno-135-241" name="__codelineno-135-241" href="#__codelineno-135-241"></a>.with_resource(resource.clone())
<a id="__codelineno-135-242" name="__codelineno-135-242" href="#__codelineno-135-242"></a>
<a id="__codelineno-135-243" name="__codelineno-135-243" href="#__codelineno-135-243"></a>
<a id="__codelineno-135-244" name="__codelineno-135-244" href="#__codelineno-135-244"></a>
<a id="__codelineno-135-245" name="__codelineno-135-245" href="#__codelineno-135-245"></a>.build();
<a id="__codelineno-135-246" name="__codelineno-135-246" href="#__codelineno-135-246"></a>
<a id="__codelineno-135-247" name="__codelineno-135-247" href="#__codelineno-135-247"></a>
<a id="__codelineno-135-248" name="__codelineno-135-248" href="#__codelineno-135-248"></a>
<a id="__codelineno-135-249" name="__codelineno-135-249" href="#__codelineno-135-249"></a>global::set_meter_provider(meter_provider);
<a id="__codelineno-135-250" name="__codelineno-135-250" href="#__codelineno-135-250"></a>
<a id="__codelineno-135-251" name="__codelineno-135-251" href="#__codelineno-135-251"></a>
<a id="__codelineno-135-252" name="__codelineno-135-252" href="#__codelineno-135-252"></a>
<a id="__codelineno-135-253" name="__codelineno-135-253" href="#__codelineno-135-253"></a>// ===== LOGS SETUP ======
<a id="__codelineno-135-254" name="__codelineno-135-254" href="#__codelineno-135-254"></a>
<a id="__codelineno-135-255" name="__codelineno-135-255" href="#__codelineno-135-255"></a>
<a id="__codelineno-135-256" name="__codelineno-135-256" href="#__codelineno-135-256"></a>
<a id="__codelineno-135-257" name="__codelineno-135-257" href="#__codelineno-135-257"></a>let logger_exporter = LogExporter::builder()
<a id="__codelineno-135-258" name="__codelineno-135-258" href="#__codelineno-135-258"></a>
<a id="__codelineno-135-259" name="__codelineno-135-259" href="#__codelineno-135-259"></a>
<a id="__codelineno-135-260" name="__codelineno-135-260" href="#__codelineno-135-260"></a>
<a id="__codelineno-135-261" name="__codelineno-135-261" href="#__codelineno-135-261"></a>.with_http()
<a id="__codelineno-135-262" name="__codelineno-135-262" href="#__codelineno-135-262"></a>
<a id="__codelineno-135-263" name="__codelineno-135-263" href="#__codelineno-135-263"></a>
<a id="__codelineno-135-264" name="__codelineno-135-264" href="#__codelineno-135-264"></a>
<a id="__codelineno-135-265" name="__codelineno-135-265" href="#__codelineno-135-265"></a>.with_headers(map.clone())
<a id="__codelineno-135-266" name="__codelineno-135-266" href="#__codelineno-135-266"></a>
<a id="__codelineno-135-267" name="__codelineno-135-267" href="#__codelineno-135-267"></a>
<a id="__codelineno-135-268" name="__codelineno-135-268" href="#__codelineno-135-268"></a>
<a id="__codelineno-135-269" name="__codelineno-135-269" href="#__codelineno-135-269"></a>.with_endpoint(dt_api_url.clone() + &quot;/v1/logs&quot;)
<a id="__codelineno-135-270" name="__codelineno-135-270" href="#__codelineno-135-270"></a>
<a id="__codelineno-135-271" name="__codelineno-135-271" href="#__codelineno-135-271"></a>
<a id="__codelineno-135-272" name="__codelineno-135-272" href="#__codelineno-135-272"></a>
<a id="__codelineno-135-273" name="__codelineno-135-273" href="#__codelineno-135-273"></a>.with_protocol(opentelemetry_otlp::Protocol::HttpBinary)
<a id="__codelineno-135-274" name="__codelineno-135-274" href="#__codelineno-135-274"></a>
<a id="__codelineno-135-275" name="__codelineno-135-275" href="#__codelineno-135-275"></a>
<a id="__codelineno-135-276" name="__codelineno-135-276" href="#__codelineno-135-276"></a>
<a id="__codelineno-135-277" name="__codelineno-135-277" href="#__codelineno-135-277"></a>.build()
<a id="__codelineno-135-278" name="__codelineno-135-278" href="#__codelineno-135-278"></a>
<a id="__codelineno-135-279" name="__codelineno-135-279" href="#__codelineno-135-279"></a>
<a id="__codelineno-135-280" name="__codelineno-135-280" href="#__codelineno-135-280"></a>
<a id="__codelineno-135-281" name="__codelineno-135-281" href="#__codelineno-135-281"></a>.unwrap();
<a id="__codelineno-135-282" name="__codelineno-135-282" href="#__codelineno-135-282"></a>
<a id="__codelineno-135-283" name="__codelineno-135-283" href="#__codelineno-135-283"></a>
<a id="__codelineno-135-284" name="__codelineno-135-284" href="#__codelineno-135-284"></a>
<a id="__codelineno-135-285" name="__codelineno-135-285" href="#__codelineno-135-285"></a>let logger_provider = SdkLoggerProvider::builder()
<a id="__codelineno-135-286" name="__codelineno-135-286" href="#__codelineno-135-286"></a>
<a id="__codelineno-135-287" name="__codelineno-135-287" href="#__codelineno-135-287"></a>
<a id="__codelineno-135-288" name="__codelineno-135-288" href="#__codelineno-135-288"></a>
<a id="__codelineno-135-289" name="__codelineno-135-289" href="#__codelineno-135-289"></a>.with_batch_exporter(logger_exporter)
<a id="__codelineno-135-290" name="__codelineno-135-290" href="#__codelineno-135-290"></a>
<a id="__codelineno-135-291" name="__codelineno-135-291" href="#__codelineno-135-291"></a>
<a id="__codelineno-135-292" name="__codelineno-135-292" href="#__codelineno-135-292"></a>
<a id="__codelineno-135-293" name="__codelineno-135-293" href="#__codelineno-135-293"></a>.with_resource(resource.clone())
<a id="__codelineno-135-294" name="__codelineno-135-294" href="#__codelineno-135-294"></a>
<a id="__codelineno-135-295" name="__codelineno-135-295" href="#__codelineno-135-295"></a>
<a id="__codelineno-135-296" name="__codelineno-135-296" href="#__codelineno-135-296"></a>
<a id="__codelineno-135-297" name="__codelineno-135-297" href="#__codelineno-135-297"></a>.build();
<a id="__codelineno-135-298" name="__codelineno-135-298" href="#__codelineno-135-298"></a>
<a id="__codelineno-135-299" name="__codelineno-135-299" href="#__codelineno-135-299"></a>
<a id="__codelineno-135-300" name="__codelineno-135-300" href="#__codelineno-135-300"></a>
<a id="__codelineno-135-301" name="__codelineno-135-301" href="#__codelineno-135-301"></a>let otel_log_appender = OpenTelemetryLogBridge::new(&amp;logger_provider);
<a id="__codelineno-135-302" name="__codelineno-135-302" href="#__codelineno-135-302"></a>
<a id="__codelineno-135-303" name="__codelineno-135-303" href="#__codelineno-135-303"></a>
<a id="__codelineno-135-304" name="__codelineno-135-304" href="#__codelineno-135-304"></a>
<a id="__codelineno-135-305" name="__codelineno-135-305" href="#__codelineno-135-305"></a>log::set_boxed_logger(Box::new(otel_log_appender)).unwrap();
<a id="__codelineno-135-306" name="__codelineno-135-306" href="#__codelineno-135-306"></a>
<a id="__codelineno-135-307" name="__codelineno-135-307" href="#__codelineno-135-307"></a>
<a id="__codelineno-135-308" name="__codelineno-135-308" href="#__codelineno-135-308"></a>
<a id="__codelineno-135-309" name="__codelineno-135-309" href="#__codelineno-135-309"></a>log::set_max_level(Level::Debug.to_level_filter());
<a id="__codelineno-135-310" name="__codelineno-135-310" href="#__codelineno-135-310"></a>
<a id="__codelineno-135-311" name="__codelineno-135-311" href="#__codelineno-135-311"></a>
<a id="__codelineno-135-312" name="__codelineno-135-312" href="#__codelineno-135-312"></a>
<a id="__codelineno-135-313" name="__codelineno-135-313" href="#__codelineno-135-313"></a>}
</code></pre></div>
<p>The file read operations, parsing the <code>dt_metadata</code> files in the example code, attempt to read the <a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">OneAgent data files</a> to enrich the OTLP request and ensure that all relevant topology information is available within Dynatrace.
4. Make sure the environment variables <code>DT_API_URL</code> and <code>DT_API_TOKEN</code> are properly configured for the <a href="#base-url">Dynatrace URL</a> and <a href="#access-token">access token</a>.
5. Call <code>init_opentelemetry()</code> as early as possible in your startup code.</p>
<h2 id="step-3-instrument-your-application_2">Step 3 Instrument your application<a class="headerlink" href="#step-3-instrument-your-application_2" title="Permanent link">&para;</a></h2>
<h3 id="add-tracing_5">Add tracing<a class="headerlink" href="#add-tracing_5" title="Permanent link">&para;</a></h3>
<ol>
<li>First, we need to get a tracer object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a>let tracer = global::tracer(&quot;my-tracer&quot;);
</code></pre></div>
2. With <code>tracer</code>, we can now start new spans.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-137-1" name="__codelineno-137-1" href="#__codelineno-137-1"></a>let mut _span = tracer
<a id="__codelineno-137-2" name="__codelineno-137-2" href="#__codelineno-137-2"></a>
<a id="__codelineno-137-3" name="__codelineno-137-3" href="#__codelineno-137-3"></a>
<a id="__codelineno-137-4" name="__codelineno-137-4" href="#__codelineno-137-4"></a>
<a id="__codelineno-137-5" name="__codelineno-137-5" href="#__codelineno-137-5"></a>.span_builder(&quot;Call to /myendpoint&quot;)
<a id="__codelineno-137-6" name="__codelineno-137-6" href="#__codelineno-137-6"></a>
<a id="__codelineno-137-7" name="__codelineno-137-7" href="#__codelineno-137-7"></a>
<a id="__codelineno-137-8" name="__codelineno-137-8" href="#__codelineno-137-8"></a>
<a id="__codelineno-137-9" name="__codelineno-137-9" href="#__codelineno-137-9"></a>.with_kind(SpanKind::Internal)
<a id="__codelineno-137-10" name="__codelineno-137-10" href="#__codelineno-137-10"></a>
<a id="__codelineno-137-11" name="__codelineno-137-11" href="#__codelineno-137-11"></a>
<a id="__codelineno-137-12" name="__codelineno-137-12" href="#__codelineno-137-12"></a>
<a id="__codelineno-137-13" name="__codelineno-137-13" href="#__codelineno-137-13"></a>.start(&amp;tracer);
<a id="__codelineno-137-14" name="__codelineno-137-14" href="#__codelineno-137-14"></a>
<a id="__codelineno-137-15" name="__codelineno-137-15" href="#__codelineno-137-15"></a>
<a id="__codelineno-137-16" name="__codelineno-137-16" href="#__codelineno-137-16"></a>
<a id="__codelineno-137-17" name="__codelineno-137-17" href="#__codelineno-137-17"></a>_span.set_attribute(KeyValue::new(&quot;http.method&quot;, &quot;GET&quot;));
<a id="__codelineno-137-18" name="__codelineno-137-18" href="#__codelineno-137-18"></a>
<a id="__codelineno-137-19" name="__codelineno-137-19" href="#__codelineno-137-19"></a>
<a id="__codelineno-137-20" name="__codelineno-137-20" href="#__codelineno-137-20"></a>
<a id="__codelineno-137-21" name="__codelineno-137-21" href="#__codelineno-137-21"></a>_span.set_attribute(KeyValue::new(&quot;net.protocol.version&quot;, &quot;1.1&quot;));
<a id="__codelineno-137-22" name="__codelineno-137-22" href="#__codelineno-137-22"></a>
<a id="__codelineno-137-23" name="__codelineno-137-23" href="#__codelineno-137-23"></a>
<a id="__codelineno-137-24" name="__codelineno-137-24" href="#__codelineno-137-24"></a>
<a id="__codelineno-137-25" name="__codelineno-137-25" href="#__codelineno-137-25"></a>// TODO: Your code goes here
<a id="__codelineno-137-26" name="__codelineno-137-26" href="#__codelineno-137-26"></a>
<a id="__codelineno-137-27" name="__codelineno-137-27" href="#__codelineno-137-27"></a>
<a id="__codelineno-137-28" name="__codelineno-137-28" href="#__codelineno-137-28"></a>
<a id="__codelineno-137-29" name="__codelineno-137-29" href="#__codelineno-137-29"></a>_span.end();
</code></pre></div>
<p>In the above code, we:</p>
<ul>
<li>Create a new span and name it "Call to /myendpoint"</li>
<li>Add two attributes, following the <a href="https://opentelemetry.io/docs/specs/semconv/general/trace/">semantic naming convention√Ø¬ª¬ø</a>, specific to the action of this span: information on the HTTP method and version</li>
<li>Add a <code>TODO</code> in place of the eventual business logic</li>
<li>Call the span's <code>end()</code> method to complete the span</li>
</ul>
<h3 id="collect-metrics_5">Collect metrics<a class="headerlink" href="#collect-metrics_5" title="Permanent link">&para;</a></h3>
<ol>
<li>First, we need to get a tracer object.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-138-1" name="__codelineno-138-1" href="#__codelineno-138-1"></a>let meter = global::meter(&quot;request_counter&quot;);
</code></pre></div>
2. With <code>meter</code>, we can now create individual instruments, such as a counter.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-139-1" name="__codelineno-139-1" href="#__codelineno-139-1"></a>let updown_counter = meter.i64_up_down_counter(&quot;request_counter&quot;).build();
</code></pre></div>
3. We can now invoke the <code>add()</code> method of <code>updown_counter</code> to record new values with the counter.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-140-1" name="__codelineno-140-1" href="#__codelineno-140-1"></a>updown_counter.add(1,&amp;[],);
</code></pre></div>
<h3 id="connect-logs_5">Connect logs<a class="headerlink" href="#connect-logs_5" title="Permanent link">&para;</a></h3>
<p>In <code>init_opentelemetry()</code>, we earlier initialized the <a href="https://docs.rs/log/latest/log/">log√Ø¬ª¬ø</a> crate with its OpenTelemetry log bridge and can now call any of its <a href="https://docs.rs/log/latest/log/#macros">logging macros√Ø¬ª¬ø</a> to log directly to Dynatrace.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-141-1" name="__codelineno-141-1" href="#__codelineno-141-1"></a>error!(&quot;logging an error&quot;);
<a id="__codelineno-141-2" name="__codelineno-141-2" href="#__codelineno-141-2"></a>
<a id="__codelineno-141-3" name="__codelineno-141-3" href="#__codelineno-141-3"></a>
<a id="__codelineno-141-4" name="__codelineno-141-4" href="#__codelineno-141-4"></a>
<a id="__codelineno-141-5" name="__codelineno-141-5" href="#__codelineno-141-5"></a>debug!(&quot;logging a debug message&quot;);
</code></pre></div>
<p>Maximum log level</p>
<p>Note the call to the <a href="https://docs.rs/log/latest/log/fn.set_max_level.html"><code>log::set_max_level</code>√Ø¬ª¬ø</a> method in the <a href="#set-up-opentelemetry">initialization of OpenTelemetry</a> earlier. This sets the maximum log level of the log crate to <code>Level::Debug</code> and is required for the logged messages at that level to be emitted in the first place and picked up by the OpenTelemetry log bridge. Adjust this if you use a different maximum log level.</p>
<h3 id="ensure-context-propagation-optional_5">Ensure context propagation Optional<a class="headerlink" href="#ensure-context-propagation-optional_5" title="Permanent link">&para;</a></h3>
<p>Context propagation is particularly important when network calls (for example, REST) are involved.</p>
<h4 id="extracting-the-context-when-receiving-a-request_5">Extracting the context when receiving a request<a class="headerlink" href="#extracting-the-context-when-receiving-a-request_5" title="Permanent link">&para;</a></h4>
<p>To continue an existing trace from an HTTP request, we first need to extract the context. For this, we declare the function <code>extract_context_from_request()</code>, which takes the incoming request object, extracts the passed context using the propagator's <code>extract()</code> method, and returns the matching context object.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-142-1" name="__codelineno-142-1" href="#__codelineno-142-1"></a>// Utility function to extract the context from the incoming request headers
<a id="__codelineno-142-2" name="__codelineno-142-2" href="#__codelineno-142-2"></a>
<a id="__codelineno-142-3" name="__codelineno-142-3" href="#__codelineno-142-3"></a>
<a id="__codelineno-142-4" name="__codelineno-142-4" href="#__codelineno-142-4"></a>
<a id="__codelineno-142-5" name="__codelineno-142-5" href="#__codelineno-142-5"></a>fn extract_context_from_request(req: &amp;Request&lt;Incoming&gt;) -&gt; Context {
<a id="__codelineno-142-6" name="__codelineno-142-6" href="#__codelineno-142-6"></a>
<a id="__codelineno-142-7" name="__codelineno-142-7" href="#__codelineno-142-7"></a>
<a id="__codelineno-142-8" name="__codelineno-142-8" href="#__codelineno-142-8"></a>
<a id="__codelineno-142-9" name="__codelineno-142-9" href="#__codelineno-142-9"></a>global::get_text_map_propagator(|propagator| {
<a id="__codelineno-142-10" name="__codelineno-142-10" href="#__codelineno-142-10"></a>
<a id="__codelineno-142-11" name="__codelineno-142-11" href="#__codelineno-142-11"></a>
<a id="__codelineno-142-12" name="__codelineno-142-12" href="#__codelineno-142-12"></a>
<a id="__codelineno-142-13" name="__codelineno-142-13" href="#__codelineno-142-13"></a>propagator.extract(&amp;HeaderExtractor(req.headers()))
<a id="__codelineno-142-14" name="__codelineno-142-14" href="#__codelineno-142-14"></a>
<a id="__codelineno-142-15" name="__codelineno-142-15" href="#__codelineno-142-15"></a>
<a id="__codelineno-142-16" name="__codelineno-142-16" href="#__codelineno-142-16"></a>
<a id="__codelineno-142-17" name="__codelineno-142-17" href="#__codelineno-142-17"></a>})
<a id="__codelineno-142-18" name="__codelineno-142-18" href="#__codelineno-142-18"></a>
<a id="__codelineno-142-19" name="__codelineno-142-19" href="#__codelineno-142-19"></a>
<a id="__codelineno-142-20" name="__codelineno-142-20" href="#__codelineno-142-20"></a>
<a id="__codelineno-142-21" name="__codelineno-142-21" href="#__codelineno-142-21"></a>}
</code></pre></div>
<p>We can then use <code>extract_context_from_request()</code> in our request handler to obtain that context and pass it as parent to our own, new <a href="https://opentelemetry.io/docs/concepts/signals/traces/#server">server span√Ø¬ª¬ø</a> using <code>start_with_context()</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-143-1" name="__codelineno-143-1" href="#__codelineno-143-1"></a>async fn router(req: Request&lt;Incoming&gt;) -&gt; Result&lt;Response&lt;BoxBody&lt;Bytes, hyper::Error&gt;&gt;, Infallible&gt; {
<a id="__codelineno-143-2" name="__codelineno-143-2" href="#__codelineno-143-2"></a>
<a id="__codelineno-143-3" name="__codelineno-143-3" href="#__codelineno-143-3"></a>
<a id="__codelineno-143-4" name="__codelineno-143-4" href="#__codelineno-143-4"></a>
<a id="__codelineno-143-5" name="__codelineno-143-5" href="#__codelineno-143-5"></a>// Extract the context from the incoming request headers
<a id="__codelineno-143-6" name="__codelineno-143-6" href="#__codelineno-143-6"></a>
<a id="__codelineno-143-7" name="__codelineno-143-7" href="#__codelineno-143-7"></a>
<a id="__codelineno-143-8" name="__codelineno-143-8" href="#__codelineno-143-8"></a>
<a id="__codelineno-143-9" name="__codelineno-143-9" href="#__codelineno-143-9"></a>let parent_cx = extract_context_from_request(&amp;req);
<a id="__codelineno-143-10" name="__codelineno-143-10" href="#__codelineno-143-10"></a>
<a id="__codelineno-143-11" name="__codelineno-143-11" href="#__codelineno-143-11"></a>
<a id="__codelineno-143-12" name="__codelineno-143-12" href="#__codelineno-143-12"></a>
<a id="__codelineno-143-13" name="__codelineno-143-13" href="#__codelineno-143-13"></a>let response = {
<a id="__codelineno-143-14" name="__codelineno-143-14" href="#__codelineno-143-14"></a>
<a id="__codelineno-143-15" name="__codelineno-143-15" href="#__codelineno-143-15"></a>
<a id="__codelineno-143-16" name="__codelineno-143-16" href="#__codelineno-143-16"></a>
<a id="__codelineno-143-17" name="__codelineno-143-17" href="#__codelineno-143-17"></a>// Create a span parenting the remote client span.
<a id="__codelineno-143-18" name="__codelineno-143-18" href="#__codelineno-143-18"></a>
<a id="__codelineno-143-19" name="__codelineno-143-19" href="#__codelineno-143-19"></a>
<a id="__codelineno-143-20" name="__codelineno-143-20" href="#__codelineno-143-20"></a>
<a id="__codelineno-143-21" name="__codelineno-143-21" href="#__codelineno-143-21"></a>let tracer = global::tracer(&quot;example/server&quot;);
<a id="__codelineno-143-22" name="__codelineno-143-22" href="#__codelineno-143-22"></a>
<a id="__codelineno-143-23" name="__codelineno-143-23" href="#__codelineno-143-23"></a>
<a id="__codelineno-143-24" name="__codelineno-143-24" href="#__codelineno-143-24"></a>
<a id="__codelineno-143-25" name="__codelineno-143-25" href="#__codelineno-143-25"></a>let mut span = tracer
<a id="__codelineno-143-26" name="__codelineno-143-26" href="#__codelineno-143-26"></a>
<a id="__codelineno-143-27" name="__codelineno-143-27" href="#__codelineno-143-27"></a>
<a id="__codelineno-143-28" name="__codelineno-143-28" href="#__codelineno-143-28"></a>
<a id="__codelineno-143-29" name="__codelineno-143-29" href="#__codelineno-143-29"></a>.span_builder(&quot;router&quot;)
<a id="__codelineno-143-30" name="__codelineno-143-30" href="#__codelineno-143-30"></a>
<a id="__codelineno-143-31" name="__codelineno-143-31" href="#__codelineno-143-31"></a>
<a id="__codelineno-143-32" name="__codelineno-143-32" href="#__codelineno-143-32"></a>
<a id="__codelineno-143-33" name="__codelineno-143-33" href="#__codelineno-143-33"></a>.with_kind(SpanKind::Server)
<a id="__codelineno-143-34" name="__codelineno-143-34" href="#__codelineno-143-34"></a>
<a id="__codelineno-143-35" name="__codelineno-143-35" href="#__codelineno-143-35"></a>
<a id="__codelineno-143-36" name="__codelineno-143-36" href="#__codelineno-143-36"></a>
<a id="__codelineno-143-37" name="__codelineno-143-37" href="#__codelineno-143-37"></a>.start_with_context(&amp;tracer, &amp;parent_cx);
<a id="__codelineno-143-38" name="__codelineno-143-38" href="#__codelineno-143-38"></a>
<a id="__codelineno-143-39" name="__codelineno-143-39" href="#__codelineno-143-39"></a>
<a id="__codelineno-143-40" name="__codelineno-143-40" href="#__codelineno-143-40"></a>
<a id="__codelineno-143-41" name="__codelineno-143-41" href="#__codelineno-143-41"></a>// Adding custom attributes
<a id="__codelineno-143-42" name="__codelineno-143-42" href="#__codelineno-143-42"></a>
<a id="__codelineno-143-43" name="__codelineno-143-43" href="#__codelineno-143-43"></a>
<a id="__codelineno-143-44" name="__codelineno-143-44" href="#__codelineno-143-44"></a>
<a id="__codelineno-143-45" name="__codelineno-143-45" href="#__codelineno-143-45"></a>span.set_attribute(KeyValue::new(&quot;my-server-key-1&quot;, &quot;my-server-value-1&quot;));
<a id="__codelineno-143-46" name="__codelineno-143-46" href="#__codelineno-143-46"></a>
<a id="__codelineno-143-47" name="__codelineno-143-47" href="#__codelineno-143-47"></a>
<a id="__codelineno-143-48" name="__codelineno-143-48" href="#__codelineno-143-48"></a>
<a id="__codelineno-143-49" name="__codelineno-143-49" href="#__codelineno-143-49"></a>};
<a id="__codelineno-143-50" name="__codelineno-143-50" href="#__codelineno-143-50"></a>
<a id="__codelineno-143-51" name="__codelineno-143-51" href="#__codelineno-143-51"></a>
<a id="__codelineno-143-52" name="__codelineno-143-52" href="#__codelineno-143-52"></a>
<a id="__codelineno-143-53" name="__codelineno-143-53" href="#__codelineno-143-53"></a>// TODO Handle the HTTP request
<a id="__codelineno-143-54" name="__codelineno-143-54" href="#__codelineno-143-54"></a>
<a id="__codelineno-143-55" name="__codelineno-143-55" href="#__codelineno-143-55"></a>
<a id="__codelineno-143-56" name="__codelineno-143-56" href="#__codelineno-143-56"></a>
<a id="__codelineno-143-57" name="__codelineno-143-57" href="#__codelineno-143-57"></a>}
</code></pre></div>
<h4 id="injecting-the-context-when-sending-requests_5">Injecting the context when sending requests<a class="headerlink" href="#injecting-the-context-when-sending-requests_5" title="Permanent link">&para;</a></h4>
<p>To propagate the current context to another HTTP service, we inject the context information into the HTTP request headers. The following example declares the function <code>send_request()</code>, which takes the URL of the request, the request content, and sends the request using <a href="https://docs.rs/hyper/latest/hyper/index.html">hyper√Ø¬ª¬ø</a>.</p>
<p>Once the hyper request object is initialized, we call <code>get_text_map_propagator()</code> to obtain the global <code>propagator</code> object and then use its <code>inject_context()</code> function to add the current context information to the request.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-144-1" name="__codelineno-144-1" href="#__codelineno-144-1"></a>async fn send_request(url: &amp;str, body_content: &amp;str, span_name: &amp;str) -&gt; std::result::Result&lt;(), Box&lt;dyn std::error::Error + Send + Sync + &#39;static&gt;&gt; {
<a id="__codelineno-144-2" name="__codelineno-144-2" href="#__codelineno-144-2"></a>
<a id="__codelineno-144-3" name="__codelineno-144-3" href="#__codelineno-144-3"></a>
<a id="__codelineno-144-4" name="__codelineno-144-4" href="#__codelineno-144-4"></a>
<a id="__codelineno-144-5" name="__codelineno-144-5" href="#__codelineno-144-5"></a>let client = Client::builder(TokioExecutor::new()).build_http();
<a id="__codelineno-144-6" name="__codelineno-144-6" href="#__codelineno-144-6"></a>
<a id="__codelineno-144-7" name="__codelineno-144-7" href="#__codelineno-144-7"></a>
<a id="__codelineno-144-8" name="__codelineno-144-8" href="#__codelineno-144-8"></a>
<a id="__codelineno-144-9" name="__codelineno-144-9" href="#__codelineno-144-9"></a>let tracer = global::tracer(&quot;example/client&quot;);
<a id="__codelineno-144-10" name="__codelineno-144-10" href="#__codelineno-144-10"></a>
<a id="__codelineno-144-11" name="__codelineno-144-11" href="#__codelineno-144-11"></a>
<a id="__codelineno-144-12" name="__codelineno-144-12" href="#__codelineno-144-12"></a>
<a id="__codelineno-144-13" name="__codelineno-144-13" href="#__codelineno-144-13"></a>let span = tracer
<a id="__codelineno-144-14" name="__codelineno-144-14" href="#__codelineno-144-14"></a>
<a id="__codelineno-144-15" name="__codelineno-144-15" href="#__codelineno-144-15"></a>
<a id="__codelineno-144-16" name="__codelineno-144-16" href="#__codelineno-144-16"></a>
<a id="__codelineno-144-17" name="__codelineno-144-17" href="#__codelineno-144-17"></a>.span_builder(String::from(span_name))
<a id="__codelineno-144-18" name="__codelineno-144-18" href="#__codelineno-144-18"></a>
<a id="__codelineno-144-19" name="__codelineno-144-19" href="#__codelineno-144-19"></a>
<a id="__codelineno-144-20" name="__codelineno-144-20" href="#__codelineno-144-20"></a>
<a id="__codelineno-144-21" name="__codelineno-144-21" href="#__codelineno-144-21"></a>.with_kind(SpanKind::Client)
<a id="__codelineno-144-22" name="__codelineno-144-22" href="#__codelineno-144-22"></a>
<a id="__codelineno-144-23" name="__codelineno-144-23" href="#__codelineno-144-23"></a>
<a id="__codelineno-144-24" name="__codelineno-144-24" href="#__codelineno-144-24"></a>
<a id="__codelineno-144-25" name="__codelineno-144-25" href="#__codelineno-144-25"></a>.start(&amp;tracer);
<a id="__codelineno-144-26" name="__codelineno-144-26" href="#__codelineno-144-26"></a>
<a id="__codelineno-144-27" name="__codelineno-144-27" href="#__codelineno-144-27"></a>
<a id="__codelineno-144-28" name="__codelineno-144-28" href="#__codelineno-144-28"></a>
<a id="__codelineno-144-29" name="__codelineno-144-29" href="#__codelineno-144-29"></a>let cx = Context::current_with_span(span);
<a id="__codelineno-144-30" name="__codelineno-144-30" href="#__codelineno-144-30"></a>
<a id="__codelineno-144-31" name="__codelineno-144-31" href="#__codelineno-144-31"></a>
<a id="__codelineno-144-32" name="__codelineno-144-32" href="#__codelineno-144-32"></a>
<a id="__codelineno-144-33" name="__codelineno-144-33" href="#__codelineno-144-33"></a>let mut req = hyper::Request::builder().uri(url);
<a id="__codelineno-144-34" name="__codelineno-144-34" href="#__codelineno-144-34"></a>
<a id="__codelineno-144-35" name="__codelineno-144-35" href="#__codelineno-144-35"></a>
<a id="__codelineno-144-36" name="__codelineno-144-36" href="#__codelineno-144-36"></a>
<a id="__codelineno-144-37" name="__codelineno-144-37" href="#__codelineno-144-37"></a>global::get_text_map_propagator(|propagator| {
<a id="__codelineno-144-38" name="__codelineno-144-38" href="#__codelineno-144-38"></a>
<a id="__codelineno-144-39" name="__codelineno-144-39" href="#__codelineno-144-39"></a>
<a id="__codelineno-144-40" name="__codelineno-144-40" href="#__codelineno-144-40"></a>
<a id="__codelineno-144-41" name="__codelineno-144-41" href="#__codelineno-144-41"></a>propagator.inject_context(&amp;cx, &amp;mut HeaderInjector(req.headers_mut().unwrap()))
<a id="__codelineno-144-42" name="__codelineno-144-42" href="#__codelineno-144-42"></a>
<a id="__codelineno-144-43" name="__codelineno-144-43" href="#__codelineno-144-43"></a>
<a id="__codelineno-144-44" name="__codelineno-144-44" href="#__codelineno-144-44"></a>
<a id="__codelineno-144-45" name="__codelineno-144-45" href="#__codelineno-144-45"></a>});
<a id="__codelineno-144-46" name="__codelineno-144-46" href="#__codelineno-144-46"></a>
<a id="__codelineno-144-47" name="__codelineno-144-47" href="#__codelineno-144-47"></a>
<a id="__codelineno-144-48" name="__codelineno-144-48" href="#__codelineno-144-48"></a>
<a id="__codelineno-144-49" name="__codelineno-144-49" href="#__codelineno-144-49"></a>let res = client
<a id="__codelineno-144-50" name="__codelineno-144-50" href="#__codelineno-144-50"></a>
<a id="__codelineno-144-51" name="__codelineno-144-51" href="#__codelineno-144-51"></a>
<a id="__codelineno-144-52" name="__codelineno-144-52" href="#__codelineno-144-52"></a>
<a id="__codelineno-144-53" name="__codelineno-144-53" href="#__codelineno-144-53"></a>.request(req.body(Full::new(Bytes::from(body_content.to_string())))?)
<a id="__codelineno-144-54" name="__codelineno-144-54" href="#__codelineno-144-54"></a>
<a id="__codelineno-144-55" name="__codelineno-144-55" href="#__codelineno-144-55"></a>
<a id="__codelineno-144-56" name="__codelineno-144-56" href="#__codelineno-144-56"></a>
<a id="__codelineno-144-57" name="__codelineno-144-57" href="#__codelineno-144-57"></a>.await?;
<a id="__codelineno-144-58" name="__codelineno-144-58" href="#__codelineno-144-58"></a>
<a id="__codelineno-144-59" name="__codelineno-144-59" href="#__codelineno-144-59"></a>
<a id="__codelineno-144-60" name="__codelineno-144-60" href="#__codelineno-144-60"></a>
<a id="__codelineno-144-61" name="__codelineno-144-61" href="#__codelineno-144-61"></a>cx.span().add_event(
<a id="__codelineno-144-62" name="__codelineno-144-62" href="#__codelineno-144-62"></a>
<a id="__codelineno-144-63" name="__codelineno-144-63" href="#__codelineno-144-63"></a>
<a id="__codelineno-144-64" name="__codelineno-144-64" href="#__codelineno-144-64"></a>
<a id="__codelineno-144-65" name="__codelineno-144-65" href="#__codelineno-144-65"></a>&quot;Got response!&quot;,
<a id="__codelineno-144-66" name="__codelineno-144-66" href="#__codelineno-144-66"></a>
<a id="__codelineno-144-67" name="__codelineno-144-67" href="#__codelineno-144-67"></a>
<a id="__codelineno-144-68" name="__codelineno-144-68" href="#__codelineno-144-68"></a>
<a id="__codelineno-144-69" name="__codelineno-144-69" href="#__codelineno-144-69"></a>vec![KeyValue::new(&quot;status&quot;, res.status().to_string())],
<a id="__codelineno-144-70" name="__codelineno-144-70" href="#__codelineno-144-70"></a>
<a id="__codelineno-144-71" name="__codelineno-144-71" href="#__codelineno-144-71"></a>
<a id="__codelineno-144-72" name="__codelineno-144-72" href="#__codelineno-144-72"></a>
<a id="__codelineno-144-73" name="__codelineno-144-73" href="#__codelineno-144-73"></a>);
<a id="__codelineno-144-74" name="__codelineno-144-74" href="#__codelineno-144-74"></a>
<a id="__codelineno-144-75" name="__codelineno-144-75" href="#__codelineno-144-75"></a>
<a id="__codelineno-144-76" name="__codelineno-144-76" href="#__codelineno-144-76"></a>
<a id="__codelineno-144-77" name="__codelineno-144-77" href="#__codelineno-144-77"></a>Ok(())
<a id="__codelineno-144-78" name="__codelineno-144-78" href="#__codelineno-144-78"></a>
<a id="__codelineno-144-79" name="__codelineno-144-79" href="#__codelineno-144-79"></a>
<a id="__codelineno-144-80" name="__codelineno-144-80" href="#__codelineno-144-80"></a>
<a id="__codelineno-144-81" name="__codelineno-144-81" href="#__codelineno-144-81"></a>}
</code></pre></div>
<h2 id="step-4-configure-data-capture-to-meet-privacy-requirements-optional_3">Step 4 Configure data capture to meet privacy requirements Optional<a class="headerlink" href="#step-4-configure-data-capture-to-meet-privacy-requirements-optional_3" title="Permanent link">&para;</a></h2>
<p>While Dynatrace automatically captures all OpenTelemetry attributes, only attribute values specified in the allowlist are stored and displayed in the Dynatrace web UI. This prevents accidental storage of personal data, so you can meet your privacy requirements and control the amount of monitoring data stored.</p>
<p>To view your custom attributes, you need to allow them in the Dynatrace web UI first. To learn how to configure attribute storage and masking, see <a href="/docs/ingest-from/dynatrace-oneagent/oneagent-and-opentelemetry/configuration#attribute-redaction" title="Learn how to enable and configure the OneAgent Span Sensor for OpenTelemetry data.">Attribute redaction</a>.</p>
<h2 id="step-5-verify-data-ingestion-into-dynatrace_3">Step 5 Verify data ingestion into Dynatrace<a class="headerlink" href="#step-5-verify-data-ingestion-into-dynatrace_3" title="Permanent link">&para;</a></h2>
<p>Once you have finished the instrumentation of your application, perform a couple of test actions to create and send demo traces, metrics, and logs and verify that they were correctly ingested into Dynatrace.</p>
<p>To do that for traces, go to <img alt="Distributed Traces Classic" src="https://dt-cdn.net/images/distributed-traces-classic-7197cdacfb.svg" title="Distributed Traces Classic" /> <strong>Distributed Traces Classic</strong> and select the <strong>Ingested traces</strong> tab. If you use OneAgent, select <strong>PurePaths</strong> instead.</p>
<p>For metrics and logs, go to <strong>Metrics</strong> or <img alt="Logs and Events" src="https://dt-cdn.net/images/logs-and-events-512-4b43bbadbe.png" title="Logs and Events" /> <strong>Logs &amp; Events Classic</strong>.</p>
<h2 id="related-topics_18">Related topics<a class="headerlink" href="#related-topics_18" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/extend-dynatrace/extend-data" title="Learn how to automatically enrich your telemetry data with Dynatrace-specific dimensions.">Enrich ingested data with Dynatrace-specific dimensions</a></li>
</ul>
<hr />
<h2 id="source-walkthroughsmd">Source: walkthroughs.md<a class="headerlink" href="#source-walkthroughsmd" title="Permanent link">&para;</a></h2>
<hr />
<p>title: Instrument your application
source: https://www.dynatrace.com/docs/ingest-from/opentelemetry/walkthroughs
scraped: 2026-02-15T21:16:03.850421</p>
<hr />
<h1 id="instrument-your-application">Instrument your application<a class="headerlink" href="#instrument-your-application" title="Permanent link">&para;</a></h1>
<h1 id="instrument-your-application_1">Instrument your application<a class="headerlink" href="#instrument-your-application_1" title="Permanent link">&para;</a></h1>
<ul>
<li>Latest Dynatrace</li>
<li>How-to guide</li>
<li>1-min read</li>
<li>Updated on Nov 15, 2023</li>
</ul>
<p>The following walk-throughs are guided, step-by-step tutorials for the different programming languages supported by OpenTelemetry. They provide code samples on how to integrate the OpenTelemetry libraries into your application, initialize OpenTelemetry, create the different signals (that is, traces, metrics, and logs), and export the data to the Dynatrace backend.</p>
<p><a href="/docs/ingest-from/opentelemetry/walkthroughs/cpp" title="Learn how to instrument your C++ application using OpenTelemetry and Dynatrace.">### C++</a>[<img alt="Elixir" src="https://dt-cdn.net/images/elixir-logo-180-b773ecbdae.png" title="Elixir" /></p>
<h3 id="elixirdocsingest-fromopentelemetrywalkthroughselixir-learn-how-to-instrument-your-elixir-application-using-opentelemetry-and-dynatrace-erlang-go-java-javascript-net-php-python-ruby">Elixir](/docs/ingest-from/opentelemetry/walkthroughs/elixir "Learn how to instrument your Elixir application using OpenTelemetry and Dynatrace.")<a href="/docs/ingest-from/opentelemetry/walkthroughs/erlang" title="Learn how to instrument your Erlang application using OpenTelemetry and Dynatrace.">### Erlang</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/go" title="Learn how to instrument your Go application using OpenTelemetry and Dynatrace.">### Go</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/java" title="Learn how to instrument your Java application using OpenTelemetry and Dynatrace.">### Java</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/nodejs" title="Learn how to instrument your JavaScript application on Node.js using OpenTelemetry and Dynatrace.">### JavaScript</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/dotnet" title="Learn how to instrument your .NET application using OpenTelemetry and Dynatrace.">### .NET</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/php" title="Learn how to instrument your PHP application using OpenTelemetry and Dynatrace.">### PHP</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/python" title="Learn how to instrument your Python application using OpenTelemetry and Dynatrace.">### Python</a><a href="/docs/ingest-from/opentelemetry/walkthroughs/ruby" title="Learn how to instrument your Ruby application using OpenTelemetry and Dynatrace.">### Ruby</a>[<img alt="Rust" src="https://dt-cdn.net/images/rust-logo-gray-8d1a6c296b.svg" title="Rust" /><a class="headerlink" href="#elixirdocsingest-fromopentelemetrywalkthroughselixir-learn-how-to-instrument-your-elixir-application-using-opentelemetry-and-dynatrace-erlang-go-java-javascript-net-php-python-ruby" title="Permanent link">&para;</a></h3>
<h3 id="rustdocsingest-fromopentelemetrywalkthroughsrust-learn-how-to-instrument-your-rust-application-using-opentelemetry-and-dynatrace">Rust](/docs/ingest-from/opentelemetry/walkthroughs/rust "Learn how to instrument your Rust application using OpenTelemetry and Dynatrace.")<a class="headerlink" href="#rustdocsingest-fromopentelemetrywalkthroughsrust-learn-how-to-instrument-your-rust-application-using-opentelemetry-and-dynatrace" title="Permanent link">&para;</a></h3>
<h2 id="related-topics_19">Related topics<a class="headerlink" href="#related-topics_19" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="/docs/ingest-from/amazon-web-services/integrate-into-aws/aws-lambda-integration/aws-lambda-classic/opentelemetry-interoperability" title="Enable and use OpenTelemetry interoperability in AWS Lambda.">OpenTelemetry interoperability</a></li>
<li><a href="/docs/ingest-from/google-cloud-platform/gcp-integrations/gcp-functions" title="Set up monitoring for Google Cloud Functions.">Google Cloud Functions monitoring</a></li>
<li><a href="/docs/ingest-from/microsoft-azure-services/azure-integrations/azure-functions/func-dynamic-plans" title="Learn how to install, configure, update, and uninstall OneAgent for monitoring Azure Functions on serverless hosting plans">Monitor Azure Functions on Consumption Plans</a></li>
</ul>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  –ö –Ω–∞—á–∞–ª—É
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      ¬© 2026 Dynatrace Managed Docs
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Yerkebulan-Ardabayev" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "navigation.instant", "search.suggest", "search.highlight", "content.code.copy", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../assets/javascripts/groq-chat.js"></script>
      
    
  </body>
</html>