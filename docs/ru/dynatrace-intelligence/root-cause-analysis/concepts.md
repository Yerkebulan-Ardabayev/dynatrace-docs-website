---
title: Концепции анализа коренной причины
source: https://www.dynatrace.com/docs/dynatrace-intelligence/root-cause-analysis/concepts
scraped: 2026-02-27T21:10:13.729963
---

# Концепции анализа коренной причины

# Концепции анализа коренной причины

* Последнее Dynatrace
* Объяснение
* 11-минутное чтение
* Обновлено 28 января 2026 г.

По мере увеличения сложности и масштаба архитектур динамических систем команды ИТ сталкиваются с возрастающим давлением, чтобы быстро обнаруживать и реагировать на инциденты, критически важные для бизнеса, в своих многооблачных средах. Инциденты могут повлиять на один или несколько компонентов ИТ, что в конечном итоге приводит к крупным сбоям, которые выводят из строя критически важные бизнес-сервисы и приложения. Такие сервисы и приложения (например, системы учета или веб-магазины) состоят из многих различных компонентов, которые зависят друг от друга, чтобы работать надежно и обеспечивать отличный опыт пользователя. Если критически важный компонент выходит из строя, эффект домино отрицательно влияет на многие другие зависимые компоненты, что вызывает крупномасштабный инцидент.

Концепции, такие как Цели уровня обслуживания (SLO), устанавливают основу доверия между отдельными компонентами и смещают ответственность в сторону команд, которые разрабатывают и владеют этими компонентами. Хотя SLO отлично подходят для получения машинно-обрабатываемого понимания того, что такое нормальные границы работы для отдельных сервисов, они не дают более глубокого понимания причины проблемы и лучшего способа ее исправления.

Анализ коренной причины направлен на заполнение этого пробела, используя всю доступную контекстную информацию для оценки инцидента и определения его точной коренной причины. Также важно оценить влияние инцидента, что позволяет команде операций быстро классифицировать инцидент и сократить среднее время ремонта (MTTR).

Эта страница вводит следующие основные концепции:

[Инциденты и проблемы](#инциденты-проблемы)  
[События Davis](#события-davis)  
[Анализ коренной причины](#анализ-коренной-причины)  
[Анализ дерева неисправностей](#анализ-дерева-неисправностей)  
[Анализ влияния](#анализ-влияния)  
[Жизненный цикл проблемы](#жизненный-цикл-проблемы)  
[Время проблемы](#время-проблемы)  
[Дубликаты проблем](#дубликаты-проблем)

## Инциденты и проблемы

**Инцидент** - это аномалия в вашей среде - в приложении, инфраструктуре и т. д. **Проблема** - это сущность, представляющая инцидент в Dynatrace. Проблема является результатом автоматического анализа коренной причины и влияния инцидента с помощью Dynatrace Intelligence. Проблемы (как и лежащие в их основе инциденты) могут охватывать несколько зависимых компонентов, разделяя одно и то же влияние и коренную причину.

Проблема может возникнуть из одного или нескольких событий Davis, происходящих одновременно в одной и той же топологии, что часто бывает в сложных средах. Чтобы предотвратить чрезмерную сигнализацию, Dynatrace коррелирует все события Davis с одной и той же коренной причиной в одну проблему.

Все обнаруженные проблемы перечислены в ленте проблем, и Dynatrace автоматически обновляет их в режиме реального времени со всеми входящими событиями Davis и результатами.

## События Davis

События представляют различные типы единичных аномалий, таких как превышение порога метрики, ухудшение базовой линии или события Davis в определенный момент времени, такие как крахи процессов. Dynatrace также обнаруживает и обрабатывает информационные события Davis, такие как новые развертывания программного обеспечения, изменения конфигурации и другие типы событий Davis.

Dynatrace принимает и хранит события Davis из нескольких источников. Эти события могут запускать анализ коренной причины, автоматизацию или служить сырыми данными для панелей мониторинга и отчетов. Вместе с журналами, метриками и трассами события Davis обеспечивают ввод для анализа коренной причины и влияния.

Большинство событий Davis не указывают на аномальные или нездоровые состояния, поэтому только небольшая доля событий Davis учитывается в проблемах.

## Анализ коренной причины

Анализ коренной причины использует всю доступную контекстную информацию - такую как топологическая, транзакционная и кодовая информация - для определения событий Davis, которые имеют одну и ту же коренную причину и влияние.

Чтобы определить коренную причину проблем, временная корреляция alone не является достаточной. Dynatrace следует контекстно-ориентированному подходу, обнаруживая взаимозависимые события Davis во времени, процессах, хостах, сервисах, приложениях и как вертикальных, так и горизонтальных топологических мониторинговых перспектив. Этот подход объединяет несколько отдельных аномалий в одну последовательную проблему, что значительно снижает нагрузку сигнализации.

Изображение ниже иллюстрирует, как Dynatrace Intelligence анализирует все горизонтальные и вертикальные зависимости проблемы. В этом примере приложение демонстрирует аномальное поведение, в то время как лежащий в основе вертикальный стек работает нормально. Анализ следует транзакциям приложения, обнаруживая зависимость от сервиса (`Сервис 1`), который также демонстрирует аномальное поведение. В свою очередь, все зависимости сервиса также ведут себя аномально и являются частью одной и той же проблемы.

![Диаграмма корреляции](https://dt-cdn.net/images/correlation-diagram-1256-6a1abf3bdb.png)

Dynatrace Intelligence включает все актуальные аномалии и ранжирует все вкладчики коренной причины, определяя, какой из них оказывает основное негативное влияние. Вы можете углубиться до уровня компонента и проанализировать коренную причину до уровня исходного кода. Например, Dynatrace может показать неудачные методы в вашем коде сервиса или высокую активность GC в лежащих в основе процессах Java.

Почему контекстная корреляция важна?

Проблема редко бывает единичным событием Davis. Часто они появляются в регулярных узорах и являются симптомами более крупных проблем в вашей среде. Если несколько сущностей, зависящих от пострадавшего компонента, испытывают проблемы примерно в одно и то же время, все эти сущности включаются в анализ коренной причины.

Временная корреляция alone, однако, не достаточно, чтобы определить коренную причину многих проблем приложений и сервисов. Рассмотрим, например, простую временную корреляцию, в которой сервис `Booking` вызывает сервис `Verification`, и сервис `Verification` испытывает замедление. Первое событие Davis в эволюции проблемы - это замедление сервиса `Verification`. Затем сервис `Booking` также испытывает замедление, вызванное зависимостью от сервиса `Verification`. В этом случае временная корреляция работает хорошо для обнаружения коренной причины проблемы: замедления сервиса `Verification`. Однако это упрощенное описание того, что происходит в реальных приложениях.

Что, если события Davis в последовательности эволюции проблемы более тонкие и открыты для интерпретации? Что, если, например, сервис `Booking` имеет длинную историю проблем с производительностью? Без полного контекста становится невозможно решительно заключить, что замедление сервиса `Booking` вызвано замедлением сервиса `Verification`. Есть возможность, что сервис `Booking` испытывает другую проблему с производительностью, не связанную с сервисом `Verification`.

Dynatrace Intelligence использует все связанные мониторинговые данные для определения взаимозависимостей между проблемой и другими компонентами, которые произошли примерно в одно и то же время и в зависимой топологии. То есть все топологические зависимости, вертикальные и горизонтальные, являются частью анализа.

## Анализ дерева неисправностей

Модель контекста Dynatrace Intelligence построена на основе известной информации о зависимостях из Smartscape, OneAgent и облачной интеграции. Dynatrace Intelligence использует эту информацию для быстрого проведения анализа дерева неисправностей для анализа миллионов зависимостей и определения наиболее вероятной коренной причины проблемы.

## Анализ влияния

Влияние проблемы столь же важно, как и его коренная причина, поскольку оба представляют собой важную информацию для классификации и исправления лежащего в основе инцидента - проблем, которые угрожают бизнесу вашей компании, имеют более высокий приоритет для решения.

Анализ влияния определяет, какие сервисы входных точек приложений пострадали от инцидента, и размер общего "радиуса поражения" в терминах общего количества пострадавших сущностей. Анализ влияния также обеспечивает количество пострадавших SLO и количество потенциально пострадавших реальных пользователей.

В конечном итоге анализ влияния стремится определить, насколько сильно инцидент влияет на ваш бизнес.

## Жизненный цикл проблемы

Dynatrace открывает проблему при получении первого индикатора инцидента, который обычно представляет собой единичное событие Davis, представляющее аномальное поведение, такое как замедление сервиса, насыщение узла или крах и перезапуск рабочей нагрузки.

Проблема автоматически проходит жизненный цикл и остается в активном состоянии, пока существует хотя бы одна пострадавшая сущность в нездоровом или аномальном состоянии, в основном указанном активным событием Davis.

В следующем сценарии проблема, которая имеет инцидент производительности на уровне инфраструктуры, является коренной причиной.

![Срок жизни проблемы](https://dt-cdn.net/images/problemlifespan-2275-dfec42340b.png)

1. Dynatrace обнаруживает инцидент производительности на уровне инфраструктуры и создает новую проблему для целей отслеживания. Также отправляется уведомление.
2. Через несколько минут инфраструктурная проблема приводит к появлению проблемы ухудшения производительности в одном из сервисов приложения.
3. Дополнительные проблемы ухудшения производительности на уровне сервиса начинают появляться. То, что началось как изолированная инфраструктурная проблема, выросло в серию проблем на уровне сервиса, каждая из которых имеет свою коренную причину в исходном инциденте на уровне инфраструктуры.
4. В конечном итоге проблемы на уровне сервиса начинают влиять на опыт пользователя клиентов, которые взаимодействуют с приложением через настольные или мобильные браузеры. На этом этапе срока жизни проблемы у вас есть проблема приложения с одной коренной причиной на уровне инфраструктуры и дополнительными коренными причинами на уровне сервиса.
5. Поскольку Dynatrace понимает все зависимости в вашей среде, он коррелирует проблему ухудшения производительности, которую испытывают ваши клиенты, с исходной проблемой производительности на уровне инфраструктуры, что облегчает быстрое решение проблемы.

## Время возникновения проблемы

Двигатель Dynatrace Intelligence, определяющий коренную причину, собирает все события Davis, которые относятся к одной и той же инциденту. В результате искусственный интеллект Dynatrace Intelligence, основанный на причинно-следственных связях, генерирует проблему, которая ссылается на всю актуальную информацию об инциденте, такую как отдельные события Davis, которые были обнаружены на затронутой топологии графа.

Ниже показано, как два отдельных события Davis анализируются в рамках одной проблемы, сгенерированной искусственным интеллектом Dynatrace Intelligence, основанным на причинно-следственных связях.

* Каждое событие Davis имеет свои собственные временные метки начала и конца.
* Каждый производитель событий Davis использует различные скользящие временные окна наблюдения, которые мы называем временем анализа событий (показано желтым).

![Время возникновения проблемы](https://dt-cdn.net/images/problem-lifecycle-drawio-2d5919c652.svg)

Рассмотрим пример события Davis, связанного с метрикой, настроенного на использование скользящего окна размером пять минут, где три образца по одной минуте должны нарушать порог, чтобы событие Davis было сгенерировано. В этом случае метрика начинает нарушать порог за три минуты до временной метки, когда событие было сгенерировано.

* **Временная метка начала анализа события** — это самая ранняя точка во времени, когда было обнаружено состояние нарушения.
* **Временная метка конца анализа события** — это точка во времени после сбора всех необходимых образцов нарушения и открытия проблемы.
* Поскольку каждое событие Davis, участвующее в проблеме, использует скользящее окно, каждая проблема имеет период, в течение которого закрытая проблема может быть повторно открыта. Это называется **периодом повторного открытия**, и его максимальная продолжительность составляет 30 минут.
* Если проблема остается открытой более 90 минут, новые события не будут объединены с ней после 90-минутной точки. Это предотвращает сбор Dynatrace Intelligence искусственным интеллектом, основанным на причинно-следственных связях, не связанной информации для длительных инцидентов (например, синтетического теста, который постоянно терпит неудачу и держит проблемы открытыми в течение недель).

#### Сводка временных рамок жизненного цикла проблемы:

* Отдельные события Davis используют переменные скользящие временные окна.
* Проблема возникает в **временной метке конца анализа события**.
* Продолжительность жизни проблемы определяется продолжительностью жизни отдельных событий Davis в проблеме.
* Проблема закрывается, когда все события Davis в проблеме закрыты.
* Закрытая проблема может быть повторно открыта в течение периода повторного открытия размером 30 минут.
* Если проблема длится более 90 минут, новые события Davis не будут объединены после 90-минутной точки — вместо этого будет сгенерирована новая проблема.
* Если временной зазор между созданием (временной меткой начала) первых событий Davis превышает 5 минут, события Davis не будут объединены в одну проблему. Вместо этого они будут идентифицированы как две разные проблемы.

## Дубликаты проблем

Обнаружение и анализ крупномасштабного инцидента всегда требует баланса между быстрым оповещением и полной картиной ситуации. Сбор данных является асинхронным по своей природе из-за различных окон наблюдения, различных графиков синтетических проверок и различных задержек информации, исходящей из различных источников данных.

Асинхронная обработка входящей информации приводит к ситуациям, когда обнаружение коренной причины идентифицирует две проблемы, которые имеют одну и ту же коренную причину.

* На момент обнаружения анализ коренной причины может не иметь необходимой информации, чтобы соединить обе проблемы в один инцидент.
* После учета задержанной информации и определения основной проблемы другие идентичные проблемы маркируются как дубликаты (`dt.davis.is_duplicate=true`).

Дубликаты можно было бы полностью избежать, если бы подождали более длительный период (например, 30 минут), чтобы получить всю возможную информацию, но это задержит оповещения команд операций.

Из-за критичности реального времени принимаются потенциально неполная информация и дубликаты проблем, чтобы обеспечить самое быстрое возможное оповещение.

## Состояние обработки проблемы

После обнаружения проблемы Dynatrace Intelligence искусственным интеллектом, основанным на причинно-следственных связях, она переходит в состояние `Обработка`. Это означает, что искусственный интеллект анализирует событие Davis, чтобы определить, нужно ли его объединить с более значительной проблемой. Состояние `Обработка` направлено на избежание дубликатов проблем и ложных тревог, поэтому оповещения не отправляются, пока состояние не изменится. Анализ и сбор информации, необходимых для принятия решения искусственным интеллектом, обычно занимают до 3 минут.

Ниже можно найти пример проблемы в состоянии `Обработка`.

![Обнаруженная проблема, проходящая через состояние "Обработка"](https://dt-cdn.net/images/problem-processing-state-934-2c9e3ab22e.png)

Если вы хотите получать оповещения сразу после обнаружения проблемы, вы можете использовать настраиваемое оповещение с [Событиями метрик](/docs/dynatrace-intelligence/anomaly-detection/metric-events "Узнайте о событиях метрик в Dynatrace"). В этом случае флаги `dt.davis.trigger_delay` и `dt.davis.analysis_time` события Davis будут установлены в `0`. Проблема не войдет в состояние `Обработка`, и анализ искусственным интеллектом не будет выполнен.

Альтернативно, вы можете настроить состояние обработки для каждого источника событий Davis в конфигурации [Событий журнала](/docs/analyze-explore-automate/logs/lma-analysis "Изучите данные журнала с помощью просмотрщика журналов или создайте настраиваемые атрибуты, события журнала и метрики для обработки и анализа ваших данных журнала в Dynatrace.")